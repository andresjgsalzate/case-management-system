const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D0X1IP5Y.js","assets/index-B0EvLJak.js","assets/index-Ch_qCilz.js","assets/default-0Dp3JUBc.js","assets/index-BbUS3CW7.js","assets/index-D149j8az.js","assets/index-CGTeKkTr.js","assets/index-CknMtToR.js","assets/index-Cf_jEdcH.js","assets/index-Bf82-ecq.js","assets/index-DpipQwVu.js","assets/index-DTzQ7r7Q.js","assets/index-3OOFrDax.js","assets/index-C_aolqmU.js","assets/index-Dss-okuC.js","assets/blank-line-BG01O9Yh.js","assets/index-DHi8YOcF.js","assets/index-Bw547M5W.js","assets/index-CF1ZHiCu.js","assets/index-Cc-sgT2Y.js","assets/index-Tlm8e_FK.js","assets/index-BNLM2Si7.js","assets/index-CmeJremU.js","assets/index-DbTOtaR4.js","assets/html-B8pBdPMQ.js","assets/javascript-BMMyXqK5.js","assets/css-DPfMkruS.js","assets/cpp-CofmeUqb.js","assets/regexp-CDVJQ6XC.js","assets/glsl-DplSGwfg.js","assets/c-BIGW1oBm.js","assets/sql-BLtJtn59.js","assets/php-Gk5eUrPQ.js","assets/xml-sdJ4AIDG.js","assets/java-CylS5w8V.js","assets/json-Cp-IABpG.js","assets/ruby-B3cFAIbZ.js","assets/haml-AZXGPtNI.js","assets/graphql-Caa12_AY.js","assets/typescript-DlfHMoPT.js","assets/jsx-g9-lgVsj.js","assets/tsx-COt5Ahok.js","assets/bash-SHvotRv0.js","assets/lua-BbnMAYS6.js","assets/yaml-Buea-lGh.js"])))=>i.map(i=>d[i]);
var NZ=Object.defineProperty;var SZ=Object.getPrototypeOf;var EZ=Reflect.get;var OA=t=>{throw TypeError(t)};var jZ=(t,e,r)=>e in t?NZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ve=(t,e,r)=>jZ(t,typeof e!="symbol"?e+"":e,r),dC=(t,e,r)=>e.has(t)||OA("Cannot "+r);var se=(t,e,r)=>(dC(t,e,"read from private field"),r?r.call(t):e.get(t)),dt=(t,e,r)=>e.has(t)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),qe=(t,e,r,n)=>(dC(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Tt=(t,e,r)=>(dC(t,e,"access private method"),r);var Ry=(t,e,r,n)=>({set _(s){qe(t,e,s,r)},get _(){return se(t,e,n)}}),RA=(t,e,r)=>EZ(SZ(t),r,e);function TZ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var _Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function sk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sBe(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var rD={exports:{}},ak={},nD={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px=Symbol.for("react.element"),AZ=Symbol.for("react.portal"),MZ=Symbol.for("react.fragment"),OZ=Symbol.for("react.strict_mode"),RZ=Symbol.for("react.profiler"),PZ=Symbol.for("react.provider"),IZ=Symbol.for("react.context"),DZ=Symbol.for("react.forward_ref"),LZ=Symbol.for("react.suspense"),$Z=Symbol.for("react.memo"),FZ=Symbol.for("react.lazy"),PA=Symbol.iterator;function BZ(t){return t===null||typeof t!="object"?null:(t=PA&&t[PA]||t["@@iterator"],typeof t=="function"?t:null)}var sD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aD=Object.assign,iD={};function ap(t,e,r){this.props=t,this.context=e,this.refs=iD,this.updater=r||sD}ap.prototype.isReactComponent={};ap.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ap.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oD(){}oD.prototype=ap.prototype;function r5(t,e,r){this.props=t,this.context=e,this.refs=iD,this.updater=r||sD}var n5=r5.prototype=new oD;n5.constructor=r5;aD(n5,ap.prototype);n5.isPureReactComponent=!0;var IA=Array.isArray,lD=Object.prototype.hasOwnProperty,s5={current:null},cD={key:!0,ref:!0,__self:!0,__source:!0};function dD(t,e,r){var n,s={},a=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(a=""+e.key),e)lD.call(e,n)&&!cD.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Px,type:t,key:a,ref:i,props:s,_owner:s5.current}}function zZ(t,e){return{$$typeof:Px,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function a5(t){return typeof t=="object"&&t!==null&&t.$$typeof===Px}function UZ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var DA=/\/+/g;function uC(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UZ(""+t.key):e.toString(36)}function z1(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Px:case AZ:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+uC(i,0):n,IA(s)?(r="",t!=null&&(r=t.replace(DA,"$&/")+"/"),z1(s,e,r,"",function(d){return d})):s!=null&&(a5(s)&&(s=zZ(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(DA,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",IA(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+uC(a,l);i+=z1(a,e,r,c,s)}else if(c=BZ(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+uC(a,l++),i+=z1(a,e,r,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Py(t,e,r){if(t==null)return t;var n=[],s=0;return z1(t,n,"","",function(a){return e.call(r,a,s++)}),n}function VZ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qs={current:null},U1={transition:null},HZ={ReactCurrentDispatcher:Qs,ReactCurrentBatchConfig:U1,ReactCurrentOwner:s5};function uD(){throw Error("act(...) is not supported in production builds of React.")}Bt.Children={map:Py,forEach:function(t,e,r){Py(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Py(t,function(){e++}),e},toArray:function(t){return Py(t,function(e){return e})||[]},only:function(t){if(!a5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Bt.Component=ap;Bt.Fragment=MZ;Bt.Profiler=RZ;Bt.PureComponent=r5;Bt.StrictMode=OZ;Bt.Suspense=LZ;Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HZ;Bt.act=uD;Bt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=aD({},t.props),s=t.key,a=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,i=s5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)lD.call(e,c)&&!cD.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Px,type:t.type,key:s,ref:a,props:n,_owner:i}};Bt.createContext=function(t){return t={$$typeof:IZ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PZ,_context:t},t.Consumer=t};Bt.createElement=dD;Bt.createFactory=function(t){var e=dD.bind(null,t);return e.type=t,e};Bt.createRef=function(){return{current:null}};Bt.forwardRef=function(t){return{$$typeof:DZ,render:t}};Bt.isValidElement=a5;Bt.lazy=function(t){return{$$typeof:FZ,_payload:{_status:-1,_result:t},_init:VZ}};Bt.memo=function(t,e){return{$$typeof:$Z,type:t,compare:e===void 0?null:e}};Bt.startTransition=function(t){var e=U1.transition;U1.transition={};try{t()}finally{U1.transition=e}};Bt.unstable_act=uD;Bt.useCallback=function(t,e){return Qs.current.useCallback(t,e)};Bt.useContext=function(t){return Qs.current.useContext(t)};Bt.useDebugValue=function(){};Bt.useDeferredValue=function(t){return Qs.current.useDeferredValue(t)};Bt.useEffect=function(t,e){return Qs.current.useEffect(t,e)};Bt.useId=function(){return Qs.current.useId()};Bt.useImperativeHandle=function(t,e,r){return Qs.current.useImperativeHandle(t,e,r)};Bt.useInsertionEffect=function(t,e){return Qs.current.useInsertionEffect(t,e)};Bt.useLayoutEffect=function(t,e){return Qs.current.useLayoutEffect(t,e)};Bt.useMemo=function(t,e){return Qs.current.useMemo(t,e)};Bt.useReducer=function(t,e,r){return Qs.current.useReducer(t,e,r)};Bt.useRef=function(t){return Qs.current.useRef(t)};Bt.useState=function(t){return Qs.current.useState(t)};Bt.useSyncExternalStore=function(t,e,r){return Qs.current.useSyncExternalStore(t,e,r)};Bt.useTransition=function(){return Qs.current.useTransition()};Bt.version="18.3.1";nD.exports=Bt;var x=nD.exports;const st=sk(x),hD=TZ({__proto__:null,default:st},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WZ=x,qZ=Symbol.for("react.element"),GZ=Symbol.for("react.fragment"),KZ=Object.prototype.hasOwnProperty,ZZ=WZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YZ={key:!0,ref:!0,__self:!0,__source:!0};function fD(t,e,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)KZ.call(e,n)&&!YZ.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:qZ,type:t,key:a,ref:i,props:s,_owner:ZZ.current}}ak.Fragment=GZ;ak.jsx=fD;ak.jsxs=fD;rD.exports=ak;var o=rD.exports,LS={},mD={exports:{}},Qa={},pD={exports:{}},gD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_,H){var P=_.length;_.push(H);e:for(;0<P;){var K=P-1>>>1,F=_[K];if(0<s(F,H))_[K]=H,_[P]=F,P=K;else break e}}function r(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var H=_[0],P=_.pop();if(P!==H){_[0]=P;e:for(var K=0,F=_.length,ne=F>>>1;K<ne;){var z=2*(K+1)-1,Z=_[z],oe=z+1,ue=_[oe];if(0>s(Z,P))oe<F&&0>s(ue,Z)?(_[K]=ue,_[oe]=P,K=oe):(_[K]=Z,_[z]=P,K=z);else if(oe<F&&0>s(ue,P))_[K]=ue,_[oe]=P,K=oe;else break e}}return H}function s(_,H){var P=_.sortIndex-H.sortIndex;return P!==0?P:_.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(_){for(var H=r(d);H!==null;){if(H.callback===null)n(d);else if(H.startTime<=_)n(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=r(d)}}function k(_){if(g=!1,w(_),!p)if(r(c)!==null)p=!0,Q(N);else{var H=r(d);H!==null&&J(k,H.startTime-_)}}function N(_,H){p=!1,g&&(g=!1,b(E),E=-1),m=!0;var P=f;try{for(w(H),h=r(c);h!==null&&(!(h.expirationTime>H)||_&&!B());){var K=h.callback;if(typeof K=="function"){h.callback=null,f=h.priorityLevel;var F=K(h.expirationTime<=H);H=t.unstable_now(),typeof F=="function"?h.callback=F:h===r(c)&&n(c),w(H)}else n(c);h=r(c)}if(h!==null)var ne=!0;else{var z=r(d);z!==null&&J(k,z.startTime-H),ne=!1}return ne}finally{h=null,f=P,m=!1}}var S=!1,C=null,E=-1,T=5,R=-1;function B(){return!(t.unstable_now()-R<T)}function M(){if(C!==null){var _=t.unstable_now();R=_;var H=!0;try{H=C(!0,_)}finally{H?L():(S=!1,C=null)}}else S=!1}var L;if(typeof v=="function")L=function(){v(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ee=V.port2;V.port1.onmessage=M,L=function(){ee.postMessage(null)}}else L=function(){y(M,0)};function Q(_){C=_,S||(S=!0,L())}function J(_,H){E=y(function(){_(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,Q(N))},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(_){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var P=f;f=H;try{return _()}finally{f=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_,H){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var P=f;f=_;try{return H()}finally{f=P}},t.unstable_scheduleCallback=function(_,H,P){var K=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?K+P:K):P=K,_){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=P+F,_={id:u++,callback:H,priorityLevel:_,startTime:P,expirationTime:F,sortIndex:-1},P>K?(_.sortIndex=P,e(d,_),r(c)===null&&_===r(d)&&(g?(b(E),E=-1):g=!0,J(k,P-K))):(_.sortIndex=F,e(c,_),p||m||(p=!0,Q(N))),_},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(_){var H=f;return function(){var P=f;f=H;try{return _.apply(this,arguments)}finally{f=P}}}})(gD);pD.exports=gD;var XZ=pD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JZ=x,Ua=XZ;function De(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xD=new Set,xg={};function Rh(t,e){jm(t,e),jm(t+"Capture",e)}function jm(t,e){for(xg[t]=e,t=0;t<e.length;t++)xD.add(e[t])}var Jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$S=Object.prototype.hasOwnProperty,QZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LA={},$A={};function eY(t){return $S.call($A,t)?!0:$S.call(LA,t)?!1:QZ.test(t)?$A[t]=!0:(LA[t]=!0,!1)}function tY(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rY(t,e,r,n){if(e===null||typeof e>"u"||tY(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ea(t,e,r,n,s,a,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=i}var hs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hs[t]=new ea(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hs[e]=new ea(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hs[t]=new ea(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hs[t]=new ea(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hs[t]=new ea(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hs[t]=new ea(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hs[t]=new ea(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hs[t]=new ea(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hs[t]=new ea(t,5,!1,t.toLowerCase(),null,!1,!1)});var i5=/[\-:]([a-z])/g;function o5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(i5,o5);hs[e]=new ea(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(i5,o5);hs[e]=new ea(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(i5,o5);hs[e]=new ea(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hs[t]=new ea(t,1,!1,t.toLowerCase(),null,!1,!1)});hs.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hs[t]=new ea(t,1,!1,t.toLowerCase(),null,!0,!0)});function l5(t,e,r,n){var s=hs.hasOwnProperty(e)?hs[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rY(e,r,s,n)&&(r=null),n||s===null?eY(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var dc=JZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Iy=Symbol.for("react.element"),Nf=Symbol.for("react.portal"),Sf=Symbol.for("react.fragment"),c5=Symbol.for("react.strict_mode"),FS=Symbol.for("react.profiler"),yD=Symbol.for("react.provider"),vD=Symbol.for("react.context"),d5=Symbol.for("react.forward_ref"),BS=Symbol.for("react.suspense"),zS=Symbol.for("react.suspense_list"),u5=Symbol.for("react.memo"),_c=Symbol.for("react.lazy"),bD=Symbol.for("react.offscreen"),FA=Symbol.iterator;function Zp(t){return t===null||typeof t!="object"?null:(t=FA&&t[FA]||t["@@iterator"],typeof t=="function"?t:null)}var Jr=Object.assign,hC;function k0(t){if(hC===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);hC=e&&e[1]||""}return`
`+hC+t}var fC=!1;function mC(t,e){if(!t||fC)return"";fC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{fC=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?k0(t):""}function nY(t){switch(t.tag){case 5:return k0(t.type);case 16:return k0("Lazy");case 13:return k0("Suspense");case 19:return k0("SuspenseList");case 0:case 2:case 15:return t=mC(t.type,!1),t;case 11:return t=mC(t.type.render,!1),t;case 1:return t=mC(t.type,!0),t;default:return""}}function US(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sf:return"Fragment";case Nf:return"Portal";case FS:return"Profiler";case c5:return"StrictMode";case BS:return"Suspense";case zS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vD:return(t.displayName||"Context")+".Consumer";case yD:return(t._context.displayName||"Context")+".Provider";case d5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case u5:return e=t.displayName||null,e!==null?e:US(t.type)||"Memo";case _c:e=t._payload,t=t._init;try{return US(t(e))}catch{}}return null}function sY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return US(e);case 8:return e===c5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ad(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aY(t){var e=wD(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dy(t){t._valueTracker||(t._valueTracker=aY(t))}function kD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=wD(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function jv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function VS(t,e){var r=e.checked;return Jr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function BA(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ad(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CD(t,e){e=e.checked,e!=null&&l5(t,"checked",e,!1)}function HS(t,e){CD(t,e);var r=Ad(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?WS(t,e.type,r):e.hasOwnProperty("defaultValue")&&WS(t,e.type,Ad(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zA(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function WS(t,e,r){(e!=="number"||jv(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var C0=Array.isArray;function zf(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ad(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(De(91));return Jr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UA(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(De(92));if(C0(r)){if(1<r.length)throw Error(De(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ad(r)}}function ND(t,e){var r=Ad(e.value),n=Ad(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function VA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function GS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ly,ED=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ly=Ly||document.createElement("div"),Ly.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ly.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yg(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var L0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iY=["Webkit","ms","Moz","O"];Object.keys(L0).forEach(function(t){iY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),L0[e]=L0[t]})});function jD(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||L0.hasOwnProperty(t)&&L0[t]?(""+e).trim():e+"px"}function TD(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=jD(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var oY=Jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KS(t,e){if(e){if(oY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(De(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(De(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(De(61))}if(e.style!=null&&typeof e.style!="object")throw Error(De(62))}}function ZS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YS=null;function h5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var XS=null,Uf=null,Vf=null;function HA(t){if(t=Lx(t)){if(typeof XS!="function")throw Error(De(280));var e=t.stateNode;e&&(e=dk(e),XS(t.stateNode,t.type,e))}}function _D(t){Uf?Vf?Vf.push(t):Vf=[t]:Uf=t}function AD(){if(Uf){var t=Uf,e=Vf;if(Vf=Uf=null,HA(t),e)for(t=0;t<e.length;t++)HA(e[t])}}function MD(t,e){return t(e)}function OD(){}var pC=!1;function RD(t,e,r){if(pC)return t(e,r);pC=!0;try{return MD(t,e,r)}finally{pC=!1,(Uf!==null||Vf!==null)&&(OD(),AD())}}function vg(t,e){var r=t.stateNode;if(r===null)return null;var n=dk(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(De(231,e,typeof r));return r}var JS=!1;if(Jl)try{var Yp={};Object.defineProperty(Yp,"passive",{get:function(){JS=!0}}),window.addEventListener("test",Yp,Yp),window.removeEventListener("test",Yp,Yp)}catch{JS=!1}function lY(t,e,r,n,s,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var $0=!1,Tv=null,_v=!1,QS=null,cY={onError:function(t){$0=!0,Tv=t}};function dY(t,e,r,n,s,a,i,l,c){$0=!1,Tv=null,lY.apply(cY,arguments)}function uY(t,e,r,n,s,a,i,l,c){if(dY.apply(this,arguments),$0){if($0){var d=Tv;$0=!1,Tv=null}else throw Error(De(198));_v||(_v=!0,QS=d)}}function Ph(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function PD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WA(t){if(Ph(t)!==t)throw Error(De(188))}function hY(t){var e=t.alternate;if(!e){if(e=Ph(t),e===null)throw Error(De(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return WA(s),t;if(a===n)return WA(s),e;a=a.sibling}throw Error(De(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(De(189))}}if(r.alternate!==n)throw Error(De(190))}if(r.tag!==3)throw Error(De(188));return r.stateNode.current===r?t:e}function ID(t){return t=hY(t),t!==null?DD(t):null}function DD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DD(t);if(e!==null)return e;t=t.sibling}return null}var LD=Ua.unstable_scheduleCallback,qA=Ua.unstable_cancelCallback,fY=Ua.unstable_shouldYield,mY=Ua.unstable_requestPaint,dn=Ua.unstable_now,pY=Ua.unstable_getCurrentPriorityLevel,f5=Ua.unstable_ImmediatePriority,$D=Ua.unstable_UserBlockingPriority,Av=Ua.unstable_NormalPriority,gY=Ua.unstable_LowPriority,FD=Ua.unstable_IdlePriority,ik=null,zo=null;function xY(t){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot(ik,t,void 0,(t.current.flags&128)===128)}catch{}}var to=Math.clz32?Math.clz32:bY,yY=Math.log,vY=Math.LN2;function bY(t){return t>>>=0,t===0?32:31-(yY(t)/vY|0)|0}var $y=64,Fy=4194304;function N0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mv(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=N0(l):(a&=i,a!==0&&(n=N0(a)))}else i=r&~s,i!==0?n=N0(i):a!==0&&(n=N0(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-to(e),s=1<<r,n|=t[r],e&=~s;return n}function wY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kY(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var i=31-to(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=wY(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function eE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BD(){var t=$y;return $y<<=1,!($y&4194240)&&($y=64),t}function gC(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ix(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-to(e),t[e]=r}function CY(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-to(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function m5(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-to(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var vr=0;function zD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UD,p5,VD,HD,WD,tE=!1,By=[],hd=null,fd=null,md=null,bg=new Map,wg=new Map,Ic=[],NY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GA(t,e){switch(t){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":md=null;break;case"pointerover":case"pointerout":bg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wg.delete(e.pointerId)}}function Xp(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Lx(e),e!==null&&p5(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function SY(t,e,r,n,s){switch(e){case"focusin":return hd=Xp(hd,t,e,r,n,s),!0;case"dragenter":return fd=Xp(fd,t,e,r,n,s),!0;case"mouseover":return md=Xp(md,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return bg.set(a,Xp(bg.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,wg.set(a,Xp(wg.get(a)||null,t,e,r,n,s)),!0}return!1}function qD(t){var e=Su(t.target);if(e!==null){var r=Ph(e);if(r!==null){if(e=r.tag,e===13){if(e=PD(r),e!==null){t.blockedOn=e,WD(t.priority,function(){VD(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function V1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=rE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);YS=n,r.target.dispatchEvent(n),YS=null}else return e=Lx(r),e!==null&&p5(e),t.blockedOn=r,!1;e.shift()}return!0}function KA(t,e,r){V1(t)&&r.delete(e)}function EY(){tE=!1,hd!==null&&V1(hd)&&(hd=null),fd!==null&&V1(fd)&&(fd=null),md!==null&&V1(md)&&(md=null),bg.forEach(KA),wg.forEach(KA)}function Jp(t,e){t.blockedOn===e&&(t.blockedOn=null,tE||(tE=!0,Ua.unstable_scheduleCallback(Ua.unstable_NormalPriority,EY)))}function kg(t){function e(s){return Jp(s,t)}if(0<By.length){Jp(By[0],t);for(var r=1;r<By.length;r++){var n=By[r];n.blockedOn===t&&(n.blockedOn=null)}}for(hd!==null&&Jp(hd,t),fd!==null&&Jp(fd,t),md!==null&&Jp(md,t),bg.forEach(e),wg.forEach(e),r=0;r<Ic.length;r++)n=Ic[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ic.length&&(r=Ic[0],r.blockedOn===null);)qD(r),r.blockedOn===null&&Ic.shift()}var Hf=dc.ReactCurrentBatchConfig,Ov=!0;function jY(t,e,r,n){var s=vr,a=Hf.transition;Hf.transition=null;try{vr=1,g5(t,e,r,n)}finally{vr=s,Hf.transition=a}}function TY(t,e,r,n){var s=vr,a=Hf.transition;Hf.transition=null;try{vr=4,g5(t,e,r,n)}finally{vr=s,Hf.transition=a}}function g5(t,e,r,n){if(Ov){var s=rE(t,e,r,n);if(s===null)EC(t,e,n,Rv,r),GA(t,n);else if(SY(s,t,e,r,n))n.stopPropagation();else if(GA(t,n),e&4&&-1<NY.indexOf(t)){for(;s!==null;){var a=Lx(s);if(a!==null&&UD(a),a=rE(t,e,r,n),a===null&&EC(t,e,n,Rv,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else EC(t,e,n,null,r)}}var Rv=null;function rE(t,e,r,n){if(Rv=null,t=h5(n),t=Su(t),t!==null)if(e=Ph(t),e===null)t=null;else if(r=e.tag,r===13){if(t=PD(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rv=t,null}function GD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pY()){case f5:return 1;case $D:return 4;case Av:case gY:return 16;case FD:return 536870912;default:return 16}default:return 16}}var ed=null,x5=null,H1=null;function KD(){if(H1)return H1;var t,e=x5,r=e.length,n,s="value"in ed?ed.value:ed.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[a-n];n++);return H1=s.slice(t,1<n?1-n:void 0)}function W1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zy(){return!0}function ZA(){return!1}function ei(t){function e(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zy:ZA,this.isPropagationStopped=ZA,this}return Jr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zy)},persist:function(){},isPersistent:zy}),e}var ip={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y5=ei(ip),Dx=Jr({},ip,{view:0,detail:0}),_Y=ei(Dx),xC,yC,Qp,ok=Jr({},Dx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qp&&(Qp&&t.type==="mousemove"?(xC=t.screenX-Qp.screenX,yC=t.screenY-Qp.screenY):yC=xC=0,Qp=t),xC)},movementY:function(t){return"movementY"in t?t.movementY:yC}}),YA=ei(ok),AY=Jr({},ok,{dataTransfer:0}),MY=ei(AY),OY=Jr({},Dx,{relatedTarget:0}),vC=ei(OY),RY=Jr({},ip,{animationName:0,elapsedTime:0,pseudoElement:0}),PY=ei(RY),IY=Jr({},ip,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DY=ei(IY),LY=Jr({},ip,{data:0}),XA=ei(LY),$Y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zY(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BY[t])?!!e[t]:!1}function v5(){return zY}var UY=Jr({},Dx,{key:function(t){if(t.key){var e=$Y[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=W1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FY[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v5,charCode:function(t){return t.type==="keypress"?W1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?W1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VY=ei(UY),HY=Jr({},ok,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JA=ei(HY),WY=Jr({},Dx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v5}),qY=ei(WY),GY=Jr({},ip,{propertyName:0,elapsedTime:0,pseudoElement:0}),KY=ei(GY),ZY=Jr({},ok,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YY=ei(ZY),XY=[9,13,27,32],b5=Jl&&"CompositionEvent"in window,F0=null;Jl&&"documentMode"in document&&(F0=document.documentMode);var JY=Jl&&"TextEvent"in window&&!F0,ZD=Jl&&(!b5||F0&&8<F0&&11>=F0),QA=" ",e6=!1;function YD(t,e){switch(t){case"keyup":return XY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ef=!1;function QY(t,e){switch(t){case"compositionend":return XD(e);case"keypress":return e.which!==32?null:(e6=!0,QA);case"textInput":return t=e.data,t===QA&&e6?null:t;default:return null}}function eX(t,e){if(Ef)return t==="compositionend"||!b5&&YD(t,e)?(t=KD(),H1=x5=ed=null,Ef=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZD&&e.locale!=="ko"?null:e.data;default:return null}}var tX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tX[t.type]:e==="textarea"}function JD(t,e,r,n){_D(n),e=Pv(e,"onChange"),0<e.length&&(r=new y5("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var B0=null,Cg=null;function rX(t){cL(t,0)}function lk(t){var e=_f(t);if(kD(e))return t}function nX(t,e){if(t==="change")return e}var QD=!1;if(Jl){var bC;if(Jl){var wC="oninput"in document;if(!wC){var r6=document.createElement("div");r6.setAttribute("oninput","return;"),wC=typeof r6.oninput=="function"}bC=wC}else bC=!1;QD=bC&&(!document.documentMode||9<document.documentMode)}function n6(){B0&&(B0.detachEvent("onpropertychange",eL),Cg=B0=null)}function eL(t){if(t.propertyName==="value"&&lk(Cg)){var e=[];JD(e,Cg,t,h5(t)),RD(rX,e)}}function sX(t,e,r){t==="focusin"?(n6(),B0=e,Cg=r,B0.attachEvent("onpropertychange",eL)):t==="focusout"&&n6()}function aX(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lk(Cg)}function iX(t,e){if(t==="click")return lk(e)}function oX(t,e){if(t==="input"||t==="change")return lk(e)}function lX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ao=typeof Object.is=="function"?Object.is:lX;function Ng(t,e){if(ao(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!$S.call(e,s)||!ao(t[s],e[s]))return!1}return!0}function s6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a6(t,e){var r=s6(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=s6(r)}}function tL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rL(){for(var t=window,e=jv();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=jv(t.document)}return e}function w5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cX(t){var e=rL(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&tL(r.ownerDocument.documentElement,r)){if(n!==null&&w5(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=a6(r,a);var i=a6(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dX=Jl&&"documentMode"in document&&11>=document.documentMode,jf=null,nE=null,z0=null,sE=!1;function i6(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sE||jf==null||jf!==jv(n)||(n=jf,"selectionStart"in n&&w5(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),z0&&Ng(z0,n)||(z0=n,n=Pv(nE,"onSelect"),0<n.length&&(e=new y5("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=jf)))}function Uy(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Tf={animationend:Uy("Animation","AnimationEnd"),animationiteration:Uy("Animation","AnimationIteration"),animationstart:Uy("Animation","AnimationStart"),transitionend:Uy("Transition","TransitionEnd")},kC={},nL={};Jl&&(nL=document.createElement("div").style,"AnimationEvent"in window||(delete Tf.animationend.animation,delete Tf.animationiteration.animation,delete Tf.animationstart.animation),"TransitionEvent"in window||delete Tf.transitionend.transition);function ck(t){if(kC[t])return kC[t];if(!Tf[t])return t;var e=Tf[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in nL)return kC[t]=e[r];return t}var sL=ck("animationend"),aL=ck("animationiteration"),iL=ck("animationstart"),oL=ck("transitionend"),lL=new Map,o6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kd(t,e){lL.set(t,e),Rh(e,[t])}for(var CC=0;CC<o6.length;CC++){var NC=o6[CC],uX=NC.toLowerCase(),hX=NC[0].toUpperCase()+NC.slice(1);Kd(uX,"on"+hX)}Kd(sL,"onAnimationEnd");Kd(aL,"onAnimationIteration");Kd(iL,"onAnimationStart");Kd("dblclick","onDoubleClick");Kd("focusin","onFocus");Kd("focusout","onBlur");Kd(oL,"onTransitionEnd");jm("onMouseEnter",["mouseout","mouseover"]);jm("onMouseLeave",["mouseout","mouseover"]);jm("onPointerEnter",["pointerout","pointerover"]);jm("onPointerLeave",["pointerout","pointerover"]);Rh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var S0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fX=new Set("cancel close invalid load scroll toggle".split(" ").concat(S0));function l6(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,uY(n,e,void 0,t),t.currentTarget=null}function cL(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;l6(s,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;l6(s,l,d),a=c}}}if(_v)throw t=QS,_v=!1,QS=null,t}function Fr(t,e){var r=e[cE];r===void 0&&(r=e[cE]=new Set);var n=t+"__bubble";r.has(n)||(dL(e,t,2,!1),r.add(n))}function SC(t,e,r){var n=0;e&&(n|=4),dL(r,t,n,e)}var Vy="_reactListening"+Math.random().toString(36).slice(2);function Sg(t){if(!t[Vy]){t[Vy]=!0,xD.forEach(function(r){r!=="selectionchange"&&(fX.has(r)||SC(r,!1,t),SC(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vy]||(e[Vy]=!0,SC("selectionchange",!1,e))}}function dL(t,e,r,n){switch(GD(e)){case 1:var s=jY;break;case 4:s=TY;break;default:s=g5}r=s.bind(null,e,r,t),s=void 0,!JS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function EC(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Su(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}RD(function(){var d=a,u=h5(r),h=[];e:{var f=lL.get(t);if(f!==void 0){var m=y5,p=t;switch(t){case"keypress":if(W1(r)===0)break e;case"keydown":case"keyup":m=VY;break;case"focusin":p="focus",m=vC;break;case"focusout":p="blur",m=vC;break;case"beforeblur":case"afterblur":m=vC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=MY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=qY;break;case sL:case aL:case iL:m=PY;break;case oL:m=KY;break;case"scroll":m=_Y;break;case"wheel":m=YY;break;case"copy":case"cut":case"paste":m=DY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=JA}var g=(e&4)!==0,y=!g&&t==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var v=d,w;v!==null;){w=v;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,b!==null&&(k=vg(v,b),k!=null&&g.push(Eg(v,k,w)))),y)break;v=v.return}0<g.length&&(f=new m(f,p,null,r,u),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==YS&&(p=r.relatedTarget||r.fromElement)&&(Su(p)||p[Ql]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=r.relatedTarget||r.toElement,m=d,p=p?Su(p):null,p!==null&&(y=Ph(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(g=YA,k="onMouseLeave",b="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=JA,k="onPointerLeave",b="onPointerEnter",v="pointer"),y=m==null?f:_f(m),w=p==null?f:_f(p),f=new g(k,v+"leave",m,r,u),f.target=y,f.relatedTarget=w,k=null,Su(u)===d&&(g=new g(b,v+"enter",p,r,u),g.target=w,g.relatedTarget=y,k=g),y=k,m&&p)t:{for(g=m,b=p,v=0,w=g;w;w=Xh(w))v++;for(w=0,k=b;k;k=Xh(k))w++;for(;0<v-w;)g=Xh(g),v--;for(;0<w-v;)b=Xh(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=Xh(g),b=Xh(b)}g=null}else g=null;m!==null&&c6(h,f,m,g,!1),p!==null&&y!==null&&c6(h,y,p,g,!0)}}e:{if(f=d?_f(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=nX;else if(t6(f))if(QD)N=oX;else{N=aX;var S=sX}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=iX);if(N&&(N=N(t,d))){JD(h,N,r,u);break e}S&&S(t,f,d),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&WS(f,"number",f.value)}switch(S=d?_f(d):window,t){case"focusin":(t6(S)||S.contentEditable==="true")&&(jf=S,nE=d,z0=null);break;case"focusout":z0=nE=jf=null;break;case"mousedown":sE=!0;break;case"contextmenu":case"mouseup":case"dragend":sE=!1,i6(h,r,u);break;case"selectionchange":if(dX)break;case"keydown":case"keyup":i6(h,r,u)}var C;if(b5)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ef?YD(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(ZD&&r.locale!=="ko"&&(Ef||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ef&&(C=KD()):(ed=u,x5="value"in ed?ed.value:ed.textContent,Ef=!0)),S=Pv(d,E),0<S.length&&(E=new XA(E,t,null,r,u),h.push({event:E,listeners:S}),C?E.data=C:(C=XD(r),C!==null&&(E.data=C)))),(C=JY?QY(t,r):eX(t,r))&&(d=Pv(d,"onBeforeInput"),0<d.length&&(u=new XA("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}cL(h,e)})}function Eg(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Pv(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=vg(t,r),a!=null&&n.unshift(Eg(t,a,s)),a=vg(t,e),a!=null&&n.push(Eg(t,a,s))),t=t.return}return n}function Xh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c6(t,e,r,n,s){for(var a=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=vg(r,a),c!=null&&i.unshift(Eg(r,c,l))):s||(c=vg(r,a),c!=null&&i.push(Eg(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var mX=/\r\n?/g,pX=/\u0000|\uFFFD/g;function d6(t){return(typeof t=="string"?t:""+t).replace(mX,`
`).replace(pX,"")}function Hy(t,e,r){if(e=d6(e),d6(t)!==e&&r)throw Error(De(425))}function Iv(){}var aE=null,iE=null;function oE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lE=typeof setTimeout=="function"?setTimeout:void 0,gX=typeof clearTimeout=="function"?clearTimeout:void 0,u6=typeof Promise=="function"?Promise:void 0,xX=typeof queueMicrotask=="function"?queueMicrotask:typeof u6<"u"?function(t){return u6.resolve(null).then(t).catch(yX)}:lE;function yX(t){setTimeout(function(){throw t})}function jC(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),kg(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);kg(e)}function pd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var op=Math.random().toString(36).slice(2),Po="__reactFiber$"+op,jg="__reactProps$"+op,Ql="__reactContainer$"+op,cE="__reactEvents$"+op,vX="__reactListeners$"+op,bX="__reactHandles$"+op;function Su(t){var e=t[Po];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ql]||r[Po]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=h6(t);t!==null;){if(r=t[Po])return r;t=h6(t)}return e}t=r,r=t.parentNode}return null}function Lx(t){return t=t[Po]||t[Ql],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _f(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(De(33))}function dk(t){return t[jg]||null}var dE=[],Af=-1;function Zd(t){return{current:t}}function Ur(t){0>Af||(t.current=dE[Af],dE[Af]=null,Af--)}function Rr(t,e){Af++,dE[Af]=t.current,t.current=e}var Md={},Rs=Zd(Md),ua=Zd(!1),ah=Md;function Tm(t,e){var r=t.type.contextTypes;if(!r)return Md;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ha(t){return t=t.childContextTypes,t!=null}function Dv(){Ur(ua),Ur(Rs)}function f6(t,e,r){if(Rs.current!==Md)throw Error(De(168));Rr(Rs,e),Rr(ua,r)}function uL(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(De(108,sY(t)||"Unknown",s));return Jr({},r,n)}function Lv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Md,ah=Rs.current,Rr(Rs,t),Rr(ua,ua.current),!0}function m6(t,e,r){var n=t.stateNode;if(!n)throw Error(De(169));r?(t=uL(t,e,ah),n.__reactInternalMemoizedMergedChildContext=t,Ur(ua),Ur(Rs),Rr(Rs,t)):Ur(ua),Rr(ua,r)}var Sl=null,uk=!1,TC=!1;function hL(t){Sl===null?Sl=[t]:Sl.push(t)}function wX(t){uk=!0,hL(t)}function Yd(){if(!TC&&Sl!==null){TC=!0;var t=0,e=vr;try{var r=Sl;for(vr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Sl=null,uk=!1}catch(s){throw Sl!==null&&(Sl=Sl.slice(t+1)),LD(f5,Yd),s}finally{vr=e,TC=!1}}return null}var Mf=[],Of=0,$v=null,Fv=0,fi=[],mi=0,ih=null,Ol=1,Rl="";function pu(t,e){Mf[Of++]=Fv,Mf[Of++]=$v,$v=t,Fv=e}function fL(t,e,r){fi[mi++]=Ol,fi[mi++]=Rl,fi[mi++]=ih,ih=t;var n=Ol;t=Rl;var s=32-to(n)-1;n&=~(1<<s),r+=1;var a=32-to(e)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Ol=1<<32-to(e)+s|r<<s|n,Rl=a+t}else Ol=1<<a|r<<s|n,Rl=t}function k5(t){t.return!==null&&(pu(t,1),fL(t,1,0))}function C5(t){for(;t===$v;)$v=Mf[--Of],Mf[Of]=null,Fv=Mf[--Of],Mf[Of]=null;for(;t===ih;)ih=fi[--mi],fi[mi]=null,Rl=fi[--mi],fi[mi]=null,Ol=fi[--mi],fi[mi]=null}var Ba=null,$a=null,qr=!1,Hi=null;function mL(t,e){var r=bi(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function p6(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ba=t,$a=pd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ba=t,$a=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ih!==null?{id:Ol,overflow:Rl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=bi(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ba=t,$a=null,!0):!1;default:return!1}}function uE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hE(t){if(qr){var e=$a;if(e){var r=e;if(!p6(t,e)){if(uE(t))throw Error(De(418));e=pd(r.nextSibling);var n=Ba;e&&p6(t,e)?mL(n,r):(t.flags=t.flags&-4097|2,qr=!1,Ba=t)}}else{if(uE(t))throw Error(De(418));t.flags=t.flags&-4097|2,qr=!1,Ba=t}}}function g6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ba=t}function Wy(t){if(t!==Ba)return!1;if(!qr)return g6(t),qr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oE(t.type,t.memoizedProps)),e&&(e=$a)){if(uE(t))throw pL(),Error(De(418));for(;e;)mL(t,e),e=pd(e.nextSibling)}if(g6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(De(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$a=pd(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$a=null}}else $a=Ba?pd(t.stateNode.nextSibling):null;return!0}function pL(){for(var t=$a;t;)t=pd(t.nextSibling)}function _m(){$a=Ba=null,qr=!1}function N5(t){Hi===null?Hi=[t]:Hi.push(t)}var kX=dc.ReactCurrentBatchConfig;function e0(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(De(309));var n=r.stateNode}if(!n)throw Error(De(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},e._stringRef=a,e)}if(typeof t!="string")throw Error(De(284));if(!r._owner)throw Error(De(290,t))}return t}function qy(t,e){throw t=Object.prototype.toString.call(e),Error(De(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x6(t){var e=t._init;return e(t._payload)}function gL(t){function e(b,v){if(t){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function r(b,v){if(!t)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function n(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=vd(b,v),b.index=0,b.sibling=null,b}function a(b,v,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,k){return v===null||v.tag!==6?(v=IC(w,b.mode,k),v.return=b,v):(v=s(v,w),v.return=b,v)}function c(b,v,w,k){var N=w.type;return N===Sf?u(b,v,w.props.children,k,w.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_c&&x6(N)===v.type)?(k=s(v,w.props),k.ref=e0(b,v,w),k.return=b,k):(k=J1(w.type,w.key,w.props,null,b.mode,k),k.ref=e0(b,v,w),k.return=b,k)}function d(b,v,w,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=DC(w,b.mode,k),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function u(b,v,w,k,N){return v===null||v.tag!==7?(v=Zu(w,b.mode,k,N),v.return=b,v):(v=s(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=IC(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Iy:return w=J1(v.type,v.key,v.props,null,b.mode,w),w.ref=e0(b,null,v),w.return=b,w;case Nf:return v=DC(v,b.mode,w),v.return=b,v;case _c:var k=v._init;return h(b,k(v._payload),w)}if(C0(v)||Zp(v))return v=Zu(v,b.mode,w,null),v.return=b,v;qy(b,v)}return null}function f(b,v,w,k){var N=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(b,v,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Iy:return w.key===N?c(b,v,w,k):null;case Nf:return w.key===N?d(b,v,w,k):null;case _c:return N=w._init,f(b,v,N(w._payload),k)}if(C0(w)||Zp(w))return N!==null?null:u(b,v,w,k,null);qy(b,w)}return null}function m(b,v,w,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(w)||null,l(v,b,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Iy:return b=b.get(k.key===null?w:k.key)||null,c(v,b,k,N);case Nf:return b=b.get(k.key===null?w:k.key)||null,d(v,b,k,N);case _c:var S=k._init;return m(b,v,w,S(k._payload),N)}if(C0(k)||Zp(k))return b=b.get(w)||null,u(v,b,k,N,null);qy(v,k)}return null}function p(b,v,w,k){for(var N=null,S=null,C=v,E=v=0,T=null;C!==null&&E<w.length;E++){C.index>E?(T=C,C=null):T=C.sibling;var R=f(b,C,w[E],k);if(R===null){C===null&&(C=T);break}t&&C&&R.alternate===null&&e(b,C),v=a(R,v,E),S===null?N=R:S.sibling=R,S=R,C=T}if(E===w.length)return r(b,C),qr&&pu(b,E),N;if(C===null){for(;E<w.length;E++)C=h(b,w[E],k),C!==null&&(v=a(C,v,E),S===null?N=C:S.sibling=C,S=C);return qr&&pu(b,E),N}for(C=n(b,C);E<w.length;E++)T=m(C,b,E,w[E],k),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?E:T.key),v=a(T,v,E),S===null?N=T:S.sibling=T,S=T);return t&&C.forEach(function(B){return e(b,B)}),qr&&pu(b,E),N}function g(b,v,w,k){var N=Zp(w);if(typeof N!="function")throw Error(De(150));if(w=N.call(w),w==null)throw Error(De(151));for(var S=N=null,C=v,E=v=0,T=null,R=w.next();C!==null&&!R.done;E++,R=w.next()){C.index>E?(T=C,C=null):T=C.sibling;var B=f(b,C,R.value,k);if(B===null){C===null&&(C=T);break}t&&C&&B.alternate===null&&e(b,C),v=a(B,v,E),S===null?N=B:S.sibling=B,S=B,C=T}if(R.done)return r(b,C),qr&&pu(b,E),N;if(C===null){for(;!R.done;E++,R=w.next())R=h(b,R.value,k),R!==null&&(v=a(R,v,E),S===null?N=R:S.sibling=R,S=R);return qr&&pu(b,E),N}for(C=n(b,C);!R.done;E++,R=w.next())R=m(C,b,E,R.value,k),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),v=a(R,v,E),S===null?N=R:S.sibling=R,S=R);return t&&C.forEach(function(M){return e(b,M)}),qr&&pu(b,E),N}function y(b,v,w,k){if(typeof w=="object"&&w!==null&&w.type===Sf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Iy:e:{for(var N=w.key,S=v;S!==null;){if(S.key===N){if(N=w.type,N===Sf){if(S.tag===7){r(b,S.sibling),v=s(S,w.props.children),v.return=b,b=v;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===_c&&x6(N)===S.type){r(b,S.sibling),v=s(S,w.props),v.ref=e0(b,S,w),v.return=b,b=v;break e}r(b,S);break}else e(b,S);S=S.sibling}w.type===Sf?(v=Zu(w.props.children,b.mode,k,w.key),v.return=b,b=v):(k=J1(w.type,w.key,w.props,null,b.mode,k),k.ref=e0(b,v,w),k.return=b,b=k)}return i(b);case Nf:e:{for(S=w.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else e(b,v);v=v.sibling}v=DC(w,b.mode,k),v.return=b,b=v}return i(b);case _c:return S=w._init,y(b,v,S(w._payload),k)}if(C0(w))return p(b,v,w,k);if(Zp(w))return g(b,v,w,k);qy(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(b,v.sibling),v=s(v,w),v.return=b,b=v):(r(b,v),v=IC(w,b.mode,k),v.return=b,b=v),i(b)):r(b,v)}return y}var Am=gL(!0),xL=gL(!1),Bv=Zd(null),zv=null,Rf=null,S5=null;function E5(){S5=Rf=zv=null}function j5(t){var e=Bv.current;Ur(Bv),t._currentValue=e}function fE(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wf(t,e){zv=t,S5=Rf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(da=!0),t.firstContext=null)}function Ti(t){var e=t._currentValue;if(S5!==t)if(t={context:t,memoizedValue:e,next:null},Rf===null){if(zv===null)throw Error(De(308));Rf=t,zv.dependencies={lanes:0,firstContext:t}}else Rf=Rf.next=t;return e}var Eu=null;function T5(t){Eu===null?Eu=[t]:Eu.push(t)}function yL(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,T5(e)):(r.next=s.next,s.next=r),e.interleaved=r,ec(t,n)}function ec(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ac=!1;function _5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gd(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Xt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ec(t,r)}return s=n.interleaved,s===null?(e.next=e,T5(n)):(e.next=s.next,s.next=e),n.interleaved=e,ec(t,r)}function q1(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,m5(t,r)}}function y6(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Uv(t,e,r,n){var s=t.updateQueue;Ac=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;i=0,u=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(f=e,m=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Jr({},h,f);break e;case 2:Ac=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);lh|=i,t.lanes=i,t.memoizedState=h}}function v6(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(De(191,s));s.call(n)}}}var $x={},Uo=Zd($x),Tg=Zd($x),_g=Zd($x);function ju(t){if(t===$x)throw Error(De(174));return t}function A5(t,e){switch(Rr(_g,e),Rr(Tg,t),Rr(Uo,$x),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:GS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=GS(e,t)}Ur(Uo),Rr(Uo,e)}function Mm(){Ur(Uo),Ur(Tg),Ur(_g)}function bL(t){ju(_g.current);var e=ju(Uo.current),r=GS(e,t.type);e!==r&&(Rr(Tg,t),Rr(Uo,r))}function M5(t){Tg.current===t&&(Ur(Uo),Ur(Tg))}var Zr=Zd(0);function Vv(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _C=[];function O5(){for(var t=0;t<_C.length;t++)_C[t]._workInProgressVersionPrimary=null;_C.length=0}var G1=dc.ReactCurrentDispatcher,AC=dc.ReactCurrentBatchConfig,oh=0,Xr=null,An=null,Fn=null,Hv=!1,U0=!1,Ag=0,CX=0;function gs(){throw Error(De(321))}function R5(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ao(t[r],e[r]))return!1;return!0}function P5(t,e,r,n,s,a){if(oh=a,Xr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,G1.current=t===null||t.memoizedState===null?jX:TX,t=r(n,s),U0){a=0;do{if(U0=!1,Ag=0,25<=a)throw Error(De(301));a+=1,Fn=An=null,e.updateQueue=null,G1.current=_X,t=r(n,s)}while(U0)}if(G1.current=Wv,e=An!==null&&An.next!==null,oh=0,Fn=An=Xr=null,Hv=!1,e)throw Error(De(300));return t}function I5(){var t=Ag!==0;return Ag=0,t}function Eo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fn===null?Xr.memoizedState=Fn=t:Fn=Fn.next=t,Fn}function _i(){if(An===null){var t=Xr.alternate;t=t!==null?t.memoizedState:null}else t=An.next;var e=Fn===null?Xr.memoizedState:Fn.next;if(e!==null)Fn=e,An=t;else{if(t===null)throw Error(De(310));An=t,t={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Fn===null?Xr.memoizedState=Fn=t:Fn=Fn.next=t}return Fn}function Mg(t,e){return typeof e=="function"?e(t):e}function MC(t){var e=_i(),r=e.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=t;var n=An,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,d=a;do{var u=d.lane;if((oh&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,Xr.lanes|=u,lh|=u}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,ao(n,e.memoizedState)||(da=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,Xr.lanes|=a,lh|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function OC(t){var e=_i(),r=e.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=t(a,i.action),i=i.next;while(i!==s);ao(a,e.memoizedState)||(da=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function wL(){}function kL(t,e){var r=Xr,n=_i(),s=e(),a=!ao(n.memoizedState,s);if(a&&(n.memoizedState=s,da=!0),n=n.queue,D5(SL.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Fn!==null&&Fn.memoizedState.tag&1){if(r.flags|=2048,Og(9,NL.bind(null,r,n,s,e),void 0,null),Wn===null)throw Error(De(349));oh&30||CL(r,e,s)}return s}function CL(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Xr.updateQueue,e===null?(e={lastEffect:null,stores:null},Xr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function NL(t,e,r,n){e.value=r,e.getSnapshot=n,EL(e)&&jL(t)}function SL(t,e,r){return r(function(){EL(e)&&jL(t)})}function EL(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ao(t,r)}catch{return!0}}function jL(t){var e=ec(t,1);e!==null&&ro(e,t,1,-1)}function b6(t){var e=Eo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mg,lastRenderedState:t},e.queue=t,t=t.dispatch=EX.bind(null,Xr,t),[e.memoizedState,t]}function Og(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Xr.updateQueue,e===null?(e={lastEffect:null,stores:null},Xr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function TL(){return _i().memoizedState}function K1(t,e,r,n){var s=Eo();Xr.flags|=t,s.memoizedState=Og(1|e,r,void 0,n===void 0?null:n)}function hk(t,e,r,n){var s=_i();n=n===void 0?null:n;var a=void 0;if(An!==null){var i=An.memoizedState;if(a=i.destroy,n!==null&&R5(n,i.deps)){s.memoizedState=Og(e,r,a,n);return}}Xr.flags|=t,s.memoizedState=Og(1|e,r,a,n)}function w6(t,e){return K1(8390656,8,t,e)}function D5(t,e){return hk(2048,8,t,e)}function _L(t,e){return hk(4,2,t,e)}function AL(t,e){return hk(4,4,t,e)}function ML(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OL(t,e,r){return r=r!=null?r.concat([t]):null,hk(4,4,ML.bind(null,e,t),r)}function L5(){}function RL(t,e){var r=_i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R5(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function PL(t,e){var r=_i();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&R5(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function IL(t,e,r){return oh&21?(ao(r,e)||(r=BD(),Xr.lanes|=r,lh|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,da=!0),t.memoizedState=r)}function NX(t,e){var r=vr;vr=r!==0&&4>r?r:4,t(!0);var n=AC.transition;AC.transition={};try{t(!1),e()}finally{vr=r,AC.transition=n}}function DL(){return _i().memoizedState}function SX(t,e,r){var n=yd(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},LL(t))$L(e,r);else if(r=yL(t,e,r,n),r!==null){var s=qs();ro(r,t,n,s),FL(r,e,n)}}function EX(t,e,r){var n=yd(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(LL(t))$L(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var i=e.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,ao(l,i)){var c=e.interleaved;c===null?(s.next=s,T5(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=yL(t,e,s,n),r!==null&&(s=qs(),ro(r,t,n,s),FL(r,e,n))}}function LL(t){var e=t.alternate;return t===Xr||e!==null&&e===Xr}function $L(t,e){U0=Hv=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function FL(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,m5(t,r)}}var Wv={readContext:Ti,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useInsertionEffect:gs,useLayoutEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useMutableSource:gs,useSyncExternalStore:gs,useId:gs,unstable_isNewReconciler:!1},jX={readContext:Ti,useCallback:function(t,e){return Eo().memoizedState=[t,e===void 0?null:e],t},useContext:Ti,useEffect:w6,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,K1(4194308,4,ML.bind(null,e,t),r)},useLayoutEffect:function(t,e){return K1(4194308,4,t,e)},useInsertionEffect:function(t,e){return K1(4,2,t,e)},useMemo:function(t,e){var r=Eo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Eo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=SX.bind(null,Xr,t),[n.memoizedState,t]},useRef:function(t){var e=Eo();return t={current:t},e.memoizedState=t},useState:b6,useDebugValue:L5,useDeferredValue:function(t){return Eo().memoizedState=t},useTransition:function(){var t=b6(!1),e=t[0];return t=NX.bind(null,t[1]),Eo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Xr,s=Eo();if(qr){if(r===void 0)throw Error(De(407));r=r()}else{if(r=e(),Wn===null)throw Error(De(349));oh&30||CL(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,w6(SL.bind(null,n,a,t),[t]),n.flags|=2048,Og(9,NL.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=Eo(),e=Wn.identifierPrefix;if(qr){var r=Rl,n=Ol;r=(n&~(1<<32-to(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ag++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=CX++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TX={readContext:Ti,useCallback:RL,useContext:Ti,useEffect:D5,useImperativeHandle:OL,useInsertionEffect:_L,useLayoutEffect:AL,useMemo:PL,useReducer:MC,useRef:TL,useState:function(){return MC(Mg)},useDebugValue:L5,useDeferredValue:function(t){var e=_i();return IL(e,An.memoizedState,t)},useTransition:function(){var t=MC(Mg)[0],e=_i().memoizedState;return[t,e]},useMutableSource:wL,useSyncExternalStore:kL,useId:DL,unstable_isNewReconciler:!1},_X={readContext:Ti,useCallback:RL,useContext:Ti,useEffect:D5,useImperativeHandle:OL,useInsertionEffect:_L,useLayoutEffect:AL,useMemo:PL,useReducer:OC,useRef:TL,useState:function(){return OC(Mg)},useDebugValue:L5,useDeferredValue:function(t){var e=_i();return An===null?e.memoizedState=t:IL(e,An.memoizedState,t)},useTransition:function(){var t=OC(Mg)[0],e=_i().memoizedState;return[t,e]},useMutableSource:wL,useSyncExternalStore:kL,useId:DL,unstable_isNewReconciler:!1};function Bi(t,e){if(t&&t.defaultProps){e=Jr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function mE(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Jr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var fk={isMounted:function(t){return(t=t._reactInternals)?Ph(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=qs(),s=yd(t),a=Bl(n,s);a.payload=e,r!=null&&(a.callback=r),e=gd(t,a,s),e!==null&&(ro(e,t,s,n),q1(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=qs(),s=yd(t),a=Bl(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=gd(t,a,s),e!==null&&(ro(e,t,s,n),q1(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=qs(),n=yd(t),s=Bl(r,n);s.tag=2,e!=null&&(s.callback=e),e=gd(t,s,n),e!==null&&(ro(e,t,n,r),q1(e,t,n))}};function k6(t,e,r,n,s,a,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,i):e.prototype&&e.prototype.isPureReactComponent?!Ng(r,n)||!Ng(s,a):!0}function BL(t,e,r){var n=!1,s=Md,a=e.contextType;return typeof a=="object"&&a!==null?a=Ti(a):(s=ha(e)?ah:Rs.current,n=e.contextTypes,a=(n=n!=null)?Tm(t,s):Md),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fk,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function C6(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&fk.enqueueReplaceState(e,e.state,null)}function pE(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},_5(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Ti(a):(a=ha(e)?ah:Rs.current,s.context=Tm(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(mE(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fk.enqueueReplaceState(s,s.state,null),Uv(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Om(t,e){try{var r="",n=e;do r+=nY(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function RC(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function gE(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var AX=typeof WeakMap=="function"?WeakMap:Map;function zL(t,e,r){r=Bl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Gv||(Gv=!0,EE=n),gE(t,e)},r}function UL(t,e,r){r=Bl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){gE(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){gE(t,e),typeof n!="function"&&(xd===null?xd=new Set([this]):xd.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function N6(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new AX;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=HX.bind(null,t,e,r),e.then(t,t))}function S6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E6(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Bl(-1,1),e.tag=2,gd(r,e,1))),r.lanes|=1),t)}var MX=dc.ReactCurrentOwner,da=!1;function Fs(t,e,r,n){e.child=t===null?xL(e,null,r,n):Am(e,t.child,r,n)}function j6(t,e,r,n,s){r=r.render;var a=e.ref;return Wf(e,s),n=P5(t,e,r,n,a,s),r=I5(),t!==null&&!da?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tc(t,e,s)):(qr&&r&&k5(e),e.flags|=1,Fs(t,e,n,s),e.child)}function T6(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!W5(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,VL(t,e,a,n,s)):(t=J1(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ng,r(i,n)&&t.ref===e.ref)return tc(t,e,s)}return e.flags|=1,t=vd(a,n),t.ref=e.ref,t.return=e,e.child=t}function VL(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Ng(a,n)&&t.ref===e.ref)if(da=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(da=!0);else return e.lanes=t.lanes,tc(t,e,s)}return xE(t,e,r,n,s)}function HL(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(If,Aa),Aa|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rr(If,Aa),Aa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Rr(If,Aa),Aa|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Rr(If,Aa),Aa|=n;return Fs(t,e,s,r),e.child}function WL(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function xE(t,e,r,n,s){var a=ha(r)?ah:Rs.current;return a=Tm(e,a),Wf(e,s),r=P5(t,e,r,n,a,s),n=I5(),t!==null&&!da?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tc(t,e,s)):(qr&&n&&k5(e),e.flags|=1,Fs(t,e,r,s),e.child)}function _6(t,e,r,n,s){if(ha(r)){var a=!0;Lv(e)}else a=!1;if(Wf(e,s),e.stateNode===null)Z1(t,e),BL(e,r,n),pE(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ti(d):(d=ha(r)?ah:Rs.current,d=Tm(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&C6(e,i,n,d),Ac=!1;var f=e.memoizedState;i.state=f,Uv(e,n,i,s),c=e.memoizedState,l!==n||f!==c||ua.current||Ac?(typeof u=="function"&&(mE(e,r,u,n),c=e.memoizedState),(l=Ac||k6(e,r,l,n,f,c,d))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,vL(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Bi(e.type,l),i.props=d,h=e.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ti(c):(c=ha(r)?ah:Rs.current,c=Tm(e,c));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==c)&&C6(e,i,n,c),Ac=!1,f=e.memoizedState,i.state=f,Uv(e,n,i,s);var p=e.memoizedState;l!==h||f!==p||ua.current||Ac?(typeof m=="function"&&(mE(e,r,m,n),p=e.memoizedState),(d=Ac||k6(e,r,d,n,f,p,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,p,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,p,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),i.props=n,i.state=p,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return yE(t,e,r,n,a,s)}function yE(t,e,r,n,s,a){WL(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&m6(e,r,!1),tc(t,e,a);n=e.stateNode,MX.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Am(e,t.child,null,a),e.child=Am(e,null,l,a)):Fs(t,e,l,a),e.memoizedState=n.state,s&&m6(e,r,!0),e.child}function qL(t){var e=t.stateNode;e.pendingContext?f6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f6(t,e.context,!1),A5(t,e.containerInfo)}function A6(t,e,r,n,s){return _m(),N5(s),e.flags|=256,Fs(t,e,r,n),e.child}var vE={dehydrated:null,treeContext:null,retryLane:0};function bE(t){return{baseLanes:t,cachePool:null,transitions:null}}function GL(t,e,r){var n=e.pendingProps,s=Zr.current,a=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rr(Zr,s&1),t===null)return hE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,a?(n=e.mode,a=e.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=gk(i,n,0,null),t=Zu(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=bE(r),e.memoizedState=vE,t):$5(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return OX(t,e,i,n,l,s,r);if(a){a=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=vd(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=vd(l,a):(a=Zu(a,i,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,i=t.child.memoizedState,i=i===null?bE(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=t.childLanes&~r,e.memoizedState=vE,n}return a=t.child,t=a.sibling,n=vd(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function $5(t,e){return e=gk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gy(t,e,r,n){return n!==null&&N5(n),Am(e,t.child,null,r),t=$5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OX(t,e,r,n,s,a,i){if(r)return e.flags&256?(e.flags&=-257,n=RC(Error(De(422))),Gy(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=gk({mode:"visible",children:n.children},s,0,null),a=Zu(a,s,i,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Am(e,t.child,null,i),e.child.memoizedState=bE(i),e.memoizedState=vE,a);if(!(e.mode&1))return Gy(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(De(419)),n=RC(a,n,void 0),Gy(t,e,i,n)}if(l=(i&t.childLanes)!==0,da||l){if(n=Wn,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ec(t,s),ro(n,t,s,-1))}return H5(),n=RC(Error(De(421))),Gy(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=WX.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,$a=pd(s.nextSibling),Ba=e,qr=!0,Hi=null,t!==null&&(fi[mi++]=Ol,fi[mi++]=Rl,fi[mi++]=ih,Ol=t.id,Rl=t.overflow,ih=e),e=$5(e,n.children),e.flags|=4096,e)}function M6(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fE(t.return,e,r)}function PC(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function KL(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Fs(t,e,n.children,r),n=Zr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M6(t,r,e);else if(t.tag===19)M6(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rr(Zr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Vv(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),PC(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vv(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}PC(e,!0,r,null,a);break;case"together":PC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Z1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tc(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),lh|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(De(153));if(e.child!==null){for(t=e.child,r=vd(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=vd(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function RX(t,e,r){switch(e.tag){case 3:qL(e),_m();break;case 5:bL(e);break;case 1:ha(e.type)&&Lv(e);break;case 4:A5(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Rr(Bv,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Rr(Zr,Zr.current&1),e.flags|=128,null):r&e.child.childLanes?GL(t,e,r):(Rr(Zr,Zr.current&1),t=tc(t,e,r),t!==null?t.sibling:null);Rr(Zr,Zr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return KL(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rr(Zr,Zr.current),n)break;return null;case 22:case 23:return e.lanes=0,HL(t,e,r)}return tc(t,e,r)}var ZL,wE,YL,XL;ZL=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wE=function(){};YL=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,ju(Uo.current);var a=null;switch(r){case"input":s=VS(t,s),n=VS(t,n),a=[];break;case"select":s=Jr({},s,{value:void 0}),n=Jr({},n,{value:void 0}),a=[];break;case"textarea":s=qS(t,s),n=qS(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Iv)}KS(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xg.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xg.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Fr("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};XL=function(t,e,r,n){r!==n&&(e.flags|=4)};function t0(t,e){if(!qr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function PX(t,e,r){var n=e.pendingProps;switch(C5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(e),null;case 1:return ha(e.type)&&Dv(),xs(e),null;case 3:return n=e.stateNode,Mm(),Ur(ua),Ur(Rs),O5(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Wy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hi!==null&&(_E(Hi),Hi=null))),wE(t,e),xs(e),null;case 5:M5(e);var s=ju(_g.current);if(r=e.type,t!==null&&e.stateNode!=null)YL(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(De(166));return xs(e),null}if(t=ju(Uo.current),Wy(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[Po]=e,n[jg]=a,t=(e.mode&1)!==0,r){case"dialog":Fr("cancel",n),Fr("close",n);break;case"iframe":case"object":case"embed":Fr("load",n);break;case"video":case"audio":for(s=0;s<S0.length;s++)Fr(S0[s],n);break;case"source":Fr("error",n);break;case"img":case"image":case"link":Fr("error",n),Fr("load",n);break;case"details":Fr("toggle",n);break;case"input":BA(n,a),Fr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",n);break;case"textarea":UA(n,a),Fr("invalid",n)}KS(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Hy(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Hy(n.textContent,l,t),s=["children",""+l]):xg.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Fr("scroll",n)}switch(r){case"input":Dy(n),zA(n,a,!0);break;case"textarea":Dy(n),VA(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Iv)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SD(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Po]=e,t[jg]=n,ZL(t,e,!1,!1),e.stateNode=t;e:{switch(i=ZS(r,n),r){case"dialog":Fr("cancel",t),Fr("close",t),s=n;break;case"iframe":case"object":case"embed":Fr("load",t),s=n;break;case"video":case"audio":for(s=0;s<S0.length;s++)Fr(S0[s],t);s=n;break;case"source":Fr("error",t),s=n;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),s=n;break;case"details":Fr("toggle",t),s=n;break;case"input":BA(t,n),s=VS(t,n),Fr("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Jr({},n,{value:void 0}),Fr("invalid",t);break;case"textarea":UA(t,n),s=qS(t,n),Fr("invalid",t);break;default:s=n}KS(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?TD(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ED(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yg(t,c):typeof c=="number"&&yg(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(xg.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Fr("scroll",t):c!=null&&l5(t,a,c,i))}switch(r){case"input":Dy(t),zA(t,n,!1);break;case"textarea":Dy(t),VA(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ad(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?zf(t,!!n.multiple,a,!1):n.defaultValue!=null&&zf(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Iv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xs(e),null;case 6:if(t&&e.stateNode!=null)XL(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(De(166));if(r=ju(_g.current),ju(Uo.current),Wy(e)){if(n=e.stateNode,r=e.memoizedProps,n[Po]=e,(a=n.nodeValue!==r)&&(t=Ba,t!==null))switch(t.tag){case 3:Hy(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hy(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Po]=e,e.stateNode=n}return xs(e),null;case 13:if(Ur(Zr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qr&&$a!==null&&e.mode&1&&!(e.flags&128))pL(),_m(),e.flags|=98560,a=!1;else if(a=Wy(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(De(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(De(317));a[Po]=e}else _m(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xs(e),a=!1}else Hi!==null&&(_E(Hi),Hi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Zr.current&1?Rn===0&&(Rn=3):H5())),e.updateQueue!==null&&(e.flags|=4),xs(e),null);case 4:return Mm(),wE(t,e),t===null&&Sg(e.stateNode.containerInfo),xs(e),null;case 10:return j5(e.type._context),xs(e),null;case 17:return ha(e.type)&&Dv(),xs(e),null;case 19:if(Ur(Zr),a=e.memoizedState,a===null)return xs(e),null;if(n=(e.flags&128)!==0,i=a.rendering,i===null)if(n)t0(a,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Vv(t),i!==null){for(e.flags|=128,t0(a,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,t=i.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Rr(Zr,Zr.current&1|2),e.child}t=t.sibling}a.tail!==null&&dn()>Rm&&(e.flags|=128,n=!0,t0(a,!1),e.lanes=4194304)}else{if(!n)if(t=Vv(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),t0(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!qr)return xs(e),null}else 2*dn()-a.renderingStartTime>Rm&&r!==1073741824&&(e.flags|=128,n=!0,t0(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(r=a.last,r!==null?r.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=dn(),e.sibling=null,r=Zr.current,Rr(Zr,n?r&1|2:r&1),e):(xs(e),null);case 22:case 23:return V5(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Aa&1073741824&&(xs(e),e.subtreeFlags&6&&(e.flags|=8192)):xs(e),null;case 24:return null;case 25:return null}throw Error(De(156,e.tag))}function IX(t,e){switch(C5(e),e.tag){case 1:return ha(e.type)&&Dv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mm(),Ur(ua),Ur(Rs),O5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return M5(e),null;case 13:if(Ur(Zr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(De(340));_m()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ur(Zr),null;case 4:return Mm(),null;case 10:return j5(e.type._context),null;case 22:case 23:return V5(),null;case 24:return null;default:return null}}var Ky=!1,Cs=!1,DX=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Pf(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tn(t,e,n)}else r.current=null}function kE(t,e,r){try{r()}catch(n){tn(t,e,n)}}var O6=!1;function LX(t,e){if(aE=Ov,t=rL(),w5(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==a||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++d===s&&(l=i),f===a&&++u===n&&(c=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(iE={focusedElem:t,selectionRange:r},Ov=!1,tt=e;tt!==null;)if(e=tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,tt=t;else for(;tt!==null;){e=tt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Bi(e.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(k){tn(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,tt=t;break}tt=e.return}return p=O6,O6=!1,p}function V0(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&kE(e,r,a)}s=s.next}while(s!==n)}}function mk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function CE(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function JL(t){var e=t.alternate;e!==null&&(t.alternate=null,JL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Po],delete e[jg],delete e[cE],delete e[vX],delete e[bX])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QL(t){return t.tag===5||t.tag===3||t.tag===4}function R6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function NE(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Iv));else if(n!==4&&(t=t.child,t!==null))for(NE(t,e,r),t=t.sibling;t!==null;)NE(t,e,r),t=t.sibling}function SE(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(SE(t,e,r),t=t.sibling;t!==null;)SE(t,e,r),t=t.sibling}var es=null,Vi=!1;function xc(t,e,r){for(r=r.child;r!==null;)e9(t,e,r),r=r.sibling}function e9(t,e,r){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount(ik,r)}catch{}switch(r.tag){case 5:Cs||Pf(r,e);case 6:var n=es,s=Vi;es=null,xc(t,e,r),es=n,Vi=s,es!==null&&(Vi?(t=es,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):es.removeChild(r.stateNode));break;case 18:es!==null&&(Vi?(t=es,r=r.stateNode,t.nodeType===8?jC(t.parentNode,r):t.nodeType===1&&jC(t,r),kg(t)):jC(es,r.stateNode));break;case 4:n=es,s=Vi,es=r.stateNode.containerInfo,Vi=!0,xc(t,e,r),es=n,Vi=s;break;case 0:case 11:case 14:case 15:if(!Cs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&kE(r,e,i),s=s.next}while(s!==n)}xc(t,e,r);break;case 1:if(!Cs&&(Pf(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tn(r,e,l)}xc(t,e,r);break;case 21:xc(t,e,r);break;case 22:r.mode&1?(Cs=(n=Cs)||r.memoizedState!==null,xc(t,e,r),Cs=n):xc(t,e,r);break;default:xc(t,e,r)}}function P6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new DX),e.forEach(function(n){var s=qX.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Li(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:es=l.stateNode,Vi=!1;break e;case 3:es=l.stateNode.containerInfo,Vi=!0;break e;case 4:es=l.stateNode.containerInfo,Vi=!0;break e}l=l.return}if(es===null)throw Error(De(160));e9(a,i,s),es=null,Vi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){tn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t9(e,t),e=e.sibling}function t9(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Li(e,t),bo(t),n&4){try{V0(3,t,t.return),mk(3,t)}catch(g){tn(t,t.return,g)}try{V0(5,t,t.return)}catch(g){tn(t,t.return,g)}}break;case 1:Li(e,t),bo(t),n&512&&r!==null&&Pf(r,r.return);break;case 5:if(Li(e,t),bo(t),n&512&&r!==null&&Pf(r,r.return),t.flags&32){var s=t.stateNode;try{yg(s,"")}catch(g){tn(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,i=r!==null?r.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&CD(s,a),ZS(l,i);var d=ZS(l,a);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];u==="style"?TD(s,h):u==="dangerouslySetInnerHTML"?ED(s,h):u==="children"?yg(s,h):l5(s,u,h,d)}switch(l){case"input":HS(s,a);break;case"textarea":ND(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?zf(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?zf(s,!!a.multiple,a.defaultValue,!0):zf(s,!!a.multiple,a.multiple?[]:"",!1))}s[jg]=a}catch(g){tn(t,t.return,g)}}break;case 6:if(Li(e,t),bo(t),n&4){if(t.stateNode===null)throw Error(De(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(g){tn(t,t.return,g)}}break;case 3:if(Li(e,t),bo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{kg(e.containerInfo)}catch(g){tn(t,t.return,g)}break;case 4:Li(e,t),bo(t);break;case 13:Li(e,t),bo(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(z5=dn())),n&4&&P6(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Cs=(d=Cs)||u,Li(e,t),Cs=d):Li(e,t),bo(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(tt=t,u=t.child;u!==null;){for(h=tt=u;tt!==null;){switch(f=tt,m=f.child,f.tag){case 0:case 11:case 14:case 15:V0(4,f,f.return);break;case 1:Pf(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){tn(n,r,g)}}break;case 5:Pf(f,f.return);break;case 22:if(f.memoizedState!==null){D6(h);continue}}m!==null?(m.return=f,tt=m):D6(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=jD("display",i))}catch(g){tn(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){tn(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Li(e,t),bo(t),n&4&&P6(t);break;case 21:break;default:Li(e,t),bo(t)}}function bo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QL(r)){var n=r;break e}r=r.return}throw Error(De(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(yg(s,""),n.flags&=-33);var a=R6(t);SE(t,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=R6(t);NE(t,l,i);break;default:throw Error(De(161))}}catch(c){tn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $X(t,e,r){tt=t,r9(t)}function r9(t,e,r){for(var n=(t.mode&1)!==0;tt!==null;){var s=tt,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Ky;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Cs;l=Ky;var d=Cs;if(Ky=i,(Cs=c)&&!d)for(tt=s;tt!==null;)i=tt,c=i.child,i.tag===22&&i.memoizedState!==null?L6(s):c!==null?(c.return=i,tt=c):L6(s);for(;a!==null;)tt=a,r9(a),a=a.sibling;tt=s,Ky=l,Cs=d}I6(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,tt=a):I6(t)}}function I6(t){for(;tt!==null;){var e=tt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cs||mk(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Cs)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Bi(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&v6(e,a,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}v6(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&kg(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}Cs||e.flags&512&&CE(e)}catch(f){tn(e,e.return,f)}}if(e===t){tt=null;break}if(r=e.sibling,r!==null){r.return=e.return,tt=r;break}tt=e.return}}function D6(t){for(;tt!==null;){var e=tt;if(e===t){tt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,tt=r;break}tt=e.return}}function L6(t){for(;tt!==null;){var e=tt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{mk(4,e)}catch(c){tn(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){tn(e,s,c)}}var a=e.return;try{CE(e)}catch(c){tn(e,a,c)}break;case 5:var i=e.return;try{CE(e)}catch(c){tn(e,i,c)}}}catch(c){tn(e,e.return,c)}if(e===t){tt=null;break}var l=e.sibling;if(l!==null){l.return=e.return,tt=l;break}tt=e.return}}var FX=Math.ceil,qv=dc.ReactCurrentDispatcher,F5=dc.ReactCurrentOwner,Ci=dc.ReactCurrentBatchConfig,Xt=0,Wn=null,Cn=null,ls=0,Aa=0,If=Zd(0),Rn=0,Rg=null,lh=0,pk=0,B5=0,H0=null,ia=null,z5=0,Rm=1/0,Cl=null,Gv=!1,EE=null,xd=null,Zy=!1,td=null,Kv=0,W0=0,jE=null,Y1=-1,X1=0;function qs(){return Xt&6?dn():Y1!==-1?Y1:Y1=dn()}function yd(t){return t.mode&1?Xt&2&&ls!==0?ls&-ls:kX.transition!==null?(X1===0&&(X1=BD()),X1):(t=vr,t!==0||(t=window.event,t=t===void 0?16:GD(t.type)),t):1}function ro(t,e,r,n){if(50<W0)throw W0=0,jE=null,Error(De(185));Ix(t,r,n),(!(Xt&2)||t!==Wn)&&(t===Wn&&(!(Xt&2)&&(pk|=r),Rn===4&&Dc(t,ls)),fa(t,n),r===1&&Xt===0&&!(e.mode&1)&&(Rm=dn()+500,uk&&Yd()))}function fa(t,e){var r=t.callbackNode;kY(t,e);var n=Mv(t,t===Wn?ls:0);if(n===0)r!==null&&qA(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&qA(r),e===1)t.tag===0?wX($6.bind(null,t)):hL($6.bind(null,t)),xX(function(){!(Xt&6)&&Yd()}),r=null;else{switch(zD(n)){case 1:r=f5;break;case 4:r=$D;break;case 16:r=Av;break;case 536870912:r=FD;break;default:r=Av}r=d9(r,n9.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function n9(t,e){if(Y1=-1,X1=0,Xt&6)throw Error(De(327));var r=t.callbackNode;if(qf()&&t.callbackNode!==r)return null;var n=Mv(t,t===Wn?ls:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Zv(t,n);else{e=n;var s=Xt;Xt|=2;var a=a9();(Wn!==t||ls!==e)&&(Cl=null,Rm=dn()+500,Ku(t,e));do try{UX();break}catch(l){s9(t,l)}while(!0);E5(),qv.current=a,Xt=s,Cn!==null?e=0:(Wn=null,ls=0,e=Rn)}if(e!==0){if(e===2&&(s=eE(t),s!==0&&(n=s,e=TE(t,s))),e===1)throw r=Rg,Ku(t,0),Dc(t,n),fa(t,dn()),r;if(e===6)Dc(t,n);else{if(s=t.current.alternate,!(n&30)&&!BX(s)&&(e=Zv(t,n),e===2&&(a=eE(t),a!==0&&(n=a,e=TE(t,a))),e===1))throw r=Rg,Ku(t,0),Dc(t,n),fa(t,dn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(De(345));case 2:gu(t,ia,Cl);break;case 3:if(Dc(t,n),(n&130023424)===n&&(e=z5+500-dn(),10<e)){if(Mv(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){qs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lE(gu.bind(null,t,ia,Cl),e);break}gu(t,ia,Cl);break;case 4:if(Dc(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-to(n);a=1<<i,i=e[i],i>s&&(s=i),n&=~a}if(n=s,n=dn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*FX(n/1960))-n,10<n){t.timeoutHandle=lE(gu.bind(null,t,ia,Cl),n);break}gu(t,ia,Cl);break;case 5:gu(t,ia,Cl);break;default:throw Error(De(329))}}}return fa(t,dn()),t.callbackNode===r?n9.bind(null,t):null}function TE(t,e){var r=H0;return t.current.memoizedState.isDehydrated&&(Ku(t,e).flags|=256),t=Zv(t,e),t!==2&&(e=ia,ia=r,e!==null&&_E(e)),t}function _E(t){ia===null?ia=t:ia.push.apply(ia,t)}function BX(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ao(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dc(t,e){for(e&=~B5,e&=~pk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-to(e),n=1<<r;t[r]=-1,e&=~n}}function $6(t){if(Xt&6)throw Error(De(327));qf();var e=Mv(t,0);if(!(e&1))return fa(t,dn()),null;var r=Zv(t,e);if(t.tag!==0&&r===2){var n=eE(t);n!==0&&(e=n,r=TE(t,n))}if(r===1)throw r=Rg,Ku(t,0),Dc(t,e),fa(t,dn()),r;if(r===6)throw Error(De(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gu(t,ia,Cl),fa(t,dn()),null}function U5(t,e){var r=Xt;Xt|=1;try{return t(e)}finally{Xt=r,Xt===0&&(Rm=dn()+500,uk&&Yd())}}function ch(t){td!==null&&td.tag===0&&!(Xt&6)&&qf();var e=Xt;Xt|=1;var r=Ci.transition,n=vr;try{if(Ci.transition=null,vr=1,t)return t()}finally{vr=n,Ci.transition=r,Xt=e,!(Xt&6)&&Yd()}}function V5(){Aa=If.current,Ur(If)}function Ku(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gX(r)),Cn!==null)for(r=Cn.return;r!==null;){var n=r;switch(C5(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dv();break;case 3:Mm(),Ur(ua),Ur(Rs),O5();break;case 5:M5(n);break;case 4:Mm();break;case 13:Ur(Zr);break;case 19:Ur(Zr);break;case 10:j5(n.type._context);break;case 22:case 23:V5()}r=r.return}if(Wn=t,Cn=t=vd(t.current,null),ls=Aa=e,Rn=0,Rg=null,B5=pk=lh=0,ia=H0=null,Eu!==null){for(e=0;e<Eu.length;e++)if(r=Eu[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}Eu=null}return t}function s9(t,e){do{var r=Cn;try{if(E5(),G1.current=Wv,Hv){for(var n=Xr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hv=!1}if(oh=0,Fn=An=Xr=null,U0=!1,Ag=0,F5.current=null,r===null||r.return===null){Rn=1,Rg=e,Cn=null;break}e:{var a=t,i=r.return,l=r,c=e;if(e=ls,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=S6(i);if(m!==null){m.flags&=-257,E6(m,i,l,a,e),m.mode&1&&N6(a,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){N6(a,d,e),H5();break e}c=Error(De(426))}}else if(qr&&l.mode&1){var y=S6(i);if(y!==null){!(y.flags&65536)&&(y.flags|=256),E6(y,i,l,a,e),N5(Om(c,l));break e}}a=c=Om(c,l),Rn!==4&&(Rn=2),H0===null?H0=[a]:H0.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=zL(a,c,e);y6(a,b);break e;case 1:l=c;var v=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(xd===null||!xd.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var k=UL(a,l,e);y6(a,k);break e}}a=a.return}while(a!==null)}o9(r)}catch(N){e=N,Cn===r&&r!==null&&(Cn=r=r.return);continue}break}while(!0)}function a9(){var t=qv.current;return qv.current=Wv,t===null?Wv:t}function H5(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Wn===null||!(lh&268435455)&&!(pk&268435455)||Dc(Wn,ls)}function Zv(t,e){var r=Xt;Xt|=2;var n=a9();(Wn!==t||ls!==e)&&(Cl=null,Ku(t,e));do try{zX();break}catch(s){s9(t,s)}while(!0);if(E5(),Xt=r,qv.current=n,Cn!==null)throw Error(De(261));return Wn=null,ls=0,Rn}function zX(){for(;Cn!==null;)i9(Cn)}function UX(){for(;Cn!==null&&!fY();)i9(Cn)}function i9(t){var e=c9(t.alternate,t,Aa);t.memoizedProps=t.pendingProps,e===null?o9(t):Cn=e,F5.current=null}function o9(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=IX(r,e),r!==null){r.flags&=32767,Cn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,Cn=null;return}}else if(r=PX(r,e,Aa),r!==null){Cn=r;return}if(e=e.sibling,e!==null){Cn=e;return}Cn=e=t}while(e!==null);Rn===0&&(Rn=5)}function gu(t,e,r){var n=vr,s=Ci.transition;try{Ci.transition=null,vr=1,VX(t,e,r,n)}finally{Ci.transition=s,vr=n}return null}function VX(t,e,r,n){do qf();while(td!==null);if(Xt&6)throw Error(De(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(De(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(CY(t,a),t===Wn&&(Cn=Wn=null,ls=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zy||(Zy=!0,d9(Av,function(){return qf(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ci.transition,Ci.transition=null;var i=vr;vr=1;var l=Xt;Xt|=4,F5.current=null,LX(t,r),t9(r,t),cX(iE),Ov=!!aE,iE=aE=null,t.current=r,$X(r),mY(),Xt=l,vr=i,Ci.transition=a}else t.current=r;if(Zy&&(Zy=!1,td=t,Kv=s),a=t.pendingLanes,a===0&&(xd=null),xY(r.stateNode),fa(t,dn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Gv)throw Gv=!1,t=EE,EE=null,t;return Kv&1&&t.tag!==0&&qf(),a=t.pendingLanes,a&1?t===jE?W0++:(W0=0,jE=t):W0=0,Yd(),null}function qf(){if(td!==null){var t=zD(Kv),e=Ci.transition,r=vr;try{if(Ci.transition=null,vr=16>t?16:t,td===null)var n=!1;else{if(t=td,td=null,Kv=0,Xt&6)throw Error(De(331));var s=Xt;for(Xt|=4,tt=t.current;tt!==null;){var a=tt,i=a.child;if(tt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(tt=d;tt!==null;){var u=tt;switch(u.tag){case 0:case 11:case 15:V0(8,u,a)}var h=u.child;if(h!==null)h.return=u,tt=h;else for(;tt!==null;){u=tt;var f=u.sibling,m=u.return;if(JL(u),u===d){tt=null;break}if(f!==null){f.return=m,tt=f;break}tt=m}}}var p=a.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}tt=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,tt=i;else e:for(;tt!==null;){if(a=tt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:V0(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,tt=b;break e}tt=a.return}}var v=t.current;for(tt=v;tt!==null;){i=tt;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,tt=w;else e:for(i=v;tt!==null;){if(l=tt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mk(9,l)}}catch(N){tn(l,l.return,N)}if(l===i){tt=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,tt=k;break e}tt=l.return}}if(Xt=s,Yd(),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot(ik,t)}catch{}n=!0}return n}finally{vr=r,Ci.transition=e}}return!1}function F6(t,e,r){e=Om(r,e),e=zL(t,e,1),t=gd(t,e,1),e=qs(),t!==null&&(Ix(t,1,e),fa(t,e))}function tn(t,e,r){if(t.tag===3)F6(t,t,r);else for(;e!==null;){if(e.tag===3){F6(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xd===null||!xd.has(n))){t=Om(r,t),t=UL(e,t,1),e=gd(e,t,1),t=qs(),e!==null&&(Ix(e,1,t),fa(e,t));break}}e=e.return}}function HX(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=qs(),t.pingedLanes|=t.suspendedLanes&r,Wn===t&&(ls&r)===r&&(Rn===4||Rn===3&&(ls&130023424)===ls&&500>dn()-z5?Ku(t,0):B5|=r),fa(t,e)}function l9(t,e){e===0&&(t.mode&1?(e=Fy,Fy<<=1,!(Fy&130023424)&&(Fy=4194304)):e=1);var r=qs();t=ec(t,e),t!==null&&(Ix(t,e,r),fa(t,r))}function WX(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),l9(t,r)}function qX(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(De(314))}n!==null&&n.delete(e),l9(t,r)}var c9;c9=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ua.current)da=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return da=!1,RX(t,e,r);da=!!(t.flags&131072)}else da=!1,qr&&e.flags&1048576&&fL(e,Fv,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Z1(t,e),t=e.pendingProps;var s=Tm(e,Rs.current);Wf(e,r),s=P5(null,e,n,t,s,r);var a=I5();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ha(n)?(a=!0,Lv(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_5(e),s.updater=fk,e.stateNode=s,s._reactInternals=e,pE(e,n,t,r),e=yE(null,e,n,!0,a,r)):(e.tag=0,qr&&a&&k5(e),Fs(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Z1(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=KX(n),t=Bi(n,t),s){case 0:e=xE(null,e,n,t,r);break e;case 1:e=_6(null,e,n,t,r);break e;case 11:e=j6(null,e,n,t,r);break e;case 14:e=T6(null,e,n,Bi(n.type,t),r);break e}throw Error(De(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Bi(n,s),xE(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Bi(n,s),_6(t,e,n,s,r);case 3:e:{if(qL(e),t===null)throw Error(De(387));n=e.pendingProps,a=e.memoizedState,s=a.element,vL(t,e),Uv(e,n,null,r);var i=e.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Om(Error(De(423)),e),e=A6(t,e,n,r,s);break e}else if(n!==s){s=Om(Error(De(424)),e),e=A6(t,e,n,r,s);break e}else for($a=pd(e.stateNode.containerInfo.firstChild),Ba=e,qr=!0,Hi=null,r=xL(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_m(),n===s){e=tc(t,e,r);break e}Fs(t,e,n,r)}e=e.child}return e;case 5:return bL(e),t===null&&hE(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,oE(n,s)?i=null:a!==null&&oE(n,a)&&(e.flags|=32),WL(t,e),Fs(t,e,i,r),e.child;case 6:return t===null&&hE(e),null;case 13:return GL(t,e,r);case 4:return A5(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Am(e,null,n,r):Fs(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Bi(n,s),j6(t,e,n,s,r);case 7:return Fs(t,e,e.pendingProps,r),e.child;case 8:return Fs(t,e,e.pendingProps.children,r),e.child;case 12:return Fs(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,i=s.value,Rr(Bv,n._currentValue),n._currentValue=i,a!==null)if(ao(a.value,i)){if(a.children===s.children&&!ua.current){e=tc(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Bl(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),fE(a.return,r,e),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===e.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(De(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),fE(i,r,e),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Fs(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Wf(e,r),s=Ti(s),n=n(s),e.flags|=1,Fs(t,e,n,r),e.child;case 14:return n=e.type,s=Bi(n,e.pendingProps),s=Bi(n.type,s),T6(t,e,n,s,r);case 15:return VL(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Bi(n,s),Z1(t,e),e.tag=1,ha(n)?(t=!0,Lv(e)):t=!1,Wf(e,r),BL(e,n,s),pE(e,n,s,r),yE(null,e,n,!0,t,r);case 19:return KL(t,e,r);case 22:return HL(t,e,r)}throw Error(De(156,e.tag))};function d9(t,e){return LD(t,e)}function GX(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(t,e,r,n){return new GX(t,e,r,n)}function W5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KX(t){if(typeof t=="function")return W5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===d5)return 11;if(t===u5)return 14}return 2}function vd(t,e){var r=t.alternate;return r===null?(r=bi(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function J1(t,e,r,n,s,a){var i=2;if(n=t,typeof t=="function")W5(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Sf:return Zu(r.children,s,a,e);case c5:i=8,s|=8;break;case FS:return t=bi(12,r,e,s|2),t.elementType=FS,t.lanes=a,t;case BS:return t=bi(13,r,e,s),t.elementType=BS,t.lanes=a,t;case zS:return t=bi(19,r,e,s),t.elementType=zS,t.lanes=a,t;case bD:return gk(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yD:i=10;break e;case vD:i=9;break e;case d5:i=11;break e;case u5:i=14;break e;case _c:i=16,n=null;break e}throw Error(De(130,t==null?t:typeof t,""))}return e=bi(i,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Zu(t,e,r,n){return t=bi(7,t,n,e),t.lanes=r,t}function gk(t,e,r,n){return t=bi(22,t,n,e),t.elementType=bD,t.lanes=r,t.stateNode={isHidden:!1},t}function IC(t,e,r){return t=bi(6,t,null,e),t.lanes=r,t}function DC(t,e,r){return e=bi(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZX(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gC(0),this.expirationTimes=gC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gC(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function q5(t,e,r,n,s,a,i,l,c){return t=new ZX(t,e,r,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=bi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_5(a),t}function YX(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nf,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function u9(t){if(!t)return Md;t=t._reactInternals;e:{if(Ph(t)!==t||t.tag!==1)throw Error(De(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ha(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(De(171))}if(t.tag===1){var r=t.type;if(ha(r))return uL(t,r,e)}return e}function h9(t,e,r,n,s,a,i,l,c){return t=q5(r,n,!0,t,s,a,i,l,c),t.context=u9(null),r=t.current,n=qs(),s=yd(r),a=Bl(n,s),a.callback=e??null,gd(r,a,s),t.current.lanes=s,Ix(t,s,n),fa(t,n),t}function xk(t,e,r,n){var s=e.current,a=qs(),i=yd(s);return r=u9(r),e.context===null?e.context=r:e.pendingContext=r,e=Bl(a,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=gd(s,e,i),t!==null&&(ro(t,s,i,a),q1(t,s,i)),i}function Yv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function B6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function G5(t,e){B6(t,e),(t=t.alternate)&&B6(t,e)}function XX(){return null}var f9=typeof reportError=="function"?reportError:function(t){console.error(t)};function K5(t){this._internalRoot=t}yk.prototype.render=K5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(De(409));xk(t,e,null,null)};yk.prototype.unmount=K5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ch(function(){xk(null,t,null,null)}),e[Ql]=null}};function yk(t){this._internalRoot=t}yk.prototype.unstable_scheduleHydration=function(t){if(t){var e=HD();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ic.length&&e!==0&&e<Ic[r].priority;r++);Ic.splice(r,0,t),r===0&&qD(t)}};function Z5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z6(){}function JX(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=Yv(i);a.call(d)}}var i=h9(e,n,t,0,null,!1,!1,"",z6);return t._reactRootContainer=i,t[Ql]=i.current,Sg(t.nodeType===8?t.parentNode:t),ch(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Yv(c);l.call(d)}}var c=q5(t,0,!1,null,null,!1,!1,"",z6);return t._reactRootContainer=c,t[Ql]=c.current,Sg(t.nodeType===8?t.parentNode:t),ch(function(){xk(e,c,r,n)}),c}function bk(t,e,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Yv(i);l.call(c)}}xk(e,i,t,s)}else i=JX(r,e,t,s,n);return Yv(i)}UD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=N0(e.pendingLanes);r!==0&&(m5(e,r|1),fa(e,dn()),!(Xt&6)&&(Rm=dn()+500,Yd()))}break;case 13:ch(function(){var n=ec(t,1);if(n!==null){var s=qs();ro(n,t,1,s)}}),G5(t,1)}};p5=function(t){if(t.tag===13){var e=ec(t,134217728);if(e!==null){var r=qs();ro(e,t,134217728,r)}G5(t,134217728)}};VD=function(t){if(t.tag===13){var e=yd(t),r=ec(t,e);if(r!==null){var n=qs();ro(r,t,e,n)}G5(t,e)}};HD=function(){return vr};WD=function(t,e){var r=vr;try{return vr=t,e()}finally{vr=r}};XS=function(t,e,r){switch(e){case"input":if(HS(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=dk(n);if(!s)throw Error(De(90));kD(n),HS(n,s)}}}break;case"textarea":ND(t,r);break;case"select":e=r.value,e!=null&&zf(t,!!r.multiple,e,!1)}};MD=U5;OD=ch;var QX={usingClientEntryPoint:!1,Events:[Lx,_f,dk,_D,AD,U5]},r0={findFiberByHostInstance:Su,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eJ={bundleType:r0.bundleType,version:r0.version,rendererPackageName:r0.rendererPackageName,rendererConfig:r0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ID(t),t===null?null:t.stateNode},findFiberByHostInstance:r0.findFiberByHostInstance||XX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yy.isDisabled&&Yy.supportsFiber)try{ik=Yy.inject(eJ),zo=Yy}catch{}}Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QX;Qa.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z5(e))throw Error(De(200));return YX(t,e,null,r)};Qa.createRoot=function(t,e){if(!Z5(t))throw Error(De(299));var r=!1,n="",s=f9;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=q5(t,1,!1,null,null,r,!1,n,s),t[Ql]=e.current,Sg(t.nodeType===8?t.parentNode:t),new K5(e)};Qa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(De(188)):(t=Object.keys(t).join(","),Error(De(268,t)));return t=ID(e),t=t===null?null:t.stateNode,t};Qa.flushSync=function(t){return ch(t)};Qa.hydrate=function(t,e,r){if(!vk(e))throw Error(De(200));return bk(null,t,e,!0,r)};Qa.hydrateRoot=function(t,e,r){if(!Z5(t))throw Error(De(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=f9;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=h9(e,null,t,1,r??null,s,!1,a,i),t[Ql]=e.current,Sg(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new yk(e)};Qa.render=function(t,e,r){if(!vk(e))throw Error(De(200));return bk(null,t,e,!1,r)};Qa.unmountComponentAtNode=function(t){if(!vk(t))throw Error(De(40));return t._reactRootContainer?(ch(function(){bk(null,null,t,!1,function(){t._reactRootContainer=null,t[Ql]=null})}),!0):!1};Qa.unstable_batchedUpdates=U5;Qa.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!vk(r))throw Error(De(200));if(t==null||t._reactInternals===void 0)throw Error(De(38));return bk(t,e,r,!1,n)};Qa.version="18.3.1-next-f1338f8080-20240426";function m9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m9)}catch(t){console.error(t)}}m9(),mD.exports=Qa;var Va=mD.exports;const p9=sk(Va);var g9,U6=Va;g9=LS.createRoot=U6.createRoot,LS.hydrateRoot=U6.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pg.apply(this,arguments)}var rd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rd||(rd={}));const V6="popstate";function tJ(t){t===void 0&&(t={});function e(n,s){let{pathname:a,search:i,hash:l}=n.location;return AE("",{pathname:a,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Xv(s)}return nJ(e,r,null,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x9(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rJ(){return Math.random().toString(36).substr(2,8)}function H6(t,e){return{usr:t.state,key:t.key,idx:e}}function AE(t,e,r,n){return r===void 0&&(r=null),Pg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lp(e):e,{state:r,key:e&&e.key||n||rJ()})}function Xv(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function lp(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nJ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,l=rd.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(Pg({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function h(){l=rd.Pop;let y=u(),b=y==null?null:y-d;d=y,c&&c({action:l,location:g.location,delta:b})}function f(y,b){l=rd.Push;let v=AE(g.location,y,b);d=u()+1;let w=H6(v,d),k=g.createHref(v);try{i.pushState(w,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(k)}a&&c&&c({action:l,location:g.location,delta:1})}function m(y,b){l=rd.Replace;let v=AE(g.location,y,b);d=u();let w=H6(v,d),k=g.createHref(v);i.replaceState(w,"",k),a&&c&&c({action:l,location:g.location,delta:0})}function p(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:Xv(y);return v=v.replace(/ $/,"%20"),hn(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return t(s,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(V6,h),c=y,()=>{s.removeEventListener(V6,h),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return i.go(y)}};return g}var W6;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(W6||(W6={}));function sJ(t,e,r){return r===void 0&&(r="/"),aJ(t,e,r)}function aJ(t,e,r,n){let s=typeof e=="string"?lp(e):e,a=Y5(s.pathname||"/",r);if(a==null)return null;let i=y9(t);iJ(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=yJ(a);l=pJ(i[c],d)}return l}function y9(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(hn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=bd([n,c.relativePath]),u=r.concat(c);a.children&&a.children.length>0&&(hn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),y9(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:fJ(d,a.index),routesMeta:u})};return t.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,i);else for(let c of v9(a.path))s(a,i,c)}),e}function v9(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=v9(n.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function iJ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:mJ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oJ=/^:[\w-]+$/,lJ=3,cJ=2,dJ=1,uJ=10,hJ=-2,q6=t=>t==="*";function fJ(t,e){let r=t.split("/"),n=r.length;return r.some(q6)&&(n+=hJ),e&&(n+=cJ),r.filter(s=>!q6(s)).reduce((s,a)=>s+(oJ.test(a)?lJ:a===""?dJ:uJ),n)}function mJ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function pJ(t,e,r){let{routesMeta:n}=t,s={},a="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=gJ({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:bd([a,h.pathname]),pathnameBase:kJ(bd([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=bd([a,h.pathnameBase]))}return i}function gJ(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=xJ(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let g=l[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?d[f]=void 0:d[f]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:t}}function xJ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),x9(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function yJ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return x9(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Y5(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function vJ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?lp(t):t;return{pathname:r?r.startsWith("/")?r:bJ(r,e):e,search:CJ(n),hash:NJ(s)}}function bJ(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function LC(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wJ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function X5(t,e){let r=wJ(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function J5(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=lp(t):(s=Pg({},t),hn(!s.pathname||!s.pathname.includes("?"),LC("?","pathname","search",s)),hn(!s.pathname||!s.pathname.includes("#"),LC("#","pathname","hash",s)),hn(!s.search||!s.search.includes("#"),LC("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=vJ(s,l),d=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const bd=t=>t.join("/").replace(/\/\/+/g,"/"),kJ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CJ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NJ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SJ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const b9=["post","put","patch","delete"];new Set(b9);const EJ=["get",...b9];new Set(EJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ig(){return Ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ig.apply(this,arguments)}const Q5=x.createContext(null),jJ=x.createContext(null),Xd=x.createContext(null),wk=x.createContext(null),el=x.createContext({outlet:null,matches:[],isDataRoute:!1}),w9=x.createContext(null);function TJ(t,e){let{relative:r}=e===void 0?{}:e;cp()||hn(!1);let{basename:n,navigator:s}=x.useContext(Xd),{hash:a,pathname:i,search:l}=C9(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:bd([n,i])),s.createHref({pathname:c,search:l,hash:a})}function cp(){return x.useContext(wk)!=null}function Jd(){return cp()||hn(!1),x.useContext(wk).location}function k9(t){x.useContext(Xd).static||x.useLayoutEffect(t)}function Ri(){let{isDataRoute:t}=x.useContext(el);return t?VJ():_J()}function _J(){cp()||hn(!1);let t=x.useContext(Q5),{basename:e,future:r,navigator:n}=x.useContext(Xd),{matches:s}=x.useContext(el),{pathname:a}=Jd(),i=JSON.stringify(X5(s,r.v7_relativeSplatPath)),l=x.useRef(!1);return k9(()=>{l.current=!0}),x.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=J5(d,JSON.parse(i),a,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bd([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,i,a,t])}const AJ=x.createContext(null);function MJ(t){let e=x.useContext(el).outlet;return e&&x.createElement(AJ.Provider,{value:t},e)}function kk(){let{matches:t}=x.useContext(el),e=t[t.length-1];return e?e.params:{}}function C9(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=x.useContext(Xd),{matches:s}=x.useContext(el),{pathname:a}=Jd(),i=JSON.stringify(X5(s,n.v7_relativeSplatPath));return x.useMemo(()=>J5(t,JSON.parse(i),a,r==="path"),[t,i,a,r])}function OJ(t,e){return RJ(t,e)}function RJ(t,e,r,n){cp()||hn(!1);let{navigator:s}=x.useContext(Xd),{matches:a}=x.useContext(el),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Jd(),u;if(e){var h;let y=typeof e=="string"?lp(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||hn(!1),u=y}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=sJ(t,{pathname:m}),g=$J(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:bd([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:bd([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,n);return e&&g?x.createElement(wk.Provider,{value:{location:Ig({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:rd.Pop}},g):g}function PJ(){let t=UJ(),e=SJ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),r?x.createElement("pre",{style:s},r):null,null)}const IJ=x.createElement(PJ,null);class DJ extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?x.createElement(el.Provider,{value:this.props.routeContext},x.createElement(w9.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LJ(t){let{routeContext:e,match:r,children:n}=t,s=x.useContext(Q5);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(el.Provider,{value:e},n)}function $J(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let u=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||hn(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=r,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,h,f)=>{let m,p=!1,g=null,y=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||IJ,c&&(d<0&&f===0?(HJ("route-fallback"),p=!0,y=null):d===f&&(p=!0,y=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,f+1)),v=()=>{let w;return m?w=g:p?w=y:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,x.createElement(LJ,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(DJ,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var N9=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(N9||{}),S9=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(S9||{});function FJ(t){let e=x.useContext(Q5);return e||hn(!1),e}function BJ(t){let e=x.useContext(jJ);return e||hn(!1),e}function zJ(t){let e=x.useContext(el);return e||hn(!1),e}function E9(t){let e=zJ(),r=e.matches[e.matches.length-1];return r.route.id||hn(!1),r.route.id}function UJ(){var t;let e=x.useContext(w9),r=BJ(),n=E9();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function VJ(){let{router:t}=FJ(N9.UseNavigateStable),e=E9(S9.UseNavigateStable),r=x.useRef(!1);return k9(()=>{r.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ig({fromRouteId:e},a)))},[t,e])}const G6={};function HJ(t,e,r){G6[t]||(G6[t]=!0)}function WJ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function n0(t){let{to:e,replace:r,state:n,relative:s}=t;cp()||hn(!1);let{future:a,static:i}=x.useContext(Xd),{matches:l}=x.useContext(el),{pathname:c}=Jd(),d=Ri(),u=J5(e,X5(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(u);return x.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:s}),[d,h,s,r,n]),null}function qJ(t){return MJ(t.context)}function Ut(t){hn(!1)}function GJ(t){let{basename:e="/",children:r=null,location:n,navigationType:s=rd.Pop,navigator:a,static:i=!1,future:l}=t;cp()&&hn(!1);let c=e.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:a,static:i,future:Ig({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof n=="string"&&(n=lp(n));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:p="default"}=n,g=x.useMemo(()=>{let y=Y5(u,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:p},navigationType:s}},[c,u,h,f,m,p,s]);return g==null?null:x.createElement(Xd.Provider,{value:d},x.createElement(wk.Provider,{children:r,value:g}))}function KJ(t){let{children:e,location:r}=t;return OJ(ME(e),r)}new Promise(()=>{});function ME(t,e){e===void 0&&(e=[]);let r=[];return x.Children.forEach(t,(n,s)=>{if(!x.isValidElement(n))return;let a=[...e,s];if(n.type===x.Fragment){r.push.apply(r,ME(n.props.children,a));return}n.type!==Ut&&hn(!1),!n.props.index||!n.props.children||hn(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=ME(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OE.apply(this,arguments)}function ZJ(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function YJ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XJ(t,e){return t.button===0&&(!e||e==="_self")&&!YJ(t)}const JJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],QJ="6";try{window.__reactRouterVersion=QJ}catch{}const eQ="startTransition",K6=hD[eQ];function tQ(t){let{basename:e,children:r,future:n,window:s}=t,a=x.useRef();a.current==null&&(a.current=tJ({window:s,v5Compat:!0}));let i=a.current,[l,c]=x.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},u=x.useCallback(h=>{d&&K6?K6(()=>c(h)):c(h)},[c,d]);return x.useLayoutEffect(()=>i.listen(u),[i,u]),x.useEffect(()=>WJ(n),[n]),x.createElement(GJ,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const rQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cs=x.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=ZJ(e,JJ),{basename:m}=x.useContext(Xd),p,g=!1;if(typeof d=="string"&&nQ.test(d)&&(p=d,rQ))try{let w=new URL(window.location.href),k=d.startsWith("//")?new URL(w.protocol+d):new URL(d),N=Y5(k.pathname,m);k.origin===w.origin&&N!=null?d=N+k.search+k.hash:g=!0}catch{}let y=TJ(d,{relative:s}),b=sQ(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function v(w){n&&n(w),w.defaultPrevented||b(w)}return x.createElement("a",OE({},f,{href:p||y,onClick:g||a?n:v,ref:r,target:c}))});var Z6;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Z6||(Z6={}));var Y6;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y6||(Y6={}));function sQ(t,e){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:l}=e===void 0?{}:e,c=Ri(),d=Jd(),u=C9(t,{relative:i});return x.useCallback(h=>{if(XJ(h,r)){h.preventDefault();let f=n!==void 0?n:Xv(d)===Xv(u);c(t,{replace:f,state:s,preventScrollReset:a,relative:i,viewTransition:l})}},[d,c,u,n,s,r,t,a,i,l])}var dp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dh=typeof window>"u"||"Deno"in globalThis;function Bs(){}function aQ(t,e){return typeof t=="function"?t(e):t}function RE(t){return typeof t=="number"&&t>=0&&t!==1/0}function j9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wd(t,e){return typeof t=="function"?t(e):t}function ui(t,e){return typeof t=="function"?t(e):t}function X6(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:l}=t;if(i){if(n){if(e.queryHash!==eT(i,e.options))return!1}else if(!Dg(e.queryKey,i))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function J6(t,e){const{exact:r,status:n,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(uh(e.options.mutationKey)!==uh(a))return!1}else if(!Dg(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function eT(t,e){return((e==null?void 0:e.queryKeyHashFn)||uh)(t)}function uh(t){return JSON.stringify(t,(e,r)=>PE(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Dg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Dg(t[r],e[r])):!1}function T9(t,e){if(t===e)return t;const r=Q6(t)&&Q6(e);if(r||PE(t)&&PE(e)){const n=r?t:Object.keys(t),s=n.length,a=r?e:Object.keys(e),i=a.length,l=r?[]:{},c=new Set(n);let d=0;for(let u=0;u<i;u++){const h=r?u:a[u];(!r&&c.has(h)||r)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,d++):(l[h]=T9(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&d++)}return s===i&&d===s?t:l}return e}function Jv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function Q6(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function PE(t){if(!eM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!eM(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function eM(t){return Object.prototype.toString.call(t)==="[object Object]"}function iQ(t){return new Promise(e=>{setTimeout(e,t)})}function IE(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?T9(t,e):e}function oQ(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function lQ(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var tT=Symbol();function _9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===tT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function A9(t,e){return typeof t=="function"?t(...e):!!t}var $u,Vc,mm,q7,cQ=(q7=class extends dp{constructor(){super();dt(this,$u);dt(this,Vc);dt(this,mm);qe(this,mm,e=>{if(!dh&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){se(this,Vc)||this.setEventListener(se(this,mm))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Vc))==null||e.call(this),qe(this,Vc,void 0))}setEventListener(e){var r;qe(this,mm,e),(r=se(this,Vc))==null||r.call(this),qe(this,Vc,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){se(this,$u)!==e&&(qe(this,$u,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof se(this,$u)=="boolean"?se(this,$u):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$u=new WeakMap,Vc=new WeakMap,mm=new WeakMap,q7),rT=new cQ,pm,Hc,gm,G7,dQ=(G7=class extends dp{constructor(){super();dt(this,pm,!0);dt(this,Hc);dt(this,gm);qe(this,gm,e=>{if(!dh&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){se(this,Hc)||this.setEventListener(se(this,gm))}onUnsubscribe(){var e;this.hasListeners()||((e=se(this,Hc))==null||e.call(this),qe(this,Hc,void 0))}setEventListener(e){var r;qe(this,gm,e),(r=se(this,Hc))==null||r.call(this),qe(this,Hc,e(this.setOnline.bind(this)))}setOnline(e){se(this,pm)!==e&&(qe(this,pm,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return se(this,pm)}},pm=new WeakMap,Hc=new WeakMap,gm=new WeakMap,G7),Qv=new dQ;function DE(){let t,e;const r=new Promise((s,a)=>{t=s,e=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function uQ(t){return Math.min(1e3*2**t,3e4)}function M9(t){return(t??"online")==="online"?Qv.isOnline():!0}var O9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function R9(t){let e=!1,r=0,n;const s=DE(),a=()=>s.status!=="pending",i=g=>{var y;a()||(f(new O9(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>rT.isFocused()&&(t.networkMode==="always"||Qv.isOnline())&&t.canRun(),u=()=>M9(t.networkMode)&&t.canRun(),h=g=>{a()||(n==null||n(),s.resolve(g))},f=g=>{a()||(n==null||n(),s.reject(g))},m=()=>new Promise(g=>{var y;n=b=>{(a()||d())&&g(b)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;n=void 0,a()||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(a())return;let g;const y=r===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var S;if(a())return;const v=t.retry??(dh?0:3),w=t.retryDelay??uQ,k=typeof w=="function"?w(r,b):w,N=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(e||!N){f(b);return}r++,(S=t.onFail)==null||S.call(t,r,b),iQ(k).then(()=>d()?void 0:m()).then(()=>{e?f(b):p()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(n==null||n(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?p():m().then(p),s)}}var hQ=t=>setTimeout(t,0);function fQ(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=hQ;const a=l=>{e?t.push(l):s(()=>{r(l)})},i=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var On=fQ(),Fu,K7,P9=(K7=class{constructor(){dt(this,Fu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),RE(this.gcTime)&&qe(this,Fu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dh?1/0:5*60*1e3))}clearGcTimeout(){se(this,Fu)&&(clearTimeout(se(this,Fu)),qe(this,Fu,void 0))}},Fu=new WeakMap,K7),xm,ym,ci,Bu,Ln,_x,zu,zi,bl,Z7,mQ=(Z7=class extends P9{constructor(e){super();dt(this,zi);dt(this,xm);dt(this,ym);dt(this,ci);dt(this,Bu);dt(this,Ln);dt(this,_x);dt(this,zu);qe(this,zu,!1),qe(this,_x,e.defaultOptions),this.setOptions(e.options),this.observers=[],qe(this,Bu,e.client),qe(this,ci,se(this,Bu).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,qe(this,xm,pQ(this.options)),this.state=e.state??se(this,xm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=se(this,Ln))==null?void 0:e.promise}setOptions(e){this.options={...se(this,_x),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&se(this,ci).remove(this)}setData(e,r){const n=IE(this.state.data,e,this.options);return Tt(this,zi,bl).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Tt(this,zi,bl).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=se(this,Ln))==null?void 0:n.promise;return(s=se(this,Ln))==null||s.cancel(e),r?r.then(Bs).catch(Bs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(se(this,xm))}isActive(){return this.observers.some(e=>ui(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wd(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!j9(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=se(this,Ln))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=se(this,Ln))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),se(this,ci).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(se(this,Ln)&&(se(this,zu)?se(this,Ln).cancel({revert:!0}):se(this,Ln).cancelRetry()),this.scheduleGc()),se(this,ci).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Tt(this,zi,bl).call(this,{type:"invalidate"})}async fetch(e,r){var c,d,u,h,f,m,p,g,y,b,v,w;if(this.state.fetchStatus!=="idle"&&((c=se(this,Ln))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(se(this,Ln))return se(this,Ln).continueRetry(),se(this,Ln).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(N=>N.options.queryFn);k&&this.setOptions(k.options)}const n=new AbortController,s=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(qe(this,zu,!0),n.signal)})},a=()=>{const k=_9(this.options,r),S=(()=>{const C={client:se(this,Bu),queryKey:this.queryKey,meta:this.meta};return s(C),C})();return qe(this,zu,!1),this.options.persister?this.options.persister(k,S,this):k(S)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:se(this,Bu),state:this.state,fetchFn:a};return s(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),qe(this,ym,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Tt(this,zi,bl).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),qe(this,Ln,R9({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onFail:(k,N)=>{Tt(this,zi,bl).call(this,{type:"failed",failureCount:k,error:N})},onPause:()=>{Tt(this,zi,bl).call(this,{type:"pause"})},onContinue:()=>{Tt(this,zi,bl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await se(this,Ln).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(m=(f=se(this,ci).config).onSuccess)==null||m.call(f,k,this),(g=(p=se(this,ci).config).onSettled)==null||g.call(p,k,this.state.error,this),k}catch(k){if(k instanceof O9){if(k.silent)return se(this,Ln).promise;if(k.revert){if(this.setState({...se(this,ym),fetchStatus:"idle"}),this.state.data===void 0)throw k;return this.state.data}}throw Tt(this,zi,bl).call(this,{type:"error",error:k}),(b=(y=se(this,ci).config).onError)==null||b.call(y,k,this),(w=(v=se(this,ci).config).onSettled)==null||w.call(v,this.state.data,k,this),k}finally{this.scheduleGc()}}},xm=new WeakMap,ym=new WeakMap,ci=new WeakMap,Bu=new WeakMap,Ln=new WeakMap,_x=new WeakMap,zu=new WeakMap,zi=new WeakSet,bl=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...I9(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return qe(this,ym,e.manual?s:void 0),s;case"error":const a=e.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),On.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),se(this,ci).notify({query:this,type:"updated",action:e})})},Z7);function I9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:M9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pQ(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Mo,Y7,gQ=(Y7=class extends dp{constructor(e={}){super();dt(this,Mo);this.config=e,qe(this,Mo,new Map)}build(e,r,n){const s=r.queryKey,a=r.queryHash??eT(s,r);let i=this.get(a);return i||(i=new mQ({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){se(this,Mo).has(e.queryHash)||(se(this,Mo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=se(this,Mo).get(e.queryHash);r&&(e.destroy(),r===e&&se(this,Mo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){On.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return se(this,Mo).get(e)}getAll(){return[...se(this,Mo).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>X6(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>X6(e,n)):r}notify(e){On.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){On.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mo=new WeakMap,Y7),Oo,Ls,Uu,Ro,Nc,X7,xQ=(X7=class extends P9{constructor(e){super();dt(this,Ro);dt(this,Oo);dt(this,Ls);dt(this,Uu);this.mutationId=e.mutationId,qe(this,Ls,e.mutationCache),qe(this,Oo,[]),this.state=e.state||D9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){se(this,Oo).includes(e)||(se(this,Oo).push(e),this.clearGcTimeout(),se(this,Ls).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){qe(this,Oo,se(this,Oo).filter(r=>r!==e)),this.scheduleGc(),se(this,Ls).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){se(this,Oo).length||(this.state.status==="pending"?this.scheduleGc():se(this,Ls).remove(this))}continue(){var e;return((e=se(this,Uu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,i,l,c,d,u,h,f,m,p,g,y,b,v,w,k,N,S,C,E;const r=()=>{Tt(this,Ro,Nc).call(this,{type:"continue"})};qe(this,Uu,R9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,R)=>{Tt(this,Ro,Nc).call(this,{type:"failed",failureCount:T,error:R})},onPause:()=>{Tt(this,Ro,Nc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>se(this,Ls).canRun(this)}));const n=this.state.status==="pending",s=!se(this,Uu).canStart();try{if(n)r();else{Tt(this,Ro,Nc).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(a=se(this,Ls).config).onMutate)==null?void 0:i.call(a,e,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));R!==this.state.context&&Tt(this,Ro,Nc).call(this,{type:"pending",context:R,variables:e,isPaused:s})}const T=await se(this,Uu).start();return await((u=(d=se(this,Ls).config).onSuccess)==null?void 0:u.call(d,T,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,e,this.state.context)),await((p=(m=se(this,Ls).config).onSettled)==null?void 0:p.call(m,T,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,T,null,e,this.state.context)),Tt(this,Ro,Nc).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(b=se(this,Ls).config).onError)==null?void 0:v.call(b,T,e,this.state.context,this)),await((k=(w=this.options).onError)==null?void 0:k.call(w,T,e,this.state.context)),await((S=(N=se(this,Ls).config).onSettled)==null?void 0:S.call(N,void 0,T,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,T,e,this.state.context)),T}finally{Tt(this,Ro,Nc).call(this,{type:"error",error:T})}}finally{se(this,Ls).runNext(this)}}},Oo=new WeakMap,Ls=new WeakMap,Uu=new WeakMap,Ro=new WeakSet,Nc=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),On.batch(()=>{se(this,Oo).forEach(n=>{n.onMutationUpdate(e)}),se(this,Ls).notify({mutation:this,type:"updated",action:e})})},X7);function D9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var El,Ui,Ax,J7,yQ=(J7=class extends dp{constructor(e={}){super();dt(this,El);dt(this,Ui);dt(this,Ax);this.config=e,qe(this,El,new Set),qe(this,Ui,new Map),qe(this,Ax,0)}build(e,r,n){const s=new xQ({mutationCache:this,mutationId:++Ry(this,Ax)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){se(this,El).add(e);const r=Xy(e);if(typeof r=="string"){const n=se(this,Ui).get(r);n?n.push(e):se(this,Ui).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(se(this,El).delete(e)){const r=Xy(e);if(typeof r=="string"){const n=se(this,Ui).get(r);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&se(this,Ui).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Xy(e);if(typeof r=="string"){const n=se(this,Ui).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const r=Xy(e);if(typeof r=="string"){const s=(n=se(this,Ui).get(r))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){On.batch(()=>{se(this,El).forEach(e=>{this.notify({type:"removed",mutation:e})}),se(this,El).clear(),se(this,Ui).clear()})}getAll(){return Array.from(se(this,El))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>J6(r,n))}findAll(e={}){return this.getAll().filter(r=>J6(e,r))}notify(e){On.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return On.batch(()=>Promise.all(e.map(r=>r.continue().catch(Bs))))}},El=new WeakMap,Ui=new WeakMap,Ax=new WeakMap,J7);function Xy(t){var e;return(e=t.options.scope)==null?void 0:e.id}function tM(t){return{onFetch:(e,r)=>{var u,h,f,m,p;const n=e.options,s=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],i=((p=e.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},b=_9(e.options,e.fetchOptions),v=async(w,k,N)=>{if(g)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:k,direction:N?"backward":"forward",meta:e.options.meta};return y(B),B})(),E=await b(C),{maxPages:T}=e.options,R=N?lQ:oQ;return{pages:R(w.pages,E,T),pageParams:R(w.pageParams,k,T)}};if(s&&a.length){const w=s==="backward",k=w?vQ:rM,N={pages:a,pageParams:i},S=k(n,N);l=await v(N,S,w)}else{const w=t??a.length;do{const k=c===0?i[0]??n.initialPageParam:rM(n,l);if(c>0&&k==null)break;l=await v(l,k),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=d}}}function rM(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function vQ(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var en,Wc,qc,vm,bm,Gc,wm,km,Q7,bQ=(Q7=class{constructor(t={}){dt(this,en);dt(this,Wc);dt(this,qc);dt(this,vm);dt(this,bm);dt(this,Gc);dt(this,wm);dt(this,km);qe(this,en,t.queryCache||new gQ),qe(this,Wc,t.mutationCache||new yQ),qe(this,qc,t.defaultOptions||{}),qe(this,vm,new Map),qe(this,bm,new Map),qe(this,Gc,0)}mount(){Ry(this,Gc)._++,se(this,Gc)===1&&(qe(this,wm,rT.subscribe(async t=>{t&&(await this.resumePausedMutations(),se(this,en).onFocus())})),qe(this,km,Qv.subscribe(async t=>{t&&(await this.resumePausedMutations(),se(this,en).onOnline())})))}unmount(){var t,e;Ry(this,Gc)._--,se(this,Gc)===0&&((t=se(this,wm))==null||t.call(this),qe(this,wm,void 0),(e=se(this,km))==null||e.call(this),qe(this,km,void 0))}isFetching(t){return se(this,en).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return se(this,Wc).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=se(this,en).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=se(this,en).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(wd(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return se(this,en).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=se(this,en).get(n.queryHash),a=s==null?void 0:s.state.data,i=aQ(e,a);if(i!==void 0)return se(this,en).build(this,n).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return On.batch(()=>se(this,en).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=se(this,en).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=se(this,en);On.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=se(this,en);return On.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=On.batch(()=>se(this,en).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Bs).catch(Bs)}invalidateQueries(t,e={}){return On.batch(()=>(se(this,en).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=On.batch(()=>se(this,en).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(Bs)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Bs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=se(this,en).build(this,e);return r.isStaleByTime(wd(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Bs).catch(Bs)}fetchInfiniteQuery(t){return t.behavior=tM(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Bs).catch(Bs)}ensureInfiniteQueryData(t){return t.behavior=tM(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qv.isOnline()?se(this,Wc).resumePausedMutations():Promise.resolve()}getQueryCache(){return se(this,en)}getMutationCache(){return se(this,Wc)}getDefaultOptions(){return se(this,qc)}setDefaultOptions(t){qe(this,qc,t)}setQueryDefaults(t,e){se(this,vm).set(uh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...se(this,vm).values()],r={};return e.forEach(n=>{Dg(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){se(this,bm).set(uh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...se(this,bm).values()],r={};return e.forEach(n=>{Dg(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...se(this,qc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=eT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===tT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...se(this,qc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){se(this,en).clear(),se(this,Wc).clear()}},en=new WeakMap,Wc=new WeakMap,qc=new WeakMap,vm=new WeakMap,bm=new WeakMap,Gc=new WeakMap,wm=new WeakMap,km=new WeakMap,Q7),ra,Wt,Mx,$s,Vu,Cm,jl,Kc,Ox,Nm,Sm,Hu,Wu,Zc,Em,dr,E0,LE,$E,FE,BE,zE,UE,VE,L9,eD,wQ=(eD=class extends dp{constructor(e,r){super();dt(this,dr);dt(this,ra);dt(this,Wt);dt(this,Mx);dt(this,$s);dt(this,Vu);dt(this,Cm);dt(this,jl);dt(this,Kc);dt(this,Ox);dt(this,Nm);dt(this,Sm);dt(this,Hu);dt(this,Wu);dt(this,Zc);dt(this,Em,new Set);this.options=r,qe(this,ra,e),qe(this,Kc,null),qe(this,jl,DE()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(se(this,Wt).addObserver(this),nM(se(this,Wt),this.options)?Tt(this,dr,E0).call(this):this.updateResult(),Tt(this,dr,BE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return HE(se(this,Wt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return HE(se(this,Wt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Tt(this,dr,zE).call(this),Tt(this,dr,UE).call(this),se(this,Wt).removeObserver(this)}setOptions(e){const r=this.options,n=se(this,Wt);if(this.options=se(this,ra).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ui(this.options.enabled,se(this,Wt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Tt(this,dr,VE).call(this),se(this,Wt).setOptions(this.options),r._defaulted&&!Jv(this.options,r)&&se(this,ra).getQueryCache().notify({type:"observerOptionsUpdated",query:se(this,Wt),observer:this});const s=this.hasListeners();s&&sM(se(this,Wt),n,this.options,r)&&Tt(this,dr,E0).call(this),this.updateResult(),s&&(se(this,Wt)!==n||ui(this.options.enabled,se(this,Wt))!==ui(r.enabled,se(this,Wt))||wd(this.options.staleTime,se(this,Wt))!==wd(r.staleTime,se(this,Wt)))&&Tt(this,dr,LE).call(this);const a=Tt(this,dr,$E).call(this);s&&(se(this,Wt)!==n||ui(this.options.enabled,se(this,Wt))!==ui(r.enabled,se(this,Wt))||a!==se(this,Zc))&&Tt(this,dr,FE).call(this,a)}getOptimisticResult(e){const r=se(this,ra).getQueryCache().build(se(this,ra),e),n=this.createResult(r,e);return CQ(this,n)&&(qe(this,$s,n),qe(this,Cm,this.options),qe(this,Vu,se(this,Wt).state)),n}getCurrentResult(){return se(this,$s)}trackResult(e,r){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&!this.options.experimental_prefetchInRender&&se(this,jl).status==="pending"&&se(this,jl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(e){se(this,Em).add(e)}getCurrentQuery(){return se(this,Wt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=se(this,ra).defaultQueryOptions(e),n=se(this,ra).getQueryCache().build(se(this,ra),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Tt(this,dr,E0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),se(this,$s)))}createResult(e,r){var T;const n=se(this,Wt),s=this.options,a=se(this,$s),i=se(this,Vu),l=se(this,Cm),d=e!==n?e.state:se(this,Mx),{state:u}=e;let h={...u},f=!1,m;if(r._optimisticResults){const R=this.hasListeners(),B=!R&&nM(e,r),M=R&&sM(e,n,r,s);(B||M)&&(h={...h,...I9(u.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=h;m=h.data;let b=!1;if(r.placeholderData!==void 0&&m===void 0&&y==="pending"){let R;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(R=a.data,b=!0):R=typeof r.placeholderData=="function"?r.placeholderData((T=se(this,Sm))==null?void 0:T.state.data,se(this,Sm)):r.placeholderData,R!==void 0&&(y="success",m=IE(a==null?void 0:a.data,R,r),f=!0)}if(r.select&&m!==void 0&&!b)if(a&&m===(i==null?void 0:i.data)&&r.select===se(this,Ox))m=se(this,Nm);else try{qe(this,Ox,r.select),m=r.select(m),m=IE(a==null?void 0:a.data,m,r),qe(this,Nm,m),qe(this,Kc,null)}catch(R){qe(this,Kc,R)}se(this,Kc)&&(p=se(this,Kc),m=se(this,Nm),g=Date.now(),y="error");const v=h.fetchStatus==="fetching",w=y==="pending",k=y==="error",N=w&&v,S=m!==void 0,E={status:y,fetchStatus:h.fetchStatus,isPending:w,isSuccess:y==="success",isError:k,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:k&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&S,isStale:nT(e,r),refetch:this.refetch,promise:se(this,jl),isEnabled:ui(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=L=>{E.status==="error"?L.reject(E.error):E.data!==void 0&&L.resolve(E.data)},B=()=>{const L=qe(this,jl,E.promise=DE());R(L)},M=se(this,jl);switch(M.status){case"pending":e.queryHash===n.queryHash&&R(M);break;case"fulfilled":(E.status==="error"||E.data!==M.value)&&B();break;case"rejected":(E.status!=="error"||E.error!==M.reason)&&B();break}}return E}updateResult(){const e=se(this,$s),r=this.createResult(se(this,Wt),this.options);if(qe(this,Vu,se(this,Wt).state),qe(this,Cm,this.options),se(this,Vu).data!==void 0&&qe(this,Sm,se(this,Wt)),Jv(r,e))return;qe(this,$s,r);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!se(this,Em).size)return!0;const i=new Set(a??se(this,Em));return this.options.throwOnError&&i.add("error"),Object.keys(se(this,$s)).some(l=>{const c=l;return se(this,$s)[c]!==e[c]&&i.has(c)})};Tt(this,dr,L9).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Tt(this,dr,BE).call(this)}},ra=new WeakMap,Wt=new WeakMap,Mx=new WeakMap,$s=new WeakMap,Vu=new WeakMap,Cm=new WeakMap,jl=new WeakMap,Kc=new WeakMap,Ox=new WeakMap,Nm=new WeakMap,Sm=new WeakMap,Hu=new WeakMap,Wu=new WeakMap,Zc=new WeakMap,Em=new WeakMap,dr=new WeakSet,E0=function(e){Tt(this,dr,VE).call(this);let r=se(this,Wt).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Bs)),r},LE=function(){Tt(this,dr,zE).call(this);const e=wd(this.options.staleTime,se(this,Wt));if(dh||se(this,$s).isStale||!RE(e))return;const n=j9(se(this,$s).dataUpdatedAt,e)+1;qe(this,Hu,setTimeout(()=>{se(this,$s).isStale||this.updateResult()},n))},$E=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(se(this,Wt)):this.options.refetchInterval)??!1},FE=function(e){Tt(this,dr,UE).call(this),qe(this,Zc,e),!(dh||ui(this.options.enabled,se(this,Wt))===!1||!RE(se(this,Zc))||se(this,Zc)===0)&&qe(this,Wu,setInterval(()=>{(this.options.refetchIntervalInBackground||rT.isFocused())&&Tt(this,dr,E0).call(this)},se(this,Zc)))},BE=function(){Tt(this,dr,LE).call(this),Tt(this,dr,FE).call(this,Tt(this,dr,$E).call(this))},zE=function(){se(this,Hu)&&(clearTimeout(se(this,Hu)),qe(this,Hu,void 0))},UE=function(){se(this,Wu)&&(clearInterval(se(this,Wu)),qe(this,Wu,void 0))},VE=function(){const e=se(this,ra).getQueryCache().build(se(this,ra),this.options);if(e===se(this,Wt))return;const r=se(this,Wt);qe(this,Wt,e),qe(this,Mx,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},L9=function(e){On.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(se(this,$s))}),se(this,ra).getQueryCache().notify({query:se(this,Wt),type:"observerResultsUpdated"})})},eD);function kQ(t,e){return ui(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function nM(t,e){return kQ(t,e)||t.state.data!==void 0&&HE(t,e,e.refetchOnMount)}function HE(t,e,r){if(ui(e.enabled,t)!==!1&&wd(e.staleTime,t)!=="static"){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&nT(t,e)}return!1}function sM(t,e,r,n){return(t!==e||ui(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&nT(t,r)}function nT(t,e){return ui(e.enabled,t)!==!1&&t.isStaleByTime(wd(e.staleTime,t))}function CQ(t,e){return!Jv(t.getCurrentResult(),e)}var Yc,Xc,na,Tl,Xl,Q1,WE,tD,NQ=(tD=class extends dp{constructor(r,n){super();dt(this,Xl);dt(this,Yc);dt(this,Xc);dt(this,na);dt(this,Tl);qe(this,Yc,r),this.setOptions(n),this.bindMethods(),Tt(this,Xl,Q1).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=se(this,Yc).defaultMutationOptions(r),Jv(this.options,n)||se(this,Yc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:se(this,na),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&uh(n.mutationKey)!==uh(this.options.mutationKey)?this.reset():((s=se(this,na))==null?void 0:s.state.status)==="pending"&&se(this,na).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=se(this,na))==null||r.removeObserver(this)}onMutationUpdate(r){Tt(this,Xl,Q1).call(this),Tt(this,Xl,WE).call(this,r)}getCurrentResult(){return se(this,Xc)}reset(){var r;(r=se(this,na))==null||r.removeObserver(this),qe(this,na,void 0),Tt(this,Xl,Q1).call(this),Tt(this,Xl,WE).call(this)}mutate(r,n){var s;return qe(this,Tl,n),(s=se(this,na))==null||s.removeObserver(this),qe(this,na,se(this,Yc).getMutationCache().build(se(this,Yc),this.options)),se(this,na).addObserver(this),se(this,na).execute(r)}},Yc=new WeakMap,Xc=new WeakMap,na=new WeakMap,Tl=new WeakMap,Xl=new WeakSet,Q1=function(){var n;const r=((n=se(this,na))==null?void 0:n.state)??D9();qe(this,Xc,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},WE=function(r){On.batch(()=>{var n,s,a,i,l,c,d,u;if(se(this,Tl)&&this.hasListeners()){const h=se(this,Xc).variables,f=se(this,Xc).context;(r==null?void 0:r.type)==="success"?((s=(n=se(this,Tl)).onSuccess)==null||s.call(n,r.data,h,f),(i=(a=se(this,Tl)).onSettled)==null||i.call(a,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((c=(l=se(this,Tl)).onError)==null||c.call(l,r.error,h,f),(u=(d=se(this,Tl)).onSettled)==null||u.call(d,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(se(this,Xc))})})},tD),$9=x.createContext(void 0),ur=t=>{const e=x.useContext($9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},SQ=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx($9.Provider,{value:t,children:e})),F9=x.createContext(!1),EQ=()=>x.useContext(F9);F9.Provider;function jQ(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var TQ=x.createContext(jQ()),_Q=()=>x.useContext(TQ),AQ=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},MQ=t=>{x.useEffect(()=>{t.clearReset()},[t])},OQ=({result:t,errorResetBoundary:e,throwOnError:r,query:n,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(s&&t.data===void 0||A9(r,[t.error,n])),RQ=t=>{if(t.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>e(r(...n)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},PQ=(t,e)=>t.isLoading&&t.isFetching&&!e,IQ=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,aM=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function DQ(t,e,r){var h,f,m,p,g;const n=EQ(),s=_Q(),a=ur(),i=a.defaultQueryOptions(t);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,i),i._optimisticResults=n?"isRestoring":"optimistic",RQ(i),AQ(i,s),MQ(s);const l=!a.getQueryCache().get(i.queryHash),[c]=x.useState(()=>new e(a,i)),d=c.getOptimisticResult(i),u=!n&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(y=>{const b=u?c.subscribe(On.batchCalls(y)):Bs;return c.updateResult(),b},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(i)},[i,c]),IQ(i,d))throw aM(i,c,s);if(OQ({result:d,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((p=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||p.call(m,i,d),i.experimental_prefetchInRender&&!dh&&PQ(d,n)){const y=l?aM(i,c,s):(g=a.getQueryCache().get(i.queryHash))==null?void 0:g.promise;y==null||y.catch(Bs).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Vr(t,e){return DQ(t,wQ)}function gr(t,e){const r=ur(),[n]=x.useState(()=>new NQ(r,t));x.useEffect(()=>{n.setOptions(t)},[n,t]);const s=x.useSyncExternalStore(x.useCallback(i=>n.subscribe(On.batchCalls(i)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=x.useCallback((i,l)=>{n.mutate(i,l).catch(Bs)},[n]);if(s.error&&A9(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const B9=x.createContext(void 0),z9=({children:t})=>{const[e,r]=x.useState(()=>{const s=localStorage.getItem("theme");return s?s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{const s=window.document.documentElement;e?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{r(!e)};return o.jsx(B9.Provider,{value:{isDark:e,toggleTheme:n},children:t})},U9=()=>{const t=x.useContext(B9);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},LQ={},iM=t=>{let e;const r=new Set,n=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),r.forEach(p=>p(e,m))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(LQ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=e=t(n,s,c);return c},$Q=t=>t?iM(t):iM;var V9={exports:{}},H9={},W9={exports:{}},q9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=x;function FQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var BQ=typeof Object.is=="function"?Object.is:FQ,zQ=Pm.useState,UQ=Pm.useEffect,VQ=Pm.useLayoutEffect,HQ=Pm.useDebugValue;function WQ(t,e){var r=e(),n=zQ({inst:{value:r,getSnapshot:e}}),s=n[0].inst,a=n[1];return VQ(function(){s.value=r,s.getSnapshot=e,$C(s)&&a({inst:s})},[t,r,e]),UQ(function(){return $C(s)&&a({inst:s}),t(function(){$C(s)&&a({inst:s})})},[t]),HQ(r),r}function $C(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!BQ(t,r)}catch{return!0}}function qQ(t,e){return e()}var GQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qQ:WQ;q9.useSyncExternalStore=Pm.useSyncExternalStore!==void 0?Pm.useSyncExternalStore:GQ;W9.exports=q9;var KQ=W9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck=x,ZQ=KQ;function YQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XQ=typeof Object.is=="function"?Object.is:YQ,JQ=ZQ.useSyncExternalStore,QQ=Ck.useRef,eee=Ck.useEffect,tee=Ck.useMemo,ree=Ck.useDebugValue;H9.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var a=QQ(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=tee(function(){function c(m){if(!d){if(d=!0,u=m,m=n(m),s!==void 0&&i.hasValue){var p=i.value;if(s(p,m))return h=p}return h=m}if(p=h,XQ(u,m))return p;var g=n(m);return s!==void 0&&s(p,g)?(u=m,p):(u=m,h=g)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,n,s]);var l=JQ(t,a[0],a[1]);return eee(function(){i.hasValue=!0,i.value=l},[l]),ree(l),l};V9.exports=H9;var nee=V9.exports;const see=sk(nee),G9={},{useDebugValue:aee}=st,{useSyncExternalStoreWithSelector:iee}=see;let oM=!1;const oee=t=>t;function lee(t,e=oee,r){(G9?"production":void 0)!=="production"&&r&&!oM&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),oM=!0);const n=iee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return aee(n),n}const cee=t=>{(G9?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?$Q(t):t,r=(n,s)=>lee(e,n,s);return Object.assign(r,e),r},dee=t=>cee,uee={};function hee(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var a;const i=c=>c===null?null:JSON.parse(c,void 0),l=(a=r.getItem(s))!=null?a:null;return l instanceof Promise?l.then(i):i(l)},setItem:(s,a)=>r.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>r.removeItem(s)}}const Lg=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Lg(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Lg(n)(r)}}}},fee=(t,e)=>(r,n,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,b)=>({...b,...y}),...e},i=!1;const l=new Set,c=new Set;let d;try{d=a.getStorage()}catch{}if(!d)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...y)},n,s);const u=Lg(a.serialize),h=()=>{const y=a.partialize({...n()});let b;const v=u({state:y,version:a.version}).then(w=>d.setItem(a.name,w)).catch(w=>{b=w});if(b)throw b;return v},f=s.setState;s.setState=(y,b)=>{f(y,b),h()};const m=t((...y)=>{r(...y),h()},n,s);let p;const g=()=>{var y;if(!d)return;i=!1,l.forEach(v=>v(n()));const b=((y=a.onRehydrateStorage)==null?void 0:y.call(a,n()))||void 0;return Lg(d.getItem.bind(d))(a.name).then(v=>{if(v)return a.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return a.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var w;return p=a.merge(v,(w=n())!=null?w:m),r(p,!0),h()}).then(()=>{b==null||b(p,void 0),i=!0,c.forEach(v=>v(p))}).catch(v=>{b==null||b(void 0,v)})};return s.persist={setOptions:y=>{a={...a,...y},y.getStorage&&(d=y.getStorage())},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>i,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},g(),p||m},mee=(t,e)=>(r,n,s)=>{let a={storage:hee(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},i=!1;const l=new Set,c=new Set;let d=a.storage;if(!d)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...g)},n,s);const u=()=>{const g=a.partialize({...n()});return d.setItem(a.name,{state:g,version:a.version})},h=s.setState;s.setState=(g,y)=>{h(g,y),u()};const f=t((...g)=>{r(...g),u()},n,s);s.getInitialState=()=>f;let m;const p=()=>{var g,y;if(!d)return;i=!1,l.forEach(v=>{var w;return v((w=n())!=null?w:f)});const b=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(g=n())!=null?g:f))||void 0;return Lg(d.getItem.bind(d))(a.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==a.version){if(a.migrate)return[!0,a.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var w;const[k,N]=v;if(m=a.merge(N,(w=n())!=null?w:f),r(m,!0),k)return u()}).then(()=>{b==null||b(m,void 0),m=n(),i=!0,c.forEach(v=>v(m))}).catch(v=>{b==null||b(void 0,v)})};return s.persist={setOptions:g=>{a={...a,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},a.skipHydration||p(),m||f},pee=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((uee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),fee(t,e)):mee(t,e),gee=pee,xee=()=>"/api",yee=()=>window.location.origin,Pn={api:{baseUrl:xee(),backendUrl:yee()},app:{name:"Case Management System",version:"1.1.0",nodeEnv:"production"}},vee="modulepreload",bee=function(t){return"/"+t},lM={},Nt=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=bee(c),c in lM)return;lM[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":vee,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Nr=class Nr{constructor(){ve(this,"inactivityTimer",null);ve(this,"refreshTimer",null);ve(this,"onSessionExpired");ve(this,"onTokenRefreshed");ve(this,"isWarningShown",!1);ve(this,"progressTimer",null);ve(this,"timerStartTime",0);this.setupActivityMonitoring(),this.setupTabSynchronization(),this.validateExistingSession()}generateFingerprint(){const e={userAgent:navigator.userAgent,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform,hardwareConcurrency:navigator.hardwareConcurrency||0,maxTouchPoints:navigator.maxTouchPoints||0},r=JSON.stringify(e);let n=0;for(let i=0;i<r.length;i++){const l=r.charCodeAt(i);n=(n<<5)-n+l,n=n&n}const s=n.toString(36);return{userAgent:navigator.userAgent,screen:`${screen.colorDepth}x${screen.pixelDepth}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,hardwareConcurrency:navigator.hardwareConcurrency||0,maxTouchPoints:navigator.maxTouchPoints||0,hash:s}}generateSessionId(){return crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36)}storeTokens(e,r,n=3600){const s=this.generateFingerprint(),a=this.generateSessionId(),i=Date.now(),l={token:e,refreshToken:r,fingerprint:s.hash,lastActivity:i,sessionId:a,expiresAt:i+n*1e3};sessionStorage.setItem(Nr.SESSION_KEY,this.encrypt(JSON.stringify(l))),sessionStorage.setItem(Nr.ACTIVITY_KEY,i.toString()),localStorage.setItem("__fp__",this.encrypt(s.hash)),this.startInactivityTimer(),this.startRefreshTimer(n)}getValidTokens(){try{const e=sessionStorage.getItem(Nr.SESSION_KEY);if(!e)return null;const r=JSON.parse(this.decrypt(e)),n=Date.now();if(n>r.expiresAt)return console.warn(" Token expirado, limpiando sesin"),this.clearSession(),null;if(n-r.lastActivity>Nr.INACTIVITY_TIMEOUT)return console.warn(" Sesin expirada por inactividad"),this.clearSession(),null;const a=this.generateFingerprint().hash;if(r.fingerprint!==a)return console.warn(" Token comprometido: Cambio de dispositivo detectado",{stored:r.fingerprint,current:a}),this.clearSession(),null;const i=localStorage.getItem("__fp__");if(!i)localStorage.setItem("__fp__",this.encrypt(a));else try{this.decrypt(i)!==a&&localStorage.setItem("__fp__",this.encrypt(a))}catch{localStorage.setItem("__fp__",this.encrypt(a))}return this.updateLastActivity(),{token:r.token,refreshToken:r.refreshToken}}catch(e){return console.error(" Error al recuperar tokens:",e),this.clearSession(),null}}updateTokens(e,r){if(!this.getValidTokens())return;const s=sessionStorage.getItem(Nr.SESSION_KEY);if(!s)return;const a=JSON.parse(this.decrypt(s));a.token=e,r&&(a.refreshToken=r),a.lastActivity=Date.now(),sessionStorage.setItem(Nr.SESSION_KEY,this.encrypt(JSON.stringify(a))),this.onTokenRefreshed&&this.onTokenRefreshed(e)}clearSession(){sessionStorage.removeItem(Nr.SESSION_KEY),sessionStorage.removeItem(Nr.ACTIVITY_KEY),localStorage.removeItem("__fp__"),this.stopTimers()}setupActivityMonitoring(){const e=["mousedown","mousemove","keypress","scroll","touchstart","click"],r=n=>{if(this.isWarningShown){console.log(" ACTIVIDAD IGNORADA: Warning activo, no se resetea el timer");return}this.updateLastActivity(),this.resetInactivityTimer()};e.forEach(n=>{document.addEventListener(n,r,!0)}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.validateExistingSession()})}setupTabSynchronization(){window.addEventListener("storage",e=>{e.key==="__fp__"&&e.newValue===null&&(this.clearSession(),this.onSessionExpired&&this.onSessionExpired())}),window.addEventListener("beforeunload",()=>{const e=sessionStorage.getItem("__tab_id__")||this.generateSessionId();sessionStorage.setItem("__tab_id__",e)})}validateExistingSession(){const e=this.getValidTokens();if(!e&&sessionStorage.getItem(Nr.SESSION_KEY))this.clearSession(),this.onSessionExpired&&this.onSessionExpired();else if(e){this.startInactivityTimer();const r=sessionStorage.getItem(Nr.SESSION_KEY);if(r){const n=JSON.parse(this.decrypt(r)),s=Math.max(0,n.expiresAt-Date.now());this.startRefreshTimer(s/1e3)}}}updateLastActivity(){const e=Date.now();sessionStorage.setItem(Nr.ACTIVITY_KEY,e.toString());const r=sessionStorage.getItem(Nr.SESSION_KEY);if(r)try{const n=JSON.parse(this.decrypt(r));n.lastActivity=e,sessionStorage.setItem(Nr.SESSION_KEY,this.encrypt(JSON.stringify(n)))}catch(n){console.error("Error actualizando actividad:",n)}}startInactivityTimer(){this.stopInactivityTimer(),this.isWarningShown=!1,this.timerStartTime=Date.now(),this.inactivityTimer=window.setTimeout(()=>{console.warn(" TIMEOUT: Sesin expirada por inactividad - INICIANDO PROCESO DE LOGOUT"),this.clearSession(),this.onSessionExpired?(console.log(" CALLBACK: Ejecutando onSessionExpired callback"),this.onSessionExpired()):console.error(" ERROR: No hay callback onSessionExpired registrado")},Nr.INACTIVITY_TIMEOUT),this.startProgressTimer()}startProgressTimer(){this.stopProgressTimer();const e=()=>{const n=Date.now()-this.timerStartTime,s=Math.max(0,Nr.INACTIVITY_TIMEOUT-n),a=2*60*1e3;s<=a&&s>0&&!this.isWarningShown&&(this.isWarningShown=!0,console.log(" WARNING ACTIVADO: Quedan menos de 2 minutos")),s>0?this.progressTimer=window.setTimeout(e,1e4):console.log(" PROGRESO: Timer completado - sesin debera haber expirado")};this.progressTimer=window.setTimeout(e,1e4)}stopProgressTimer(){this.progressTimer&&(window.clearTimeout(this.progressTimer),this.progressTimer=null)}resetInactivityTimer(){this.isWarningShown?console.log(" RESET BLOQUEADO: Warning ya est activo, no se permite reset"):this.startInactivityTimer()}stopInactivityTimer(){this.inactivityTimer&&(window.clearTimeout(this.inactivityTimer),this.inactivityTimer=null),this.stopProgressTimer(),this.timerStartTime=0,this.isWarningShown=!1}startRefreshTimer(e){this.stopRefreshTimer();const r=Math.max(1e3,e*1e3-Nr.TOKEN_REFRESH_INTERVAL);this.refreshTimer=window.setTimeout(async()=>{await this.attemptTokenRefresh()},r)}stopRefreshTimer(){this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null)}stopTimers(){this.stopInactivityTimer(),this.stopRefreshTimer()}async attemptTokenRefresh(){const e=this.getValidTokens();if(e)try{const{authService:r}=await Nt(async()=>{const{authService:s}=await Promise.resolve().then(()=>kee);return{authService:s}},void 0),n=await r.refreshToken(e.refreshToken);if(n.success&&n.data)this.updateTokens(n.data.token),this.startRefreshTimer(3600);else throw new Error("Refresh token response was not successful")}catch(r){console.error(" Error refrescando token:",r),this.clearSession(),this.onSessionExpired&&this.onSessionExpired()}}encrypt(e){return btoa(encodeURIComponent(e))}decrypt(e){return decodeURIComponent(atob(e))}onSessionExpire(e){this.onSessionExpired=e}onTokenRefresh(e){this.onTokenRefreshed=e}hasValidSession(){return this.getValidTokens()!==null}getSessionInfo(){const e=sessionStorage.getItem(Nr.SESSION_KEY);if(!e)return null;try{const r=JSON.parse(this.decrypt(e));return{sessionId:r.sessionId,fingerprint:r.fingerprint,lastActivity:new Date(r.lastActivity)}}catch{return null}}getDebugInfo(){const e=this.getSessionInfo(),r=this.getValidTokens(),n=sessionStorage.getItem(Nr.SESSION_KEY)||"",s=parseInt(sessionStorage.getItem(Nr.ACTIVITY_KEY)||"0");if(!e)return{isSessionValid:!1,hasValidTokens:!1,fingerprint:"N/A",lastActivity:0,sessionStartTime:0,inactivityTimeRemaining:0,tokensCount:0,encryptedTokensPreview:"No data"};const i=Date.now()-s,l=Math.max(0,Nr.INACTIVITY_TIMEOUT-i);return{isSessionValid:!!r,hasValidTokens:!!(r!=null&&r.token),fingerprint:e.fingerprint,lastActivity:s,sessionStartTime:e.lastActivity.getTime(),inactivityTimeRemaining:l,tokensCount:r?Object.keys(r).length:0,encryptedTokensPreview:n.length>50?n.substring(0,50)+"...":n}}async generateDeviceFingerprint(){return this.generateFingerprint().hash}getTimeUntilInactivityTimeout(){if(!this.getValidTokens()||!this.inactivityTimer||this.timerStartTime===0)return 0;const n=Date.now()-this.timerStartTime;return Math.max(0,Nr.INACTIVITY_TIMEOUT-n)}extendSession(){return this.getValidTokens()?(this.updateLastActivity(),this.resetInactivityTimer(),!0):!1}notifyActivity(){this.getValidTokens()&&(this.isWarningShown||(this.updateLastActivity(),this.resetInactivityTimer()))}};ve(Nr,"INACTIVITY_TIMEOUT",10*60*1e3),ve(Nr,"TOKEN_REFRESH_INTERVAL",5*60*1e3),ve(Nr,"SESSION_KEY","__secure_session__"),ve(Nr,"ACTIVITY_KEY","__last_activity__");let qE=Nr;const ct=new qE,Jy=Pn.api.baseUrl;class wee{constructor(){ct.onSessionExpire(()=>{this.handleSessionExpired()}),ct.onTokenRefresh(e=>{})}async login(e){const r=await fetch(`${Jy}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const n=await r.json();throw new Error(n.error||`HTTP error! status: ${r.status}`)}return await r.json()}async register(e){const r=await fetch(`${Jy}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const n=await r.json();throw new Error(n.error||`HTTP error! status: ${r.status}`)}return await r.json()}async refreshToken(e){const r=await fetch(`${Jy}/auth/refresh-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}async getCurrentUser(){return this.authenticatedRequest("/auth/me")}async authenticatedRequest(e,r={}){const n=ct.getValidTokens();if(!n)throw new Error("No valid session");const s=await fetch(`${Jy}${e}`,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`,...r.headers}});if(s.status===401)try{const a=await this.refreshToken(n.refreshToken);if(a.success&&a.data)return ct.updateTokens(a.data.token),this.authenticatedRequest(e,r)}catch{throw this.handleSessionExpired(),new Error("Session expired")}if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}handleSessionExpired(){ct.clearSession(),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"}getCurrentToken(){const e=ct.getValidTokens();return(e==null?void 0:e.token)||null}hasValidSession(){return ct.hasValidSession()}logout(){ct.clearSession(),this.handleSessionExpired()}}const Ze=new wee,kee=Object.freeze(Object.defineProperty({__proto__:null,authService:Ze},Symbol.toStringTag,{value:"Module"})),Cee=Pn.api.baseUrl;class Nee{async makeRequest(e,r={}){const{useAuthStore:n}=await Nt(async()=>{const{useAuthStore:l}=await Promise.resolve().then(()=>See);return{useAuthStore:l}},void 0);let s=n.getState().token;if(!s){const l=ct.getValidTokens();s=(l==null?void 0:l.token)||null}const a={headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers},...r},i=await fetch(`${Cee}${e}`,a);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return i.json()}async getUserPermissions(){return this.makeRequest("/auth/permissions")}async getAllRoles(){return this.makeRequest("/roles")}async getAllPermissions(){return this.makeRequest("/permissions")}async getUserModules(){return this.makeRequest("/auth/modules")}async checkPermission(e){return this.makeRequest("/auth/check-permission",{method:"POST",body:JSON.stringify({permission:e})})}async checkModuleAccess(e){return this.makeRequest("/auth/check-module",{method:"POST",body:JSON.stringify({module:e})})}}const Gf=new Nee,io=dee()(gee((t,e)=>({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,userPermissions:[],userModules:[],permissionsLoaded:!1,isLoadingPermissions:!1,login:async(r,n)=>{t({isLoading:!0,error:null});try{const s=await Ze.login({email:r,password:n});if(s.success&&s.data){const{user:a,token:i,refreshToken:l}=s.data;ct.storeTokens(i,l,3600),localStorage.setItem("user",JSON.stringify(a)),t({user:a,token:i,refreshToken:l,isAuthenticated:!0,isLoading:!1,error:null}),await new Promise(c=>setTimeout(c,100)),await e().loadUserPermissions()}else throw new Error(s.message||"Login failed")}catch(s){const a=s instanceof Error?s.message:"Login failed";throw t({isLoading:!1,error:a,isAuthenticated:!1,user:null,token:null,refreshToken:null}),s}},register:async(r,n,s)=>{t({isLoading:!0,error:null});try{const a=await Ze.register({email:r,password:n,fullName:s});if(a.success&&a.data){const{user:i,token:l,refreshToken:c}=a.data;ct.storeTokens(l,c,3600),localStorage.setItem("user",JSON.stringify(i)),t({user:i,token:l,refreshToken:c,isAuthenticated:!0,isLoading:!1,error:null}),await e().loadUserPermissions()}else throw new Error(a.message||"Registration failed")}catch(a){const i=a instanceof Error?a.message:"Registration failed";throw t({isLoading:!1,error:i,isAuthenticated:!1,user:null,token:null,refreshToken:null}),a}},logout:()=>{ct.clearSession(),localStorage.removeItem("user"),t({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,userPermissions:[],userModules:[],permissionsLoaded:!1,isLoadingPermissions:!1})},refreshTokens:async()=>{const r=e().refreshToken;if(!r){e().logout();return}try{const n=await Ze.refreshToken(r);if(n.success&&n.data){const s=n.data.token;ct.storeTokens(s,r,3600),t({token:s,error:null})}else throw new Error("Token refresh failed")}catch(n){console.error("Error refreshing token:",n),e().logout()}},getCurrentUser:async()=>{t({isLoading:!0});try{const r=await Ze.getCurrentUser();if(r.success&&r.data){const n=r.data;localStorage.setItem("user",JSON.stringify(n)),t({user:n,isAuthenticated:!0,isLoading:!1,error:null}),await e().loadUserPermissions()}else throw new Error("Failed to get current user")}catch(r){console.error("Error getting current user:",r),t({isLoading:!1}),e().logout()}},clearError:()=>{t({error:null})},updateUser:r=>{const n=e().user;if(n){const s={...n,...r};t({user:s}),localStorage.setItem("user",JSON.stringify(s))}},initializeFromSecurityService:async()=>{t({isLoading:!0});try{const r=e();if(r.token&&r.isAuthenticated&&r.user){t({isLoading:!1}),r.permissionsLoaded||await e().loadUserPermissions();return}const n=ct.getValidTokens(),s=localStorage.getItem("user");if(n&&s){const a=JSON.parse(s);t({user:a,token:n.token,refreshToken:n.refreshToken,isAuthenticated:!0,isLoading:!1,error:null}),await e().loadUserPermissions()}else t({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,userPermissions:[],userModules:[],permissionsLoaded:!1})}catch(r){console.error("Error inicializando desde SecurityService:",r),t({user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:"Error de inicializacin"})}},loadUserPermissions:async()=>{const{isLoadingPermissions:r,isAuthenticated:n}=e();if(n&&!r){t({isLoadingPermissions:!0});try{const s=await Gf.getUserPermissions();if(s.success&&s.data){const{permissions:a,modules:i}=s.data;t({userPermissions:a,userModules:i,permissionsLoaded:!0,isLoadingPermissions:!1})}else console.log(" loadUserPermissions - No se recibieron permisos vlidos"),t({userPermissions:[],userModules:[],permissionsLoaded:!1,isLoadingPermissions:!1})}catch(s){if(console.error(" loadUserPermissions - Error:",s),s instanceof Error&&s.message.includes("401")){e().logout();return}t({userPermissions:[],userModules:[],permissionsLoaded:!1,isLoadingPermissions:!1})}}},refreshPermissions:async()=>{t({permissionsLoaded:!1,isLoadingPermissions:!1}),await e().loadUserPermissions()},hasPermission:r=>{const n=e(),{user:s,userPermissions:a,permissionsLoaded:i}=n;if(!s||!i||!a||!Array.isArray(a))return!1;const l=a.map(c=>c.name||c);return!!(l.includes(r)||l.includes("permissions.admin_all"))},hasPermissionAsync:async r=>{const{user:n}=e();if(!n)return!1;try{const s=await Gf.getUserPermissions();if(s.success&&s.data){const{permissions:a}=s.data;return a.some(i=>i.name===r&&i.isActive)}return!1}catch(s){return console.error("Error verificando permiso:",s),!1}},canAccessModule:r=>{const{user:n}=e();return n&&console.warn(` canAccessModule(${r}) - Use canAccessModuleAsync para consulta dinmica`),!1},canAccessModuleAsync:async r=>{const{user:n}=e();if(!n)return!1;try{const s=await Gf.getUserPermissions();if(s.success&&s.data){const{modules:a}=s.data;return a.includes(r.toLowerCase())}return!1}catch(s){return console.error("Error verificando mdulo:",s),!1}}}),{name:"auth-storage",partialize:t=>({user:t.user,token:t.token,refreshToken:t.refreshToken,isAuthenticated:t.isAuthenticated,userPermissions:t.userPermissions,userModules:t.userModules,permissionsLoaded:t.permissionsLoaded})})),K9=async()=>{const{initializeFromSecurityService:t}=io.getState();await t()},See=Object.freeze(Object.defineProperty({__proto__:null,initializeAuth:K9,useAuthStore:io},Symbol.toStringTag,{value:"Module"})),Z9=x.createContext(void 0),ti=()=>{const t=x.useContext(Z9);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Eee=({children:t})=>{const{user:e,token:r,isAuthenticated:n,isLoading:s,error:a,login:i,register:l,logout:c,updateUser:d,clearError:u,hasPermission:h,canAccessModule:f,hasPermissionAsync:m,canAccessModuleAsync:p,refreshTokens:g,refreshPermissions:y}=io();x.useEffect(()=>{(async()=>{try{await K9()}catch(w){console.error("Error durante inicializacin de auth:",w),c()}})()},[c]),x.useEffect(()=>{if(r&&n){const v=setInterval(async()=>{try{await g()}catch(w){console.error("Error refreshing token:",w)}},84e4);return()=>clearInterval(v)}},[r,n,g]);const b={user:e,token:r,isAuthenticated:n,isLoading:s,error:a,login:i,register:l,logout:c,updateUser:d,clearError:u,hasPermission:h,canAccessModule:f,hasPermissionAsync:m,canAccessModuleAsync:p,refreshPermissions:y};return o.jsx(Z9.Provider,{value:b,children:t})};function jee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Tee=x.forwardRef(jee);function _ee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const FC=x.forwardRef(_ee);function Aee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Mee=x.forwardRef(Aee);function Oee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ree=x.forwardRef(Oee);function Pee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const cM=x.forwardRef(Pee);function Iee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Dee=x.forwardRef(Iee);function Lee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const $ee=x.forwardRef(Lee);function Fee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const Bee=x.forwardRef(Fee);function zee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Uee=x.forwardRef(zee);function Vee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Hee=x.forwardRef(Vee);function Wee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const qee=x.forwardRef(Wee);function Gee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const Kee=x.forwardRef(Gee);function Zee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const Yee=x.forwardRef(Zee);function Xee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Jee=x.forwardRef(Xee);function Qee({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const ete=x.forwardRef(Qee);function tte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const rte=x.forwardRef(tte);function nte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const ste=x.forwardRef(nte);function ate({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const ite=x.forwardRef(ate);function ote({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const lte=x.forwardRef(ote);function cte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const BC=x.forwardRef(cte);function dte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const ute=x.forwardRef(dte);function hte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const fte=x.forwardRef(hte);function mte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const pte=x.forwardRef(mte);function gte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const xte=x.forwardRef(gte);function yte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const vte=x.forwardRef(yte);function bte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const wte=x.forwardRef(bte);function kte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const Cte=x.forwardRef(kte);function Nte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const Ste=x.forwardRef(Nte);function Ete({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const jte=x.forwardRef(Ete);function Tte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const _te=x.forwardRef(Tte);function Ate({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Mte=x.forwardRef(Ate);function Ote({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Rte=x.forwardRef(Ote);function Pte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const Ite=x.forwardRef(Pte);function Dte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Lte=x.forwardRef(Dte);function $te({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Fte=x.forwardRef($te);function Bte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const zte=x.forwardRef(Bte);function Ute({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Vte=x.forwardRef(Ute);function Hte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Wte=x.forwardRef(Hte);function qte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Gte=x.forwardRef(qte);function Kte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Zte=x.forwardRef(Kte);function Yte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const Xte=x.forwardRef(Yte);function Jte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const dM=x.forwardRef(Jte);function Qte({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const ere=x.forwardRef(Qte);function tre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const rre=x.forwardRef(tre);function nre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const sre=x.forwardRef(nre);function are({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const ire=x.forwardRef(are);function ore({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const lre=x.forwardRef(ore);function cre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const dre=x.forwardRef(cre);function ure({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const hre=x.forwardRef(ure);function fre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const mre=x.forwardRef(fre);function pre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const gre=x.forwardRef(pre);function xre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const yre=x.forwardRef(xre);function vre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const bre=x.forwardRef(vre);function wre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const kre=x.forwardRef(wre);function Cre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const Nre=x.forwardRef(Cre);function Sre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const Ere=x.forwardRef(Sre);function jre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const Tre=x.forwardRef(jre);function _re({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const Are=x.forwardRef(_re);function Mre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Ore=x.forwardRef(Mre);function Rre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Pre=x.forwardRef(Rre);function Ire({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Dre=x.forwardRef(Ire);function Lre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const $re=x.forwardRef(Lre);function Fre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Bre=x.forwardRef(Fre);function zre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"}))}const Ure=x.forwardRef(zre);function Vre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Hre=x.forwardRef(Vre);function Wre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const qre=x.forwardRef(Wre);function Gre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Kre=x.forwardRef(Gre);function Zre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const uM=x.forwardRef(Zre);function Yre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const Xre=x.forwardRef(Yre);function Jre({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const Qre=x.forwardRef(Jre);function ene({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const tne=x.forwardRef(ene);function rne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const hM=x.forwardRef(rne);function nne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const sne=x.forwardRef(nne);function ane({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const ine=x.forwardRef(ane);function one({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const lne=x.forwardRef(one);function cne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const dne=x.forwardRef(cne);function une({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const hne=x.forwardRef(une);function fne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const mne=x.forwardRef(fne);function pne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const gne=x.forwardRef(pne);function xne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const yne=x.forwardRef(xne);function vne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const bne=x.forwardRef(vne);function wne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const kne=x.forwardRef(wne);function Cne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const fM=x.forwardRef(Cne);function Nne({title:t,titleId:e,...r},n){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Sne=x.forwardRef(Nne),Ene={view:Gte,hide:Wte,edit:Ore,delete:hne,activate:uM,deactivate:Xre,duplicate:Ite,changePassword:hre,add:Bre,search:kre,filter:ere,settings:wte,export:FC,download:FC,upload:FC,save:BC,cancel:fM,close:Sne,confirm:BC,archive:Tee,restore:cM,favorite:hM,share:Kre,print:Hre,info:dre,warning:Vte,success:BC,error:fM,tag:dne,folder:dM,time:vte,calendar:ete,table:lne,grid:tne,server:qre,cpu:Ste,user:mne,users:gne,building:Jee,document:Fte,attachment:Tre,link:mre,globe:rre,notification:Hee,chat:ite,email:zte,phone:Pre,bookmark:Yee,flag:Xte,fire:Zte,thumbUp:ire,thumbDown:sre,bolt:qee,lock:yre,unlock:bre,shield:uM,camera:rte,photo:Dre,video:yne,microphone:Nre,speaker:Qre,desktop:Cte,mobile:_te,wifi:bne,power:Ure,sun:ine,moon:Ere,sortUp:Bee,sortDown:Mee,back:Ree,dashboard:ste,analytics:Rte,logout:Dee,dropdown:fte,chevronUp:pte,home:lre,menu:Uee,list:gre,tool:kne,book:Kee,report:Mte,clipboard:xte,play:$re,pause:Are,check:ute,stop:sne,arrowRight:$ee,loading:cM,star:hM,case:dM,modules:jte,changelog:Lte,verified:lte},jne={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"},Tne={primary:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",secondary:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",success:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",danger:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",warning:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",info:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",neutral:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",blue:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",orange:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",red:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",green:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",yellow:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",purple:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",gray:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300"},_ne={view:"blue",hide:"gray",edit:"orange",delete:"red",activate:"green",deactivate:"red",duplicate:"green",changePassword:"yellow",add:"blue",search:"blue",filter:"gray",settings:"gray",export:"blue",download:"blue",upload:"blue",save:"green",cancel:"gray",close:"gray",confirm:"green",archive:"yellow",restore:"green",favorite:"yellow",share:"blue",print:"gray",info:"blue",warning:"yellow",success:"green",error:"red",tag:"purple",folder:"blue",time:"blue",calendar:"blue",user:"blue",users:"blue",building:"gray",document:"blue",attachment:"gray",link:"blue",globe:"blue",notification:"yellow",chat:"blue",email:"blue",phone:"green",bookmark:"yellow",flag:"red",fire:"red",thumbUp:"green",thumbDown:"red",bolt:"yellow",lock:"red",unlock:"green",shield:"green",camera:"blue",photo:"blue",video:"purple",microphone:"green",speaker:"blue",desktop:"gray",mobile:"gray",wifi:"blue",power:"red",sun:"yellow",moon:"blue",sortUp:"gray",sortDown:"gray",back:"blue",dashboard:"blue",analytics:"purple",logout:"red",dropdown:"gray",chevronUp:"gray",home:"blue",menu:"gray",list:"blue",tool:"orange",book:"blue",table:"gray",grid:"blue",server:"blue",cpu:"purple",report:"green",clipboard:"blue",play:"green",pause:"orange",check:"success",stop:"red",arrowRight:"blue",loading:"blue",star:"yellow",case:"blue",modules:"purple",changelog:"green",verified:"success"},O=({action:t,size:e="sm",color:r,className:n="",title:s,onClick:a,disabled:i=!1,...l})=>{const c=Ene[t],d=jne[e],u=Tne[r||_ne[t]],h=`
    ${d} 
    ${i?"opacity-50 cursor-not-allowed":u} 
    ${a?"cursor-pointer":""} 
    ${n}
  `.trim();return a?o.jsx("button",{onClick:i?void 0:a,className:`p-1 rounded transition-colors ${i?"cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:s,disabled:i,...l,children:o.jsx(c,{className:h})}):o.jsx("span",{title:s,...l,children:o.jsx(c,{className:h})})},Y9=t=>o.jsx(O,{action:"view",...t}),X9=t=>o.jsx(O,{action:"edit",...t}),J9=t=>o.jsx(O,{action:"delete",...t}),GE=t=>o.jsx(O,{action:"add",...t}),Ane=t=>o.jsx(O,{action:"search",...t}),Mne=t=>o.jsx(O,{action:"filter",...t}),Im=t=>o.jsx(O,{action:"export",...t}),One=t=>o.jsx(O,{action:"sun",...t}),Rne=t=>o.jsx(O,{action:"moon",...t}),Q9=t=>o.jsx(O,{action:"close",...t}),ae=({variant:t="primary",size:e="md",className:r="",children:n,disabled:s,...a})=>{const i="inline-flex items-center justify-center font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-40 disabled:cursor-not-allowed backdrop-blur-sm",l={primary:"bg-blue-600/90 hover:bg-blue-700/90 text-white focus:ring-blue-500 backdrop-blur-md shadow-lg",secondary:"bg-gray-600/90 hover:bg-gray-700/90 text-white focus:ring-gray-500 backdrop-blur-md shadow-lg",success:"bg-green-600/90 hover:bg-green-700/90 text-white focus:ring-green-500 backdrop-blur-md shadow-lg",danger:"bg-red-600/90 hover:bg-red-700/90 text-white focus:ring-red-500 backdrop-blur-md shadow-lg",warning:"bg-yellow-600/90 hover:bg-yellow-700/90 text-white focus:ring-yellow-500 backdrop-blur-md shadow-lg",ghost:"bg-transparent hover:bg-gray-100/80 dark:hover:bg-gray-800/80 text-gray-700 dark:text-gray-300 focus:ring-gray-500 backdrop-blur-sm"},c={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},d=`${i} ${l[t]} ${c[e]} ${r}`;return o.jsx("button",{className:d,disabled:s,...a,children:n})},e$=x.createContext(void 0),nr=()=>{const t=x.useContext(e$);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},Pne=({type:t})=>{switch(t){case"success":return o.jsx(O,{action:"success",size:"md",color:"green"});case"error":return o.jsx(O,{action:"error",size:"md",color:"red"});case"warning":return o.jsx(O,{action:"warning",size:"md",color:"yellow"});case"info":default:return o.jsx(O,{action:"info",size:"md",color:"blue"})}},Ine=({toast:t,onRemove:e})=>{const r=n=>{switch(n){case"success":return"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-700";case"error":return"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700";case"warning":return"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-700";case"info":default:return"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-700"}};return st.useEffect(()=>{const n=t.duration||5e3,s=setTimeout(()=>{e(t.id)},n);return()=>clearTimeout(s)},[t.id,t.duration,e]),o.jsx("div",{className:`max-w-sm w-full shadow-lg rounded-lg pointer-events-auto border ${r(t.type)} transform transition-all duration-300 ease-in-out`,children:o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Pne,{type:t.type})}),o.jsxs("div",{className:"ml-3 w-0 flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),t.description&&o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t.description})]}),o.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:o.jsxs(ae,{variant:"ghost",size:"xs",className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200",onClick:()=>e(t.id),children:[o.jsx("span",{className:"sr-only",children:"Cerrar"}),o.jsx(O,{action:"close",size:"md"})]})})]})})})},Dne=({toasts:t,onRemove:e})=>t.length===0?null:Va.createPortal(o.jsx("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:o.jsx("div",{className:"flex flex-col items-end justify-start min-h-screen pt-4 px-4 pb-6 space-y-4",children:t.map(r=>o.jsx(Ine,{toast:r,onRemove:e},r.id))})}),document.body),Lne=({children:t})=>{const[e,r]=x.useState([]),n=x.useCallback(u=>{const h=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f={...u,id:h};r(m=>[...m,f])},[]),s=x.useCallback(u=>{r(h=>h.filter(f=>f.id!==u))},[]),a=x.useCallback((u,h)=>{n({type:"success",title:u,description:h})},[n]),i=x.useCallback((u,h)=>{n({type:"error",title:u,description:h})},[n]),l=x.useCallback((u,h)=>{n({type:"info",title:u,description:h})},[n]),c=x.useCallback((u,h)=>{n({type:"warning",title:u,description:h})},[n]),d={toasts:e,addToast:n,removeToast:s,success:a,error:i,info:l,warning:c};return o.jsxs(e$.Provider,{value:d,children:[t,o.jsx(Dne,{toasts:e,onRemove:s})]})},$ne=({className:t="",showLabel:e=!0,isCollapsed:r=!1})=>{const{isDark:n,toggleTheme:s}=U9();return o.jsx(ae,{variant:"ghost",size:"sm",onClick:s,className:`w-full ${r?"justify-center":""} ${t}`,title:n?"Cambiar a modo claro":"Cambiar a modo oscuro",children:n?o.jsxs(o.Fragment,{children:[o.jsx(One,{size:"md",color:"yellow",className:"flex-shrink-0"}),!r&&e&&o.jsx("span",{className:"ml-3",children:"Modo Claro"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Rne,{size:"md",className:"flex-shrink-0"}),!r&&e&&o.jsx("span",{className:"ml-3",children:"Modo Oscuro"})]})})},Fne=({onClick:t})=>o.jsx("button",{onClick:t,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors duration-200 px-2 py-1 rounded",title:"Ver informacin de versin",children:"v1.0.0"}),Bne=[{name:"Dashboard",href:"/",icon:"HomeIcon",permissions:["dashboard.read.own","dashboard.read.all"]},{name:"Casos",href:"/cases",icon:"DocumentTextIcon",permissions:["cases.view.own","cases.view.team","cases.view.all"]},{name:"Nuevo Caso",href:"/cases/new",icon:"PlusIcon",permissions:["cases.create.own","cases.create.team","cases.create.all"]},{name:"Control de Casos",href:"/case-control",icon:"ClockIcon",permissions:["case_control.view.own","case_control.view.team","case_control.view.all"]},{name:"Disposiciones",href:"/dispositions",icon:"WrenchScrewdriverIcon",permissions:["dispositions.view.own","dispositions.view.team","dispositions.view.all"]},{name:"TODOs",href:"/todos",icon:"ListBulletIcon",permissions:["todos.view.own","todos.view.team","todos.view.all"]},{name:"Notas",href:"/notes",icon:"DocumentDuplicateIcon",permissions:["notes.view.own","notes.view.team","notes.view.all"]},{name:"Base de Conocimiento",href:"/knowledge",icon:"BookOpenIcon",permissions:["knowledge.read.own","knowledge.read.team","knowledge.read.all"]},{name:"Archivo",href:"/archive",icon:"ArchiveBoxIcon",permissions:["archive.view.own"]}],zne=[{id:"user-management",title:"Administracin",icon:"UsersIcon",adminOnly:!0,items:[{name:"Usuarios",href:"/users",icon:"UsersIcon",permissions:["users.view.all","users.manage.all"],adminOnly:!0},{name:"Roles",href:"/roles",icon:"CogIcon",permissions:["roles.manage.all"],adminOnly:!0},{name:"Equipos",href:"/teams",icon:"UsersIcon",permissions:["teams.view.all"],adminOnly:!1},{name:"Gestin de Permisos",href:"/permissions",icon:"ShieldCheckIcon",permissions:["permissions.admin.all","permissions.read.all"],adminOnly:!0},{name:"Orgenes",href:"/admin/origins",icon:"BuildingOffice2Icon",permissions:["admin.config.all","origins.admin.all"],adminOnly:!0},{name:"Aplicaciones",href:"/admin/applications",icon:"CubeIcon",permissions:["admin.config.all","applications.admin.all"],adminOnly:!0},{name:"Estados de Control",href:"/admin/case-statuses",icon:"FlagIcon",permissions:["admin.config.all","case_statuses.admin.all"],adminOnly:!0},{name:"Etiquetas",href:"/admin/tags",icon:"TagIcon",permissions:["tags.manage.all","tags.read.all","tags.create.all","tags.update.all"],adminOnly:!1},{name:"Tipos de Documento",href:"/admin/document-types",icon:"DocumentTextIcon",permissions:["knowledge_types.manage.all","knowledge_types.read.all","knowledge_types.create.all","knowledge_types.update.all"],adminOnly:!1},{name:"Prioridades de Tareas",href:"/admin/todo-priorities",icon:"FlagIcon",permissions:["todos.create.all","todos.edit.all","todos.admin.all"],adminOnly:!1},{name:"Auditora",href:"/admin/audit",icon:"ShieldCheckIcon",permissions:["audit.view.all","audit.admin.all"],adminOnly:!0},{name:"Estado del Sistema",href:"/system/status",icon:"CogIcon",permissions:["admin.config.all","admin.read.all"],adminOnly:!0}]}],t$=()=>{const{user:t,hasPermission:e,canAccessModule:r}=ti();return x.useMemo(()=>{const n=e("permissions.admin.all")||e("roles.manage.all")||e("users.admin.all"),s=c=>n?!0:c.adminOnly&&!n?!1:!c.permissions||c.permissions.length===0?!0:c.permissions.some(u=>e(u)),a=c=>n?!0:c.adminOnly&&!n?!1:c.items.some(u=>s(u)),i=Bne.filter(s),l=zne.filter(a).map(c=>({...c,items:c.items.filter(s)})).filter(c=>c.items.length>0);return{allowedModules:i,allowedAdminSections:l,canAccessModuleWithPermissions:s,canAccessAdminSection:a,isAdmin:n}},[t,e,r])},r$=()=>{const{hasPermission:t,user:e}=ti();return x.useMemo(()=>{const r=t("permissions.admin.all")||t("roles.manage.all")||t("users.admin.all");return{canCreateCases:t("cases.create.own")||t("cases.create.team")||t("cases.create.all"),canViewAllCases:t("cases.view.all"),canEditCases:t("cases.edit.own")||t("cases.edit.team")||t("cases.edit.all"),canDeleteCases:t("cases.delete.own")||t("cases.delete.team")||t("cases.delete.all"),canCreateNotes:t("notes.create.own")||t("notes.create.team")||t("notes.create.all"),canViewAllNotes:t("notes.view.all"),canEditNotes:t("notes.edit.own")||t("notes.edit.team")||t("notes.edit.all"),canCreateTodos:t("todos.create.own")||t("todos.create.team")||t("todos.create.all"),canViewAllTodos:t("todos.view.all"),canEditTodos:t("todos.edit.own")||t("todos.edit.team")||t("todos.edit.all"),canCreateKnowledge:t("knowledge.create.own")||t("knowledge.create.team")||t("knowledge.create.all"),canViewAllKnowledge:t("knowledge.read.all"),canEditKnowledge:t("knowledge.update.own")||t("knowledge.update.team")||t("knowledge.update.all"),canDeleteKnowledge:t("knowledge.delete.own")||t("knowledge.delete.team")||t("knowledge.delete.all"),canArchiveKnowledge:t("knowledge.archive.own")||t("knowledge.archive.team")||t("knowledge.archive.all"),canExportKnowledge:t("knowledge.export.own")||t("knowledge.export.team")||t("knowledge.export.all"),canDuplicateKnowledge:t("knowledge.duplicate.own")||t("knowledge.duplicate.team")||t("knowledge.duplicate.all"),canCreateDispositions:t("dispositions.create.own")||t("dispositions.create.team")||t("dispositions.create.all"),canViewAllDispositions:t("dispositions.view.all"),canEditDispositions:t("dispositions.edit.own")||t("dispositions.edit.team")||t("dispositions.edit.all"),canManageUsers:t("users.manage.all")||t("users.edit.all"),canManageRoles:t("roles.manage.all")||t("roles.edit.all"),canManageSystem:t("admin.config.all")||t("permissions.admin.all"),canViewReports:t("reports.generate.team")||t("reports.generate.all"),isAdmin:r}},[t,e])},Une={HomeIcon:"home",DocumentTextIcon:"document",PlusIcon:"add",ChartBarIcon:"dashboard",UsersIcon:"users",ClockIcon:"time",WrenchScrewdriverIcon:"tool",ListBulletIcon:"list",DocumentDuplicateIcon:"duplicate",CogIcon:"settings",BuildingOfficeIcon:"building",BuildingOffice2Icon:"building",CubeIcon:"modules",FlagIcon:"flag",ShieldCheckIcon:"shield",ArchiveBoxIcon:"archive",BookOpenIcon:"book",TagIcon:"tag"},Vne=({isCollapsed:t,openDropdowns:e,onToggleDropdown:r})=>{const n=Jd(),{allowedModules:s,allowedAdminSections:a}=t$(),i=d=>!!(d==="/"&&n.pathname==="/"||d!=="/"&&n.pathname.startsWith(d)),l=d=>d.some(u=>i(u.href)),c=d=>Une[d]||"home";return o.jsxs("nav",{className:`py-4 space-y-2 ${t?"px-1":"px-4"} overflow-hidden`,children:[s.map(d=>{const u=c(d.icon);return o.jsxs(cs,{to:d.href,className:`flex items-center ${t?"justify-center p-2 w-12 h-12 mx-auto":"px-3 py-2"} text-sm font-medium rounded-md transition-colors duration-200 focus:ring-0 focus:ring-offset-0 ${i(d.href)?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:t?d.name:void 0,children:[o.jsx(O,{action:u,size:"sm",className:"flex-shrink-0"}),!t&&o.jsx("span",{className:"ml-3",children:d.name})]},d.name)}),a.length>0&&!t&&o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-4"}),a.map(d=>{const u=c(d.icon),h=l(d.items),f=e.has(d.id);return t?o.jsxs("div",{className:"relative group flex justify-center",children:[o.jsx("button",{className:`w-12 h-12 flex items-center justify-center p-2 text-sm font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-0 focus:ring-offset-0 ${h?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:d.title,children:o.jsx(O,{action:u,size:"sm",className:"flex-shrink-0"})}),o.jsxs("div",{className:"absolute left-full top-0 ml-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:d.title}),d.items.map(m=>{const p=c(m.icon);return o.jsxs(cs,{to:m.href,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${i(m.href)?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[o.jsx(O,{action:p,size:"sm",className:"mr-3"}),m.name]},m.name)})]})]},d.id):o.jsxs("div",{className:"space-y-1",children:[o.jsxs("button",{onClick:()=>r(d.id),className:`w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${h?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:u,size:"sm",className:"mr-3"}),d.title]}),o.jsx(O,{action:"dropdown",size:"sm",className:`transform transition-transform ${f?"rotate-180":""}`})]}),f&&o.jsx("div",{className:"ml-6 space-y-1",children:d.items.map(m=>{const p=c(m.icon);return o.jsxs(cs,{to:m.href,className:`flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 ${i(m.href)?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[o.jsx(O,{action:p,size:"sm",className:"mr-3"}),m.name]},m.name)})})]},d.id)}),s.length===0&&a.length===0&&!t&&o.jsx("div",{className:"px-3 py-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Sin permisos de navegacin"})]})},Hne=({timeoutDuration:t=30,warningDuration:e=5,onWarning:r,onTimeout:n}={})=>{const s=io(S=>S.logout),a=io(S=>S.isAuthenticated),[i,l]=x.useState(!1),[c,d]=x.useState(0),[u,h]=x.useState(0),f=x.useRef(),m=x.useRef(),p=x.useRef(Date.now()),g=x.useRef(),y=x.useRef(),b=x.useRef(!1),v=x.useCallback(()=>{if(f.current&&clearTimeout(f.current),m.current&&clearTimeout(m.current),g.current&&clearInterval(g.current),y.current&&clearInterval(y.current),l(!1),b.current=!1,d(0),p.current=Date.now(),!a)return;const S=t*60*1e3;h(S),y.current=setInterval(()=>{const T=Date.now()-p.current,R=Math.max(0,S-T);h(R),R<=0&&clearInterval(y.current)},1e3);const C=(t-e)*60*1e3;m.current=setTimeout(()=>{l(!0),b.current=!0,d(e),g.current=setInterval(()=>{d(T=>T<=.5?0:T-.5)},3e4),r==null||r()},C);const E=t*60*1e3;f.current=setTimeout(()=>{l(!1),n==null||n(),s()},E)},[t,e,a,s,r,n]),w=x.useCallback(()=>{b.current||v()},[v]);x.useEffect(()=>{if(!a){f.current&&clearTimeout(f.current),m.current&&clearTimeout(m.current),g.current&&clearInterval(g.current),y.current&&clearInterval(y.current),l(!1),b.current=!1,d(0),h(0);return}const S=["mousedown","mousemove","keypress","scroll","touchstart","click"];let C;const E=()=>{C||(w(),C=setTimeout(()=>{C=null},1e3))};return S.forEach(T=>{document.addEventListener(T,E,!0)}),v(),()=>{S.forEach(T=>{document.removeEventListener(T,E,!0)}),f.current&&clearTimeout(f.current),m.current&&clearTimeout(m.current),g.current&&clearInterval(g.current),y.current&&clearInterval(y.current),C&&clearTimeout(C)}},[a,w]);const k=x.useCallback(()=>u,[u]),N=x.useCallback(()=>{l(!1),b.current=!1,d(0),v()},[v]);return{showWarning:i,remainingMinutes:c,resetTimer:v,getTimeUntilTimeout:k,extendSession:N,isActive:!i}},At=({isOpen:t,onClose:e,title:r,children:n,size:s="lg",security:a={}})=>{const{preventBackdropClose:i=!1,preventEscapeClose:l=!1,hideCloseButton:c=!1,criticalMode:d=!1}=a;if(x.useEffect(()=>{if(!t||l)return;const f=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[t,e,l]),!t)return null;const u={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl"},h=()=>{i||e()};return o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[o.jsx("div",{className:`fixed inset-0 transition-opacity ${d?"bg-black bg-opacity-75":"bg-black bg-opacity-50"}`,onClick:h}),o.jsxs("div",{className:`relative bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full ${u[s]} max-h-[90vh] overflow-hidden ${d?"border-4 border-red-500 dark:border-red-400":""}`,children:[r&&o.jsxs("div",{className:`flex items-center ${c?"justify-center":"justify-between"} p-6 border-b border-gray-200 dark:border-gray-700 ${d?"bg-red-50 dark:bg-red-900/20":""}`,children:[o.jsx("h2",{className:`text-xl font-semibold ${d?"text-red-800 dark:text-red-200":"text-gray-900 dark:text-white"}`,children:r}),!c&&o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:o.jsx(Q9,{size:"lg"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:n})]})]})})},Wne=({isOpen:t,remainingMinutes:e,onExtendSession:r,onLogout:n})=>{const[s,a]=x.useState(0);x.useEffect(()=>{if(!t)return;a(e*60);const l=setInterval(()=>{a(c=>c<=1?(n(),0):c-1)},1e3);return()=>clearInterval(l)},[t,e,n]);const i=l=>{const c=Math.floor(l/60),d=l%60;return`${c}:${d.toString().padStart(2,"0")}`};return t?o.jsxs(At,{isOpen:t,onClose:()=>{},title:" Sesin por Expirar",size:"sm",security:{preventBackdropClose:!0,preventEscapeClose:!0,hideCloseButton:!0,criticalMode:!0},children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-700 rounded-xl p-6 mb-6",children:[o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx(O,{action:"time",size:"xl",color:"red"})}),o.jsx("h3",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Tiempo Restante"}),o.jsx("div",{className:"text-6xl font-mono font-bold text-red-600 dark:text-red-400 mb-2",children:i(s)}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Su sesin se cerrar automticamente por inactividad"})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:" Esta ventana requiere confirmacin manual"}),o.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"No se cierra automticamente para validar su presencia"})]})]}),o.jsxs("div",{className:"flex justify-center space-x-4",children:[o.jsxs(ae,{variant:"secondary",onClick:n,size:"md",className:"min-w-[120px] bg-red-100 hover:bg-red-200 text-red-800 border-red-300 dark:bg-red-900/20 dark:hover:bg-red-900/40 dark:text-red-200 dark:border-red-700",children:[o.jsx(O,{action:"logout",size:"sm",className:"mr-2"}),"Cerrar Sesin"]}),o.jsxs(ae,{variant:"primary",onClick:r,size:"md",className:"min-w-[120px] bg-green-600 hover:bg-green-700 dark:bg-green-600 dark:hover:bg-green-700 text-white font-semibold animate-pulse",children:[o.jsx(O,{action:"check",size:"sm",className:"mr-2"}),"Continuar Trabajando"]})]})]}):null},qne=Pn.api.baseUrl;class Gne{getToken(){const e=ct.getValidTokens();return(e==null?void 0:e.token)||null}async makeRequest(e,r={}){const n=this.getToken(),s=await fetch(`${qne}${e}`,{...r,headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...r.headers}});if(!s.ok){const i=await s.json().catch(()=>({message:"Error desconocido"}));throw new Error(i.message||`Error ${s.status}`)}return(await s.json()).data}async getUsers(e){const r=new URLSearchParams;e!=null&&e.search&&r.append("search",e.search),e!=null&&e.roleId&&r.append("roleId",e.roleId),e!=null&&e.roleName&&r.append("roleName",e.roleName),(e==null?void 0:e.isActive)!==void 0&&r.append("isActive",e.isActive.toString()),e!=null&&e.sortBy&&r.append("sortBy",e.sortBy),e!=null&&e.sortOrder&&r.append("sortOrder",e.sortOrder),e!=null&&e.page&&r.append("page",e.page.toString()),e!=null&&e.limit&&r.append("limit",e.limit.toString());const n=r.toString(),s=n?`/users?${n}`:"/users";return this.makeRequest(s)}async getUserById(e){return this.makeRequest(`/users/${e}`)}async createUser(e){return this.makeRequest("/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,r){return this.makeRequest(`/users/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteUser(e){await this.makeRequest(`/users/${e}`,{method:"DELETE"})}async changePassword(e,r){await this.makeRequest(`/users/${e}/change-password`,{method:"PUT",body:JSON.stringify(r)})}async updatePassword(e,r){await this.makeRequest(`/users/${e}/update-password`,{method:"PUT",body:JSON.stringify(r)})}async toggleUserStatus(e){return this.makeRequest(`/users/${e}/toggle-status`,{method:"PATCH"})}async getRoles(){return(await this.makeRequest("/roles")).roles}}const Gs=new Gne,ft=x.forwardRef(({label:t,error:e,helperText:r,className:n="",id:s,...a},i)=>{const l=s||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-")),u=`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500":""} ${n}`;return o.jsxs("div",{className:"space-y-1",children:[t&&o.jsx("label",{htmlFor:l,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),o.jsx("input",{ref:i,id:l,className:u,...a}),e&&o.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:e}),r&&!e&&o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})});ft.displayName="Input";const Lr=({size:t="md",text:e,className:r=""})=>{const n={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return o.jsxs("div",{className:`flex flex-col items-center justify-center space-y-2 ${r}`,children:[o.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${n[t]}`}),e&&o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e})]})},la=({children:t,variant:e="primary",size:r="sm",className:n="",style:s})=>{const a="inline-flex items-center font-medium rounded-full",i={primary:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",secondary:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",info:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200"},l={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},c=`${a} ${i[e]} ${l[r]} ${n}`;return o.jsx("span",{className:c,style:s,children:t})},Kne=({onClose:t,onSuccess:e})=>{const{user:r,updateUser:n}=ti(),[s,a]=x.useState({fullName:(r==null?void 0:r.fullName)||"",currentPassword:"",newPassword:"",confirmPassword:""}),[i,l]=x.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),[c,d]=x.useState(!1),[u,h]=x.useState(null),[f,m]=x.useState({}),[p,g]=x.useState(!1);if(!r)return null;const y=()=>{const T={};return s.fullName.trim()?s.fullName.trim().length<2&&(T.fullName="El nombre debe tener al menos 2 caracteres"):T.fullName="El nombre completo es requerido",m(T),Object.keys(T).length===0},b=()=>{const T={};return s.currentPassword||(T.currentPassword="La contrasea actual es requerida"),s.newPassword?s.newPassword.length<8?T.newPassword="La contrasea debe tener al menos 8 caracteres":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(s.newPassword)||(T.newPassword="La contrasea debe contener al menos una mayscula, una minscula y un nmero"):T.newPassword="La nueva contrasea es requerida",s.confirmPassword?s.newPassword!==s.confirmPassword&&(T.confirmPassword="Las contraseas no coinciden"):T.confirmPassword="Confirme la nueva contrasea",s.currentPassword&&s.newPassword&&s.currentPassword===s.newPassword&&(T.newPassword="La nueva contrasea debe ser diferente a la actual"),m(T),Object.keys(T).length===0},v=(T,R)=>{a(B=>({...B,[T]:R})),f[T]&&m(B=>({...B,[T]:""}))},w=T=>{l(R=>({...R,[T]:!R[T]}))},k=async()=>{if(y())try{d(!0),h(null),s.fullName.trim()!==r.fullName&&(await Gs.updateUser(r.id,{fullName:s.fullName.trim()}),n&&n({...r,fullName:s.fullName.trim()})),e==null||e(),t()}catch(T){h(T instanceof Error?T.message:"Error al actualizar el perfil")}finally{d(!1)}},N=async()=>{if(b())try{d(!0),h(null),await Gs.changePassword(r.id,{currentPassword:s.currentPassword,newPassword:s.newPassword}),a(T=>({...T,currentPassword:"",newPassword:"",confirmPassword:""})),g(!1),e==null||e()}catch(T){h(T instanceof Error?T.message:"Error al cambiar la contrasea")}finally{d(!1)}},S=async T=>{T.preventDefault(),p?await N():await k()},E=(T=>{let R=0;return T.length>=8&&(R+=1),/[a-z]/.test(T)&&(R+=1),/[A-Z]/.test(T)&&(R+=1),/\d/.test(T)&&(R+=1),/[^a-zA-Z\d]/.test(T)&&(R+=1),{strength:R,...[{text:"Muy dbil",color:"text-red-600"},{text:"Dbil",color:"text-red-500"},{text:"Regular",color:"text-yellow-500"},{text:"Buena",color:"text-blue-500"},{text:"Muy fuerte",color:"text-green-500"}][Math.min(R,4)]}})(s.newPassword);return o.jsx(At,{isOpen:!0,onClose:t,title:"Mi Perfil",size:"md",children:o.jsxs("form",{onSubmit:S,className:"space-y-6",children:[u&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:u})}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 rounded-full p-2",children:o.jsx(O,{action:"user",size:"sm",color:"primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Informacin de la cuenta"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[o.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:r.email}),o.jsx(la,{variant:"secondary",size:"sm",children:r.roleName})]})]})]})}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"user",size:"sm",className:"inline mr-2"}),"Nombre Completo"]}),o.jsx(ft,{type:"text",value:s.fullName,onChange:T=>v("fullName",T.target.value),placeholder:"Ingrese su nombre completo",error:f.fullName,required:!0})]}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Cambiar Contrasea"}),o.jsx(ae,{type:"button",variant:"secondary",size:"sm",onClick:()=>{g(!p),p&&(a(T=>({...T,currentPassword:"",newPassword:"",confirmPassword:""})),m({}))},children:p?"Cancelar":"Cambiar Contrasea"})]}),p&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"lock",size:"sm",className:"inline mr-2"}),"Contrasea Actual"]}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:i.currentPassword?"text":"password",value:s.currentPassword,onChange:T=>v("currentPassword",T.target.value),placeholder:"Ingrese su contrasea actual",error:f.currentPassword,required:!0}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w("currentPassword"),children:i.currentPassword?o.jsx(O,{action:"hide",size:"sm",color:"neutral"}):o.jsx(O,{action:"view",size:"sm",color:"neutral"})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"changePassword",size:"sm",className:"inline mr-2"}),"Nueva Contrasea"]}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:i.newPassword?"text":"password",value:s.newPassword,onChange:T=>v("newPassword",T.target.value),placeholder:"Ingrese la nueva contrasea",error:f.newPassword,required:!0}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w("newPassword"),children:i.newPassword?o.jsx(O,{action:"hide",size:"sm",color:"neutral"}):o.jsx(O,{action:"view",size:"sm",color:"neutral"})})]}),s.newPassword&&o.jsx("div",{className:"mt-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${E.strength<=1?"bg-red-500":E.strength<=2?"bg-yellow-500":E.strength<=3?"bg-blue-500":"bg-green-500"}`,style:{width:`${E.strength/5*100}%`}})}),o.jsx("span",{className:`text-xs font-medium ${E.color}`,children:E.text})]})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"changePassword",size:"sm",className:"inline mr-2"}),"Confirmar Nueva Contrasea"]}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:i.confirmPassword?"text":"password",value:s.confirmPassword,onChange:T=>v("confirmPassword",T.target.value),placeholder:"Confirme la nueva contrasea",error:f.confirmPassword,required:!0}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w("confirmPassword"),children:i.confirmPassword?o.jsx(O,{action:"hide",size:"sm",color:"neutral"}):o.jsx(O,{action:"view",size:"sm",color:"neutral"})})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Requisitos de contrasea:"}),o.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsxs("li",{className:`flex items-center ${s.newPassword.length>=8?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:s.newPassword.length>=8?"":""}),"Al menos 8 caracteres"]}),o.jsxs("li",{className:`flex items-center ${/[a-z]/.test(s.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/[a-z]/.test(s.newPassword)?"":""}),"Al menos una letra minscula"]}),o.jsxs("li",{className:`flex items-center ${/[A-Z]/.test(s.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/[A-Z]/.test(s.newPassword)?"":""}),"Al menos una letra mayscula"]}),o.jsxs("li",{className:`flex items-center ${/\d/.test(s.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/\d/.test(s.newPassword)?"":""}),"Al menos un nmero"]})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:t,disabled:c,children:"Cancelar"}),o.jsxs(ae,{type:"submit",variant:"primary",disabled:c,className:"flex items-center gap-2",children:[c&&o.jsx(Lr,{size:"sm"}),o.jsx(O,{action:p?"changePassword":"edit",size:"sm"}),p?"Cambiar Contrasea":"Guardar Cambios"]})]})]})})},ar=({children:t})=>{const{user:e,logout:r}=ti(),n=Ri(),[s,a]=x.useState(!1),[i,l]=x.useState(!1),[c,d]=x.useState(!1),[u,h]=x.useState(new Set),[f,m]=x.useState(!1),p=x.useRef(null),g=x.useRef(null),{showWarning:y,remainingMinutes:b,extendSession:v}=Hne({timeoutDuration:30,warningDuration:3,onTimeout:()=>n("/force-logout")}),w=x.useCallback(C=>{h(E=>{const T=new Set(E);return T.has(C)?T.delete(C):T.add(C),T})},[]),k=x.useCallback(()=>{n("/force-logout")},[n]),N=x.useCallback(()=>{n("/system/info")},[n]),S=x.useCallback(()=>{a(C=>!C),m(!0),s||h(new Set)},[s]);return x.useEffect(()=>{const C=E=>{const T=E.target;i&&g.current&&!g.current.contains(T)&&l(!1),p.current&&!p.current.contains(T)&&h(new Set)};return document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}},[i]),x.useEffect(()=>{const C=()=>{window.innerWidth<768?f||a(!0):f||a(!1)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[f]),x.useEffect(()=>{window.innerWidth<768&&!f&&a(!0)},[s,f]),o.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900 overflow-x-hidden",children:[o.jsx("div",{ref:p,className:`${s?"w-16":"w-64"} flex-shrink-0 transition-all duration-300 ease-in-out overflow-hidden`,children:o.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 overflow-hidden",children:[o.jsx("div",{className:`flex-shrink-0 flex items-center ${s?"px-1 justify-center":"px-4"} py-4 border-b border-gray-200 dark:border-gray-700 overflow-hidden`,children:o.jsxs(ae,{onClick:S,variant:"ghost",className:`flex items-center ${s?"p-1 w-12 h-12 justify-center rounded-lg focus:ring-0 focus:ring-offset-0":"w-full px-2 py-1 rounded-lg focus:ring-0 focus:ring-offset-0"} transition-colors duration-200`,title:s?"Expandir men":"Colapsar men",children:[o.jsx(O,{action:"dashboard",size:"xl",color:"blue",className:"flex-shrink-0"}),!s&&o.jsx("h1",{className:"ml-3 text-lg font-bold text-gray-900 dark:text-white",children:"Gestin de Casos"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsx(Vne,{isCollapsed:s,openDropdowns:u,onToggleDropdown:w})}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{ref:g,className:`relative ${s?"p-2":"p-4"}`,children:[o.jsxs(ae,{variant:"ghost",size:"sm",onClick:C=>{C.stopPropagation(),l(E=>!E)},className:`w-full ${s?"justify-center p-1 w-12 h-12 focus:ring-0 focus:ring-offset-0 mx-auto":"justify-between focus:ring-0 focus:ring-offset-0"}`,title:s?(e==null?void 0:e.fullName)||"Usuario":void 0,children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"user",size:"md",color:"gray",className:"flex-shrink-0"}),!s&&o.jsxs("div",{className:"ml-3 text-left",children:[o.jsx("div",{className:"font-medium",children:(e==null?void 0:e.fullName)||"Usuario"}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:(e==null?void 0:e.roleName)||"Usuario"})]})]}),!s&&o.jsx(O,{action:"dropdown",size:"sm",color:"gray",className:`transform transition-transform ${i?"rotate-180":""}`})]}),i&&!s&&o.jsx("div",{className:"absolute bottom-full left-0 w-full bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 mb-2 z-50",children:o.jsxs("div",{className:"p-2 space-y-1",children:[o.jsxs("button",{onClick:()=>{l(!1),d(!0)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:[o.jsx(O,{action:"user",size:"sm",color:"gray"}),o.jsx("span",{className:"ml-3",children:"Mi Perfil"})]}),o.jsxs("button",{onClick:()=>{l(!1)},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:[o.jsx(O,{action:"settings",size:"sm",color:"gray"}),o.jsx("span",{className:"ml-3",children:"Configuracin"})]}),o.jsxs(cs,{to:"/system/info",onClick:()=>l(!1),className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:[o.jsx(O,{action:"info",size:"sm",color:"gray"}),o.jsx("span",{className:"ml-3",children:"Informacin del Sistema"})]}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),o.jsxs("button",{onClick:()=>{l(!1),k()},className:"w-full flex items-center px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:[o.jsx(O,{action:"logout",size:"sm",color:"red"}),o.jsx("span",{className:"ml-3",children:"Cerrar Sesin"})]})]})})]})}),o.jsx("div",{className:`border-t border-gray-200 dark:border-gray-700 ${s?"p-2":"p-4"} space-y-2 overflow-hidden`,children:o.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[o.jsx($ne,{isCollapsed:s}),!s&&o.jsx(Fne,{onClick:N})]})})]})}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx("main",{className:"h-full overflow-y-auto p-6",children:t})}),o.jsx(Wne,{isOpen:y,onExtendSession:v,onLogout:r,remainingMinutes:b}),c&&o.jsx(Kne,{onClose:()=>d(!1),onSuccess:()=>{}})]})},mM=(t,e,r,n)=>t.startsWith("audit.")&&e("audit.view.all")||e(t)?!0:r&&Array.isArray(r)?r.map(i=>i.name||i).includes(t):!1,Zne=(t,e)=>({casos:["cases.view.own","cases.view.team","cases.view.all"],notas:["notes.view.own","notes.view.team","notes.view.all"],todos:["todos.view.own","todos.view.team","todos.view.all"],disposiciones:["dispositions.view.own","dispositions.view.team","dispositions.view.all"],usuarios:["users.view.own","users.view.team","users.view.all"],dashboard:["dashboard.view.own","dashboard.view.team","dashboard.view.all"],knowledge:["knowledge.read.own","knowledge.read.team","knowledge.read.all"],tags:["tags.read.all","tags.manage.all"],cases:["cases.view.own","cases.view.team","cases.view.all"],notes:["notes.view.own","notes.view.team","notes.view.all"],tasks:["todos.view.own","todos.view.team","todos.view.all"],dispositions:["dispositions.view.own","dispositions.view.team","dispositions.view.all"],users:["users.view.own","users.view.team","users.view.all"]}[t]||[]).some(s=>e(s)),ir=({children:t,requiredPermission:e,requiredPermissions:r,requiredModule:n,adminOnly:s=!1})=>{const{isAuthenticated:a,isLoading:i}=ti(),{hasPermission:l,isLoadingPermissions:c,permissionsLoaded:d,userPermissions:u,user:h}=io();return i||a&&c?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:i?"Verificando acceso...":"Cargando permisos..."})]})}):a?a&&!d&&!c?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Cargando permisos..."})]})}):s&&!["dashboard.view.own","dashboard.view.team","dashboard.view.all","users.view.own","users.view.team","users.view.all"].some(p=>l(p))?o.jsx(n0,{to:"/unauthorized",replace:!0}):e&&!mM(e,l,u||[],h==null?void 0:h.roleName)?o.jsx(n0,{to:"/unauthorized",replace:!0}):r&&!r.some(f=>mM(f,l,u||[],h==null?void 0:h.roleName))?o.jsx(n0,{to:"/unauthorized",replace:!0}):n&&!Zne(n,l)?o.jsx(n0,{to:"/unauthorized",replace:!0}):t?o.jsx(o.Fragment,{children:t}):o.jsx(qJ,{}):o.jsx(n0,{to:"/login",replace:!0})},Yne=()=>{const t=Ri(),e=Jd(),{allowedModules:r}=t$(),{user:n,isAuthenticated:s,isLoading:a,hasPermission:i}=ti(),{isLoadingPermissions:l,permissionsLoaded:c}=io();return x.useEffect(()=>{if(e.pathname!=="/"||a)return;if(!s||!n){t("/login",{replace:!0});return}if(l||!c)return;const d=setTimeout(()=>{let u="/unauthorized";if(i("dashboard.view.own")||i("dashboard.view.team")||i("dashboard.view.all")||i("metrics.time.own")||i("metrics.cases.own"))u="/dashboard";else{const h=[{route:"/cases",permissions:["cases.view.own","cases.view.team","cases.view.all"]},{route:"/todos",permissions:["todos.view.own","todos.view.team","todos.view.all","todos.ver.own","todos.ver.team","todos.ver.all"]},{route:"/notes",permissions:["notes.view.own","notes.view.team","notes.view.all"]},{route:"/knowledge",permissions:["knowledge.read.own","knowledge.read.team","knowledge.read.all"]},{route:"/case-control",permissions:["case_control.view.own","case_control.view.team","case_control.view.all"]},{route:"/dispositions",permissions:["dispositions.view.own","dispositions.view.team","dispositions.view.all"]},{route:"/archive",permissions:["archive.view.own","archive.view.all"]}];for(const f of h)if(f.permissions.some(p=>i(p))){u=f.route;break}}t(u,{replace:!0})},1e3);return()=>clearTimeout(d)},[r,t,e.pathname,s,a,n,i,l,c]),o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Redirigiendo al mdulo apropiado..."})]})})},Xne=()=>{const[t,e]=x.useState(""),[r,n]=x.useState(""),[s,a]=x.useState(!1),{login:i,error:l,clearError:c,isLoading:d}=ti(),u=Ri(),h=async f=>{if(f.preventDefault(),!(s||d)){a(!0),c();try{await i(t,r),u("/")}catch(m){console.error(" Login failed:",m)}finally{a(!1)}}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{src:"/android-chrome-192x192.png",alt:"Logo Sistema de Gestin de Casos",className:"h-48 w-48"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesin"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sistema de Gestin de Casos"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:h,children:[o.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo electrnico"}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Correo electrnico",value:t,onChange:f=>e(f.target.value),disabled:s||d})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contrasea"}),o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contrasea",value:r,onChange:f=>n(f.target.value),disabled:s||d})]})]}),l&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:l})}),o.jsx("div",{children:o.jsx(ae,{type:"submit",variant:"primary",disabled:s||d||!t||!r,className:"w-full",children:s||d?o.jsxs("span",{className:"flex items-center",children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):"Iniciar Sesin"})}),o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:"text-sm text-gray-600",children:["No tienes una cuenta?"," ",o.jsx(cs,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Regstrate aqu"})]})})]})]})})},Jne=()=>{const[t,e]=x.useState({email:"",password:"",confirmPassword:"",fullName:""}),[r,n]=x.useState(!1),[s,a]=x.useState([]),{register:i,error:l,clearError:c,isLoading:d}=ti(),u=Ri(),h=g=>{const{name:y,value:b}=g.target;e(v=>({...v,[y]:b})),s.length>0&&a([]),l&&c()},f=()=>{const g=[];return t.email?/\S+@\S+\.\S+/.test(t.email)||g.push("El correo electrnico no es vlido"):g.push("El correo electrnico es requerido"),t.fullName?t.fullName.trim().length<2&&g.push("El nombre completo debe tener al menos 2 caracteres"):g.push("El nombre completo es requerido"),t.password?t.password.length<6&&g.push("La contrasea debe tener al menos 6 caracteres"):g.push("La contrasea es requerida"),t.confirmPassword?t.password!==t.confirmPassword&&g.push("Las contraseas no coinciden"):g.push("Confirma tu contrasea"),g},m=async g=>{if(g.preventDefault(),r||d)return;const y=f();if(y.length>0){a(y);return}n(!0),a([]),c();try{await i(t.email,t.password,t.fullName.trim()),u("/dashboard")}catch(b){console.error("Registration failed:",b)}finally{n(!1)}},p=[...s,...l?[l]:[]];return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear Cuenta"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sistema de Gestin de Casos"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),o.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Tu nombre completo",value:t.fullName,onChange:h,disabled:r||d})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrnico"}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"tu@email.com",value:t.email,onChange:h,disabled:r||d})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),o.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Mnimo 6 caracteres",value:t.password,onChange:h,disabled:r||d})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar Contrasea"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Repite tu contrasea",value:t.confirmPassword,onChange:h,disabled:r||d})]})]}),p.length>0&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsx("div",{className:"text-sm text-red-700",children:o.jsx("ul",{className:"list-disc list-inside space-y-1",children:p.map((g,y)=>o.jsx("li",{children:g},y))})})}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:r||d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r||d?o.jsxs("span",{className:"flex items-center",children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando cuenta..."]}):"Crear Cuenta"})}),o.jsx("div",{className:"text-center",children:o.jsxs("span",{className:"text-sm text-gray-600",children:["Ya tienes una cuenta?"," ",o.jsx(cs,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Inicia sesin aqu"})]})})]})]})})},Qne=()=>{const{logout:t}=io();return x.useEffect(()=>{(async()=>{localStorage.clear(),sessionStorage.clear(),t(),ct.clearSession(),setTimeout(()=>{window.location.href="/login?cleaned=true"},1e3)})()},[t]),o.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:o.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Limpiando sesin..."})]})})})},ese=Pn.api.baseUrl,Sc=async(t,e)=>{const r=ct.getValidTokens(),n=r==null?void 0:r.token,s=e?"?"+new URLSearchParams(e).toString():"",a=await fetch(`${ese}${t}${s}`,{method:"GET",headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}});if(a.status===401){const l=ct.getValidTokens();if(l!=null&&l.refreshToken)try{const c=await Ze.refreshToken(l.refreshToken);if(c.success&&c.data){const d=c.data.refreshToken||c.data.token;return ct.updateTokens(c.data.token,d),Sc(t,e)}}catch(c){throw console.error(" [MetricsRequest] Token refresh failed:",c),ct.clearSession(),new Error("Session expired")}else throw console.warn(" [MetricsRequest] No refresh token available"),ct.clearSession(),new Error("No authentication tokens available")}if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();return i.data||i},s0=()=>{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),t.getMonth()+1,0,23,59,59,999);return{start:e.toISOString(),end:r.toISOString()}},uu={async getTimeMetrics(){try{const{start:t,end:e}=s0(),r=await Sc("/metrics/time",{startDate:t,endDate:e}),n=new Date;return{...r,currentMonth:n.toLocaleString("es-ES",{month:"long"}),currentYear:n.getFullYear()}}catch(t){console.error("Error fetching time metrics:",t);const e=new Date;return{totalTimeMinutes:0,totalHours:0,casesTimeMinutes:0,casesTimeHours:0,todosTimeMinutes:0,todosTimeHours:0,averageTimePerCase:0,activeTimers:0,currentMonth:e.toLocaleString("es-ES",{month:"long"}),currentYear:e.getFullYear()}}},async getUserTimeMetrics(){try{const{start:t,end:e}=s0();return await Sc("/metrics/users/time",{startDate:t,endDate:e})||[]}catch(t){return console.error("Error fetching user time metrics:",t),[]}},async getCaseTimeMetrics(){try{const{start:t,end:e}=s0(),r=await Sc("/metrics/cases/time",{startDate:t,endDate:e});return(r==null?void 0:r.cases)||[]}catch(t){return console.error("Error fetching case time metrics:",t),[]}},async getStatusMetrics(){try{const{start:t,end:e}=s0(),r=await Sc("/metrics/status",{startDate:t,endDate:e});return(r==null?void 0:r.statuses)||[]}catch(t){return console.error("Error fetching status metrics:",t),[]}},async getApplicationTimeMetrics(){try{const{start:t,end:e}=s0();return await Sc("/metrics/applications",{startDate:t,endDate:e})||[]}catch(t){return console.error("Error fetching application time metrics:",t),[]}},async getTodoMetrics(){try{const t=await Sc("/todos/metrics");return{totalTodos:t.totalTodos||0,completedTodos:t.completedTodos||0,inProgressTodos:t.activeTodos||0,overdueTodos:t.overdueTodos||0,totalTimeMonth:Math.round((t.totalTimeMinutes||0)/60*10)/10,totalTimeToday:0}}catch(t){return console.error("Error fetching todo metrics:",t),{totalTodos:0,completedTodos:0,inProgressTodos:0,overdueTodos:0,totalTimeMonth:0,totalTimeToday:0}}},async getDashboardStats(){try{const t=await Sc("/metrics/dashboard-stats");return{totalCases:(t==null?void 0:t.totalCases)||0,lowComplexity:(t==null?void 0:t.lowComplexity)||0,mediumComplexity:(t==null?void 0:t.mediumComplexity)||0,highComplexity:(t==null?void 0:t.highComplexity)||0,thisMonth:(t==null?void 0:t.thisMonth)||0,thisWeek:(t==null?void 0:t.thisWeek)||0}}catch(t){return console.error("Error fetching dashboard stats:",t),{totalCases:0,lowComplexity:0,mediumComplexity:0,highComplexity:0,thisMonth:0,thisWeek:0}}}},tse=()=>{const t=new Date().getMonth(),e=new Date().getFullYear(),{hasPermission:r}=io();return Vr({queryKey:["allDashboardMetrics",`${e}-${t}`],queryFn:async()=>{try{const n=r("metrics.read.own")||r("metrics.read.team")||r("metrics.read.all")||r("dashboard.read.own")||r("dashboard.read.team")||r("dashboard.read.all"),s=r("metrics.read.own")||r("metrics.read.team")||r("metrics.read.all")||r("dashboard.read.own")||r("dashboard.read.team")||r("dashboard.read.all"),[a,i,l,c,d]=await Promise.all([uu.getDashboardStats(),uu.getCaseTimeMetrics(),uu.getStatusMetrics(),uu.getApplicationTimeMetrics(),uu.getTodoMetrics()]);let u=null,h=null;if(s)try{u=await uu.getTimeMetrics()}catch(f){console.warn(" No se pudieron cargar mtricas de tiempo:",f)}if(n)try{h=await uu.getUserTimeMetrics()}catch(f){console.warn(" No se pudieron cargar mtricas de usuarios:",f)}return{dashboardStats:a,timeMetrics:u,userTimeMetrics:h,caseTimeMetrics:i,statusMetrics:l,applicationTimeMetrics:c,todoMetrics:d}}catch(n){throw console.error(" Error cargando mtricas del dashboard:",n),n}},staleTime:10*60*1e3,gcTime:15*60*1e3,refetchOnMount:"always",refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1,retryDelay:2e3})},Kf={getAllCases:async t=>{const e=new URLSearchParams;return t&&Object.entries(t).forEach(([n,s])=>{s!=null&&e.append(n,String(s))}),(await Ze.authenticatedRequest(`/cases${e.toString()?`?${e.toString()}`:""}`)).data||[]},getCaseById:async t=>{const e=await Ze.authenticatedRequest(`/cases/${t}`);if(!e.data)throw new Error("Case not found");return e.data},createCase:async t=>{const e=await Ze.authenticatedRequest("/cases",{method:"POST",body:JSON.stringify(t)});if(!e.success||!e.data)throw new Error(e.message||"Failed to create case");return e.data},updateCase:async(t,e)=>{const r=await Ze.authenticatedRequest(`/cases/${t}`,{method:"PUT",body:JSON.stringify(e)});if(!r.success||!r.data)throw new Error(r.message||"Failed to update case");return r.data},deleteCase:async t=>{await Ze.authenticatedRequest(`/cases/${t}`,{method:"DELETE"})}},n$={getAll:async()=>(await Ze.authenticatedRequest("/origenes")).data||[],create:async t=>{const e=await Ze.authenticatedRequest("/origenes",{method:"POST",body:JSON.stringify(t)});if(!e.data)throw new Error("Failed to create origin");return e.data}},sT={getAll:async()=>(await Ze.authenticatedRequest("/aplicaciones")).data||[],create:async t=>{const e=await Ze.authenticatedRequest("/aplicaciones",{method:"POST",body:JSON.stringify(t)});if(!e.data)throw new Error("Failed to create application");return e.data}},up=()=>Vr({queryKey:["cases"],queryFn:Kf.getAllCases,staleTime:5*60*1e3,gcTime:10*60*1e3}),kd=({children:t,className:e=""})=>o.jsx("div",{className:`space-y-6 ${e}`,children:t}),a0=({size:t="sm",text:e})=>o.jsxs("div",{className:"flex flex-col items-center justify-center",children:[o.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 ${t==="lg"?"h-12 w-12":"h-6 w-6"}`}),e&&o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:e})]}),rse=({message:t,onRetry:e})=>o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-red-600 mb-4",children:t}),e&&o.jsx(ae,{onClick:e,variant:"danger",children:"Reintentar"})]}),nse=()=>{const{data:t,isLoading:e,error:r,refetch:n}=tse(),{data:s}=up(),a=t==null?void 0:t.dashboardStats,i=t==null?void 0:t.timeMetrics,l=t==null?void 0:t.userTimeMetrics,c=t==null?void 0:t.caseTimeMetrics,d=t==null?void 0:t.statusMetrics,u=t==null?void 0:t.applicationTimeMetrics,h=t==null?void 0:t.todoMetrics,f=st.useMemo(()=>a?{totalCases:a.totalCases,lowComplexity:a.lowComplexity,mediumComplexity:a.mediumComplexity,highComplexity:a.highComplexity,thisMonth:a.thisMonth,thisWeek:a.thisWeek}:{totalCases:0,lowComplexity:0,mediumComplexity:0,highComplexity:0,thisMonth:0,thisWeek:0},[a]),m=st.useMemo(()=>s?[...s].sort((g,y)=>new Date(y.createdAt).getTime()-new Date(g.createdAt).getTime()).slice(0,5):[],[s]),p=g=>{if(!g)return"N/A";try{const y=typeof g=="string"?g:g.toISOString(),b=y.match(/^(\d{4})-(\d{2})-(\d{2})/);if(b){const[,v,w,k]=b;return`${k}/${w}/${v}`}return new Date(y).toLocaleDateString("es-ES",{timeZone:"UTC"})}catch{return"N/A"}};return e?o.jsx("div",{className:"flex justify-center items-center min-h-64",children:o.jsx(a0,{size:"lg",text:"Cargando dashboard..."})}):r?o.jsx(rse,{message:"Error al cargar el dashboard",onRetry:()=>n()}):o.jsxs(kd,{children:[o.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),o.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-400",children:"Resumen general del sistema de gestin de casos"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"document",size:"xl",color:"blue"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total de Casos"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.totalCases})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"check",size:"xl",color:"green"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Baja Complejidad"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.lowComplexity})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"xl",color:"yellow"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Media Complejidad"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.mediumComplexity})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"lg",color:"danger"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Alta Complejidad"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.highComplexity})]})]})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Mtricas de Tiempo"}),i&&o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full",children:[" ",i.currentMonth," ",i.currentYear]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 gap-6",children:[o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"lg",color:"purple"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tiempo Total (Este Mes)"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":i?`${i.totalHours.toFixed(1)}h`:"0h"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?"...":i?`${i.totalTimeMinutes} min`:"0 min"})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"document",size:"lg",color:"blue"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tiempo por Casos (Este Mes)"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":i?`${i.casesTimeHours.toFixed(1)}h`:"0h"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?"...":i?`${Math.round(i.casesTimeMinutes)} min`:"0 min"})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"list",size:"lg",color:"success"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tiempo por TODOs (Este Mes)"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":i?`${i.todosTimeHours.toFixed(1)}h`:"0h"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?"...":i?`${i.todosTimeMinutes} min`:"0 min"})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"desktop",size:"lg",color:"green"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Aplicaciones (Este Mes)"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":u?u.length:"0"})]})]})})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Mtricas de TODOs"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4 gap-6",children:[o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"list",size:"lg",color:"blue"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total TODOs"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":(h==null?void 0:h.totalTodos)||0})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"lg",color:"yellow"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"En Progreso"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":(h==null?void 0:h.inProgressTodos)||0})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"check",size:"lg",color:"success"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completados"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":(h==null?void 0:h.completedTodos)||0})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"lg",color:"danger"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Vencidos"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e?"...":(h==null?void 0:h.overdueTodos)||0})]})]})})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Tiempo por Usuario"}),o.jsx("div",{className:"table-card",children:e?o.jsx("div",{className:"p-6 text-center",children:o.jsx(a0,{size:"sm",text:"Cargando mtricas por usuario..."})}):o.jsx("div",{className:"table-overflow-container",children:o.jsxs("table",{className:"full-width-table",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Casos Trabajados"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Promedio por Caso"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l&&l.length>0?l.map(g=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:g.userName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.floor(g.totalTimeMinutes/60)}h ${g.totalTimeMinutes%60}m`:"0h 0m"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.casesWorked||0}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.casesWorked>0&&g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.round(g.totalTimeMinutes/g.casesWorked)}m`:"-"})]},g.userId)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No hay mtricas de tiempo disponibles"})})})]})})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Mtricas por Estado"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:e?o.jsx("div",{className:"col-span-full text-center py-8",children:o.jsx(a0,{size:"sm",text:"Cargando mtricas por estado..."})}):d&&d.length>0?d.map((g,y)=>o.jsxs("div",{className:"card p-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:g.statusColor||"#6b7280"}}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.statusName||"Estado sin nombre"})]})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Casos:"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g.casesCount||0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tiempo Total:"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.floor(g.totalTimeMinutes/60)}h ${g.totalTimeMinutes%60}m`:"0h 0m"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Promedio:"}),o.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g.casesCount&&g.casesCount>0&&g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.round(g.totalTimeMinutes/g.casesCount)}m`:"-"})]})]})]},g.statusId||`status-${y}`)):o.jsx("div",{className:"col-span-full text-center py-8 text-gray-500 dark:text-gray-400",children:"No hay mtricas por estado disponibles"})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Tiempo por Aplicacin"}),o.jsx("div",{className:"table-card",children:e?o.jsx("div",{className:"p-6 text-center",children:o.jsx(a0,{size:"sm",text:"Cargando mtricas por aplicacin..."})}):o.jsx("div",{className:"table-overflow-container",children:o.jsxs("table",{className:"full-width-table",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aplicacin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Casos"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Promedio por Caso"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:u&&u.length>0?u.map(g=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:g.applicationName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.floor(g.totalTimeMinutes/60)}h ${g.totalTimeMinutes%60}m`:"0h 0m"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.casesCount||0}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.casesCount>0&&g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.round(g.totalTimeMinutes/g.casesCount)}m`:"-"})]},g.applicationId)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No hay mtricas por aplicacin disponibles"})})})]})})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Casos con Mayor Tiempo Invertido"}),o.jsx("div",{className:"table-card",children:e?o.jsx("div",{className:"p-6 text-center",children:o.jsx(a0,{size:"sm",text:"Cargando mtricas por caso..."})}):o.jsx("div",{className:"table-overflow-container",children:o.jsxs("table",{className:"full-width-table",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Nmero de Caso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo Total"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c&&c.length>0?c.sort((g,y)=>y.totalTimeMinutes-g.totalTimeMinutes).slice(0,5).map(g=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:g.caseNumber}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:g.description}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full text-white",style:{backgroundColor:g.statusColor||"#6b7280"},children:g.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:g.totalTimeMinutes&&!isNaN(g.totalTimeMinutes)?`${Math.floor(g.totalTimeMinutes/60)}h ${g.totalTimeMinutes%60}m`:"0h 0m"})]},g.caseId)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No hay mtricas de tiempo por caso disponibles"})})})]})})})]}),o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Casos Recientes"}),o.jsx(cs,{to:"/cases",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Ver todos "})]}),o.jsx("div",{className:"table-card",children:o.jsx("div",{className:"table-overflow-container",children:o.jsxs("table",{className:"full-width-table",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Nmero de Caso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Clasificacin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha de Creacin"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.length>0?m.map(g=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:g.numeroCaso}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:g.descripcion}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g.clasificacion==="Alta Complejidad"?"complexity-high":g.clasificacion==="Media Complejidad"?"complexity-medium":"complexity-low"}`,children:g.clasificacion})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p(g.createdAt)})]},g.id)):o.jsx("tr",{children:o.jsxs("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:["No hay casos registrados an."," ",o.jsx(cs,{to:"/cases/new",className:"text-primary-600 hover:text-primary-700",children:"Crear el primer caso"})]})})})]})})})]})]})},sse=({title:t="Cargando...",subtitle:e="Por favor espera mientras se configura el sistema",steps:r=[],currentStep:n=0})=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-md w-full space-y-8 p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-6",children:o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e}),r.length>0&&o.jsx("div",{className:"space-y-3",children:r.map((s,a)=>o.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-all duration-300 ${a<n?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":a===n?"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800":"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:a<n?o.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 8 8",children:o.jsx("path",{d:"M6.564.75l-3.59 3.612-1.538-1.55L0 4.26l2.974 2.99L8 2.193z"})})}):a===n?o.jsx("div",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}):o.jsx("div",{className:"w-4 h-4 bg-gray-300 dark:bg-gray-600 rounded-full"})}),o.jsx("span",{className:`text-sm font-medium ${a<n?"text-green-700 dark:text-green-400":a===n?"text-indigo-700 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:s})]},a))})]})})}),ase=()=>{const{isAuthenticated:t,user:e}=ti(),{isLoadingPermissions:r,permissionsLoaded:n}=io(),[s,a]=x.useState(0),i=["Autenticando usuario...","Cargando permisos...","Preparando dashboard..."];return x.useEffect(()=>{a(t?r||!n?1:2:0)},[t,r,n]),t?r||!n?o.jsx(sse,{title:"Preparando Dashboard",subtitle:`Bienvenido ${(e==null?void 0:e.fullName)||"Usuario"}, configurando tu dashboard...`,steps:i,currentStep:s}):o.jsx(nse,{}):null},Ha=({isOpen:t,onClose:e,onConfirm:r,title:n,message:s,confirmText:a="Confirmar",cancelText:i="Cancelar",type:l="info"})=>{const c=()=>{switch(l){case"danger":return o.jsx(O,{action:"warning",size:"lg",color:"red"});case"success":return o.jsx(O,{action:"success",size:"lg",color:"green"});default:return o.jsx(O,{action:"info",size:"lg",color:"blue"})}},d=()=>{switch(l){case"danger":return"danger";case"success":return"success";default:return"primary"}};return o.jsxs(At,{isOpen:t,onClose:e,size:"sm",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c(),o.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:n})]}),o.jsx("div",{className:"mb-6",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})}),o.jsxs("div",{className:"flex space-x-3 justify-end",children:[o.jsx(ae,{variant:"secondary",onClick:e,children:i}),o.jsx(ae,{variant:d(),onClick:r,children:a})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var eb={};eb.version="0.18.5";var s$=1252,ise=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],a$=function(t){ise.indexOf(t)!=-1&&(s$=t)};function ose(){a$(1252)}var $g=function(t){a$(t)};function lse(){$g(1200),ose()}var Qy=function(e){return String.fromCharCode(e)},pM=function(e){return String.fromCharCode(e)},tb,nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Fg(t){for(var e="",r=0,n=0,s=0,a=0,i=0,l=0,c=0,d=0;d<t.length;)r=t.charCodeAt(d++),a=r>>2,n=t.charCodeAt(d++),i=(r&3)<<4|n>>4,s=t.charCodeAt(d++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),e+=nd.charAt(a)+nd.charAt(i)+nd.charAt(l)+nd.charAt(c);return e}function rc(t){var e="",r=0,n=0,s=0,a=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)a=nd.indexOf(t.charAt(d++)),i=nd.indexOf(t.charAt(d++)),r=a<<2|i>>4,e+=String.fromCharCode(r),l=nd.indexOf(t.charAt(d++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=nd.indexOf(t.charAt(d++)),s=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(s));return e}var or=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),uc=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function hh(t){return or?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function gM(t){return or?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var qi=function(e){return or?uc(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Nk(t){if(typeof ArrayBuffer>"u")return qi(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Fx(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function cse(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var as=or?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:uc(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function dse(t){for(var e=[],r=0,n=t.length+250,s=hh(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|l>>6&15|(i&3)<<4,s[r++]=128|l&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(e.push(s.slice(0,r)),r=0,s=hh(65535),n=65530)}return e.push(s.slice(0,r)),as(e)}var q0=/\u0000/g,e1=/[\u0001-\u0006]/g;function Zf(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Xi(t,e){var r=""+t;return r.length>=e?r:rn("0",e-r.length)+r}function aT(t,e){var r=""+t;return r.length>=e?r:rn(" ",e-r.length)+r}function rb(t,e){var r=""+t;return r.length>=e?r:r+rn(" ",e-r.length)}function use(t,e){var r=""+Math.round(t);return r.length>=e?r:rn("0",e-r.length)+r}function hse(t,e){var r=""+t;return r.length>=e?r:rn("0",e-r.length)+r}var xM=Math.pow(2,32);function Jh(t,e){if(t>xM||t<-xM)return use(t,e);var r=Math.round(t);return hse(r,e)}function nb(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var yM=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zC=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function fse(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var on={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},vM={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},mse={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sb(t,e,r){for(var n=t<0?-1:1,s=t*n,a=0,i=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<e&&(h=Math.floor(s),l=h*i+a,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),a=i,i=l,c=d,d=u;if(u>e&&(d>e?(u=c,l=a):(u=d,l=i)),!r)return[0,n*l,u];var f=Math.floor(n*l/u);return[f,n*l-f*u,u]}function t1(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),a=0,i=[],l={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=wse(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=a,l}var i$=new Date(1899,11,31,0,0,0),pse=i$.getTime(),gse=new Date(1900,2,1,0,0,0);function o$(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=gse&&(r+=24*60*60*1e3),(r-(pse+(t.getTimezoneOffset()-i$.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function iT(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xse(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function yse(t){var e=t<0?12:11,r=iT(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function vse(t){var e=iT(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function bse(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=yse(t):e===10?r=t.toFixed(10).substr(0,12):r=vse(t),iT(xse(r.toUpperCase()))}function KE(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):bse(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Od(14,o$(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function wse(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function kse(t,e,r,n){var s="",a=0,i=0,l=r.y,c,d=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,d=e.length;break;case 3:return zC[r.m-1][1];case 5:return zC[r.m-1][0];default:return zC[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,d=e.length;break;case 3:return yM[r.q][0];default:return yM[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,d=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,d=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,d=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Xi(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=Xi(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}d=e.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Xi(c,d):"";return u}function sd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var l$=/%/g;function Cse(t,e,r){var n=e.replace(l$,""),s=e.length-n.length;return zl(t,n,r*Math.pow(10,2*s))+rn("%",s)}function Nse(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return zl(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function c$(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+c$(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+a)%s)+"."+u.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var d$=/# (\?+)( ?)\/( ?)(\d+)/;function Sse(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),a=Math.floor(s/n),i=s-a*n,l=n;return r+(a===0?"":""+a)+" "+(i===0?rn(" ",t[1].length+1+t[4].length):aT(i,t[1].length)+t[2]+"/"+t[3]+Xi(l,t[4].length))}function Ese(t,e,r){return r+(e===0?"":""+e)+rn(" ",t[1].length+2+t[4].length)}var u$=/^#*0*\.([0#]+)/,h$=/\).*[0#]/,f$=/\(###\) ###\\?-####/;function zs(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function bM(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function wM(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function jse(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Tse(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ai(t,e,r){if(t.charCodeAt(0)===40&&!e.match(h$)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ai("n",n,r):"("+ai("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Nse(t,e,r);if(e.indexOf("%")!==-1)return Cse(t,e,r);if(e.indexOf("E")!==-1)return c$(e,r);if(e.charCodeAt(0)===36)return"$"+ai(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,l,c=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+Jh(c,e.length);if(e.match(/^[#?]+$/))return s=Jh(r,0),s==="0"&&(s=""),s.length>e.length?s:zs(e.substr(0,e.length-s.length))+s;if(a=e.match(d$))return Sse(a,c,d);if(e.match(/^#+0+$/))return d+Jh(c,e.length-e.indexOf("0"));if(a=e.match(u$))return s=bM(r,a[1].length).replace(/^([^\.]+)$/,"$1."+zs(a[1])).replace(/\.$/,"."+zs(a[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+rn("0",zs(a[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return d+bM(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return d+sd(Jh(c,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ai(t,e,-r):sd(""+(Math.floor(r)+jse(r,a[1].length)))+"."+Xi(wM(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return ai(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zf(ai(t,e.replace(/[\\-]/g,""),r)),i=0,Zf(Zf(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(e.match(f$))return s=ai(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),l=sb(c,Math.pow(10,i)-1,!1),s=""+d,u=zl("n",a[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+a[2]+"/"+a[3],u=rb(l[2],i),u.length<a[4].length&&(u=zs(a[4].substr(a[4].length-u.length))+u),s+=u,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),l=sb(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?aT(l[1],i)+a[2]+"/"+a[3]+rb(l[2],i):rn(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=Jh(r,0),e.length<=s.length?s:zs(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,f=e.length-s.length-h;return zs(e.substr(0,h)+s+e.substr(e.length-f))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=wM(r,a[1].length),r<0?"-"+ai(t,e,-r):sd(Tse(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Xi(0,3-p.length):"")+p})+"."+Xi(i,a[1].length);switch(e){case"###,##0.00":return ai(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=sd(Jh(c,0));return m!=="0"?d+m:"";case"###,###.00":return ai(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ai(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function _se(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return zl(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Ase(t,e,r){var n=e.replace(l$,""),s=e.length-n.length;return zl(t,n,r*Math.pow(10,2*s))+rn("%",s)}function m$(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+m$(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+a)%s)+"."+u.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Co(t,e,r){if(t.charCodeAt(0)===40&&!e.match(h$)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Co("n",n,r):"("+Co("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return _se(t,e,r);if(e.indexOf("%")!==-1)return Ase(t,e,r);if(e.indexOf("E")!==-1)return m$(e,r);if(e.charCodeAt(0)===36)return"$"+Co(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,l,c=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+Xi(c,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:zs(e.substr(0,e.length-s.length))+s;if(a=e.match(d$))return Ese(a,c,d);if(e.match(/^#+0+$/))return d+Xi(c,e.length-e.indexOf("0"));if(a=e.match(u$))return s=(""+r).replace(/^([^\.]+)$/,"$1."+zs(a[1])).replace(/\.$/,"."+zs(a[1])),s=s.replace(/\.(\d*)$/,function(p,g){return"."+g+rn("0",zs(a[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return d+sd(""+c);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Co(t,e,-r):sd(""+r)+"."+rn("0",a[1].length);if(a=e.match(/^#,#*,#0/))return Co(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Zf(Co(t,e.replace(/[\\-]/g,""),r)),i=0,Zf(Zf(e.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(e.match(f$))return s=Co(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),l=sb(c,Math.pow(10,i)-1,!1),s=""+d,u=zl("n",a[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+a[2]+"/"+a[3],u=rb(l[2],i),u.length<a[4].length&&(u=zs(a[4].substr(a[4].length-u.length))+u),s+=u,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),l=sb(c,Math.pow(10,i)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?aT(l[1],i)+a[2]+"/"+a[3]+rb(l[2],i):rn(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:zs(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,f=e.length-s.length-h;return zs(e.substr(0,h)+s+e.substr(e.length-f))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Co(t,e,-r):sd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Xi(0,3-p.length):"")+p})+"."+Xi(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=sd(""+c);return m!=="0"?d+m:"";default:if(e.match(/\.[0#?]*$/))return Co(t,e.slice(0,e.lastIndexOf(".")),r)+zs(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function zl(t,e,r){return(r|0)===r?Co(t,e,r):ai(t,e,r)}function Mse(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var p$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function g$(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":nb(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(p$))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ose(t,e,r,n){for(var s=[],a="",i=0,l="",c="t",d,u,h,f="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!nb(t,i))throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var m=t.charAt(++i),p=m==="("||m===")"?m:"t";s[s.length]={t:p,v:m},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(d==null&&(d=t1(e,r,t.charAt(i+1)==="2"),d==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||d==null&&(d=t1(e,r),d==null))return"";for(a=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)a+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),s[s.length]={t:l,v:a},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=t1(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",f="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",i+=5,f="h"):t.substr(i,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",i+=5,f="h"):(g.t="t",++i),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(a=l;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(p$)){if(d==null&&(d=t1(e,r),d==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",g$(t)||(s[s.length]={t:"t",v:a}));break;case".":if(d!=null){for(a=l;++i<t.length&&(l=t.charAt(i))==="0";)a+=l;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)a+=l;s[s.length]={t:"n",v:a};break;case"?":for(a=l;t.charAt(++i)===l;)a+=l;s[s.length]={t:l,v:a},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:l,v:l},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);s[s.length]={t:"t",v:l},++i;break}var y=0,b=0,v;for(i=s.length-1,c="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=f,c="h",y<1&&(y=1);break;case"s":(v=s[i].v.match(/\.0+$/))&&(b=Math.max(b,v[0].length-1)),y<3&&(y=3);case"d":case"y":case"M":case"e":c=s[i].t;break;case"m":c==="s"&&(s[i].t="M",y<2&&(y=2));break;case"X":break;case"Z":y<1&&s[i].v.match(/[Hh]/)&&(y=1),y<2&&s[i].v.match(/[Mm]/)&&(y=2),y<3&&s[i].v.match(/[Ss]/)&&(y=3)}switch(y){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",k;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=kse(s[i].t.charCodeAt(0),s[i].v,d,b),s[i].t="t";break;case"n":case"?":for(k=i+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[i].v+=s[k].v,s[k]={v:"",t:";"},++k;w+=s[i].v,i=k-1;break;case"G":s[i].t="t",s[i].v=KE(e,r);break}var N="",S,C;if(w.length>0){w.charCodeAt(0)==40?(S=e<0&&w.charCodeAt(0)===45?-e:e,C=zl("n",w,S)):(S=e<0&&n>1?-e:e,C=zl("n",w,S),S<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),k=C.length-1;var E=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){E=i;break}var T=s.length;if(E===s.length&&C.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(k>=s[i].v.length-1?(k-=s[i].v.length,s[i].v=C.substr(k+1,s[i].v.length)):k<0?s[i].v="":(s[i].v=C.substr(0,k+1),k=-1),s[i].t="t",T=i);k>=0&&T<s.length&&(s[T].v=C.substr(0,k+1)+s[T].v)}else if(E!==s.length&&C.indexOf("E")===-1){for(k=C.indexOf(".")-1,i=E;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(u=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")-1:s[i].v.length-1,N=s[i].v.substr(u+1);u>=0;--u)k>=0&&(s[i].v.charAt(u)==="0"||s[i].v.charAt(u)==="#")&&(N=C.charAt(k--)+N);s[i].v=N,s[i].t="t",T=i}for(k>=0&&T<s.length&&(s[T].v=C.substr(0,k+1)+s[T].v),k=C.indexOf(".")+1,i=E;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==E)){for(u=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")+1:0,N=s[i].v.substr(0,u);u<s[i].v.length;++u)k<C.length&&(N+=C.charAt(k++));s[i].v=N,s[i].t="t",T=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(S=n>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=zl(s[i].t,s[i].v,S),s[i].t="t");var R="";for(i=0;i!==s.length;++i)s[i]!=null&&(R+=s[i].v);return R}var kM=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function CM(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Rse(t,e){var r=Mse(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(kM),l=r[1].match(kM);return CM(e,i)?[n,r[0]]:CM(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,a]}function Od(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:on)[t],n==null&&(n=r.table&&r.table[vM[t]]||on[vM[t]]),n==null&&(n=mse[t]||"General");break}if(nb(n,0))return KE(e,r);e instanceof Date&&(e=o$(e,r.date1904));var s=Rse(n,e);if(nb(s[1]))return KE(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ose(s[1],e,r,s[0])}function x$(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(on[r]==null){e<0&&(e=r);continue}if(on[r]==t){e=r;break}}e<0&&(e=391)}return on[e]=t,e}function Sk(t){for(var e=0;e!=392;++e)t[e]!==void 0&&x$(t[e],e)}function Ek(){on=fse()}var y$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Pse(t){var e=typeof t=="number"?on[t]:t;return e=e.replace(y$,"(\\d+)"),new RegExp("^"+e+"$")}function Ise(t,e,r){var n=-1,s=-1,a=-1,i=-1,l=-1,c=-1;(e.match(y$)||[]).forEach(function(h,f){var m=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=m;break;case"d":a=m;break;case"h":i=m;break;case"s":c=m;break;case"m":i>=0?l=m:s=m;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?d:n==-1&&s==-1&&a==-1?u:d+"T"+u}var Dse=function(){var t={};t.version="1.2.0";function e(){for(var C=0,E=new Array(256),T=0;T!=256;++T)C=T,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,E[T]=C;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(C){var E=0,T=0,R=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)B[R]=C[R];for(R=0;R!=256;++R)for(T=C[R],E=256+R;E<4096;E+=256)T=B[E]=T>>>8^C[T&255];var M=[];for(R=1;R!=16;++R)M[R-1]=typeof Int32Array<"u"?B.subarray(R*256,R*256+256):B.slice(R*256,R*256+256);return M}var s=n(r),a=s[0],i=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],f=s[7],m=s[8],p=s[9],g=s[10],y=s[11],b=s[12],v=s[13],w=s[14];function k(C,E){for(var T=E^-1,R=0,B=C.length;R<B;)T=T>>>8^r[(T^C.charCodeAt(R++))&255];return~T}function N(C,E){for(var T=E^-1,R=C.length-15,B=0;B<R;)T=w[C[B++]^T&255]^v[C[B++]^T>>8&255]^b[C[B++]^T>>16&255]^y[C[B++]^T>>>24]^g[C[B++]]^p[C[B++]]^m[C[B++]]^f[C[B++]]^h[C[B++]]^u[C[B++]]^d[C[B++]]^c[C[B++]]^l[C[B++]]^i[C[B++]]^a[C[B++]]^r[C[B++]];for(R+=15;B<R;)T=T>>>8^r[(T^C[B++])&255];return~T}function S(C,E){for(var T=E^-1,R=0,B=C.length,M=0,L=0;R<B;)M=C.charCodeAt(R++),M<128?T=T>>>8^r[(T^M)&255]:M<2048?(T=T>>>8^r[(T^(192|M>>6&31))&255],T=T>>>8^r[(T^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,L=C.charCodeAt(R++)&1023,T=T>>>8^r[(T^(240|M>>8&7))&255],T=T>>>8^r[(T^(128|M>>2&63))&255],T=T>>>8^r[(T^(128|L>>6&15|(M&3)<<4))&255],T=T>>>8^r[(T^(128|L&63))&255]):(T=T>>>8^r[(T^(224|M>>12&15))&255],T=T>>>8^r[(T^(128|M>>6&63))&255],T=T>>>8^r[(T^(128|M&63))&255]);return~T}return t.table=r,t.bstr=k,t.buf=N,t.str=S,t}(),wr=function(){var e={};e.version="1.2.1";function r(D,W){for(var q=D.split("/"),G=W.split("/"),X=0,te=0,me=Math.min(q.length,G.length);X<me;++X){if(te=q[X].length-G[X].length)return te;if(q[X]!=G[X])return q[X]<G[X]?-1:1}return q.length-G.length}function n(D){if(D.charAt(D.length-1)=="/")return D.slice(0,-1).indexOf("/")===-1?D:n(D.slice(0,-1));var W=D.lastIndexOf("/");return W===-1?D:D.slice(0,W+1)}function s(D){if(D.charAt(D.length-1)=="/")return s(D.slice(0,-1));var W=D.lastIndexOf("/");return W===-1?D:D.slice(W+1)}function a(D,W){typeof W=="string"&&(W=new Date(W));var q=W.getHours();q=q<<6|W.getMinutes(),q=q<<5|W.getSeconds()>>>1,D.write_shift(2,q);var G=W.getFullYear()-1980;G=G<<4|W.getMonth()+1,G=G<<5|W.getDate(),D.write_shift(2,G)}function i(D){var W=D.read_shift(2)&65535,q=D.read_shift(2)&65535,G=new Date,X=q&31;q>>>=5;var te=q&15;q>>>=4,G.setMilliseconds(0),G.setFullYear(q+1980),G.setMonth(te-1),G.setDate(X);var me=W&31;W>>>=5;var Ee=W&63;return W>>>=6,G.setHours(W),G.setMinutes(Ee),G.setSeconds(me<<1),G}function l(D){Ma(D,0);for(var W={},q=0;D.l<=D.length-4;){var G=D.read_shift(2),X=D.read_shift(2),te=D.l+X,me={};switch(G){case 21589:q=D.read_shift(1),q&1&&(me.mtime=D.read_shift(4)),X>5&&(q&2&&(me.atime=D.read_shift(4)),q&4&&(me.ctime=D.read_shift(4))),me.mtime&&(me.mt=new Date(me.mtime*1e3));break}D.l=te,W[G]=me}return W}var c;function d(){return c||(c={})}function u(D,W){if(D[0]==80&&D[1]==75)return Wp(D,W);if((D[0]|32)==109&&(D[1]|32)==105)return Oy(D,W);if(D.length<512)throw new Error("CFB file size "+D.length+" < 512");var q=3,G=512,X=0,te=0,me=0,Ee=0,fe=0,pe=[],xe=D.slice(0,512);Ma(xe,0);var Pe=h(xe);switch(q=Pe[0],q){case 3:G=512;break;case 4:G=4096;break;case 0:if(Pe[1]==0)return Wp(D,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+q)}G!==512&&(xe=D.slice(0,G),Ma(xe,28));var Ke=D.slice(0,G);f(xe,q);var et=xe.read_shift(4,"i");if(q===3&&et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+et);xe.l+=4,me=xe.read_shift(4,"i"),xe.l+=4,xe.chk("00100000","Mini Stream Cutoff Size: "),Ee=xe.read_shift(4,"i"),X=xe.read_shift(4,"i"),fe=xe.read_shift(4,"i"),te=xe.read_shift(4,"i");for(var ze=-1,Ye=0;Ye<109&&(ze=xe.read_shift(4,"i"),!(ze<0));++Ye)pe[Ye]=ze;var Ct=m(D,G);y(fe,te,Ct,G,pe);var Gr=v(Ct,me,pe,G);Gr[me].name="!Directory",X>0&&Ee!==L&&(Gr[Ee].name="!MiniFAT"),Gr[pe[0]].name="!FAT",Gr.fat_addrs=pe,Gr.ssz=G;var Kr={},ps=[],qp=[],Gp=[];w(me,Gr,Ct,ps,X,Kr,qp,Ee),p(qp,Gp,ps),ps.shift();var Kp={FileIndex:qp,FullPaths:Gp};return W&&W.raw&&(Kp.raw={header:Ke,sectors:Ct}),Kp}function h(D){if(D[D.l]==80&&D[D.l+1]==75)return[0,0];D.chk(V,"Header Signature: "),D.l+=16;var W=D.read_shift(2,"u");return[D.read_shift(2,"u"),W]}function f(D,W){var q=9;switch(D.l+=2,q=D.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+q);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+q)}D.chk("0600","Mini Sector Shift: "),D.chk("000000000000","Reserved: ")}function m(D,W){for(var q=Math.ceil(D.length/W)-1,G=[],X=1;X<q;++X)G[X-1]=D.slice(X*W,(X+1)*W);return G[q-1]=D.slice(q*W),G}function p(D,W,q){for(var G=0,X=0,te=0,me=0,Ee=0,fe=q.length,pe=[],xe=[];G<fe;++G)pe[G]=xe[G]=G,W[G]=q[G];for(;Ee<xe.length;++Ee)G=xe[Ee],X=D[G].L,te=D[G].R,me=D[G].C,pe[G]===G&&(X!==-1&&pe[X]!==X&&(pe[G]=pe[X]),te!==-1&&pe[te]!==te&&(pe[G]=pe[te])),me!==-1&&(pe[me]=G),X!==-1&&G!=pe[G]&&(pe[X]=pe[G],xe.lastIndexOf(X)<Ee&&xe.push(X)),te!==-1&&G!=pe[G]&&(pe[te]=pe[G],xe.lastIndexOf(te)<Ee&&xe.push(te));for(G=1;G<fe;++G)pe[G]===G&&(te!==-1&&pe[te]!==te?pe[G]=pe[te]:X!==-1&&pe[X]!==X&&(pe[G]=pe[X]));for(G=1;G<fe;++G)if(D[G].type!==0){if(Ee=G,Ee!=pe[Ee])do Ee=pe[Ee],W[G]=W[Ee]+"/"+W[G];while(Ee!==0&&pe[Ee]!==-1&&Ee!=pe[Ee]);pe[G]=-1}for(W[0]+="/",G=1;G<fe;++G)D[G].type!==2&&(W[G]+="/")}function g(D,W,q){for(var G=D.start,X=D.size,te=[],me=G;q&&X>0&&me>=0;)te.push(W.slice(me*M,me*M+M)),X-=M,me=yu(q,me*4);return te.length===0?Se(0):as(te).slice(0,D.size)}function y(D,W,q,G,X){var te=L;if(D===L){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(D!==-1){var me=q[D],Ee=(G>>>2)-1;if(!me)return;for(var fe=0;fe<Ee&&(te=yu(me,fe*4))!==L;++fe)X.push(te);y(yu(me,G-4),W-1,q,G,X)}}function b(D,W,q,G,X){var te=[],me=[];X||(X=[]);var Ee=G-1,fe=0,pe=0;for(fe=W;fe>=0;){X[fe]=!0,te[te.length]=fe,me.push(D[fe]);var xe=q[Math.floor(fe*4/G)];if(pe=fe*4&Ee,G<4+pe)throw new Error("FAT boundary crossed: "+fe+" 4 "+G);if(!D[xe])break;fe=yu(D[xe],pe)}return{nodes:te,data:MM([me])}}function v(D,W,q,G){var X=D.length,te=[],me=[],Ee=[],fe=[],pe=G-1,xe=0,Pe=0,Ke=0,et=0;for(xe=0;xe<X;++xe)if(Ee=[],Ke=xe+W,Ke>=X&&(Ke-=X),!me[Ke]){fe=[];var ze=[];for(Pe=Ke;Pe>=0;){ze[Pe]=!0,me[Pe]=!0,Ee[Ee.length]=Pe,fe.push(D[Pe]);var Ye=q[Math.floor(Pe*4/G)];if(et=Pe*4&pe,G<4+et)throw new Error("FAT boundary crossed: "+Pe+" 4 "+G);if(!D[Ye]||(Pe=yu(D[Ye],et),ze[Pe]))break}te[Ke]={nodes:Ee,data:MM([fe])}}return te}function w(D,W,q,G,X,te,me,Ee){for(var fe=0,pe=G.length?2:0,xe=W[D].data,Pe=0,Ke=0,et;Pe<xe.length;Pe+=128){var ze=xe.slice(Pe,Pe+128);Ma(ze,64),Ke=ze.read_shift(2),et=uT(ze,0,Ke-pe),G.push(et);var Ye={name:et,type:ze.read_shift(1),color:ze.read_shift(1),L:ze.read_shift(4,"i"),R:ze.read_shift(4,"i"),C:ze.read_shift(4,"i"),clsid:ze.read_shift(16),state:ze.read_shift(4,"i"),start:0,size:0},Ct=ze.read_shift(2)+ze.read_shift(2)+ze.read_shift(2)+ze.read_shift(2);Ct!==0&&(Ye.ct=k(ze,ze.l-8));var Gr=ze.read_shift(2)+ze.read_shift(2)+ze.read_shift(2)+ze.read_shift(2);Gr!==0&&(Ye.mt=k(ze,ze.l-8)),Ye.start=ze.read_shift(4,"i"),Ye.size=ze.read_shift(4,"i"),Ye.size<0&&Ye.start<0&&(Ye.size=Ye.type=0,Ye.start=L,Ye.name=""),Ye.type===5?(fe=Ye.start,X>0&&fe!==L&&(W[fe].name="!StreamData")):Ye.size>=4096?(Ye.storage="fat",W[Ye.start]===void 0&&(W[Ye.start]=b(q,Ye.start,W.fat_addrs,W.ssz)),W[Ye.start].name=Ye.name,Ye.content=W[Ye.start].data.slice(0,Ye.size)):(Ye.storage="minifat",Ye.size<0?Ye.size=0:fe!==L&&Ye.start!==L&&W[fe]&&(Ye.content=g(Ye,W[fe].data,(W[Ee]||{}).data))),Ye.content&&Ma(Ye.content,0),te[et]=Ye,me.push(Ye)}}function k(D,W){return new Date((Ra(D,W+4)/1e7*Math.pow(2,32)+Ra(D,W)/1e7-11644473600)*1e3)}function N(D,W){return d(),u(c.readFileSync(D),W)}function S(D,W){var q=W&&W.type;switch(q||or&&Buffer.isBuffer(D)&&(q="buffer"),q||"base64"){case"file":return N(D,W);case"base64":return u(qi(rc(D)),W);case"binary":return u(qi(D),W)}return u(D,W)}function C(D,W){var q=W||{},G=q.root||"Root Entry";if(D.FullPaths||(D.FullPaths=[]),D.FileIndex||(D.FileIndex=[]),D.FullPaths.length!==D.FileIndex.length)throw new Error("inconsistent CFB structure");D.FullPaths.length===0&&(D.FullPaths[0]=G+"/",D.FileIndex[0]={name:G,type:5}),q.CLSID&&(D.FileIndex[0].clsid=q.CLSID),E(D)}function E(D){var W="Sh33tJ5";if(!wr.find(D,"/"+W)){var q=Se(4);q[0]=55,q[1]=q[3]=50,q[2]=54,D.FileIndex.push({name:W,type:2,content:q,size:4,L:69,R:69,C:69}),D.FullPaths.push(D.FullPaths[0]+W),T(D)}}function T(D,W){C(D);for(var q=!1,G=!1,X=D.FullPaths.length-1;X>=0;--X){var te=D.FileIndex[X];switch(te.type){case 0:G?q=!0:(D.FileIndex.pop(),D.FullPaths.pop());break;case 1:case 2:case 5:G=!0,isNaN(te.R*te.L*te.C)&&(q=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(q=!0);break;default:q=!0;break}}if(!(!q&&!W)){var me=new Date(1987,1,19),Ee=0,fe=Object.create?Object.create(null):{},pe=[];for(X=0;X<D.FullPaths.length;++X)fe[D.FullPaths[X]]=!0,D.FileIndex[X].type!==0&&pe.push([D.FullPaths[X],D.FileIndex[X]]);for(X=0;X<pe.length;++X){var xe=n(pe[X][0]);G=fe[xe],G||(pe.push([xe,{name:s(xe).replace("/",""),type:1,clsid:Q,ct:me,mt:me,content:null}]),fe[xe]=!0)}for(pe.sort(function(et,ze){return r(et[0],ze[0])}),D.FullPaths=[],D.FileIndex=[],X=0;X<pe.length;++X)D.FullPaths[X]=pe[X][0],D.FileIndex[X]=pe[X][1];for(X=0;X<pe.length;++X){var Pe=D.FileIndex[X],Ke=D.FullPaths[X];if(Pe.name=s(Ke).replace("/",""),Pe.L=Pe.R=Pe.C=-(Pe.color=1),Pe.size=Pe.content?Pe.content.length:0,Pe.start=0,Pe.clsid=Pe.clsid||Q,X===0)Pe.C=pe.length>1?1:-1,Pe.size=0,Pe.type=5;else if(Ke.slice(-1)=="/"){for(Ee=X+1;Ee<pe.length&&n(D.FullPaths[Ee])!=Ke;++Ee);for(Pe.C=Ee>=pe.length?-1:Ee,Ee=X+1;Ee<pe.length&&n(D.FullPaths[Ee])!=n(Ke);++Ee);Pe.R=Ee>=pe.length?-1:Ee,Pe.type=1}else n(D.FullPaths[X+1]||"")==n(Ke)&&(Pe.R=X+1),Pe.type=2}}}function R(D,W){var q=W||{};if(q.fileType=="mad")return oC(D,q);switch(T(D),q.fileType){case"zip":return nC(D,q)}var G=function(et){for(var ze=0,Ye=0,Ct=0;Ct<et.FileIndex.length;++Ct){var Gr=et.FileIndex[Ct];if(Gr.content){var Kr=Gr.content.length;Kr>0&&(Kr<4096?ze+=Kr+63>>6:Ye+=Kr+511>>9)}}for(var ps=et.FullPaths.length+3>>2,qp=ze+7>>3,Gp=ze+127>>7,Kp=qp+Ye+ps+Gp,du=Kp+127>>7,cC=du<=109?0:Math.ceil((du-109)/127);Kp+du+cC+127>>7>du;)cC=++du<=109?0:Math.ceil((du-109)/127);var dl=[1,cC,du,Gp,ps,Ye,ze,0];return et.FileIndex[0].size=ze<<6,dl[7]=(et.FileIndex[0].start=dl[0]+dl[1]+dl[2]+dl[3]+dl[4]+dl[5])+(dl[6]+7>>3),dl}(D),X=Se(G[7]<<9),te=0,me=0;{for(te=0;te<8;++te)X.write_shift(1,ee[te]);for(te=0;te<8;++te)X.write_shift(2,0);for(X.write_shift(2,62),X.write_shift(2,3),X.write_shift(2,65534),X.write_shift(2,9),X.write_shift(2,6),te=0;te<3;++te)X.write_shift(2,0);for(X.write_shift(4,0),X.write_shift(4,G[2]),X.write_shift(4,G[0]+G[1]+G[2]+G[3]-1),X.write_shift(4,0),X.write_shift(4,4096),X.write_shift(4,G[3]?G[0]+G[1]+G[2]-1:L),X.write_shift(4,G[3]),X.write_shift(-4,G[1]?G[0]-1:L),X.write_shift(4,G[1]),te=0;te<109;++te)X.write_shift(-4,te<G[2]?G[1]+te:-1)}if(G[1])for(me=0;me<G[1];++me){for(;te<236+me*127;++te)X.write_shift(-4,te<G[2]?G[1]+te:-1);X.write_shift(-4,me===G[1]-1?L:me+1)}var Ee=function(et){for(me+=et;te<me-1;++te)X.write_shift(-4,te+1);et&&(++te,X.write_shift(-4,L))};for(me=te=0,me+=G[1];te<me;++te)X.write_shift(-4,J.DIFSECT);for(me+=G[2];te<me;++te)X.write_shift(-4,J.FATSECT);Ee(G[3]),Ee(G[4]);for(var fe=0,pe=0,xe=D.FileIndex[0];fe<D.FileIndex.length;++fe)xe=D.FileIndex[fe],xe.content&&(pe=xe.content.length,!(pe<4096)&&(xe.start=me,Ee(pe+511>>9)));for(Ee(G[6]+7>>3);X.l&511;)X.write_shift(-4,J.ENDOFCHAIN);for(me=te=0,fe=0;fe<D.FileIndex.length;++fe)xe=D.FileIndex[fe],xe.content&&(pe=xe.content.length,!(!pe||pe>=4096)&&(xe.start=me,Ee(pe+63>>6)));for(;X.l&511;)X.write_shift(-4,J.ENDOFCHAIN);for(te=0;te<G[4]<<2;++te){var Pe=D.FullPaths[te];if(!Pe||Pe.length===0){for(fe=0;fe<17;++fe)X.write_shift(4,0);for(fe=0;fe<3;++fe)X.write_shift(4,-1);for(fe=0;fe<12;++fe)X.write_shift(4,0);continue}xe=D.FileIndex[te],te===0&&(xe.start=xe.size?xe.start-1:L);var Ke=te===0&&q.root||xe.name;if(pe=2*(Ke.length+1),X.write_shift(64,Ke,"utf16le"),X.write_shift(2,pe),X.write_shift(1,xe.type),X.write_shift(1,xe.color),X.write_shift(-4,xe.L),X.write_shift(-4,xe.R),X.write_shift(-4,xe.C),xe.clsid)X.write_shift(16,xe.clsid,"hex");else for(fe=0;fe<4;++fe)X.write_shift(4,0);X.write_shift(4,xe.state||0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,0),X.write_shift(4,xe.start),X.write_shift(4,xe.size),X.write_shift(4,0)}for(te=1;te<D.FileIndex.length;++te)if(xe=D.FileIndex[te],xe.size>=4096)if(X.l=xe.start+1<<9,or&&Buffer.isBuffer(xe.content))xe.content.copy(X,X.l,0,xe.size),X.l+=xe.size+511&-512;else{for(fe=0;fe<xe.size;++fe)X.write_shift(1,xe.content[fe]);for(;fe&511;++fe)X.write_shift(1,0)}for(te=1;te<D.FileIndex.length;++te)if(xe=D.FileIndex[te],xe.size>0&&xe.size<4096)if(or&&Buffer.isBuffer(xe.content))xe.content.copy(X,X.l,0,xe.size),X.l+=xe.size+63&-64;else{for(fe=0;fe<xe.size;++fe)X.write_shift(1,xe.content[fe]);for(;fe&63;++fe)X.write_shift(1,0)}if(or)X.l=X.length;else for(;X.l<X.length;)X.write_shift(1,0);return X}function B(D,W){var q=D.FullPaths.map(function(fe){return fe.toUpperCase()}),G=q.map(function(fe){var pe=fe.split("/");return pe[pe.length-(fe.slice(-1)=="/"?2:1)]}),X=!1;W.charCodeAt(0)===47?(X=!0,W=q[0].slice(0,-1)+W):X=W.indexOf("/")!==-1;var te=W.toUpperCase(),me=X===!0?q.indexOf(te):G.indexOf(te);if(me!==-1)return D.FileIndex[me];var Ee=!te.match(e1);for(te=te.replace(q0,""),Ee&&(te=te.replace(e1,"!")),me=0;me<q.length;++me)if((Ee?q[me].replace(e1,"!"):q[me]).replace(q0,"")==te||(Ee?G[me].replace(e1,"!"):G[me]).replace(q0,"")==te)return D.FileIndex[me];return null}var M=64,L=-2,V="d0cf11e0a1b11ae1",ee=[208,207,17,224,161,177,26,225],Q="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:V,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _(D,W,q){d();var G=R(D,q);c.writeFileSync(W,G)}function H(D){for(var W=new Array(D.length),q=0;q<D.length;++q)W[q]=String.fromCharCode(D[q]);return W.join("")}function P(D,W){var q=R(D,W);switch(W&&W.type||"buffer"){case"file":return d(),c.writeFileSync(W.filename,q),q;case"binary":return typeof q=="string"?q:H(q);case"base64":return Fg(typeof q=="string"?q:H(q));case"buffer":if(or)return Buffer.isBuffer(q)?q:uc(q);case"array":return typeof q=="string"?qi(q):q}return q}var K;function F(D){try{var W=D.InflateRaw,q=new W;if(q._processChunk(new Uint8Array([3,0]),q._finishFlushFlag),q.bytesRead)K=D;else throw new Error("zlib does not expose bytesRead")}catch(G){console.error("cannot use native zlib: "+(G.message||G))}}function ne(D,W){if(!K)return zt(D,W);var q=K.InflateRaw,G=new q,X=G._processChunk(D.slice(D.l),G._finishFlushFlag);return D.l+=G.bytesRead,X}function z(D){return K?K.deflateRawSync(D):U(D)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ue=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function _e(D){var W=(D<<1|D<<11)&139536|(D<<5|D<<15)&558144;return(W>>16|W>>8|W)&255}for(var we=typeof Uint8Array<"u",Y=we?new Uint8Array(256):[],le=0;le<256;++le)Y[le]=_e(le);function ye(D,W){var q=Y[D&255];return W<=8?q>>>8-W:(q=q<<8|Y[D>>8&255],W<=16?q>>>16-W:(q=q<<8|Y[D>>16&255],q>>>24-W))}function Ve(D,W){var q=W&7,G=W>>>3;return(D[G]|(q<=6?0:D[G+1]<<8))>>>q&3}function Be(D,W){var q=W&7,G=W>>>3;return(D[G]|(q<=5?0:D[G+1]<<8))>>>q&7}function ut(D,W){var q=W&7,G=W>>>3;return(D[G]|(q<=4?0:D[G+1]<<8))>>>q&15}function Te(D,W){var q=W&7,G=W>>>3;return(D[G]|(q<=3?0:D[G+1]<<8))>>>q&31}function je(D,W){var q=W&7,G=W>>>3;return(D[G]|(q<=1?0:D[G+1]<<8))>>>q&127}function ht(D,W,q){var G=W&7,X=W>>>3,te=(1<<q)-1,me=D[X]>>>G;return q<8-G||(me|=D[X+1]<<8-G,q<16-G)||(me|=D[X+2]<<16-G,q<24-G)||(me|=D[X+3]<<24-G),me&te}function pt(D,W,q){var G=W&7,X=W>>>3;return G<=5?D[X]|=(q&7)<<G:(D[X]|=q<<G&255,D[X+1]=(q&7)>>8-G),W+3}function re(D,W,q){var G=W&7,X=W>>>3;return q=(q&1)<<G,D[X]|=q,W+1}function ce(D,W,q){var G=W&7,X=W>>>3;return q<<=G,D[X]|=q&255,q>>>=8,D[X+1]=q,W+8}function ge(D,W,q){var G=W&7,X=W>>>3;return q<<=G,D[X]|=q&255,q>>>=8,D[X+1]=q&255,D[X+2]=q>>>8,W+16}function Ue(D,W){var q=D.length,G=2*q>W?2*q:W+5,X=0;if(q>=W)return D;if(or){var te=gM(G);if(D.copy)D.copy(te);else for(;X<D.length;++X)te[X]=D[X];return te}else if(we){var me=new Uint8Array(G);if(me.set)me.set(D);else for(;X<q;++X)me[X]=D[X];return me}return D.length=G,D}function Re(D){for(var W=new Array(D),q=0;q<D;++q)W[q]=0;return W}function Me(D,W,q){var G=1,X=0,te=0,me=0,Ee=0,fe=D.length,pe=we?new Uint16Array(32):Re(32);for(te=0;te<32;++te)pe[te]=0;for(te=fe;te<q;++te)D[te]=0;fe=D.length;var xe=we?new Uint16Array(fe):Re(fe);for(te=0;te<fe;++te)pe[X=D[te]]++,G<X&&(G=X),xe[te]=0;for(pe[0]=0,te=1;te<=G;++te)pe[te+16]=Ee=Ee+pe[te-1]<<1;for(te=0;te<fe;++te)Ee=D[te],Ee!=0&&(xe[te]=pe[Ee+16]++);var Pe=0;for(te=0;te<fe;++te)if(Pe=D[te],Pe!=0)for(Ee=ye(xe[te],G)>>G-Pe,me=(1<<G+4-Pe)-1;me>=0;--me)W[Ee|me<<Pe]=Pe&15|te<<4;return G}var Qe=we?new Uint16Array(512):Re(512),I=we?new Uint16Array(32):Re(32);if(!we){for(var j=0;j<512;++j)Qe[j]=0;for(j=0;j<32;++j)I[j]=0}(function(){for(var D=[],W=0;W<32;W++)D.push(5);Me(D,I,32);var q=[];for(W=0;W<=143;W++)q.push(8);for(;W<=255;W++)q.push(9);for(;W<=279;W++)q.push(7);for(;W<=287;W++)q.push(8);Me(q,Qe,288)})();var A=function(){for(var W=we?new Uint8Array(32768):[],q=0,G=0;q<ue.length-1;++q)for(;G<ue[q+1];++G)W[G]=q;for(;G<32768;++G)W[G]=29;var X=we?new Uint8Array(259):[];for(q=0,G=0;q<oe.length-1;++q)for(;G<oe[q+1];++G)X[G]=q;function te(Ee,fe){for(var pe=0;pe<Ee.length;){var xe=Math.min(65535,Ee.length-pe),Pe=pe+xe==Ee.length;for(fe.write_shift(1,+Pe),fe.write_shift(2,xe),fe.write_shift(2,~xe&65535);xe-- >0;)fe[fe.l++]=Ee[pe++]}return fe.l}function me(Ee,fe){for(var pe=0,xe=0,Pe=we?new Uint16Array(32768):[];xe<Ee.length;){var Ke=Math.min(65535,Ee.length-xe);if(Ke<10){for(pe=pt(fe,pe,+(xe+Ke==Ee.length)),pe&7&&(pe+=8-(pe&7)),fe.l=pe/8|0,fe.write_shift(2,Ke),fe.write_shift(2,~Ke&65535);Ke-- >0;)fe[fe.l++]=Ee[xe++];pe=fe.l*8;continue}pe=pt(fe,pe,+(xe+Ke==Ee.length)+2);for(var et=0;Ke-- >0;){var ze=Ee[xe];et=(et<<5^ze)&32767;var Ye=-1,Ct=0;if((Ye=Pe[et])&&(Ye|=xe&-32768,Ye>xe&&(Ye-=32768),Ye<xe))for(;Ee[Ye+Ct]==Ee[xe+Ct]&&Ct<250;)++Ct;if(Ct>2){ze=X[Ct],ze<=22?pe=ce(fe,pe,Y[ze+1]>>1)-1:(ce(fe,pe,3),pe+=5,ce(fe,pe,Y[ze-23]>>5),pe+=3);var Gr=ze<8?0:ze-4>>2;Gr>0&&(ge(fe,pe,Ct-oe[ze]),pe+=Gr),ze=W[xe-Ye],pe=ce(fe,pe,Y[ze]>>3),pe-=3;var Kr=ze<4?0:ze-2>>1;Kr>0&&(ge(fe,pe,xe-Ye-ue[ze]),pe+=Kr);for(var ps=0;ps<Ct;++ps)Pe[et]=xe&32767,et=(et<<5^Ee[xe])&32767,++xe;Ke-=Ct-1}else ze<=143?ze=ze+48:pe=re(fe,pe,1),pe=ce(fe,pe,Y[ze]),Pe[et]=xe&32767,++xe}pe=ce(fe,pe,0)-1}return fe.l=(pe+7)/8|0,fe.l}return function(fe,pe){return fe.length<8?te(fe,pe):me(fe,pe)}}();function U(D){var W=Se(50+Math.floor(D.length*1.1)),q=A(D,W);return W.slice(0,q)}var ie=we?new Uint16Array(32768):Re(32768),he=we?new Uint16Array(32768):Re(32768),be=we?new Uint16Array(128):Re(128),bt=1,er=1;function Yt(D,W){var q=Te(D,W)+257;W+=5;var G=Te(D,W)+1;W+=5;var X=ut(D,W)+4;W+=4;for(var te=0,me=we?new Uint8Array(19):Re(19),Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe=1,pe=we?new Uint8Array(8):Re(8),xe=we?new Uint8Array(8):Re(8),Pe=me.length,Ke=0;Ke<X;++Ke)me[Z[Ke]]=te=Be(D,W),fe<te&&(fe=te),pe[te]++,W+=3;var et=0;for(pe[0]=0,Ke=1;Ke<=fe;++Ke)xe[Ke]=et=et+pe[Ke-1]<<1;for(Ke=0;Ke<Pe;++Ke)(et=me[Ke])!=0&&(Ee[Ke]=xe[et]++);var ze=0;for(Ke=0;Ke<Pe;++Ke)if(ze=me[Ke],ze!=0){et=Y[Ee[Ke]]>>8-ze;for(var Ye=(1<<7-ze)-1;Ye>=0;--Ye)be[et|Ye<<ze]=ze&7|Ke<<3}var Ct=[];for(fe=1;Ct.length<q+G;)switch(et=be[je(D,W)],W+=et&7,et>>>=3){case 16:for(te=3+Ve(D,W),W+=2,et=Ct[Ct.length-1];te-- >0;)Ct.push(et);break;case 17:for(te=3+Be(D,W),W+=3;te-- >0;)Ct.push(0);break;case 18:for(te=11+je(D,W),W+=7;te-- >0;)Ct.push(0);break;default:Ct.push(et),fe<et&&(fe=et);break}var Gr=Ct.slice(0,q),Kr=Ct.slice(q);for(Ke=q;Ke<286;++Ke)Gr[Ke]=0;for(Ke=G;Ke<30;++Ke)Kr[Ke]=0;return bt=Me(Gr,ie,286),er=Me(Kr,he,30),W}function sr(D,W){if(D[0]==3&&!(D[1]&3))return[hh(W),2];for(var q=0,G=0,X=gM(W||1<<18),te=0,me=X.length>>>0,Ee=0,fe=0;!(G&1);){if(G=Be(D,q),q+=3,G>>>1)G>>1==1?(Ee=9,fe=5):(q=Yt(D,q),Ee=bt,fe=er);else{q&7&&(q+=8-(q&7));var pe=D[q>>>3]|D[(q>>>3)+1]<<8;if(q+=32,pe>0)for(!W&&me<te+pe&&(X=Ue(X,te+pe),me=X.length);pe-- >0;)X[te++]=D[q>>>3],q+=8;continue}for(;;){!W&&me<te+32767&&(X=Ue(X,te+32767),me=X.length);var xe=ht(D,q,Ee),Pe=G>>>1==1?Qe[xe]:ie[xe];if(q+=Pe&15,Pe>>>=4,!(Pe>>>8&255))X[te++]=Pe;else{if(Pe==256)break;Pe-=257;var Ke=Pe<8?0:Pe-4>>2;Ke>5&&(Ke=0);var et=te+oe[Pe];Ke>0&&(et+=ht(D,q,Ke),q+=Ke),xe=ht(D,q,fe),Pe=G>>>1==1?I[xe]:he[xe],q+=Pe&15,Pe>>>=4;var ze=Pe<4?0:Pe-2>>1,Ye=ue[Pe];for(ze>0&&(Ye+=ht(D,q,ze),q+=ze),!W&&me<et&&(X=Ue(X,et+100),me=X.length);te<et;)X[te]=X[te-Ye],++te}}}return W?[X,q+7>>>3]:[X.slice(0,te),q+7>>>3]}function zt(D,W){var q=D.slice(D.l||0),G=sr(q,W);return D.l+=G[1],G[0]}function Hp(D,W){if(D)typeof console<"u"&&console.error(W);else throw new Error(W)}function Wp(D,W){var q=D;Ma(q,0);var G=[],X=[],te={FileIndex:G,FullPaths:X};C(te,{root:W.root});for(var me=q.length-4;(q[me]!=80||q[me+1]!=75||q[me+2]!=5||q[me+3]!=6)&&me>=0;)--me;q.l=me+4,q.l+=4;var Ee=q.read_shift(2);q.l+=6;var fe=q.read_shift(4);for(q.l=fe,me=0;me<Ee;++me){q.l+=20;var pe=q.read_shift(4),xe=q.read_shift(4),Pe=q.read_shift(2),Ke=q.read_shift(2),et=q.read_shift(2);q.l+=8;var ze=q.read_shift(4),Ye=l(q.slice(q.l+Pe,q.l+Pe+Ke));q.l+=Pe+Ke+et;var Ct=q.l;q.l=ze+4,rC(q,pe,xe,te,Ye),q.l=Ct}return te}function rC(D,W,q,G,X){D.l+=2;var te=D.read_shift(2),me=D.read_shift(2),Ee=i(D);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var fe=D.read_shift(4),pe=D.read_shift(4),xe=D.read_shift(4),Pe=D.read_shift(2),Ke=D.read_shift(2),et="",ze=0;ze<Pe;++ze)et+=String.fromCharCode(D[D.l++]);if(Ke){var Ye=l(D.slice(D.l,D.l+Ke));(Ye[21589]||{}).mt&&(Ee=Ye[21589].mt),((X||{})[21589]||{}).mt&&(Ee=X[21589].mt)}D.l+=Ke;var Ct=D.slice(D.l,D.l+pe);switch(me){case 8:Ct=ne(D,xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+me)}var Gr=!1;te&8&&(fe=D.read_shift(4),fe==134695760&&(fe=D.read_shift(4),Gr=!0),pe=D.read_shift(4),xe=D.read_shift(4)),pe!=W&&Hp(Gr,"Bad compressed size: "+W+" != "+pe),xe!=q&&Hp(Gr,"Bad uncompressed size: "+q+" != "+xe),Yh(G,et,Ct,{unsafe:!0,mt:Ee})}function nC(D,W){var q=W||{},G=[],X=[],te=Se(1),me=q.compression?8:0,Ee=0,fe=0,pe=0,xe=0,Pe=0,Ke=D.FullPaths[0],et=Ke,ze=D.FileIndex[0],Ye=[],Ct=0;for(fe=1;fe<D.FullPaths.length;++fe)if(et=D.FullPaths[fe].slice(Ke.length),ze=D.FileIndex[fe],!(!ze.size||!ze.content||et=="Sh33tJ5")){var Gr=xe,Kr=Se(et.length);for(pe=0;pe<et.length;++pe)Kr.write_shift(1,et.charCodeAt(pe)&127);Kr=Kr.slice(0,Kr.l),Ye[Pe]=Dse.buf(ze.content,0);var ps=ze.content;me==8&&(ps=z(ps)),te=Se(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,Ee),te.write_shift(2,me),ze.mt?a(te,ze.mt):te.write_shift(4,0),te.write_shift(-4,Ye[Pe]),te.write_shift(4,ps.length),te.write_shift(4,ze.content.length),te.write_shift(2,Kr.length),te.write_shift(2,0),xe+=te.length,G.push(te),xe+=Kr.length,G.push(Kr),xe+=ps.length,G.push(ps),te=Se(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,Ee),te.write_shift(2,me),te.write_shift(4,0),te.write_shift(-4,Ye[Pe]),te.write_shift(4,ps.length),te.write_shift(4,ze.content.length),te.write_shift(2,Kr.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,Gr),Ct+=te.l,X.push(te),Ct+=Kr.length,X.push(Kr),++Pe}return te=Se(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Pe),te.write_shift(2,Pe),te.write_shift(4,Ct),te.write_shift(4,xe),te.write_shift(2,0),as([as(G),as(X),te])}var Kh={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function sC(D,W){if(D.ctype)return D.ctype;var q=D.name||"",G=q.match(/\.([^\.]+)$/);return G&&Kh[G[1]]||W&&(G=(q=W).match(/[\.\\]([^\.\\])+$/),G&&Kh[G[1]])?Kh[G[1]]:"application/octet-stream"}function My(D){for(var W=Fg(D),q=[],G=0;G<W.length;G+=76)q.push(W.slice(G,G+76));return q.join(`\r
`)+`\r
`}function aC(D){var W=D.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(pe){var xe=pe.charCodeAt(0).toString(16).toUpperCase();return"="+(xe.length==1?"0"+xe:xe)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var q=[],G=W.split(`\r
`),X=0;X<G.length;++X){var te=G[X];if(te.length==0){q.push("");continue}for(var me=0;me<te.length;){var Ee=76,fe=te.slice(me,me+Ee);fe.charAt(Ee-1)=="="?Ee--:fe.charAt(Ee-2)=="="?Ee-=2:fe.charAt(Ee-3)=="="&&(Ee-=3),fe=te.slice(me,me+Ee),me+=Ee,me<te.length&&(fe+="="),q.push(fe)}}return q.join(`\r
`)}function iC(D){for(var W=[],q=0;q<D.length;++q){for(var G=D[q];q<=D.length&&G.charAt(G.length-1)=="=";)G=G.slice(0,G.length-1)+D[++q];W.push(G)}for(var X=0;X<W.length;++X)W[X]=W[X].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return qi(W.join(`\r
`))}function Zh(D,W,q){for(var G="",X="",te="",me,Ee=0;Ee<10;++Ee){var fe=W[Ee];if(!fe||fe.match(/^\s*$/))break;var pe=fe.match(/^(.*?):\s*([^\s].*)$/);if(pe)switch(pe[1].toLowerCase()){case"content-location":G=pe[2].trim();break;case"content-type":te=pe[2].trim();break;case"content-transfer-encoding":X=pe[2].trim();break}}switch(++Ee,X.toLowerCase()){case"base64":me=qi(rc(W.slice(Ee).join("")));break;case"quoted-printable":me=iC(W.slice(Ee));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+X)}var xe=Yh(D,G.slice(q.length),me,{unsafe:!0});te&&(xe.ctype=te)}function Oy(D,W){if(H(D.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var q=W&&W.root||"",G=(or&&Buffer.isBuffer(D)?D.toString("binary"):H(D)).split(`\r
`),X=0,te="";for(X=0;X<G.length;++X)if(te=G[X],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),q||(q=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,q.length)!=q))for(;q.length>0&&(q=q.slice(0,q.length-1),q=q.slice(0,q.lastIndexOf("/")+1),te.slice(0,q.length)!=q););var me=(G[1]||"").match(/boundary="(.*?)"/);if(!me)throw new Error("MAD cannot find boundary");var Ee="--"+(me[1]||""),fe=[],pe=[],xe={FileIndex:fe,FullPaths:pe};C(xe);var Pe,Ke=0;for(X=0;X<G.length;++X){var et=G[X];et!==Ee&&et!==Ee+"--"||(Ke++&&Zh(xe,G.slice(Pe,X),q),Pe=X)}return xe}function oC(D,W){var q=W||{},G=q.boundary||"SheetJS";G="------="+G;for(var X=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+G.slice(2)+'"',"","",""],te=D.FullPaths[0],me=te,Ee=D.FileIndex[0],fe=1;fe<D.FullPaths.length;++fe)if(me=D.FullPaths[fe].slice(te.length),Ee=D.FileIndex[fe],!(!Ee.size||!Ee.content||me=="Sh33tJ5")){me=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ct){return"_x"+Ct.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ct){return"_u"+Ct.charCodeAt(0).toString(16)+"_"});for(var pe=Ee.content,xe=or&&Buffer.isBuffer(pe)?pe.toString("binary"):H(pe),Pe=0,Ke=Math.min(1024,xe.length),et=0,ze=0;ze<=Ke;++ze)(et=xe.charCodeAt(ze))>=32&&et<128&&++Pe;var Ye=Pe>=Ke*4/5;X.push(G),X.push("Content-Location: "+(q.root||"file:///C:/SheetJS/")+me),X.push("Content-Transfer-Encoding: "+(Ye?"quoted-printable":"base64")),X.push("Content-Type: "+sC(Ee,me)),X.push(""),X.push(Ye?aC(xe):My(xe))}return X.push(G+`--\r
`),X.join(`\r
`)}function lC(D){var W={};return C(W,D),W}function Yh(D,W,q,G){var X=G&&G.unsafe;X||C(D);var te=!X&&wr.find(D,W);if(!te){var me=D.FullPaths[0];W.slice(0,me.length)==me?me=W:(me.slice(-1)!="/"&&(me+="/"),me=(me+W).replace("//","/")),te={name:s(W),type:2},D.FileIndex.push(te),D.FullPaths.push(me),X||wr.utils.cfb_gc(D)}return te.content=q,te.size=q?q.length:0,G&&(G.CLSID&&(te.clsid=G.CLSID),G.mt&&(te.mt=G.mt),G.ct&&(te.ct=G.ct)),te}function Ce(D,W){C(D);var q=wr.find(D,W);if(q){for(var G=0;G<D.FileIndex.length;++G)if(D.FileIndex[G]==q)return D.FileIndex.splice(G,1),D.FullPaths.splice(G,1),!0}return!1}function Ge(D,W,q){C(D);var G=wr.find(D,W);if(G){for(var X=0;X<D.FileIndex.length;++X)if(D.FileIndex[X]==G)return D.FileIndex[X].name=s(q),D.FullPaths[X]=q,!0}return!1}function lr(D){T(D,!0)}return e.find=B,e.read=S,e.parse=u,e.write=P,e.writeFile=_,e.utils={cfb_new:lC,cfb_add:Yh,cfb_del:Ce,cfb_mov:Ge,cfb_gc:lr,ReadShift:K0,CheckField:D$,prep_blob:Ma,bconcat:as,use_zlib:F,_deflateRaw:U,_inflateRaw:zt,consts:J},e}();function Lse(t){return typeof t=="string"?Nk(t):Array.isArray(t)?cse(t):t}function Bx(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Nk(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?zg(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([Lse(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Fx(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function fs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function NM(t,e){for(var r=[],n=fs(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function oT(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function jk(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function $se(t){for(var e=[],r=fs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var ab=new Date(1899,11,30,0,0,0);function wa(t,e){var r=t.getTime(),n=ab.getTime()+(t.getTimezoneOffset()-ab.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var v$=new Date,Fse=ab.getTime()+(v$.getTimezoneOffset()-ab.getTimezoneOffset())*6e4,SM=v$.getTimezoneOffset();function b$(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Fse),e.getTimezoneOffset()!==SM&&e.setTime(e.getTime()+(e.getTimezoneOffset()-SM)*6e4),e}var EM=new Date("2017-02-19T19:06:09.000Z"),w$=isNaN(EM.getFullYear())?new Date("2/19/17"):EM,Bse=w$.getFullYear()==2017;function Ks(t,e){var r=new Date(t);if(Bse)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(w$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Tk(t,e){if(or&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function ka(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ka(t[r]));return e}function rn(t,e){for(var r="";r.length<e;)r+=t;return r}function Ul(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var zse=["january","february","march","april","may","june","july","august","september","october","november","december"];function Bg(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&zse.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function It(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return or?n=uc(r):n=dse(r),wr.utils.cfb_add(t,e,n)}wr.utils.cfb_add(t,e,r)}else t.file(e,r)}function lT(){return wr.utils.cfb_new()}var jn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Use={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cT=oT(Use),dT=/[&<>'"]/g,Vse=/[\u0000-\u0008\u000b-\u001f]/g;function xr(t){var e=t+"";return e.replace(dT,function(r){return cT[r]}).replace(Vse,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function jM(t){return xr(t).replace(/ /g,"_x0020_")}var k$=/[\u0000-\u001f]/g;function Hse(t){var e=t+"";return e.replace(dT,function(r){return cT[r]}).replace(/\n/g,"<br/>").replace(k$,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Wse(t){var e=t+"";return e.replace(dT,function(r){return cT[r]}).replace(k$,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function qse(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Gse(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function UC(t){for(var e="",r=0,n=0,s=0,a=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function TM(t){var e=hh(2*t.length),r,n,s=1,a=0,i=0,l;for(n=0;n<t.length;n+=s)s=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function _M(t){return uc(t,"binary").toString("utf8")}var r1="foo bar baz",G0=or&&(_M(r1)==UC(r1)&&_M||TM(r1)==UC(r1)&&TM)||UC,zg=or?function(t){return uc(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Kse=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),C$=/(^\s|\s$|\n)/;function is(t,e){return"<"+t+(e.match(C$)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Ug(t){return fs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function He(t,e,r){return"<"+t+(r!=null?Ug(r):"")+(e!=null?(e.match(C$)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function ZE(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Zse(t,e){switch(typeof t){case"string":var r=He("vt:lpwstr",xr(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return He((t|0)==t?"vt:i4":"vt:r8",xr(String(t)));case"boolean":return He("vt:bool",t?"true":"false")}if(t instanceof Date)return He("vt:filetime",ZE(t));throw new Error("Unable to serialize "+t)}var zn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Oa={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Yse(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Xse(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=n?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var l=0;l<=5;++l,a/=256)t[r+l]=a&255;t[r+6]=(s&15)<<4|a&15,t[r+7]=s>>4|n}var AM=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,a=t[0][n].length;s<a;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},MM=or?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:uc(e)})):AM(t)}:AM,OM=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(j0(t,s)));return n.join("").replace(q0,"")},uT=or?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(q0,""):OM(t,e,r)}:OM,RM=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},N$=or?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):RM(t,e,r)}:RM,PM=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(gf(t,s)));return n.join("")},zx=or?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):PM(e,r,n)}:PM,S$=function(t,e){var r=Ra(t,e);return r>0?zx(t,e+4,e+4+r-1):""},E$=S$,j$=function(t,e){var r=Ra(t,e);return r>0?zx(t,e+4,e+4+r-1):""},T$=j$,_$=function(t,e){var r=2*Ra(t,e);return r>0?zx(t,e+4,e+4+r-1):""},A$=_$,M$=function(e,r){var n=Ra(e,r);return n>0?uT(e,r+4,r+4+n):""},O$=M$,R$=function(t,e){var r=Ra(t,e);return r>0?zx(t,e+4,e+4+r):""},P$=R$,I$=function(t,e){return Yse(t,e)},ib=I$,hT=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};or&&(E$=function(e,r){if(!Buffer.isBuffer(e))return S$(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},T$=function(e,r){if(!Buffer.isBuffer(e))return j$(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},A$=function(e,r){if(!Buffer.isBuffer(e))return _$(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},O$=function(e,r){if(!Buffer.isBuffer(e))return M$(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},P$=function(e,r){if(!Buffer.isBuffer(e))return R$(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},ib=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):I$(e,r)},hT=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var gf=function(t,e){return t[e]},j0=function(t,e){return t[e+1]*256+t[e]},Jse=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Ra=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},yu=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Qse=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function K0(t,e){var r="",n,s,a=[],i,l,c,d;switch(e){case"dbcs":if(d=this.l,or&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(j0(this,d)),d+=2;t*=2;break;case"utf8":r=zx(this,this.l,this.l+t);break;case"utf16le":t*=2,r=uT(this,this.l,this.l+t);break;case"wstr":return K0.call(this,t,"dbcs");case"lpstr-ansi":r=E$(this,this.l),t=4+Ra(this,this.l);break;case"lpstr-cp":r=T$(this,this.l),t=4+Ra(this,this.l);break;case"lpwstr":r=A$(this,this.l),t=4+2*Ra(this,this.l);break;case"lpp4":t=4+Ra(this,this.l),r=O$(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ra(this,this.l),r=P$(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=gf(this,this.l+t++))!==0;)a.push(Qy(i));r=a.join("");break;case"_wstr":for(t=0,r="";(i=j0(this,this.l+t))!==0;)a.push(Qy(i)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=gf(this,d),this.l=d+1,l=K0.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+l;a.push(Qy(j0(this,d))),d+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return i=gf(this,d),this.l=d+1,l=K0.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+l;a.push(Qy(gf(this,d))),d+=1}r=a.join("");break;default:switch(t){case 1:return n=gf(this,this.l),this.l++,n;case 2:return n=(e==="i"?Jse:j0)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?yu:Qse)(this,this.l),this.l+=4,n):(s=Ra(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=ib(this,this.l):s=ib([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=N$(this,this.l,t);break}}return this.l+=t,r}var eae=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},tae=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},rae=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function nae(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)rae(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,eae(this,e,this.l);break;case 8:if(n=8,r==="f"){Xse(this,e,this.l);break}case 16:break;case-4:n=4,tae(this,e,this.l);break}return this.l+=n,this}function D$(t,e){var r=N$(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Ma(t,e){t.l=e,t.read_shift=K0,t.chk=D$,t.write_shift=nae}function Ko(t,e){t.l+=e}function Se(t){var e=hh(t);return Ma(e,0),e}function ma(){var t=[],e=or?256:2048,r=function(d){var u=Se(d);return Ma(u,0),u},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,e)))},i=function(){return s(),as(t)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:l,end:i,_bufs:t}}function Ae(t,e,r,n){var s=+e,a;if(!isNaN(s)){n||(n=Yde[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&hT(r)&&t.push(r)}}function Z0(t,e,r){var n=ka(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function IM(t,e,r){var n=ka(t);return n.s=Z0(n.s,e.s,r),n.e=Z0(n.e,e.s,r),n}function Y0(t,e){if(t.cRel&&t.c<0)for(t=ka(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ka(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=br(t);return!t.cRel&&t.cRel!=null&&(r=iae(r)),!t.rRel&&t.rRel!=null&&(r=sae(r)),r}function VC(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+_s(t.s.c)+":"+(t.e.cRel?"":"$")+_s(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ds(t.s.r)+":"+(t.e.rRel?"":"$")+ds(t.e.r):Y0(t.s,e.biff)+":"+Y0(t.e,e.biff)}function fT(t){return parseInt(aae(t),10)-1}function ds(t){return""+(t+1)}function sae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function aae(t){return t.replace(/\$(\d+)$/,"$1")}function mT(t){for(var e=oae(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function _s(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function iae(t){return t.replace(/^([A-Z])/,"$$$1")}function oae(t){return t.replace(/^\$([A-Z])/,"$1")}function lae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Vn(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function br(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Wa(t){var e=t.indexOf(":");return e==-1?{s:Vn(t),e:Vn(t)}:{s:Vn(t.slice(0,e)),e:Vn(t.slice(e+1))}}function Sn(t,e){return typeof e>"u"||typeof e=="number"?Sn(t.s,t.e):(typeof t!="string"&&(t=br(t)),typeof e!="string"&&(e=br(e)),t==e?t:t+":"+e)}function Hr(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=t.length;for(r=0;n<a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function DM(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Od(t.z,r?wa(e):e)}catch{}try{return t.w=Od((t.XF||{}).numFmtId||(r?14:0),r?wa(e):e)}catch{return""+e}}function nc(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Ux[t.v]||t.v:e==null?DM(t,t.v):DM(t,e))}function Ih(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function L$(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,a=t||(s?[]:{}),i=0,l=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Vn(n.origin):n.origin;i=c.r,l=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var u=Hr(a["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),i==-1&&(d.e.r=i=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var m={v:e[h][f]},p=i+h,g=l+f;if(d.s.r>p&&(d.s.r=p),d.s.c>g&&(d.s.c=g),d.e.r<p&&(d.e.r=p),d.e.c<g&&(d.e.c=g),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))m=e[h][f];else if(Array.isArray(m.v)&&(m.f=e[h][f][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||on[14],n.cellDates?(m.t="d",m.w=Od(m.z,wa(m.v))):(m.t="n",m.v=wa(m.v),m.w=Od(m.z,m.v))):m.t="s";if(s)a[p]||(a[p]=[]),a[p][g]&&a[p][g].z&&(m.z=a[p][g].z),a[p][g]=m;else{var y=br({c:g,r:p});a[y]&&a[y].z&&(m.z=a[y].z),a[y]=m}}}return d.s.c<1e7&&(a["!ref"]=Sn(d)),a}function fp(t,e){return L$(null,t,e)}function cae(t){return t.read_shift(4,"i")}function no(t,e){return e||(e=Se(4)),e.write_shift(4,t),e}function As(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Hn(t,e){var r=!1;return e==null&&(r=!0,e=Se(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function dae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function uae(t,e){return e||(e=Se(4)),e.write_shift(2,0),e.write_shift(2,0),e}function pT(t,e){var r=t.l,n=t.read_shift(1),s=As(t),a=[],i={t:s,h:s};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)a.push(dae(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function hae(t,e){var r=!1;return e==null&&(r=!0,e=Se(15+4*t.t.length)),e.write_shift(1,0),Hn(t.t,e),r?e.slice(0,e.l):e}var fae=pT;function mae(t,e){var r=!1;return e==null&&(r=!0,e=Se(23+4*t.t.length)),e.write_shift(1,1),Hn(t.t,e),e.write_shift(4,1),uae({},e),r?e.slice(0,e.l):e}function Pi(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Dh(t,e){return e==null&&(e=Se(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Lh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function $h(t,e){return e==null&&(e=Se(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var pae=As,$$=Hn;function gT(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function ob(t,e){var r=!1;return e==null&&(r=!0,e=Se(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var gae=As,YE=gT,xT=ob;function F$(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?ib([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):yu(e,0)>>2;return r?s/100:s}function B$(t,e){e==null&&(e=Se(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function z$(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function xae(t,e){return e||(e=Se(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Fh=z$,mp=xae;function pp(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function fh(t,e){return(e||Se(8)).write_shift(8,t,"f")}function yae(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var d=jae[s];d&&(e.rgb=GM(d));break;case 2:e.rgb=GM([i,l,c]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function lb(t,e){if(e||(e=Se(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function vae(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function bae(t,e){e||(e=Se(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var U$=2,Ta=3,n1=11,cb=19,s1=64,wae=65,kae=71,Cae=4108,Nae=4126,rs=80,LM={1:{n:"CodePage",t:U$},2:{n:"Category",t:rs},3:{n:"PresentationFormat",t:rs},4:{n:"ByteCount",t:Ta},5:{n:"LineCount",t:Ta},6:{n:"ParagraphCount",t:Ta},7:{n:"SlideCount",t:Ta},8:{n:"NoteCount",t:Ta},9:{n:"HiddenCount",t:Ta},10:{n:"MultimediaClipCount",t:Ta},11:{n:"ScaleCrop",t:n1},12:{n:"HeadingPairs",t:Cae},13:{n:"TitlesOfParts",t:Nae},14:{n:"Manager",t:rs},15:{n:"Company",t:rs},16:{n:"LinksUpToDate",t:n1},17:{n:"CharacterCount",t:Ta},19:{n:"SharedDoc",t:n1},22:{n:"HyperlinksChanged",t:n1},23:{n:"AppVersion",t:Ta,p:"version"},24:{n:"DigSig",t:wae},26:{n:"ContentType",t:rs},27:{n:"ContentStatus",t:rs},28:{n:"Language",t:rs},29:{n:"Version",t:rs},255:{},2147483648:{n:"Locale",t:cb},2147483651:{n:"Behavior",t:cb},1919054434:{}},$M={1:{n:"CodePage",t:U$},2:{n:"Title",t:rs},3:{n:"Subject",t:rs},4:{n:"Author",t:rs},5:{n:"Keywords",t:rs},6:{n:"Comments",t:rs},7:{n:"Template",t:rs},8:{n:"LastAuthor",t:rs},9:{n:"RevNumber",t:rs},10:{n:"EditTime",t:s1},11:{n:"LastPrinted",t:s1},12:{n:"CreatedDate",t:s1},13:{n:"ModifiedDate",t:s1},14:{n:"PageCount",t:Ta},15:{n:"WordCount",t:Ta},16:{n:"CharCount",t:Ta},17:{n:"Thumbnail",t:kae},18:{n:"Application",t:rs},19:{n:"DocSecurity",t:Ta},255:{},2147483648:{n:"Locale",t:cb},2147483651:{n:"Behavior",t:cb},1919054434:{}};function Sae(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Eae=Sae([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),jae=ka(Eae),Ux={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Tae={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},a1={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function V$(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function H$(t,e){var r=$se(Tae),n=[],s;n[n.length]=jn,n[n.length]=He("Types",null,{xmlns:zn.CT,"xmlns:xsd":zn.xsd,"xmlns:xsi":zn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return He("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){t[c]&&t[c].length>0&&(s=t[c][0],n[n.length]=He("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:a1[c][e.bookType]||a1[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(d){n[n.length]=He("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:a1[c][e.bookType]||a1[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(d){n[n.length]=He("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return a("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var tr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function W$(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Yf(t){var e=[jn,He("Relationships",null,{xmlns:zn.RELS})];return fs(t["!id"]).forEach(function(r){e[e.length]=He("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function pr(t,e,r,n,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[tr.HLINK,tr.XPATH,tr.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}function _ae(t){var e=[jn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function FM(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Aae(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Mae(t){var e=[jn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(FM(t[r][0],t[r][1])),e.push(Aae("",t[r][0]));return e.push(FM("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function q$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+eb.version+"</meta:generator></office:meta></office:document-meta>"}var Yu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function HC(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=xr(e),n[n.length]=r?He(t,e,r):is(t,e))}function G$(t,e){var r=e||{},n=[jn,He("cp:coreProperties",null,{"xmlns:cp":zn.CORE_PROPS,"xmlns:dc":zn.dc,"xmlns:dcterms":zn.dcterms,"xmlns:dcmitype":zn.dcmitype,"xmlns:xsi":zn.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&HC("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:ZE(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&HC("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:ZE(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Yu.length;++a){var i=Yu[a],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&HC(i[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Xf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],K$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Z$(t){var e=[],r=He;return t||(t={}),t.Application="SheetJS",e[e.length]=jn,e[e.length]=He("Properties",null,{xmlns:zn.EXT_PROPS,"xmlns:vt":zn.vt}),Xf.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=xr(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+xr(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function Y$(t){var e=[jn,He("Properties",null,{xmlns:zn.CUST_PROPS,"xmlns:vt":zn.vt})];if(!t)return e.join("");var r=1;return fs(t).forEach(function(s){++r,e[e.length]=He("property",Zse(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:xr(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var BM={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Oae(t,e){var r=[];return fs(BM).map(function(n){for(var s=0;s<Yu.length;++s)if(Yu[s][1]==n)return Yu[s];for(s=0;s<Xf.length;++s)if(Xf[s][1]==n)return Xf[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(is(BM[n[1]]||n[1],s))}}),He("DocumentProperties",r.join(""),{xmlns:Oa.o})}function Rae(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&fs(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<Yu.length;++i)if(a==Yu[i][1])return;for(i=0;i<Xf.length;++i)if(a==Xf[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var l=t[a],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(He(jM(a),l,{"dt:dt":c}))}}),e&&fs(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),s.push(He(jM(a),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Oa.o+'">'+s.join("")+"</"+n+">"}function Pae(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Se(8);return i.write_shift(4,n),i.write_shift(4,s),i}function zM(t,e){var r=Se(4),n=Se(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Se(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=Pae(e);break;case 31:case 80:for(n=Se(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return as([r,n])}var X$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Iae(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function UM(t,e,r){var n=Se(8),s=[],a=[],i=8,l=0,c=Se(8),d=Se(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),a.push(c),s.push(d),i+=8+c.length,!e){d=Se(8),d.write_shift(4,0),s.unshift(d);var u=[Se(4)];for(u[0].write_shift(4,t.length),l=0;l<t.length;++l){var h=t[l][0];for(c=Se(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=as(u),a.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(X$.indexOf(t[l][0])>-1||K$.indexOf(t[l][0])>-1)&&t[l][1]!=null){var f=t[l][1],m=0;if(e){m=+e[t[l][0]];var p=r[m];if(p.p=="version"&&typeof f=="string"){var g=f.split(".");f=(+g[0]<<16)+(+g[1]||0)}c=zM(p.t,f)}else{var y=Iae(f);y==-1&&(y=31,f=String(f)),c=zM(y,f)}a.push(c),d=Se(8),d.write_shift(4,e?m:2+l),s.push(d),i+=8+c.length}var b=8*(a.length+1);for(l=0;l<a.length;++l)s[l].write_shift(4,b),b+=a[l].length;return n.write_shift(4,i),n.write_shift(4,a.length),as([n].concat(s).concat(a))}function VM(t,e,r,n,s,a){var i=Se(s?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,wr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var c=UM(t,r,n);if(l.push(c),s){var d=UM(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+c.length),l.push(d)}return as(l)}function Dae(t,e){e||(e=Se(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function Lae(t,e){return t.read_shift(e)===1}function Us(t,e){return e||(e=Se(2)),e.write_shift(2,+!!t),e}function J$(t){return t.read_shift(2,"u")}function di(t,e){return e||(e=Se(2)),e.write_shift(2,t),e}function Q$(t,e,r){return r||(r=Se(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function eF(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?t.read_shift(n,s):"";return i}function $ae(t){var e=t.t||"",r=Se(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Se(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return as(s)}function Fae(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Bae(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Fae(t,n,r)}function zae(t,e,r){if(r.biff>5)return Bae(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function tF(t,e,r){return r||(r=Se(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function HM(t,e){e||(e=Se(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function Uae(t){var e=Se(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(a==28)n=n.slice(1),HM(n,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),a&8&&HM(s>-1?n.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function mh(t,e,r,n){return n||(n=Se(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Vae(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),a=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[s,a,i]}function Hae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function rF(t,e){return e||(e=Se(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function yT(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Se(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Wae(t,e){var r=!e||e.biff==8,n=Se(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function qae(t,e){var r=!e||e.biff>=8?2:1,n=Se(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Gae(t,e){var r=Se(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=$ae(t[s]);var a=as([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Kae(){var t=Se(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Zae(t){var e=Se(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Yae(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,a=Se(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Xae(t,e,r,n){var s=Se(10);return mh(t,e,n,s),s.write_shift(4,r),s}function Jae(t,e,r,n,s){var a=!s||s.biff==8,i=Se(8+ +a+(1+a)*r.length);return mh(t,e,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Qae(t,e,r,n){var s=r&&r.biff==5;n||(n=Se(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}function eie(t,e){var r=e.biff==8||!e.biff?4:2,n=Se(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function WM(t,e,r,n){var s=r&&r.biff==5;n||(n=Se(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function tie(t){var e=Se(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function rie(t,e,r,n,s,a){var i=Se(8);return mh(t,e,n,i),Q$(r,a,i),i}function nie(t,e,r,n){var s=Se(14);return mh(t,e,n,s),fh(r,s),s}function sie(t,e,r){if(r.biff<8)return aie(t,e,r);for(var n=[],s=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(Vae(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function aie(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=eF(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function iie(t){var e=Se(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)rF(t[r],e);return e}function oie(t){var e=Se(24),r=Vn(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return as([e,Uae(t[1])])}function lie(t){var e=t[1].Tooltip,r=Se(10+2*(e.length+1));r.write_shift(2,2048);var n=Vn(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function cie(t){return t||(t=Se(4)),t.write_shift(2,1),t.write_shift(2,1),t}function die(t,e,r){if(!r.cellStyles)return Ko(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),a=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var d={s,e:a,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function uie(t,e){var r=Se(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function hie(t){for(var e=Se(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function fie(t,e,r){var n=Se(15);return Hx(n,t,e),n.write_shift(8,r,"f"),n}function mie(t,e,r){var n=Se(9);return Hx(n,t,e),n.write_shift(2,r),n}var pie=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=oT({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=hh(1);switch(c.type){case"base64":u=qi(rc(l));break;case"binary":u=qi(l);break;case"buffer":case"array":u=l;break}Ma(u,0);var h=u.read_shift(1),f=!!(h&136),m=!1,p=!1;switch(h){case 2:break;case 3:break;case 48:m=!0,f=!0;break;case 49:m=!0,f=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,y=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(y=u.read_shift(2));var b=u.read_shift(2),v=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(v=t[u[u.l]]),u.l+=1,u.l+=2),p&&(u.l+=36);for(var w=[],k={},N=Math.min(u.length,h==2?521:y-10-(m?264:0)),S=p?32:11;u.l<N&&u[u.l]!=13;)switch(k={},k.name=tb.utils.decode(v,u.slice(u.l,u.l+S)).replace(/[\u0000\r\n].*$/g,""),u.l+=S,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!p&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&w.push(k),h!=2&&(u.l+=p?13:14),k.type){case"B":(!m||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=y-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=y;var C=0,E=0;for(d[0]=[],E=0;E!=w.length;++E)d[0][E]=w[E].name;for(;g-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,d[++C]=[],E=0,E=0;E!=w.length;++E){var T=u.slice(u.l,u.l+w[E].len);u.l+=w[E].len,Ma(T,0);var R=tb.utils.decode(v,T);switch(w[E].type){case"C":R.trim().length&&(d[C][E]=R.replace(/\s+$/,""));break;case"D":R.length===8?d[C][E]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):d[C][E]=R;break;case"F":d[C][E]=parseFloat(R.trim());break;case"+":case"I":d[C][E]=p?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":d[C][E]=!0;break;case"N":case"F":d[C][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[C][E]="##MEMO##"+(p?parseInt(R.trim(),10):T.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(d[C][E]=+R||0);break;case"@":d[C][E]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":d[C][E]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":d[C][E]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[C][E]=-T.read_shift(-8,"f");break;case"B":if(m&&w[E].len==8){d[C][E]=T.read_shift(8,"f");break}case"G":case"P":T.l+=w[E].len;break;case"0":if(w[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[E].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=fp(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return Ih(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var d=c||{};if(+d.codepage>=0&&$g(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=ma(),h=mb(l,{header:1,raw:!0,cellDates:!0}),f=h[0],m=h.slice(1),p=l["!cols"]||[],g=0,y=0,b=0,v=1;for(g=0;g<f.length;++g){if(((p[g]||{}).DBF||{}).name){f[g]=p[g].DBF.name,++b;continue}if(f[g]!=null){if(++b,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(y=0;y<1024;++y)if(f.indexOf(f[g]+"_"+y)==-1){f[g]+="_"+y;break}}}}var w=Hr(l["!ref"]),k=[],N=[],S=[];for(g=0;g<=w.e.c-w.s.c;++g){var C="",E="",T=0,R=[];for(y=0;y<m.length;++y)m[y][g]!=null&&R.push(m[y][g]);if(R.length==0||f[g]==null){k[g]="?";continue}for(y=0;y<R.length;++y){switch(typeof R[y]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=R[y]instanceof Date?"D":"C";break;default:E="C"}T=Math.max(T,String(R[y]).length),C=C&&C!=E?"C":E}T>250&&(T=250),E=((p[g]||{}).DBF||{}).type,E=="C"&&p[g].DBF.len>T&&(T=p[g].DBF.len),C=="B"&&E=="N"&&(C="N",S[g]=p[g].DBF.dec,T=p[g].DBF.len),N[g]=C=="C"||E=="N"?T:a[C]||0,v+=N[g],k[g]=C}var B=u.next(32);for(B.write_shift(4,318902576),B.write_shift(4,m.length),B.write_shift(2,296+32*b),B.write_shift(2,v),g=0;g<4;++g)B.write_shift(4,0);for(B.write_shift(4,0|(+e[s$]||3)<<8),g=0,y=0;g<f.length;++g)if(f[g]!=null){var M=u.next(32),L=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,L,"sbcs"),M.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),M.write_shift(4,y),M.write_shift(1,N[g]||a[k[g]]||0),M.write_shift(1,S[g]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),y+=N[g]||a[k[g]]||0}var V=u.next(264);for(V.write_shift(4,13),g=0;g<65;++g)V.write_shift(4,0);for(g=0;g<m.length;++g){var ee=u.next(v);for(ee.write_shift(1,0),y=0;y<f.length;++y)if(f[y]!=null)switch(k[y]){case"L":ee.write_shift(1,m[g][y]==null?63:m[g][y]?84:70);break;case"B":ee.write_shift(8,m[g][y]||0,"f");break;case"N":var Q="0";for(typeof m[g][y]=="number"&&(Q=m[g][y].toFixed(S[y]||0)),b=0;b<N[y]-Q.length;++b)ee.write_shift(1,32);ee.write_shift(1,Q,"sbcs");break;case"D":m[g][y]?(ee.write_shift(4,("0000"+m[g][y].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(m[g][y].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+m[g][y].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var J=String(m[g][y]!=null?m[g][y]:"").slice(0,N[y]);for(ee.write_shift(1,J,"sbcs"),b=0;b<N[y]-J.length;++b)ee.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}}(),gie=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+fs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,m){var p=t[m];return typeof p=="number"?pM(p):p},n=function(f,m,p){var g=m.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return g==59?f:pM(g)};t["|"]=254;function s(f,m){switch(m.type){case"base64":return a(rc(f),m);case"binary":return a(f,m);case"buffer":return a(or&&Buffer.isBuffer(f)?f.toString("binary"):Fx(f),m);case"array":return a(Tk(f),m)}throw new Error("Unrecognized type "+m.type)}function a(f,m){var p=f.split(/[\n\r]+/),g=-1,y=-1,b=0,v=0,w=[],k=[],N=null,S={},C=[],E=[],T=[],R=0,B;for(+m.codepage>=0&&$g(+m.codepage);b!==p.length;++b){R=0;var M=p[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),L=M.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),V=L[0],ee;if(M.length>0)switch(V){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&k.push(M.slice(3).replace(/;;/g,";"));break;case"C":var Q=!1,J=!1,_=!1,H=!1,P=-1,K=-1;for(v=1;v<L.length;++v)switch(L[v].charAt(0)){case"A":break;case"X":y=parseInt(L[v].slice(1))-1,J=!0;break;case"Y":for(g=parseInt(L[v].slice(1))-1,J||(y=0),B=w.length;B<=g;++B)w[B]=[];break;case"K":ee=L[v].slice(1),ee.charAt(0)==='"'?ee=ee.slice(1,ee.length-1):ee==="TRUE"?ee=!0:ee==="FALSE"?ee=!1:isNaN(Ul(ee))?isNaN(Bg(ee).getDate())||(ee=Ks(ee)):(ee=Ul(ee),N!==null&&g$(N)&&(ee=b$(ee))),Q=!0;break;case"E":H=!0;var F=moe(L[v].slice(1),{r:g,c:y});w[g][y]=[w[g][y],F];break;case"S":_=!0,w[g][y]=[w[g][y],"S5S"];break;case"G":break;case"R":P=parseInt(L[v].slice(1))-1;break;case"C":K=parseInt(L[v].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}if(Q&&(w[g][y]&&w[g][y].length==2?w[g][y][0]=ee:w[g][y]=ee,N=null),_){if(H)throw new Error("SYLK shared formula cannot have own formula");var ne=P>-1&&w[P][K];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");w[g][y][1]=poe(ne[1],{r:g-P,c:y-K})}break;case"F":var z=0;for(v=1;v<L.length;++v)switch(L[v].charAt(0)){case"X":y=parseInt(L[v].slice(1))-1,++z;break;case"Y":for(g=parseInt(L[v].slice(1))-1,B=w.length;B<=g;++B)w[B]=[];break;case"M":R=parseInt(L[v].slice(1))/20;break;case"F":break;case"G":break;case"P":N=k[parseInt(L[v].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=L[v].slice(1).split(" "),B=parseInt(T[0],10);B<=parseInt(T[1],10);++B)R=parseInt(T[2],10),E[B-1]=R===0?{hidden:!0}:{wch:R},vT(E[B-1]);break;case"C":y=parseInt(L[v].slice(1))-1,E[y]||(E[y]={});break;case"R":g=parseInt(L[v].slice(1))-1,C[g]||(C[g]={}),R>0?(C[g].hpt=R,C[g].hpx=oF(R)):R===0&&(C[g].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}z<1&&(N=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+M)}}return C.length>0&&(S["!rows"]=C),E.length>0&&(S["!cols"]=E),m&&m.sheetRows&&(w=w.slice(0,m.sheetRows)),[w,S]}function i(f,m){var p=s(f,m),g=p[0],y=p[1],b=fp(g,m);return fs(y).forEach(function(v){b[v]=y[v]}),b}function l(f,m){return Ih(i(f,m),m)}function c(f,m,p,g){var y="C;Y"+(p+1)+";X"+(g+1)+";K";switch(f.t){case"n":y+=f.v||0,f.f&&!f.F&&(y+=";E"+wT(f.f,{r:p,c:g}));break;case"b":y+=f.v?"TRUE":"FALSE";break;case"e":y+=f.w||f.v;break;case"d":y+='"'+(f.w||f.v)+'"';break;case"s":y+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function d(f,m){m.forEach(function(p,g){var y="F;W"+(g+1)+" "+(g+1)+" ";p.hidden?y+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=db(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=ub(p.wpx)),typeof p.wch=="number"&&(y+=Math.round(p.wch))),y.charAt(y.length-1)!=" "&&f.push(y)})}function u(f,m){m.forEach(function(p,g){var y="F;";p.hidden?y+="M0;":p.hpt?y+="M"+20*p.hpt+";":p.hpx&&(y+="M"+20*hb(p.hpx)+";"),y.length>2&&f.push(y+"R"+(g+1))})}function h(f,m){var p=["ID;PWXL;N;E"],g=[],y=Hr(f["!ref"]),b,v=Array.isArray(f),w=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),f["!cols"]&&d(p,f["!cols"]),f["!rows"]&&u(p,f["!rows"]),p.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" "));for(var k=y.s.r;k<=y.e.r;++k)for(var N=y.s.c;N<=y.e.c;++N){var S=br({r:k,c:N});b=v?(f[k]||[])[N]:f[S],!(!b||b.v==null&&(!b.f||b.F))&&g.push(c(b,f,k,N))}return p.join(w)+w+g.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:i,from_sheet:h}}(),xie=function(){function t(a,i){switch(i.type){case"base64":return e(rc(a),i);case"binary":return e(a,i);case"buffer":return e(or&&Buffer.isBuffer(a)?a.toString("binary"):Fx(a),i);case"array":return e(Tk(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var l=a.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var f=l[u].trim().split(","),m=f[0],p=f[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+m){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Ul(p))?isNaN(Bg(p).getDate())?h[c][d]=p:h[c][d]=Ks(p):h[c][d]=Ul(p),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(a,i){return fp(t(a,i),i)}function n(a,i){return Ih(r(a,i),i)}var s=function(){var a=function(c,d,u,h,f){c.push(d),c.push(u+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},i=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Hr(c["!ref"]),h,f=Array.isArray(c);a(d,"TABLE",0,1,"sheetjs"),a(d,"VECTORS",0,u.e.r-u.s.r+1,""),a(d,"TUPLES",0,u.e.c-u.s.c+1,""),a(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){i(d,-1,0,"BOT");for(var p=u.s.c;p<=u.e.c;++p){var g=br({r:m,c:p});if(h=f?(c[m]||[])[p]:c[g],!h){i(d,1,0,"");continue}switch(h.t){case"n":var y=h.w;!y&&h.v!=null&&(y=h.v),y==null?h.f&&!h.F?i(d,1,0,"="+h.f):i(d,1,0,""):i(d,0,y,"V");break;case"b":i(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Od(h.z||on[14],wa(Ks(h.v)))),i(d,0,h.w,"V");break;default:i(d,1,0,"")}}}i(d,-1,0,"EOD");var b=`\r
`,v=d.join(b);return v}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),nF=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var m=h.split(`
`),p=-1,g=-1,y=0,b=[];y!==m.length;++y){var v=m[y].trim().split(":");if(v[0]==="cell"){var w=Vn(v[1]);if(b.length<=w.r)for(p=b.length;p<=w.r;++p)b[p]||(b[p]=[]);switch(p=w.r,g=w.c,v[2]){case"t":b[p][g]=t(v[3]);break;case"v":b[p][g]=+v[3];break;case"vtf":var k=v[v.length-1];case"vtc":switch(v[3]){case"nl":b[p][g]=!!+v[4];break;default:b[p][g]=+v[4];break}v[2]=="vtf"&&(b[p][g]=[b[p][g],k])}}}return f&&f.sheetRows&&(b=b.slice(0,f.sheetRows)),b}function n(h,f){return fp(r(h,f),f)}function s(h,f){return Ih(n(h,f),f)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var f=[],m=[],p,g="",y=Wa(h["!ref"]),b=Array.isArray(h),v=y.s.r;v<=y.e.r;++v)for(var w=y.s.c;w<=y.e.c;++w)if(g=br({r:v,c:w}),p=b?(h[v]||[])[w]:h[g],!(!p||p.v==null||p.t==="z")){switch(m=["cell",g,"t"],p.t){case"s":case"str":m.push(e(p.v));break;case"n":p.f?(m[2]="vtf",m[3]="n",m[4]=p.v,m[5]=e(p.f)):(m[2]="v",m[3]=p.v);break;case"b":m[2]="vt"+(p.f?"f":"c"),m[3]="nl",m[4]=p.v?"1":"0",m[5]=e(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var k=wa(Ks(p.v));m[2]="vtc",m[3]="nd",m[4]=""+k,m[5]=p.w||Od(p.z||on[14],k);break;case"e":continue}f.push(m.join(":"))}return f.push("sheet:c:"+(y.e.c-y.s.c+1)+":r:"+(y.e.r-y.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[a,i,l,i,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),yie=function(){function t(u,h,f,m,p){p.raw?h[f][m]=u:u===""||(u==="TRUE"?h[f][m]=!0:u==="FALSE"?h[f][m]=!1:isNaN(Ul(u))?isNaN(Bg(u).getDate())?h[f][m]=u:h[f][m]=Ks(u):h[f][m]=Ul(u))}function e(u,h){var f=h||{},m=[];if(!u||u.length===0)return m;for(var p=u.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var y=10,b=0,v=0;v<=g;++v)b=p[v].indexOf(" "),b==-1?b=p[v].length:b++,y=Math.max(y,b);for(v=0;v<=g;++v){m[v]=[];var w=0;for(t(p[v].slice(0,y).trim(),m,v,w,f),w=1;w<=(p[v].length-y)/10+1;++w)t(p[v].slice(y+(w-1)*10,y+w*10).trim(),m,v,w,f)}return f.sheetRows&&(m=m.slice(0,f.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var h={},f=!1,m=0,p=0;m<u.length;++m)(p=u.charCodeAt(m))==34?f=!f:!f&&p in r&&(h[p]=(h[p]||0)+1);p=[];for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&p.push([h[m],m]);if(!p.length){h=n;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&p.push([h[m],m])}return p.sort(function(g,y){return g[0]-y[0]||n[g[1]]-n[y[1]]}),r[p.pop()[1]]||44}function a(u,h){var f=h||{},m="",p=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=s(u.slice(0,1024)):f&&f.FS?m=f.FS:m=s(u.slice(0,1024));var y=0,b=0,v=0,w=0,k=0,N=m.charCodeAt(0),S=!1,C=0,E=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var T=f.dateNF!=null?Pse(f.dateNF):null;function R(){var B=u.slice(w,k),M={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)M.t="z";else if(f.raw)M.t="s",M.v=B;else if(B.trim().length===0)M.t="s",M.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(M.t="s",M.v=B.slice(2,-1).replace(/""/g,'"')):goe(B)?(M.t="n",M.f=B.slice(1)):(M.t="s",M.v=B);else if(B=="TRUE")M.t="b",M.v=!0;else if(B=="FALSE")M.t="b",M.v=!1;else if(!isNaN(v=Ul(B)))M.t="n",f.cellText!==!1&&(M.w=B),M.v=v;else if(!isNaN(Bg(B).getDate())||T&&B.match(T)){M.z=f.dateNF||on[14];var L=0;T&&B.match(T)&&(B=Ise(B,f.dateNF,B.match(T)||[]),L=1),f.cellDates?(M.t="d",M.v=Ks(B,L)):(M.t="n",M.v=wa(Ks(B,L))),f.cellText!==!1&&(M.w=Od(M.z,M.v instanceof Date?wa(M.v):M.v)),f.cellNF||delete M.z}else M.t="s",M.v=B;if(M.t=="z"||(f.dense?(p[y]||(p[y]=[]),p[y][b]=M):p[br({c:b,r:y})]=M),w=k+1,E=u.charCodeAt(w),g.e.c<b&&(g.e.c=b),g.e.r<y&&(g.e.r=y),C==N)++b;else if(b=0,++y,f.sheetRows&&f.sheetRows<=y)return!0}e:for(;k<u.length;++k)switch(C=u.charCodeAt(k)){case 34:E===34&&(S=!S);break;case N:case 10:case 13:if(!S&&R())break e;break}return k-w>0&&R(),p["!ref"]=Sn(g),p}function i(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?a(u,h):fp(e(u,h),h)}function l(u,h){var f="",m=h.type=="string"?[0,0,0,0]:Aue(u,h);switch(h.type){case"base64":f=rc(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof tb<"u"||(f=or&&Buffer.isBuffer(u)?u.toString("binary"):Fx(u));break;case"array":f=Tk(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return m[0]==239&&m[1]==187&&m[2]==191?f=G0(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=G0(f):h.type=="binary"&&typeof tb<"u",f.slice(0,19)=="socialcalc:version:"?nF.to_sheet(h.type=="string"?f:G0(f),h):i(f,h)}function c(u,h){return Ih(l(u,h),h)}function d(u){for(var h=[],f=Hr(u["!ref"]),m,p=Array.isArray(u),g=f.s.r;g<=f.e.r;++g){for(var y=[],b=f.s.c;b<=f.e.c;++b){var v=br({r:g,c:b});if(m=p?(u[g]||[])[b]:u[v],!m||m.v==null){y.push("          ");continue}for(var w=(m.w||(nc(m),m.w)||"").slice(0,10);w.length<10;)w+=" ";y.push(w+(b===0?" ":""))}h.push(y.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}(),qM=function(){function t(F,ne,z){if(F){Ma(F,F.l||0);for(var Z=z.Enum||P;F.l<F.length;){var oe=F.read_shift(2),ue=Z[oe]||Z[65535],_e=F.read_shift(2),we=F.l+_e,Y=ue.f&&ue.f(F,_e,z);if(F.l=we,ne(Y,ue,oe))return}}}function e(F,ne){switch(ne.type){case"base64":return r(qi(rc(F)),ne);case"binary":return r(qi(F),ne);case"buffer":case"array":return r(F,ne)}throw"Unsupported type "+ne.type}function r(F,ne){if(!F)return F;var z=ne||{},Z=z.dense?[]:{},oe="Sheet1",ue="",_e=0,we={},Y=[],le=[],ye={s:{r:0,c:0},e:{r:0,c:0}},Ve=z.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)z.Enum=P,t(F,function(je,ht,pt){switch(pt){case 0:z.vers=je,je>=4096&&(z.qpro=!0);break;case 6:ye=je;break;case 204:je&&(ue=je);break;case 222:ue=je;break;case 15:case 51:z.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:pt==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=z.dateNF||on[14],z.cellDates&&(je[1].t="d",je[1].v=b$(je[1].v))),z.qpro&&je[3]>_e&&(Z["!ref"]=Sn(ye),we[oe]=Z,Y.push(oe),Z=z.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},_e=je[3],oe=ue||"Sheet"+(_e+1),ue="");var re=z.dense?(Z[je[0].r]||[])[je[0].c]:Z[br(je[0])];if(re){re.t=je[1].t,re.v=je[1].v,je[1].z!=null&&(re.z=je[1].z),je[1].f!=null&&(re.f=je[1].f);break}z.dense?(Z[je[0].r]||(Z[je[0].r]=[]),Z[je[0].r][je[0].c]=je[1]):Z[br(je[0])]=je[1];break}},z);else if(F[2]==26||F[2]==14)z.Enum=K,F[2]==14&&(z.qpro=!0,F.l=0),t(F,function(je,ht,pt){switch(pt){case 204:oe=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>_e&&(Z["!ref"]=Sn(ye),we[oe]=Z,Y.push(oe),Z=z.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},_e=je[3],oe="Sheet"+(_e+1)),Ve>0&&je[0].r>=Ve)break;z.dense?(Z[je[0].r]||(Z[je[0].r]=[]),Z[je[0].r][je[0].c]=je[1]):Z[br(je[0])]=je[1],ye.e.c<je[0].c&&(ye.e.c=je[0].c),ye.e.r<je[0].r&&(ye.e.r=je[0].r);break;case 27:je[14e3]&&(le[je[14e3][0]]=je[14e3][1]);break;case 1537:le[je[0]]=je[1],je[0]==_e&&(oe=je[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(Z["!ref"]=Sn(ye),we[ue||oe]=Z,Y.push(ue||oe),!le.length)return{SheetNames:Y,Sheets:we};for(var Be={},ut=[],Te=0;Te<le.length;++Te)we[Y[Te]]?(ut.push(le[Te]||Y[Te]),Be[le[Te]]=we[le[Te]]||we[Y[Te]]):(ut.push(le[Te]),Be[le[Te]]={"!ref":"A1"});return{SheetNames:ut,Sheets:Be}}function n(F,ne){var z=ne||{};if(+z.codepage>=0&&$g(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=ma(),oe=Hr(F["!ref"]),ue=Array.isArray(F),_e=[];We(Z,0,a(1030)),We(Z,6,c(oe));for(var we=Math.min(oe.e.r,8191),Y=oe.s.r;Y<=we;++Y)for(var le=ds(Y),ye=oe.s.c;ye<=oe.e.c;++ye){Y===oe.s.r&&(_e[ye]=_s(ye));var Ve=_e[ye]+le,Be=ue?(F[Y]||[])[ye]:F[Ve];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?We(Z,13,m(Y,ye,Be.v)):We(Z,14,g(Y,ye,Be.v));else{var ut=nc(Be);We(Z,15,h(Y,ye,ut.slice(0,239)))}}return We(Z,1),Z.end()}function s(F,ne){var z=ne||{};if(+z.codepage>=0&&$g(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=ma();We(Z,0,i(F));for(var oe=0,ue=0;oe<F.SheetNames.length;++oe)(F.Sheets[F.SheetNames[oe]]||{})["!ref"]&&We(Z,27,H(F.SheetNames[oe],ue++));var _e=0;for(oe=0;oe<F.SheetNames.length;++oe){var we=F.Sheets[F.SheetNames[oe]];if(!(!we||!we["!ref"])){for(var Y=Hr(we["!ref"]),le=Array.isArray(we),ye=[],Ve=Math.min(Y.e.r,8191),Be=Y.s.r;Be<=Ve;++Be)for(var ut=ds(Be),Te=Y.s.c;Te<=Y.e.c;++Te){Be===Y.s.r&&(ye[Te]=_s(Te));var je=ye[Te]+ut,ht=le?(we[Be]||[])[Te]:we[je];if(!(!ht||ht.t=="z"))if(ht.t=="n")We(Z,23,R(Be,Te,_e,ht.v));else{var pt=nc(ht);We(Z,22,C(Be,Te,_e,pt.slice(0,239)))}}++_e}}return We(Z,1),Z.end()}function a(F){var ne=Se(2);return ne.write_shift(2,F),ne}function i(F){var ne=Se(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var z=0,Z=0,oe=0,ue=0;ue<F.SheetNames.length;++ue){var _e=F.SheetNames[ue],we=F.Sheets[_e];if(!(!we||!we["!ref"])){++oe;var Y=Wa(we["!ref"]);z<Y.e.r&&(z=Y.e.r),Z<Y.e.c&&(Z=Y.e.c)}}return z>8191&&(z=8191),ne.write_shift(2,z),ne.write_shift(1,oe),ne.write_shift(1,Z),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function l(F,ne,z){var Z={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&z.qpro?(Z.s.c=F.read_shift(1),F.l++,Z.s.r=F.read_shift(2),Z.e.c=F.read_shift(1),F.l++,Z.e.r=F.read_shift(2),Z):(Z.s.c=F.read_shift(2),Z.s.r=F.read_shift(2),ne==12&&z.qpro&&(F.l+=2),Z.e.c=F.read_shift(2),Z.e.r=F.read_shift(2),ne==12&&z.qpro&&(F.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function c(F){var ne=Se(8);return ne.write_shift(2,F.s.c),ne.write_shift(2,F.s.r),ne.write_shift(2,F.e.c),ne.write_shift(2,F.e.r),ne}function d(F,ne,z){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(Z[0].c=F.read_shift(1),Z[3]=F.read_shift(1),Z[0].r=F.read_shift(2),F.l+=2):(Z[2]=F.read_shift(1),Z[0].c=F.read_shift(2),Z[0].r=F.read_shift(2)),Z}function u(F,ne,z){var Z=F.l+ne,oe=d(F,ne,z);if(oe[1].t="s",z.vers==20768){F.l++;var ue=F.read_shift(1);return oe[1].v=F.read_shift(ue,"utf8"),oe}return z.qpro&&F.l++,oe[1].v=F.read_shift(Z-F.l,"cstr"),oe}function h(F,ne,z){var Z=Se(7+z.length);Z.write_shift(1,255),Z.write_shift(2,ne),Z.write_shift(2,F),Z.write_shift(1,39);for(var oe=0;oe<Z.length;++oe){var ue=z.charCodeAt(oe);Z.write_shift(1,ue>=128?95:ue)}return Z.write_shift(1,0),Z}function f(F,ne,z){var Z=d(F,ne,z);return Z[1].v=F.read_shift(2,"i"),Z}function m(F,ne,z){var Z=Se(7);return Z.write_shift(1,255),Z.write_shift(2,ne),Z.write_shift(2,F),Z.write_shift(2,z,"i"),Z}function p(F,ne,z){var Z=d(F,ne,z);return Z[1].v=F.read_shift(8,"f"),Z}function g(F,ne,z){var Z=Se(13);return Z.write_shift(1,255),Z.write_shift(2,ne),Z.write_shift(2,F),Z.write_shift(8,z,"f"),Z}function y(F,ne,z){var Z=F.l+ne,oe=d(F,ne,z);if(oe[1].v=F.read_shift(8,"f"),z.qpro)F.l=Z;else{var ue=F.read_shift(2);k(F.slice(F.l,F.l+ue),oe),F.l+=ue}return oe}function b(F,ne,z){var Z=ne&32768;return ne&=-32769,ne=(Z?F:0)+(ne>=8192?ne-16384:ne),(Z?"":"$")+(z?_s(ne):ds(ne))}var v={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(F,ne){Ma(F,0);for(var z=[],Z=0,oe="",ue="",_e="",we="";F.l<F.length;){var Y=F[F.l++];switch(Y){case 0:z.push(F.read_shift(8,"f"));break;case 1:ue=b(ne[0].c,F.read_shift(2),!0),oe=b(ne[0].r,F.read_shift(2),!1),z.push(ue+oe);break;case 2:{var le=b(ne[0].c,F.read_shift(2),!0),ye=b(ne[0].r,F.read_shift(2),!1);ue=b(ne[0].c,F.read_shift(2),!0),oe=b(ne[0].r,F.read_shift(2),!1),z.push(le+ye+":"+ue+oe)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(F.read_shift(2));break;case 6:{for(var Ve="";Y=F[F.l++];)Ve+=String.fromCharCode(Y);z.push('"'+Ve.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:we=z.pop(),_e=z.pop(),z.push(["AND","OR"][Y-20]+"("+_e+","+we+")");break;default:if(Y<32&&w[Y])we=z.pop(),_e=z.pop(),z.push(_e+w[Y]+we);else if(v[Y]){if(Z=v[Y][1],Z==69&&(Z=F[F.l++]),Z>z.length){console.error("WK1 bad formula parse 0x"+Y.toString(16)+":|"+z.join("|")+"|");return}var Be=z.slice(-Z);z.length-=Z,z.push(v[Y][0]+"("+Be.join(",")+")")}else return Y<=7?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=24?console.error("WK1 unsupported op "+Y.toString(16)):Y<=30?console.error("WK1 invalid opcode "+Y.toString(16)):Y<=115?console.error("WK1 unsupported function opcode "+Y.toString(16)):console.error("WK1 unrecognized opcode "+Y.toString(16))}}z.length==1?ne[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function N(F){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=F.read_shift(2),ne[3]=F[F.l++],ne[0].c=F[F.l++],ne}function S(F,ne){var z=N(F);return z[1].t="s",z[1].v=F.read_shift(ne-4,"cstr"),z}function C(F,ne,z,Z){var oe=Se(6+Z.length);oe.write_shift(2,F),oe.write_shift(1,z),oe.write_shift(1,ne),oe.write_shift(1,39);for(var ue=0;ue<Z.length;++ue){var _e=Z.charCodeAt(ue);oe.write_shift(1,_e>=128?95:_e)}return oe.write_shift(1,0),oe}function E(F,ne){var z=N(F);z[1].v=F.read_shift(2);var Z=z[1].v>>1;if(z[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return z[1].v=Z,z}function T(F,ne){var z=N(F),Z=F.read_shift(4),oe=F.read_shift(4),ue=F.read_shift(2);if(ue==65535)return Z===0&&oe===3221225472?(z[1].t="e",z[1].v=15):Z===0&&oe===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var _e=ue&32768;return ue=(ue&32767)-16446,z[1].v=(1-_e*2)*(oe*Math.pow(2,ue+32)+Z*Math.pow(2,ue)),z}function R(F,ne,z,Z){var oe=Se(14);if(oe.write_shift(2,F),oe.write_shift(1,z),oe.write_shift(1,ne),Z==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var ue=0,_e=0,we=0,Y=0;return Z<0&&(ue=1,Z=-Z),_e=Math.log2(Z)|0,Z/=Math.pow(2,_e-31),Y=Z>>>0,Y&2147483648||(Z/=2,++_e,Y=Z>>>0),Z-=Y,Y|=2147483648,Y>>>=0,Z*=Math.pow(2,32),we=Z>>>0,oe.write_shift(4,we),oe.write_shift(4,Y),_e+=16383+(ue?32768:0),oe.write_shift(2,_e),oe}function B(F,ne){var z=T(F);return F.l+=ne-14,z}function M(F,ne){var z=N(F),Z=F.read_shift(4);return z[1].v=Z>>6,z}function L(F,ne){var z=N(F),Z=F.read_shift(8,"f");return z[1].v=Z,z}function V(F,ne){var z=L(F);return F.l+=ne-10,z}function ee(F,ne){return F[F.l+ne-1]==0?F.read_shift(ne,"cstr"):""}function Q(F,ne){var z=F[F.l++];z>ne-1&&(z=ne-1);for(var Z="";Z.length<z;)Z+=String.fromCharCode(F[F.l++]);return Z}function J(F,ne,z){if(!(!z.qpro||ne<21)){var Z=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var oe=F.read_shift(ne-21,"cstr");return[Z,oe]}}function _(F,ne){for(var z={},Z=F.l+ne;F.l<Z;){var oe=F.read_shift(2);if(oe==14e3){for(z[oe]=[0,""],z[oe][0]=F.read_shift(2);F[F.l];)z[oe][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return z}function H(F,ne){var z=Se(5+F.length);z.write_shift(2,14e3),z.write_shift(2,ne);for(var Z=0;Z<F.length;++Z){var oe=F.charCodeAt(Z);z[z.l++]=oe>127?95:oe}return z[z.l++]=0,z}var P={0:{n:"BOF",f:J$},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:Q},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:_},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:V},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}(),vie=/^\s|\s$|[\t\n\r]/;function sF(t,e){if(!e.bookSST)return"";var r=[jn];r[r.length]=He("sst",null,{xmlns:hp[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(vie)&&(a+=' xml:space="preserve"'),a+=">"+xr(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function bie(t){return[t.read_shift(4),t.read_shift(4)]}function wie(t,e){return e||(e=Se(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var kie=hae;function Cie(t){var e=ma();Ae(e,159,wie(t));for(var r=0;r<t.length;++r)Ae(e,19,kie(t[r]));return Ae(e,160),e.end()}function Nie(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function aF(t){var e=0,r,n=Nie(t),s=n.length+1,a,i,l,c,d;for(r=hh(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],l=e&16384?1:0,c=e<<1&32767,d=l|c,e=d^i;return e^52811}var Sie=function(){function t(s,a){switch(a.type){case"base64":return e(rc(s),a);case"binary":return e(s,a);case"buffer":return e(or&&Buffer.isBuffer(s)?s.toString("binary"):Fx(s),a);case"array":return e(Tk(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},l=i.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,m=0,p,g=-1;p=f.exec(u);){switch(p[0]){case"\\cell":var y=u.slice(m,f.lastIndex-p[0].length);if(y[0]==" "&&(y=y.slice(1)),++g,y.length){var b={v:y,t:"s"};Array.isArray(l)?l[h][g]=b:l[br({r:h,c:g})]=b}break}m=f.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=Sn(d),l}function r(s,a){return Ih(t(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Hr(s["!ref"]),l,c=Array.isArray(s),d=i.s.r;d<=i.e.r;++d){a.push("\\trowd\\trautofit1");for(var u=i.s.c;u<=i.e.c;++u)a.push("\\cellx"+(u+1));for(a.push("\\pard\\intbl"),u=i.s.c;u<=i.e.c;++u){var h=br({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(a.push(" "+(l.w||(nc(l),l.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function GM(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var Eie=6,Vl=Eie;function db(t){return Math.floor((t+Math.round(128/Vl)/256)*Vl)}function ub(t){return Math.floor((t-5)/Vl*100+.5)/100}function XE(t){return Math.round((t*Vl+5)/Vl*256)/256}function vT(t){t.width?(t.wpx=db(t.width),t.wch=ub(t.wpx),t.MDW=Vl):t.wpx?(t.wch=ub(t.wpx),t.width=XE(t.wch),t.MDW=Vl):typeof t.wch=="number"&&(t.width=XE(t.wch),t.wpx=db(t.width),t.MDW=Vl),t.customWidth&&delete t.customWidth}var jie=96,iF=jie;function hb(t){return t*96/iF}function oF(t){return t*iF/96}function Tie(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=He("numFmt",null,{numFmtId:n,formatCode:xr(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=He("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function _ie(t){var e=[];return e[e.length]=He("cellXfs",null),t.forEach(function(r){e[e.length]=He("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=He("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function lF(t,e){var r=[jn,He("styleSheet",null,{xmlns:hp[0],"xmlns:vt":zn.vt})],n;return t.SSF&&(n=Tie(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=_ie(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Aie(t,e){var r=t.read_shift(2),n=As(t);return[r,n]}function Mie(t,e,r){r||(r=Se(6+4*e.length)),r.write_shift(2,t),Hn(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Oie(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=vae(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=yae(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=As(t),n}function Rie(t,e){e||(e=Se(25+4*32)),e.write_shift(2,t.sz*20),bae(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),lb(t.color,e);var n=0;return n=2,e.write_shift(1,n),Hn(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Pie=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],WC,Iie=Ko;function KM(t,e){e||(e=Se(4*3+8*7+16*1)),WC||(WC=oT(Pie));var r=WC[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(lb({auto:1},e),lb({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Die(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function cF(t,e,r){r||(r=Se(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function i0(t,e){return e||(e=Se(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Lie=Ko;function $ie(t,e){return e||(e=Se(51)),e.write_shift(1,0),i0(null,e),i0(null,e),i0(null,e),i0(null,e),i0(null,e),e.length>e.l?e.slice(0,e.l):e}function Fie(t,e){return e||(e=Se(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),ob(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Bie(t,e,r){var n=Se(2052);return n.write_shift(4,t),ob(e,n),ob(r,n),n.length>n.l?n.slice(0,n.l):n}function zie(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(Ae(t,615,no(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Ae(t,44,Mie(s,e[s]))}),Ae(t,616))}}function Uie(t){var e=1;Ae(t,611,no(e)),Ae(t,43,Rie({sz:12,color:{theme:1},name:"Calibri",family:2})),Ae(t,612)}function Vie(t){var e=2;Ae(t,603,no(e)),Ae(t,45,KM({patternType:"none"})),Ae(t,45,KM({patternType:"gray125"})),Ae(t,604)}function Hie(t){var e=1;Ae(t,613,no(e)),Ae(t,46,$ie()),Ae(t,614)}function Wie(t){var e=1;Ae(t,626,no(e)),Ae(t,47,cF({numFmtId:0},65535)),Ae(t,627)}function qie(t,e){Ae(t,617,no(e.length)),e.forEach(function(r){Ae(t,47,cF(r,0))}),Ae(t,618)}function Gie(t){var e=1;Ae(t,619,no(e)),Ae(t,48,Fie({xfId:0,name:"Normal"})),Ae(t,620)}function Kie(t){var e=0;Ae(t,505,no(e)),Ae(t,506)}function Zie(t){var e=0;Ae(t,508,Bie(e,"TableStyleMedium9","PivotStyleMedium4")),Ae(t,509)}function Yie(t,e){var r=ma();return Ae(r,278),zie(r,t.SSF),Uie(r),Vie(r),Hie(r),Wie(r),qie(r,e.cellXfs),Gie(r),Kie(r),Zie(r),Ae(r,279),r.end()}function dF(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[jn];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xie(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:As(t)}}function Jie(t){var e=Se(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Hn(t.name,e),e.slice(0,e.l)}function Qie(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function eoe(t){var e=Se(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function toe(t,e){var r=Se(8+2*e.length);return r.write_shift(4,t),Hn(e,r),r.slice(0,r.l)}function roe(t){return t.l+=4,t.read_shift(4)!=0}function noe(t,e){var r=Se(8);return r.write_shift(4,t),r.write_shift(4,1),r}function soe(){var t=ma();return Ae(t,332),Ae(t,334,no(1)),Ae(t,335,Jie({name:"XLDAPR",version:12e4,flags:3496657072})),Ae(t,336),Ae(t,339,toe(1,"XLDAPR")),Ae(t,52),Ae(t,35,no(514)),Ae(t,4096,no(0)),Ae(t,4097,di(1)),Ae(t,36),Ae(t,53),Ae(t,340),Ae(t,337,noe(1)),Ae(t,51,eoe([[1,0]])),Ae(t,338),Ae(t,333),t.end()}function uF(){var t=[jn];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function aoe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=br(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Df=1024;function hF(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[He("xml",null,{"xmlns:v":Oa.v,"xmlns:o":Oa.o,"xmlns:x":Oa.x,"xmlns:mv":Oa.mv}).replace(/\/>/,">"),He("o:shapelayout",He("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),He("v:shapetype",[He("v:stroke",null,{joinstyle:"miter"}),He("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Df<t*1e3;)Df+=1e3;return e.forEach(function(a){var i=Vn(a[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?He("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=He("v:fill",c,l),u={on:"t",obscured:"t"};++Df,s=s.concat(["<v:shape"+Ug({id:"_x0000_s"+Df,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,He("v:shadow",null,u),He("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",is("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),is("x:AutoFill","False"),is("x:Row",String(i.r)),is("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function fF(t){var e=[jn,He("comments",null,{xmlns:hp[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var a=xr(s.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(xr(c.a))),a.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(is("t",xr(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,l=1;l<a.length;++l)i+=`Reply:
    `+a[l]+`
`;e.push(is("t",xr(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function ioe(t,e,r){var n=[jn,He("ThreadedComments",null,{xmlns:zn.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?a=c.id:c.parentId=a,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(He("threadedComment",is("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function ooe(t){var e=[jn,He("personList",null,{xmlns:zn.TCMNT,"xmlns:x":hp[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(He("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function loe(t){var e={};e.iauthor=t.read_shift(4);var r=Fh(t);return e.rfx=r.s,e.ref=br(r.s),t.l+=16,e}function coe(t,e){return e==null&&(e=Se(36)),e.write_shift(4,t[1].iauthor),mp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var doe=As;function uoe(t){return Hn(t.slice(0,54))}function hoe(t){var e=ma(),r=[];return Ae(e,628),Ae(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ae(e,632,uoe(s.a)))})}),Ae(e,631),Ae(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Vn(n[0]),e:Vn(n[0])};Ae(e,635,coe([a,s])),s.t&&s.t.length>0&&Ae(e,637,mae(s)),Ae(e,636),delete s.iauthor})}),Ae(e,634),Ae(e,629),e.end()}function foe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&wr.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var mF=["xlsb","xlsm","xlam","biff8","xla"],moe=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,a,i){var l=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var d=a.length>0?parseInt(a,10)|0:0,u=i.length>0?parseInt(i,10)|0:0;return l?u+=e.c:--u,c?d+=e.r:--d,s+(l?"":"$")+_s(u)+(c?"":"$")+ds(d)}return function(s,a){return e=a,s.replace(t,r)}}(),bT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wT=function(){return function(e,r){return e.replace(bT,function(n,s,a,i,l,c){var d=mT(i)-(a?0:r.c),u=fT(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",f=d==0?"":a?d+1:"["+d+"]";return s+"R"+h+"C"+f})}}();function poe(t,e){return t.replace(bT,function(r,n,s,a,i,l){return n+(s=="$"?s+a:_s(mT(a)+e.c))+(i=="$"?i+l:ds(fT(l)+e.r))})}function goe(t){return t.length!=1}function gn(t){t.l+=1}function Rd(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function pF(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return gF(t);r.biff==12&&(n=4)}var s=t.read_shift(n),a=t.read_shift(n),i=Rd(t),l=Rd(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function gF(t){var e=Rd(t),r=Rd(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function xoe(t,e,r){if(r.biff<8)return gF(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),a=Rd(t),i=Rd(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function xF(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return yoe(t);var n=t.read_shift(r&&r.biff==12?4:2),s=Rd(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function yoe(t){var e=Rd(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function voe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function boe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return woe(t);var s=t.read_shift(n>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,l=(a&32768)>>15;if(a&=16383,l==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:l}}function woe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function koe(t,e,r){var n=(t[t.l++]&96)>>5,s=pF(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Coe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=pF(t,a,r);return[n,s,i]}function Noe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Soe(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,s]}function Eoe(t,e,r){var n=(t[t.l++]&96)>>5,s=xoe(t,e-1,r);return[n,s]}function joe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function ZM(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function Toe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function _oe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Aoe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Moe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Ooe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function yF(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function Roe(t){return t.read_shift(2),yF(t)}function Poe(t){return t.read_shift(2),yF(t)}function Ioe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=xF(t,0,r);return[n,s]}function Doe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=boe(t,0,r);return[n,s]}function Loe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=xF(t,0,r);return[n,s,a]}function $oe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[$le[s],wF[s],n]}function Foe(t,e,r){var n=t[t.l++],s=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Boe(t);return[s,(a[0]===0?wF:Lle)[a[1]]]}function Boe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function zoe(t,e,r){t.l+=r&&r.biff==2?3:4}function Uoe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Voe(t){return t.l++,Ux[t.read_shift(1)]}function Hoe(t){return t.l++,t.read_shift(2)}function Woe(t){return t.l++,t.read_shift(1)!==0}function qoe(t){return t.l++,pp(t)}function Goe(t,e,r){return t.l++,eF(t,e-1,r)}function Koe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Lae(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Ux[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=pp(t);break;case 2:r[1]=zae(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Zoe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?Fh:Hae)(t));return s}function Yoe(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var l=0;l!=s;++l)i[a][l]=Koe(t,r.biff);return i}function Xoe(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function Joe(t,e,r){if(r.biff==5)return Qoe(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[n,s,a]}function Qoe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function ele(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function tle(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function rle(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function nle(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,s]}var sle=Ko,ale=Ko,ile=Ko;function Vx(t,e,r){return t.l+=2,[voe(t)]}function kT(t){return t.l+=6,[]}var ole=Vx,lle=kT,cle=kT,dle=Vx;function vF(t){return t.l+=2,[J$(t),t.read_shift(2)&1]}var ule=Vx,hle=vF,fle=kT,mle=Vx,ple=Vx,gle=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function xle(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=gle[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:s,C:a}}function yle(t){return t.l+=2,[t.read_shift(4)]}function vle(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function ble(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function wle(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function kle(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function Cle(t){return t.l+=4,[0,0]}var YM={1:{n:"PtgExp",f:Uoe},2:{n:"PtgTbl",f:ile},3:{n:"PtgAdd",f:gn},4:{n:"PtgSub",f:gn},5:{n:"PtgMul",f:gn},6:{n:"PtgDiv",f:gn},7:{n:"PtgPower",f:gn},8:{n:"PtgConcat",f:gn},9:{n:"PtgLt",f:gn},10:{n:"PtgLe",f:gn},11:{n:"PtgEq",f:gn},12:{n:"PtgGe",f:gn},13:{n:"PtgGt",f:gn},14:{n:"PtgNe",f:gn},15:{n:"PtgIsect",f:gn},16:{n:"PtgUnion",f:gn},17:{n:"PtgRange",f:gn},18:{n:"PtgUplus",f:gn},19:{n:"PtgUminus",f:gn},20:{n:"PtgPercent",f:gn},21:{n:"PtgParen",f:gn},22:{n:"PtgMissArg",f:gn},23:{n:"PtgStr",f:Goe},26:{n:"PtgSheet",f:vle},27:{n:"PtgEndSheet",f:ble},28:{n:"PtgErr",f:Voe},29:{n:"PtgBool",f:Woe},30:{n:"PtgInt",f:Hoe},31:{n:"PtgNum",f:qoe},32:{n:"PtgArray",f:joe},33:{n:"PtgFunc",f:$oe},34:{n:"PtgFuncVar",f:Foe},35:{n:"PtgName",f:Xoe},36:{n:"PtgRef",f:Ioe},37:{n:"PtgArea",f:koe},38:{n:"PtgMemArea",f:ele},39:{n:"PtgMemErr",f:sle},40:{n:"PtgMemNoMem",f:ale},41:{n:"PtgMemFunc",f:tle},42:{n:"PtgRefErr",f:rle},43:{n:"PtgAreaErr",f:Noe},44:{n:"PtgRefN",f:Doe},45:{n:"PtgAreaN",f:Eoe},46:{n:"PtgMemAreaN",f:wle},47:{n:"PtgMemNoMemN",f:kle},57:{n:"PtgNameX",f:Joe},58:{n:"PtgRef3d",f:Loe},59:{n:"PtgArea3d",f:Coe},60:{n:"PtgRefErr3d",f:nle},61:{n:"PtgAreaErr3d",f:Soe},255:{}},Nle={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Sle={1:{n:"PtgElfLel",f:vF},2:{n:"PtgElfRw",f:mle},3:{n:"PtgElfCol",f:ole},6:{n:"PtgElfRwV",f:ple},7:{n:"PtgElfColV",f:dle},10:{n:"PtgElfRadical",f:ule},11:{n:"PtgElfRadicalS",f:fle},13:{n:"PtgElfColS",f:lle},15:{n:"PtgElfColSV",f:cle},16:{n:"PtgElfRadicalLel",f:hle},25:{n:"PtgList",f:xle},29:{n:"PtgSxName",f:yle},255:{}},Ele={0:{n:"PtgAttrNoop",f:Cle},1:{n:"PtgAttrSemi",f:Ooe},2:{n:"PtgAttrIf",f:Aoe},4:{n:"PtgAttrChoose",f:Toe},8:{n:"PtgAttrGoto",f:_oe},16:{n:"PtgAttrSum",f:zoe},32:{n:"PtgAttrBaxcel",f:ZM},33:{n:"PtgAttrBaxcel",f:ZM},64:{n:"PtgAttrSpace",f:Roe},65:{n:"PtgAttrSpaceSemi",f:Poe},128:{n:"PtgAttrIfError",f:Moe},255:{}};function jle(t,e,r,n){if(n.biff<8)return Ko(t,e);for(var s=t.l+e,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Yoe(t,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Zoe(t,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=s-t.l,e!==0&&a.push(Ko(t,e)),a}function Tle(t,e,r){for(var n=t.l+e,s,a,i=[];n!=t.l;)e=n-t.l,a=t[t.l],s=YM[a]||YM[Nle[a]],(a===24||a===25)&&(s=(a===24?Sle:Ele)[t[t.l+1]]),!s||!s.f?Ko(t,e):i.push([s.n,s.f(t,e,r)]);return i}function _le(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var Ale={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Mle(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function bF(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function XM(t,e,r){var n=bF(t,e,r);return n=="#REF"?n:Mle(n,r)}function Dm(t,e,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},l=[],c,d,u,h=0,f=0,m,p="";if(!t[0]||!t[0][0])return"";for(var g=-1,y="",b=0,v=t[0].length;b<v;++b){var w=t[0][b];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(t[0][g][1][0]){case 0:y=rn(" ",t[0][g][1][1]);break;case 1:y=rn("\r",t[0][g][1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}d=d+y,g=-1}l.push(d+Ale[w[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Z0(w[1][1],i,s),l.push(Y0(u,a));break;case"PtgRefN":u=r?Z0(w[1][1],r,s):w[1][1],l.push(Y0(u,a));break;case"PtgRef3d":h=w[1][1],u=Z0(w[1][2],i,s),p=XM(n,h,s),l.push(p+"!"+Y0(u,a));break;case"PtgFunc":case"PtgFuncVar":var k=w[1][0],N=w[1][1];k||(k=0),k&=127;var S=k==0?[]:l.slice(-k);l.length-=k,N==="User"&&(N=S.shift()),l.push(N+"("+S.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":m=IM(w[1][1],r?{s:r}:i,s),l.push(VC(m,s));break;case"PtgArea":m=IM(w[1][1],i,s),l.push(VC(m,s));break;case"PtgArea3d":h=w[1][1],m=w[1][2],p=XM(n,h,s),l.push(p+"!"+VC(m,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=w[1][2];var C=(n.names||[])[f-1]||(n[0]||[])[f],E=C?C.Name:"SH33TJSNAME"+String(f);E&&E.slice(0,6)=="_xlfn."&&!s.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var T=w[1][1];f=w[1][2];var R;if(s.biff<=5)T<0&&(T=-T),n[T]&&(R=n[T][f]);else{var B="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][f]&&n[T][f].itab>0&&(B=n.SheetNames[n[T][f].itab-1]+"!"):B=n.SheetNames[f-1]+"!"),n[T]&&n[T][f])B+=n[T][f].Name;else if(n[0]&&n[0][f])B+=n[0][f].Name;else{var M=(bF(n,T,s)||"").split(";;");M[f-1]?B=M[f-1]:B+="SH33TJSERRX"}l.push(B);break}R||(R={Name:"SH33TJSERRY"}),l.push(R.Name);break;case"PtgParen":var L="(",V=")";if(g>=0){switch(y="",t[0][g][1][0]){case 2:L=rn(" ",t[0][g][1][1])+L;break;case 3:L=rn("\r",t[0][g][1][1])+L;break;case 4:V=rn(" ",t[0][g][1][1])+V;break;case 5:V=rn("\r",t[0][g][1][1])+V;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}l.push(L+l.pop()+V);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:w[1][1],r:w[1][0]};var ee={c:r.c,r:r.r};if(n.sharedf[br(u)]){var Q=n.sharedf[br(u)];l.push(Dm(Q,i,ee,n,s))}else{var J=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(Dm(d[1],i,ee,n,s)),J=!0;break}J||l.push(w[1])}break;case"PtgArray":l.push("{"+_le(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var _=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&_.indexOf(t[0][b][0])==-1){w=t[0][g];var H=!0;switch(w[1][0]){case 4:H=!1;case 0:y=rn(" ",w[1][1]);break;case 5:H=!1;case 1:y=rn("\r",w[1][1]);break;default:if(y="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((H?y:"")+l.pop()+(H?"":y)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Ole(t){if(t==null){var e=Se(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return fh(t);return fh(0)}function Rle(t,e,r,n,s){var a=mh(e,r,s),i=Ole(t.v),l=Se(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=Se(t.bf.length),u=0;u<t.bf.length;++u)d[u]=t.bf[u];var h=as([a,i,l,d]);return h}function _k(t,e,r){var n=t.read_shift(4),s=Tle(t,n,r),a=t.read_shift(4),i=a>0?jle(t,a,s,r):null;return[s,i]}var Ple=_k,Ak=_k,Ile=_k,Dle=_k,Lle={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},wF={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},$le={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Fle(t){var e="of:="+t.replace(bT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Ble(t){return t.replace(/\./,"!")}var X0=typeof Map<"u";function CT(t,e,r){var n=0,s=t.length;if(r){if(X0?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=X0?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(X0?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function Mk(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Vl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=ub(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=XE(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function kF(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Qd(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){x$(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===n)return s;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function zle(t,e,r){if(t&&t["!ref"]){var n=Hr(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Ule(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Sn(t[r])+'"/>';return e+"</mergeCells>"}function Vle(t,e,r,n,s){var a=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,i.codeName=zg(xr(c))}if(t&&t["!outline"]){var d={summaryBelow:1,summaryRight:1};t["!outline"].above&&(d.summaryBelow=0),t["!outline"].left&&(d.summaryRight=0),l=(l||"")+He("outlinePr",null,d)}!a&&!l||(s[s.length]=He("sheetPr",l,i))}var Hle=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Wle=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function qle(t){var e={sheet:1};return Hle.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Wle.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=aF(t.password).toString(16).toUpperCase()),He("sheetProtection",null,e)}function Gle(t){return kF(t),He("pageMargins",null,t)}function Kle(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=He("col",null,Mk(s,n)));return r[r.length]="</cols>",r.join("")}function Zle(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Sn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Wa(s);i.s.r==i.e.r&&(i.e.r=Wa(e["!ref"]).e.r,s=Sn(i));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),He("autoFilter",null,{ref:s})}function Yle(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),He("sheetViews",He("sheetView",null,s),{})}function Xle(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=Ux[t.v];break;case"d":n&&n.cellDates?s=Ks(t.v,-1).toISOString():(t=ka(t),t.t="n",s=""+(t.v=wa(Ks(t.v)))),typeof t.z>"u"&&(t.z=on[14]);break;default:s=t.v;break}var l=is("v",xr(s)),c={r:e},d=Qd(n.cellXfs,t,n);switch(d!==0&&(c.s=d),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=is("v",""+CT(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=He("f",xr(t.f),u)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),He("c",l,c)}function Jle(t,e,r,n){var s=[],a=[],i=Hr(t["!ref"]),l="",c,d="",u=[],h=0,f=0,m=t["!rows"],p=Array.isArray(t),g={r:d},y,b=-1;for(f=i.s.c;f<=i.e.c;++f)u[f]=_s(f);for(h=i.s.r;h<=i.e.r;++h){for(a=[],d=ds(h),f=i.s.c;f<=i.e.c;++f){c=u[f]+d;var v=p?(t[h]||[])[f]:t[c];v!==void 0&&(l=Xle(v,c,t,e))!=null&&a.push(l)}(a.length>0||m&&m[h])&&(g={r:d},m&&m[h]&&(y=m[h],y.hidden&&(g.hidden=1),b=-1,y.hpx?b=hb(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(g.ht=b,g.customHeight=1),y.level&&(g.outlineLevel=y.level)),s[s.length]=He("row",a.join(""),g))}if(m)for(;h<m.length;++h)m&&m[h]&&(g={r:h+1},y=m[h],y.hidden&&(g.hidden=1),b=-1,y.hpx?b=hb(y.hpx):y.hpt&&(b=y.hpt),b>-1&&(g.ht=b,g.customHeight=1),y.level&&(g.outlineLevel=y.level),s[s.length]=He("row","",g));return s.join("")}function CF(t,e,r,n){var s=[jn,He("worksheet",null,{xmlns:hp[0],"xmlns:r":zn.r})],a=r.SheetNames[t],i=0,l="",c=r.Sheets[a];c==null&&(c={});var d=c["!ref"]||"A1",u=Hr(d);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=Sn(u)}n||(n={}),c["!comments"]=[];var h=[];Vle(c,r,t,e,s),s[s.length]=He("dimension",null,{ref:d}),s[s.length]=Yle(c,e,t,r),e.sheetFormat&&(s[s.length]=He("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Kle(c,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Jle(c,e),l.length>0&&(s[s.length]=l)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=qle(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Zle(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Ule(c["!merges"]));var f=-1,m,p=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(m={ref:g[0]},g[1].Target.charAt(0)!="#"&&(p=pr(n,-1,xr(g[1].Target).replace(/#.*$/,""),tr.HLINK),m["r:id"]="rId"+p),(f=g[1].Target.indexOf("#"))>-1&&(m.location=xr(g[1].Target.slice(f+1))),g[1].Tooltip&&(m.tooltip=xr(g[1].Tooltip)),s[s.length]=He("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Gle(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=is("ignoredErrors",He("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(p=pr(n,-1,"../drawings/drawing"+(t+1)+".xml",tr.DRAW),s[s.length]=He("drawing",null,{"r:id":"rId"+p}),c["!drawing"]=h),c["!comments"].length>0&&(p=pr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",tr.VML),s[s.length]=He("legacyDrawing",null,{"r:id":"rId"+p}),c["!legacy"]=p),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Qle(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function ece(t,e,r){var n=Se(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;s.hpx?a=hb(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var h=-1,f=-1,m=u<<10;m<u+1<<10;++m){d.c=m;var p=Array.isArray(r)?(r[d.r]||[])[d.c]:r[br(d)];p&&(h<0&&(h=m),f=m)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,f))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function tce(t,e,r,n){var s=ece(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&Ae(t,0,s)}var rce=Fh,nce=mp;function sce(){}function ace(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=pae(t),r}function ice(t,e,r){r==null&&(r=Se(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return lb({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),$$(t,r),r.slice(0,r.l)}function oce(t){var e=Pi(t);return[e]}function lce(t,e,r){return r==null&&(r=Se(8)),Dh(e,r)}function cce(t){var e=Lh(t);return[e]}function dce(t,e,r){return r==null&&(r=Se(4)),$h(e,r)}function uce(t){var e=Pi(t),r=t.read_shift(1);return[e,r,"b"]}function hce(t,e,r){return r==null&&(r=Se(9)),Dh(e,r),r.write_shift(1,t.v?1:0),r}function fce(t){var e=Lh(t),r=t.read_shift(1);return[e,r,"b"]}function mce(t,e,r){return r==null&&(r=Se(5)),$h(e,r),r.write_shift(1,t.v?1:0),r}function pce(t){var e=Pi(t),r=t.read_shift(1);return[e,r,"e"]}function gce(t,e,r){return r==null&&(r=Se(9)),Dh(e,r),r.write_shift(1,t.v),r}function xce(t){var e=Lh(t),r=t.read_shift(1);return[e,r,"e"]}function yce(t,e,r){return r==null&&(r=Se(8)),$h(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function vce(t){var e=Pi(t),r=t.read_shift(4);return[e,r,"s"]}function bce(t,e,r){return r==null&&(r=Se(12)),Dh(e,r),r.write_shift(4,e.v),r}function wce(t){var e=Lh(t),r=t.read_shift(4);return[e,r,"s"]}function kce(t,e,r){return r==null&&(r=Se(8)),$h(e,r),r.write_shift(4,e.v),r}function Cce(t){var e=Pi(t),r=pp(t);return[e,r,"n"]}function Nce(t,e,r){return r==null&&(r=Se(16)),Dh(e,r),fh(t.v,r),r}function Sce(t){var e=Lh(t),r=pp(t);return[e,r,"n"]}function Ece(t,e,r){return r==null&&(r=Se(12)),$h(e,r),fh(t.v,r),r}function jce(t){var e=Pi(t),r=F$(t);return[e,r,"n"]}function Tce(t,e,r){return r==null&&(r=Se(12)),Dh(e,r),B$(t.v,r),r}function _ce(t){var e=Lh(t),r=F$(t);return[e,r,"n"]}function Ace(t,e,r){return r==null&&(r=Se(8)),$h(e,r),B$(t.v,r),r}function Mce(t){var e=Pi(t),r=pT(t);return[e,r,"is"]}function Oce(t){var e=Pi(t),r=As(t);return[e,r,"str"]}function Rce(t,e,r){return r==null&&(r=Se(12+4*t.v.length)),Dh(e,r),Hn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Pce(t){var e=Lh(t),r=As(t);return[e,r,"str"]}function Ice(t,e,r){return r==null&&(r=Se(8+4*t.v.length)),$h(e,r),Hn(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Dce(t,e,r){var n=t.l+e,s=Pi(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(r.cellFormula){t.l+=2;var l=Ak(t,n-t.l,r);i[3]=Dm(l,null,s,r.supbooks,r)}else t.l=n;return i}function Lce(t,e,r){var n=t.l+e,s=Pi(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(r.cellFormula){t.l+=2;var l=Ak(t,n-t.l,r);i[3]=Dm(l,null,s,r.supbooks,r)}else t.l=n;return i}function $ce(t,e,r){var n=t.l+e,s=Pi(t);s.r=r["!row"];var a=pp(t),i=[s,a,"n"];if(r.cellFormula){t.l+=2;var l=Ak(t,n-t.l,r);i[3]=Dm(l,null,s,r.supbooks,r)}else t.l=n;return i}function Fce(t,e,r){var n=t.l+e,s=Pi(t);s.r=r["!row"];var a=As(t),i=[s,a,"str"];if(r.cellFormula){t.l+=2;var l=Ak(t,n-t.l,r);i[3]=Dm(l,null,s,r.supbooks,r)}else t.l=n;return i}var Bce=Fh,zce=mp;function Uce(t,e){return e==null&&(e=Se(4)),e.write_shift(4,t),e}function Vce(t,e){var r=t.l+e,n=Fh(t),s=gT(t),a=As(t),i=As(t),l=As(t);t.l=r;var c={rfx:n,relId:s,loc:a,display:l};return i&&(c.Tooltip=i),c}function Hce(t,e){var r=Se(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));mp({s:Vn(t[0]),e:Vn(t[0])},r),xT("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Hn(s||"",r),Hn(t[1].Tooltip||"",r),Hn("",r),r.slice(0,r.l)}function Wce(){}function qce(t,e,r){var n=t.l+e,s=z$(t),a=t.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var l=Ple(t,n-t.l,r);i[1]=l}else t.l=n;return i}function Gce(t,e,r){var n=t.l+e,s=Fh(t),a=[s];if(r.cellFormula){var i=Dle(t,n-t.l,r);a[1]=i,t.l=n}else t.l=n;return a}function Kce(t,e,r){r==null&&(r=Se(18));var n=Mk(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var NF=["left","right","top","bottom","header","footer"];function Zce(t){var e={};return NF.forEach(function(r){e[r]=pp(t)}),e}function Yce(t,e){return e==null&&(e=Se(6*8)),kF(t),NF.forEach(function(r){fh(t[r],e)}),e}function Xce(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Jce(t,e,r){r==null&&(r=Se(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Qce(t){var e=Se(24);return e.write_shift(4,4),e.write_shift(4,1),mp(t,e),e}function ede(t,e){return e==null&&(e=Se(16*4+2)),e.write_shift(2,t.password?aF(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function tde(){}function rde(){}function nde(t,e,r,n,s,a,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ka(e),e.z=e.z||on[14],e.v=wa(Ks(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Qd(s.cellXfs,e,s),e.l&&a["!links"].push([br(c),e.l]),e.c&&a["!comments"].push([br(c),e.c]),e.t){case"s":case"str":return s.bookSST?(l=CT(s.Strings,e.v,s.revStrings),c.t="s",c.v=l,i?Ae(t,18,kce(e,c)):Ae(t,7,bce(e,c))):(c.t="str",i?Ae(t,17,Ice(e,c)):Ae(t,6,Rce(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?Ae(t,13,Ace(e,c)):Ae(t,2,Tce(e,c)):i?Ae(t,16,Ece(e,c)):Ae(t,5,Nce(e,c)),!0;case"b":return c.t="b",i?Ae(t,15,mce(e,c)):Ae(t,4,hce(e,c)),!0;case"e":return c.t="e",i?Ae(t,14,yce(e,c)):Ae(t,3,gce(e,c)),!0}return i?Ae(t,12,dce(e,c)):Ae(t,1,lce(e,c)),!0}function sde(t,e,r,n){var s=Hr(e["!ref"]||"A1"),a,i="",l=[];Ae(t,145);var c=Array.isArray(e),d=s.e.r;e["!rows"]&&(d=Math.max(s.e.r,e["!rows"].length-1));for(var u=s.s.r;u<=d;++u){i=ds(u),tce(t,e,s,u);var h=!1;if(u<=s.e.r)for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=_s(f)),a=l[f]+i;var m=c?(e[u]||[])[f]:e[a];if(!m){h=!1;continue}h=nde(t,m,u,f,n,e,h)}}Ae(t,146)}function ade(t,e){!e||!e["!merges"]||(Ae(t,177,Uce(e["!merges"].length)),e["!merges"].forEach(function(r){Ae(t,176,zce(r))}),Ae(t,178))}function ide(t,e){!e||!e["!cols"]||(Ae(t,390),e["!cols"].forEach(function(r,n){r&&Ae(t,60,Kce(n,r))}),Ae(t,391))}function ode(t,e){!e||!e["!ref"]||(Ae(t,648),Ae(t,649,Qce(Hr(e["!ref"]))),Ae(t,650))}function lde(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=pr(r,-1,n[1].Target.replace(/#.*$/,""),tr.HLINK);Ae(t,494,Hce(n,s))}}),delete e["!links"]}function cde(t,e,r,n){if(e["!comments"].length>0){var s=pr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",tr.VML);Ae(t,551,xT("rId"+s)),e["!legacy"]=s}}function dde(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Sn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=Wa(a);l.s.r==l.e.r&&(l.e.r=Wa(e["!ref"]).e.r,a=Sn(l));for(var c=0;c<i.length;++c){var d=i[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ae(t,161,mp(Hr(a))),Ae(t,162)}}function ude(t,e,r){Ae(t,133),Ae(t,137,Jce(e,r)),Ae(t,138),Ae(t,134)}function hde(t,e){e["!protect"]&&Ae(t,535,ede(e["!protect"]))}function fde(t,e,r,n){var s=ma(),a=r.SheetNames[t],i=r.Sheets[a]||{},l=a;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=Hr(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ae(s,129),(r.vbaraw||i["!outline"])&&Ae(s,147,ice(l,i["!outline"])),Ae(s,148,nce(c)),ude(s,i,r.Workbook),ide(s,i),sde(s,i,t,e),hde(s,i),dde(s,i,r,t),ade(s,i),lde(s,i,n),i["!margins"]&&Ae(s,476,Yce(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&ode(s,i),cde(s,i,t,n),Ae(s,130),s.end()}function mde(t,e){t.l+=10;var r=As(t);return{name:r}}var pde=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function gde(t){return!t.Workbook||!t.Workbook.WBProps?"false":Gse(t.Workbook.WBProps.date1904)?"true":"false"}var xde="][*?/\\".split("");function SF(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return xde.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function yde(t,e,r){t.forEach(function(n,s){SF(n);for(var a=0;a<s;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[s]&&e[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function vde(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];yde(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)zle(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function EF(t){var e=[jn];e[e.length]=He("workbook",null,{xmlns:hp[0],"xmlns:r":zn.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(pde.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=He("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:xr(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=He("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=He("definedName",xr(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function bde(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=YE(t),r.name=As(t),r}function wde(t,e){return e||(e=Se(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),xT(t.strRelID,e),Hn(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function kde(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?As(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Cde(t,e){e||(e=Se(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),$$(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Nde(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=gae(t),i=Ile(t,0,r),l=gT(t);t.l=n;var c={Name:a,Ptg:i};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Sde(t,e){Ae(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};Ae(t,156,wde(s))}Ae(t,144)}function Ede(t,e){e||(e=Se(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Hn("SheetJS",e),Hn(eb.version,e),Hn(eb.version,e),Hn("7262",e),e.length>e.l?e.slice(0,e.l):e}function jde(t,e){e||(e=Se(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Tde(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Ae(t,135),Ae(t,158,jde(s)),Ae(t,136))}}function _de(t,e){var r=ma();return Ae(r,131),Ae(r,128,Ede()),Ae(r,153,Cde(t.Workbook&&t.Workbook.WBProps||null)),Tde(r,t),Sde(r,t),Ae(r,132),r.end()}function Ade(t,e,r){return(e.slice(-4)===".bin"?_de:EF)(t)}function Mde(t,e,r,n,s){return(e.slice(-4)===".bin"?fde:CF)(t,r,n,s)}function Ode(t,e,r){return(e.slice(-4)===".bin"?Yie:lF)(t,r)}function Rde(t,e,r){return(e.slice(-4)===".bin"?Cie:sF)(t,r)}function Pde(t,e,r){return(e.slice(-4)===".bin"?hoe:fF)(t)}function Ide(t){return(t.slice(-4)===".bin"?soe:uF)()}function Dde(t,e){var r=[];return t.Props&&r.push(Oae(t.Props,e)),t.Custprops&&r.push(Rae(t.Props,t.Custprops)),r.join("")}function Lde(){return""}function $de(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(He("NumberFormat",null,{"ss:Format":xr(on[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(He("Style",a.join(""),i))}),He("Styles",r.join(""))}function jF(t){return He("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+wT(t.Ref,{r:0,c:0})})}function Fde(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(jF(s)))}return He("Names",r.join(""))}function Bde(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var l=s[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||a.push(jF(l)))}return a.join("")}function zde(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(He("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(He("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(He("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(He("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(is("ProtectContents","True")),t["!protect"].objects&&s.push(is("ProtectObjects","True")),t["!protect"].scenarios&&s.push(is("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(is("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(is("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":He("WorksheetOptions",s.join(""),{xmlns:Oa.x})}function Ude(t){return t.map(function(e){var r=qse(e.t||""),n=He("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return He("Comment",n,{"ss:Author":e.a})}).join("")}function Vde(t,e,r,n,s,a,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+xr(wT(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=Vn(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=xr(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=xr(t.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=i.c||d[u].s.r!=i.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",f="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=Ux[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||on[14]);break;case"s":h="String",f=Wse(t.v||"");break}var m=Qd(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=i.c+1;var p=t.v!=null?f:"",g=t.t=="z"?"":'<Data ss:Type="'+h+'">'+p+"</Data>";return(t.c||[]).length>0&&(g+=Ude(t.c)),He("Cell",g,l)}function Hde(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=oF(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Wde(t,e,r,n){if(!t["!ref"])return"";var s=Hr(t["!ref"]),a=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(y,b){vT(y);var v=!!y.width,w=Mk(b,y),k={"ss:Index":b+1};v&&(k["ss:Width"]=db(w.width)),y.hidden&&(k["ss:Hidden"]="1"),l.push(He("Column",null,k))});for(var c=Array.isArray(t),d=s.s.r;d<=s.e.r;++d){for(var u=[Hde(d,(t["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var f=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>d)&&!(a[i].e.c<h)&&!(a[i].e.r<d)){(a[i].s.c!=h||a[i].s.r!=d)&&(f=!0);break}if(!f){var m={r:d,c:h},p=br(m),g=c?(t[d]||[])[h]:t[p];u.push(Vde(g,p,t,e,r,n,m))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function qde(t,e,r){var n=[],s=r.SheetNames[t],a=r.Sheets[s],i=a?Bde(a,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Wde(a,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(zde(a,e,t,r)),n.join("")}function Gde(t,e){e||(e={}),t.SSF||(t.SSF=ka(on)),t.SSF&&(Ek(),Sk(t.SSF),e.revssf=jk(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Qd(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Dde(t,e)),r.push(Lde()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(He("Worksheet",qde(n,e,t),{"ss:Name":xr(t.SheetNames[n])}));return r[2]=$de(t,e),r[3]=Fde(t),jn+He("Workbook",r.join(""),{xmlns:Oa.ss,"xmlns:o":Oa.o,"xmlns:x":Oa.x,"xmlns:ss":Oa.ss,"xmlns:dt":Oa.dt,"xmlns:html":Oa.html})}var qC={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Kde(t,e){var r=[],n=[],s=[],a=0,i,l=NM(LM,"n"),c=NM($M,"n");if(t.Props)for(i=fs(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(l,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=fs(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(l,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],t.Custprops[i[a]]]);var d=[];for(a=0;a<s.length;++a)X$.indexOf(s[a][0])>-1||K$.indexOf(s[a][0])>-1||s[a][1]!=null&&d.push(s[a]);n.length&&wr.utils.cfb_add(e,"/SummaryInformation",VM(n,qC.SI,c,$M)),(r.length||d.length)&&wr.utils.cfb_add(e,"/DocumentSummaryInformation",VM(r,qC.DSI,l,LM,d.length?d:null,qC.UDI))}function Zde(t,e){var r=e||{},n=wr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return wr.utils.cfb_add(n,s,TF(t,r)),r.biff==8&&(t.Props||t.Custprops)&&Kde(t,n),r.biff==8&&t.vbaraw&&foe(n,wr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Yde={0:{f:Qle},1:{f:oce},2:{f:jce},3:{f:pce},4:{f:uce},5:{f:Cce},6:{f:Oce},7:{f:vce},8:{f:Fce},9:{f:$ce},10:{f:Dce},11:{f:Lce},12:{f:cce},13:{f:_ce},14:{f:xce},15:{f:fce},16:{f:Sce},17:{f:Pce},18:{f:wce},19:{f:pT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Nde},40:{},42:{},43:{f:Oie},44:{f:Aie},45:{f:Iie},46:{f:Lie},47:{f:Die},48:{},49:{f:cae},50:{},51:{f:Qie},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:die},62:{f:Mce},63:{f:aoe},64:{f:tde},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ko,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Xce},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ace},148:{f:rce,p:16},151:{f:Wce},152:{},153:{f:kde},154:{},155:{},156:{f:bde},157:{},158:{},159:{T:1,f:bie},160:{T:-1},161:{T:1,f:Fh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Bce},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Xie},336:{T:-1},337:{f:roe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:YE},357:{},358:{},359:{},360:{T:1},361:{},362:{f:sie},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:qce},427:{f:Gce},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Zce},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:sce},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Vce},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:YE},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:doe},633:{T:1},634:{T:-1},635:{T:1,f:loe},636:{T:-1},637:{f:fae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:mde},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:rde},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function We(t,e,r,n){var s=e;if(!isNaN(s)){var a=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&hT(r)&&t.push(r)}}function Xde(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return We(t,e,r,s);var a=e;if(!isNaN(a)){for(var i=r.parts||[],l=0,c=0,d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;var u=t.next(4);for(u.write_shift(2,a),u.write_shift(2,d),t.push(r.slice(c,c+d)),c+=d;c<s;){for(u=t.next(4),u.write_shift(2,60),d=0;d+(i[l]||8224)<=8224;)d+=i[l]||8224,l++;u.write_shift(2,d),t.push(r.slice(c,c+d)),c+=d}}}function Hx(t,e,r){return t||(t=Se(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function Jde(t,e,r,n){var s=Se(9);return Hx(s,t,e),Q$(r,n||"b",s),s}function Qde(t,e,r){var n=Se(8+2*r.length);return Hx(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function eue(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?wa(Ks(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?We(t,2,mie(r,n,s)):We(t,3,fie(r,n,s));return;case"b":case"e":We(t,5,Jde(r,n,e.v,e.t));return;case"s":case"str":We(t,4,Qde(r,n,(e.v||"").slice(0,255)));return}We(t,1,Hx(null,r,n))}function tue(t,e,r,n){var s=Array.isArray(e),a=Hr(e["!ref"]||"A1"),i,l="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Sn(a)}for(var d=a.s.r;d<=a.e.r;++d){l=ds(d);for(var u=a.s.c;u<=a.e.c;++u){d===a.s.r&&(c[u]=_s(u)),i=c[u]+l;var h=s?(e[d]||[])[u]:e[i];h&&eue(t,h,d,u)}}}function rue(t,e){for(var r=e||{},n=ma(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return We(n,r.biff==4?1033:r.biff==3?521:9,yT(t,16,r)),tue(n,t.Sheets[t.SheetNames[s]],s,r),We(n,10),n.end()}function nue(t,e,r){We(t,49,Yae({sz:12,name:"Arial"},r))}function sue(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&We(t,1054,Qae(s,e[s],r))})}function aue(t,e){var r=Se(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),We(t,2151,r),r=Se(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),rF(Hr(e["!ref"]||"A1"),r),r.write_shift(4,4),We(t,2152,r)}function iue(t,e){for(var r=0;r<16;++r)We(t,224,WM({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){We(t,224,WM(n,0,e))})}function oue(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];We(t,440,oie(n)),n[1].Tooltip&&We(t,2048,lie(n))}delete e["!links"]}function lue(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&We(t,125,uie(Mk(s,n),s))})}}function cue(t,e,r,n,s){var a=16+Qd(s.cellXfs,e,s);if(e.v==null&&!e.bf){We(t,513,mh(r,n,a));return}if(e.bf)We(t,6,Rle(e,r,n,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?wa(Ks(e.v)):e.v;We(t,515,nie(r,n,i,a));break;case"b":case"e":We(t,517,rie(r,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var l=CT(s.Strings,e.v,s.revStrings);We(t,253,Xae(r,n,l,a))}else We(t,516,Jae(r,n,(e.v||"").slice(0,255),a,s));break;default:We(t,513,mh(r,n,a))}}function due(t,e,r){var n=ma(),s=r.SheetNames[t],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(a),d=e.biff==8,u,h="",f=[],m=Hr(a["!ref"]||"A1"),p=d?65536:16384;if(m.e.c>255||m.e.r>=p){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,p-1)}We(n,2057,yT(r,16,e)),We(n,13,di(1)),We(n,12,di(100)),We(n,15,Us(!0)),We(n,17,Us(!1)),We(n,16,fh(.001)),We(n,95,Us(!0)),We(n,42,Us(!1)),We(n,43,Us(!1)),We(n,130,di(1)),We(n,128,tie()),We(n,131,Us(!1)),We(n,132,Us(!1)),d&&lue(n,a["!cols"]),We(n,512,eie(m,e)),d&&(a["!links"]=[]);for(var g=m.s.r;g<=m.e.r;++g){h=ds(g);for(var y=m.s.c;y<=m.e.c;++y){g===m.s.r&&(f[y]=_s(y)),u=f[y]+h;var b=c?(a[g]||[])[y]:a[u];b&&(cue(n,b,g,y,e),d&&b.l&&a["!links"].push([u,b.l]))}}var v=l.CodeName||l.name||s;return d&&We(n,574,Zae((i.Views||[])[0])),d&&(a["!merges"]||[]).length&&We(n,229,iie(a["!merges"])),d&&oue(n,a),We(n,442,tF(v)),d&&aue(n,a),We(n,10),n.end()}function uue(t,e,r){var n=ma(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(We(n,2057,yT(t,5,r)),r.bookType=="xla"&&We(n,135),We(n,225,l?di(1200):null),We(n,193,Dae(2)),c&&We(n,191),c&&We(n,192),We(n,226),We(n,92,Wae("SheetJS",r)),We(n,66,di(l?1200:1252)),l&&We(n,353,di(0)),l&&We(n,448),We(n,317,hie(t.SheetNames.length)),l&&t.vbaraw&&We(n,211),l&&t.vbaraw){var d=i.CodeName||"ThisWorkbook";We(n,442,tF(d))}We(n,156,di(17)),We(n,25,Us(!1)),We(n,18,Us(!1)),We(n,19,di(0)),l&&We(n,431,Us(!1)),l&&We(n,444,di(0)),We(n,61,Kae()),We(n,64,Us(!1)),We(n,141,di(0)),We(n,34,Us(gde(t)=="true")),We(n,14,Us(!0)),l&&We(n,439,Us(!1)),We(n,218,di(0)),nue(n,t,r),sue(n,t.SSF,r),iue(n,r),l&&We(n,352,Us(!1));var u=n.end(),h=ma();l&&We(h,140,cie()),l&&r.Strings&&Xde(h,252,Gae(r.Strings)),We(h,10);var f=h.end(),m=ma(),p=0,g=0;for(g=0;g<t.SheetNames.length;++g)p+=(l?12:11)+(l?2:1)*t.SheetNames[g].length;var y=u.length+p+f.length;for(g=0;g<t.SheetNames.length;++g){var b=a[g]||{};We(m,133,qae({pos:y,hs:b.Hidden||0,dt:0,name:t.SheetNames[g]},r)),y+=e[g].length}var v=m.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var w=[];return u.length&&w.push(u),v.length&&w.push(v),f.length&&w.push(f),as(w)}function hue(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ka(on)),t&&t.SSF&&(Ek(),Sk(t.SSF),r.revssf=jk(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,NT(r),r.cellXfs=[],Qd(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=due(s,r,t);return n.unshift(uue(t,n,r)),as(n)}function TF(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Wa(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return hue(t,e);case 4:case 3:case 2:return rue(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function fue(t,e,r,n){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>i)&&!(s[d].e.r<r||s[d].e.c<i)){if(s[d].s.r<r||s[d].s.c<i){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=br({r,c:i}),h=n.dense?(t[r]||[])[i]:t[u],f=h&&h.v!=null&&(h.h||Hse(h.w||(nc(h),h.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),n.editable?f='<span contenteditable="true">'+f+"</span>":h&&(m["data-t"]=h&&h.t||"z",h.v!=null&&(m["data-v"]=h.v),h.z!=null&&(m["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),m.id=(n.id||"sjs")+"-"+u,a.push(He("td",f,m))}}var p="<tr>";return p+a.join("")+"</tr>"}var mue='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',pue="</body></html>";function gue(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _F(t,e){var r=e||{},n=r.header!=null?r.header:mue,s=r.footer!=null?r.footer:pue,a=[n],i=Wa(t["!ref"]);r.dense=Array.isArray(t),a.push(gue(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)a.push(fue(t,i,l,r));return a.push("</table>"+s),a.join("")}function AF(t,e,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Vn(n.origin):n.origin;s=i.r,a=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var u=Wa(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],f=0,m=t["!rows"]||(t["!rows"]=[]),p=0,g=0,y=0,b=0,v=0,w=0;for(t["!cols"]||(t["!cols"]=[]);p<l.length&&g<c;++p){var k=l[p];if(JM(k)){if(n.display)continue;m[g]={hidden:!0}}var N=k.children;for(y=b=0;y<N.length;++y){var S=N[y];if(!(n.display&&JM(S))){var C=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):Kse(S.innerHTML),E=S.getAttribute("data-z")||S.getAttribute("z");for(f=0;f<h.length;++f){var T=h[f];T.s.c==b+a&&T.s.r<g+s&&g+s<=T.e.r&&(b=T.e.c+1-a,f=-1)}w=+S.getAttribute("colspan")||1,((v=+S.getAttribute("rowspan")||1)>1||w>1)&&h.push({s:{r:g+s,c:b+a},e:{r:g+s+(v||1)-1,c:b+a+(w||1)-1}});var R={t:"s",v:C},B=S.getAttribute("data-t")||S.getAttribute("t")||"";C!=null&&(C.length==0?R.t=B||"z":n.raw||C.trim().length==0||B=="s"||(C==="TRUE"?R={t:"b",v:!0}:C==="FALSE"?R={t:"b",v:!1}:isNaN(Ul(C))?isNaN(Bg(C).getDate())||(R={t:"d",v:Ks(C)},n.cellDates||(R={t:"n",v:wa(R.v)}),R.z=n.dateNF||on[14]):R={t:"n",v:Ul(C)})),R.z===void 0&&E!=null&&(R.z=E);var M="",L=S.getElementsByTagName("A");if(L&&L.length)for(var V=0;V<L.length&&!(L[V].hasAttribute("href")&&(M=L[V].getAttribute("href"),M.charAt(0)!="#"));++V);M&&M.charAt(0)!="#"&&(R.l={Target:M}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][b+a]=R):t[br({c:b+a,r:g+s})]=R,d.e.c<b+a&&(d.e.c=b+a),b+=w}}++g}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),t["!ref"]=Sn(d),g>=c&&(t["!fullref"]=Sn((d.e.r=l.length-p+g-1+s,d))),t}function MF(t,e){var r=e||{},n=r.dense?[]:{};return AF(n,t,e)}function xue(t,e){return Ih(MF(t,e),e)}function JM(t){var e="",r=yue(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function yue(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var vue=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ug({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return jn+e}}(),QM=function(){var t=function(a){return xr(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,l){var c=[];c.push('      <table:table table:name="'+xr(i.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=Wa(a["!ref"]||"A1"),f=a["!merges"]||[],m=0,p=Array.isArray(a);if(a["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(a["!cols"][u]?' table:style-name="co'+a["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",y=a["!rows"]||[];for(d=0;d<h.s.r;++d)g=y[d]?' table:style-name="ro'+y[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=y[d]?' table:style-name="ro'+y[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(e);for(;u<=h.e.c;++u){var b=!1,v={},w="";for(m=0;m!=f.length;++m)if(!(f[m].s.c>u)&&!(f[m].s.r>d)&&!(f[m].e.c<u)&&!(f[m].e.r<d)){(f[m].s.c!=u||f[m].s.r!=d)&&(b=!0),v["table:number-columns-spanned"]=f[m].e.c-f[m].s.c+1,v["table:number-rows-spanned"]=f[m].e.r-f[m].s.r+1;break}if(b){c.push(r);continue}var k=br({r:d,c:u}),N=p?(a[d]||[])[u]:a[k];if(N&&N.f&&(v["table:formula"]=xr(Fle(N.f)),N.F&&N.F.slice(0,k.length)==k)){var S=Wa(N.F);v["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,v["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!N){c.push(e);continue}switch(N.t){case"b":w=N.v?"TRUE":"FALSE",v["office:value-type"]="boolean",v["office:boolean-value"]=N.v?"true":"false";break;case"n":w=N.w||String(N.v||0),v["office:value-type"]="float",v["office:value"]=N.v||0;break;case"s":case"str":w=N.v==null?"":N.v,v["office:value-type"]="string";break;case"d":w=N.w||Ks(N.v).toISOString(),v["office:value-type"]="date",v["office:date-value"]=Ks(N.v).toISOString(),v["table:style-name"]="ce1";break;default:c.push(e);continue}var C=t(w);if(N.l&&N.l.Target){var E=N.l.Target;E=E.charAt(0)=="#"?"#"+Ble(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),C=He("text:a",C,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+He("table:table-cell",He("text:p",C,{}),v)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;vT(h),h.ods=l;var f=d["!cols"][u].wpx+"px";a.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(d){return i.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,l){var c=[jn],d=Ug({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Ug({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(q$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)c.push(n(i.Sheets[i.SheetNames[h]],i,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function OF(t,e){if(e.bookType=="fods")return QM(t,e);var r=lT(),n="",s=[],a=[];return n="mimetype",It(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",It(r,n,QM(t,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",It(r,n,vue(t,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",It(r,n,jn+q$()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",It(r,n,Mae(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",It(r,n,_ae(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function fb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function bue(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):qi(zg(t))}function wue(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Pd(t){var e=t.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function kue(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=r>=0?0:128}function Vg(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function fr(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Jf(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function _n(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Vg(t,r),a=s&7;s=Math.floor(s/8);var i=0,l;if(s==0)break;switch(a){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Vg(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:a};e[s]==null?e[s]=[d]:e[s].push(d)}return e}function Qn(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(fr(n*8+s.type)),s.type==2&&e.push(fr(s.data.length)),e.push(s.data))})}),Pd(e)}function $i(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Vg(t,n),a=_n(t.slice(n[0],n[0]+s));n[0]+=s;var i={id:Jf(a[1][0].data),messages:[]};a[2].forEach(function(l){var c=_n(l.data),d=Jf(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+d)}),n[0]+=d}),(e=a[3])!=null&&e[0]&&(i.merge=Jf(a[3][0].data)>>>0>0),r.push(i)}return r}function Qh(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:fr(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:fr(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:fr(i.data.length)}],n[2].push({data:Qn(i.meta),type:2})});var a=Qn(n);e.push(fr(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),Pd(e)}function Cue(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Vg(e,r),s=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}s.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,d=0;if(a==1?(d=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(d=(e[r[0]++]>>2)+1,a==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Pd(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=Pd(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Fi(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Cue(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Pd(e)}function ef(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var a=fr(n),i=a.length;e.push(a),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Pd(e)}function GC(t,e){var r=new Uint8Array(32),n=fb(r),s=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,kue(r,s,t.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,s)}function KC(t,e){var r=new Uint8Array(32),n=fb(r),s=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,s)}function yc(t){var e=_n(t);return Vg(e[1][0].data)}function Nue(t,e,r){var n,s,a,i;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Jf(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=fb(t[7][0].data),u=0,h=[],f=fb(t[4][0].data),m=0,p=[],g=0;g<e.length;++g){if(e[g]==null){d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),f.setUint16(g*2,m,!0);var y,b;switch(typeof e[g]){case"string":y=GC({t:"s",v:e[g]},r),b=KC({t:"s",v:e[g]},r);break;case"number":y=GC({t:"n",v:e[g]},r),b=KC({t:"n",v:e[g]},r);break;case"boolean":y=GC({t:"b",v:e[g]},r),b=KC({t:"b",v:e[g]},r);break;default:throw new Error("Unsupported value "+e[g])}h.push(y),u+=y.length,p.push(b),m+=b.length,++c}for(t[2][0].data=fr(c);g<t[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),f.setUint16(g*2,65535,!0);return t[6][0].data=Pd(h),t[3][0].data=Pd(p),c}function Sue(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Wa(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Sn(n)));var a=mb(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(ne){return ne.forEach(function(z){typeof z=="string"&&i.push(z)})});var l={},c=[],d=wr.read(e.numbers,{type:"base64"});d.FileIndex.map(function(ne,z){return[ne,d.FullPaths[z]]}).forEach(function(ne){var z=ne[0],Z=ne[1];if(z.type==2&&z.name.match(/\.iwa/)){var oe=z.content,ue=Fi(oe),_e=$i(ue);_e.forEach(function(we){c.push(we.id),l[we.id]={deps:[],location:Z,type:Jf(we.messages[0].meta[1][0].data)}})}}),c.sort(function(ne,z){return ne-z});var u=c.filter(function(ne){return ne>1}).map(function(ne){return[ne,fr(ne)]});d.FileIndex.map(function(ne,z){return[ne,d.FullPaths[z]]}).forEach(function(ne){var z=ne[0];if(ne[1],!!z.name.match(/\.iwa/)){var Z=$i(Fi(z.content));Z.forEach(function(oe){oe.messages.forEach(function(ue){u.forEach(function(_e){oe.messages.some(function(we){return Jf(we.meta[1][0].data)!=11006&&wue(we.data,_e[1])})&&l[_e[0]].deps.push(oe.id)})})})}});for(var h=wr.find(d,l[1].location),f=$i(Fi(h.content)),m,p=0;p<f.length;++p){var g=f[p];g.id==1&&(m=g)}var y=yc(_n(m.messages[0].data)[1][0].data);for(h=wr.find(d,l[y].location),f=$i(Fi(h.content)),p=0;p<f.length;++p)g=f[p],g.id==y&&(m=g);for(y=yc(_n(m.messages[0].data)[2][0].data),h=wr.find(d,l[y].location),f=$i(Fi(h.content)),p=0;p<f.length;++p)g=f[p],g.id==y&&(m=g);for(y=yc(_n(m.messages[0].data)[2][0].data),h=wr.find(d,l[y].location),f=$i(Fi(h.content)),p=0;p<f.length;++p)g=f[p],g.id==y&&(m=g);var b=_n(m.messages[0].data);{b[6][0].data=fr(n.e.r+1),b[7][0].data=fr(n.e.c+1);var v=yc(b[46][0].data),w=wr.find(d,l[v].location),k=$i(Fi(w.content));{for(var N=0;N<k.length&&k[N].id!=v;++N);if(k[N].id!=v)throw"Bad ColumnRowUIDMapArchive";var S=_n(k[N].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:fr(C+420690)}],S[1].push({type:2,data:Qn(E)}),S[2].push({type:0,data:fr(C)}),S[3].push({type:0,data:fr(C)})}S[4]=[],S[5]=[],S[6]=[];for(var T=0;T<=n.e.r;++T)E=[],E[1]=E[2]=[{type:0,data:fr(T+726270)}],S[4].push({type:2,data:Qn(E)}),S[5].push({type:0,data:fr(T)}),S[6].push({type:0,data:fr(T)});k[N].messages[0].data=Qn(S)}w.content=ef(Qh(k)),w.size=w.content.length,delete b[46];var R=_n(b[4][0].data);{R[7][0].data=fr(n.e.r+1);var B=_n(R[1][0].data),M=yc(B[2][0].data);w=wr.find(d,l[M].location),k=$i(Fi(w.content));{if(k[0].id!=M)throw"Bad HeaderStorageBucket";var L=_n(k[0].messages[0].data);for(T=0;T<a.length;++T){var V=_n(L[2][0].data);V[1][0].data=fr(T),V[4][0].data=fr(a[T].length),L[2][T]={type:L[2][0].type,data:Qn(V)}}k[0].messages[0].data=Qn(L)}w.content=ef(Qh(k)),w.size=w.content.length;var ee=yc(R[2][0].data);w=wr.find(d,l[ee].location),k=$i(Fi(w.content));{if(k[0].id!=ee)throw"Bad HeaderStorageBucket";for(L=_n(k[0].messages[0].data),C=0;C<=n.e.c;++C)V=_n(L[2][0].data),V[1][0].data=fr(C),V[4][0].data=fr(n.e.r+1),L[2][C]={type:L[2][0].type,data:Qn(V)};k[0].messages[0].data=Qn(L)}w.content=ef(Qh(k)),w.size=w.content.length;var Q=yc(R[4][0].data);(function(){for(var ne=wr.find(d,l[Q].location),z=$i(Fi(ne.content)),Z,oe=0;oe<z.length;++oe){var ue=z[oe];ue.id==Q&&(Z=ue)}var _e=_n(Z.messages[0].data);{_e[3]=[];var we=[];i.forEach(function(ye,Ve){we[1]=[{type:0,data:fr(Ve)}],we[2]=[{type:0,data:fr(1)}],we[3]=[{type:2,data:bue(ye)}],_e[3].push({type:2,data:Qn(we)})})}Z.messages[0].data=Qn(_e);var Y=Qh(z),le=ef(Y);ne.content=le,ne.size=ne.content.length})();var J=_n(R[3][0].data);{var _=J[1][0];delete J[2];var H=_n(_.data);{var P=yc(H[2][0].data);(function(){for(var ne=wr.find(d,l[P].location),z=$i(Fi(ne.content)),Z,oe=0;oe<z.length;++oe){var ue=z[oe];ue.id==P&&(Z=ue)}var _e=_n(Z.messages[0].data);{delete _e[6],delete J[7];var we=new Uint8Array(_e[5][0].data);_e[5]=[];for(var Y=0,le=0;le<=n.e.r;++le){var ye=_n(we);Y+=Nue(ye,a[le],i),ye[1][0].data=fr(le),_e[5].push({data:Qn(ye),type:2})}_e[1]=[{type:0,data:fr(n.e.c+1)}],_e[2]=[{type:0,data:fr(n.e.r+1)}],_e[3]=[{type:0,data:fr(Y)}],_e[4]=[{type:0,data:fr(n.e.r+1)}]}Z.messages[0].data=Qn(_e);var Ve=Qh(z),Be=ef(Ve);ne.content=Be,ne.size=ne.content.length})()}_.data=Qn(H)}R[3][0].data=Qn(J)}b[4][0].data=Qn(R)}m.messages[0].data=Qn(b);var K=Qh(f),F=ef(K);return h.content=F,h.size=h.content.length,d}function Eue(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function NT(t){Eue([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function jue(t,e){return e.bookType=="ods"?OF(t,e):e.bookType=="numbers"?Sue(t,e):e.bookType=="xlsb"?Tue(t,e):_ue(t,e)}function Tue(t,e){Df=1024,t&&!t.SSF&&(t.SSF=ka(on)),t&&t.SSF&&(Ek(),Sk(t.SSF),e.revssf=jk(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,X0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=mF.indexOf(e.bookType)>-1,s=V$();NT(e=e||{});var a=lT(),i="",l=0;if(e.cellXfs=[],Qd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",It(a,i,G$(t.Props,e)),s.coreprops.push(i),pr(e.rels,2,i,tr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,It(a,i,Z$(t.Props)),s.extprops.push(i),pr(e.rels,3,i,tr.EXT_PROPS),t.Custprops!==t.Props&&fs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",It(a,i,Y$(t.Custprops)),s.custprops.push(i),pr(e.rels,4,i,tr.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var u={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,It(a,i,Mde(l-1,i,e,t,u)),s.sheets.push(i),pr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,tr.WS[0])}if(h){var m=h["!comments"],p=!1,g="";m&&m.length>0&&(g="xl/comments"+l+"."+r,It(a,g,Pde(m,g)),s.comments.push(g),pr(u,-1,"../comments"+l+"."+r,tr.CMNT),p=!0),h["!legacy"]&&p&&It(a,"xl/drawings/vmlDrawing"+l+".vml",hF(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&It(a,W$(i),Yf(u))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,It(a,i,Rde(e.Strings,i,e)),s.strs.push(i),pr(e.wbrels,-1,"sharedStrings."+r,tr.SST)),i="xl/workbook."+r,It(a,i,Ade(t,i)),s.workbooks.push(i),pr(e.rels,1,i,tr.WB),i="xl/theme/theme1.xml",It(a,i,dF(t.Themes,e)),s.themes.push(i),pr(e.wbrels,-1,"theme/theme1.xml",tr.THEME),i="xl/styles."+r,It(a,i,Ode(t,i,e)),s.styles.push(i),pr(e.wbrels,-1,"styles."+r,tr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",It(a,i,t.vbaraw),s.vba.push(i),pr(e.wbrels,-1,"vbaProject.bin",tr.VBA)),i="xl/metadata."+r,It(a,i,Ide(i)),s.metadata.push(i),pr(e.wbrels,-1,"metadata."+r,tr.XLMETA),It(a,"[Content_Types].xml",H$(s,e)),It(a,"_rels/.rels",Yf(e.rels)),It(a,"xl/_rels/workbook."+r+".rels",Yf(e.wbrels)),delete e.revssf,delete e.ssf,a}function _ue(t,e){Df=1024,t&&!t.SSF&&(t.SSF=ka(on)),t&&t.SSF&&(Ek(),Sk(t.SSF),e.revssf=jk(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,X0?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=mF.indexOf(e.bookType)>-1,s=V$();NT(e=e||{});var a=lT(),i="",l=0;if(e.cellXfs=[],Qd(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",It(a,i,G$(t.Props,e)),s.coreprops.push(i),pr(e.rels,2,i,tr.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],d=0;d<t.SheetNames.length;++d)(t.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(t.SheetNames[d]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,It(a,i,Z$(t.Props)),s.extprops.push(i),pr(e.rels,3,i,tr.EXT_PROPS),t.Custprops!==t.Props&&fs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",It(a,i,Y$(t.Custprops)),s.custprops.push(i),pr(e.rels,4,i,tr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var h={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,It(a,i,CF(l-1,e,t,h)),s.sheets.push(i),pr(e.wbrels,-1,"worksheets/sheet"+l+"."+r,tr.WS[0])}if(f){var p=f["!comments"],g=!1,y="";if(p&&p.length>0){var b=!1;p.forEach(function(v){v[1].forEach(function(w){w.T==!0&&(b=!0)})}),b&&(y="xl/threadedComments/threadedComment"+l+"."+r,It(a,y,ioe(p,u,e)),s.threadedcomments.push(y),pr(h,-1,"../threadedComments/threadedComment"+l+"."+r,tr.TCMNT)),y="xl/comments"+l+"."+r,It(a,y,fF(p)),s.comments.push(y),pr(h,-1,"../comments"+l+"."+r,tr.CMNT),g=!0}f["!legacy"]&&g&&It(a,"xl/drawings/vmlDrawing"+l+".vml",hF(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&It(a,W$(i),Yf(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,It(a,i,sF(e.Strings,e)),s.strs.push(i),pr(e.wbrels,-1,"sharedStrings."+r,tr.SST)),i="xl/workbook."+r,It(a,i,EF(t)),s.workbooks.push(i),pr(e.rels,1,i,tr.WB),i="xl/theme/theme1.xml",It(a,i,dF(t.Themes,e)),s.themes.push(i),pr(e.wbrels,-1,"theme/theme1.xml",tr.THEME),i="xl/styles."+r,It(a,i,lF(t,e)),s.styles.push(i),pr(e.wbrels,-1,"styles."+r,tr.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",It(a,i,t.vbaraw),s.vba.push(i),pr(e.wbrels,-1,"vbaProject.bin",tr.VBA)),i="xl/metadata."+r,It(a,i,uF()),s.metadata.push(i),pr(e.wbrels,-1,"metadata."+r,tr.XLMETA),u.length>1&&(i="xl/persons/person.xml",It(a,i,ooe(u)),s.people.push(i),pr(e.wbrels,-1,"persons/person.xml",tr.PEOPLE)),It(a,"[Content_Types].xml",H$(s,e)),It(a,"_rels/.rels",Yf(e.rels)),It(a,"xl/_rels/workbook."+r+".rels",Yf(e.wbrels)),delete e.revssf,delete e.ssf,a}function Aue(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=rc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function RF(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Bx(e.file,wr.write(t,{type:or?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return wr.write(t,e)}function Mue(t,e){var r=ka(e||{}),n=jue(t,r);return Oue(n,r)}function Oue(t,e){var r={},n=or?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?wr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Nk(s))}return e.password&&typeof encrypt_agile<"u"?RF(encrypt_agile(s,e.password),e):e.type==="file"?Bx(e.file,s):e.type=="string"?G0(s):s}function Rue(t,e){var r=e||{},n=Zde(t,r);return RF(n,r)}function No(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Fg(zg(n));case"binary":return zg(n);case"string":return t;case"file":return Bx(e.file,n,"utf8");case"buffer":return or?uc(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):No(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Pue(t,e){switch(e.type){case"base64":return Fg(t);case"binary":return t;case"string":return t;case"file":return Bx(e.file,t,"binary");case"buffer":return or?uc(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function i1(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Fg(r):e.type=="string"?G0(r):r;case"file":return Bx(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function PF(t,e){lse(),vde(t);var r=ka(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=PF(t,r);return r.type="array",Nk(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return No(Gde(t,r),r);case"slk":case"sylk":return No(gie.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return No(_F(t.Sheets[t.SheetNames[s]],r),r);case"txt":return Pue(IF(t.Sheets[t.SheetNames[s]],r),r);case"csv":return No(ST(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return No(xie.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return i1(pie.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return No(yie.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return No(Sie.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return No(nF.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return No(OF(t,r),r);case"wk1":return i1(qM.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return i1(qM.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),i1(TF(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Rue(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Mue(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Iue(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function gp(t,e,r){var n={};return n.type="file",n.file=e,Iue(n),PF(t,n)}function Due(t,e,r,n,s,a,i,l){var c=ds(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!i||t[r])for(var m=e.s.c;m<=e.e.c;++m){var p=i?t[r][m]:t[n[m]+c];if(p===void 0||p.t===void 0){if(d===void 0)continue;a[m]!=null&&(f[a[m]]=d);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(a[m]!=null){if(g==null)if(p.t=="e"&&g===null)f[a[m]]=null;else if(d!==void 0)f[a[m]]=d;else if(u&&g===null)f[a[m]]=null;else continue;else f[a[m]]=u&&(p.t!=="n"||p.t==="n"&&l.rawNumbers!==!1)?g:nc(p,g,l);g!=null&&(h=!1)}}return{row:f,isempty:h}}function mb(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=e||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof u){case"string":c=Hr(u);break;case"number":c=Hr(t["!ref"]),c.s.r=u;break;default:c=u}n>0&&(s=0);var h=ds(c.s.r),f=[],m=[],p=0,g=0,y=Array.isArray(t),b=c.s.r,v=0,w={};y&&!t[b]&&(t[b]=[]);var k=d.skipHidden&&t["!cols"]||[],N=d.skipHidden&&t["!rows"]||[];for(v=c.s.c;v<=c.e.c;++v)if(!(k[v]||{}).hidden)switch(f[v]=_s(v),r=y?t[b][v]:t[f[v]+h],n){case 1:a[v]=v-c.s.c;break;case 2:a[v]=f[v];break;case 3:a[v]=d.header[v-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=nc(r,null,d),g=w[i]||0,!g)w[i]=1;else{do l=i+"_"+g++;while(w[l]);w[i]=g,w[l]=1}a[v]=l}for(b=c.s.r+s;b<=c.e.r;++b)if(!(N[b]||{}).hidden){var S=Due(t,c,b,f,n,a,y,d);(S.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(m[p++]=S.row)}return m.length=p,m}var eO=/"/g;function Lue(t,e,r,n,s,a,i,l){for(var c=!0,d=[],u="",h=ds(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var m=l.dense?(t[r]||[])[f]:t[n[f]+h];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:nc(m,null,l));for(var p=0,g=0;p!==u.length;++p)if((g=u.charCodeAt(p))===s||g===a||g===34||l.forceQuotes){u='"'+u.replace(eO,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(eO,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(i)}function ST(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=Hr(t["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((a=="|"?"\\|":a)+"+$"),u="",h=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],m=n.skipHidden&&t["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(f[p]||{}).hidden||(h[p]=_s(p));for(var g=0,y=s.s.r;y<=s.e.r;++y)(m[y]||{}).hidden||(u=Lue(t,s,y,h,i,c,a,n),u!=null&&(n.strip&&(u=u.replace(d,"")),(u||n.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete n.dense,r.join("")}function IF(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=ST(t,e);return r}function $ue(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=Hr(t["!ref"]),a="",i=[],l,c=[],d=Array.isArray(t);for(l=s.s.c;l<=s.e.c;++l)i[l]=_s(l);for(var u=s.s.r;u<=s.e.r;++u)for(a=ds(u),l=s.s.c;l<=s.e.c;++l)if(e=i[l]+a,r=d?(t[u]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function DF(t,e,r){var n=r||{},s=+!n.skipHeader,a=t||{},i=0,l=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?Vn(n.origin):n.origin;i=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:i+e.length-1+s}};if(a["!ref"]){var h=Hr(a["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),i==-1&&(i=h.e.r+1,u.e.r=i+e.length-1+s)}else i==-1&&(i=0,u.e.r=e.length-1+s);var f=n.header||[],m=0;e.forEach(function(g,y){fs(g).forEach(function(b){(m=f.indexOf(b))==-1&&(f[m=f.length]=b);var v=g[b],w="z",k="",N=br({c:l+m,r:i+y+s});d=Hg(a,N),v&&typeof v=="object"&&!(v instanceof Date)?a[N]=v:(typeof v=="number"?w="n":typeof v=="boolean"?w="b":typeof v=="string"?w="s":v instanceof Date?(w="d",n.cellDates||(w="n",v=wa(v)),k=n.dateNF||on[14]):v===null&&n.nullError&&(w="e",v=0),d?(d.t=w,d.v=v,delete d.w,delete d.R,k&&(d.z=k)):a[N]=d={t:w,v},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+f.length-1);var p=ds(i);if(s)for(m=0;m<f.length;++m)a[_s(m+l)+p]={t:"s",v:f[m]};return a["!ref"]=Sn(u),a}function Fue(t,e){return DF(null,t,e)}function Hg(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Vn(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Hg(t,br(e)):Hg(t,br({r:e,c:r||0}))}function Bue(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function zue(){return{SheetNames:[],Sheets:{}}}function Uue(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=i+s)!=-1;++s);}if(SF(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Vue(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Bue(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Hue(t,e){return t.z=e,t}function LF(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Wue(t,e,r){return LF(t,"#"+e,r)}function que(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Gue(t,e,r,n){for(var s=typeof e!="string"?e:Hr(e),a=typeof e=="string"?e:Sn(e),i=s.s.r;i<=s.e.r;++i)for(var l=s.s.c;l<=s.e.c;++l){var c=Hg(t,i,l);c.t="n",c.F=a,delete c.v,i==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return t}var qn={encode_col:_s,encode_row:ds,encode_cell:br,encode_range:Sn,decode_col:mT,decode_row:fT,split_cell:lae,decode_cell:Vn,decode_range:Wa,format_cell:nc,sheet_add_aoa:L$,sheet_add_json:DF,sheet_add_dom:AF,aoa_to_sheet:fp,json_to_sheet:Fue,table_to_sheet:MF,table_to_book:xue,sheet_to_csv:ST,sheet_to_txt:IF,sheet_to_json:mb,sheet_to_html:_F,sheet_to_formulae:$ue,sheet_to_row_object_array:mb,sheet_get_cell:Hg,book_new:zue,book_append_sheet:Uue,book_set_sheet_visibility:Vue,cell_set_number_format:Hue,cell_set_hyperlink:LF,cell_set_internal_link:Wue,cell_add_comment:que,sheet_set_array_formula:Gue,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},$F={exports:{}};(function(t,e){(function(r,n){n()})(_Z,function(){function r(d,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function n(d,u,h){var f=new XMLHttpRequest;f.open("GET",d),f.responseType="blob",f.onload=function(){c(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function s(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function a(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof globalThis=="object"&&globalThis.global===globalThis?globalThis:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,u,h){var f=i.URL||i.webkitURL,m=document.createElement("a");u=u||d.name||"download",m.download=u,m.rel="noopener",typeof d=="string"?(m.href=d,m.origin===location.origin?a(m):s(m.href)?n(d,u,h):a(m,m.target="_blank")):(m.href=f.createObjectURL(d),setTimeout(function(){f.revokeObjectURL(m.href)},4e4),setTimeout(function(){a(m)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,h){if(u=u||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(r(d,h),u);else if(s(d))n(d,u,h);else{var f=document.createElement("a");f.href=d,f.target="_blank",setTimeout(function(){a(f)})}}:function(d,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof d=="string")return n(d,u,h);var m=d.type==="application/octet-stream",p=/constructor/i.test(i.HTMLElement)||i.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||m&&p||l)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=g?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=w:location=w,f=null},y.readAsDataURL(d)}else{var b=i.URL||i.webkitURL,v=b.createObjectURL(d);f?f.location=v:location.href=v,f=null,setTimeout(function(){b.revokeObjectURL(v)},4e4)}});i.saveAs=c.saveAs=c,t.exports=c})})($F);var ET=$F.exports;const jT=async()=>{const t=await Ze.authenticatedRequest("/case-control");if(!t.success)throw new Error(t.message||"Error al obtener controles de casos");return t.data||[]},Kue=async t=>{const e=await Ze.authenticatedRequest("/case-control",{method:"POST",body:JSON.stringify(t)});if(!e.success)throw new Error(e.message||"Error al crear control de caso");if(!e.data)throw new Error("Error al crear control de caso");return e.data},tO=async t=>{const e=await Ze.authenticatedRequest(`/case-control/${t.id}/status`,{method:"PUT",body:JSON.stringify({statusId:t.statusId})});if(!e.success)throw new Error(e.message||"Error al actualizar estado del control de caso");if(!e.data)throw new Error("Error al actualizar estado del control de caso");return e.data},Zue=async t=>{const e=await Ze.authenticatedRequest("/case-control/timer/start",{method:"POST",body:JSON.stringify(t)});if(!e.success)throw new Error(e.message||"Error al iniciar el temporizador");if(!e.data)throw new Error("Error al iniciar el temporizador");return e.data},Yue=async t=>{const e=await Ze.authenticatedRequest("/case-control/timer/stop",{method:"POST",body:JSON.stringify(t)});if(!e.success)throw new Error(e.message||"Error al detener el temporizador");if(!e.data)throw new Error("Error al detener el temporizador");return e.data},Xue=async t=>{const e=await Ze.authenticatedRequest("/case-control/timer/pause",{method:"POST",body:JSON.stringify(t)});if(!e.success)throw new Error(e.message||"Error al pausar el temporizador");if(!e.data)throw new Error("Error al pausar el temporizador");return e.data},Jue=async()=>{const t=await Ze.authenticatedRequest("/case-control/statuses");if(!t.success)throw new Error(t.message||"Error al obtener estados de casos");return t.data||[]},Que=async t=>{const e=await Ze.authenticatedRequest(`/case-control/${t}/time-entries`);if(!e.success)throw new Error(e.message||"Error al obtener entradas de tiempo");return e.data||[]},ehe=async t=>{const e=await Ze.authenticatedRequest(`/case-control/${t}/manual-time-entries`);if(!e.success)throw new Error(e.message||"Error al obtener entradas de tiempo manual");return e.data||[]};function Ni(t){if(!t)return"N/A";try{const e=typeof t=="string"?t:t.toISOString(),r=e.match(/^(\d{4})-(\d{2})-(\d{2})/);if(r){const[,s,a,i]=r;return`${i}/${a}/${s}`}return new Date(e).toLocaleDateString("es-ES",{timeZone:"UTC"})}catch{return"N/A"}}const the=(t,e="casos.xlsx",r)=>{try{const n=t.map(l=>{var c,d;return{"Nmero de Caso":l.numeroCaso,Descripcin:l.descripcion||"N/A",Origen:((c=l.origin)==null?void 0:c.nombre)||"No especificado",Aplicacin:((d=l.application)==null?void 0:d.nombre)||"No especificado","Historial del Caso":FF(l.historialCaso),"Conocimiento del Mdulo":BF(l.conocimientoModulo),"Manipulacin de Datos":zF(l.manipulacionDatos),"Claridad de Descripcin":UF(l.claridadDescripcion),"Causa del Fallo":VF(l.causaFallo),"Puntuacin Total":l.puntuacion||0,Clasificacin:l.clasificacion||"N/A",Estado:l.estado||"N/A","Fecha de Creacin":Ni(l.createdAt)}}),s=qn.json_to_sheet(n),a=qn.book_new();qn.book_append_sheet(a,s,"Casos");const i=[{wch:15},{wch:40},{wch:20},{wch:20},{wch:25},{wch:25},{wch:25},{wch:25},{wch:25},{wch:12},{wch:15},{wch:15},{wch:15}];s["!cols"]=i,gp(a,e),r&&r(` ${t.length} casos exportados a Excel exitosamente`)}catch(n){console.error("Error al exportar a Excel:",n),r&&r(" Error al exportar casos a Excel")}},rhe=(t,e="casos.csv",r)=>{try{const n=t.map(l=>{var c,d;return{"Numero de Caso":l.numeroCaso,Descripcion:(l.descripcion||"").replace(/["\n\r]/g," "),Origen:((c=l.origin)==null?void 0:c.nombre)||"No especificado",Aplicacion:((d=l.application)==null?void 0:d.nombre)||"No especificado","Historial del Caso":FF(l.historialCaso),"Conocimiento del Modulo":BF(l.conocimientoModulo),"Manipulacion de Datos":zF(l.manipulacionDatos),"Claridad de Descripcion":UF(l.claridadDescripcion),"Causa del Fallo":VF(l.causaFallo),"Puntuacion Total":l.puntuacion||0,Clasificacion:l.clasificacion||"N/A",Estado:l.estado||"N/A","Fecha de Creacion":Ni(l.createdAt)}}),s=Object.keys(n[0]||{}),a=[s.join(","),...n.map(l=>s.map(c=>{const d=l[c];return`"${String(d).replace(/"/g,'""')}"`}).join(","))].join(`
`),i=new Blob([a],{type:"text/csv;charset=utf-8;"});ET.saveAs(i,e),r&&r(` ${t.length} casos exportados a CSV exitosamente`)}catch(n){console.error("Error al exportar a CSV:",n),r&&r(" Error al exportar casos a CSV")}};function FF(t){return t==null?"N/A":["Nuevo caso","Caso recurrente conocido","Caso recurrente - nueva manifestacin"][t]||"N/A"}function BF(t){return t==null?"N/A":["Sin conocimiento","Conocimiento bsico","Conocimiento avanzado"][t]||"N/A"}function zF(t){return t==null?"N/A":["Sin manipulacin","Manipulacin bsica","Manipulacin compleja"][t]||"N/A"}function UF(t){return t==null?"N/A":["Muy confusa","Poco clara","Clara","Muy clara"][t]||"N/A"}function VF(t){return t==null?"N/A":["Error de usuario","Error del sistema","Funcionalidad faltante","Error de datos","Error de configuracin"][t]||"N/A"}const nhe=(t,e,r,n="reporte-control-casos.xlsx",s)=>{try{let a=function(h,f){var m,p,g,y,b,v;return{numeroCaso:((m=h.case)==null?void 0:m.numeroCaso)||"N/A",descripcionCaso:((p=h.case)==null?void 0:p.descripcion)||"Sin descripcin",fecha:f,tiempoTimer:0,tiempoManual:0,tiempoTotal:0,descripcionTimer:"",descripcionManual:"",estado:((g=h.status)==null?void 0:g.name)||"N/A",usuarioAsignado:((y=h.user)==null?void 0:y.fullName)||"N/A",aplicacion:((v=(b=h.case)==null?void 0:b.aplicacion)==null?void 0:v.nombre)||"N/A",fechaAsignacion:h.assignedAt?new Date(h.assignedAt).toLocaleDateString("es-ES"):"N/A",fechaInicio:h.startedAt?new Date(h.startedAt).toLocaleDateString("es-ES"):"N/A",fechaCompletado:h.completedAt?new Date(h.completedAt).toLocaleDateString("es-ES"):"N/A"}};const i={};e.forEach(h=>{var b;const f=t.find(v=>v.id===h.caseControlId);if(!f)return;const m=h.startTime?new Date(h.startTime).toISOString().split("T")[0]:"Sin fecha",p=`${((b=f.case)==null?void 0:b.numeroCaso)||"N/A"}-${f.id}-${m}`;i[p]||(i[p]=a(f,m));const g=h.durationMinutes||0,y=h.description||"";if(i[p].tiempoTimer=(i[p].tiempoTimer||0)+g,y.trim()){const v=i[p].descripcionTimer;v?i[p].descripcionTimer=`${v} | ${y}`:i[p].descripcionTimer=y}}),r.forEach(h=>{var b;const f=t.find(v=>v.id===h.caseControlId);if(!f)return;const m=h.date,p=`${((b=f.case)==null?void 0:b.numeroCaso)||"N/A"}-${f.id}-${m}`;i[p]||(i[p]=a(f,m));const g=h.durationMinutes||0,y=h.description||"";if(i[p].tiempoManual+=g,y.trim()){const v=i[p].descripcionManual;v?i[p].descripcionManual=`${v} | ${y}`:i[p].descripcionManual=y}});const l=Object.values(i).map(h=>(h.tiempoTotal=h.tiempoTimer+h.tiempoManual,{"Nmero de Caso":h.numeroCaso,"Descripcin del Caso":h.descripcionCaso,Fecha:h.fecha,"Tiempo Timer (Horas)":Number((h.tiempoTimer/60).toFixed(2)),"Tiempo Manual (Horas)":Number((h.tiempoManual/60).toFixed(2)),"Tiempo Total (Horas)":Number((h.tiempoTotal/60).toFixed(2)),"Tiempo Timer (Minutos)":h.tiempoTimer,"Tiempo Manual (Minutos)":h.tiempoManual,"Tiempo Total (Minutos)":h.tiempoTotal,"Descripcin Actividades Timer":h.descripcionTimer||"Sin descripcin","Descripcin Actividades Manual":h.descripcionManual||"Sin descripcin",Estado:h.estado,"Usuario Asignado":h.usuarioAsignado,Aplicacin:h.aplicacion,"Fecha de Asignacin":h.fechaAsignacion,"Fecha de Inicio":h.fechaInicio,"Fecha de Completado":h.fechaCompletado}));l.sort((h,f)=>{const m=h["Nmero de Caso"].localeCompare(f["Nmero de Caso"]);return m!==0?m:new Date(h.Fecha).getTime()-new Date(f.Fecha).getTime()});const c=qn.json_to_sheet(l),d=qn.book_new();qn.book_append_sheet(d,c,"Reporte Control Casos");const u=[{wch:15},{wch:40},{wch:12},{wch:18},{wch:18},{wch:18},{wch:18},{wch:18},{wch:18},{wch:50},{wch:50},{wch:15},{wch:20},{wch:20},{wch:18},{wch:18},{wch:18}];c["!cols"]=u,gp(d,n),s&&s(" Reporte de control de casos generado exitosamente")}catch(a){console.error("Error al generar reporte de control de casos:",a),s&&s(" Error al generar reporte de control de casos")}},HF=async(t="reporte-control-casos.xlsx",e,r)=>{try{const n=await jT(),s=n.map(u=>Que(u.id).catch(()=>[])),a=n.map(u=>ehe(u.id).catch(()=>[])),[i,l]=await Promise.all([Promise.all(s),Promise.all(a)]),c=i.flat(),d=l.flat();nhe(n,c,d,t,e)}catch(n){console.error("Error al obtener datos para el reporte:",n),r&&r(" Error al obtener datos para el reporte")}};function rO(t){if(!t||t===0)return"0h 0m";const e=Math.floor(t/60),r=t%60;return`${e}h ${r}m`}function WF(t){var e,r,n;return t.isCompleted?"Completado":(e=t.control)!=null&&e.isTimerActive?"En Progreso":(n=(r=t.control)==null?void 0:r.status)!=null&&n.name?t.control.status.name:t.dueDate&&new Date(t.dueDate)<new Date?"Vencido":"Pendiente"}const she=(t,e="todos.xlsx",r)=>{try{const n=t.map(l=>{var c,d,u,h;return{Ttulo:l.title,Descripcin:l.description||"N/A",Prioridad:((c=l.priority)==null?void 0:c.name)||"N/A","Asignado a":((d=l.assignedUser)==null?void 0:d.fullName)||"Sin asignar","Creado por":((u=l.createdByUser)==null?void 0:u.fullName)||"N/A",Estado:WF(l),"Fecha de Vencimiento":l.dueDate?Ni(l.dueDate):"Sin fecha","Tiempo Estimado":rO(l.estimatedMinutes),"Tiempo Trabajado":rO(((h=l.control)==null?void 0:h.totalTimeMinutes)||0),"Fecha de Creacin":Ni(l.createdAt),"Fecha de Completado":l.completedAt?Ni(l.completedAt):"N/A"}}),s=qn.json_to_sheet(n),a=qn.book_new();qn.book_append_sheet(a,s,"TODOs");const i=[{wch:30},{wch:50},{wch:15},{wch:25},{wch:25},{wch:15},{wch:18},{wch:15},{wch:15},{wch:18},{wch:18}];s["!cols"]=i,gp(a,e),r&&r(` ${t.length} TODOs exportados a Excel exitosamente`)}catch(n){console.error("Error al exportar TODOs a Excel:",n),r&&r(" Error al exportar TODOs a Excel")}},ahe=(t,e="todos.csv",r)=>{try{const n=t.map(l=>{var c,d,u,h;return{Titulo:l.title.replace(/["\n\r]/g," "),Descripcion:(l.description||"").replace(/["\n\r]/g," "),Prioridad:((c=l.priority)==null?void 0:c.name)||"N/A","Asignado a":((d=l.assignedUser)==null?void 0:d.fullName)||"Sin asignar","Creado por":((u=l.createdByUser)==null?void 0:u.fullName)||"N/A",Estado:WF(l),"Fecha de Vencimiento":l.dueDate?Ni(l.dueDate):"Sin fecha","Tiempo Estimado (min)":l.estimatedMinutes||0,"Tiempo Trabajado (min)":((h=l.control)==null?void 0:h.totalTimeMinutes)||0,"Fecha de Creacion":Ni(l.createdAt),"Fecha de Completado":l.completedAt?Ni(l.completedAt):"N/A"}}),s=Object.keys(n[0]||{}),a=[s.join(","),...n.map(l=>s.map(c=>{const d=l[c];return`"${String(d).replace(/"/g,'""')}"`}).join(","))].join(`
`),i=new Blob([a],{type:"text/csv;charset=utf-8;"});ET.saveAs(i,e),r&&r(` ${t.length} TODOs exportados a CSV exitosamente`)}catch(n){console.error("Error al exportar TODOs a CSV:",n),r&&r(" Error al exportar TODOs a CSV")}};function qF(t){return{note:"Nota",solution:"Solucin",guide:"Gua",faq:"FAQ",template:"Plantilla",procedure:"Procedimiento"}[t]||t}function GF(t){return{low:"Baja",medium:"Media",high:"Alta",urgent:"Urgente"}[t]||t}function KF(t){return{1:"Muy Fcil",2:"Fcil",3:"Intermedio",4:"Difcil",5:"Muy Difcil"}[t]||`Nivel ${t}`}function ZF(t){return t.isArchived?"Archivada":t.isPublished?t.isTemplate?"Plantilla":"Publicada":"Borrador"}const ihe=(t,e="notas.xlsx",r)=>{try{const n=t.map(l=>{var c,d,u,h;return{Ttulo:l.title,Contenido:l.content.substring(0,500)+(l.content.length>500?"...":""),Tipo:qF(l.noteType),Prioridad:GF(l.priority),Dificultad:KF(l.difficultyLevel),Etiquetas:((c=l.tags)==null?void 0:c.join(", "))||"Sin etiquetas","Caso Asociado":((d=l.case)==null?void 0:d.numeroCaso)||"Sin caso",Autor:((u=l.author)==null?void 0:u.fullName)||"N/A","Asignado a":((h=l.assignedUser)==null?void 0:h.fullName)||"Sin asignar",Estado:ZF(l),Importante:l.isImportant?"S":"No",Vistas:l.viewCount||0,"Votos Positivos":l.helpfulCount||0,"Votos Negativos":l.notHelpfulCount||0,Versin:l.version||1,"Fecha de Creacin":Ni(l.createdAt),"ltima Actualizacin":Ni(l.updatedAt)}}),s=qn.json_to_sheet(n),a=qn.book_new();qn.book_append_sheet(a,s,"Notas");const i=[{wch:30},{wch:60},{wch:15},{wch:12},{wch:15},{wch:30},{wch:15},{wch:20},{wch:20},{wch:12},{wch:12},{wch:10},{wch:15},{wch:15},{wch:10},{wch:18},{wch:18}];s["!cols"]=i,gp(a,e),r&&r(` ${t.length} notas exportadas a Excel exitosamente`)}catch(n){console.error("Error al exportar notas a Excel:",n),r&&r(" Error al exportar notas a Excel")}},ohe=(t,e="notas.csv",r)=>{try{const n=t.map(l=>{var c,d,u,h;return{Titulo:l.title.replace(/["\n\r]/g," "),Contenido:l.content.substring(0,500).replace(/["\n\r]/g," ")+(l.content.length>500?"...":""),Tipo:qF(l.noteType),Prioridad:GF(l.priority),Dificultad:KF(l.difficultyLevel),Etiquetas:((c=l.tags)==null?void 0:c.join("; "))||"Sin etiquetas","Caso Asociado":((d=l.case)==null?void 0:d.numeroCaso)||"Sin caso",Autor:((u=l.author)==null?void 0:u.fullName)||"N/A","Asignado a":((h=l.assignedUser)==null?void 0:h.fullName)||"Sin asignar",Estado:ZF(l),Importante:l.isImportant?"Si":"No",Vistas:l.viewCount||0,"Votos Positivos":l.helpfulCount||0,"Votos Negativos":l.notHelpfulCount||0,Version:l.version||1,"Fecha de Creacion":Ni(l.createdAt),"Ultima Actualizacion":Ni(l.updatedAt)}}),s=Object.keys(n[0]||{}),a=[s.join(","),...n.map(l=>s.map(c=>{const d=l[c];return`"${String(d).replace(/"/g,'""')}"`}).join(","))].join(`
`),i=new Blob([a],{type:"text/csv;charset=utf-8;"});ET.saveAs(i,e),r&&r(` ${t.length} notas exportadas a CSV exitosamente`)}catch(n){console.error("Error al exportar notas a CSV:",n),r&&r(" Error al exportar notas a CSV")}},lhe=()=>{const[t,e]=x.useState(!1);return{exportToExcel:async(a,i={})=>{var l,c;if(a.length===0){(l=i.onError)==null||l.call(i,"No hay casos para exportar");return}try{e(!0),await the(a,i.filename,i.onSuccess)}catch(d){console.error("Error exporting to Excel:",d),(c=i.onError)==null||c.call(i,"Error al exportar casos a Excel")}finally{e(!1)}},exportToCSV:async(a,i={})=>{var l,c;if(a.length===0){(l=i.onError)==null||l.call(i,"No hay casos para exportar");return}try{e(!0),await rhe(a,i.filename,i.onSuccess)}catch(d){console.error("Error exporting to CSV:",d),(c=i.onError)==null||c.call(i,"Error al exportar casos a CSV")}finally{e(!1)}},exportControlReport:async(a,i={})=>{var l,c;if(a.length===0){(l=i.onError)==null||l.call(i,"No hay controles de casos para exportar");return}try{e(!0),await HF(i.filename,i.onSuccess,i.onError)}catch(d){console.error("Error exporting control report:",d),(c=i.onError)==null||c.call(i,"Error al exportar reporte de control")}finally{e(!1)}},isExporting:t}},che=({filteredCases:t,onSuccess:e,onError:r,className:n=""})=>{const{exportToExcel:s,exportToCSV:a,isExporting:i}=lhe(),l=()=>{const h=new Date().toISOString().split("T")[0];s(t,{filename:`casos-${h}.xlsx`,onSuccess:e,onError:r})},c=()=>{const h=new Date().toISOString().split("T")[0];a(t,{filename:`casos-${h}.csv`,onSuccess:e,onError:r})},d=t.length>0,u=t.length;return o.jsxs("div",{className:`flex space-x-2 ${n}`,children:[o.jsxs(ae,{variant:"secondary",size:"sm",onClick:c,disabled:!d||i,title:d?`Exportar ${u} caso(s) a CSV`:"No hay casos para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"CSV"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:l,disabled:!d||i,title:d?`Exportar ${u} caso(s) a Excel`:"No hay casos para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"Excel"]})]})};function YF(t){return t>=12?"Alta Complejidad":t>=7?"Media Complejidad":"Baja Complejidad"}function XF(t,e,r,n,s){return t+e+r+n+s}function dhe(t){switch(t){case"Baja Complejidad":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"Media Complejidad":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"Alta Complejidad":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800"}}function uhe(t){if(!t)return"Fecha no disponible";const[e,r,n]=t.split("-").map(Number),s=new Date(e,r-1,n);return isNaN(s.getTime())?"Fecha invlida":`${n.toString().padStart(2,"0")}/${r.toString().padStart(2,"0")}/${e}`}const hhe=t=>{switch(t){case"nuevo":return"text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20";case"en_progreso":return"text-orange-700 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20";case"pendiente":return"text-yellow-700 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20";case"resuelto":return"text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20";case"cerrado":return"text-gray-700 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20";default:return"text-gray-700 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20"}},fhe=()=>{var ee;const t=Jd(),[e,r]=x.useState([]),[n,s]=x.useState([]),[a,i]=x.useState([]),[l,c]=x.useState(!0),[d,u]=x.useState(!1),[h,f]=x.useState(null),[m,p]=x.useState(null),[g,y]=x.useState(""),[b,v]=x.useState(""),[w,k]=x.useState(""),[N,S]=x.useState(""),[C,E]=x.useState({isOpen:!1,caseId:"",caseNumber:""});x.useEffect(()=>{T()},[]),x.useEffect(()=>{var Q;(Q=t.state)!=null&&Q.refresh&&T()},[(ee=t.state)==null?void 0:ee.refresh]);const T=async()=>{if(!d)try{u(!0),f(null),e.length===0&&c(!0);const[Q,J,_]=await Promise.all([Kf.getAllCases(),n$.getAll(),sT.getAll()]);r(Q||[]),s(J||[]),i(_||[])}catch(Q){console.error("Error loading data:",Q),f("Error al cargar los datos")}finally{c(!1),u(!1)}},R=x.useMemo(()=>e?e.filter(Q=>{var K,F;const J=Q.numeroCaso.toLowerCase().includes(g.toLowerCase()),_=!b||((K=Q.origin)==null?void 0:K.id)===b,H=!w||((F=Q.application)==null?void 0:F.id)===w,P=!N||Q.clasificacion===N;return J&&_&&H&&P}):[],[e,g,b,w,N]),B=async Q=>{try{await Kf.deleteCase(Q),await T(),E({isOpen:!1,caseId:"",caseNumber:""})}catch(J){console.error("Error deleting case:",J),f("Error al eliminar el caso")}},M=()=>{y(""),v(""),k(""),S("")},L=Q=>{p({message:Q,type:"success"}),setTimeout(()=>p(null),3e3)},V=Q=>{p({message:Q,type:"error"}),setTimeout(()=>p(null),3e3)};return l?o.jsx(kd,{children:o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Lr,{size:"lg"})})}):h?o.jsx(kd,{children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-red-600 text-lg mb-4",children:h}),o.jsx("button",{onClick:()=>{f(null),T()},className:"btn-base btn-primary btn-sm",children:"Intentar de nuevo"})]})}):o.jsxs(kd,{children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestin de Casos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Administra y realiza seguimiento de todos los casos del sistema"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(che,{filteredCases:R,onSuccess:L,onError:V}),o.jsxs(cs,{to:"/cases/new",className:"btn-base btn-primary btn-sm flex items-center justify-center gap-2 link-btn min-w-[140px]",children:[o.jsx(GE,{size:"sm"}),"Nuevo Caso"]})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:o.jsx(Ane,{size:"sm",color:"neutral"})}),o.jsx("input",{type:"text",placeholder:"Buscar por nmero de caso...",value:g,onChange:Q=>y(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),o.jsxs("select",{value:b,onChange:Q=>v(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"",children:"Todos los orgenes"}),n.map(Q=>o.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),o.jsxs("select",{value:w,onChange:Q=>k(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas las aplicaciones"}),a.map(Q=>o.jsx("option",{value:Q.id,children:Q.nombre},Q.id))]}),o.jsxs("select",{value:N,onChange:Q=>S(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas las complejidades"}),o.jsx("option",{value:"Baja Complejidad",children:"Baja Complejidad"}),o.jsx("option",{value:"Complejidad Media",children:"Complejidad Media"}),o.jsx("option",{value:"Alta Complejidad",children:"Alta Complejidad"}),o.jsx("option",{value:"Complejidad Crtica",children:"Complejidad Crtica"})]}),o.jsx(ae,{onClick:M,variant:"secondary",children:"Limpiar filtros"})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 p-2 md:p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:o.jsx(O,{action:"document",size:"md",color:"blue",title:"Total de casos"})}),o.jsxs("div",{className:"ml-3 md:ml-4 min-w-0",children:[o.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Total"}),o.jsx("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:e.length})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 p-2 md:p-3 bg-green-100 dark:bg-green-900 rounded-lg",children:o.jsx(O,{action:"check",size:"md",color:"green",title:"Casos activos"})}),o.jsxs("div",{className:"ml-3 md:ml-4 min-w-0",children:[o.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Activos"}),o.jsx("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(Q=>Q.estado!=="cerrado").length})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:o.jsx(O,{action:"warning",size:"md",color:"yellow",title:"Casos de alta complejidad"})}),o.jsxs("div",{className:"ml-3 md:ml-4 min-w-0",children:[o.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Complejos"}),o.jsx("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(Q=>Q.clasificacion==="Alta Complejidad").length})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 p-2 md:p-3 bg-red-100 dark:bg-red-900 rounded-lg",children:o.jsx(O,{action:"filter",size:"md",color:"red",title:"Casos filtrados"})}),o.jsxs("div",{className:"ml-3 md:ml-4 min-w-0",children:[o.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Filtrados"}),o.jsx("p",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:R.length})]})]})})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Caso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Origen"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aplicacin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complejidad"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:R.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.length===0?"No hay casos registrados":"No se encontraron casos que coincidan con los filtros"})}):R.map(Q=>{var J,_;return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Q.numeroCaso}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",Q.id.slice(0,8),"..."]})]}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs truncate",children:Q.descripcion})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((J=Q.origin)==null?void 0:J.nombre)||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((_=Q.application)==null?void 0:_.nombre)||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:uhe(Q.fecha)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${dhe(Q.clasificacion)}`,children:Q.clasificacion}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Q.puntuacion?`${Math.round(Q.puntuacion)}/15`:"N/A"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${hhe(Q.estado)}`,children:Q.estado})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[o.jsx(cs,{to:`/cases/view/${Q.id}`,className:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200",children:o.jsx(Y9,{size:"sm",title:"Ver detalles del caso"})}),o.jsx(cs,{to:`/cases/edit/${Q.id}`,className:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors duration-200",children:o.jsx(X9,{size:"sm",title:"Editar caso"})}),o.jsx("button",{onClick:()=>E({isOpen:!0,caseId:Q.id,caseNumber:Q.numeroCaso}),className:"inline-flex items-center justify-center w-8 h-8 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200",children:o.jsx(J9,{size:"sm",title:"Eliminar caso"})})]})})]},Q.id)})})]})})})]}),o.jsx(Ha,{isOpen:C.isOpen,onClose:()=>E({isOpen:!1,caseId:"",caseNumber:""}),onConfirm:()=>B(C.caseId),title:"Eliminar Caso",message:`Ests seguro de que quieres eliminar el caso "${C.caseNumber}"? Esta accin no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}),m&&o.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${m.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:m.message})]})};var Wx=t=>t.type==="checkbox",Tu=t=>t instanceof Date,Vs=t=>t==null;const JF=t=>typeof t=="object";var fn=t=>!Vs(t)&&!Array.isArray(t)&&JF(t)&&!Tu(t),mhe=t=>fn(t)&&t.target?Wx(t.target)?t.target.checked:t.target.value:t,phe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ghe=(t,e)=>t.has(phe(e)),xhe=t=>{const e=t.constructor&&t.constructor.prototype;return fn(e)&&e.hasOwnProperty("isPrototypeOf")},TT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dn(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(TT&&(t instanceof Blob||n))&&(r||fn(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!xhe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Dn(t[s]));else return t;return e}var Ok=t=>/^\w*$/.test(t),bn=t=>t===void 0,_T=t=>Array.isArray(t)?t.filter(Boolean):[],AT=t=>_T(t.replace(/["|']|\]/g,"").split(/\.|\[/)),rt=(t,e,r)=>{if(!e||!fn(t))return r;const n=(Ok(e)?[e]:AT(e)).reduce((s,a)=>Vs(s)?s:s[a],t);return bn(n)||n===t?bn(t[e])?r:t[e]:n},Ao=t=>typeof t=="boolean",Sr=(t,e,r)=>{let n=-1;const s=Ok(e)?[e]:AT(e),a=s.length,i=a-1;for(;++n<a;){const l=s[n];let c=r;if(n!==i){const d=t[l];c=fn(d)||Array.isArray(d)?d:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const nO={BLUR:"blur",FOCUS_OUT:"focusout"},Gi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ul={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yhe=st.createContext(null);yhe.displayName="HookFormContext";var vhe=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const i=a;return e._proxyFormState[i]!==Gi.all&&(e._proxyFormState[i]=!n||Gi.all),t[i]}});return s};const bhe=typeof window<"u"?st.useLayoutEffect:st.useEffect;var $o=t=>typeof t=="string",whe=(t,e,r,n,s)=>$o(t)?(n&&e.watch.add(t),rt(r,t,s)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),rt(r,a))):(n&&(e.watchAll=!0),r),JE=t=>Vs(t)||!JF(t);function Lc(t,e,r=new WeakSet){if(JE(t)||JE(e))return t===e;if(Tu(t)&&Tu(e))return t.getTime()===e.getTime();const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const a of n){const i=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=e[a];if(Tu(i)&&Tu(l)||fn(i)&&fn(l)||Array.isArray(i)&&Array.isArray(l)?!Lc(i,l,r):i!==l)return!1}}return!0}var QF=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},J0=t=>Array.isArray(t)?t:[t],sO=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},sa=t=>fn(t)&&!Object.keys(t).length,MT=t=>t.type==="file",Ki=t=>typeof t=="function",pb=t=>{if(!TT)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},eB=t=>t.type==="select-multiple",OT=t=>t.type==="radio",khe=t=>OT(t)||Wx(t),ZC=t=>pb(t)&&t.isConnected;function Che(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=bn(t)?n++:t[e[n++]];return t}function Nhe(t){for(const e in t)if(t.hasOwnProperty(e)&&!bn(t[e]))return!1;return!0}function xn(t,e){const r=Array.isArray(e)?e:Ok(e)?[e]:AT(e),n=r.length===1?t:Che(t,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(fn(n)&&sa(n)||Array.isArray(n)&&Nhe(n))&&xn(t,r.slice(0,-1)),t}var tB=t=>{for(const e in t)if(Ki(t[e]))return!0;return!1};function gb(t,e={}){const r=Array.isArray(t);if(fn(t)||r)for(const n in t)Array.isArray(t[n])||fn(t[n])&&!tB(t[n])?(e[n]=Array.isArray(t[n])?[]:{},gb(t[n],e[n])):Vs(t[n])||(e[n]=!0);return e}function rB(t,e,r){const n=Array.isArray(t);if(fn(t)||n)for(const s in t)Array.isArray(t[s])||fn(t[s])&&!tB(t[s])?bn(e)||JE(r[s])?r[s]=Array.isArray(t[s])?gb(t[s],[]):{...gb(t[s])}:rB(t[s],Vs(e)?{}:e[s],r[s]):r[s]=!Lc(t[s],e[s]);return r}var o0=(t,e)=>rB(t,e,gb(e));const aO={value:!1,isValid:!1},iO={value:!0,isValid:!0};var nB=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!bn(t[0].attributes.value)?bn(t[0].value)||t[0].value===""?iO:{value:t[0].value,isValid:!0}:iO:aO}return aO},sB=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>bn(t)?t:e?t===""?NaN:t&&+t:r&&$o(t)?new Date(t):n?n(t):t;const oO={isValid:!1,value:null};var aB=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,oO):oO;function lO(t){const e=t.ref;return MT(e)?e.files:OT(e)?aB(t.refs).value:eB(e)?[...e.selectedOptions].map(({value:r})=>r):Wx(e)?nB(t.refs).value:sB(bn(e.value)?t.ref.value:e.value,t)}var She=(t,e,r,n)=>{const s={};for(const a of t){const i=rt(e,a);i&&Sr(s,a,i._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},xb=t=>t instanceof RegExp,l0=t=>bn(t)?t:xb(t)?t.source:fn(t)?xb(t.value)?t.value.source:t.value:t,cO=t=>({isOnSubmit:!t||t===Gi.onSubmit,isOnBlur:t===Gi.onBlur,isOnChange:t===Gi.onChange,isOnAll:t===Gi.all,isOnTouch:t===Gi.onTouched});const dO="AsyncFunction";var Ehe=t=>!!t&&!!t.validate&&!!(Ki(t.validate)&&t.validate.constructor.name===dO||fn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===dO)),jhe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),uO=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Q0=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const a=rt(t,s);if(a){const{_f:i,...l}=a;if(i){if(i.refs&&i.refs[0]&&e(i.refs[0],s)&&!n)return!0;if(i.ref&&e(i.ref,i.name)&&!n)return!0;if(Q0(l,e))break}else if(fn(l)&&Q0(l,e))break}}};function hO(t,e,r){const n=rt(t,r);if(n||Ok(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),i=rt(e,a),l=rt(t,a);if(i&&!Array.isArray(i)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:r}}var The=(t,e,r,n)=>{r(t);const{name:s,...a}=t;return sa(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(i=>e[i]===(!n||Gi.all))},_he=(t,e,r)=>!t||!e||t===e||J0(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),Ahe=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,Mhe=(t,e)=>!_T(rt(t,e)).length&&xn(t,e),Ohe=(t,e,r)=>{const n=J0(rt(t,r));return Sr(n,"root",e[r]),Sr(t,r,n),t},ev=t=>$o(t);function fO(t,e,r="validate"){if(ev(t)||Array.isArray(t)&&t.every(ev)||Ao(t)&&!t)return{type:r,message:ev(t)?t:"",ref:e}}var tf=t=>fn(t)&&!xb(t)?t:{value:t,message:""},mO=async(t,e,r,n,s,a)=>{const{ref:i,refs:l,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:m,validate:p,name:g,valueAsNumber:y,mount:b}=t._f,v=rt(r,g);if(!b||e.has(g))return{};const w=l?l[0]:i,k=M=>{s&&w.reportValidity&&(w.setCustomValidity(Ao(M)?"":M||""),w.reportValidity())},N={},S=OT(i),C=Wx(i),E=S||C,T=(y||MT(i))&&bn(i.value)&&bn(v)||pb(i)&&i.value===""||v===""||Array.isArray(v)&&!v.length,R=QF.bind(null,g,n,N),B=(M,L,V,ee=ul.maxLength,Q=ul.minLength)=>{const J=M?L:V;N[g]={type:M?ee:Q,message:J,ref:i,...R(M?ee:Q,J)}};if(a?!Array.isArray(v)||!v.length:c&&(!E&&(T||Vs(v))||Ao(v)&&!v||C&&!nB(l).isValid||S&&!aB(l).isValid)){const{value:M,message:L}=ev(c)?{value:!!c,message:c}:tf(c);if(M&&(N[g]={type:ul.required,message:L,ref:w,...R(ul.required,L)},!n))return k(L),N}if(!T&&(!Vs(h)||!Vs(f))){let M,L;const V=tf(f),ee=tf(h);if(!Vs(v)&&!isNaN(v)){const Q=i.valueAsNumber||v&&+v;Vs(V.value)||(M=Q>V.value),Vs(ee.value)||(L=Q<ee.value)}else{const Q=i.valueAsDate||new Date(v),J=P=>new Date(new Date().toDateString()+" "+P),_=i.type=="time",H=i.type=="week";$o(V.value)&&v&&(M=_?J(v)>J(V.value):H?v>V.value:Q>new Date(V.value)),$o(ee.value)&&v&&(L=_?J(v)<J(ee.value):H?v<ee.value:Q<new Date(ee.value))}if((M||L)&&(B(!!M,V.message,ee.message,ul.max,ul.min),!n))return k(N[g].message),N}if((d||u)&&!T&&($o(v)||a&&Array.isArray(v))){const M=tf(d),L=tf(u),V=!Vs(M.value)&&v.length>+M.value,ee=!Vs(L.value)&&v.length<+L.value;if((V||ee)&&(B(V,M.message,L.message),!n))return k(N[g].message),N}if(m&&!T&&$o(v)){const{value:M,message:L}=tf(m);if(xb(M)&&!v.match(M)&&(N[g]={type:ul.pattern,message:L,ref:i,...R(ul.pattern,L)},!n))return k(L),N}if(p){if(Ki(p)){const M=await p(v,r),L=fO(M,w);if(L&&(N[g]={...L,...R(ul.validate,L.message)},!n))return k(L.message),N}else if(fn(p)){let M={};for(const L in p){if(!sa(M)&&!n)break;const V=fO(await p[L](v,r),w,L);V&&(M={...V,...R(L,V.message)},k(V.message),n&&(N[g]=M))}if(!sa(M)&&(N[g]={ref:w,...M},!n))return N}}return k(!0),N};const Rhe={mode:Gi.onSubmit,reValidateMode:Gi.onChange,shouldFocusError:!0};function Phe(t={}){let e={...Rhe,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ki(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=fn(e.defaultValues)||fn(e.values)?Dn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Dn(s),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:sO(),state:sO()},m=e.criteriaMode===Gi.all,p=re=>ce=>{clearTimeout(d),d=setTimeout(re,ce)},g=async re=>{if(!e.disabled&&(u.isValid||h.isValid||re)){const ce=e.resolver?sa((await C()).errors):await T(n,!0);ce!==r.isValid&&f.state.next({isValid:ce})}},y=(re,ce)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((re||Array.from(l.mount)).forEach(ge=>{ge&&(ce?Sr(r.validatingFields,ge,ce):xn(r.validatingFields,ge))}),f.state.next({validatingFields:r.validatingFields,isValidating:!sa(r.validatingFields)}))},b=(re,ce=[],ge,Ue,Re=!0,Me=!0)=>{if(Ue&&ge&&!e.disabled){if(i.action=!0,Me&&Array.isArray(rt(n,re))){const Qe=ge(rt(n,re),Ue.argA,Ue.argB);Re&&Sr(n,re,Qe)}if(Me&&Array.isArray(rt(r.errors,re))){const Qe=ge(rt(r.errors,re),Ue.argA,Ue.argB);Re&&Sr(r.errors,re,Qe),Mhe(r.errors,re)}if((u.touchedFields||h.touchedFields)&&Me&&Array.isArray(rt(r.touchedFields,re))){const Qe=ge(rt(r.touchedFields,re),Ue.argA,Ue.argB);Re&&Sr(r.touchedFields,re,Qe)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=o0(s,a)),f.state.next({name:re,isDirty:B(re,ce),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Sr(a,re,ce)},v=(re,ce)=>{Sr(r.errors,re,ce),f.state.next({errors:r.errors})},w=re=>{r.errors=re,f.state.next({errors:r.errors,isValid:!1})},k=(re,ce,ge,Ue)=>{const Re=rt(n,re);if(Re){const Me=rt(a,re,bn(ge)?rt(s,re):ge);bn(Me)||Ue&&Ue.defaultChecked||ce?Sr(a,re,ce?Me:lO(Re._f)):V(re,Me),i.mount&&g()}},N=(re,ce,ge,Ue,Re)=>{let Me=!1,Qe=!1;const I={name:re};if(!e.disabled){if(!ge||Ue){(u.isDirty||h.isDirty)&&(Qe=r.isDirty,r.isDirty=I.isDirty=B(),Me=Qe!==I.isDirty);const j=Lc(rt(s,re),ce);Qe=!!rt(r.dirtyFields,re),j?xn(r.dirtyFields,re):Sr(r.dirtyFields,re,!0),I.dirtyFields=r.dirtyFields,Me=Me||(u.dirtyFields||h.dirtyFields)&&Qe!==!j}if(ge){const j=rt(r.touchedFields,re);j||(Sr(r.touchedFields,re,ge),I.touchedFields=r.touchedFields,Me=Me||(u.touchedFields||h.touchedFields)&&j!==ge)}Me&&Re&&f.state.next(I)}return Me?I:{}},S=(re,ce,ge,Ue)=>{const Re=rt(r.errors,re),Me=(u.isValid||h.isValid)&&Ao(ce)&&r.isValid!==ce;if(e.delayError&&ge?(c=p(()=>v(re,ge)),c(e.delayError)):(clearTimeout(d),c=null,ge?Sr(r.errors,re,ge):xn(r.errors,re)),(ge?!Lc(Re,ge):Re)||!sa(Ue)||Me){const Qe={...Ue,...Me&&Ao(ce)?{isValid:ce}:{},errors:r.errors,name:re};r={...r,...Qe},f.state.next(Qe)}},C=async re=>{y(re,!0);const ce=await e.resolver(a,e.context,She(re||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return y(re),ce},E=async re=>{const{errors:ce}=await C(re);if(re)for(const ge of re){const Ue=rt(ce,ge);Ue?Sr(r.errors,ge,Ue):xn(r.errors,ge)}else r.errors=ce;return ce},T=async(re,ce,ge={valid:!0})=>{for(const Ue in re){const Re=re[Ue];if(Re){const{_f:Me,...Qe}=Re;if(Me){const I=l.array.has(Me.name),j=Re._f&&Ehe(Re._f);j&&u.validatingFields&&y([Ue],!0);const A=await mO(Re,l.disabled,a,m,e.shouldUseNativeValidation&&!ce,I);if(j&&u.validatingFields&&y([Ue]),A[Me.name]&&(ge.valid=!1,ce))break;!ce&&(rt(A,Me.name)?I?Ohe(r.errors,A,Me.name):Sr(r.errors,Me.name,A[Me.name]):xn(r.errors,Me.name))}!sa(Qe)&&await T(Qe,ce,ge)}}return ge.valid},R=()=>{for(const re of l.unMount){const ce=rt(n,re);ce&&(ce._f.refs?ce._f.refs.every(ge=>!ZC(ge)):!ZC(ce._f.ref))&&ue(re)}l.unMount=new Set},B=(re,ce)=>!e.disabled&&(re&&ce&&Sr(a,re,ce),!Lc(P(),s)),M=(re,ce,ge)=>whe(re,l,{...i.mount?a:bn(ce)?s:$o(re)?{[re]:ce}:ce},ge,ce),L=re=>_T(rt(i.mount?a:s,re,e.shouldUnregister?rt(s,re,[]):[])),V=(re,ce,ge={})=>{const Ue=rt(n,re);let Re=ce;if(Ue){const Me=Ue._f;Me&&(!Me.disabled&&Sr(a,re,sB(ce,Me)),Re=pb(Me.ref)&&Vs(ce)?"":ce,eB(Me.ref)?[...Me.ref.options].forEach(Qe=>Qe.selected=Re.includes(Qe.value)):Me.refs?Wx(Me.ref)?Me.refs.forEach(Qe=>{(!Qe.defaultChecked||!Qe.disabled)&&(Array.isArray(Re)?Qe.checked=!!Re.find(I=>I===Qe.value):Qe.checked=Re===Qe.value||!!Re)}):Me.refs.forEach(Qe=>Qe.checked=Qe.value===Re):MT(Me.ref)?Me.ref.value="":(Me.ref.value=Re,Me.ref.type||f.state.next({name:re,values:Dn(a)})))}(ge.shouldDirty||ge.shouldTouch)&&N(re,Re,ge.shouldTouch,ge.shouldDirty,!0),ge.shouldValidate&&H(re)},ee=(re,ce,ge)=>{for(const Ue in ce){if(!ce.hasOwnProperty(Ue))return;const Re=ce[Ue],Me=re+"."+Ue,Qe=rt(n,Me);(l.array.has(re)||fn(Re)||Qe&&!Qe._f)&&!Tu(Re)?ee(Me,Re,ge):V(Me,Re,ge)}},Q=(re,ce,ge={})=>{const Ue=rt(n,re),Re=l.array.has(re),Me=Dn(ce);Sr(a,re,Me),Re?(f.array.next({name:re,values:Dn(a)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ge.shouldDirty&&f.state.next({name:re,dirtyFields:o0(s,a),isDirty:B(re,Me)})):Ue&&!Ue._f&&!Vs(Me)?ee(re,Me,ge):V(re,Me,ge),uO(re,l)&&f.state.next({...r,name:re}),f.state.next({name:i.mount?re:void 0,values:Dn(a)})},J=async re=>{i.mount=!0;const ce=re.target;let ge=ce.name,Ue=!0;const Re=rt(n,ge),Me=j=>{Ue=Number.isNaN(j)||Tu(j)&&isNaN(j.getTime())||Lc(j,rt(a,ge,j))},Qe=cO(e.mode),I=cO(e.reValidateMode);if(Re){let j,A;const U=ce.type?lO(Re._f):mhe(re),ie=re.type===nO.BLUR||re.type===nO.FOCUS_OUT,he=!jhe(Re._f)&&!e.resolver&&!rt(r.errors,ge)&&!Re._f.deps||Ahe(ie,rt(r.touchedFields,ge),r.isSubmitted,I,Qe),be=uO(ge,l,ie);Sr(a,ge,U),ie?(!ce||!ce.readOnly)&&(Re._f.onBlur&&Re._f.onBlur(re),c&&c(0)):Re._f.onChange&&Re._f.onChange(re);const bt=N(ge,U,ie),er=!sa(bt)||be;if(!ie&&f.state.next({name:ge,type:re.type,values:Dn(a)}),he)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?ie&&g():ie||g()),er&&f.state.next({name:ge,...be?{}:bt});if(!ie&&be&&f.state.next({...r}),e.resolver){const{errors:Yt}=await C([ge]);if(Me(U),Ue){const sr=hO(r.errors,n,ge),zt=hO(Yt,n,sr.name||ge);j=zt.error,ge=zt.name,A=sa(Yt)}}else y([ge],!0),j=(await mO(Re,l.disabled,a,m,e.shouldUseNativeValidation))[ge],y([ge]),Me(U),Ue&&(j?A=!1:(u.isValid||h.isValid)&&(A=await T(n,!0)));Ue&&(Re._f.deps&&H(Re._f.deps),S(ge,A,j,bt))}},_=(re,ce)=>{if(rt(r.errors,ce)&&re.focus)return re.focus(),1},H=async(re,ce={})=>{let ge,Ue;const Re=J0(re);if(e.resolver){const Me=await E(bn(re)?re:Re);ge=sa(Me),Ue=re?!Re.some(Qe=>rt(Me,Qe)):ge}else re?(Ue=(await Promise.all(Re.map(async Me=>{const Qe=rt(n,Me);return await T(Qe&&Qe._f?{[Me]:Qe}:Qe)}))).every(Boolean),!(!Ue&&!r.isValid)&&g()):Ue=ge=await T(n);return f.state.next({...!$o(re)||(u.isValid||h.isValid)&&ge!==r.isValid?{}:{name:re},...e.resolver||!re?{isValid:ge}:{},errors:r.errors}),ce.shouldFocus&&!Ue&&Q0(n,_,re?Re:l.mount),Ue},P=re=>{const ce={...i.mount?a:s};return bn(re)?ce:$o(re)?rt(ce,re):re.map(ge=>rt(ce,ge))},K=(re,ce)=>({invalid:!!rt((ce||r).errors,re),isDirty:!!rt((ce||r).dirtyFields,re),error:rt((ce||r).errors,re),isValidating:!!rt(r.validatingFields,re),isTouched:!!rt((ce||r).touchedFields,re)}),F=re=>{re&&J0(re).forEach(ce=>xn(r.errors,ce)),f.state.next({errors:re?r.errors:{}})},ne=(re,ce,ge)=>{const Ue=(rt(n,re,{_f:{}})._f||{}).ref,Re=rt(r.errors,re)||{},{ref:Me,message:Qe,type:I,...j}=Re;Sr(r.errors,re,{...j,...ce,ref:Ue}),f.state.next({name:re,errors:r.errors,isValid:!1}),ge&&ge.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},z=(re,ce)=>Ki(re)?f.state.subscribe({next:ge=>"values"in ge&&re(M(void 0,ce),ge)}):M(re,ce,!0),Z=re=>f.state.subscribe({next:ce=>{_he(re.name,ce.name,re.exact)&&The(ce,re.formState||u,je,re.reRenderRoot)&&re.callback({values:{...a},...r,...ce,defaultValues:s})}}).unsubscribe,oe=re=>(i.mount=!0,h={...h,...re.formState},Z({...re,formState:h})),ue=(re,ce={})=>{for(const ge of re?J0(re):l.mount)l.mount.delete(ge),l.array.delete(ge),ce.keepValue||(xn(n,ge),xn(a,ge)),!ce.keepError&&xn(r.errors,ge),!ce.keepDirty&&xn(r.dirtyFields,ge),!ce.keepTouched&&xn(r.touchedFields,ge),!ce.keepIsValidating&&xn(r.validatingFields,ge),!e.shouldUnregister&&!ce.keepDefaultValue&&xn(s,ge);f.state.next({values:Dn(a)}),f.state.next({...r,...ce.keepDirty?{isDirty:B()}:{}}),!ce.keepIsValid&&g()},_e=({disabled:re,name:ce})=>{(Ao(re)&&i.mount||re||l.disabled.has(ce))&&(re?l.disabled.add(ce):l.disabled.delete(ce))},we=(re,ce={})=>{let ge=rt(n,re);const Ue=Ao(ce.disabled)||Ao(e.disabled);return Sr(n,re,{...ge||{},_f:{...ge&&ge._f?ge._f:{ref:{name:re}},name:re,mount:!0,...ce}}),l.mount.add(re),ge?_e({disabled:Ao(ce.disabled)?ce.disabled:e.disabled,name:re}):k(re,!0,ce.value),{...Ue?{disabled:ce.disabled||e.disabled}:{},...e.progressive?{required:!!ce.required,min:l0(ce.min),max:l0(ce.max),minLength:l0(ce.minLength),maxLength:l0(ce.maxLength),pattern:l0(ce.pattern)}:{},name:re,onChange:J,onBlur:J,ref:Re=>{if(Re){we(re,ce),ge=rt(n,re);const Me=bn(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,Qe=khe(Me),I=ge._f.refs||[];if(Qe?I.find(j=>j===Me):Me===ge._f.ref)return;Sr(n,re,{_f:{...ge._f,...Qe?{refs:[...I.filter(ZC),Me,...Array.isArray(rt(s,re))?[{}]:[]],ref:{type:Me.type,name:re}}:{ref:Me}}}),k(re,!1,void 0,Me)}else ge=rt(n,re,{}),ge._f&&(ge._f.mount=!1),(e.shouldUnregister||ce.shouldUnregister)&&!(ghe(l.array,re)&&i.action)&&l.unMount.add(re)}}},Y=()=>e.shouldFocusError&&Q0(n,_,l.mount),le=re=>{Ao(re)&&(f.state.next({disabled:re}),Q0(n,(ce,ge)=>{const Ue=rt(n,ge);Ue&&(ce.disabled=Ue._f.disabled||re,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(Re=>{Re.disabled=Ue._f.disabled||re}))},0,!1))},ye=(re,ce)=>async ge=>{let Ue;ge&&(ge.preventDefault&&ge.preventDefault(),ge.persist&&ge.persist());let Re=Dn(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Me,values:Qe}=await C();r.errors=Me,Re=Dn(Qe)}else await T(n);if(l.disabled.size)for(const Me of l.disabled)xn(Re,Me);if(xn(r.errors,"root"),sa(r.errors)){f.state.next({errors:{}});try{await re(Re,ge)}catch(Me){Ue=Me}}else ce&&await ce({...r.errors},ge),Y(),setTimeout(Y);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:sa(r.errors)&&!Ue,submitCount:r.submitCount+1,errors:r.errors}),Ue)throw Ue},Ve=(re,ce={})=>{rt(n,re)&&(bn(ce.defaultValue)?Q(re,Dn(rt(s,re))):(Q(re,ce.defaultValue),Sr(s,re,Dn(ce.defaultValue))),ce.keepTouched||xn(r.touchedFields,re),ce.keepDirty||(xn(r.dirtyFields,re),r.isDirty=ce.defaultValue?B(re,Dn(rt(s,re))):B()),ce.keepError||(xn(r.errors,re),u.isValid&&g()),f.state.next({...r}))},Be=(re,ce={})=>{const ge=re?Dn(re):s,Ue=Dn(ge),Re=sa(re),Me=Re?s:Ue;if(ce.keepDefaultValues||(s=ge),!ce.keepValues){if(ce.keepDirtyValues){const Qe=new Set([...l.mount,...Object.keys(o0(s,a))]);for(const I of Array.from(Qe))rt(r.dirtyFields,I)?Sr(Me,I,rt(a,I)):Q(I,rt(Me,I))}else{if(TT&&bn(re))for(const Qe of l.mount){const I=rt(n,Qe);if(I&&I._f){const j=Array.isArray(I._f.refs)?I._f.refs[0]:I._f.ref;if(pb(j)){const A=j.closest("form");if(A){A.reset();break}}}}if(ce.keepFieldsRef)for(const Qe of l.mount)Q(Qe,rt(Me,Qe));else n={}}a=e.shouldUnregister?ce.keepDefaultValues?Dn(s):{}:Dn(Me),f.array.next({values:{...Me}}),f.state.next({values:{...Me}})}l={mount:ce.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!u.isValid||!!ce.keepIsValid||!!ce.keepDirtyValues,i.watch=!!e.shouldUnregister,f.state.next({submitCount:ce.keepSubmitCount?r.submitCount:0,isDirty:Re?!1:ce.keepDirty?r.isDirty:!!(ce.keepDefaultValues&&!Lc(re,s)),isSubmitted:ce.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Re?{}:ce.keepDirtyValues?ce.keepDefaultValues&&a?o0(s,a):r.dirtyFields:ce.keepDefaultValues&&re?o0(s,re):ce.keepDirty?r.dirtyFields:{},touchedFields:ce.keepTouched?r.touchedFields:{},errors:ce.keepErrors?r.errors:{},isSubmitSuccessful:ce.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ut=(re,ce)=>Be(Ki(re)?re(a):re,ce),Te=(re,ce={})=>{const ge=rt(n,re),Ue=ge&&ge._f;if(Ue){const Re=Ue.refs?Ue.refs[0]:Ue.ref;Re.focus&&(Re.focus(),ce.shouldSelect&&Ki(Re.select)&&Re.select())}},je=re=>{r={...r,...re}},pt={control:{register:we,unregister:ue,getFieldState:K,handleSubmit:ye,setError:ne,_subscribe:Z,_runSchema:C,_focusError:Y,_getWatch:M,_getDirty:B,_setValid:g,_setFieldArray:b,_setDisabledField:_e,_setErrors:w,_getFieldArray:L,_reset:Be,_resetDefaultValues:()=>Ki(e.defaultValues)&&e.defaultValues().then(re=>{ut(re,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:le,_subjects:f,_proxyFormState:u,get _fields(){return n},get _formValues(){return a},get _state(){return i},set _state(re){i=re},get _defaultValues(){return s},get _names(){return l},set _names(re){l=re},get _formState(){return r},get _options(){return e},set _options(re){e={...e,...re}}},subscribe:oe,trigger:H,register:we,handleSubmit:ye,watch:z,setValue:Q,getValues:P,reset:ut,resetField:Ve,clearErrors:F,unregister:ue,setError:ne,setFocus:Te,getFieldState:K};return{...pt,formControl:pt}}function iB(t={}){const e=st.useRef(void 0),r=st.useRef(void 0),[n,s]=st.useState({isDirty:!1,isValidating:!1,isLoading:Ki(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ki(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!Ki(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:i,...l}=Phe(t);e.current={...l,formState:n}}const a=e.current.control;return a._options=t,bhe(()=>{const i=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,i},[a]),st.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),st.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),st.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),st.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),st.useEffect(()=>{if(a._proxyFormState.isDirty){const i=a._getDirty();i!==n.isDirty&&a._subjects.state.next({isDirty:i})}},[a,n.isDirty]),st.useEffect(()=>{t.values&&!Lc(t.values,r.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=t.values,s(i=>({...i}))):a._resetDefaultValues()},[a,t.values]),st.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=vhe(n,a),e.current}const pO=(t,e,r)=>{if(t&&"reportValidity"in t){const n=rt(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},oB=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?pO(n.ref,r,t):n.refs&&n.refs.forEach(s=>pO(s,r,t))}},Ihe=(t,e)=>{e.shouldUseNativeValidation&&oB(t,e);const r={};for(const n in t){const s=rt(e.fields,n),a=Object.assign(t[n]||{},{ref:s&&s.ref});if(Dhe(e.names||Object.keys(t),n)){const i=Object.assign({},rt(r,n));Sr(i,"root",a),Sr(r,n,i)}else Sr(r,n,a)}return r},Dhe=(t,e)=>t.some(r=>r.startsWith(e+"."));var Lhe=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,a=n.message,i=n.path.join(".");if(!r[i])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[i]={message:l.message,type:l.code}}else r[i]={message:a,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return t.push(h)})}),e){var c=r[i].types,d=c&&c[n.code];r[i]=QF(i,e,r,s,d?[].concat(d,n.message):n.message)}t.shift()}return r},lB=function(t,e,r){return r===void 0&&(r={}),function(n,s,a){try{return Promise.resolve(function(i,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(d){return a.shouldUseNativeValidation&&oB({},a),{errors:{},values:r.raw?n:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(i))return{values:{},errors:Ihe(Lhe(i.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw i}))}catch(i){return Promise.reject(i)}}},rr;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const a={};for(const i of s)a[i]=i;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),i={};for(const l of a)i[l]=s[l];return t.objectValues(i)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&a.push(i);return a},t.find=(s,a)=>{for(const i of s)if(a(i))return i},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(rr||(rr={}));var gO;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gO||(gO={}));const at=rr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mc=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return Number.isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Fe=rr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class sc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(s);else if(i.code==="invalid_return_type")s(i.returnTypeError);else if(i.code==="invalid_arguments")s(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let l=n,c=0;for(;c<i.path.length;){const d=i.path[c];c===i.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(i))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return s(this),n}static assert(e){if(!(e instanceof sc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];r[a]=r[a]||[],r[a].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}sc.create=t=>new sc(t);const QE=(t,e)=>{let r;switch(t.code){case Fe.invalid_type:t.received===at.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Fe.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,rr.jsonStringifyReplacer)}`;break;case Fe.unrecognized_keys:r=`Unrecognized key(s) in object: ${rr.joinValues(t.keys,", ")}`;break;case Fe.invalid_union:r="Invalid input";break;case Fe.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${rr.joinValues(t.options)}`;break;case Fe.invalid_enum_value:r=`Invalid enum value. Expected ${rr.joinValues(t.options)}, received '${t.received}'`;break;case Fe.invalid_arguments:r="Invalid function arguments";break;case Fe.invalid_return_type:r="Invalid function return type";break;case Fe.invalid_date:r="Invalid date";break;case Fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:rr.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Fe.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Fe.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Fe.custom:r="Invalid input";break;case Fe.invalid_intersection_types:r="Intersection results could not be merged";break;case Fe.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Fe.not_finite:r="Number must be finite";break;default:r=e.defaultError,rr.assertNever(t)}return{message:r}};let $he=QE;function Fhe(){return $he}const Bhe=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],i={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)l=d(i,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function Xe(t,e){const r=Fhe(),n=Bhe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===QE?void 0:QE].filter(s=>!!s)});t.common.issues.push(n)}class qa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return wt;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const a=await s.key,i=await s.value;n.push({key:a,value:i})}return qa.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:a,value:i}=s;if(a.status==="aborted"||i.status==="aborted")return wt;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||s.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const wt=Object.freeze({status:"aborted"}),T0=t=>({status:"dirty",value:t}),Ii=t=>({status:"valid",value:t}),xO=t=>t.status==="aborted",yO=t=>t.status==="dirty",Lm=t=>t.status==="valid",yb=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Id{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vO=(t,e)=>{if(Lm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new sc(t.common.issues);return this._error=r,this._error}}};function $t(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(i,l)=>{const{message:c}=t;return i.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:s}}class Jt{get description(){return this._def.description}_getType(e){return Mc(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Mc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qa,ctx:{common:e.parent.common,data:e.data,parsedType:Mc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(yb(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mc(e)},s=this._parseSync({data:e,path:n.path,parent:n});return vO(n,s)}"~validate"(e){var n,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mc(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return Lm(a)?{value:a.value}:{issues:r.common.issues}}catch(a){(s=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Lm(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mc(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(yb(s)?s:Promise.resolve(s));return vO(n,a)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,a)=>{const i=e(s),l=()=>a.addIssue({code:Fe.custom,...n(s)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Bm({schema:this,typeName:kt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Cd.create(this,this._def)}nullable(){return zm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vo.create(this)}promise(){return kb.create(this,this._def)}or(e){return bb.create([this,e],this._def)}and(e){return wb.create(this,e,this._def)}transform(e){return new Bm({...$t(this._def),schema:this,typeName:kt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new rj({...$t(this._def),innerType:this,defaultValue:r,typeName:kt.ZodDefault})}brand(){return new cfe({typeName:kt.ZodBranded,type:this,...$t(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new nj({...$t(this._def),innerType:this,catchValue:r,typeName:kt.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return RT.create(this,e)}readonly(){return sj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zhe=/^c[^\s-]{8,}$/i,Uhe=/^[0-9a-z]+$/,Vhe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Hhe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Whe=/^[a-z0-9_-]{21}$/i,qhe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ghe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Khe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zhe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let YC;const Yhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Xhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Qhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,efe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tfe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rfe=new RegExp(`^${cB}$`);function dB(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function nfe(t){return new RegExp(`^${dB(t)}$`)}function sfe(t){let e=`${cB}T${dB(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function afe(t,e){return!!((e==="v4"||!e)&&Yhe.test(t)||(e==="v6"||!e)&&Jhe.test(t))}function ife(t,e){if(!qhe.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ofe(t,e){return!!((e==="v4"||!e)&&Xhe.test(t)||(e==="v6"||!e)&&Qhe.test(t))}class ad extends Jt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const a=this._getOrReturnCtx(e);return Xe(a,{code:Fe.invalid_type,expected:at.string,received:a.parsedType}),wt}const n=new qa;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,l=e.data.length<a.value;(i||l)&&(s=this._getOrReturnCtx(e,s),i?Xe(s,{code:Fe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Xe(s,{code:Fe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Khe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"email",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")YC||(YC=new RegExp(Zhe,"u")),YC.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"emoji",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Hhe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"uuid",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Whe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"nanoid",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")zhe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"cuid",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Uhe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"cuid2",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Vhe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"ulid",code:Fe.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Xe(s,{validation:"url",code:Fe.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"regex",code:Fe.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?sfe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?rfe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?nfe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Ghe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"duration",code:Fe.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?afe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"ip",code:Fe.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?ife(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"jwt",code:Fe.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?ofe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"cidr",code:Fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?efe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"base64",code:Fe.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?tfe.test(e.data)||(s=this._getOrReturnCtx(e,s),Xe(s,{validation:"base64url",code:Fe.invalid_string,message:a.message}),n.dirty()):rr.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:Fe.invalid_string,...lt.errToObj(n)})}_addCheck(e){return new ad({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...lt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...lt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...lt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...lt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...lt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...lt.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...lt.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...lt.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...lt.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...lt.errToObj(r)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new ad({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ad({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ad({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ad.create=t=>new ad({checks:[],typeName:kt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...$t(t)});function lfe(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=Number.parseInt(t.toFixed(s).replace(".","")),i=Number.parseInt(e.toFixed(s).replace(".",""));return a%i/10**s}class $m extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const a=this._getOrReturnCtx(e);return Xe(a,{code:Fe.invalid_type,expected:at.number,received:a.parsedType}),wt}let n;const s=new qa;for(const a of this._def.checks)a.kind==="int"?rr.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?lfe(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.not_finite,message:a.message}),s.dirty()):rr.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,lt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,lt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,lt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,lt.toString(r))}setLimit(e,r,n,s){return new $m({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:lt.toString(s)}]})}_addCheck(e){return new $m({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&rr.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}$m.create=t=>new $m({checks:[],typeName:kt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$t(t)});class Wg extends Jt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==at.bigint)return this._getInvalidInput(e);let n;const s=new qa;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Xe(n,{code:Fe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):rr.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Xe(r,{code:Fe.invalid_type,expected:at.bigint,received:r.parsedType}),wt}gte(e,r){return this.setLimit("min",e,!0,lt.toString(r))}gt(e,r){return this.setLimit("min",e,!1,lt.toString(r))}lte(e,r){return this.setLimit("max",e,!0,lt.toString(r))}lt(e,r){return this.setLimit("max",e,!1,lt.toString(r))}setLimit(e,r,n,s){return new Wg({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:lt.toString(s)}]})}_addCheck(e){return new Wg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Wg.create=t=>new Wg({checks:[],typeName:kt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...$t(t)});class bO extends Jt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.boolean,received:n.parsedType}),wt}return Ii(e.data)}}bO.create=t=>new bO({typeName:kt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$t(t)});class vb extends Jt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const a=this._getOrReturnCtx(e);return Xe(a,{code:Fe.invalid_type,expected:at.date,received:a.parsedType}),wt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Xe(a,{code:Fe.invalid_date}),wt}const n=new qa;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Xe(s,{code:Fe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):rr.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vb({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}vb.create=t=>new vb({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:kt.ZodDate,...$t(t)});class wO extends Jt{_parse(e){if(this._getType(e)!==at.symbol){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.symbol,received:n.parsedType}),wt}return Ii(e.data)}}wO.create=t=>new wO({typeName:kt.ZodSymbol,...$t(t)});class kO extends Jt{_parse(e){if(this._getType(e)!==at.undefined){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.undefined,received:n.parsedType}),wt}return Ii(e.data)}}kO.create=t=>new kO({typeName:kt.ZodUndefined,...$t(t)});class CO extends Jt{_parse(e){if(this._getType(e)!==at.null){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.null,received:n.parsedType}),wt}return Ii(e.data)}}CO.create=t=>new CO({typeName:kt.ZodNull,...$t(t)});class NO extends Jt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ii(e.data)}}NO.create=t=>new NO({typeName:kt.ZodAny,...$t(t)});class SO extends Jt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ii(e.data)}}SO.create=t=>new SO({typeName:kt.ZodUnknown,...$t(t)});class Dd extends Jt{_parse(e){const r=this._getOrReturnCtx(e);return Xe(r,{code:Fe.invalid_type,expected:at.never,received:r.parsedType}),wt}}Dd.create=t=>new Dd({typeName:kt.ZodNever,...$t(t)});class EO extends Jt{_parse(e){if(this._getType(e)!==at.undefined){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.void,received:n.parsedType}),wt}return Ii(e.data)}}EO.create=t=>new EO({typeName:kt.ZodVoid,...$t(t)});class Vo extends Jt{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==at.array)return Xe(r,{code:Fe.invalid_type,expected:at.array,received:r.parsedType}),wt;if(s.exactLength!==null){const i=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(i||l)&&(Xe(r,{code:i?Fe.too_big:Fe.too_small,minimum:l?s.exactLength.value:void 0,maximum:i?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Xe(r,{code:Fe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Xe(r,{code:Fe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((i,l)=>s.type._parseAsync(new Id(r,i,r.path,l)))).then(i=>qa.mergeArray(n,i));const a=[...r.data].map((i,l)=>s.type._parseSync(new Id(r,i,r.path,l)));return qa.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Vo({...this._def,minLength:{value:e,message:lt.toString(r)}})}max(e,r){return new Vo({...this._def,maxLength:{value:e,message:lt.toString(r)}})}length(e,r){return new Vo({...this._def,exactLength:{value:e,message:lt.toString(r)}})}nonempty(e){return this.min(1,e)}}Vo.create=(t,e)=>new Vo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kt.ZodArray,...$t(e)});function xf(t){if(t instanceof vn){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Cd.create(xf(n))}return new vn({...t._def,shape:()=>e})}else return t instanceof Vo?new Vo({...t._def,type:xf(t.element)}):t instanceof Cd?Cd.create(xf(t.unwrap())):t instanceof zm?zm.create(xf(t.unwrap())):t instanceof ph?ph.create(t.items.map(e=>xf(e))):t}class vn extends Jt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=rr.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==at.object){const d=this._getOrReturnCtx(e);return Xe(d,{code:Fe.invalid_type,expected:at.object,received:d.parsedType}),wt}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dd&&this._def.unknownKeys==="strip"))for(const d in s.data)i.includes(d)||l.push(d);const c=[];for(const d of i){const u=a[d],h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Id(s,h,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Dd){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(d==="strict")l.length>0&&(Xe(s,{code:Fe.unrecognized_keys,keys:l}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Id(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>qa.mergeObjectSync(n,d)):qa.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new vn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var a,i;const s=((i=(a=this._def).errorMap)==null?void 0:i.call(a,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:lt.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new vn({...this._def,unknownKeys:"strip"})}passthrough(){return new vn({...this._def,unknownKeys:"passthrough"})}extend(e){return new vn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new vn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:kt.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new vn({...this._def,catchall:e})}pick(e){const r={};for(const n of rr.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new vn({...this._def,shape:()=>r})}omit(e){const r={};for(const n of rr.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new vn({...this._def,shape:()=>r})}deepPartial(){return xf(this)}partial(e){const r={};for(const n of rr.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new vn({...this._def,shape:()=>r})}required(e){const r={};for(const n of rr.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Cd;)a=a._def.innerType;r[n]=a}return new vn({...this._def,shape:()=>r})}keyof(){return uB(rr.objectKeys(this.shape))}}vn.create=(t,e)=>new vn({shape:()=>t,unknownKeys:"strip",catchall:Dd.create(),typeName:kt.ZodObject,...$t(e)});vn.strictCreate=(t,e)=>new vn({shape:()=>t,unknownKeys:"strict",catchall:Dd.create(),typeName:kt.ZodObject,...$t(e)});vn.lazycreate=(t,e)=>new vn({shape:t,unknownKeys:"strip",catchall:Dd.create(),typeName:kt.ZodObject,...$t(e)});class bb extends Jt{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const i=a.map(l=>new sc(l.ctx.common.issues));return Xe(r,{code:Fe.invalid_union,unionErrors:i}),wt}if(r.common.async)return Promise.all(n.map(async a=>{const i={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:i}),ctx:i}})).then(s);{let a;const i=[];for(const c of n){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&i.push(d.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=i.map(c=>new sc(c));return Xe(r,{code:Fe.invalid_union,unionErrors:l}),wt}}get options(){return this._def.options}}bb.create=(t,e)=>new bb({options:t,typeName:kt.ZodUnion,...$t(e)});function ej(t,e){const r=Mc(t),n=Mc(e);if(t===e)return{valid:!0,data:t};if(r===at.object&&n===at.object){const s=rr.objectKeys(e),a=rr.objectKeys(t).filter(l=>s.indexOf(l)!==-1),i={...t,...e};for(const l of a){const c=ej(t[l],e[l]);if(!c.valid)return{valid:!1};i[l]=c.data}return{valid:!0,data:i}}else if(r===at.array&&n===at.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const i=t[a],l=e[a],c=ej(i,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===at.date&&n===at.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class wb extends Jt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(a,i)=>{if(xO(a)||xO(i))return wt;const l=ej(a.value,i.value);return l.valid?((yO(a)||yO(i))&&r.dirty(),{status:r.value,value:l.data}):(Xe(n,{code:Fe.invalid_intersection_types}),wt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>s(a,i)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}wb.create=(t,e,r)=>new wb({left:t,right:e,typeName:kt.ZodIntersection,...$t(r)});class ph extends Jt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.array)return Xe(n,{code:Fe.invalid_type,expected:at.array,received:n.parsedType}),wt;if(n.data.length<this._def.items.length)return Xe(n,{code:Fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),wt;!this._def.rest&&n.data.length>this._def.items.length&&(Xe(n,{code:Fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((i,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Id(n,i,n.path,l)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>qa.mergeArray(r,i)):qa.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ph({...this._def,rest:e})}}ph.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ph({items:t,typeName:kt.ZodTuple,rest:null,...$t(e)})};class jO extends Jt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.map)return Xe(n,{code:Fe.invalid_type,expected:at.map,received:n.parsedType}),wt;const s=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([l,c],d)=>({key:s._parse(new Id(n,l,n.path,[d,"key"])),value:a._parse(new Id(n,c,n.path,[d,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of i){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return wt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of i){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return wt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}jO.create=(t,e,r)=>new jO({valueType:e,keyType:t,typeName:kt.ZodMap,...$t(r)});class qg extends Jt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==at.set)return Xe(n,{code:Fe.invalid_type,expected:at.set,received:n.parsedType}),wt;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Xe(n,{code:Fe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Xe(n,{code:Fe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const a=this._def.valueType;function i(c){const d=new Set;for(const u of c){if(u.status==="aborted")return wt;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...n.data.values()].map((c,d)=>a._parse(new Id(n,c,n.path,d)));return n.common.async?Promise.all(l).then(c=>i(c)):i(l)}min(e,r){return new qg({...this._def,minSize:{value:e,message:lt.toString(r)}})}max(e,r){return new qg({...this._def,maxSize:{value:e,message:lt.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}qg.create=(t,e)=>new qg({valueType:t,minSize:null,maxSize:null,typeName:kt.ZodSet,...$t(e)});class TO extends Jt{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}TO.create=(t,e)=>new TO({getter:t,typeName:kt.ZodLazy,...$t(e)});class tj extends Jt{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Xe(r,{received:r.data,code:Fe.invalid_literal,expected:this._def.value}),wt}return{status:"valid",value:e.data}}get value(){return this._def.value}}tj.create=(t,e)=>new tj({value:t,typeName:kt.ZodLiteral,...$t(e)});function uB(t,e){return new Fm({values:t,typeName:kt.ZodEnum,...$t(e)})}class Fm extends Jt{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Xe(r,{expected:rr.joinValues(n),received:r.parsedType,code:Fe.invalid_type}),wt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Xe(r,{received:r.data,code:Fe.invalid_enum_value,options:n}),wt}return Ii(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Fm.create(e,{...this._def,...r})}exclude(e,r=this._def){return Fm.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Fm.create=uB;class _O extends Jt{_parse(e){const r=rr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==at.string&&n.parsedType!==at.number){const s=rr.objectValues(r);return Xe(n,{expected:rr.joinValues(s),received:n.parsedType,code:Fe.invalid_type}),wt}if(this._cache||(this._cache=new Set(rr.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=rr.objectValues(r);return Xe(n,{received:n.data,code:Fe.invalid_enum_value,options:s}),wt}return Ii(e.data)}get enum(){return this._def.values}}_O.create=(t,e)=>new _O({values:t,typeName:kt.ZodNativeEnum,...$t(e)});class kb extends Jt{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==at.promise&&r.common.async===!1)return Xe(r,{code:Fe.invalid_type,expected:at.promise,received:r.parsedType}),wt;const n=r.parsedType===at.promise?r.data:Promise.resolve(r.data);return Ii(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}kb.create=(t,e)=>new kb({type:t,typeName:kt.ZodPromise,...$t(e)});class Bm extends Jt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===kt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:i=>{Xe(n,i),i.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const i=s.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async l=>{if(r.value==="aborted")return wt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?wt:c.status==="dirty"||r.value==="dirty"?T0(c.value):c});{if(r.value==="aborted")return wt;const l=this._def.schema._parseSync({data:i,path:n.path,parent:n});return l.status==="aborted"?wt:l.status==="dirty"||r.value==="dirty"?T0(l.value):l}}if(s.type==="refinement"){const i=l=>{const c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?wt:(l.status==="dirty"&&r.dirty(),i(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?wt:(l.status==="dirty"&&r.dirty(),i(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Lm(i))return wt;const l=s.transform(i.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Lm(i)?Promise.resolve(s.transform(i.value,a)).then(l=>({status:r.value,value:l})):wt);rr.assertNever(s)}}Bm.create=(t,e,r)=>new Bm({schema:t,typeName:kt.ZodEffects,effect:e,...$t(r)});Bm.createWithPreprocess=(t,e,r)=>new Bm({schema:e,effect:{type:"preprocess",transform:t},typeName:kt.ZodEffects,...$t(r)});class Cd extends Jt{_parse(e){return this._getType(e)===at.undefined?Ii(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cd.create=(t,e)=>new Cd({innerType:t,typeName:kt.ZodOptional,...$t(e)});class zm extends Jt{_parse(e){return this._getType(e)===at.null?Ii(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zm.create=(t,e)=>new zm({innerType:t,typeName:kt.ZodNullable,...$t(e)});class rj extends Jt{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===at.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}rj.create=(t,e)=>new rj({innerType:t,typeName:kt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$t(e)});class nj extends Jt{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yb(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new sc(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new sc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}nj.create=(t,e)=>new nj({innerType:t,typeName:kt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$t(e)});class AO extends Jt{_parse(e){if(this._getType(e)!==at.nan){const n=this._getOrReturnCtx(e);return Xe(n,{code:Fe.invalid_type,expected:at.nan,received:n.parsedType}),wt}return{status:"valid",value:e.data}}}AO.create=t=>new AO({typeName:kt.ZodNaN,...$t(t)});class cfe extends Jt{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class RT extends Jt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?wt:a.status==="dirty"?(r.dirty(),T0(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?wt:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new RT({in:e,out:r,typeName:kt.ZodPipeline})}}class sj extends Jt{_parse(e){const r=this._def.innerType._parse(e),n=s=>(Lm(s)&&(s.value=Object.freeze(s.value)),s);return yb(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}sj.create=(t,e)=>new sj({innerType:t,typeName:kt.ZodReadonly,...$t(e)});var kt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(kt||(kt={}));const ks=ad.create,vu=$m.create;Dd.create;Vo.create;const PT=vn.create;bb.create;wb.create;ph.create;const MO=tj.create,dfe=Fm.create;kb.create;Cd.create;zm.create;const ufe=PT({numeroCaso:ks().min(1,"El nmero de caso es requerido").max(50,"El nmero de caso no puede exceder 50 caracteres"),descripcion:ks().min(1,"La descripcin es requerida").max(500,"La descripcin no puede exceder 500 caracteres"),fecha:ks().min(1,"La fecha es requerida"),originId:ks().optional().nullable().transform(t=>t||void 0),applicationId:ks().optional().nullable().transform(t=>t||void 0),historialCaso:vu().min(1,"Debe seleccionar una opcin").max(3,"Valor invlido"),conocimientoModulo:vu().min(1,"Debe seleccionar una opcin").max(3,"Valor invlido"),manipulacionDatos:vu().min(1,"Debe seleccionar una opcin").max(3,"Valor invlido"),claridadDescripcion:vu().min(1,"Debe seleccionar una opcin").max(3,"Valor invlido"),causaFallo:vu().min(1,"Debe seleccionar una opcin").max(3,"Valor invlido"),estado:dfe(["nuevo","en_progreso","pendiente","resuelto","cerrado","cancelado","asignado","restaurado"]).default("nuevo"),observaciones:ks().max(1e3,"Las observaciones no pueden exceder 1000 caracteres").optional().nullable().transform(t=>t||void 0)}),hfe=[{value:1,label:"Error conocido y solucionado previamente"},{value:2,label:"Error recurrente, no solucionado"},{value:3,label:"Error desconocido, no solucionado"}],ffe=[{value:1,label:"Conoce mdulo y funcin puntual"},{value:2,label:"Conoce mdulo, requiere capacitacin"},{value:3,label:"Desconoce mdulo, requiere capacitacin"}],mfe=[{value:1,label:"Mnima o no necesaria"},{value:2,label:"Intensiva, sin replicar lgica"},{value:3,label:"Extremadamente compleja, replicar lgica"}],pfe=[{value:1,label:"Descripcin clara y precisa"},{value:2,label:"Descripcin ambigua o poco clara"},{value:3,label:"Descripcin confusa o inexacta"}],gfe=[{value:1,label:"Error operativo, fcil solucin"},{value:2,label:"Falla puntual, requiere pruebas"},{value:3,label:"Falla compleja, pruebas adicionales"}],xfe=({onSubmit:t,defaultValues:e,isLoading:r=!1,submitText:n="Registrar Caso",origenes:s=[],aplicaciones:a=[],origenesLoading:i=!1,aplicacionesLoading:l=!1})=>{const{register:c,handleSubmit:d,formState:{errors:u},reset:h,watch:f}=iB({resolver:lB(ufe),defaultValues:e});x.useEffect(()=>{e&&h(e)},[e,h]);const m=f(["historialCaso","conocimientoModulo","manipulacionDatos","claridadDescripcion","causaFallo"]),[p,g,y,b,v]=m,w=p||g||y||b||v,k=XF(p||0,g||0,y||0,b||0,v||0),N=w?YF(k):null,S=C=>{t(C),e||h()};return o.jsxs("form",{onSubmit:d(S),className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nmero del caso *"}),o.jsx("input",{...c("numeroCaso"),type:"text",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingrese el nmero del caso"}),u.numeroCaso&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.numeroCaso.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha *"}),o.jsx("input",{...c("fecha"),type:"date",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),u.fecha&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.fecha.message})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin del problema *"}),o.jsx("textarea",{...c("descripcion"),rows:3,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describa el problema detalladamente"}),u.descripcion&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.descripcion.message})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Criterios de Calificacin"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Historial del caso *"}),o.jsxs("select",{...c("historialCaso",{valueAsNumber:!0}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Seleccione una opcin"}),hfe.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))]}),u.historialCaso&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.historialCaso.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Conocimiento del mdulo *"}),o.jsxs("select",{...c("conocimientoModulo",{valueAsNumber:!0}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Seleccione una opcin"}),ffe.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))]}),u.conocimientoModulo&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.conocimientoModulo.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manipulacin de datos *"}),o.jsxs("select",{...c("manipulacionDatos",{valueAsNumber:!0}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Seleccione una opcin"}),mfe.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))]}),u.manipulacionDatos&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.manipulacionDatos.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Claridad de la descripcin *"}),o.jsxs("select",{...c("claridadDescripcion",{valueAsNumber:!0}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Seleccione una opcin"}),pfe.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))]}),u.claridadDescripcion&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.claridadDescripcion.message})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Causa del fallo *"}),o.jsxs("select",{...c("causaFallo",{valueAsNumber:!0}),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Seleccione una opcin"}),gfe.map(C=>o.jsx("option",{value:C.value,children:C.label},C.value))]}),u.causaFallo&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.causaFallo.message})]}),w&&N&&o.jsx("div",{className:"lg:w-80 mt-4 lg:mt-0",children:o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-3 h-3 text-blue-600 dark:text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h4",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:"Vista Previa"})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[k,"/15 pts"]})})]}),o.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mb-2 ${N==="Alta Complejidad"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":N==="Media Complejidad"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:N}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[o.jsx("span",{children:"Baja"}),o.jsx("span",{children:"Media"}),o.jsx("span",{children:"Alta"})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1",children:o.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${N==="Alta Complejidad"?"bg-red-500":N==="Media Complejidad"?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(k/15*100,100)}%`}})})]})]})})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Origen"}),o.jsxs("select",{...c("originId"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:i,children:[o.jsx("option",{value:"",children:i?"Cargando orgenes...":"Seleccione un origen (opcional)"}),s.map(C=>o.jsx("option",{value:C.id,children:C.nombre},C.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Aplicacin"}),o.jsxs("select",{...c("applicationId"),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:l,children:[o.jsx("option",{value:"",children:l?"Cargando aplicaciones...":"Seleccione una aplicacin (opcional)"}),a.map(C=>o.jsx("option",{value:C.id,children:C.nombre},C.id))]})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(ae,{type:"submit",variant:"primary",disabled:r,children:r?"Procesando...":n})})]})};function OO(){const t=Ri(),{id:e}=kk(),r=ur(),n=!!e,[s,a]=x.useState(!1),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState([]),[f,m]=x.useState([]),[p,g]=x.useState(!0),[y,b]=x.useState(!0),[v,w]=x.useState(null);x.useEffect(()=>{k(),n&&e&&N(e)},[e,n]);const k=async()=>{try{g(!0),b(!0);const[E,T]=await Promise.all([n$.getAll(),sT.getAll()]);h(E||[]),m(T||[])}catch(E){console.error("Error loading form data:",E),d("Error al cargar los datos del formulario")}finally{g(!1),b(!1)}},N=async E=>{try{a(!0);const T=await Kf.getCaseById(E);w(T)}catch(T){console.error("Error loading case:",T),d("Error al cargar el caso para editar")}finally{a(!1)}},S=async E=>{try{l(!0),d(null);const T=XF(E.historialCaso,E.conocimientoModulo,E.manipulacionDatos,E.claridadDescripcion,E.causaFallo),R=YF(T),B={numeroCaso:E.numeroCaso,descripcion:E.descripcion,fecha:E.fecha,originId:E.originId||void 0,applicationId:E.applicationId||void 0,historialCaso:E.historialCaso,conocimientoModulo:E.conocimientoModulo,manipulacionDatos:E.manipulacionDatos,claridadDescripcion:E.claridadDescripcion,causaFallo:E.causaFallo,puntuacion:T,clasificacion:R,estado:E.estado||"nuevo",observaciones:E.observaciones||void 0};n&&e?(await Kf.updateCase(e,B),r.invalidateQueries({queryKey:["cases"]}),r.invalidateQueries({queryKey:["case",e]}),setTimeout(()=>{t("/cases",{state:{refresh:!0,updated:!0,message:`Caso ${B.numeroCaso} actualizado exitosamente`}})},500)):(await Kf.createCase(B),r.invalidateQueries({queryKey:["cases"]}),setTimeout(()=>{t("/cases",{state:{refresh:!0,created:!0,message:`Caso ${B.numeroCaso} creado exitosamente`}})},500))}catch(T){console.error("Error al guardar el caso:",T),d("Error al guardar el caso. Por favor, intntelo de nuevo.")}finally{l(!1)}};if(n&&s)return o.jsx(kd,{children:o.jsxs("div",{className:"flex justify-center items-center min-h-64",children:[o.jsx(Lr,{size:"lg"}),o.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Cargando caso..."})]})});if(n&&c&&!v)return o.jsx(kd,{children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Error al cargar el caso"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:c}),o.jsx(ae,{onClick:()=>t("/cases"),variant:"primary",children:"Volver a casos"})]})});const C=n&&v?{numeroCaso:v.numeroCaso,descripcion:v.descripcion,fecha:v.fecha,originId:v.originId,applicationId:v.applicationId,historialCaso:v.historialCaso,conocimientoModulo:v.conocimientoModulo,manipulacionDatos:v.manipulacionDatos,claridadDescripcion:v.claridadDescripcion,causaFallo:v.causaFallo,estado:v.estado,observaciones:v.observaciones}:{fecha:new Date().toISOString().split("T")[0],estado:"nuevo"};return o.jsxs(kd,{children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:n?"Editar Caso":"Nuevo Caso"}),o.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-400",children:n?"Modifique los datos del caso":"Registre un nuevo caso en el sistema con criterios de calificacin"})]}),o.jsx(ae,{onClick:()=>t("/cases"),variant:"ghost",size:"sm",children:" Volver a casos"})]})}),c&&o.jsx("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"error",size:"md",color:"danger"})}),o.jsx("div",{className:"ml-3",children:o.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:c})})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:o.jsx(xfe,{onSubmit:S,defaultValues:C,isLoading:i,submitText:n?"Actualizar Caso":"Registrar Caso",origenes:u,aplicaciones:f,origenesLoading:p,aplicacionesLoading:y})})]})}const yfe=()=>{const t=nr();return{success:(e,r)=>t.success(e,r),error:(e,r)=>t.error(e,r),info:(e,r)=>t.info(e,r),warning:(e,r)=>t.warning(e,r)}},po=()=>{const t=yfe();return{success:t.success,error:t.error,info:t.info,warning:t.warning}},hc=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(null),[s,a]=x.useState(null),i=x.useCallback(f=>new Promise(m=>{n(f),a(()=>m),e(!0)}),[]),l=x.useCallback(()=>{s&&s(!0),e(!1),n(null),a(null)},[s]),c=x.useCallback(()=>{s&&s(!1),e(!1),n(null),a(null)},[s]),d=x.useCallback(f=>i({title:"Confirmar eliminacin",message:f?`Ests seguro de que deseas eliminar "${f}"? Esta accin no se puede deshacer.`:"Ests seguro de que deseas eliminar este elemento? Esta accin no se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}),[i]),u=x.useCallback((f,m)=>i({title:f,message:m,confirmText:"Confirmar",cancelText:"Cancelar",type:"info"}),[i]),h=x.useCallback((f,m)=>i({title:f,message:m,confirmText:"Continuar",cancelText:"Cancelar",type:"danger"}),[i]);return{showConfirmation:i,confirmDelete:d,confirmAction:u,confirmDangerAction:h,modalState:{isOpen:t,options:r},modalHandlers:{onConfirm:l,onClose:c}}},vfe=()=>{var p,g,y,b,v,w,k;const{id:t}=kk(),e=Ri(),{data:r,isLoading:n,error:s}=up(),{success:a,error:i}=po(),{confirmDangerAction:l,modalState:c,modalHandlers:d}=hc(),u=r==null?void 0:r.find(N=>N.id===t),h=async()=>{if(await l("Eliminar Caso","Ests seguro de que quieres eliminar este caso? Esta accin no se puede deshacer."))try{a("Caso eliminado exitosamente"),e("/cases")}catch(S){console.error("Error al eliminar el caso:",S),i("Error al eliminar el caso")}},f=N=>{switch(N){case"nuevo":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"en_progreso":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"pendiente":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"resuelto":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}},m=N=>{switch(N){case"Baja Complejidad":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"Media Complejidad":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"Alta Complejidad":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return n?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/4 mb-4"}),o.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-700 rounded w-1/2 mb-6"}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"h-64 bg-gray-300 dark:bg-gray-700 rounded"})}),o.jsx("div",{children:o.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded"})})]})]})})}):s?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Error al cargar el caso"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:s.message}),o.jsxs(ae,{onClick:()=>e("/cases"),variant:"primary",children:[o.jsx(O,{action:"back",size:"lg",className:"-ml-1 mr-2"}),"Volver a Casos"]})]})})}):u?o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs(cs,{to:"/cases",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:[o.jsx(O,{action:"back",size:"lg",className:"-ml-1 mr-1"}),"Volver a Casos"]})}),o.jsxs("div",{className:"lg:flex lg:items-center lg:justify-between",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:truncate sm:text-3xl sm:tracking-tight",children:u.numeroCaso}),o.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:space-x-6",children:[o.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"calendar",size:"lg",color:"gray",className:"mr-1.5"}),"Creado: ",new Date(u.createdAt).toLocaleDateString()]}),o.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"user",size:"lg",color:"gray",className:"mr-1.5"}),u.assignedTo?`Asignado a: ${u.assignedTo.fullName||u.assignedTo.email}`:"Sin asignar"]})]})]}),o.jsxs("div",{className:"mt-5 flex lg:mt-0 lg:ml-4",children:[o.jsx("span",{className:"hidden sm:block",children:o.jsxs(cs,{to:`/cases/edit/${u.id}`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-600 dark:text-gray-200 dark:border-gray-500 dark:hover:bg-gray-700",children:[o.jsx(O,{action:"edit",size:"lg",className:"-ml-1 mr-2"}),"Editar"]})}),o.jsx("span",{className:"ml-3 hidden sm:block",children:o.jsxs(ae,{variant:"danger",onClick:h,children:[o.jsx(O,{action:"delete",size:"lg",className:"-ml-1 mr-2"}),"Eliminar"]})})]})]}),o.jsx("div",{className:"mt-8",children:o.jsxs("dl",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("div",{className:"flex-shrink-0",children:o.jsx("span",{className:`inline-flex px-2 text-xs font-semibold rounded-full ${f(u.estado)}`,children:u.estado})})}),o.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Estado"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("div",{className:"flex-shrink-0",children:o.jsx("span",{className:`inline-flex px-2 text-xs font-semibold rounded-full ${m(u.clasificacion)}`,children:u.clasificacion})})}),o.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Complejidad"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[Math.round(u.puntuacion),"/15"]})})}),o.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Puntuacin"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsxs("div",{className:"p-5",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:((p=u.origin)==null?void 0:p.nombre)||"Sin origen"})})}),o.jsx("div",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Origen"})]})})]})}),o.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:["Caso: ",u.numeroCaso]}),o.jsx("div",{className:"prose prose-sm text-gray-500 dark:text-gray-400",children:o.jsx("p",{children:u.descripcion})}),u.observaciones&&o.jsxs("div",{className:"mt-6",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Observaciones"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.observaciones})]})]})})}),o.jsxs("div",{children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:"Detalles del Caso"}),o.jsxs("dl",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 flex items-center",children:[o.jsx(O,{action:"document",size:"sm",className:"mr-1"}),"Fecha de creacin"]}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(u.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ltima actualizacin"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:new Date(u.updatedAt).toLocaleDateString()})]}),((g=u.application)==null?void 0:g.nombre)&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Aplicacin"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:u.application.nombre})]}),u.userId&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Creado por"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:["Usuario: ",u.userId]})]})]})]})}),o.jsx("div",{className:"mt-6 bg-white dark:bg-gray-800 shadow rounded-lg",children:o.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[o.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",children:"Mtricas de Evaluacin"}),o.jsxs("dl",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Historial del Caso"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[u.historialCaso,"/3"]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Conocimiento del Mdulo"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[u.conocimientoModulo,"/3"]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Manipulacin de Datos"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[u.manipulacionDatos,"/3"]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Claridad de Descripcin"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[u.claridadDescripcion,"/3"]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Causa de Fallo"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[u.causaFallo,"/3"]})]})]})]})})]})]})]}),o.jsx(Ha,{isOpen:c.isOpen,onClose:d.onClose,onConfirm:d.onConfirm,title:((y=c.options)==null?void 0:y.title)||"",message:((b=c.options)==null?void 0:b.message)||"",confirmText:(v=c.options)==null?void 0:v.confirmText,cancelText:(w=c.options)==null?void 0:w.cancelText,type:(k=c.options)==null?void 0:k.type})]}):o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Caso no encontrado"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:['El caso con ID "',t,'" no existe.']}),o.jsxs(ae,{onClick:()=>e("/cases"),variant:"primary",children:[o.jsx(O,{action:"back",size:"lg",className:"-ml-1 mr-2"}),"Volver a Casos"]})]})})})};function Cb(t){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cb(t)}function gh(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Wr(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ir(t){Wr(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Cb(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function bfe(t,e){Wr(2,arguments);var r=Ir(t).getTime(),n=gh(e);return new Date(r+n)}var wfe={};function qx(){return wfe}function aj(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function tv(t,e){Wr(2,arguments);var r=Ir(t),n=Ir(e),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function kfe(t){return Wr(1,arguments),t instanceof Date||Cb(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Cfe(t){if(Wr(1,arguments),!kfe(t)&&typeof t!="number")return!1;var e=Ir(t);return!isNaN(Number(e))}function Nfe(t,e){Wr(2,arguments);var r=Ir(t),n=Ir(e),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function Sfe(t,e){return Wr(2,arguments),Ir(t).getTime()-Ir(e).getTime()}var Efe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},jfe="trunc";function Tfe(t){return Efe[jfe]}function _fe(t){Wr(1,arguments);var e=Ir(t);return e.setHours(23,59,59,999),e}function Afe(t){Wr(1,arguments);var e=Ir(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Mfe(t){Wr(1,arguments);var e=Ir(t);return _fe(e).getTime()===Afe(e).getTime()}function Ofe(t,e){Wr(2,arguments);var r=Ir(t),n=Ir(e),s=tv(r,n),a=Math.abs(Nfe(r,n)),i;if(a<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);var l=tv(r,n)===-s;Mfe(Ir(t))&&a===1&&tv(t,n)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function Rfe(t,e,r){Wr(2,arguments);var n=Sfe(t,e)/1e3;return Tfe()(n)}function Pfe(t,e){Wr(2,arguments);var r=gh(e);return bfe(t,-r)}var Ife=864e5;function Dfe(t){Wr(1,arguments);var e=Ir(t),r=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),s=r-n;return Math.floor(s/Ife)+1}function Nb(t){Wr(1,arguments);var e=1,r=Ir(t),n=r.getUTCDay(),s=(n<e?7:0)+n-e;return r.setUTCDate(r.getUTCDate()-s),r.setUTCHours(0,0,0,0),r}function hB(t){Wr(1,arguments);var e=Ir(t),r=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var s=Nb(n),a=new Date(0);a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0);var i=Nb(a);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Lfe(t){Wr(1,arguments);var e=hB(t),r=new Date(0);r.setUTCFullYear(e,0,4),r.setUTCHours(0,0,0,0);var n=Nb(r);return n}var $fe=6048e5;function Ffe(t){Wr(1,arguments);var e=Ir(t),r=Nb(e).getTime()-Lfe(e).getTime();return Math.round(r/$fe)+1}function Sb(t,e){var r,n,s,a,i,l,c,d;Wr(1,arguments);var u=qx(),h=gh((r=(n=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(i=e.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:u.weekStartsOn)!==null&&n!==void 0?n:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ir(t),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function fB(t,e){var r,n,s,a,i,l,c,d;Wr(1,arguments);var u=Ir(t),h=u.getUTCFullYear(),f=qx(),m=gh((r=(n=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(i=e.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&n!==void 0?n:(c=f.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=Sb(p,e),y=new Date(0);y.setUTCFullYear(h,0,m),y.setUTCHours(0,0,0,0);var b=Sb(y,e);return u.getTime()>=g.getTime()?h+1:u.getTime()>=b.getTime()?h:h-1}function Bfe(t,e){var r,n,s,a,i,l,c,d;Wr(1,arguments);var u=qx(),h=gh((r=(n=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(i=e.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:u.firstWeekContainsDate)!==null&&n!==void 0?n:(c=u.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&r!==void 0?r:1),f=fB(t,e),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=Sb(m,e);return p}var zfe=6048e5;function Ufe(t,e){Wr(1,arguments);var r=Ir(t),n=Sb(r,e).getTime()-Bfe(r,e).getTime();return Math.round(n/zfe)+1}function mr(t,e){for(var r=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return r+n}var vc={y:function(e,r){var n=e.getUTCFullYear(),s=n>0?n:1-n;return mr(r==="yy"?s%100:s,r.length)},M:function(e,r){var n=e.getUTCMonth();return r==="M"?String(n+1):mr(n+1,2)},d:function(e,r){return mr(e.getUTCDate(),r.length)},a:function(e,r){var n=e.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,r){return mr(e.getUTCHours()%12||12,r.length)},H:function(e,r){return mr(e.getUTCHours(),r.length)},m:function(e,r){return mr(e.getUTCMinutes(),r.length)},s:function(e,r){return mr(e.getUTCSeconds(),r.length)},S:function(e,r){var n=r.length,s=e.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,n-3));return mr(a,r.length)}},rf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vfe={G:function(e,r,n){var s=e.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,r,n){if(r==="yo"){var s=e.getUTCFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return vc.y(e,r)},Y:function(e,r,n,s){var a=fB(e,s),i=a>0?a:1-a;if(r==="YY"){var l=i%100;return mr(l,2)}return r==="Yo"?n.ordinalNumber(i,{unit:"year"}):mr(i,r.length)},R:function(e,r){var n=hB(e);return mr(n,r.length)},u:function(e,r){var n=e.getUTCFullYear();return mr(n,r.length)},Q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return mr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,r,n){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return mr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,r,n){var s=e.getUTCMonth();switch(r){case"M":case"MM":return vc.M(e,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,r,n){var s=e.getUTCMonth();switch(r){case"L":return String(s+1);case"LL":return mr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,r,n,s){var a=Ufe(e,s);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):mr(a,r.length)},I:function(e,r,n){var s=Ffe(e);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):mr(s,r.length)},d:function(e,r,n){return r==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):vc.d(e,r)},D:function(e,r,n){var s=Dfe(e);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):mr(s,r.length)},E:function(e,r,n){var s=e.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,r,n,s){var a=e.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return mr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,r,n,s){var a=e.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return mr(i,r.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,r,n){var s=e.getUTCDay(),a=s===0?7:s;switch(r){case"i":return String(a);case"ii":return mr(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,r,n){var s=e.getUTCHours(),a=s/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,r,n){var s=e.getUTCHours(),a;switch(s===12?a=rf.noon:s===0?a=rf.midnight:a=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,r,n){var s=e.getUTCHours(),a;switch(s>=17?a=rf.evening:s>=12?a=rf.afternoon:s>=4?a=rf.morning:a=rf.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,r,n){if(r==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return vc.h(e,r)},H:function(e,r,n){return r==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):vc.H(e,r)},K:function(e,r,n){var s=e.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):mr(s,r.length)},k:function(e,r,n){var s=e.getUTCHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):mr(s,r.length)},m:function(e,r,n){return r==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):vc.m(e,r)},s:function(e,r,n){return r==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):vc.s(e,r)},S:function(e,r){return vc.S(e,r)},X:function(e,r,n,s){var a=s._originalDate||e,i=a.getTimezoneOffset();if(i===0)return"Z";switch(r){case"X":return PO(i);case"XXXX":case"XX":return xu(i);case"XXXXX":case"XXX":default:return xu(i,":")}},x:function(e,r,n,s){var a=s._originalDate||e,i=a.getTimezoneOffset();switch(r){case"x":return PO(i);case"xxxx":case"xx":return xu(i);case"xxxxx":case"xxx":default:return xu(i,":")}},O:function(e,r,n,s){var a=s._originalDate||e,i=a.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+RO(i,":");case"OOOO":default:return"GMT"+xu(i,":")}},z:function(e,r,n,s){var a=s._originalDate||e,i=a.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+RO(i,":");case"zzzz":default:return"GMT"+xu(i,":")}},t:function(e,r,n,s){var a=s._originalDate||e,i=Math.floor(a.getTime()/1e3);return mr(i,r.length)},T:function(e,r,n,s){var a=s._originalDate||e,i=a.getTime();return mr(i,r.length)}};function RO(t,e){var r=t>0?"-":"+",n=Math.abs(t),s=Math.floor(n/60),a=n%60;if(a===0)return r+String(s);var i=e;return r+String(s)+i+mr(a,2)}function PO(t,e){if(t%60===0){var r=t>0?"-":"+";return r+mr(Math.abs(t)/60,2)}return xu(t,e)}function xu(t,e){var r=e||"",n=t>0?"-":"+",s=Math.abs(t),a=mr(Math.floor(s/60),2),i=mr(s%60,2);return n+a+r+i}var IO=function(e,r){switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},mB=function(e,r){switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Hfe=function(e,r){var n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return IO(e,r);var i;switch(s){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",IO(s,r)).replace("{{time}}",mB(a,r))},Wfe={p:mB,P:Hfe},qfe=["D","DD"],Gfe=["YY","YYYY"];function Kfe(t){return qfe.indexOf(t)!==-1}function Zfe(t){return Gfe.indexOf(t)!==-1}function DO(t,e,r){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Yfe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xfe=function(e,r,n){var s,a=Yfe[e];return typeof a=="string"?s=a:r===1?s=a.one:s=a.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Qf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,n=t.formats[r]||t.formats[t.defaultWidth];return n}}var Jfe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qfe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tme={date:Qf({formats:Jfe,defaultWidth:"full"}),time:Qf({formats:Qfe,defaultWidth:"full"}),dateTime:Qf({formats:eme,defaultWidth:"full"})},rme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nme=function(e,r,n,s){return rme[e]};function Io(t){return function(e,r){var n=r!=null&&r.context?String(r.context):"standalone",s;if(n==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,i=r!=null&&r.width?String(r.width):a;s=t.formattingValues[i]||t.formattingValues[a]}else{var l=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[c]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var sme={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ame={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ime={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ome={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dme=function(e,r){var n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ume={ordinalNumber:dme,era:Io({values:sme,defaultWidth:"wide"}),quarter:Io({values:ame,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Io({values:ime,defaultWidth:"wide"}),day:Io({values:ome,defaultWidth:"wide"}),dayPeriod:Io({values:lme,defaultWidth:"wide",formattingValues:cme,defaultFormattingWidth:"wide"})};function Do(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;var i=a[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?fme(l,function(h){return h.test(i)}):hme(l,function(h){return h.test(i)}),d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;var u=e.slice(i.length);return{value:d,rest:u}}}function hme(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function fme(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function pB(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var s=n[0],a=e.match(t.parsePattern);if(!a)return null;var i=t.valueCallback?t.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;var l=e.slice(s.length);return{value:i,rest:l}}}var mme=/^(\d+)(th|st|nd|rd)?/i,pme=/\d+/i,gme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xme={any:[/^b/i,/^(a|c)/i]},yme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vme={any:[/1/i,/2/i,/3/i,/4/i]},bme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Cme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nme={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Eme={ordinalNumber:pB({matchPattern:mme,parsePattern:pme,valueCallback:function(e){return parseInt(e,10)}}),era:Do({matchPatterns:gme,defaultMatchWidth:"wide",parsePatterns:xme,defaultParseWidth:"any"}),quarter:Do({matchPatterns:yme,defaultMatchWidth:"wide",parsePatterns:vme,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Do({matchPatterns:bme,defaultMatchWidth:"wide",parsePatterns:wme,defaultParseWidth:"any"}),day:Do({matchPatterns:kme,defaultMatchWidth:"wide",parsePatterns:Cme,defaultParseWidth:"any"}),dayPeriod:Do({matchPatterns:Nme,defaultMatchWidth:"any",parsePatterns:Sme,defaultParseWidth:"any"})},gB={code:"en-US",formatDistance:Xfe,formatLong:tme,formatRelative:nme,localize:ume,match:Eme,options:{weekStartsOn:0,firstWeekContainsDate:1}},jme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_me=/^'([^]*?)'?$/,Ame=/''/g,Mme=/[a-zA-Z]/;function xB(t,e,r){var n,s,a,i,l,c,d,u,h,f,m,p,g,y,b,v,w,k;Wr(2,arguments);var N=String(e),S=qx(),C=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:S.locale)!==null&&n!==void 0?n:gB,E=gh((a=(i=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(d=r.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&i!==void 0?i:(h=S.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(E>=1&&E<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=gh((m=(p=(g=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(b=r.locale)===null||b===void 0||(v=b.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&g!==void 0?g:S.weekStartsOn)!==null&&p!==void 0?p:(w=S.locale)===null||w===void 0||(k=w.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&m!==void 0?m:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var R=Ir(t);if(!Cfe(R))throw new RangeError("Invalid time value");var B=aj(R),M=Pfe(R,B),L={firstWeekContainsDate:E,weekStartsOn:T,locale:C,_originalDate:R},V=N.match(Tme).map(function(ee){var Q=ee[0];if(Q==="p"||Q==="P"){var J=Wfe[Q];return J(ee,C.formatLong)}return ee}).join("").match(jme).map(function(ee){if(ee==="''")return"'";var Q=ee[0];if(Q==="'")return Ome(ee);var J=Vfe[Q];if(J)return!(r!=null&&r.useAdditionalWeekYearTokens)&&Zfe(ee)&&DO(ee,e,String(t)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Kfe(ee)&&DO(ee,e,String(t)),J(M,ee,C.localize,L);if(Q.match(Mme))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Q+"`");return ee}).join("");return V}function Ome(t){var e=t.match(_me);return e?e[1].replace(Ame,"'"):t}function yB(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function Rme(t){return yB({},t)}var LO=1440,Pme=2520,XC=43200,Ime=86400;function Dme(t,e,r){var n,s;Wr(2,arguments);var a=qx(),i=(n=(s=r==null?void 0:r.locale)!==null&&s!==void 0?s:a.locale)!==null&&n!==void 0?n:gB;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=tv(t,e);if(isNaN(l))throw new RangeError("Invalid time value");var c=yB(Rme(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),d,u;l>0?(d=Ir(e),u=Ir(t)):(d=Ir(t),u=Ir(e));var h=Rfe(u,d),f=(aj(u)-aj(d))/1e3,m=Math.round((h-f)/60),p;if(m<2)return r!=null&&r.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,c):h<10?i.formatDistance("lessThanXSeconds",10,c):h<20?i.formatDistance("lessThanXSeconds",20,c):h<40?i.formatDistance("halfAMinute",0,c):h<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):m===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",m,c);if(m<45)return i.formatDistance("xMinutes",m,c);if(m<90)return i.formatDistance("aboutXHours",1,c);if(m<LO){var g=Math.round(m/60);return i.formatDistance("aboutXHours",g,c)}else{if(m<Pme)return i.formatDistance("xDays",1,c);if(m<XC){var y=Math.round(m/LO);return i.formatDistance("xDays",y,c)}else if(m<Ime)return p=Math.round(m/XC),i.formatDistance("aboutXMonths",p,c)}if(p=Ofe(u,d),p<12){var b=Math.round(m/XC);return i.formatDistance("xMonths",b,c)}else{var v=p%12,w=Math.floor(p/12);return v<3?i.formatDistance("aboutXYears",w,c):v<9?i.formatDistance("overXYears",w,c):i.formatDistance("almostXYears",w+1,c)}}function Eb(t,e){return Wr(1,arguments),Dme(t,Date.now(),e)}var Lme={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},$me=function(e,r,n){var s,a=Lme[e];return typeof a=="string"?s=a:r===1?s=a.one:s=a.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+s:"hace "+s:s},Fme={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Bme={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},zme={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ume={date:Qf({formats:Fme,defaultWidth:"full"}),time:Qf({formats:Bme,defaultWidth:"full"}),dateTime:Qf({formats:zme,defaultWidth:"full"})},Vme={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Hme={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Wme=function(e,r,n,s){return r.getUTCHours()!==1?Hme[e]:Vme[e]},qme={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},Gme={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Kme={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Zme={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Yme={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},Xme={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Jme=function(e,r){var n=Number(e);return n+""},Qme={ordinalNumber:Jme,era:Io({values:qme,defaultWidth:"wide"}),quarter:Io({values:Gme,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Io({values:Kme,defaultWidth:"wide"}),day:Io({values:Zme,defaultWidth:"wide"}),dayPeriod:Io({values:Yme,defaultWidth:"wide",formattingValues:Xme,defaultFormattingWidth:"wide"})},epe=/^(\d+)()?/i,tpe=/\d+/i,rpe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},npe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},spe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},ape={any:[/1/i,/2/i,/3/i,/4/i]},ipe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ope={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},lpe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},cpe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},dpe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},upe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},hpe={ordinalNumber:pB({matchPattern:epe,parsePattern:tpe,valueCallback:function(e){return parseInt(e,10)}}),era:Do({matchPatterns:rpe,defaultMatchWidth:"wide",parsePatterns:npe,defaultParseWidth:"any"}),quarter:Do({matchPatterns:spe,defaultMatchWidth:"wide",parsePatterns:ape,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Do({matchPatterns:ipe,defaultMatchWidth:"wide",parsePatterns:ope,defaultParseWidth:"any"}),day:Do({matchPatterns:lpe,defaultMatchWidth:"wide",parsePatterns:cpe,defaultParseWidth:"any"}),dayPeriod:Do({matchPatterns:dpe,defaultMatchWidth:"any",parsePatterns:upe,defaultParseWidth:"any"})},Um={code:"es",formatDistance:$me,formatLong:Ume,formatRelative:Wme,localize:Qme,match:hpe,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Kt=x.forwardRef(({label:t,error:e,helperText:r,className:n="",id:s,children:a,...i},l)=>{const c=s||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-")),h=`block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500":""} ${n}`;return o.jsxs("div",{className:"space-y-1",children:[t&&o.jsx("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),o.jsx("select",{id:c,ref:l,className:h,...i,children:a}),e&&o.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:e}),r&&!e&&o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})});Kt.displayName="Select";const fpe=({isActive:t,startTime:e,onStart:r,onPause:n,onStop:s,isLoading:a=!1,disabled:i=!1})=>{const[l,c]=x.useState(new Date);x.useEffect(()=>{if(!t||!e)return;const u=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(u)},[t,e]);const d=()=>{if(!t||!e)return"00:00:00";const u=new Date(e),f=l.getTime()-u.getTime(),m=Math.floor(f/(1e3*60*60)),p=Math.floor(f%(1e3*60*60)/(1e3*60)),g=Math.floor(f%(1e3*60)/1e3);return`${m.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`};return o.jsxs("div",{className:"flex items-center gap-2",children:[t&&o.jsxs("div",{className:"flex items-center text-sm font-mono bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-md",children:[o.jsx(O,{action:"time",size:"sm",className:"mr-1"}),d()]}),o.jsx("div",{className:"flex items-center gap-1",children:t?o.jsxs(o.Fragment,{children:[o.jsx(ae,{onClick:n,disabled:i||a,variant:"warning",size:"sm",title:"Pausar timer",children:o.jsx(O,{action:"pause",size:"sm"})}),o.jsx(ae,{onClick:s,disabled:i||a,variant:"danger",size:"sm",title:"Detener timer",children:o.jsx(O,{action:"stop",size:"sm"})})]}):o.jsx(ae,{onClick:r,disabled:i||a,variant:"success",size:"sm",title:"Iniciar timer",children:o.jsx(O,{action:"play",size:"sm"})})}),a&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),!t&&e&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Pausado"," ",Eb(new Date(e),{addSuffix:!0,locale:Um})]})]})};class mpe{constructor(){ve(this,"baseUrl");ve(this,"backendUrl");this.baseUrl=Pn.api.baseUrl,this.backendUrl=Pn.api.backendUrl}getApiUrl(e=""){const r=e.startsWith("/")?e:`/${e}`;return`${this.baseUrl}${r}`}getBackendUrl(e=""){const r=e.startsWith("/")?e:`/${e}`;return`${this.backendUrl}${r}`}async get(e,r){const n=this.getApiUrl(e),s=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",...r==null?void 0:r.headers},...r});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}async post(e,r,n){const s=this.getApiUrl(e),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",...n==null?void 0:n.headers},body:r?JSON.stringify(r):void 0,...n});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}async put(e,r,n){const s=this.getApiUrl(e),a=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json",...n==null?void 0:n.headers},body:r?JSON.stringify(r):void 0,...n});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return a.json()}async delete(e,r){const n=this.getApiUrl(e),s=await fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json",...r==null?void 0:r.headers},...r});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}async authenticatedRequest(e,r={}){const{token:n,...s}=r,a=n||localStorage.getItem("token");return this.get(e,{...s,headers:{Authorization:a?`Bearer ${a}`:"",...s.headers}})}}const $O=new mpe,Gx={async getTimeEntries(t){const e=ct.getValidTokens();if(!e)throw new Error("No valid authentication token");return $O.get(`/time-entries/case-control/${t}`,{headers:{Authorization:`Bearer ${e.token}`}})},async getManualTimeEntries(t){const e=ct.getValidTokens();if(!e)throw new Error("No valid authentication token");return $O.get(`/manual-time-entries/case-control/${t}`,{headers:{Authorization:`Bearer ${e.token}`}})},async addManualTime(t){const e=ct.getValidTokens();if(!e)throw new Error("No valid authentication token");const r=await fetch(`${Pn.api.backendUrl}/api/manual-time-entries`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify({caseControlId:t.caseControlId,description:t.description,durationMinutes:t.durationHours*60+t.durationMinutes,date:t.date})});if(!r.ok)throw new Error("Failed to add manual time");return r.json()},async deleteTimeEntry(t){const e=ct.getValidTokens();if(!e)throw new Error("No valid authentication token");if(!(await fetch(`${Pn.api.backendUrl}/api/time-entries/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e.token}`}})).ok)throw new Error("Failed to delete time entry")},async deleteManualTimeEntry(t){const e=ct.getValidTokens();if(!e)throw new Error("No valid authentication token");if(!(await fetch(`${Pn.api.backendUrl}/api/manual-time-entries/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e.token}`}})).ok)throw new Error("Failed to delete manual time entry")}},ppe=t=>Vr({queryKey:["timeEntries",t],queryFn:()=>Gx.getTimeEntries(t),enabled:!!t}),gpe=t=>Vr({queryKey:["manualTimeEntries",t],queryFn:()=>Gx.getManualTimeEntries(t),enabled:!!t}),xpe=()=>{const t=ur();return gr({mutationFn:Gx.addManualTime,onSuccess:e=>{t.invalidateQueries({queryKey:["manualTimeEntries",e.caseControlId]}),t.invalidateQueries({queryKey:["caseControls"]}),t.refetchQueries({queryKey:["caseControls"]}),t.invalidateQueries({queryKey:["timeEntries"]})}})},ype=()=>{const t=ur();return gr({mutationFn:Gx.deleteTimeEntry,onSuccess:()=>{t.invalidateQueries({queryKey:["timeEntries"]}),t.invalidateQueries({queryKey:["caseControls"]}),t.refetchQueries({queryKey:["caseControls"]})}})},vpe=()=>{const t=ur();return gr({mutationFn:Gx.deleteManualTimeEntry,onSuccess:()=>{t.invalidateQueries({queryKey:["manualTimeEntries"]}),t.invalidateQueries({queryKey:["caseControls"]}),t.refetchQueries({queryKey:["caseControls"]})}})},FO=t=>{if(!t)return"Fecha no vlida";try{const e=typeof t=="string"?new Date(t):t;return isNaN(e.getTime())?"Fecha no vlida":xB(e,"dd/MM/yyyy",{locale:Um})}catch{return"Fecha no vlida"}},ij=(t,e="dd/MM/yyyy")=>{if(!t)return"Hora no vlida";try{const r=typeof t=="string"?new Date(t):t;return isNaN(r.getTime())?"Hora no vlida":xB(r,e,{locale:Um})}catch{return"Hora no vlida"}},c0=t=>{if(t===0||isNaN(t))return"0 min";const e=Math.floor(t/60),r=Math.round(t%60);return e===0?`${r} min`:r===0?`${e}h`:`${e}h ${r}min`};function BO(){return new Date().toISOString().split("T")[0]}const bpe=({isOpen:t,onClose:e,caseControl:r})=>{var B,M,L,V,ee,Q,J,_,H;const n=ppe((r==null?void 0:r.id)||""),s=gpe((r==null?void 0:r.id)||""),a=xpe(),i=vpe(),l=ype(),{success:c,error:d}=nr(),{confirmDelete:u,modalState:h,modalHandlers:f}=hc(),[m,p]=x.useState(!1),[g,y]=x.useState({description:"",hours:0,minutes:0,date:BO()}),[b,v]=x.useState(!1);if(!r)return null;const w=n.data||[],k=s.data||[],N=w.reduce((P,K)=>{if(K.endTime&&K.startTime)try{const F=new Date(K.startTime),ne=new Date(K.endTime);if(!isNaN(F.getTime())&&!isNaN(ne.getTime()))return P+(ne.getTime()-F.getTime())/(1e3*60)}catch(F){console.warn("Error calculando tiempo:",F)}return K.durationMinutes?P+K.durationMinutes:P},0),S=k.reduce((P,K)=>{const F=K.durationMinutes||0;return P+F},0),C=N+S,E=async()=>{if(!(!r||!g.description.trim())){if(g.description.trim().length<100){d("La descripcin debe tener al menos 100 caracteres");return}v(!0);try{await a.mutateAsync({caseControlId:r.id,description:g.description,durationHours:g.hours,durationMinutes:g.minutes,date:g.date}),y({description:"",hours:0,minutes:0,date:BO()}),p(!1)}catch(P){console.error("Error adding manual time:",P)}finally{v(!1)}}},T=async P=>{if(await u("entrada de tiempo"))try{await l.mutateAsync(P),c("Entrada de tiempo eliminada exitosamente")}catch(F){console.error("Error deleting time entry:",F),d("Error al eliminar la entrada de tiempo")}},R=async P=>{if(await u("entrada manual"))try{await i.mutateAsync(P),c("Entrada manual eliminada exitosamente")}catch(F){console.error("Error deleting manual entry:",F),d("Error al eliminar la entrada manual")}};return o.jsxs(At,{isOpen:t,onClose:e,title:"Detalles de Control de Caso",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:((B=r.case)==null?void 0:B.numeroCaso)||`Caso ${r.caseId}`}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:((M=r.case)==null?void 0:M.descripcion)||"Sin descripcin"}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Estado: ",((L=r.status)==null?void 0:L.name)||"Sin estado"]}),o.jsxs("span",{children:["Clasificacin:"," ",((V=r.case)==null?void 0:V.clasificacion)||"Sin clasificacin"]})]})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(O,{action:"time",size:"md",color:"info"}),o.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Tiempo Total Registrado"})]}),o.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:c0(C)}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Tiempo por Timer:"}),o.jsx("br",{}),o.jsx("span",{className:"font-medium",children:c0(N)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 dark:text-blue-300",children:"Tiempo Manual:"}),o.jsx("br",{}),o.jsx("span",{className:"font-medium",children:c0(S)})]})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Historial de Tiempo"}),o.jsxs(ae,{onClick:()=>p(!0),variant:"secondary",size:"sm",className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Agregar Tiempo Manual"]})]}),m&&o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:"Agregar Tiempo Manual"}),o.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:o.jsx(O,{action:"close",size:"md"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin de las tareas realizadas *"}),o.jsx("textarea",{value:g.description,onChange:P=>y(K=>({...K,description:P.target.value})),className:`
                    w-full p-3 border rounded-lg resize-none
                    dark:bg-gray-700 dark:border-gray-600 dark:text-white
                    focus:ring-2 focus:ring-blue-500 focus:border-transparent
                    ${g.description.trim().length<100&&g.description.trim().length>0?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"}
                  `,rows:3,placeholder:"Describe detalladamente las actividades realizadas...",required:!0}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("div",{className:`text-sm ${g.description.trim().length<100?"text-red-500 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[g.description.trim().length,"/100 caracteres mnimos"]}),g.description.trim().length>=100&&o.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-sm",children:[o.jsx(O,{action:"check",size:"sm"}),o.jsx("span",{children:"Vlido"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsx(ft,{label:"Horas",type:"number",min:"0",max:"23",value:g.hours,onChange:P=>y(K=>({...K,hours:parseInt(P.target.value)||0}))}),o.jsx(ft,{label:"Minutos",type:"number",min:"0",max:"59",value:g.minutes,onChange:P=>y(K=>({...K,minutes:parseInt(P.target.value)||0}))}),o.jsx(ft,{label:"Fecha",type:"date",value:g.date,onChange:P=>y(K=>({...K,date:P.target.value}))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ae,{onClick:E,disabled:!g.description.trim()||g.description.trim().length<100||b||g.hours===0&&g.minutes===0,className:"flex-1",children:b?"Guardando...":"Guardar Tiempo"}),o.jsx(ae,{onClick:()=>p(!1),variant:"secondary",children:"Cancelar"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[w.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[o.jsx(O,{action:"time",size:"sm"}),"Entradas de Timer (",w.length,")"]}),o.jsx("div",{className:"space-y-2",children:w.map(P=>o.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(O,{action:"calendar",size:"sm"}),FO(P.startTime||P.start_time)]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-medium",children:ij(P.startTime||P.start_time,"HH:mm")}),(P.endTime||P.end_time)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mx-2",children:""}),o.jsx("span",{className:"font-medium",children:ij(P.endTime||P.end_time,"HH:mm")})]})]}),(P.endTime||P.end_time)&&o.jsxs("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mt-1",children:["Duracin:"," ",(()=>{try{const K=new Date(P.endTime||P.end_time),F=new Date(P.startTime||P.start_time);if(isNaN(K.getTime())||isNaN(F.getTime()))return"Duracin no vlida";const ne=(K.getTime()-F.getTime())/(1e3*60);return c0(ne)}catch{return"Duracin no vlida"}})()]}),P.description?o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(O,{action:"info",size:"sm",className:"text-blue-500 dark:text-blue-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Actividades:"}),o.jsx("p",{className:"mt-1",children:P.description})]})]})}):o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic flex items-center gap-1",children:[o.jsx(O,{action:"info",size:"sm"}),"Sin descripcin de actividades registrada"]})]}),o.jsx("button",{onClick:()=>T(P.id),className:"text-red-400 hover:text-red-600 ml-2",title:"Eliminar entrada",children:o.jsx(O,{action:"delete",size:"sm"})})]})},P.id))})]}),k.length>0&&o.jsxs("div",{children:[o.jsxs("h5",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Entradas Manuales (",k.length,")"]}),o.jsx("div",{className:"space-y-2",children:k.map(P=>o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-3",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx(O,{action:"calendar",size:"sm"}),FO(P.date)]}),o.jsxs("div",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300 mb-2",children:["Duracin:"," ",c0(P.durationMinutes||0)]}),P.description&&o.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(O,{action:"info",size:"sm",className:"text-yellow-600 dark:text-yellow-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Actividades:"}),o.jsx("p",{className:"mt-1",children:P.description})]})]})})]}),o.jsx("button",{onClick:()=>R(P.id),className:"text-red-400 hover:text-red-600 ml-2",title:"Eliminar entrada",children:o.jsx(O,{action:"delete",size:"sm"})})]})},P.id))})]}),w.length===0&&k.length===0&&o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"time",size:"xl",color:"neutral",className:"mx-auto mb-3"}),o.jsx("p",{children:"No hay registros de tiempo para este caso."}),o.jsx("p",{className:"text-sm",children:"Inicia el timer o agrega tiempo manualmente."})]})]})]}),o.jsx(Ha,{isOpen:h.isOpen,onClose:f.onClose,onConfirm:f.onConfirm,title:((ee=h.options)==null?void 0:ee.title)||"",message:((Q=h.options)==null?void 0:Q.message)||"",confirmText:(J=h.options)==null?void 0:J.confirmText,cancelText:(_=h.options)==null?void 0:_.cancelText,type:(H=h.options)==null?void 0:H.type})]})},Pa=({children:t,className:e="",padding:r="md"})=>{const a=`bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm ${{none:"",sm:"p-3",md:"p-4",lg:"p-6"}[r]} ${e}`;return o.jsx("div",{className:a,children:t})},wpe=({isOpen:t,onClose:e,onAssign:r})=>{const n=ur(),{user:s}=ti(),[a,i]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),{data:h=[]}=Vr({queryKey:["cases"],queryFn:async()=>{const v=ct.getValidTokens();if(!v)throw new Error("No valid authentication token");return(await(await fetch(`${Pn.api.backendUrl}/api/cases`,{headers:{Authorization:`Bearer ${v.token}`}})).json()).data||[]},enabled:t}),{data:f=[]}=Vr({queryKey:["caseControls"],queryFn:jT,enabled:t}),{data:m=[]}=Vr({queryKey:["users"],queryFn:async()=>{const v=ct.getValidTokens();if(!v)throw new Error("No valid authentication token");return(await(await fetch(`${Pn.api.backendUrl}/api/auth/users`,{headers:{Authorization:`Bearer ${v.token}`}})).json()).data||[]},enabled:t}),p=gr({mutationFn:Kue,onSuccess:()=>{n.invalidateQueries({queryKey:["caseControls"]}),r(),e(),i(""),c(""),u("")},onError:v=>{console.error("Error al asignar caso:",v)}}),g=h.filter(v=>f.some(k=>{var N;return((N=k.case)==null?void 0:N.id)===v.id})?!1:v.numeroCaso.toLowerCase().includes(d.toLowerCase())||v.descripcion.toLowerCase().includes(d.toLowerCase())),y=v=>{v.preventDefault(),a&&p.mutate({caseId:a,userId:l||(s==null?void 0:s.id)})},b=h.find(v=>v.id===a);return o.jsx(At,{isOpen:t,onClose:e,title:"Asignar Caso al Control",size:"xl",children:o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar Caso"}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",className:"absolute left-3 top-1/2 transform -translate-y-1/2",color:"neutral"}),o.jsx(ft,{placeholder:"Buscar por nmero de caso o descripcin...",value:d,onChange:v=>u(v.target.value),className:"pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar Caso *"}),o.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md",children:g.length===0?o.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron casos"}):g.map(v=>o.jsx("div",{className:`p-3 border-b border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${a===v.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""}`,onClick:()=>i(v.id),children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:v.numeroCaso}),o.jsx(la,{variant:v.clasificacion==="Alta Complejidad"?"danger":v.clasificacion==="Media Complejidad"?"warning":"secondary",children:v.clasificacion}),o.jsx(la,{variant:"info",children:v.estado})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:v.descripcion}),o.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 dark:text-gray-500",children:[v.application&&o.jsxs("span",{children:["App: ",v.application.nombre]}),v.origin&&o.jsxs("span",{children:["Origen: ",v.origin.nombre]})]})]}),o.jsx("input",{type:"radio",name:"selectedCase",checked:a===v.id,onChange:()=>i(v.id),className:"mt-1"})]})},v.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Asignar a Usuario"}),o.jsxs(Kt,{value:l,onChange:v=>c(v.target.value),className:"w-full",children:[o.jsx("option",{value:"",children:"Auto-asignar al usuario actual"}),m.map(v=>o.jsxs("option",{value:v.id,children:[v.fullName," (",v.email,")"]},v.id))]})]}),b&&o.jsxs(Pa,{className:"p-4 bg-blue-50 dark:bg-blue-900/20",children:[o.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:["Caso Seleccionado: ",b.numeroCaso]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.descripcion})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,children:"Cancelar"}),o.jsx(ae,{type:"submit",disabled:!a||p.isPending,children:p.isPending?"Asignando...":"Asignar Caso"})]})]})})},hu=100,kpe=({isOpen:t,onClose:e,onSave:r,title:n,isLoading:s=!1,timeRegistered:a})=>{const[i,l]=x.useState(""),[c,d]=x.useState("");x.useEffect(()=>{t||(l(""),d(""))},[t]);const u=()=>{if(i.trim().length<hu){d(`La descripcin debe tener al menos ${hu} caracteres`);return}d(""),r(i.trim())},h=p=>{l(p),c&&p.trim().length>=hu&&d("")},f=i.trim().length,m=f>=hu;return o.jsx(At,{isOpen:t,onClose:e,title:n,children:o.jsxs("div",{className:"space-y-4",children:[a&&o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:o.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[o.jsx(O,{action:"time",size:"sm"}),o.jsxs("span",{className:"font-medium",children:["Tiempo registrado: ",a]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin de las tareas realizadas *"}),o.jsx("textarea",{value:i,onChange:p=>h(p.target.value),className:`
              w-full p-3 border rounded-lg resize-none
              dark:bg-gray-700 dark:border-gray-600 dark:text-white
              focus:ring-2 focus:ring-blue-500 focus:border-transparent
              ${c?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"}
            `,rows:4,placeholder:"Describe detalladamente las actividades, tareas o avances realizados durante este tiempo...",disabled:s}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("div",{className:`text-sm ${f<hu?"text-red-500 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[f,"/",hu," caracteres"," ",f<hu?"mnimos":""]}),m&&o.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-sm",children:[o.jsx(O,{action:"check",size:"sm"}),o.jsx("span",{children:"Vlido"})]})]}),c&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-500 dark:text-red-400 text-sm",children:[o.jsx(O,{action:"warning",size:"sm"}),o.jsx("span",{children:c})]})]}),o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-700",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(O,{action:"info",size:"sm",className:"text-yellow-600 dark:text-yellow-400 mt-0.5"}),o.jsxs("div",{className:"text-yellow-700 dark:text-yellow-300 text-sm",children:[o.jsx("p",{className:"font-medium",children:"Por qu es obligatorio?"}),o.jsx("p",{children:"La descripcin de las tareas ayuda a mantener un registro detallado del trabajo realizado y facilita el seguimiento del progreso del caso."})]})]})}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:s,className:"flex-1",children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:u,disabled:!m||s,className:"flex-1",children:s?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"loading",size:"sm",className:"mr-2"}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"save",size:"sm",className:"mr-2"}),"Guardar Tiempo"]})})]})]})})};class Cpe{constructor(){ve(this,"baseUrl","/archive")}async getArchiveStats(){const e=await Ze.authenticatedRequest(`${this.baseUrl}/stats`);if(!e.data)throw new Error("Failed to load archive stats");return e.data}async getArchivedCases(e){const r=new URLSearchParams;return e&&Object.entries(e).forEach(([s,a])=>{a!=null&&(typeof a=="boolean"?r.append(s,String(a)):Array.isArray(a)?r.append(s,a.join(",")):r.append(s,String(a)))}),(await Ze.authenticatedRequest(`${this.baseUrl}/cases${r.toString()?`?${r.toString()}`:""}`)).data||[]}async getArchivedCaseById(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/cases/${e}`);if(!r.data)throw new Error("Archived case not found");return r.data}async archiveCase(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/cases`,{method:"POST",body:JSON.stringify(e)});if(!r.data)throw new Error("Failed to archive case");return r.data}async restoreCase(e,r){const n=await Ze.authenticatedRequest(`${this.baseUrl}/case/${e}/restore`,{method:"POST",body:JSON.stringify(r)});if(!n.data)throw new Error("Failed to restore case");return n.data}async deleteArchivedCase(e){await Ze.authenticatedRequest(`${this.baseUrl}/cases/${e}`,{method:"DELETE"})}async getArchivedTodos(e){const r=new URLSearchParams;return e&&Object.entries(e).forEach(([s,a])=>{a!=null&&(typeof a=="boolean"?r.append(s,String(a)):Array.isArray(a)?r.append(s,a.join(",")):r.append(s,String(a)))}),(await Ze.authenticatedRequest(`${this.baseUrl}/todos${r.toString()?`?${r.toString()}`:""}`)).data||[]}async getArchivedTodoById(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/todos/${e}`);if(!r.data)throw new Error("Archived todo not found");return r.data}async archiveTodo(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/todos`,{method:"POST",body:JSON.stringify(e)});if(!r.data)throw new Error("Failed to archive todo");return r.data}async restoreTodo(e,r){const n=await Ze.authenticatedRequest(`${this.baseUrl}/todo/${e}/restore`,{method:"POST",body:JSON.stringify(r)});if(!n.data)throw new Error("Failed to restore todo");return n.data}async deleteArchivedTodo(e){await Ze.authenticatedRequest(`${this.baseUrl}/todos/${e}`,{method:"DELETE"})}async getArchivedItems(e){const r=new URLSearchParams;e&&Object.entries(e).forEach(([a,i])=>{i!=null&&(typeof i=="boolean"?r.append(a,String(i)):Array.isArray(i)?r.append(a,i.join(",")):r.append(a,String(i)))});const n=`${this.baseUrl}/items${r.toString()?`?${r.toString()}`:""}`;return(await Ze.authenticatedRequest(n)).data||[]}async searchArchivedItems(e,r,n){const s=new URLSearchParams({q:e});return r&&s.append("type",r),n&&s.append("limit",String(n)),(await Ze.authenticatedRequest(`${this.baseUrl}/search?${s.toString()}`)).data||[]}formatTime(e){const r=Math.floor(e/60),n=e%60;return`${r}h ${n}m`}formatDate(e){return new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}formatRelativeDate(e){const r=new Date(e),s=new Date().getTime()-r.getTime(),a=Math.floor(s/(1e3*60*60*24));if(a===0)return"Hoy";if(a===1)return"Ayer";if(a<7)return`Hace ${a} das`;if(a<30){const i=Math.floor(a/7);return`Hace ${i} semana${i>1?"s":""}`}else if(a<365){const i=Math.floor(a/30);return`Hace ${i} mes${i>1?"es":""}`}else{const i=Math.floor(a/365);return`Hace ${i} ao${i>1?"s":""}`}}getStatusColor(e){return e?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}getPriorityColor(e){switch(e.toLowerCase()){case"urgent":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"low":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}}getClassificationColor(e){switch(e.toLowerCase()){case"complex":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"simple":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}}async archiveCaseById(e,r){var n,s;try{const a=await Ze.authenticatedRequest(`${this.baseUrl}/case/${e}`,{method:"POST",body:JSON.stringify({reason:r})});if(!((n=a.data)!=null&&n.data)&&!a.data)throw console.error("Estructura de respuesta inesperada:",a),new Error("Failed to archive case");return((s=a.data)==null?void 0:s.data)||a.data}catch(a){throw console.error("Error en archiveCaseById:",a),a}}async archiveTodoById(e,r){var s;const n=await Ze.authenticatedRequest(`${this.baseUrl}/todo/${e}`,{method:"POST",body:JSON.stringify({reason:r})});if(!((s=n.data)!=null&&s.data))throw new Error("Failed to archive todo");return n.data.data}}const Fa=new Cpe,Npe=()=>{var le,ye,Ve,Be,ut;const t=ur(),{user:e,isAuthenticated:r}=ti(),{success:n,error:s}=nr(),{confirmDangerAction:a,modalState:i,modalHandlers:l}=hc(),[c,d]=x.useState(""),[u,h]=x.useState(""),[f,m]=x.useState(!1),[p,g]=x.useState(null),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[k,N]=x.useState(!1),[S,C]=x.useState("stop"),[E,T]=x.useState(null),[R,B]=x.useState(""),{data:M=[],isLoading:L}=Vr({queryKey:["caseControls"],queryFn:jT}),{data:V=[]}=Vr({queryKey:["caseStatuses"],queryFn:Jue}),ee=gr({mutationFn:Zue,onSuccess:()=>{t.invalidateQueries({queryKey:["caseControls"]})}}),Q=gr({mutationFn:Xue,onSuccess:()=>{t.invalidateQueries({queryKey:["caseControls"]})}}),J=gr({mutationFn:Yue,onSuccess:()=>{t.invalidateQueries({queryKey:["caseControls"]})}}),_=gr({mutationFn:tO,onSuccess:()=>{t.invalidateQueries({queryKey:["caseControls"]})}}),H=async Te=>{var ht;if(!((ht=Te.case)!=null&&ht.id))return;if(!r||!e){s("Debe estar autenticado para archivar casos.");return}if(await a("Archivar Caso",`Est seguro que desea archivar el caso ${Te.case.numeroCaso}? Esta accin no se puede deshacer fcilmente.`)){w(!0);try{console.log("Archivando caso:",{caseId:Te.case.id,caseNumber:Te.case.numeroCaso,user:e,isAuthenticated:r}),await Fa.archiveCaseById(Te.case.id,"Archivado desde Control de Casos"),t.invalidateQueries({queryKey:["caseControls"]}),n("Caso archivado exitosamente")}catch(pt){console.error("Error archivando caso:",pt),pt instanceof Error?pt.message.includes("Session expired")||pt.message.includes("401")?s("Su sesin ha expirado. Por favor inicie sesin nuevamente."):s(`Error archivando el caso: ${pt.message}`):s("Error archivando el caso. Por favor intente nuevamente.")}finally{w(!1)}}},P=M.filter(Te=>{var je,ht;if(u&&Te.statusId!==u)return!1;if(c&&((je=Te.case)!=null&&je.numeroCaso)){const pt=c.toLowerCase(),re=Te.case.numeroCaso.toLowerCase(),ce=((ht=Te.case.descripcion)==null?void 0:ht.toLowerCase())||"";if(!re.includes(pt)&&!ce.includes(pt))return!1}return!0}),K=Te=>{const je=Math.floor(Te/60),ht=Te%60;return`${je}h ${ht}m`},F=Te=>Te&&Te.color?{backgroundColor:Te.color,color:"white"}:{},ne=async()=>{try{const Te=`reporte-control-casos-${new Date().toISOString().split("T")[0]}.xlsx`;await HF(Te,je=>{console.log("Reporte generado exitosamente:",je),n("Reporte generado exitosamente")},je=>{console.error("Error al generar reporte:",je),s("Error al generar el reporte")})}catch(Te){console.error("Error al generar reporte:",Te),s("Error al generar el reporte")}},z=async Te=>{try{await ee.mutateAsync({caseControlId:Te.id});const je=V.find(ht=>ht.name==="EN CURSO");if(je&&Te.statusId!==je.id)try{await tO({id:Te.id,statusId:je.id}),t.invalidateQueries({queryKey:["caseControls"]}),n("Timer iniciado y caso cambiado a estado 'En Curso' automticamente")}catch(ht){console.error("Error al cambiar estado:",ht),n("Timer iniciado correctamente (pero no se pudo cambiar el estado automticamente)")}else je?n("Timer iniciado correctamente"):(console.warn("No se encontr el estado 'EN CURSO' en la base de datos"),n("Timer iniciado correctamente (estado 'EN CURSO' no encontrado)"))}catch(je){console.error("Error al iniciar timer:",je),je instanceof Error&&je.message.includes("404")?s("Endpoint no encontrado. El backend no est configurado para timers."):s("Error al iniciar el timer. Verifique la conexin con el servidor.")}},Z=Te=>{const je=new Date(Te),pt=new Date().getTime()-je.getTime(),re=Math.floor(pt/(1e3*60*60)),ce=Math.floor(pt%(1e3*60*60)/(1e3*60));return re>0?`${re}h ${ce}m`:`${ce}m`},oe=async Te=>{if(Te.timerStartAt){const je=Z(Te.timerStartAt);B(je)}T(Te),C("pause"),N(!0)},ue=async Te=>{if(Te.timerStartAt){const je=Z(Te.timerStartAt);B(je)}T(Te),C("stop"),N(!0)},_e=async Te=>{if(E)try{S==="pause"?(await Q.mutateAsync({caseControlId:E.id,description:Te}),n("Timer pausado correctamente")):(await J.mutateAsync({caseControlId:E.id,description:Te}),n("Timer detenido correctamente")),N(!1),T(null),B("")}catch(je){console.error(`Error al ${S==="pause"?"pausar":"detener"} timer:`,je),je instanceof Error&&je.message.includes("404")?s("Endpoint no encontrado. El backend no est configurado para timers."):s(`Error al ${S==="pause"?"pausar":"detener"} el timer. Verifique la conexin con el servidor.`)}},we=()=>{N(!1),T(null),B("")},Y=async(Te,je)=>{try{await _.mutateAsync({id:Te,statusId:je}),n("Estado actualizado correctamente")}catch(ht){console.error("Error al actualizar estado:",ht),s("Error al actualizar el estado. Verifique que el endpoint est disponible.")}};return L?o.jsx("div",{className:"flex items-center justify-center p-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Control de Casos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona el tiempo y estado de los casos asignados"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(ae,{variant:"ghost",size:"sm",className:"flex items-center",onClick:ne,children:[o.jsx(O,{action:"report",size:"sm",className:"mr-2"}),"Reportes"]}),o.jsxs(ae,{onClick:()=>b(!0),className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Asignar Caso"]})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"settings",size:"md",color:"neutral",className:"mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filtros:"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"md",color:"neutral",className:"absolute left-3 top-1/2 transform -translate-y-1/2"}),o.jsx(ft,{value:c,onChange:Te=>d(Te.target.value),placeholder:"Buscar por nmero o descripcin...",className:"pl-10 w-64"})]}),o.jsxs(Kt,{value:u,onChange:Te=>h(Te.target.value),className:"w-48",children:[o.jsx("option",{value:"",children:"Todos los estados"}),V.map(Te=>o.jsx("option",{value:Te.id,children:Te.name},Te.id))]}),(u||c)&&o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{h(""),d("")},children:"Limpiar filtros"})]})}),(c||u)&&o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[P.length===0?"No se encontraron casos":`Mostrando ${P.length} de ${M.length} casos`,c&&o.jsxs("span",{className:"ml-2",children:[' Bsqueda: "',o.jsx("span",{className:"font-medium",children:c}),'"']})]}),o.jsx("div",{className:"grid gap-4",children:P.length===0?o.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsx(O,{action:"time",size:"xl",color:"neutral",className:"mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c||u?"No se encontraron casos":"No hay casos en control"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:c&&u?`No hay casos que coincidan con "${c}" en el estado seleccionado`:c?`No hay casos que coincidan con "${c}"`:u?"No hay casos con el estado seleccionado":"Comienza asignando casos para hacer seguimiento"}),!c&&!u&&o.jsx(ae,{variant:"primary",onClick:()=>b(!0),children:"Asignar Primer Caso"})]}):P.map(Te=>{var je,ht,pt,re,ce;return o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:((je=Te.case)==null?void 0:je.numeroCaso)||"Caso sin nmero"}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white",style:F(Te.status),children:(ht=Te.status)==null?void 0:ht.name}),Te.isTimerActive&&o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200 animate-pulse",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),"En curso"]})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:((pt=Te.case)==null?void 0:pt.descripcion)||"Sin descripcin"}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"time",size:"sm",className:"mr-1"}),o.jsxs("span",{children:["Total: ",K(Te.totalTimeMinutes)]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"user",size:"sm",className:"mr-1"}),o.jsxs("span",{children:["Asignado a:"," ",((re=Te.user)==null?void 0:re.fullName)||"Usuario desconocido"]})]}),o.jsxs("div",{children:["Asignado:"," ",Eb(new Date(Te.assignedAt),{addSuffix:!0,locale:Um})]}),Te.isTimerActive&&Te.timerStartAt&&o.jsxs("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:["Iniciado:"," ",Eb(new Date(Te.timerStartAt),{addSuffix:!0,locale:Um})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Kt,{value:Te.statusId,onChange:ge=>Y(Te.id,ge.target.value),className:"w-32",children:V.map(ge=>o.jsx("option",{value:ge.id,children:ge.name},ge.id))}),o.jsx(fpe,{isActive:Te.isTimerActive,startTime:Te.timerStartAt||null,onStart:()=>z(Te),onPause:()=>oe(Te),onStop:()=>ue(Te),isLoading:ee.isPending||J.isPending||Q.isPending,disabled:!1}),o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{g(Te),m(!0)},children:o.jsx(O,{action:"view",size:"sm"})}),((ce=Te.status)==null?void 0:ce.name)==="TERMINADA"&&o.jsx(ae,{variant:"ghost",size:"sm",className:"text-yellow-600 hover:text-yellow-700",onClick:()=>H(Te),disabled:v,title:"Archivar caso",children:o.jsx(O,{action:"archive",size:"sm"})})]})]})},Te.id)})}),o.jsx(bpe,{isOpen:f,onClose:()=>m(!1),caseControl:p}),o.jsx(wpe,{isOpen:y,onClose:()=>b(!1),onAssign:()=>{t.invalidateQueries({queryKey:["caseControls"]})}}),o.jsx(kpe,{isOpen:k,onClose:we,onSave:_e,title:`${S==="pause"?"Pausar":"Detener"} Cronmetro`,isLoading:Q.isPending||J.isPending,timeRegistered:R}),o.jsx(Ha,{isOpen:i.isOpen,onClose:l.onClose,onConfirm:l.onConfirm,title:((le=i.options)==null?void 0:le.title)||"",message:((ye=i.options)==null?void 0:ye.message)||"",confirmText:(Ve=i.options)==null?void 0:Ve.confirmText,cancelText:(Be=i.options)==null?void 0:Be.cancelText,type:(ut=i.options)==null?void 0:ut.type})]})},Rk=x.forwardRef(({label:t,error:e,helperText:r,className:n="",...s},a)=>{const i=`
      w-full px-3 py-2 border rounded-lg 
      focus:ring-2 focus:ring-blue-500 focus:border-transparent 
      transition-all duration-200 resize-vertical
      ${e?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"}
      text-gray-900 dark:text-white 
      placeholder-gray-500 dark:placeholder-gray-400
      disabled:opacity-50 disabled:cursor-not-allowed
    `.trim().replace(/\s+/g," ");return o.jsxs("div",{className:"w-full",children:[t&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t}),o.jsx("textarea",{ref:a,className:`${i} ${n}`,...s}),e&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:e}),r&&!e&&o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r})]})});Rk.displayName="TextArea";const Spe=PT({date:ks().min(1,"La fecha es requerida").refine(t=>{const e=new Date(t),r=new Date;return r.setHours(23,59,59,999),e<=r},"La fecha no puede ser futura"),caseNumber:ks().min(1,"Debe ingresar un nmero de caso vlido").regex(/^[A-Za-z0-9-_]+$/,"El nmero de caso solo puede contener letras, nmeros, guiones y guiones bajos"),caseId:ks().optional(),scriptName:ks().min(1,"El nombre del script es requerido").max(100,"El nombre del script no puede exceder 100 caracteres"),svnRevisionNumber:ks().max(50,"El nmero de revisin SVN no puede exceder 50 caracteres").optional().or(MO("")),applicationId:ks().min(1,"Debe seleccionar una aplicacin"),observations:ks().max(1e3,"Las observaciones no pueden exceder 1000 caracteres").optional().or(MO(""))});PT({year:vu().optional(),month:vu().min(1).max(12).optional(),applicationId:ks().optional(),caseNumber:ks().optional(),search:ks().optional()});const vB=()=>Vr({queryKey:["applications"],queryFn:sT.getAll,staleTime:5*60*1e3,gcTime:10*60*1e3}),Epe=({isOpen:t,onClose:e,onSubmit:r,initialData:n,isEdit:s=!1,loading:a=!1})=>{var M,L,V,ee,Q,J;const{data:i=[],isLoading:l}=up(),{data:c=[],isLoading:d}=vB(),[u,h]=x.useState(""),[f,m]=x.useState(!1),[p,g]=x.useState(null),{register:y,handleSubmit:b,formState:{errors:v},reset:w,setValue:k,watch:N}=iB({resolver:lB(Spe),defaultValues:{date:new Date().toISOString().split("T")[0],caseNumber:"",scriptName:"",svnRevisionNumber:"",applicationId:"",observations:""}}),S=N("caseNumber");x.useEffect(()=>{if(t&&n){if(w({date:n.date,caseNumber:n.caseNumber,scriptName:n.scriptName,svnRevisionNumber:n.svnRevisionNumber||"",applicationId:n.applicationId,observations:n.observations||""}),n.caseNumber&&(h(n.caseNumber),i.length>0)){const _=i.find(H=>H.numeroCaso===n.caseNumber);_&&(g(_),k("caseId",_.id))}}else t&&!n&&(w({date:new Date().toISOString().split("T")[0],caseNumber:"",scriptName:"",svnRevisionNumber:"",applicationId:"",observations:""}),g(null),h(""))},[t,n,i,w,k]),x.useEffect(()=>{if(S&&i.length>0){const _=i.find(H=>H.numeroCaso===S);_&&(!p||p.numeroCaso!==_.numeroCaso)?(g(_),k("caseId",_.id)):!_&&p&&(g(null),k("caseId",void 0))}},[S,i,p,k]);const C=i.filter(_=>_.numeroCaso.toLowerCase().includes(u.toLowerCase())),E=_=>{g(_),h(_.numeroCaso),k("caseNumber",_.numeroCaso),k("caseId",_.id),m(!1)},T=_=>{h(_),k("caseNumber",_),m(!0);const H=i.find(P=>P.numeroCaso===_);H?(g(H),k("caseId",H.id)):(g(null),k("caseId",void 0))},R=_=>{r(_)},B=()=>{w(),g(null),h(""),m(!1),e()};return t?o.jsx(At,{isOpen:t,onClose:B,title:s?"Editar Disposicin":"Nueva Disposicin",size:"lg",children:o.jsxs("form",{onSubmit:b(R),className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha *"}),o.jsx(ft,{type:"date",...y("date"),error:(M=v.date)==null?void 0:M.message,max:new Date().toISOString().split("T")[0]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nmero de Caso *"}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{value:u,onChange:_=>T(_.target.value),placeholder:"Buscar caso por nmero...",error:(L=v.caseNumber)==null?void 0:L.message,onFocus:()=>m(!0)}),f&&u&&o.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:[l?o.jsx("div",{className:"p-4 text-center",children:o.jsx(Lr,{size:"sm"})}):C.length>0?C.slice(0,10).map(_=>o.jsx(ae,{type:"button",onClick:()=>E(_),variant:"ghost",size:"sm",className:"w-full px-4 py-2 text-left justify-start h-auto",children:o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:_.numeroCaso})},_.id)):o.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron casos"}),o.jsx(ae,{type:"button",onClick:()=>m(!1),variant:"ghost",size:"sm",className:"w-full border-t border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 rounded-none",children:"Cerrar"})]})]}),p&&o.jsx("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:["Caso: ",p.numeroCaso]}),o.jsx("p",{className:"text-sm text-green-600 dark:text-green-300",children:p.descripcion}),o.jsxs("p",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:["Clasificacin: ",p.clasificacion," | Estado:"," ",p.estado]})]}),o.jsx(ae,{type:"button",onClick:()=>{g(null),h(""),k("caseNumber",""),k("caseId",void 0)},variant:"ghost",size:"xs",className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 p-1",children:o.jsx(Q9,{size:"sm"})})]})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Script *"}),o.jsx(ft,{...y("scriptName"),placeholder:"Ej: migracion_datos_v1.sql",error:(V=v.scriptName)==null?void 0:V.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nmero de Revisin SVN"}),o.jsx(ft,{...y("svnRevisionNumber"),placeholder:"Ej: 12345",error:(ee=v.svnRevisionNumber)==null?void 0:ee.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Aplicacin *"}),o.jsxs(Kt,{...y("applicationId"),error:(Q=v.applicationId)==null?void 0:Q.message,disabled:d,children:[o.jsx("option",{value:"",children:"Seleccionar aplicacin"}),c.map(_=>o.jsx("option",{value:_.id,children:_.nombre},_.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observaciones"}),o.jsx(Rk,{...y("observations"),placeholder:"Observaciones adicionales sobre la disposicin...",rows:3,error:(J=v.observations)==null?void 0:J.message})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:B,disabled:a,children:"Cancelar"}),o.jsx(ae,{type:"submit",disabled:a,className:"min-w-[120px]",children:a?o.jsx(Lr,{size:"sm"}):s?"Actualizar":"Crear"})]})]})}):null},jpe=({dispositions:t,onEdit:e,onDelete:r,onView:n,canEdit:s=!0,canDelete:a=!0,isLoading:i=!1})=>i?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx(Lr,{})}):t.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron disposiciones"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Caso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Script"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aplicacin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"SVN"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(l=>{var c,d,u;return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ij(l.date)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.caseNumber}),l.case&&o.jsx("div",{className:"text-gray-500 dark:text-gray-400 truncate max-w-xs",children:l.case.descripcion})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.scriptName}),l.observations&&o.jsx("div",{className:"text-gray-500 dark:text-gray-400 truncate max-w-xs",children:l.observations})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((c=l.application)==null?void 0:c.nombre)||l.applicationName||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:l.svnRevisionNumber||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((d=l.user)==null?void 0:d.fullName)||((u=l.user)==null?void 0:u.email)||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end space-x-2",children:[n&&o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>n(l),title:"Ver detalles",children:o.jsx(Y9,{size:"sm"})}),s&&o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>e(l),title:"Editar",children:o.jsx(X9,{size:"sm"})}),a&&o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>r(l.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:o.jsx(J9,{size:"sm"})})]})})]},l.id)})})]})}),Tpe=({monthData:t,onExport:e,canExport:r=!1})=>{const n=()=>{e&&e(t.year,t.month)};return o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"calendar",size:"lg",color:"primary"})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.monthName," ",t.year]}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.totalDispositions," disposicin",t.totalDispositions!==1?"es":""]})]})]}),r&&e&&o.jsxs(ae,{variant:"secondary",size:"sm",onClick:n,className:"flex items-center space-x-2",children:[o.jsx(O,{action:"download",size:"sm"}),o.jsx("span",{children:"Exportar"})]})]})}),t.dispositions.length>0?o.jsx("div",{className:"overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Caso"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aplicacin"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cantidad"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.dispositions.map((s,a)=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",s.caseNumber]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs truncate",title:s.applicationName,children:s.applicationName})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-200",children:[s.quantity," ",s.quantity===1?"vez":"veces"]})})]},`${s.caseNumber}-${s.applicationId}-${a}`))})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(O,{action:"calendar",size:"xl",color:"neutral",className:"mx-auto"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Sin disposiciones"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No hay disposiciones registradas para este mes."})]}),t.dispositions.length>0&&o.jsx("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Casos nicos:"," ",o.jsx("span",{className:"font-medium",children:t.dispositions.length})]}),o.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:["Total:"," ",o.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:t.totalDispositions})," ","disposiciones"]})]})})]})};class _pe{async getAll(e){const r=new URLSearchParams;e!=null&&e.year&&r.append("year",e.year.toString()),e!=null&&e.month&&r.append("month",e.month.toString()),e!=null&&e.applicationId&&r.append("applicationId",e.applicationId),e!=null&&e.caseNumber&&r.append("caseNumber",e.caseNumber),e!=null&&e.search&&r.append("search",e.search);const n=r.toString(),s=`/dispositions${n?`?${n}`:""}`,a=await Ze.authenticatedRequest(s);return Array.isArray(a.data)?a.data:[]}async getById(e){const r=await Ze.authenticatedRequest(`/dispositions/${e}`);if(!r.success||!r.data)throw new Error("Disposition not found");return r.data}async create(e){const r=await Ze.authenticatedRequest("/dispositions",{method:"POST",body:JSON.stringify(e)});if(!r.success||!r.data)throw new Error(r.message||"Failed to create disposition");return r.data}async update(e,r){const n=await Ze.authenticatedRequest(`/dispositions/${e}`,{method:"PATCH",body:JSON.stringify(r)});if(!n.success||!n.data)throw new Error(n.message||"Failed to update disposition");return n.data}async delete(e){await Ze.authenticatedRequest(`/dispositions/${e}`,{method:"DELETE"})}async getMonthlyStats(e){const r=await Ze.authenticatedRequest(`/dispositions/stats/monthly/${e}`);return Array.isArray(r.data)?r.data:[]}async getAvailableYears(){const e=await Ze.authenticatedRequest("/dispositions/years");return Array.isArray(e.data)?e.data:[]}async getDispositionsByMonth(e){try{const r=await this.getAll({year:e});if(!Array.isArray(r))return console.warn("getDispositionsByMonth: dispositions no es un array",r),[];const n={};r.forEach(a=>{const i=new Date(a.date),l=`${i.getFullYear()}-${i.getMonth()+1}`;n[l]||(n[l]=[]),n[l].push(a)});const s=[];for(const[a,i]of Object.entries(n)){const[l,c]=a.split("-"),d=parseInt(c),u=parseInt(l),h={};i.forEach(m=>{var g;const p=`${m.caseNumber}-${m.applicationId}`;if(!h[p])h[p]={caseNumber:m.caseNumber,applicationName:((g=m.application)==null?void 0:g.nombre)||"Unknown",quantity:0,caseId:m.caseId||void 0,applicationId:m.applicationId,observations:m.observations||""};else if(m.observations){const y=h[p].observations||"",b=m.observations;y&&!y.includes(b)?h[p].observations=`${y}; ${b}`:y||(h[p].observations=b)}h[p].quantity++});const f=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];s.push({year:u,month:d,monthName:f[d-1],dispositions:Object.values(h),totalDispositions:i.length})}return s.sort((a,i)=>a.month-i.month)}catch(r){return console.error("Error en getDispositionsByMonth:",r),[]}}}const xp=new _pe;let Ape={data:""},Mpe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Ape,Ope=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Rpe=/\/\*[^]*?\*\/|  +/g,zO=/\n+/g,$c=(t,e)=>{let r="",n="",s="";for(let a in t){let i=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+i+";":n+=a[1]=="f"?$c(i,a):a+"{"+$c(i,a[1]=="k"?"":e)+"}":typeof i=="object"?n+=$c(i,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):i!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=$c.p?$c.p(a,i):a+":"+i+";")}return r+(e&&s?e+"{"+s+"}":s)+n},hl={},bB=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+bB(t[r]);return e}return t},Ppe=(t,e,r,n,s)=>{let a=bB(t),i=hl[a]||(hl[a]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(a));if(!hl[i]){let c=a!==t?t:(d=>{let u,h,f=[{}];for(;u=Ope.exec(d.replace(Rpe,""));)u[4]?f.shift():u[3]?(h=u[3].replace(zO," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(zO," ").trim();return f[0]})(t);hl[i]=$c(s?{["@keyframes "+i]:c}:c,r?"":"."+i)}let l=r&&hl.g?hl.g:null;return r&&(hl.g=hl[i]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(hl[i],e,n,l),i},Ipe=(t,e,r)=>t.reduce((n,s,a)=>{let i=e[a];if(i&&i.call){let l=i(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":$c(l,""):l===!1?"":l}return n+s+(i??"")},"");function Pk(t){let e=this||{},r=t.call?t(e.p):t;return Ppe(r.unshift?r.raw?Ipe(r,[].slice.call(arguments,1),e.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):r,Mpe(e.target),e.g,e.o,e.k)}let wB,oj,lj;Pk.bind({g:1});let ac=Pk.bind({k:1});function Dpe(t,e,r,n){$c.p=e,wB=t,oj=r,lj=n}function eu(t,e){let r=this||{};return function(){let n=arguments;function s(a,i){let l=Object.assign({},a),c=l.className||s.className;r.p=Object.assign({theme:oj&&oj()},l),r.o=/ *go\d+/.test(c),l.className=Pk.apply(r,n)+(c?" "+c:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),lj&&d[0]&&lj(l),wB(d,l)}return s}}var Lpe=t=>typeof t=="function",cj=(t,e)=>Lpe(t)?t(e):t,$pe=(()=>{let t=0;return()=>(++t).toString()})(),Fpe=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Bpe=20,kB="default",CB=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return CB(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(i=>i.id===s||s===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},zpe=[],Upe={toasts:[],pausedAt:void 0,settings:{toastLimit:Bpe}},em={},NB=(t,e=kB)=>{em[e]=CB(em[e]||Upe,t),zpe.forEach(([r,n])=>{r===e&&n(em[e])})},SB=t=>Object.keys(em).forEach(e=>NB(t,e)),Vpe=t=>Object.keys(em).find(e=>em[e].toasts.some(r=>r.id===t)),IT=(t=kB)=>e=>{NB(e,t)},Hpe=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||$pe()}),Kx=t=>(e,r)=>{let n=Hpe(e,t,r);return IT(n.toasterId||Vpe(n.id))({type:2,toast:n}),n.id},Bn=(t,e)=>Kx("blank")(t,e);Bn.error=Kx("error");Bn.success=Kx("success");Bn.loading=Kx("loading");Bn.custom=Kx("custom");Bn.dismiss=(t,e)=>{let r={type:3,toastId:t};e?IT(e)(r):SB(r)};Bn.dismissAll=t=>Bn.dismiss(void 0,t);Bn.remove=(t,e)=>{let r={type:4,toastId:t};e?IT(e)(r):SB(r)};Bn.removeAll=t=>Bn.remove(void 0,t);Bn.promise=(t,e,r)=>{let n=Bn.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?cj(e.success,s):void 0;return a?Bn.success(a,{id:n,...r,...r==null?void 0:r.success}):Bn.dismiss(n),s}).catch(s=>{let a=e.error?cj(e.error,s):void 0;a?Bn.error(a,{id:n,...r,...r==null?void 0:r.error}):Bn.dismiss(n)}),t};var Wpe=ac`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qpe=ac`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gpe=ac`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Kpe=eu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wpe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qpe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Gpe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zpe=ac`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ype=eu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Zpe} 1s linear infinite;
`,Xpe=ac`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Jpe=ac`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Qpe=eu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xpe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Jpe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,e0e=eu("div")`
  position: absolute;
`,t0e=eu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,r0e=ac`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,n0e=eu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${r0e} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,s0e=({toast:t})=>{let{icon:e,type:r,iconTheme:n}=t;return e!==void 0?typeof e=="string"?x.createElement(n0e,null,e):e:r==="blank"?null:x.createElement(t0e,null,x.createElement(Ype,{...n}),r!=="loading"&&x.createElement(e0e,null,r==="error"?x.createElement(Kpe,{...n}):x.createElement(Qpe,{...n})))},a0e=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,i0e=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,o0e="0%{opacity:0;} 100%{opacity:1;}",l0e="0%{opacity:1;} 100%{opacity:0;}",c0e=eu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,d0e=eu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,u0e=(t,e)=>{let r=t.includes("top")?1:-1,[n,s]=Fpe()?[o0e,l0e]:[a0e(r),i0e(r)];return{animation:e?`${ac(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ac(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};x.memo(({toast:t,position:e,style:r,children:n})=>{let s=t.height?u0e(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(s0e,{toast:t}),i=x.createElement(d0e,{...t.ariaProps},cj(t.message,t));return x.createElement(c0e,{className:t.className,style:{...s,...r,...t.style}},typeof n=="function"?n({icon:a,message:i}):x.createElement(x.Fragment,null,a,i))});Dpe(x.createElement);Pk`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Vm=Bn;const nn={all:["dispositions"],lists:()=>[...nn.all,"list"],list:t=>[...nn.lists(),t],details:()=>[...nn.all,"detail"],detail:t=>[...nn.details(),t],monthlyStats:t=>[...nn.all,"monthlyStats",t],years:()=>[...nn.all,"years"],byMonth:t=>[...nn.all,"byMonth",t]},h0e=t=>Vr({queryKey:nn.list(t),queryFn:()=>xp.getAll(t),staleTime:5*60*1e3}),f0e=t=>Vr({queryKey:nn.byMonth(t),queryFn:()=>xp.getDispositionsByMonth(t),staleTime:5*60*1e3}),m0e=()=>Vr({queryKey:nn.years(),queryFn:()=>xp.getAvailableYears(),staleTime:30*60*1e3}),p0e=()=>{const t=ur();return gr({mutationFn:e=>xp.create(e),onSuccess:e=>{t.invalidateQueries({queryKey:nn.lists()}),t.invalidateQueries({queryKey:nn.byMonth(new Date(e.date).getFullYear())}),t.invalidateQueries({queryKey:nn.monthlyStats(new Date(e.date).getFullYear())}),t.invalidateQueries({queryKey:nn.years()}),Vm.success("Disposicin creada exitosamente")},onError:e=>{Vm.error(e.message||"Error al crear la disposicin")}})},g0e=()=>{const t=ur();return gr({mutationFn:({id:e,data:r})=>xp.update(e,r),onSuccess:e=>{t.invalidateQueries({queryKey:nn.lists()}),t.invalidateQueries({queryKey:nn.detail(e.id)}),t.invalidateQueries({queryKey:nn.byMonth(new Date(e.date).getFullYear())}),t.invalidateQueries({queryKey:nn.monthlyStats(new Date(e.date).getFullYear())}),Vm.success("Disposicin actualizada exitosamente")},onError:e=>{Vm.error(e.message||"Error al actualizar la disposicin")}})},x0e=()=>{const t=ur();return gr({mutationFn:e=>xp.delete(e),onSuccess:(e,r)=>{t.invalidateQueries({queryKey:nn.lists()}),t.invalidateQueries({queryKey:nn.years()}),t.removeQueries({queryKey:nn.detail(r)}),t.invalidateQueries({queryKey:nn.all}),Vm.success("Disposicin eliminada exitosamente")},onError:e=>{Vm.error(e.message||"Error al eliminar la disposicin")}})},UO=t=>{try{return new Date(t).toLocaleDateString("es-ES")}catch{return t}},y0e=async(t,e,r,n)=>{try{const s=[["REPORTE DE DISPOSICIONES - RESUMEN MENSUAL"],[""],["Perodo",`${e.monthName} ${t}`],["Total de Disposiciones",e.totalDispositions],["Casos nicos",e.dispositions.length],["Fecha de Generacin",new Date().toLocaleDateString("es-ES")],[""],["Caso","Aplicacin","Cantidad","Observaciones"],...e.dispositions.map(d=>[d.caseNumber,d.applicationName,d.quantity,d.observations||""])],a=qn.aoa_to_sheet(s),i=qn.book_new();qn.book_append_sheet(i,a,`Disposiciones ${e.monthName}`);const l=[{wch:20},{wch:30},{wch:15},{wch:50}];a["!cols"]=l;const c=r||`Resumen_Disposiciones_${e.monthName}_${t}.xlsx`;gp(i,c),n&&n(" Reporte mensual de disposiciones generado exitosamente")}catch(s){throw console.error("Error al exportar disposiciones por mes:",s),new Error("Error al generar el archivo de exportacin Excel")}},v0e=async(t,e,r)=>{try{const n=t.map(c=>{var d,u,h,f;return{Fecha:UO(c.date),Caso:c.caseNumber||"N/A","Descripcin del Caso":((d=c.case)==null?void 0:d.descripcion)||"N/A","Nombre del Script":c.scriptName,"Nmero de Revisin SVN":c.svnRevisionNumber||"",Aplicacin:((u=c.application)==null?void 0:u.nombre)||"N/A",Observaciones:c.observations||"",Usuario:((h=c.user)==null?void 0:h.fullName)||((f=c.user)==null?void 0:f.email)||"N/A","Fecha de Creacin":UO(c.createdAt)}}),s=qn.json_to_sheet(n),a=qn.book_new();qn.book_append_sheet(a,s,"Todas las Disposiciones");const i=[{wch:12},{wch:20},{wch:40},{wch:30},{wch:20},{wch:20},{wch:30},{wch:25},{wch:18}];s["!cols"]=i;const l=e||`Todas_las_Disposiciones_${new Date().toISOString().split("T")[0]}.xlsx`;gp(a,l),r&&r(" Reporte completo de disposiciones generado exitosamente")}catch(n){throw console.error("Error al generar reporte de disposiciones:",n),new Error("Error al generar el archivo Excel de disposiciones")}},b0e=()=>{var _,H,P,K,F,ne,z,Z,oe;const[t,e]=x.useState({year:new Date().getFullYear()}),[r,n]=x.useState(""),[s,a]=x.useState("cards"),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(!1),[f,m]=x.useState({isOpen:!1,disposition:null}),{data:p=[]}=vB(),{data:g=[]}=m0e(),y=f0e(t.year||new Date().getFullYear()),b=h0e(t),v=p0e(),w=g0e(),k=x0e(),{error:N,info:S}=po(),{modalState:C,modalHandlers:E}=hc(),T=()=>{d(null),h(!1),l(!0)},R=ue=>{d(ue),h(!0),l(!0)},B=async ue=>{try{u&&c?await w.mutateAsync({id:c.id,data:ue}):await v.mutateAsync(ue),l(!1),d(null)}catch{}},M=ue=>{var we;const _e=(we=b.data)==null?void 0:we.find(Y=>Y.id===ue);_e&&m({isOpen:!0,disposition:_e})},L=async()=>{if(f.disposition)try{await k.mutateAsync(f.disposition.id),m({isOpen:!1,disposition:null})}catch{}},V=()=>{m({isOpen:!1,disposition:null})},ee=async(ue,_e)=>{var we;try{const Y=(we=y.data)==null?void 0:we.find(le=>le.month===_e);if(!Y||Y.dispositions.length===0){S(`No se encontraron disposiciones para ${ue}/${_e.toString().padStart(2,"0")}`);return}await y0e(ue,Y,void 0,le=>console.log("Export success:",le))}catch(Y){console.error("Error al exportar mes:",Y),N("Error al exportar los datos del mes. Por favor, intente nuevamente.")}},Q=async()=>{try{const ue=b.data||[];if(ue.length===0){S("No hay disposiciones para exportar");return}await v0e(ue,void 0,_e=>console.log("Export success:",_e))}catch(ue){console.error("Error al exportar todas las disposiciones:",ue),N("Error al exportar todas las disposiciones. Por favor, intente nuevamente.")}},J=((_=y.data)==null?void 0:_.filter(ue=>r?ue.dispositions.some(_e=>_e.caseNumber.toLowerCase().includes(r.toLowerCase())||_e.applicationName.toLowerCase().includes(r.toLowerCase())):!0))||[];return o.jsxs(kd,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Disposiciones de Scripts"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gestin de solicitudes de disposicin para scripts en aplicaciones"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[o.jsxs(ae,{variant:s==="cards"?"primary":"ghost",size:"sm",onClick:()=>a("cards"),className:"flex items-center",children:[o.jsx(O,{action:"grid",size:"sm",className:"mr-1"}),"Tarjetas"]}),o.jsxs(ae,{variant:s==="table"?"primary":"ghost",size:"sm",onClick:()=>a("table"),className:"flex items-center",children:[o.jsx(O,{action:"table",size:"sm",className:"mr-1"}),"Tabla"]})]}),o.jsxs(ae,{variant:"secondary",onClick:Q,className:"flex items-center",disabled:!((H=b.data)!=null&&H.length),children:[o.jsx(O,{action:"download",size:"sm",className:"mr-2"}),"Exportar Todo"]}),o.jsxs(ae,{onClick:T,className:"flex items-center",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Nueva Disposicin"]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(O,{action:"filter",size:"lg",color:"gray"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Filtros"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ao"}),o.jsxs(Kt,{value:((P=t.year)==null?void 0:P.toString())||"",onChange:ue=>e({...t,year:parseInt(ue.target.value)||void 0}),children:[o.jsx("option",{value:"",children:"Todos los aos"}),Array.isArray(g)&&g.map(ue=>o.jsx("option",{value:ue.toString(),children:ue},ue))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Aplicacin"}),o.jsxs(Kt,{value:t.applicationId||"",onChange:ue=>e({...t,applicationId:ue.target.value||void 0}),children:[o.jsx("option",{value:"",children:"Todas las aplicaciones"}),p.map(ue=>o.jsx("option",{value:ue.id,children:ue.nombre},ue.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar"}),o.jsx(ft,{type:"text",placeholder:"Buscar por caso o aplicacin...",value:r,onChange:ue=>n(ue.target.value)})]})]})]}),y.isLoading?o.jsx("div",{className:"flex justify-center items-center py-12",children:o.jsx(Lr,{})}):y.error?o.jsx("div",{className:"text-center py-12",children:o.jsxs("p",{className:"text-red-600 dark:text-red-400",children:["Error al cargar disposiciones:"," ",y.error.message]})}):s==="cards"?J.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.map(ue=>o.jsx(Tpe,{monthData:ue,onExport:ee,canExport:!0},`${ue.year}-${ue.month}`))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(O,{action:"calendar",size:"xl",color:"gray",className:"mx-auto mb-4"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:r||t.applicationId?"No se encontraron resultados":"No hay disposiciones"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r||t.applicationId?"Intenta ajustar los filtros de bsqueda.":"Comienza creando una nueva disposicin de scripts."}),!r&&!t.applicationId&&o.jsx("div",{className:"mt-6",children:o.jsxs(ae,{onClick:T,className:"flex items-center",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Crear Primera Disposicin"]})})]}):o.jsx(jpe,{dispositions:b.data||[],onEdit:R,onDelete:M,isLoading:b.isLoading}),o.jsx(Epe,{isOpen:i,onClose:()=>{l(!1),d(null)},onSubmit:B,initialData:c?{date:c.date,caseNumber:c.caseNumber,caseId:c.caseId||void 0,scriptName:c.scriptName,svnRevisionNumber:c.svnRevisionNumber||"",applicationId:c.applicationId,observations:c.observations||""}:void 0,isEdit:u,loading:v.isPending||w.isPending}),o.jsx(Ha,{isOpen:f.isOpen,title:"Confirmar eliminacin",message:`Est seguro de que desea eliminar la disposicin "${(K=f.disposition)==null?void 0:K.scriptName}"? Esta accin no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",onConfirm:L,onClose:V,type:"danger"}),o.jsx(Ha,{isOpen:C.isOpen,onClose:E.onClose,onConfirm:E.onConfirm,title:((F=C.options)==null?void 0:F.title)||"",message:((ne=C.options)==null?void 0:ne.message)||"",confirmText:(z=C.options)==null?void 0:z.confirmText,cancelText:(Z=C.options)==null?void 0:Z.cancelText,type:(oe=C.options)==null?void 0:oe.type})]})},w0e=({users:t,loading:e,onView:r,onEdit:n,onDelete:s,onToggleStatus:a,onChangePassword:i,currentPage:l,totalPages:c,total:d,onPageChange:u})=>{const h=m=>new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=m=>{const p=m.split("").reduce((y,b)=>(y=(y<<5)-y+b.charCodeAt(0),y&y),0),g=["bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400","bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400","bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400","bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400"];return g[Math.abs(p)%g.length]};return e?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 flex justify-center",children:o.jsx(Lr,{})}):o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Mostrando ",t.length," de ",d," usuarios"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rol"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ltimo acceso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Creado"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron usuarios"})}):t.map(m=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:o.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:m.fullName.charAt(0).toUpperCase()})})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:m.fullName}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[o.jsx(O,{action:"email",size:"xs",className:"mr-1"}),m.email]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(la,{className:f(m.roleName),children:m.roleName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex items-center",children:m.isActive?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"check",size:"sm",color:"success",className:"mr-2"}),o.jsx("span",{className:"text-green-800 dark:text-green-400 text-sm",children:"Activo"})]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"warning",size:"sm",color:"danger",className:"mr-2"}),o.jsx("span",{className:"text-red-800 dark:text-red-400 text-sm",children:"Inactivo"})]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:m.lastLoginAt?o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"calendar",size:"xs",className:"mr-1"}),h(m.lastLoginAt)]}):o.jsx("span",{className:"text-gray-400",children:"Nunca"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"calendar",size:"xs",className:"mr-1"}),h(m.createdAt)]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r&&o.jsx("button",{onClick:()=>r(m),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalles",children:o.jsx(O,{action:"view",size:"sm"})}),n&&o.jsx("button",{onClick:()=>n(m),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar",children:o.jsx(O,{action:"edit",size:"sm"})}),i&&o.jsx("button",{onClick:()=>i(m),className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Cambiar contrasea",children:o.jsx(O,{action:"changePassword",size:"sm"})}),a&&o.jsx("button",{onClick:()=>a(m),className:m.isActive?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:m.isActive?"Desactivar usuario":"Activar usuario",children:m.isActive?o.jsx(O,{action:"warning",size:"sm"}):o.jsx(O,{action:"check",size:"sm"})}),s&&o.jsx("button",{onClick:()=>s(m),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},m.id))})]})}),c>1&&o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Pgina ",l," de ",c]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(ae,{variant:"secondary",size:"sm",onClick:()=>u(l-1),disabled:l===1,children:"Anterior"}),Array.from({length:Math.min(5,c)},(m,p)=>{const g=Math.max(1,l-2)+p;return g>c?null:o.jsx(ae,{variant:g===l?"primary":"secondary",size:"sm",onClick:()=>u(g),children:g},g)}),o.jsx(ae,{variant:"secondary",size:"sm",onClick:()=>u(l+1),disabled:l===c,children:"Siguiente"})]})]})]})},k0e=({onClose:t,onSuccess:e})=>{const[r,n]=x.useState({email:"",fullName:"",password:"",roleName:"Usuario",isActive:!0}),[s,a]=x.useState([]),[i,l]=x.useState(!1),[c,d]=x.useState(!0),[u,h]=x.useState(null),[f,m]=x.useState({});x.useEffect(()=>{p()},[]);const p=async()=>{try{d(!0);const v=await Gs.getRoles();a(v)}catch(v){console.error("Error loading roles:",v),h("Error al cargar los roles. Por favor, recarga la pgina."),a([])}finally{d(!1)}},g=()=>{const v={};return r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(v.email="El email no es vlido"):v.email="El email es requerido",r.fullName.trim()?r.fullName.trim().length<2&&(v.fullName="El nombre debe tener al menos 2 caracteres"):v.fullName="El nombre completo es requerido",r.password?r.password.length<8&&(v.password="La contrasea debe tener al menos 8 caracteres"):v.password="La contrasea es requerida",r.roleName||(v.roleName="El rol es requerido"),m(v),Object.keys(v).length===0},y=async v=>{if(v.preventDefault(),!!g())try{l(!0),h(null),await Gs.createUser(r),e()}catch(w){h(w instanceof Error?w.message:"Error al crear usuario")}finally{l(!1)}},b=(v,w)=>{n(k=>({...k,[v]:w})),f[v]&&m(k=>({...k,[v]:""}))};return o.jsx(At,{isOpen:!0,onClose:t,title:"Crear Nuevo Usuario",children:o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[u&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:u})}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"user",size:"sm",className:"inline mr-2"}),"Nombre Completo"]}),o.jsx(ft,{type:"text",value:r.fullName,onChange:v=>b("fullName",v.target.value),placeholder:"Ingrese el nombre completo",error:f.fullName,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"email",size:"sm",className:"inline mr-2"}),"Email"]}),o.jsx(ft,{type:"email",value:r.email,onChange:v=>b("email",v.target.value),placeholder:"usuario@ejemplo.com",error:f.email,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"lock",size:"sm",className:"inline mr-2"}),"Contrasea"]}),o.jsx(ft,{type:"password",value:r.password,onChange:v=>b("password",v.target.value),placeholder:"Mnimo 8 caracteres",error:f.password,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"check",size:"sm",className:"inline mr-2"}),"Rol"]}),c?o.jsx("div",{className:"flex items-center justify-center py-2",children:o.jsx(Lr,{size:"sm"})}):o.jsxs(Kt,{value:r.roleName||"",onChange:v=>b("roleName",v.target.value),error:f.roleName,required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un rol"}),s.map(v=>o.jsxs("option",{value:v.name,children:[v.name,v.description&&` - ${v.description}`]},v.id))]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:r.isActive,onChange:v=>b("isActive",v.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Usuario activo"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:t,disabled:i,children:"Cancelar"}),o.jsxs(ae,{type:"submit",variant:"primary",disabled:i,className:"flex items-center gap-2",children:[i&&o.jsx(Lr,{size:"sm"}),"Crear Usuario"]})]})]})})},C0e=({user:t,onClose:e,onSuccess:r})=>{const{user:n,updateUser:s,refreshPermissions:a}=ti(),[i,l]=x.useState({email:t.email,fullName:t.fullName,roleName:t.roleName,isActive:t.isActive}),[c,d]=x.useState([]),[u,h]=x.useState(!1),[f,m]=x.useState(!0),[p,g]=x.useState(null),[y,b]=x.useState({});x.useEffect(()=>{v()},[]);const v=async()=>{try{m(!0);const S=await Gs.getRoles();Array.isArray(S)?d(S):(console.warn("Roles data is not an array:",S),g("Error al cargar los roles. Formato de datos invlido."),d([]))}catch(S){console.error("Error loading roles:",S),g("Error al cargar los roles. Por favor, recarga la pgina."),d([])}finally{m(!1)}},w=()=>{var C,E;const S={};return(C=i.email)!=null&&C.trim()?/\S+@\S+\.\S+/.test(i.email)||(S.email="El email no es vlido"):S.email="El email es requerido",(E=i.fullName)!=null&&E.trim()?i.fullName.trim().length<2&&(S.fullName="El nombre debe tener al menos 2 caracteres"):S.fullName="El nombre completo es requerido",i.roleName||(S.roleName="El rol es requerido"),b(S),Object.keys(S).length===0},k=async S=>{if(S.preventDefault(),!!w())try{h(!0),g(null);const C=t.roleName,E=n&&t.id===n.id;if(await Gs.updateUser(t.id,i),E&&i.roleName&&i.roleName!==C){s({roleName:i.roleName});try{await a(),console.log("Permisos del usuario actual actualizados correctamente.")}catch(T){console.error("Error al actualizar permisos:",T)}}r()}catch(C){g(C instanceof Error?C.message:"Error al actualizar usuario")}finally{h(!1)}},N=(S,C)=>{l(E=>({...E,[S]:C})),y[S]&&b(E=>({...E,[S]:""}))};return o.jsx(At,{isOpen:!0,onClose:e,title:`Editar Usuario: ${t.fullName}`,children:o.jsxs("form",{onSubmit:k,className:"space-y-6",children:[p&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:p})}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Informacin actual"}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsxs("p",{children:["ID: ",t.id]}),o.jsxs("p",{children:["Creado: ",new Date(t.createdAt).toLocaleDateString("es-ES")]}),o.jsxs("p",{children:["ltimo acceso:"," ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleDateString("es-ES"):"Nunca"]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"user",size:"sm",className:"inline mr-2"}),"Nombre Completo"]}),o.jsx(ft,{type:"text",value:i.fullName||"",onChange:S=>N("fullName",S.target.value),placeholder:"Ingrese el nombre completo",error:y.fullName,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"email",size:"sm",className:"inline mr-2"}),"Email"]}),o.jsx(ft,{type:"email",value:i.email||"",onChange:S=>N("email",S.target.value),placeholder:"usuario@ejemplo.com",error:y.email,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"shield",size:"sm",className:"inline mr-2"}),"Rol"]}),f?o.jsx("div",{className:"flex items-center justify-center py-2",children:o.jsx(Lr,{size:"sm"})}):o.jsxs(Kt,{value:i.roleName||"",onChange:S=>N("roleName",S.target.value),error:y.roleName,required:!0,children:[o.jsx("option",{value:"",children:"Seleccione un rol"}),Array.isArray(c)&&c.map(S=>o.jsxs("option",{value:S.name,children:[S.name,S.description&&` - ${S.description}`]},S.id))]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:S=>N("isActive",S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Usuario activo"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:u,children:"Cancelar"}),o.jsxs(ae,{type:"submit",variant:"primary",disabled:u,className:"flex items-center gap-2",children:[u&&o.jsx(Lr,{size:"sm"}),"Actualizar Usuario"]})]})]})})},N0e=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=x.useState(!1),[a,i]=x.useState(null),[l,c]=x.useState(""),d="ELIMINAR",u=l===d,h=async()=>{if(!u){i(`Debe escribir "${d}" para confirmar`);return}try{s(!0),i(null),await Gs.deleteUser(t.id),r()}catch(m){i(m instanceof Error?m.message:"Error al eliminar usuario")}finally{s(!1)}},f=m=>{c(m.target.value),a&&i(null)};return o.jsx(At,{isOpen:!0,onClose:e,title:"Eliminar Usuario",size:"md",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 rounded-full p-3",children:o.jsx(O,{action:"warning",size:"lg",color:"danger"})})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Est seguro que desea eliminar este usuario?"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Esta accin no se puede deshacer. Se eliminar permanentemente toda la informacin del usuario."})]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-full p-2",children:o.jsx(O,{action:"user",size:"sm",color:"neutral"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.fullName}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.email}),o.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[o.jsxs("span",{children:["ID: ",t.id]}),o.jsxs("span",{children:["Rol: ",t.roleName]}),o.jsx("span",{className:`px-2 py-1 rounded-full ${t.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:t.isActive?"Activo":"Inactivo"})]})]})]})}),o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-2",children:"Los siguientes datos se eliminarn permanentemente:"}),o.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:[o.jsx("li",{children:" Informacin personal del usuario"}),o.jsx("li",{children:" Historial de accesos y actividad"}),o.jsx("li",{children:" Asignaciones de permisos y roles"}),o.jsx("li",{children:" Registros asociados en el sistema"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Para confirmar, escriba"," ",o.jsx("span",{className:"font-mono bg-gray-100 dark:bg-gray-800 px-1 rounded",children:d}),":"]}),o.jsx("input",{type:"text",value:l,onChange:f,placeholder:`Escriba "${d}" para confirmar`,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-100 ${a?"border-red-500":"border-gray-300"}`,disabled:n})]}),a&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:o.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:a})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:n,children:"Cancelar"}),o.jsxs(ae,{type:"button",variant:"primary",onClick:h,disabled:n||!u,className:`flex items-center gap-2 ${!u||n?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[n&&o.jsx(Lr,{size:"sm"}),o.jsx(O,{action:"delete",size:"sm"}),"Eliminar Usuario"]})]})]})})},S0e=({user:t,onClose:e,onSuccess:r})=>{const[n,s]=x.useState({newPassword:"",confirmPassword:""}),[a,i]=x.useState({newPassword:!1,confirmPassword:!1}),[l,c]=x.useState(!1),[d,u]=x.useState(null),[h,f]=x.useState({}),m=()=>{const w={};return n.newPassword?n.newPassword.length<8?w.newPassword="La contrasea debe tener al menos 8 caracteres":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.newPassword)||(w.newPassword="La contrasea debe contener al menos una mayscula, una minscula y un nmero"):w.newPassword="La nueva contrasea es requerida",n.confirmPassword?n.newPassword!==n.confirmPassword&&(w.confirmPassword="Las contraseas no coinciden"):w.confirmPassword="Confirme la nueva contrasea",f(w),Object.keys(w).length===0},p=async w=>{if(w.preventDefault(),!!m())try{c(!0),u(null),await Gs.updatePassword(t.id,{newPassword:n.newPassword}),r()}catch(k){u(k instanceof Error?k.message:"Error al cambiar contrasea")}finally{c(!1)}},g=(w,k)=>{s(N=>({...N,[w]:k})),h[w]&&f(N=>({...N,[w]:""}))},y=w=>{i(k=>({...k,[w]:!k[w]}))},v=(w=>{let k=0;return w.length>=8&&(k+=1),/[a-z]/.test(w)&&(k+=1),/[A-Z]/.test(w)&&(k+=1),/\d/.test(w)&&(k+=1),/[^a-zA-Z\d]/.test(w)&&(k+=1),{strength:k,...[{text:"Muy dbil",color:"text-red-600"},{text:"Dbil",color:"text-red-500"},{text:"Regular",color:"text-yellow-500"},{text:"Buena",color:"text-blue-500"},{text:"Muy fuerte",color:"text-green-500"}][Math.min(k,4)]}})(n.newPassword);return o.jsx(At,{isOpen:!0,onClose:e,title:`Cambiar Contrasea: ${t.fullName}`,size:"md",children:o.jsxs("form",{onSubmit:p,className:"space-y-6",children:[d&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:d})}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"bg-blue-100 dark:bg-blue-800 rounded-full p-2",children:o.jsx(O,{action:"shield",size:"sm",color:"primary"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Cambio de contrasea de seguridad"}),o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Usuario: ",t.email]})]})]})}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"changePassword",size:"sm",className:"inline mr-2"}),"Nueva Contrasea"]}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:a.newPassword?"text":"password",value:n.newPassword,onChange:w=>g("newPassword",w.target.value),placeholder:"Ingrese la nueva contrasea",error:h.newPassword,required:!0}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y("newPassword"),children:a.newPassword?o.jsx(O,{action:"hide",size:"sm",color:"neutral"}):o.jsx(O,{action:"view",size:"sm",color:"neutral"})})]}),n.newPassword&&o.jsx("div",{className:"mt-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v.strength<=1?"bg-red-500":v.strength<=2?"bg-yellow-500":v.strength<=3?"bg-blue-500":"bg-green-500"}`,style:{width:`${v.strength/5*100}%`}})}),o.jsx("span",{className:`text-xs font-medium ${v.color}`,children:v.text})]})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"changePassword",size:"sm",className:"inline mr-2"}),"Confirmar Contrasea"]}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:a.confirmPassword?"text":"password",value:n.confirmPassword,onChange:w=>g("confirmPassword",w.target.value),placeholder:"Confirme la nueva contrasea",error:h.confirmPassword,required:!0}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y("confirmPassword"),children:a.confirmPassword?o.jsx(O,{action:"hide",size:"sm",color:"neutral"}):o.jsx(O,{action:"view",size:"sm",color:"neutral"})})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Requisitos de contrasea:"}),o.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsxs("li",{className:`flex items-center ${n.newPassword.length>=8?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:n.newPassword.length>=8?"":""}),"Al menos 8 caracteres"]}),o.jsxs("li",{className:`flex items-center ${/[a-z]/.test(n.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/[a-z]/.test(n.newPassword)?"":""}),"Al menos una letra minscula"]}),o.jsxs("li",{className:`flex items-center ${/[A-Z]/.test(n.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/[A-Z]/.test(n.newPassword)?"":""}),"Al menos una letra mayscula"]}),o.jsxs("li",{className:`flex items-center ${/\d/.test(n.newPassword)?"text-green-600 dark:text-green-400":""}`,children:[o.jsx("span",{className:"mr-2",children:/\d/.test(n.newPassword)?"":""}),"Al menos un nmero"]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:l,children:"Cancelar"}),o.jsxs(ae,{type:"submit",variant:"primary",disabled:l,className:"flex items-center gap-2",children:[l&&o.jsx(Lr,{size:"sm"}),o.jsx(O,{action:"changePassword",size:"sm"}),"Cambiar Contrasea"]})]})]})})},E0e=()=>{var ne;const[t,e]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState(null),[i,l]=x.useState(0),[c,d]=x.useState(1),[u,h]=x.useState([]),[f,m]=x.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"DESC"}),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[k,N]=x.useState(!1),[S,C]=x.useState(null);x.useEffect(()=>{T(),E()},[f]);const E=async()=>{try{const z=await Gs.getRoles();h(z)}catch(z){console.error("Error loading roles:",z)}},T=async()=>{try{n(!0),a(null);const z=await Gs.getUsers(f);e(z.users),l(z.total),d(z.page)}catch(z){a(z instanceof Error?z.message:"Error al cargar usuarios")}finally{n(!1)}},R=()=>{g(!0)},B=z=>{C(z),b(!0)},M=z=>{C(z),b(!0)},L=z=>{C(z),w(!0)},V=z=>{C(z),N(!0)},ee=async z=>{try{await Gs.toggleUserStatus(z.id),await T()}catch(Z){a(Z instanceof Error?Z.message:"Error al cambiar estado")}},Q=z=>{m(Z=>({...Z,search:z,page:1}))},J=(z,Z)=>{m(oe=>({...oe,[z]:Z,page:1}))},_=z=>{m(Z=>({...Z,page:z}))},H=()=>{g(!1),T()},P=()=>{b(!1),C(null),T()},K=()=>{w(!1),C(null),T()},F=Math.ceil(i/(f.limit||10));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[o.jsx(O,{action:"users",size:"xl",color:"blue"}),"Gestin de Usuarios"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra usuarios del sistema"})]}),o.jsxs(ae,{onClick:R,className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm",color:"neutral"}),"Nuevo Usuario"]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",color:"gray",className:"absolute left-3 top-1/2 transform -translate-y-1/2"}),o.jsx(ft,{placeholder:"Buscar por nombre o email...",className:"pl-10",value:f.search||"",onChange:z=>Q(z.target.value)})]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:f.roleName||"",onChange:z=>J("roleName",z||void 0),children:[o.jsx("option",{value:"",children:"Todos los roles"}),u.map(z=>o.jsx("option",{value:z.name,children:z.name},z.id))]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:((ne=f.isActive)==null?void 0:ne.toString())||"",onChange:z=>J("isActive",z.target.value?z.target.value==="true":void 0),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:`${f.sortBy}-${f.sortOrder}`,onChange:z=>{const[Z,oe]=z.target.value.split("-");J("sortBy",Z),J("sortOrder",oe)},children:[o.jsx("option",{value:"createdAt-DESC",children:"Ms recientes"}),o.jsx("option",{value:"createdAt-ASC",children:"Ms antiguos"}),o.jsx("option",{value:"fullName-ASC",children:"Nombre A-Z"}),o.jsx("option",{value:"fullName-DESC",children:"Nombre Z-A"}),o.jsx("option",{value:"email-ASC",children:"Email A-Z"}),o.jsx("option",{value:"lastLoginAt-DESC",children:"ltimo login"})]})})]})}),s&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200",children:s})}),o.jsx(w0e,{users:t,loading:r,onView:B,onEdit:M,onDelete:L,onToggleStatus:ee,onChangePassword:V,currentPage:c,totalPages:F,total:i,onPageChange:_}),p&&o.jsx(k0e,{onClose:()=>g(!1),onSuccess:H}),y&&S&&o.jsx(C0e,{user:S,onClose:()=>{b(!1),C(null)},onSuccess:P}),v&&S&&o.jsx(N0e,{user:S,onClose:()=>{w(!1),C(null)},onSuccess:K}),k&&S&&o.jsx(S0e,{user:S,onClose:()=>{N(!1),C(null)},onSuccess:()=>{N(!1),C(null),T()}})]})};class j0e{constructor(){ve(this,"baseUrl","/api/roles")}async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={...r,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers}},i=await fetch(`${this.baseUrl}${e}`,a);if(!i.ok){const c=await i.json().catch(()=>({}));throw new Error(c.message||`Error ${i.status}: ${i.statusText}`)}const l=await i.json();return l.data||l}async getRoles(e){const r=new URLSearchParams;e!=null&&e.search&&r.append("search",e.search),(e==null?void 0:e.isActive)!==void 0&&r.append("isActive",e.isActive.toString()),e!=null&&e.sortBy&&r.append("sortBy",e.sortBy),e!=null&&e.sortOrder&&r.append("sortOrder",e.sortOrder),e!=null&&e.page&&r.append("page",e.page.toString()),e!=null&&e.limit&&r.append("limit",e.limit.toString());const n=r.toString(),s=n?`?${n}`:"";return this.makeRequest(s)}async getRoleById(e){return this.makeRequest(`/${e}`)}async createRole(e){return this.makeRequest("",{method:"POST",body:JSON.stringify(e)})}async updateRole(e,r){return this.makeRequest(`/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRole(e){await this.makeRequest(`/${e}`,{method:"DELETE"})}async cloneRole(e,r){return this.makeRequest(`/${e}/clone`,{method:"POST",body:JSON.stringify(r)})}async getRolePermissions(e){return this.makeRequest(`/${e}/permissions`)}async assignPermissions(e,r){return this.makeRequest(`/${e}/permissions`,{method:"PUT",body:JSON.stringify(r)})}async getAvailablePermissions(){return this.makeRequest("/permissions")}async getRoleStats(){return this.makeRequest("/stats")}async searchRoles(e){return this.makeRequest("/search",{method:"POST",body:JSON.stringify(e)})}}const oo=new j0e;function EB({isOpen:t,onClose:e,onSuccess:r,role:n}){const{success:s,error:a}=nr(),[i,l]=x.useState(!1),[c,d]=x.useState({name:"",description:"",isActive:!0}),[u,h]=x.useState({});x.useEffect(()=>{t&&n&&(d({name:n.name,description:n.description||"",isActive:n.isActive}),h({}))},[t,n]);const f=async g=>{var b,v;if(g.preventDefault(),!n)return;const y={};if((!c.name||!c.name.trim())&&(y.name="El nombre es requerido"),Object.keys(y).length>0){h(y);return}l(!0);try{await oo.updateRole(n.id,c),s("Rol actualizado exitosamente"),m(),r()}catch(w){console.error("Error al actualizar rol:",w),a(((v=(b=w.response)==null?void 0:b.data)==null?void 0:v.message)||"Error al actualizar el rol")}finally{l(!1)}},m=()=>{i||(d({name:"",description:"",isActive:!0}),h({}),e())},p=(g,y)=>{d(b=>({...b,[g]:y})),u[g]&&h(b=>({...b,[g]:void 0}))};return n?o.jsxs(At,{isOpen:t,onClose:m,title:"Editar Rol",size:"md",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-3 mb-4",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.jsx("strong",{children:"ID:"})," ",n.id]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.jsx("strong",{children:"Creado:"})," ",new Date(n.createdAt).toLocaleDateString()]}),n.updatedAt!==n.createdAt&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.jsx("strong",{children:"Actualizado:"})," ",new Date(n.updatedAt).toLocaleDateString()]})]}),o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Rol *"}),o.jsx("input",{type:"text",id:"name",value:c.name,onChange:g=>p("name",g.target.value),disabled:i,className:`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${u.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Editor, Supervisor, etc."}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",rows:3,value:c.description||"",onChange:g=>p("description",g.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe las responsabilidades de este rol..."})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:g=>p("isActive",g.target.checked),disabled:i,className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Rol activo"})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[o.jsx("strong",{children:"Nota:"})," Los cambios en el estado del rol pueden afectar a los usuarios que lo tienen asignado. Los permisos se gestionan por separado."]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsx(ae,{variant:"secondary",onClick:m,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"warning",disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"edit",size:"sm",className:"mr-1"}),"Guardar Cambios"]})})]})]})]}):null}function jB({isOpen:t,onClose:e,onSuccess:r,role:n}){const{success:s,error:a}=nr(),[i,l]=x.useState(!1),c=async()=>{var d,u;if(n){l(!0);try{await oo.deleteRole(n.id),s("Rol eliminado exitosamente"),e(),r()}catch(h){console.error("Error al eliminar rol:",h),a(((u=(d=h.response)==null?void 0:d.data)==null?void 0:u.message)||"Error al eliminar el rol")}finally{l(!1)}}};return n?o.jsx(At,{isOpen:t,onClose:e,title:"Eliminar Rol",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:o.jsx(O,{action:"warning",size:"md",color:"danger","aria-hidden":"true"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Ests seguro de eliminar este rol?"}),o.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Vas a eliminar el rol ",o.jsx("strong",{children:n.name}),". Esta accin no se puede deshacer."]})]}),o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(O,{action:"warning",size:"sm",color:"warning"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Advertencia"}),o.jsx("p",{className:"mt-1 text-sm text-yellow-700",children:"Los usuarios que tengan asignado este rol perdern todos los permisos asociados. Asegrate de reasignar los roles necesarios antes de eliminar."})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"button",variant:"danger",onClick:c,disabled:i,children:i?"Eliminando...":"Eliminar Rol"})]})]})}):null}function TB({isOpen:t,onClose:e,onSuccess:r,role:n}){const{success:s,error:a}=nr(),[i,l]=x.useState(!1),[c,d]=x.useState(""),[u,h]=x.useState({}),f=async p=>{var y,b;p.preventDefault();const g={};if(c.trim()||(g.name="El nombre es requerido"),Object.keys(g).length>0){h(g);return}l(!0);try{await oo.cloneRole(n.id,{newName:c}),s("Rol clonado exitosamente"),m(),r()}catch(v){console.error("Error al clonar rol:",v),a(((b=(y=v.response)==null?void 0:y.data)==null?void 0:b.message)||"Error al clonar el rol")}finally{l(!1)}},m=()=>{d(""),h({}),e()};return n?o.jsx(At,{isOpen:t,onClose:m,title:"Clonar Rol",children:o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Se crear una copia del rol ",o.jsx("strong",{children:n.name})," con todos sus permisos."]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newRoleName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nuevo nombre del rol"}),o.jsx("input",{type:"text",id:"newRoleName",value:c,onChange:p=>{d(p.target.value),u.name&&h(g=>({...g,name:void 0}))},className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${u.name?"border-red-300":"border-gray-300"}`,placeholder:"Ingresa el nombre del nuevo rol",disabled:i}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:m,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:i,children:i?"Clonando...":"Clonar Rol"})]})]})}):null}function T0e({roles:t,isLoading:e,onRefresh:r}){const[n,s]=x.useState({isOpen:!1,role:null}),[a,i]=x.useState({isOpen:!1,role:null}),[l,c]=x.useState({isOpen:!1,role:null}),d=p=>{s({isOpen:!0,role:p})},u=p=>{i({isOpen:!0,role:p})},h=p=>{c({isOpen:!0,role:p})},f=p=>{},m=()=>{s({isOpen:!1,role:null}),i({isOpen:!1,role:null}),c({isOpen:!1,role:null})};return e?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),o.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,g)=>o.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-700 rounded"},g))})]})})}):(t==null?void 0:t.length)===0?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(O,{action:"shield",size:"xl",className:"mx-auto mb-4",color:"neutral"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No hay roles"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No se encontraron roles que coincidan con los filtros aplicados."})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rol"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Usuarios"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Permisos"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Creado"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:t==null?void 0:t.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`p-2 rounded-lg mr-3 ${p.isActive?"bg-green-100 dark:bg-green-900":"bg-gray-100 dark:bg-gray-700"}`,children:o.jsx(O,{action:"shield",size:"sm",color:p.isActive?"success":"neutral"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",p.id.slice(0,8),"..."]})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs",children:p.description?o.jsx("span",{title:p.description,children:p.description.length>50?`${p.description.slice(0,50)}...`:p.description}):o.jsx("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Sin descripcin"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:p.isActive?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"view",size:"xs",className:"mr-1"}),"Activo"]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"hide",size:"xs",className:"mr-1"}),"Inactivo"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[o.jsx(O,{action:"user",size:"sm",className:"mr-1",color:"neutral"}),p.userCount||0]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[o.jsx(O,{action:"shield",size:"sm",className:"mr-1",color:"neutral"}),p.permissionCount||0]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(p.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>f(),className:p.isActive?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:p.isActive?"Desactivar rol":"Activar rol",children:p.isActive?o.jsx(O,{action:"warning",size:"sm"}):o.jsx(O,{action:"shield",size:"sm"})}),o.jsx("button",{onClick:()=>h(p),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors p-1 rounded",title:"Clonar rol",children:o.jsx(O,{action:"duplicate",size:"sm"})}),o.jsx("button",{onClick:()=>d(p),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 transition-colors p-1 rounded",title:"Editar rol",children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsx("button",{onClick:()=>u(p),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors p-1 rounded",title:"Eliminar rol",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},p.id))})]})})}),o.jsx(EB,{isOpen:n.isOpen,onClose:m,onSuccess:()=>{m(),r()},role:n.role}),o.jsx(jB,{isOpen:a.isOpen,onClose:m,onSuccess:()=>{m(),r()},role:a.role}),o.jsx(TB,{isOpen:l.isOpen,onClose:m,onSuccess:()=>{m(),r()},role:l.role})]})}function _0e({isOpen:t,onClose:e,onSuccess:r}){const{success:n,error:s}=nr(),[a,i]=x.useState(!1),[l,c]=x.useState({name:"",description:"",isActive:!0,permissionIds:[]}),[d,u]=x.useState({}),h=async p=>{var y,b;p.preventDefault();const g={};if(l.name.trim()||(g.name="El nombre es requerido"),Object.keys(g).length>0){u(g);return}i(!0);try{await oo.createRole(l),n("Rol creado exitosamente"),f(),r()}catch(v){console.error("Error al crear rol:",v),s(((b=(y=v.response)==null?void 0:y.data)==null?void 0:b.message)||"Error al crear el rol")}finally{i(!1)}},f=()=>{a||(c({name:"",description:"",isActive:!0,permissionIds:[]}),u({}),e())},m=(p,g)=>{c(y=>({...y,[p]:g})),d[p]&&u(y=>({...y,[p]:void 0}))};return o.jsx(At,{isOpen:t,onClose:f,title:"Crear Nuevo Rol",size:"md",children:o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Rol *"}),o.jsx("input",{type:"text",id:"name",value:l.name,onChange:p=>m("name",p.target.value),disabled:a,className:`w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${d.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Editor, Supervisor, etc."}),d.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",rows:3,value:l.description||"",onChange:p=>m("description",p.target.value),disabled:a,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe las responsabilidades de este rol..."})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:p=>m("isActive",p.target.checked),disabled:a,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Rol activo"})]}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[o.jsx("strong",{children:"Nota:"}),' Los permisos se pueden asignar despus de crear el rol desde la opcin "Gestionar Permisos" en la tabla.']})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-600",children:[o.jsx(ae,{variant:"secondary",onClick:f,disabled:a,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"add",size:"sm",className:"mr-1"}),"Crear Rol"]})})]})]})})}function A0e({isOpen:t,onClose:e,onSuccess:r,role:n}){const{success:s,error:a}=nr(),[i,l]=x.useState(!1),[c,d]=x.useState([]),[u,h]=x.useState([]),[f,m]=x.useState(""),[p,g]=x.useState("all");x.useEffect(()=>{t&&n&&(y(),b())},[t,n]);const y=async()=>{try{d([{id:"1",name:"users:view:all",description:"Ver todos los usuarios",module:"users",action:"view",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"2",name:"users.create.all",description:"Create users",module:"users",action:"create",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"3",name:"users.edit.all",description:"Edit users",module:"users",action:"edit",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"4",name:"users.delete.all",description:"Delete users",module:"users",action:"delete",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"5",name:"roles:view:all",description:"Ver todos los roles",module:"roles",action:"view",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"6",name:"roles.create.all",description:"Create roles",module:"roles",action:"create",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"7",name:"roles.edit.all",description:"Edit roles",module:"roles",action:"edit",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"8",name:"roles.delete.all",description:"Delete roles",module:"roles",action:"delete",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"9",name:"cases:view:all",description:"Ver todos los casos",module:"cases",action:"view",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"10",name:"cases.create.all",description:"Create cases",module:"cases",action:"create",scope:"all",isActive:!0,createdAt:new Date,updatedAt:new Date}])}catch(C){console.error("Error al cargar permisos:",C),a("Error al cargar permisos disponibles")}},b=async()=>{if(n)try{const C=await oo.getRolePermissions(n.id);h(C.data.map(E=>E.id))}catch(C){console.error("Error al cargar permisos del rol:",C),a("Error al cargar permisos del rol")}},v=C=>{h(E=>E.includes(C)?E.filter(T=>T!==C):[...E,C])},w=async()=>{var C,E;if(n){l(!0);try{await oo.assignPermissions(n.id,{permissionIds:u}),s("Permisos actualizados exitosamente"),k(),r()}catch(T){console.error("Error al actualizar permisos:",T),a(((E=(C=T.response)==null?void 0:C.data)==null?void 0:E.message)||"Error al actualizar permisos")}finally{l(!1)}}},k=()=>{i||(m(""),g("all"),h([]),d([]),e())},N=c.filter(C=>{const E=C.name.toLowerCase().includes(f.toLowerCase())||C.description&&C.description.toLowerCase().includes(f.toLowerCase()),T=p==="all"||C.module===p;return E&&T}),S=Array.from(new Set(c.map(C=>C.module)));return n?o.jsxs(At,{isOpen:t,onClose:k,title:`Gestionar Permisos - ${n.name}`,size:"2xl",children:[o.jsxs("div",{className:"mb-6 space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(O,{action:"search",size:"sm",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Buscar permisos...",value:f,onChange:C=>m(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),o.jsxs("select",{value:p,onChange:C=>g(C.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"all",children:"Todos los mdulos"}),S.map(C=>o.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))]})]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-3",children:o.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[o.jsxs("span",{children:["Total de permisos: ",c.length]}),o.jsxs("span",{children:["Permisos asignados: ",u.length]}),o.jsxs("span",{children:["Filtrados: ",N.length]})]})})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg",children:o.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:N.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"shield",size:"xl",className:"mx-auto mb-4",color:"neutral"}),o.jsx("p",{children:"No se encontraron permisos"}),o.jsx("p",{className:"text-sm",children:"Ajusta los filtros de bsqueda"})]}):N.map(C=>o.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:u.includes(C.id),onChange:()=>v(C.id),disabled:i,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 dark:border-gray-600 rounded disabled:opacity-50 dark:bg-gray-700"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:C.name}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:C.description})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300",children:C.module}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:C.action}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300",children:C.scope})]})]})},C.id))})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-600 mt-6",children:[o.jsx(ae,{variant:"secondary",onClick:k,disabled:i,children:"Cancelar"}),o.jsx(ae,{variant:"success",onClick:w,disabled:i,children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"shield",size:"sm",className:"mr-1"}),"Guardar Permisos"]})})]})]}):null}function M0e(){var i;const[t,e]=x.useState(null),[r,n]=x.useState(!0);x.useEffect(()=>{s()},[]);const s=async()=>{try{n(!0);const l=await oo.getRoleStats();e(l)}catch(l){console.error("Error al cargar estadsticas:",l),e({totalRoles:0,activeRoles:0,inactiveRoles:0,totalPermissions:0,rolesWithUsers:0,systemRoles:0})}finally{n(!1)}};if(r)return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((l,c)=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded mb-3"}),o.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded mb-2"}),o.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded"})]})},c))});if(!t&&!r)return null;const a=[{id:"total",label:"Total de Roles",value:(t==null?void 0:t.totalRoles)||0,icon:"user",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-100"},{id:"active",label:"Roles Activos",value:(t==null?void 0:t.activeRoles)||0,icon:"view",color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-100"},{id:"inactive",label:"Roles Inactivos",value:(t==null?void 0:t.inactiveRoles)||0,icon:"hide",color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-100"},{id:"withPerms",label:"Roles Configurados",value:((i=t==null?void 0:t.rolesWithMostPermissions)==null?void 0:i.length)||0,icon:"shield",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-100"}];return o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:a.map(l=>o.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border ${l.borderColor} dark:border-gray-700 p-4 hover:shadow-md transition-shadow`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${l.bgColor}`,children:o.jsx(O,{action:l.icon,size:"sm",className:l.color})}),o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors p-1 rounded",title:"Actualizar estadsticas",children:o.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:l.label}),o.jsx("p",{className:`text-2xl font-bold ${l.color}`,children:l.value.toLocaleString()})]}),l.id==="active"&&((t==null?void 0:t.totalRoles)||0)>0&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx("span",{children:"Activos"}),o.jsxs("span",{children:[Math.round(((t==null?void 0:t.activeRoles)||0)/((t==null?void 0:t.totalRoles)||1)*100),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-1.5",children:o.jsx("div",{className:"bg-green-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${((t==null?void 0:t.activeRoles)||0)/((t==null?void 0:t.totalRoles)||1)*100}%`}})})]})]},l.id))})}const O0e=()=>{var J;const[t,e]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState(null),[i,l]=x.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"DESC"}),[c,d]=x.useState(!1),[u,h]=x.useState(!1),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),[k,N]=x.useState(!0);x.useEffect(()=>{S(),k&&C()},[i]);const S=async()=>{try{n(!0),a(null);const _=await oo.getRoles(i);e((_==null?void 0:_.roles)||[])}catch(_){a(_ instanceof Error?_.message:"Error al cargar roles"),e([])}finally{n(!1)}},C=async()=>{try{await oo.getRoleStats()}catch(_){console.error("Error loading stats:",_)}},E=_=>{l(H=>({...H,search:_,page:1}))},T=(_,H)=>{l(P=>({...P,[_]:H,page:1}))},R=()=>{d(!0)},B=()=>{d(!1),S(),k&&C()},M=()=>{h(!1),w(null),S(),k&&C()},L=()=>{m(!1),w(null),S(),k&&C()},V=()=>{g(!1),w(null),S()},ee=()=>{b(!1),w(null),S(),k&&C()},Q=()=>{S(),k&&C()};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[o.jsx(O,{action:"shield",size:"lg"}),"Gestin de Roles"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra roles del sistema"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(ae,{variant:"secondary",onClick:()=>N(!k),className:"flex items-center gap-2",children:[o.jsx(O,{action:"analytics",size:"sm"}),k?"Ocultar":"Mostrar"," Estadsticas"]}),o.jsxs(ae,{onClick:R,className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Nuevo Rol"]})]})]}),k&&o.jsx(M0e,{}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx(ft,{type:"text",placeholder:"Buscar por nombre o descripcin...",value:i.search||"",onChange:_=>E(_.target.value),className:"pl-10"})]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:((J=i.isActive)==null?void 0:J.toString())||"",onChange:_=>T("isActive",_.target.value?_.target.value==="true":void 0),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:`${i.sortBy}-${i.sortOrder}`,onChange:_=>{const[H,P]=_.target.value.split("-");T("sortBy",H),T("sortOrder",P)},children:[o.jsx("option",{value:"createdAt-DESC",children:"Ms recientes"}),o.jsx("option",{value:"createdAt-ASC",children:"Ms antiguos"}),o.jsx("option",{value:"name-ASC",children:"Nombre A-Z"}),o.jsx("option",{value:"name-DESC",children:"Nombre Z-A"}),o.jsx("option",{value:"updatedAt-DESC",children:"ltimas modificaciones"})]})}),o.jsxs(ae,{variant:"secondary",className:"flex items-center gap-2 whitespace-nowrap",onClick:Q,children:[o.jsx(O,{action:"filter",size:"sm"}),"Actualizar"]})]})}),s&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200",children:s})}),r&&o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Lr,{size:"lg"})}),!r&&o.jsx(T0e,{roles:t,isLoading:r,onRefresh:Q}),c&&o.jsx(_0e,{isOpen:c,onClose:()=>d(!1),onSuccess:B}),u&&v&&o.jsx(EB,{isOpen:u,role:v,onClose:()=>{h(!1),w(null)},onSuccess:M}),f&&v&&o.jsx(jB,{isOpen:f,role:v,onClose:()=>{m(!1),w(null)},onSuccess:L}),p&&v&&o.jsx(A0e,{isOpen:p,role:v,onClose:()=>{g(!1),w(null)},onSuccess:V}),y&&v&&o.jsx(TB,{isOpen:y,role:v,onClose:()=>{b(!1),w(null)},onSuccess:ee})]})},R0e=(t=3e4)=>{const[e,r]=x.useState({isOnline:!1,lastChecked:new Date}),n=async()=>{const a=Date.now();try{const i=await fetch(`${Pn.api.baseUrl.replace("/api","")}/api/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)}),l=Date.now()-a;return i.ok?(await i.json(),{isOnline:!0,lastChecked:new Date,responseTime:l}):{isOnline:!1,lastChecked:new Date,responseTime:l,error:`HTTP ${i.status}: ${i.statusText}`}}catch(i){const l=Date.now()-a;return{isOnline:!1,lastChecked:new Date,responseTime:l,error:i instanceof Error?i.message:"Error de conexin"}}},s=async()=>{const a=await n();return r(a),a};return x.useEffect(()=>{n().then(r);const a=setInterval(async()=>{const i=await n();r(i)},t);return()=>clearInterval(a)},[t]),{...e,manualCheck:s}},P0e=()=>{var h,f;const{isOnline:t,lastChecked:e,responseTime:r,error:n,manualCheck:s}=R0e(1e4),[a,i]=x.useState(!1),[l,c]=x.useState(null),d=async()=>{i(!0);try{if((await s()).isOnline){const p=await fetch(`${Pn.api.backendUrl}/api/health`);if(p.ok){const g=await p.json();c(g)}}}catch(m){console.error("Error checking server status:",m)}finally{i(!1)}},u=m=>{const p=Math.floor(m/3600),g=Math.floor(m%3600/60),y=Math.floor(m%60);return`${p}h ${g}m ${y}s`};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Estado del Sistema"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Monitoreo en tiempo real del servidor backend"})]}),o.jsxs(ae,{onClick:d,disabled:a,className:"flex items-center gap-2",children:[o.jsx(O,{action:"loading",size:"sm",className:a?"animate-spin":""}),a?"Verificando...":"Verificar Estado"]})]}),o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-3 rounded-full ${t?"bg-green-100 dark:bg-green-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:t?o.jsx(O,{action:"success",size:"xl",color:"green"}):o.jsx(O,{action:"warning",size:"xl",color:"red"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Servidor Backend"}),o.jsx("p",{className:`text-lg font-medium ${t?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:t?"En lnea y funcionando":"Desconectado o con problemas"}),r&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Tiempo de respuesta: ",r,"ms"]})]})]}),n&&o.jsxs("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"Error de conexin"}),o.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n})]})]}),t&&l&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(O,{action:"server",size:"lg",color:"blue"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Informacin del Sistema"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estado:"}),o.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:l.status})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Versin:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.version})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Entorno:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.environment})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Timestamp:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:new Date(l.timestamp).toLocaleString()})]})]})]}),o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(O,{action:"cpu",size:"lg",color:"purple"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Rendimiento"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Uptime:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u(l.uptime)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Memoria Usada:"}),o.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(h=l.memory)==null?void 0:h.used," MB"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Memoria Total:"}),o.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(f=l.memory)==null?void 0:f.total," MB"]})]}),l.memory&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Uso de memoria"}),o.jsxs("span",{className:"text-gray-900 dark:text-white",children:[Math.round(l.memory.used/l.memory.total*100),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${Math.min(l.memory.used/l.memory.total*100,100)}%`}})})]})]})]})]}),o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(O,{action:"time",size:"lg",color:"orange"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Estado de Conexin"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ltima verificacin"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.toLocaleTimeString()})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"URL del servidor"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:Pn.api.backendUrl})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estado"}),o.jsx("p",{className:`font-medium ${t?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:t?"Conectado":"Desconectado"})]})]})]}),!t&&o.jsxs(Pa,{className:"p-6 border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20",children:[o.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-3",children:"Problemas de conexin?"}),o.jsxs("div",{className:"space-y-2 text-sm text-yellow-700 dark:text-yellow-300",children:[o.jsx("p",{children:" Verifica que el servidor backend est corriendo en el puerto 3000"}),o.jsxs("p",{children:[" Ejecuta"," ",o.jsx("code",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:"npm run dev"})," ","en la carpeta del backend"]}),o.jsx("p",{children:" Revisa la consola del servidor para errores"}),o.jsx("p",{children:" Confirma que no hay otro proceso usando el puerto 3000"})]})]})]})};class I0e{constructor(){ve(this,"baseUrl","/notes")}async getAllNotes(e){const r=new URLSearchParams;return e&&Object.entries(e).forEach(([s,a])=>{a!=null&&(Array.isArray(a)?r.append(s,a.join(",")):r.append(s,String(a)))}),(await Ze.authenticatedRequest(`${this.baseUrl}${r.toString()?`?${r.toString()}`:""}`)).data||[]}async getNoteById(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/${e}`);if(!r.data)throw new Error("Note not found");return r.data}async createNote(e){const r=await Ze.authenticatedRequest(this.baseUrl,{method:"POST",body:JSON.stringify(e)});if(!r.data)throw new Error("Failed to create note");return r.data}async updateNote(e,r){const n=await Ze.authenticatedRequest(`${this.baseUrl}/${e}`,{method:"PUT",body:JSON.stringify(r)});if(!n.data)throw new Error("Failed to update note");return n.data}async deleteNote(e){await Ze.authenticatedRequest(`${this.baseUrl}/${e}`,{method:"DELETE"})}async toggleArchiveNote(e){const r=await Ze.authenticatedRequest(`${this.baseUrl}/${e}/archive`,{method:"PATCH"});if(!r.data)throw new Error("Failed to toggle archive status");return r.data}async searchNotes(e,r){const n=new URLSearchParams({q:e});return r&&n.append("limit",String(r)),(await Ze.authenticatedRequest(`${this.baseUrl}/search?${n.toString()}`)).data||[]}async getNotesStats(){const e=await Ze.authenticatedRequest(`${this.baseUrl}/stats`);if(!e.data)throw new Error("Failed to load stats");return e.data}async getNotesByCase(e){return(await Ze.authenticatedRequest(`${this.baseUrl}/case/${e}`)).data||[]}}const yp=new I0e;function D0e(t){return Vr({queryKey:["notes",t],queryFn:()=>yp.getAllNotes(t),staleTime:5*60*1e3})}function L0e(){return Vr({queryKey:["notes-stats"],queryFn:()=>yp.getNotesStats(),staleTime:2*60*1e3})}function $0e(){const t=ur();return gr({mutationFn:e=>yp.createNote(e),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["notes-stats"]})}})}function F0e(){const t=ur();return gr({mutationFn:({id:e,data:r})=>yp.updateNote(e,r),onSuccess:(e,r)=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["note",r.id]}),t.invalidateQueries({queryKey:["notes-stats"]})}})}function B0e(){const t=ur();return gr({mutationFn:e=>yp.deleteNote(e),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["notes-stats"]})}})}function z0e(){const t=ur();return gr({mutationFn:e=>yp.toggleArchiveNote(e),onSuccess:()=>{t.invalidateQueries({queryKey:["notes"]}),t.invalidateQueries({queryKey:["notes-stats"]})}})}const U0e=({note:t,onEdit:e,onDelete:r,onArchive:n,onUnarchive:s,currentUserId:a,canEdit:i=!0,canDelete:l=!0,canArchive:c=!0})=>{var p,g;const d=y=>Eb(new Date(y),{addSuffix:!0,locale:Um}),u=y=>new Date(y).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=y=>new Date(y)<=new Date,f=i&&(!a||t.createdBy===a),m=l&&(!a||t.createdBy===a);return o.jsxs("div",{id:`note-${t.id}`,className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border ${t.isImportant?"border-red-200 dark:border-red-800":"border-gray-200 dark:border-gray-700"} hover:shadow-md transition-shadow`,children:[o.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:t.title}),t.isImportant&&o.jsx(O,{action:"warning",size:"sm",color:"danger",className:"flex-shrink-0"}),t.isArchived&&o.jsx(O,{action:"archive",size:"sm",color:"neutral",className:"flex-shrink-0"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(O,{action:"user",size:"sm",className:"flex-shrink-0"}),o.jsx("span",{className:"truncate",children:((p=t.createdByUser)==null?void 0:p.fullName)||((g=t.createdByUser)==null?void 0:g.email)||"Usuario desconocido"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(O,{action:"time",size:"sm",className:"flex-shrink-0"}),o.jsx("span",{className:"whitespace-nowrap",children:d(t.createdAt)})]}),t.updatedAt!==t.createdAt&&o.jsxs("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:["Editado ",d(t.updatedAt)]})]})]}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[f&&o.jsx(ae,{onClick:()=>e(t),variant:"ghost",size:"xs",className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Editar nota",children:o.jsx(O,{action:"edit",size:"xs"})}),c&&o.jsx(ae,{onClick:()=>t.isArchived?s(t):n(t),variant:"ghost",size:"xs",className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:t.isArchived?"Desarchivar nota":"Archivar nota",children:t.isArchived?o.jsx(O,{action:"restore",size:"xs"}):o.jsx(O,{action:"archive",size:"xs"})}),m&&o.jsx(ae,{onClick:()=>r(t),variant:"ghost",size:"xs",className:"p-1.5 text-gray-400 hover:text-red-500",title:"Eliminar nota",children:o.jsx(O,{action:"delete",size:"xs"})})]})]})}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap line-clamp-3",children:t.content})}),t.case&&o.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[o.jsx(O,{action:"document",size:"sm",color:"neutral"}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Caso: ",o.jsx("span",{className:"font-medium",children:t.case.numeroCaso}),t.case.descripcion&&o.jsxs("span",{children:[" - ",t.case.descripcion]})]})]}),t.assignedToUser&&t.assignedToUser.id!==t.createdBy&&o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(O,{action:"user",size:"sm",color:"neutral"}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Asignado a:"," ",o.jsx("span",{className:"font-medium",children:t.assignedToUser.fullName||t.assignedToUser.email})]})]}),t.reminderDate&&o.jsxs("div",{className:`flex items-center gap-2 p-2 rounded mb-4 ${h(t.reminderDate)?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:[o.jsx(O,{action:"time",size:"sm"}),o.jsxs("span",{className:"text-sm",children:["Recordatorio: ",u(t.reminderDate),h(t.reminderDate)&&o.jsx("span",{className:"ml-2 font-medium",children:"Activo!"}),t.isReminderSent&&o.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Enviado)"})]})]}),t.tags&&t.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map((y,b)=>o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[o.jsx(O,{action:"tag",size:"xs",className:"mr-1"}),y]},b))})]}),t.isArchived&&t.archivedAt&&o.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-700 rounded-b-lg border-t border-gray-200 dark:border-gray-600",children:o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"archive",size:"sm"}),o.jsxs("span",{children:["Archivado ",d(t.archivedAt),t.archivedByUser&&o.jsxs("span",{children:[" ","por"," ",t.archivedByUser.fullName||t.archivedByUser.email]})]})]})})]})},V0e=({isOpen:t,onClose:e,onSave:r,note:n,isLoading:s=!1})=>{var H;const[a,i]=x.useState((n==null?void 0:n.title)||""),[l,c]=x.useState((n==null?void 0:n.content)||""),[d,u]=x.useState((n==null?void 0:n.noteType)||"note"),[h,f]=x.useState((n==null?void 0:n.priority)||"medium"),[m,p]=x.useState((n==null?void 0:n.difficultyLevel)||1),[g,y]=x.useState((n==null?void 0:n.isImportant)||!1),[b,v]=x.useState((n==null?void 0:n.isTemplate)||!1),[w,k]=x.useState(n!=null&&n.reminderDate?n.reminderDate.slice(0,16):""),[N,S]=x.useState(((H=n==null?void 0:n.tags)==null?void 0:H.join(", "))||""),[C,E]=x.useState((n==null?void 0:n.estimatedSolutionTime)||""),[T,R]=x.useState((n==null?void 0:n.complexityNotes)||""),[B,M]=x.useState((n==null?void 0:n.prerequisites)||"");x.useEffect(()=>{var P;n&&(i(n.title||""),c(n.content||""),u(n.noteType||"note"),f(n.priority||"medium"),p(n.difficultyLevel||1),y(n.isImportant||!1),v(n.isTemplate||!1),k(n.reminderDate?n.reminderDate.slice(0,16):""),S(((P=n.tags)==null?void 0:P.join(", "))||""),E(n.estimatedSolutionTime||""),R(n.complexityNotes||""),M(n.prerequisites||""))},[n]);const L=P=>{if(P.preventDefault(),!a.trim()||!l.trim())return;const K=N.split(",").map(F=>F.trim()).filter(F=>F.length>0);r({title:a.trim(),content:l.trim(),noteType:d,priority:h,difficultyLevel:m,isImportant:g,isTemplate:b,reminderDate:w||void 0,tags:K,estimatedSolutionTime:C?Number(C):void 0,complexityNotes:T.trim()||void 0,prerequisites:B.trim()||void 0}),n||V()},V=()=>{i(""),c(""),u("note"),f("medium"),p(1),y(!1),v(!1),k(""),S(""),E(""),R(""),M("")},ee=()=>{n||V(),e()},Q=[{value:"note",label:"Nota General",icon:""},{value:"solution",label:"Solucin",icon:""},{value:"guide",label:"Gua",icon:""},{value:"faq",label:"FAQ",icon:""},{value:"template",label:"Plantilla",icon:""},{value:"procedure",label:"Procedimiento",icon:""}],J=[{value:"low",label:"Baja",color:"text-green-600",bgColor:"bg-green-50"},{value:"medium",label:"Media",color:"text-yellow-600",bgColor:"bg-yellow-50"},{value:"high",label:"Alta",color:"text-orange-600",bgColor:"bg-orange-50"},{value:"urgent",label:"Urgente",color:"text-red-600",bgColor:"bg-red-50"}],_=["Muy Fcil","Fcil","Intermedio","Difcil","Muy Difcil"];return o.jsx(At,{isOpen:t,onClose:ee,title:n?"Editar Nota":"Nueva Nota",size:"lg",children:o.jsxs("form",{onSubmit:L,className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(O,{action:"document",size:"sm",className:"mr-2"}),"Informacin Bsica"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),o.jsx(ft,{type:"text",value:a,onChange:P=>i(P.target.value),placeholder:"Ttulo de la nota",required:!0,className:"w-full"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Nota"}),o.jsx("select",{value:d,onChange:P=>u(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Q.map(P=>o.jsxs("option",{value:P.value,children:[P.icon," ",P.label]},P.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridad"}),o.jsx("select",{value:h,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:J.map(P=>o.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contenido *"}),o.jsx("textarea",{value:l,onChange:P=>c(P.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",placeholder:"Contenido de la nota",required:!0})]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(O,{action:"info",size:"sm",className:"mr-2"}),"Configuracin y Metadatos"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nivel de Dificultad: ",_[m-1]]}),o.jsx("input",{type:"range",min:"1",max:"5",value:m,onChange:P=>p(Number(P.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[o.jsx("span",{children:"1"}),o.jsx("span",{children:"2"}),o.jsx("span",{children:"3"}),o.jsx("span",{children:"4"}),o.jsx("span",{children:"5"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tiempo Estimado (minutos)"}),o.jsx(ft,{type:"number",value:C,onChange:P=>E(P.target.value),placeholder:"Ej: 30",min:"1",className:"w-full"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"tag",size:"sm",className:"inline mr-1"}),"Etiquetas (separadas por comas)"]}),o.jsx(ft,{type:"text",value:N,onChange:P=>S(P.target.value),placeholder:"javascript, frontend, react",className:"w-full"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o.jsx(O,{action:"calendar",size:"sm",className:"inline mr-1"}),"Fecha de Recordatorio"]}),o.jsx(ft,{type:"datetime-local",value:w,onChange:P=>k(P.target.value),className:"w-full"})]})]}),o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prerrequisitos"}),o.jsx("textarea",{value:B,onChange:P=>M(P.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Conocimientos o requisitos previos necesarios"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notas de Complejidad"}),o.jsx("textarea",{value:T,onChange:P=>R(P.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Detalles adicionales sobre la complejidad"})]})]}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isImportant",checked:g,onChange:P=>y(P.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"isImportant",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:[o.jsx(O,{action:"flag",size:"sm",className:"inline mr-1"}),"Marcar como importante"]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isTemplate",checked:b,onChange:P=>v(P.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"isTemplate",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:[o.jsx(O,{action:"time",size:"sm",className:"inline mr-1"}),"Usar como plantilla"]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:ee,disabled:s,children:"Cancelar"}),o.jsx(ae,{type:"submit",disabled:!a.trim()||!l.trim()||s,children:s?"Guardando...":n?"Actualizar":"Crear Nota"})]})]})})},H0e=()=>{const[t,e]=x.useState(!1);return{exportToExcel:async(s,a={})=>{var i,l;if(s.length===0){(i=a.onError)==null||i.call(a,"No hay notas para exportar");return}try{e(!0),await ihe(s,a.filename,a.onSuccess)}catch(c){console.error("Error exporting notes to Excel:",c),(l=a.onError)==null||l.call(a,"Error al exportar notas a Excel")}finally{e(!1)}},exportToCSV:async(s,a={})=>{var i,l;if(s.length===0){(i=a.onError)==null||i.call(a,"No hay notas para exportar");return}try{e(!0),await ohe(s,a.filename,a.onSuccess)}catch(c){console.error("Error exporting notes to CSV:",c),(l=a.onError)==null||l.call(a,"Error al exportar notas a CSV")}finally{e(!1)}},isExporting:t}},W0e=({filteredNotes:t,onSuccess:e,onError:r,className:n=""})=>{const{exportToExcel:s,exportToCSV:a,isExporting:i}=H0e(),l=()=>{const h=new Date().toISOString().split("T")[0];s(t,{filename:`notas-${h}.xlsx`,onSuccess:e,onError:r})},c=()=>{const h=new Date().toISOString().split("T")[0];a(t,{filename:`notas-${h}.csv`,onSuccess:e,onError:r})},d=t.length>0,u=t.length;return o.jsxs("div",{className:`flex space-x-2 ${n}`,children:[o.jsxs(ae,{variant:"secondary",size:"sm",onClick:c,disabled:!d||i,title:d?`Exportar ${u} nota(s) a CSV`:"No hay notas para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"CSV"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:l,disabled:!d||i,title:d?`Exportar ${u} nota(s) a Excel`:"No hay notas para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"Excel"]})]})},q0e=()=>{var ee,Q,J,_,H;const[t,e]=x.useState(!1),[r,n]=x.useState(null),[s,a]=x.useState({isArchived:!1}),[i,l]=x.useState("all"),{data:c=[],isLoading:d,error:u}=D0e(s),{data:h,isLoading:f,error:m}=L0e(),p=$0e(),g=F0e(),y=B0e(),b=z0e(),{success:v,error:w}=nr(),{confirmDelete:k,modalState:N,modalHandlers:S}=hc(),C=P=>{n(P),e(!0)},E=async P=>{try{await p.mutateAsync({...P,authorId:"7c1b05d7-d98e-4543-ac27-dd1c797517e6"}),v("Nota creada exitosamente"),R()}catch{w("Error al crear la nota")}},T=async P=>{if(r)try{await g.mutateAsync({id:r.id,data:{id:r.id,title:P.title,content:P.content}}),v("Nota actualizada exitosamente"),R()}catch{w("Error al actualizar la nota")}},R=()=>{e(!1),n(null)},B=async P=>{l(P);let K={};const F="7c1b05d7-d98e-4543-ac27-dd1c797517e6";switch(P){case"all":K={isArchived:!1};break;case"my":K={isArchived:!1,createdBy:F};break;case"assigned":K={isArchived:!1,assignedTo:F};break;case"important":K={isArchived:!1,isImportant:!0};break;case"archived":K={isArchived:!0};break}a(K)},M=async P=>{if(await k("nota"))try{await y.mutateAsync(P.id),v("Nota eliminada exitosamente")}catch(F){console.error("Error deleting note:",F),w("Error al eliminar la nota")}},L=async P=>{try{await b.mutateAsync(P.id),v(P.isArchived?"Nota desarchivada exitosamente":"Nota archivada exitosamente")}catch(K){console.error("Error archiving note:",K),w("Error al "+(P.isArchived?"desarchivar":"archivar")+" la nota")}},V=async P=>{try{await b.mutateAsync(P.id),v("Nota desarchivada exitosamente")}catch(K){console.error("Error unarchiving note:",K),w("Error al desarchivar la nota")}};return d||f?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/4 mb-4"}),o.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-700 rounded w-1/2 mb-6"}),o.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-6 mb-8",children:[...Array(6)].map((P,K)=>o.jsx("div",{className:"h-20 bg-gray-300 dark:bg-gray-700 rounded"},K))}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:[...Array(3)].map((P,K)=>o.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded"},K))})]})})}):u||m?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Error al cargar las notas"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:(u==null?void 0:u.message)||(m==null?void 0:m.message)||"Ha ocurrido un error inesperado"}),o.jsx(ae,{onClick:()=>window.location.reload(),variant:"primary",children:"Reintentar"})]})})}):o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:o.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Notas"}),o.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:"Administra y organiza todas las notas del sistema"})]}),o.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-2",children:[o.jsx(W0e,{filteredNotes:c,onSuccess:v,onError:w}),o.jsxs(ae,{onClick:()=>e(!0),variant:"primary",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nueva Nota"]})]})]}),h&&o.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-6 sm:gap-3 mb-8",children:[o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="all"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("all"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"gray"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.totalNotes||0})]})})]})})}),o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="my"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("my"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"blue"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Mas"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.myNotes||0})]})})]})})}),o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="assigned"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("assigned"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"purple"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Asignadas"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.assignedNotes||0})]})})]})})}),o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="important"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("important"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"red"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Importantes"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.importantNotes||0})]})})]})})}),o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="all"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("all"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"yellow"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Recordar"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.withReminders||0})]})})]})})}),o.jsx("div",{className:`bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 ${i==="archived"?"ring-2 ring-indigo-500":""}`,onClick:()=>B("archived"),children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"archive",size:"sm",color:"gray"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Archivadas"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:h.archivedNotes||0})]})})]})})})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"flex space-x-2 mb-4",children:[o.jsx(ae,{onClick:()=>B("all"),variant:i==="all"?"primary":"secondary",size:"sm",children:"Todas las notas"}),o.jsx(ae,{onClick:()=>B("my"),variant:i==="my"?"primary":"secondary",size:"sm",children:"Mis notas"}),o.jsx(ae,{onClick:()=>B("assigned"),variant:i==="assigned"?"primary":"secondary",size:"sm",children:"Asignadas a m"}),o.jsx(ae,{onClick:()=>B("important"),variant:i==="important"?"primary":"secondary",size:"sm",children:"Importantes"}),o.jsx(ae,{onClick:()=>B("archived"),variant:i==="archived"?"primary":"secondary",size:"sm",children:"Archivadas"})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:c.map(P=>o.jsx(U0e,{note:P,onEdit:C,onDelete:M,onArchive:L,onUnarchive:V,currentUserId:void 0,canEdit:!0,canDelete:!0,canArchive:!0},P.id))}),c.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"mx-auto mb-4",children:o.jsx(O,{action:"analytics",size:"xl",color:"gray"})}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay notas"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comienza creando una nueva nota."}),o.jsx("div",{className:"mt-6",children:o.jsxs(ae,{onClick:()=>e(!0),variant:"primary",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nueva Nota"]})})]}),o.jsx(V0e,{isOpen:t,onClose:R,onSave:r?T:E,note:r,isLoading:p.isPending||g.isPending}),o.jsx(Ha,{isOpen:N.isOpen,onClose:S.onClose,onConfirm:S.onConfirm,title:((ee=N.options)==null?void 0:ee.title)||"",message:((Q=N.options)==null?void 0:Q.message)||"",confirmText:(J=N.options)==null?void 0:J.confirmText,cancelText:(_=N.options)==null?void 0:_.cancelText,type:(H=N.options)==null?void 0:H.type})]})})},Hs={all:["archive"],stats:()=>[...Hs.all,"stats"],cases:t=>[...Hs.all,"cases",t],case:t=>[...Hs.all,"cases",t],todos:t=>[...Hs.all,"todos",t],todo:t=>[...Hs.all,"todos",t],items:t=>[...Hs.all,"items",t],search:(t,e)=>[...Hs.all,"search",t,e]},G0e=()=>Vr({queryKey:Hs.stats(),queryFn:async()=>await Fa.getArchiveStats(),staleTime:1e3*60*5}),K0e=()=>{const t=ur();return gr({mutationFn:e=>Fa.archiveCase(e),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all}),t.invalidateQueries({queryKey:["cases"]})},onError:e=>{console.error("Error archiving case:",e)}})},Z0e=()=>{const t=ur();return gr({mutationFn:({id:e,restoreData:r})=>Fa.restoreCase(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all}),t.invalidateQueries({queryKey:["cases"]})},onError:e=>{console.error("Error restoring case:",e)}})},Y0e=()=>{const t=ur();return gr({mutationFn:({id:e})=>Fa.deleteArchivedCase(e),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all})},onError:e=>{console.error("Error deleting archived case:",e)}})},X0e=()=>{const t=ur();return gr({mutationFn:e=>Fa.archiveTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all}),t.invalidateQueries({queryKey:["todos"]})},onError:e=>{console.error("Error archiving todo:",e)}})},J0e=()=>{const t=ur();return gr({mutationFn:({id:e,restoreData:r})=>Fa.restoreTodo(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all}),t.invalidateQueries({queryKey:["todos"]})},onError:e=>{console.error("Error restoring todo:",e)}})},Q0e=()=>{const t=ur();return gr({mutationFn:({id:e})=>Fa.deleteArchivedTodo(e),onSuccess:()=>{t.invalidateQueries({queryKey:Hs.all})},onError:e=>{console.error("Error deleting archived todo:",e)}})},ege=t=>Vr({queryKey:Hs.items(t),queryFn:async()=>await Fa.getArchivedItems(t),staleTime:1e3*60*2}),tge=t=>{const e=G0e(),r=ege(t);return{stats:e.data,items:r.data,isLoading:e.isLoading||r.isLoading,isError:e.isError||r.isError,error:e.error||r.error,refetch:()=>{e.refetch(),r.refetch()}}},rge=()=>{const t=K0e(),e=X0e(),r=Z0e(),n=J0e(),s=Y0e(),a=Q0e();return{archiveCase:t.mutateAsync,archiveTodo:e.mutateAsync,restoreCase:r.mutateAsync,restoreTodo:n.mutateAsync,deleteCase:s.mutateAsync,deleteTodo:a.mutateAsync,isArchiving:t.isPending||e.isPending,isRestoring:r.isPending||n.isPending,isDeleting:s.isPending||a.isPending,archiveError:t.error||e.error,restoreError:r.error||n.error,deleteError:s.error||a.error}},nge=[{value:"all",label:"Todos"},{value:"cases",label:"Casos"},{value:"todos",label:"TODOs"}],sge=[{value:"simple",label:"Simple"},{value:"medium",label:"Medio"},{value:"complex",label:"Complejo"}],age=[{value:"low",label:"Baja"},{value:"medium",label:"Media"},{value:"high",label:"Alta"},{value:"urgent",label:"Urgente"}],ige=()=>{var B,M,L,V,ee,Q,J;const{success:t,error:e}=nr(),[r,n]=x.useState({type:"all",showRestored:!1}),[s,a]=x.useState(""),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(!1),{stats:f,items:m,isLoading:p,isError:g,error:y,refetch:b}=tge(r),v=rge(),{showConfirmation:w,modalState:k,modalHandlers:N}=hc(),S=x.useMemo(()=>{if(!m||!Array.isArray(m))return[];let _=[...m];if(s){const H=s.toLowerCase();_=_.filter(P=>{var K,F;return P.title.toLowerCase().includes(H)||((K=P.description)==null?void 0:K.toLowerCase().includes(H))||((F=P.caseNumber)==null?void 0:F.toLowerCase().includes(H))})}return _},[m,s]),C=(_,H)=>{n(P=>({...P,[_]:H}))},E=_=>{d(_),h(!0)},T=async _=>{if(await w({title:"Restaurar Elemento",message:`Ests seguro de que quieres restaurar "${_.title}"?`,confirmText:"Restaurar",cancelText:"Cancelar",type:"info"}))try{_.itemType==="case"?await v.restoreCase({id:_.id,restoreData:{reason:"Restaurado desde la interfaz de archivo"}}):await v.restoreTodo({id:_.id,restoreData:{reason:"Restaurado desde la interfaz de archivo"}}),t("Elemento restaurado exitosamente"),b()}catch(P){console.error("Error restoring item:",P);const K=P instanceof Error?P.message:"Error al restaurar elemento";e(K)}},R=async _=>{if(await w({title:"Eliminar Permanentemente",message:`Ests seguro de que quieres eliminar permanentemente "${_.title}"? Esta accin no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",type:"danger"}))try{_.itemType==="case"?await v.deleteCase({id:_.id}):await v.deleteTodo({id:_.id}),t("Elemento eliminado exitosamente"),b()}catch(P){console.error("Error deleting item:",P);const K=P instanceof Error?P.message:"Error al eliminar elemento";e(K)}};return p?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Cargando archivo..."})]})}):g?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error al cargar el archivo: ",y==null?void 0:y.message]}),o.jsx(ae,{onClick:()=>b(),variant:"primary",children:"Reintentar"})]})}):o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Archivo"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestin de casos y TODOs archivados"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(ae,{onClick:()=>l(!i),variant:"ghost",className:"flex items-center space-x-2",children:[o.jsx(O,{action:"filter",size:"sm",color:"gray"}),o.jsx("span",{children:"Filtros"})]}),o.jsxs(ae,{onClick:()=>b(),variant:"secondary",className:"flex items-center space-x-2",children:[o.jsx(O,{action:"loading",size:"sm",color:"gray"}),o.jsx("span",{children:"Actualizar"})]})]})]}),f&&o.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 md:grid-cols-3 lg:grid-cols-5",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 dark:bg-blue-900 rounded-lg flex-shrink-0",children:o.jsx(O,{action:"archive",size:"sm",color:"blue"})}),o.jsxs("div",{className:"ml-2 sm:ml-4 min-w-0",children:[o.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:(f==null?void 0:f.totalArchivedCases)||0}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Casos"})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 dark:bg-green-900 rounded-lg flex-shrink-0",children:o.jsx(O,{action:"download",size:"sm",color:"green"})}),o.jsxs("div",{className:"ml-2 sm:ml-4 min-w-0",children:[o.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:(f==null?void 0:f.totalArchivedTodos)||0}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:"TODOs"})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1.5 sm:p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex-shrink-0",children:o.jsx(O,{action:"calendar",size:"sm",color:"yellow"})}),o.jsxs("div",{className:"ml-2 sm:ml-4 min-w-0",children:[o.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:Fa.formatTime((f==null?void 0:f.totalArchivedTimeMinutes)||0)}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Tiempo"})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 dark:bg-purple-900 rounded-lg flex-shrink-0",children:o.jsx(O,{action:"archive",size:"sm",color:"purple"})}),o.jsxs("div",{className:"ml-2 sm:ml-4 min-w-0",children:[o.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:(f==null?void 0:f.archivedThisMonth)||0}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Este mes"})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 sm:p-4 rounded-lg shadow",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1.5 sm:p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex-shrink-0",children:o.jsx(O,{action:"loading",size:"sm",color:"primary"})}),o.jsxs("div",{className:"ml-2 sm:ml-4 min-w-0",children:[o.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white",children:(f==null?void 0:f.restoredThisMonth)||0}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Restaurados"})]})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"flex items-center space-x-4 mb-4",children:o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",color:"gray"}),o.jsx("input",{type:"text",placeholder:"Buscar en archivo...",value:s,onChange:_=>a(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})})}),i&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo"}),o.jsx("select",{value:r.type,onChange:_=>C("type",_.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:nge.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),o.jsxs("select",{value:r.showRestored?"restored":"active",onChange:_=>C("showRestored",_.target.value==="restored"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"active",children:"Archivados"}),o.jsx("option",{value:"restored",children:"Restaurados"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Clasificacin"}),o.jsxs("select",{value:r.classification||"",onChange:_=>C("classification",_.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas"}),sge.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridad"}),o.jsxs("select",{value:r.priority||"",onChange:_=>C("priority",_.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas"}),age.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]})]})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ttulo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tiempo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Archivado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron elementos archivados"})}):S.map(_=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`p-2 rounded-full ${_.itemType==="case"?"bg-blue-100 dark:bg-blue-900":"bg-green-100 dark:bg-green-900"}`,children:_.itemType==="case"?o.jsx(O,{action:"download",size:"sm",color:"blue"}):o.jsx(O,{action:"archive",size:"sm",color:"green"})}),o.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900 dark:text-white",children:_.itemType==="case"?"Caso":"TODO"})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.itemType==="case"?_.caseNumber:_.title}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.description||"Sin descripcin"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Fa.formatTime(_.totalTimeMinutes)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Fa.formatDate(_.archivedAt)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Fa.getStatusColor(_.isRestored)}`,children:_.isRestored?"Restaurado":"Archivado"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(ae,{onClick:()=>{E(_)},variant:"ghost",size:"xs",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",title:"Ver detalles",children:o.jsx(O,{action:"view",size:"sm",color:"blue"})}),!_.isRestored&&o.jsx(ae,{onClick:()=>T(_),variant:"ghost",size:"xs",className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",title:"Restaurar",children:o.jsx(O,{action:"loading",size:"sm",color:"green"})}),o.jsx(ae,{onClick:()=>R(_),variant:"ghost",size:"xs",className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",title:"Eliminar permanentemente",children:o.jsx(O,{action:"close",size:"sm",color:"red"})})]})})]},`${_.itemType}-${_.id}`))})]})})}),u&&o.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:o.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:()=>{h(!1)}}),o.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden z-[10000]",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Detalles del Elemento Archivado"}),o.jsx(ae,{onClick:()=>{h(!1)},variant:"ghost",size:"xs",className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:o.jsx(O,{action:"close",size:"md",color:"gray"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:c&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:`p-3 rounded-full ${c.itemType==="case"?"bg-blue-100 dark:bg-blue-900":"bg-green-100 dark:bg-green-900"}`,children:c.itemType==="case"?o.jsx(O,{action:"download",size:"md",color:"blue"}):o.jsx(O,{action:"document",size:"md",color:"green"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[c.itemType==="case"?"Caso":"TODO",":"," ",c.title]}),c.caseNumber&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Nmero de caso: ",c.caseNumber]})]}),o.jsx("div",{className:"ml-auto",children:c.isRestored&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Restaurado"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Informacin General"}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[c.description&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:c.description})]}),c.itemType==="case"&&c.status&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),o.jsx("dd",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:c.status})})]}),c.itemType==="case"&&c.classification&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Clasificacin"}),o.jsx("dd",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:c.classification})})]}),c.itemType==="todo"&&c.priority&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Prioridad"}),o.jsx("dd",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:c.priority})})]}),c.itemType==="todo"&&c.category&&o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Categora"}),o.jsx("dd",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:c.category})})]})]})]})}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Informacin de Archivo"}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha de Archivo"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"calendar",size:"sm",color:"gray"}),new Date(c.archivedAt).toLocaleString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Archivado por"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"user",size:"sm",color:"gray"}),((B=c.archivedByUser)==null?void 0:B.fullName)||((M=c.archivedByUser)==null?void 0:M.email)||c.archivedBy]})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo Total Registrado"}),o.jsxs("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(O,{action:"time",size:"sm",color:"gray"}),o.jsx("span",{className:"font-medium",children:c.totalTimeMinutes?`${Math.floor(c.totalTimeMinutes/60)}h ${c.totalTimeMinutes%60}m`:"0 minutos"})]}),(c.timerTimeMinutes||c.manualTimeMinutes)&&o.jsxs("div",{className:"ml-6 space-y-1 text-xs text-gray-600 dark:text-gray-400",children:[(c.timerTimeMinutes||0)>0&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),o.jsxs("span",{children:["Cronmetro:"," ",Math.floor((c.timerTimeMinutes||0)/60),"h"," ",(c.timerTimeMinutes||0)%60,"m"]})]}),(c.manualTimeMinutes||0)>0&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),o.jsxs("span",{children:["Manual:"," ",Math.floor((c.manualTimeMinutes||0)/60),"h"," ",(c.manualTimeMinutes||0)%60,"m"]})]})]})]})]})]})]})})]}),o.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:["ID del elemento: ",c.id]})})]})})]})]})}),o.jsx(Ha,{isOpen:k.isOpen,onClose:N.onClose,onConfirm:N.onConfirm,title:((L=k.options)==null?void 0:L.title)||"",message:((V=k.options)==null?void 0:V.message)||"",confirmText:(ee=k.options)==null?void 0:ee.confirmText,cancelText:(Q=k.options)==null?void 0:Q.cancelText,type:(J=k.options)==null?void 0:J.type})]})};class oge{constructor(){ve(this,"baseUrl","/api/teams")}async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={...r,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers}};try{const i=await fetch(`${this.baseUrl}${e}`,a);let l;try{l=await i.json()}catch{l={message:`Error en el servidor: ${i.status} ${i.statusText}`}}if(!i.ok){const c=l.message||l.error||l.details||`HTTP error! status: ${i.status}`;throw console.error("Teams API error response:",{status:i.status,statusText:i.statusText,data:l,endpoint:`${this.baseUrl}${e}`}),new Error(c)}return{success:!0,data:l,message:l.message}}catch(i){return console.error("Teams API request failed:",i),{success:!1,message:i instanceof Error?i.message:"Unknown error occurred",errors:[i instanceof Error?i.message:"Unknown error"]}}}async getTeams(e){var i;const r=new URLSearchParams;e&&Object.entries(e).forEach(([l,c])=>{c!=null&&r.append(l,String(c))});const n=r.toString(),s=n?`?${n}`:"",a=await this.makeRequest(s);if(!a.success)throw new Error(a.message||"Failed to fetch teams");return((i=a.data)==null?void 0:i.data)||[]}async getTeamById(e){const r=await this.makeRequest(`/${e}`);if(!r.success)throw new Error(r.message||"Failed to fetch team");return r.data}async createTeam(e){const r=await this.makeRequest("",{method:"POST",body:JSON.stringify(e)});if(!r.success)throw new Error(r.message||"Failed to create team");return r.data}async updateTeam(e,r){const n=await this.makeRequest(`/${e}`,{method:"PUT",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Failed to update team");return n.data}async deleteTeam(e){const r=await this.makeRequest(`/${e}`,{method:"DELETE"});if(!r.success)throw new Error(r.message||"Failed to delete team")}async toggleTeamStatus(e){const r=await this.makeRequest(`/${e}/toggle-status`,{method:"PATCH"});if(!r.success)throw new Error(r.message||"Failed to toggle team status");return r.data}async getTeamMembers(e){var n;const r=await this.makeRequest(`/${e}/members`);if(!r.success)throw new Error(r.message||"Failed to fetch team members");return((n=r.data)==null?void 0:n.data)||[]}async addTeamMember(e,r){const n=await this.makeRequest(`/${e}/members`,{method:"POST",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Failed to add team member");return n.data}async addBulkMembers(e,r){const n=await this.makeRequest(`/${e}/bulk-members`,{method:"POST",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Failed to add bulk members");return n.data}async updateTeamMember(e,r,n){const s=await this.makeRequest(`/${e}/members/${r}`,{method:"PUT",body:JSON.stringify(n)});if(!s.success)throw new Error(s.message||"Failed to update team member");return s.data}async removeTeamMember(e,r){const n=await this.makeRequest(`/${e}/members/${r}`,{method:"DELETE"});if(!n.success)throw new Error(n.message||"Failed to remove team member")}async updateMemberRole(e,r,n){const s=await this.makeRequest(`/${e}/members/${r}/role`,{method:"PATCH",body:JSON.stringify({role:n})});if(!s.success)throw new Error(s.message||"Failed to update member role");return s.data}async getMyTeams(){const e=await this.makeRequest("/my-teams");if(!e.success)throw new Error(e.message||"Failed to fetch my teams");return e.data}async transferLeadership(e,r){const n=await this.makeRequest(`/${e}/transfer-leadership`,{method:"POST",body:JSON.stringify({newManagerId:r})});if(!n.success)throw new Error(n.message||"Failed to transfer leadership");return n.data}async checkUserMembership(e,r){const n=await this.makeRequest(`/${e}/members/${r}/check`);if(!n.success)throw new Error(n.message||"Failed to check user membership");return n.data}async getTeamsOverview(){const e=await this.makeRequest("/stats/overview");if(!e.success)throw new Error(e.message||"Failed to fetch teams overview");return e.data}async getTeamStats(e){const r=await this.makeRequest(`/${e}/stats`);if(!r.success)throw new Error(r.message||"Failed to fetch team stats");return r.data}}const Pl=new oge,lge=[{value:"#3B82F6",label:"Azul",bg:"bg-blue-500"},{value:"#10B981",label:"Verde",bg:"bg-green-500"},{value:"#F59E0B",label:"Amarillo",bg:"bg-yellow-500"},{value:"#EF4444",label:"Rojo",bg:"bg-red-500"},{value:"#8B5CF6",label:"Prpura",bg:"bg-purple-500"},{value:"#06B6D4",label:"Cian",bg:"bg-cyan-500"},{value:"#F97316",label:"Naranja",bg:"bg-orange-500"},{value:"#84CC16",label:"Lima",bg:"bg-lime-500"}];function cge({isOpen:t,onClose:e,onSuccess:r,team:n}){var b,v;const[s,a]=x.useState({}),[i,l]=x.useState([]),[c,d]=x.useState(!1),[u,h]=x.useState(!1),[f,m]=x.useState({}),{error:p}=nr();x.useEffect(()=>{var w;t&&n&&(g(),a({name:n.name,code:n.code,description:n.description,color:n.color,managerId:(w=n.manager)==null?void 0:w.id}),m({}))},[t,n]);const g=async()=>{try{h(!0);const w=await Gs.getUsers({isActive:!0,limit:100});l(w.users||[])}catch(w){console.error("Error loading users:",w),p("Error al cargar usuarios")}finally{h(!1)}},y=async()=>{var w,k,N;if(n)try{d(!0),m({});const S={};if((w=s.name)!=null&&w.trim()||(S.name="El nombre es requerido"),(k=s.code)!=null&&k.trim()||(S.code="El cdigo es requerido"),s.code&&(s.code.length<2||s.code.length>10)&&(S.code="El cdigo debe tener entre 2 y 10 caracteres"),Object.keys(S).length>0){m(S);return}await Pl.updateTeam(n.id,s),r()}catch(S){console.error("Error updating team:",S),(N=S.message)!=null&&N.includes("cdigo ya existe")?m({code:"Este cdigo ya est en uso por otro equipo"}):p(S.message||"Error al actualizar el equipo")}finally{d(!1)}};return!t||!n?null:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:n.color+"20"},children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Editar Equipo"}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.name," (",n.code,")"]})]})]}),o.jsx(ae,{variant:"ghost",size:"sm",onClick:e,children:o.jsx(O,{action:"close",size:"sm"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Equipo *"}),o.jsx(ft,{type:"text",value:s.name||"",onChange:w=>a(k=>({...k,name:w.target.value})),placeholder:"Ej: Equipo de Desarrollo",error:f.name,disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo del Equipo *"}),o.jsx(ft,{type:"text",value:s.code||"",onChange:w=>a(k=>({...k,code:w.target.value.toUpperCase()})),placeholder:"Ej: DEV001",error:f.code,disabled:c,maxLength:10}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cdigo nico para identificar el equipo (2-10 caracteres)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:s.description||"",onChange:w=>a(k=>({...k,description:w.target.value})),placeholder:"Descripcin del equipo y sus responsabilidades...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none",rows:3,disabled:c})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color del Equipo"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:lge.map(w=>o.jsx("button",{type:"button",onClick:()=>a(k=>({...k,color:w.value})),className:`flex items-center justify-center p-3 rounded-lg border-2 transition-all ${s.color===w.value?"border-gray-900 dark:border-white ring-2 ring-blue-500":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,disabled:c,children:o.jsx("div",{className:`w-6 h-6 rounded-full ${w.bg}`})},w.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manager"}),u?o.jsxs("div",{className:"flex items-center justify-center p-4",children:[o.jsx(Lr,{size:"sm"}),o.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Cargando usuarios..."})]}):o.jsxs(Kt,{value:s.managerId||"",onChange:w=>a(k=>({...k,managerId:w.target.value||void 0})),disabled:c,children:[o.jsx("option",{value:"",children:"Sin manager asignado"}),i.map(w=>o.jsxs("option",{value:w.id,children:[w.fullName," (",w.email,")"]},w.id))]})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado Actual"}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Estado:"}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:n.isActive?"Activo":"Inactivo"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Miembros:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.memberCount||0})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:c,children:"Cancelar"}),o.jsx(ae,{onClick:y,disabled:c||!((b=s.name)!=null&&b.trim())||!((v=s.code)!=null&&v.trim()),className:"flex items-center gap-2",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"save",size:"sm"}),"Guardar Cambios"]})})]})]})})}function dge({isOpen:t,onClose:e,onSuccess:r,team:n}){var u;const[s,a]=x.useState(!1),{error:i,success:l}=nr(),c=async()=>{if(n)try{a(!0),await Pl.deleteTeam(n.id),l("Equipo eliminado exitosamente"),r()}catch(h){console.error("Error deleting team:",h),i(h.message||"Error al eliminar el equipo")}finally{a(!1)}};if(!t||!n)return null;const d=n.memberCount&&n.memberCount>0;return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:o.jsx(O,{action:"warning",size:"md",color:"red"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Eliminar Equipo"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin no se puede deshacer"})]})]}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-3",children:["Ests seguro de que quieres eliminar el equipo"," ",o.jsxs("strong",{children:['"',n.name,'"']}),"?"]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:n.color}}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cdigo: ",n.code]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Miembros:"}),o.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-white",children:n.memberCount||0})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Manager:"}),o.jsx("span",{className:"ml-1 font-medium text-gray-900 dark:text-white",children:((u=n.manager)==null?void 0:u.fullName)||"Sin asignar"})]})]})]}),d&&o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(O,{action:"warning",size:"sm",color:"yellow"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Atencin!"}),o.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:["Este equipo tiene"," ",o.jsxs("strong",{children:[n.memberCount," miembro(s)"]})," ","asignado(s). Al eliminarlo, todos los miembros perdern su asignacin al equipo."]})]})]})}),o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(O,{action:"error",size:"sm",color:"red"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Consecuencias de eliminar este equipo:"}),o.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 mt-1 list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Se eliminar permanentemente del sistema"}),o.jsx("li",{children:"Todos los miembros sern desasignados"}),o.jsx("li",{children:"Se perder el historial del equipo"}),o.jsx("li",{children:"Esta accin no se puede deshacer"})]})]})]})})]})}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:s,children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:c,disabled:s,className:"flex items-center gap-2",children:s?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Eliminando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"delete",size:"sm"}),"Eliminar Equipo"]})})]})]})})}var dj=(t=>(t.MANAGER="manager",t.LEAD="lead",t.SENIOR="senior",t.MEMBER="member",t))(dj||{});const rv=[{value:"member",label:"Miembro",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",level:1,description:"Miembro regular del equipo"},{value:"senior",label:"Senior",color:"bg-purple-100 text-purple-800 dark:bg-purple-700 dark:text-purple-300",level:2,description:"Miembro senior con experiencia"},{value:"lead",label:"Lead",color:"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-300",level:3,description:"Lder tcnico del equipo"},{value:"manager",label:"Manager",color:"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-300",level:4,description:"Gerente del equipo"}];rv.reduce((t,e)=>(t[e.value]=e.label,t),{});const uge=()=>{const[t,e]=x.useState(rv);x.useEffect(()=>{const f=localStorage.getItem("customTeamRoles");if(f)try{const m=JSON.parse(f);e(m)}catch(m){console.error("Error loading custom team roles:",m),e(rv)}},[]);const r=f=>{e(f),localStorage.setItem("customTeamRoles",JSON.stringify(f))},n=f=>t.find(m=>m.value===f),s=f=>{var m;return((m=n(f))==null?void 0:m.label)||f},a=f=>{var m;return((m=n(f))==null?void 0:m.color)||"bg-gray-100 text-gray-800"},i=f=>{var m;return((m=n(f))==null?void 0:m.level)||0};return{roles:t,getRoleConfig:n,getRoleLabel:s,getRoleColor:a,getRoleLevel:i,isHigherRole:(f,m)=>i(f)>i(m),canManageRole:(f,m)=>{const p=i(f),g=i(m);return p>=g},addCustomRole:f=>{const m=[...t,f].sort((p,g)=>p.level-g.level);r(m)},removeCustomRole:f=>{const m=t.filter(p=>p.value!==f);r(m)},resetToDefaults:()=>{localStorage.removeItem("customTeamRoles"),e(rv)}}};function hge({isOpen:t,onClose:e,onConfirm:r,memberName:n,memberRole:s,teamName:a}){const[i,l]=x.useState(!1),c=async()=>{try{l(!0),await r(),e()}catch(d){console.error("Error in modal:",d)}finally{l(!1)}};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:o.jsx(O,{action:"delete",size:"md",color:"red"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Remover Miembro del Equipo"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin afectar los permisos del usuario"})]})]}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["Ests seguro de que quieres remover a"," ",o.jsx("strong",{children:n})," del equipo?"]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:o.jsx(O,{action:"user",size:"md",color:"blue"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:n}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Rol: ",s]}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Equipo: ",a]})]})]})}),o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(O,{action:"warning",size:"sm",color:"yellow"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Consecuencias de remover este miembro:"}),o.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1 list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Perder acceso a los recursos del equipo"}),o.jsx("li",{children:"Se actualizarn sus permisos automticamente"}),o.jsx("li",{children:"Puede ser re-agregado posteriormente si es necesario"})]})]})]})})]})}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:i,children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:c,disabled:i,className:"flex items-center gap-2",children:i?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Removiendo..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"delete",size:"sm"}),"Remover del Equipo"]})})]})]})}):null}function fge({isOpen:t,onClose:e,onSuccess:r,team:n}){var J;const[s,a]=x.useState([]),[i,l]=x.useState([]),[c,d]=x.useState(!1),[u,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(dj.MEMBER),[v,w]=x.useState(!1),[k,N]=x.useState(null),{error:S,success:C}=nr(),{roles:E}=uge();x.useEffect(()=>{t&&n&&(T(),R())},[t,n]);const T=async()=>{if(n)try{h(!0),console.log(` Cargando miembros para el equipo: ${n.id} - ${n.name}`);const _=await Pl.getTeamMembers(n.id);console.log(" Miembros cargados exitosamente:",{teamId:n.id,membersCount:Array.isArray(_)?_.length:0,members:_}),a(Array.isArray(_)?_:[])}catch(_){console.error(" Error loading members:",{teamId:n.id,teamName:n.name,error:_}),S("Error al cargar los miembros del equipo"),a([])}finally{h(!1)}},R=async()=>{try{const _=await Gs.getUsers();l(Array.isArray(_.users)?_.users:[])}catch(_){console.error("Error loading users:",_),S("Error al cargar usuarios"),l([])}},B=async()=>{if(!n||!p||c)return;const _={userId:p,role:y};try{d(!0),await Pl.addTeamMember(n.id,_),C("Miembro agregado exitosamente"),g(""),b(dj.MEMBER),w(!1),await T()}catch(H){console.error(" Error detallado al agregar miembro:",{error:H,message:H.message,team:n.id,memberData:_});let P="Error al agregar miembro";H.message&&(H.message.includes("ya es miembro activo")?P="Este usuario ya es miembro activo del equipo":H.message.includes("no existe o no est activo")?P="El usuario seleccionado no est disponible":H.message.includes("ya tiene un manager activo")?P="El equipo ya tiene un manager. Solo puede haber uno por equipo.":P=H.message),S(P)}finally{d(!1)}},M=async _=>{if(!n||c)return;const H=s.find(P=>P.userId===_);H&&N(H)},L=async()=>{if(!(!n||!k))try{d(!0),await Pl.removeTeamMember(n.id,k.userId),C("Miembro removido del equipo"),await T()}catch(_){console.error("Error removing member:",_),S(_.message||"Error al remover miembro")}finally{d(!1),N(null)}},V=async(_,H)=>{if(!(!n||c))try{d(!0),await Pl.updateMemberRole(n.id,_,H),C("Rol actualizado exitosamente"),await T()}catch(P){console.error("Error changing role:",P),S(P.message||"Error al cambiar rol")}finally{d(!1)}};if(!t||!n)return null;const ee=new Set(Array.isArray(s)?s.map(_=>_.userId):[]),Q=(Array.isArray(i)?i:[]).filter(_=>{var H;return!ee.has(_.id)&&((H=_.fullName)==null?void 0:H.toLowerCase().includes(f.toLowerCase()))});return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:n.color+"20"},children:o.jsx(O,{action:"users",size:"md"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Gestionar Miembros"}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.name," - ",Array.isArray(s)?s.length:0," ","miembro(s)"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ae,{variant:"ghost",size:"sm",onClick:T,disabled:u,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",title:"Recargar miembros",children:[o.jsx(O,{action:"view",size:"sm"}),u?"Cargando...":"Actualizar"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>w(!v),className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Agregar Miembro"]}),o.jsx(ae,{variant:"ghost",size:"sm",onClick:e,children:o.jsx(O,{action:"close",size:"sm"})})]})]}),o.jsxs("div",{className:"flex flex-col h-[calc(90vh-80px)]",children:[v&&o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:"Agregar Nuevo Miembro"}),o.jsxs("div",{className:"flex gap-4 items-end",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar Usuario"}),o.jsx(ft,{type:"text",placeholder:"Buscar por nombre...",value:f,onChange:_=>m(_.target.value)})]}),o.jsxs("div",{className:"w-48",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Usuario"}),o.jsxs(Kt,{value:p,onChange:_=>g(_.target.value),disabled:c,children:[o.jsx("option",{value:"",children:"Seleccionar usuario..."}),Q.map(_=>o.jsx("option",{value:_.id,children:_.fullName},_.id))]})]}),o.jsxs("div",{className:"w-32",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rol"}),o.jsx(Kt,{value:y,onChange:_=>b(_.target.value),disabled:c,children:E.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs(ae,{onClick:B,disabled:!p||c,className:"flex items-center gap-2",children:[c?o.jsx(Lr,{size:"sm"}):o.jsx(O,{action:"add",size:"sm"}),"Agregar"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:u?o.jsxs("div",{className:"flex items-center justify-center p-8",children:[o.jsx(Lr,{size:"lg"}),o.jsx("span",{className:"ml-3 text-gray-500",children:"Cargando miembros..."})]}):!Array.isArray(s)||s.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[o.jsx(O,{action:"users",size:"xl",className:"text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Sin miembros asignados"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Este equipo no tiene miembros asignados todava."}),o.jsxs(ae,{onClick:()=>w(!0),className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Agregar Primer Miembro"]})]}):o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"space-y-4",children:Array.isArray(s)&&s.map(_=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-full",children:o.jsx(O,{action:"user",size:"sm",color:"blue"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:_.user.fullName}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_.user.email}),_.user.role&&o.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Rol del sistema: ",_.user.role.name]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Rol:"}),o.jsx(Kt,{value:_.role,onChange:H=>V(_.userId,H.target.value),disabled:c,className:"w-32",children:E.map(H=>o.jsx("option",{value:H.value,children:H.label},H.value))})]}),o.jsx("div",{className:"flex items-center gap-1",children:o.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Desde:"," ",new Date(_.joinedAt).toLocaleDateString()]})}),o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>M(_.userId),disabled:c,className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:o.jsx(O,{action:"delete",size:"sm"})})]})]},_.id))})})})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,children:"Cerrar"}),o.jsxs(ae,{onClick:r,className:"flex items-center gap-2",children:[o.jsx(O,{action:"save",size:"sm"}),"Finalizar"]})]})]})}),k&&o.jsx(hge,{isOpen:!!k,onClose:()=>N(null),onConfirm:L,memberName:((J=k.user)==null?void 0:J.fullName)||"",memberRole:k.role,teamName:(n==null?void 0:n.name)||""})]})}function mge({teams:t,isLoading:e,onRefresh:r}){const[n,s]=x.useState({isOpen:!1,team:null}),[a,i]=x.useState({isOpen:!1,team:null}),[l,c]=x.useState({isOpen:!1,team:null}),[d,u]=x.useState(null),{success:h,error:f}=nr(),m=v=>{s({isOpen:!0,team:v})},p=v=>{i({isOpen:!0,team:v})},g=v=>{c({isOpen:!0,team:v})},y=async v=>{const w=v.isActive?"desactivar":"activar";try{u(v.id),await Pl.toggleTeamStatus(v.id),h(`Equipo ${v.isActive?"desactivado":"activado"} exitosamente`),r()}catch(k){console.error("Error toggling team status:",k),f(k.message||`Error al ${w} el equipo`)}finally{u(null)}},b=()=>{s({isOpen:!1,team:null}),i({isOpen:!1,team:null}),c({isOpen:!1,team:null})};return e?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),o.jsx("div",{className:"space-y-3",children:[...Array(5)].map((v,w)=>o.jsx("div",{className:"h-16 bg-gray-100 dark:bg-gray-700 rounded"},w))})]})})}):(t==null?void 0:t.length)===0?o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(O,{action:"users",size:"xl",className:"mx-auto mb-4",color:"neutral"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No hay equipos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No se encontraron equipos que coincidan con los filtros aplicados."})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Equipo"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Manager"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Miembros"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Creado"}),o.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:t==null?void 0:t.map(v=>{var w;return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`p-2 rounded-lg mr-3 ${v.isActive?"bg-blue-100 dark:bg-blue-900":"bg-gray-100 dark:bg-gray-700"}`,children:o.jsx(O,{action:"users",size:"sm",color:v.isActive?"blue":"neutral"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Cdigo: ",v.code]})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs",children:v.description?o.jsx("span",{title:v.description,children:v.description.length>50?`${v.description.slice(0,50)}...`:v.description}):o.jsx("span",{className:"text-gray-400 dark:text-gray-500 italic",children:"Sin descripcin"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1 bg-green-100 dark:bg-green-900 rounded-full mr-2",children:o.jsx(O,{action:"shield",size:"xs",color:"success"})}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:((w=v.manager)==null?void 0:w.fullName)||"Sin asignar"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:v.isActive?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"view",size:"xs",className:"mr-1"}),"Activo"]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"hide",size:"xs",className:"mr-1"}),"Inactivo"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-900 dark:text-white",children:[o.jsx(O,{action:"user",size:"sm",className:"mr-1",color:"neutral"}),v.memberCount||0]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(v.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>y(v),disabled:d===v.id,className:`transition-colors p-1 rounded ${d===v.id?"text-gray-400 cursor-not-allowed":v.isActive?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:d===v.id?"Procesando...":v.isActive?"Desactivar equipo":"Activar equipo",children:d===v.id?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):v.isActive?o.jsx(O,{action:"warning",size:"sm"}):o.jsx(O,{action:"view",size:"sm"})}),o.jsx("button",{onClick:()=>g(v),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 transition-colors p-1 rounded",title:"Gestionar miembros",children:o.jsx(O,{action:"users",size:"sm"})}),o.jsx("button",{onClick:()=>m(v),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300 transition-colors p-1 rounded",title:"Editar equipo",children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsx("button",{onClick:()=>p(v),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors p-1 rounded",title:"Eliminar equipo",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},v.id)})})]})})}),n.isOpen&&o.jsx(cge,{isOpen:n.isOpen,onClose:b,onSuccess:()=>{b(),r()},team:n.team}),a.isOpen&&o.jsx(dge,{isOpen:a.isOpen,onClose:b,onSuccess:()=>{b(),r()},team:a.team}),l.isOpen&&o.jsx(fge,{isOpen:l.isOpen,onClose:b,onSuccess:()=>{b(),r()},team:l.team})]})}const JC=[{value:"#3B82F6",label:"Azul",bg:"bg-blue-500"},{value:"#10B981",label:"Verde",bg:"bg-green-500"},{value:"#F59E0B",label:"Amarillo",bg:"bg-yellow-500"},{value:"#EF4444",label:"Rojo",bg:"bg-red-500"},{value:"#8B5CF6",label:"Prpura",bg:"bg-purple-500"},{value:"#06B6D4",label:"Cian",bg:"bg-cyan-500"},{value:"#F97316",label:"Naranja",bg:"bg-orange-500"},{value:"#84CC16",label:"Lima",bg:"bg-lime-500"}];function pge({isOpen:t,onClose:e,onSuccess:r}){const[n,s]=x.useState({name:"",code:"",description:"",color:JC[0].value,managerId:void 0}),[a,i]=x.useState([]),[l,c]=x.useState(!1),[d,u]=x.useState(!1),[h,f]=x.useState({}),{error:m}=nr();x.useEffect(()=>{t&&(p(),s({name:"",code:"",description:"",color:JC[0].value,managerId:void 0}),f({}))},[t]);const p=async()=>{try{u(!0);const v=await Gs.getUsers({isActive:!0,limit:100});i(v.users||[])}catch(v){console.error("Error loading users:",v),m("Error al cargar usuarios")}finally{u(!1)}},g=v=>v.toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,6),y=v=>{s(w=>({...w,name:v,code:w.code||g(v)})),h.name&&f(w=>({...w,name:""}))},b=async()=>{var v;try{c(!0),f({});const w={};if(n.name.trim()||(w.name="El nombre es requerido"),n.code.trim()||(w.code="El cdigo es requerido"),(n.code.length<2||n.code.length>10)&&(w.code="El cdigo debe tener entre 2 y 10 caracteres"),Object.keys(w).length>0){f(w);return}await Pl.createTeam(n),r()}catch(w){console.error("Error creating team:",w),(v=w.message)!=null&&v.includes("cdigo ya existe")?f({code:"Este cdigo ya est en uso"}):m(w.message||"Error al crear el equipo")}finally{c(!1)}};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:o.jsx(O,{action:"users",size:"sm",color:"blue"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Crear Nuevo Equipo"})]}),o.jsx(ae,{variant:"ghost",size:"sm",onClick:e,children:o.jsx(O,{action:"close",size:"sm"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Equipo *"}),o.jsx(ft,{type:"text",value:n.name,onChange:v=>y(v.target.value),placeholder:"Ej: Equipo de Desarrollo",error:h.name,disabled:l})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cdigo del Equipo *"}),o.jsx(ft,{type:"text",value:n.code,onChange:v=>s(w=>({...w,code:v.target.value.toUpperCase()})),placeholder:"Ej: DEV001",error:h.code,disabled:l,maxLength:10}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cdigo nico para identificar el equipo (2-10 caracteres)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:n.description,onChange:v=>s(w=>({...w,description:v.target.value})),placeholder:"Descripcin del equipo y sus responsabilidades...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white resize-none",rows:3,disabled:l})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color del Equipo"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:JC.map(v=>o.jsx("button",{type:"button",onClick:()=>s(w=>({...w,color:v.value})),className:`flex items-center justify-center p-3 rounded-lg border-2 transition-all ${n.color===v.value?"border-gray-900 dark:border-white ring-2 ring-blue-500":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,disabled:l,children:o.jsx("div",{className:`w-6 h-6 rounded-full ${v.bg}`})},v.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manager (Opcional)"}),d?o.jsxs("div",{className:"flex items-center justify-center p-4",children:[o.jsx(Lr,{size:"sm"}),o.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Cargando usuarios..."})]}):o.jsxs(Kt,{value:n.managerId||"",onChange:v=>s(w=>({...w,managerId:v.target.value||void 0})),disabled:l,children:[o.jsx("option",{value:"",children:"Seleccionar manager..."}),a.map(v=>o.jsxs("option",{value:v.id,children:[v.fullName," (",v.email,")"]},v.id))]})]})]}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:l,children:"Cancelar"}),o.jsx(ae,{onClick:b,disabled:l||!n.name.trim()||!n.code.trim(),className:"flex items-center gap-2",children:l?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Creando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"add",size:"sm"}),"Crear Equipo"]})})]})]})}):null}const gge=()=>{var b,v;const[t,e]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState(null),[i,l]=x.useState({page:1,limit:10}),[c,d]=x.useState(!1),{success:u}=nr();x.useEffect(()=>{h()},[i]);const h=async()=>{try{n(!0),a(null);const w=await Pl.getTeams(i);e(w||[])}catch(w){a(w instanceof Error?w.message:"Error al cargar equipos"),e([]),console.error(" Error loading teams:",w)}finally{n(!1)}},f=w=>{l(k=>({...k,search:w,page:1}))},m=(w,k)=>{l(N=>({...N,[w]:k,page:1}))},p=()=>{d(!0)},g=()=>{d(!1),h(),u("Equipo creado exitosamente")},y=()=>{h()};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[o.jsx(O,{action:"users",size:"lg"}),"Gestin de Equipos"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los equipos de trabajo y sus miembros"})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsxs(ae,{onClick:p,className:"flex items-center gap-2",children:[o.jsx(O,{action:"add",size:"sm"}),"Nuevo Equipo"]})})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx(ft,{type:"text",placeholder:"Buscar por nombre o cdigo...",value:i.search||"",onChange:w=>f(w.target.value),className:"pl-10"})]})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsxs(Kt,{value:((b=i.isActive)==null?void 0:b.toString())||"",onChange:w=>m("isActive",w.target.value?w.target.value==="true":void 0),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})}),o.jsx("div",{className:"w-full sm:w-32",children:o.jsxs(Kt,{value:((v=i.limit)==null?void 0:v.toString())||"10",onChange:w=>m("limit",parseInt(w.target.value)),children:[o.jsx("option",{value:"10",children:"10 por pgina"}),o.jsx("option",{value:"20",children:"20 por pgina"}),o.jsx("option",{value:"50",children:"50 por pgina"})]})}),o.jsxs(ae,{variant:"secondary",className:"flex items-center gap-2 whitespace-nowrap",onClick:y,children:[o.jsx(O,{action:"filter",size:"sm"}),"Actualizar"]})]})}),s&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:o.jsx("p",{className:"text-red-800 dark:text-red-200",children:s})}),r&&o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Lr,{size:"lg"})}),!r&&o.jsx(mge,{teams:t,isLoading:r,onRefresh:y}),c&&o.jsx(pge,{isOpen:c,onClose:()=>d(!1),onSuccess:g})]})},xge=()=>{const{success:t,error:e}=nr(),[r,n]=x.useState([]),[s,a]=x.useState([]),[i,l]=x.useState(!0),[c,d]=x.useState(null),[u,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState([]),[v,w]=x.useState([]);x.useEffect(()=>{k()},[]);const k=async()=>{try{l(!0),n([{id:"1",name:"Administrador",description:"Acceso completo al sistema",isActive:!0},{id:"2",name:"Usuario",description:"Acceso bsico",isActive:!0}]),a([{id:"1",name:"users.read_all",module:"users",action:"read",scope:"all",isActive:!0}])}catch{e("Error al cargar datos")}finally{l(!1)}},N=M=>{d(M),S(M.id)},S=async M=>{try{const L=s;d(V=>V?{...V,permissions:L}:null)}catch{e("Error al cargar permisos del rol")}},C=M=>{d(M);const L=s.filter(V=>{var ee;return!((ee=M.permissions)!=null&&ee.some(Q=>Q.id===V.id))});b(L),w([]),h(!0)},E=M=>{w(L=>L.includes(M)?L.filter(V=>V!==M):[...L,M])},T=async()=>{if(!(!c||v.length===0))try{t(`${v.length} permisos asignados al rol ${c.name}`),h(!1),S(c.id)}catch{e("Error al asignar permisos")}},R=async(M,L)=>{try{t("Permiso revocado exitosamente"),S(M)}catch{e("Error al revocar permiso")}},B=y.filter(M=>{var ee;const L=M.name.toLowerCase().includes(f.toLowerCase())||((ee=M.description)==null?void 0:ee.toLowerCase().includes(f.toLowerCase())),V=!p||M.module===p;return L&&V});return i?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(O,{action:"user",size:"lg",color:"purple"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Asignacin de Permisos por Rol"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona los permisos asignados a cada rol"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Roles"})}),o.jsx("div",{className:"p-6 space-y-3",children:r.map(M=>o.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${(c==null?void 0:c.id)===M.id?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>N(M),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.description})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(la,{variant:M.isActive?"success":"danger",children:M.isActive?"Activo":"Inactivo"}),o.jsx(O,{action:"arrowRight",size:"sm",color:"neutral"})]})]})},M.id))})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c?`Permisos de ${c.name}`:"Selecciona un rol"}),c&&o.jsxs(ae,{onClick:()=>C(c),size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Asignar Permisos"]})]})}),o.jsx("div",{className:"p-6",children:c?o.jsx("div",{className:"space-y-3",children:c.permissions&&c.permissions.length>0?c.permissions.map(M=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[M.module,"  ",M.action," "," ",M.scope]})]}),o.jsx(ae,{onClick:()=>R(c.id,M.id),size:"sm",variant:"danger",children:"Revocar"})]},M.id)):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(O,{action:"shield",size:"xl",color:"neutral",className:"mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Este rol no tiene permisos asignados"})]})}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(O,{action:"user",size:"xl",color:"neutral",className:"mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Selecciona un rol para ver sus permisos"})]})})]})]}),u&&c&&o.jsx(At,{isOpen:u,onClose:()=>h(!1),title:`Asignar Permisos a ${c.name}`,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(ft,{type:"text",placeholder:"Buscar permisos...",value:f,onChange:M=>m(M.target.value)}),o.jsxs(Kt,{value:p,onChange:M=>g(M.target.value),children:[o.jsx("option",{value:"",children:"Todos los mdulos"}),[...new Set(y.map(M=>M.module))].map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:B.map(M=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsx("input",{type:"checkbox",id:`perm-${M.id}`,checked:v.includes(M.id),onChange:()=>E(M.id),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:`perm-${M.id}`,className:"flex-1 cursor-pointer",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[M.module,"  ",M.action," "," ",M.scope]}),M.description&&o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M.description})]})]},M.id))}),o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.length," permisos seleccionados"]}),o.jsxs("div",{className:"space-x-3",children:[o.jsx(ae,{onClick:()=>h(!1),variant:"ghost",children:"Cancelar"}),o.jsx(ae,{onClick:T,disabled:v.length===0,className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Asignar Permisos"})]})]})]})})]})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),tl=(t,e)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:l="",children:c,...d},u)=>x.createElement("svg",{ref:u,...yge,width:s,height:s,stroke:n,strokeWidth:i?Number(a)*24/Number(s):a,className:["lucide",`lucide-${vge(t)}`,l].join(" "),...d},[...e.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=tl("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=tl("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=tl("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=tl("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kge=tl("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=tl("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=tl("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cge=tl("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=tl("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nge=tl("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Sge=()=>{const t=[{module:"usuarios",description:"Gestin de usuarios del sistema",actions:[{action:"read",description:"Ver informacin de usuarios"},{action:"create",description:"Crear nuevos usuarios"},{action:"update",description:"Modificar usuarios existentes"},{action:"delete",description:"Eliminar usuarios"},{action:"manage",description:"Administracin completa de usuarios"}]},{module:"roles",description:"Administracin de roles y permisos",actions:[{action:"read",description:"Ver roles del sistema"},{action:"create",description:"Crear nuevos roles"},{action:"update",description:"Modificar roles existentes"},{action:"delete",description:"Eliminar roles"},{action:"assign",description:"Asignar roles a usuarios"}]},{module:"permisos",description:"Gestin del sistema de permisos",actions:[{action:"read",description:"Ver permisos del sistema"},{action:"create",description:"Crear nuevos permisos"},{action:"update",description:"Modificar permisos existentes"},{action:"delete",description:"Eliminar permisos"},{action:"assign",description:"Asignar permisos a roles"}]}],e=[{name:"own",description:"Solo recursos propios",color:"blue",icon:"lock",example:"Un usuario solo puede ver sus propios casos"},{name:"team",description:"Recursos del equipo",color:"yellow",icon:"user",example:"Un supervisor puede ver casos de su equipo"},{name:"all",description:"Todos los recursos",color:"green",icon:"unlock",example:"Un administrador puede ver todos los casos"}],r=n=>{const s={blue:"bg-blue-50 text-blue-600 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-400 dark:border-yellow-800",green:"bg-green-50 text-green-600 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800",purple:"bg-purple-50 text-purple-600 border-purple-200 dark:bg-purple-900/20 dark:text-purple-400 dark:border-purple-800"};return s[n]||s.blue};return o.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[o.jsx(WO,{className:"h-10 w-10 text-purple-600 dark:text-purple-400"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gua del Sistema de Permisos"})]}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Comprende cmo funciona nuestro sistema de permisos basado en roles"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(wge,{className:"h-5 w-5 mr-2 text-purple-600"}),"Conceptos Bsicos"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[o.jsx(qO,{className:"h-4 w-4 mr-2 text-blue-600"}),"Usuarios"]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Personas que utilizan el sistema. Cada usuario tiene uno o ms roles asignados."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[o.jsx(Nge,{className:"h-4 w-4 mr-2 text-green-600"}),"Roles"]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conjuntos de permisos que definen qu puede hacer un usuario en el sistema."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center",children:[o.jsx(WO,{className:"h-4 w-4 mr-2 text-purple-600"}),"Permisos"]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Autorizaciones especficas para realizar acciones en mdulos del sistema."})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(HO,{className:"h-5 w-5 mr-2 text-purple-600"}),"Estructura de Permisos"]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium text-purple-900 dark:text-purple-100 mb-2",children:"Formato: mdulo.accin_scope"}),o.jsxs("p",{className:"text-purple-700 dark:text-purple-300 text-sm",children:["Ejemplo:"," ",o.jsx("code",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"usuarios.read_all"})]}),o.jsx("p",{className:"text-purple-600 dark:text-purple-400 text-xs mt-2",children:"Permite leer todos los usuarios del sistema"})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(VO,{className:"h-5 w-5 mr-2 text-purple-600"}),"Niveles de Acceso (Scopes)"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map(n=>o.jsxs("div",{className:`border rounded-lg p-4 ${r(n.color)}`,children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx(O,{action:n.icon,size:"sm"}),o.jsx("h3",{className:"font-medium",children:n.name})]}),o.jsx("p",{className:"text-sm mb-3",children:n.description}),o.jsxs("div",{className:"text-xs opacity-75",children:[o.jsx("strong",{children:"Ejemplo:"})," ",n.example]})]},n.name))})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(O,{action:"folder",size:"sm",color:"purple",className:"mr-2"}),"Mdulos y Acciones Disponibles"]}),o.jsx("div",{className:"space-y-6",children:t.map(n=>o.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:n.module}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n.description})]}),o.jsx("div",{className:"p-6",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.actions.map(s=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[s.action==="read"&&o.jsx(VO,{className:"h-4 w-4 text-blue-600"}),s.action==="create"&&o.jsx(d0,{className:"h-4 w-4 text-green-600"}),s.action==="update"&&o.jsx(kge,{className:"h-4 w-4 text-yellow-600"}),s.action==="delete"&&o.jsx(Cge,{className:"h-4 w-4 text-red-600"}),s.action==="manage"&&o.jsx(HO,{className:"h-4 w-4 text-purple-600"}),s.action==="assign"&&o.jsx(qO,{className:"h-4 w-4 text-indigo-600"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.action}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.description})]})]},s.action))})})]},n.module))})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[o.jsx(d0,{className:"h-5 w-5 mr-2 text-purple-600"}),"Mejores Prcticas"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(d0,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Principio del Mnimo Privilegio"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Asigna solo los permisos necesarios para que el usuario pueda realizar su trabajo."})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(d0,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Uso de Roles"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Agrupa permisos relacionados en roles para facilitar la administracin."})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(d0,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Revisin Regular"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revisa peridicamente los permisos asignados para mantener la seguridad."})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(bge,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Cuidado con Permisos Amplios"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Los permisos con scope "all" deben asignarse cuidadosamente.'})]})]})]})]})]})};function _B(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=_B(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function rl(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=_B(t))&&(n&&(n+=" "),n+=e);return n}const DT="-",Ege=t=>{const e=Tge(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(DT);return l[0]===""&&l.length!==1&&l.shift(),AB(l,e)||jge(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},AB=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?AB(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(DT);return(i=e.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},GO=/^\[(.+)\]$/,jge=t=>{if(GO.test(t)){const e=GO.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},Tge=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return Age(Object.entries(t.classGroups),r).forEach(([a,i])=>{uj(i,n,a,e)}),n},uj=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:KO(e,s);a.classGroupId=r;return}if(typeof s=="function"){if(_ge(s)){uj(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,i])=>{uj(i,KO(e,a),r,n)})})},KO=(t,e)=>{let r=t;return e.split(DT).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},_ge=t=>t.isThemeGetter,Age=(t,e)=>e?t.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[e+i,l])):a);return[r,s]}):t,Mge=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(a,i)=>{r.set(a,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let i=r.get(a);if(i!==void 0)return i;if((i=n.get(a))!==void 0)return s(a,i),i},set(a,i){r.has(a)?r.set(a,i):s(a,i)}}},MB="!",Oge=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],a=e.length,i=l=>{const c=[];let d=0,u=0,h;for(let y=0;y<l.length;y++){let b=l[y];if(d===0){if(b===s&&(n||l.slice(y,y+a)===e)){c.push(l.slice(u,y)),u=y+a;continue}if(b==="/"){h=y;continue}}b==="["?d++:b==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(MB),p=m?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},Rge=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},Pge=t=>({cache:Mge(t.cacheSize),parseClassName:Oge(t),...Ege(t)}),Ige=/\s+/,Dge=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,a=[],i=t.trim().split(Ige);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(d);let p=!!m,g=n(p?f.substring(0,m):f);if(!g){if(!p){l=d+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=d+(l.length>0?" "+l:l);continue}p=!1}const y=Rge(u).join(":"),b=h?y+MB:y,v=b+g;if(a.includes(v))continue;a.push(v);const w=s(g,p);for(let k=0;k<w.length;++k){const N=w[k];a.push(b+N)}l=d+(l.length>0?" "+l:l)}return l};function Lge(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=OB(e))&&(n&&(n+=" "),n+=r);return n}const OB=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=OB(t[n]))&&(r&&(r+=" "),r+=e);return r};function $ge(t,...e){let r,n,s,a=i;function i(c){const d=e.reduce((u,h)=>h(u),t());return r=Pge(d),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=Dge(c,r);return s(c,u),u}return function(){return a(Lge.apply(null,arguments))}}const $r=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},RB=/^\[(?:([a-z-]+):)?(.+)\]$/i,Fge=/^\d+\/\d+$/,Bge=new Set(["px","full","screen"]),zge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uge=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Wge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fl=t=>tm(t)||Bge.has(t)||Fge.test(t),bc=t=>vp(t,"length",Qge),tm=t=>!!t&&!Number.isNaN(Number(t)),QC=t=>vp(t,"number",tm),u0=t=>!!t&&Number.isInteger(Number(t)),qge=t=>t.endsWith("%")&&tm(t.slice(0,-1)),Mt=t=>RB.test(t),wc=t=>zge.test(t),Gge=new Set(["length","size","percentage"]),Kge=t=>vp(t,Gge,PB),Zge=t=>vp(t,"position",PB),Yge=new Set(["image","url"]),Xge=t=>vp(t,Yge,txe),Jge=t=>vp(t,"",exe),h0=()=>!0,vp=(t,e,r)=>{const n=RB.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},Qge=t=>Uge.test(t)&&!Vge.test(t),PB=()=>!1,exe=t=>Hge.test(t),txe=t=>Wge.test(t),rxe=()=>{const t=$r("colors"),e=$r("spacing"),r=$r("blur"),n=$r("brightness"),s=$r("borderColor"),a=$r("borderRadius"),i=$r("borderSpacing"),l=$r("borderWidth"),c=$r("contrast"),d=$r("grayscale"),u=$r("hueRotate"),h=$r("invert"),f=$r("gap"),m=$r("gradientColorStops"),p=$r("gradientColorStopPositions"),g=$r("inset"),y=$r("margin"),b=$r("opacity"),v=$r("padding"),w=$r("saturate"),k=$r("scale"),N=$r("sepia"),S=$r("skew"),C=$r("space"),E=$r("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",Mt,e],M=()=>[Mt,e],L=()=>["",fl,bc],V=()=>["auto",tm,Mt],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Mt],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[tm,Mt];return{cacheSize:500,separator:":",theme:{colors:[h0],spacing:[fl,bc],blur:["none","",wc,Mt],brightness:K(),borderColor:[t],borderRadius:["none","","full",wc,Mt],borderSpacing:M(),borderWidth:L(),contrast:K(),grayscale:H(),hueRotate:K(),invert:H(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[qge,bc],inset:B(),margin:B(),opacity:K(),padding:M(),saturate:K(),scale:K(),sepia:H(),skew:K(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Mt]}],container:["container"],columns:[{columns:[wc]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),Mt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",u0,Mt]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Mt]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",u0,Mt]}],"grid-cols":[{"grid-cols":[h0]}],"col-start-end":[{col:["auto",{span:["full",u0,Mt]},Mt]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[h0]}],"row-start-end":[{row:["auto",{span:[u0,Mt]},Mt]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Mt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Mt,e]}],"min-w":[{"min-w":[Mt,e,"min","max","fit"]}],"max-w":[{"max-w":[Mt,e,"none","full","min","max","fit","prose",{screen:[wc]},wc]}],h:[{h:[Mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wc,bc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",QC]}],"font-family":[{font:[h0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Mt]}],"line-clamp":[{"line-clamp":["none",tm,QC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fl,Mt]}],"list-image":[{"list-image":["none",Mt]}],"list-style-type":[{list:["none","disc","decimal",Mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fl,bc]}],"underline-offset":[{"underline-offset":["auto",fl,Mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),Zge]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Kge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Xge]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[fl,Mt]}],"outline-w":[{outline:[fl,bc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[fl,bc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wc,Jge]}],"shadow-color":[{shadow:[h0]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wc,Mt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Mt]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Mt]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[u0,Mt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fl,bc,QC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nxe=$ge(rxe);function sxe(...t){return nxe(rl(t))}const hr=x.forwardRef(({className:t,...e},r)=>o.jsx("label",{ref:r,className:sxe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));hr.displayName="Label";function axe({isOpen:t,onClose:e,onConfirm:r,permissionName:n,permissionDescription:s}){const[a,i]=x.useState(!1),l=async()=>{try{i(!0),await r(),e()}catch(c){console.error("Error in modal:",c)}finally{i(!1)}};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:o.jsx(O,{action:"delete",size:"md",color:"red"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Eliminar Permiso"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin afectar el sistema de permisos"})]})]}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:["Ests seguro de que quieres eliminar el permiso"," ",o.jsx("strong",{children:n}),"?"]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:o.jsx(O,{action:"lock",size:"md",color:"blue"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:n}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:s})]})]})}),o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(O,{action:"warning",size:"sm",color:"red"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Consecuencias de eliminar este permiso:"}),o.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 mt-1 list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Se revocar de todos los roles que lo tengan asignado"}),o.jsx("li",{children:"Los usuarios perdern acceso a las funcionalidades relacionadas"}),o.jsx("li",{children:"Esta accin no se puede deshacer fcilmente"}),o.jsx("li",{children:"Puede afectar el funcionamiento del sistema"})]})]})]})})]})}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:a,children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:l,disabled:a,className:"flex items-center gap-2",children:a?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Eliminando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"delete",size:"sm"}),"Eliminar Permiso"]})})]})]})}):null}const ixe=()=>{const[t,e]=x.useState([]),[r,n]=x.useState([]),[s,a]=x.useState(""),[i,l]=x.useState(new Set),[c,d]=x.useState(!0),[u,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(""),[v,w]=x.useState(""),{success:k,error:N}=nr();x.useEffect(()=>{S()},[]),x.useEffect(()=>{s?C():l(new Set)},[s]);const S=async()=>{d(!0);try{const[_,H]=await Promise.all([Gf.getAllRoles(),Gf.getAllPermissions()]);if(_.success&&_.data){const P=_.data.roles||_.data;e(Array.isArray(P)?P.filter(K=>K.isActive):[])}else e([]);if(H.success&&H.data){const P=H.data;n(Array.isArray(P)?P.filter(K=>K.isActive):[])}else n([])}catch(_){const H=_ instanceof Error?_.message:String(_);H.includes("404")?console.info(" Algunos endpoints no estn disponibles, usando datos de fallback"):(console.error("Error loading data:",_),N(`Error al cargar datos: ${H}`)),e([]),n([])}finally{d(!1)}},C=async()=>{if(s)try{const _=await oo.getRolePermissions(s);if(_.data){const H=_.data.map(P=>P.id);l(new Set(H))}else if(Array.isArray(_)){const H=_.map(P=>P.id);l(new Set(H))}}catch(_){(_ instanceof Error?_.message:String(_)).includes("404")?console.info(" API endpoint no disponible, usando permisos vacos como fallback"):(console.error("Error loading role permissions:",_),N("Error al cargar permisos del rol")),l(new Set)}},E=(_,H)=>{const P=new Set(i);H?P.add(_):P.delete(_),l(P)},T=(_,H)=>{const P=new Set(i);_.forEach(K=>{H?P.delete(K.id):P.add(K.id)}),l(P)},R=async()=>{if(!s){N("Por favor selecciona un rol");return}h(!0);try{const _=Array.from(i);try{await oo.assignPermissions(s,{permissionIds:_}),k("Permisos asignados correctamente")}catch(H){const P=H instanceof Error?H.message:String(H);if(P.includes("404")||P.includes("Not Found"))console.info(" API de asignacin no disponible, simulando guardado:",{roleId:s,permissionIds:_}),k("Permisos configurados (funcionalidad en desarrollo)");else throw H}}catch(_){console.error("Error saving permissions:",_);const H=_ instanceof Error?_.message:String(_);N(`Error al guardar los cambios: ${H}`)}finally{h(!1)}},B=r.filter(_=>{const H=_.name.toLowerCase().includes(f.toLowerCase()),P=p?_.module===p:!0,K=y?_.action===y:!0,F=v?_.scope===v:!0;return H&&P&&K&&F}),M=B.reduce((_,H)=>(_[H.module]||(_[H.module]=[]),_[H.module].push(H),_),{}),L=[...new Set(r.map(_=>_.module))],V=[...new Set(r.map(_=>_.action))],ee=[...new Set(r.map(_=>_.scope))],Q=_=>{switch(_.toLowerCase()){case"global":return o.jsx(O,{action:"globe",size:"xs"});case"own":return o.jsx(O,{action:"lock",size:"xs"});case"department":return o.jsx(O,{action:"users",size:"xs"});default:return o.jsx(O,{action:"shield",size:"xs"})}},J=_=>{switch(_.toLowerCase()){case"global":return"success";case"own":return"warning";case"department":return"info";default:return"secondary"}};return c?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Seleccionar Rol"}),o.jsxs(Kt,{value:s,onChange:_=>a(_.target.value),children:[o.jsx("option",{value:"",children:"-- Seleccionar Rol --"}),t.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs(ae,{onClick:S,variant:"secondary",size:"sm",className:"mt-7",children:[o.jsx(O,{action:"loading",size:"sm",className:"mr-2"}),"Actualizar"]})]}),s&&o.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Permisos seleccionados: ",i.size," de"," ",B.length]}),o.jsx(ae,{onClick:R,disabled:u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"loading",size:"sm",className:"mr-2 animate-spin"}),"Guardando..."]}):"Guardar Cambios"})]})]}),s&&o.jsxs(o.Fragment,{children:[o.jsx(Pa,{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Buscar"}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{action:"search",size:"sm",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx(ft,{value:f,onChange:_=>m(_.target.value),placeholder:"Buscar permisos...",className:"pl-10"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mdulo"}),o.jsxs(Kt,{value:p,onChange:_=>g(_.target.value),children:[o.jsx("option",{value:"",children:"Todos los mdulos"}),L.map(_=>o.jsx("option",{value:_,children:_},_))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Accin"}),o.jsxs(Kt,{value:y,onChange:_=>b(_.target.value),children:[o.jsx("option",{value:"",children:"Todas las acciones"}),V.map(_=>o.jsx("option",{value:_,children:_},_))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Alcance"}),o.jsxs(Kt,{value:v,onChange:_=>w(_.target.value),children:[o.jsx("option",{value:"",children:"Todos los alcances"}),ee.map(_=>o.jsx("option",{value:_,children:_},_))]})]})]})}),o.jsx("div",{className:"space-y-4",children:Object.entries(M).map(([_,H])=>{const P=H.every(K=>i.has(K.id));return o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:_}),o.jsxs(la,{variant:"secondary",children:[H.length," permisos"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ae,{variant:"secondary",size:"sm",onClick:()=>T(H,P),children:P?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"error",size:"sm",className:"mr-1"}),"Deseleccionar Todo"]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"success",size:"sm",className:"mr-1"}),"Seleccionar Todo"]})}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[H.filter(K=>i.has(K.id)).length," ","/ ",H.length," seleccionados"]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:H.map(K=>{const F=i.has(K.id);return o.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${F?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[o.jsx("input",{type:"checkbox",checked:F,onChange:ne=>E(K.id,ne.target.checked),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:K.action}),o.jsxs(la,{variant:J(K.scope),className:"flex items-center gap-1",children:[Q(K.scope),K.scope]})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:K.description||K.name})]})]},K.id)})})]},_)})})]})]})},oxe=()=>{const[t,e]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState("permissions"),[i,l]=x.useState({name:"",module:"",action:"",scope:"",description:"",isActive:!0}),[c,d]=x.useState(!1),[u,h]=x.useState(null),[f,m]=x.useState(null),{success:p,error:g}=nr();x.useEffect(()=>{y()},[]);const y=async()=>{try{n(!0);const C=await Gf.getAllPermissions();e(C.data||[])}catch(C){console.error("Error al cargar permisos:",C),g("Error al cargar los permisos")}finally{n(!1)}},b=async()=>{try{d(!1),l({name:"",module:"",action:"",scope:"",description:"",isActive:!0}),p("Funcionalidad en desarrollo - Permiso no creado")}catch(C){console.error("Error al crear permiso:",C),g("Error al crear el permiso")}},v=C=>{h(C),l({name:C.name,module:C.module,action:C.action,scope:C.scope,description:C.description||"",isActive:C.isActive}),d(!0)},w=async()=>{if(u)try{d(!1),h(null),l({name:"",module:"",action:"",scope:"",description:"",isActive:!0}),p("Funcionalidad en desarrollo - Permiso no actualizado")}catch(C){console.error("Error al actualizar permiso:",C),g("Error al actualizar el permiso")}},k=C=>{m(C)},N=async()=>{if(f)try{p("Funcionalidad en desarrollo - Permiso no eliminado"),m(null)}catch(C){console.error("Error al eliminar permiso:",C),g("Error al eliminar el permiso")}},S=()=>{m(null)};return o.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:o.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestin de Permisos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Administra los permisos y asignaciones del sistema"})]})}),o.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>a("permissions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="permissions"?"border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[o.jsx(O,{action:"shield",size:"sm",className:"inline mr-2"}),"Permisos"]}),o.jsxs("button",{onClick:()=>a("assign"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="assign"?"border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[o.jsx(O,{action:"changePassword",size:"sm",className:"inline mr-2"}),"Asignar Permisos"]}),o.jsxs("button",{onClick:()=>a("guide"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="guide"?"border-blue-500 text-blue-600 dark:text-blue-400 dark:border-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200"}`,children:[o.jsx(O,{action:"settings",size:"sm",className:"inline mr-2"}),"Gua"]})]})}),s==="permissions"&&o.jsxs(Pa,{className:"p-6 dark:bg-gray-800",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Permisos del Sistema"}),o.jsxs(ae,{onClick:()=>{h(null),l({name:"",module:"",action:"",scope:"",description:"",isActive:!0}),d(!0)},className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Nuevo Permiso"]})]}),r?o.jsx("div",{className:"text-center py-8",children:o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Cargando permisos..."})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mdulo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Accin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Alcance"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(C=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.name})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(la,{variant:"secondary",className:"dark:bg-gray-600 dark:text-gray-200",children:C.module})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:C.action})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(la,{variant:C.scope==="global"?"primary":"secondary",className:C.scope==="global"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"dark:border-gray-500 dark:text-gray-300",children:C.scope})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:C.isActive?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>v(C),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar permiso",children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsx("button",{onClick:()=>k(C),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar permiso",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},C.id))})]})})]}),s==="assign"&&o.jsx(ixe,{}),s==="guide"&&o.jsxs(Pa,{className:"p-6 dark:bg-gray-800",children:[o.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-900 dark:text-white",children:"Gua del Sistema de Permisos"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Estructura de Permisos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"Los permisos siguen una estructura jerrquica basada en mdulos:"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:o.jsx("code",{className:"text-sm text-gray-800 dark:text-gray-200",children:`{
  "name": "users.create",
  "module": "users",
  "action": "create",
  "scope": "global" | "own" | "department"
}`})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Ejemplos de Permisos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Usuarios"}),o.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-200 mt-2 space-y-1",children:[o.jsx("li",{children:" users.create - Crear usuarios"}),o.jsx("li",{children:" users.read - Ver usuarios"}),o.jsx("li",{children:" users.update - Actualizar usuarios"}),o.jsx("li",{children:" users.delete - Eliminar usuarios"})]})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-green-900 dark:text-green-100",children:"Casos"}),o.jsxs("ul",{className:"text-sm text-green-700 dark:text-green-200 mt-2 space-y-1",children:[o.jsx("li",{children:" cases.create - Crear casos"}),o.jsx("li",{children:" cases.read - Ver casos"}),o.jsx("li",{children:" cases.update - Actualizar casos"}),o.jsx("li",{children:" cases.delete - Eliminar casos"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Alcances de Permisos"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[o.jsxs("p",{children:[o.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Global:"})," ","Puede realizar la accin en todos los registros del sistema"]}),o.jsxs("p",{children:[o.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Propio:"})," ","Solo puede realizar la accin en sus propios registros"]}),o.jsxs("p",{children:[o.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Departamento:"})," ","Puede realizar la accin en registros de su departamento"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Asignacin de Permisos a Roles"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:'Para asignar permisos a roles, utiliza la pestaa "Asignar Permisos". Selecciona un rol existente y marca los permisos que deseas asignar. Los permisos estn organizados por mdulos para facilitar su gestin.'})]})]})]}),o.jsxs(At,{isOpen:c,onClose:()=>d(!1),title:u?"Editar Permiso":"Crear Nuevo Permiso",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(hr,{htmlFor:"name",className:"dark:text-gray-200",children:"Nombre del Permiso"}),o.jsx(ft,{id:"name",value:i.name,onChange:C=>l({...i,name:C.target.value}),placeholder:"ej: users.create",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx(hr,{htmlFor:"module",className:"dark:text-gray-200",children:"Mdulo"}),o.jsx(ft,{id:"module",value:i.module,onChange:C=>l({...i,module:C.target.value}),placeholder:"ej: users",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx(hr,{htmlFor:"action",className:"dark:text-gray-200",children:"Accin"}),o.jsx(ft,{id:"action",value:i.action,onChange:C=>l({...i,action:C.target.value}),placeholder:"ej: create",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx(hr,{htmlFor:"scope",className:"dark:text-gray-200",children:"Alcance"}),o.jsxs(Kt,{value:i.scope,onChange:C=>l({...i,scope:C.target.value}),children:[o.jsx("option",{value:"",children:"Seleccionar alcance"}),o.jsx("option",{value:"global",children:"Global"}),o.jsx("option",{value:"own",children:"Propio"}),o.jsx("option",{value:"department",children:"Departamento"})]})]}),o.jsxs("div",{children:[o.jsx(hr,{htmlFor:"description",className:"dark:text-gray-200",children:"Descripcin (opcional)"}),o.jsx(ft,{id:"description",value:i.description,onChange:C=>l({...i,description:C.target.value}),placeholder:"Descripcin del permiso",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:i.isActive,onChange:C=>l({...i,isActive:C.target.checked}),className:"dark:bg-gray-700 dark:border-gray-600"}),o.jsx(hr,{htmlFor:"isActive",className:"dark:text-gray-200",children:"Permiso activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[o.jsx(ae,{variant:"secondary",onClick:()=>d(!1),className:"dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:"Cancelar"}),o.jsxs(ae,{onClick:u?w:b,className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600",children:[u?"Actualizar":"Crear"," Permiso"]})]})]}),f&&o.jsx(axe,{isOpen:!!f,onClose:S,onConfirm:N,permissionName:f.name,permissionDescription:f.description||""})]})})};class lxe{async getAllTodos(e){const r=new URLSearchParams;e&&Object.entries(e).forEach(([s,a])=>{a!=null&&r.append(s,String(a))});const n=await Ze.authenticatedRequest(`/todos${r.toString()?`?${r.toString()}`:""}`);if(!n.success)throw new Error(n.message||"Error al obtener TODOs");return n.data||[]}async getTodoById(e){const r=await Ze.authenticatedRequest(`/todos/${e}`);if(!r.success)throw new Error(r.message||"Error al obtener TODO");if(!r.data)throw new Error("TODO no encontrado");return r.data}async createTodo(e){const r=await Ze.authenticatedRequest("/todos",{method:"POST",body:JSON.stringify(e)});if(!r.success)throw new Error(r.message||"Error al crear TODO");if(!r.data)throw new Error("Error al crear TODO");return r.data}async updateTodo(e,r){const n=await Ze.authenticatedRequest(`/todos/${e}`,{method:"PUT",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Error al actualizar TODO");if(!n.data)throw new Error("Error al actualizar TODO");return n.data}async deleteTodo(e){const r=await Ze.authenticatedRequest(`/todos/${e}`,{method:"DELETE"});if(!r.success)throw new Error(r.message||"Error al eliminar TODO")}async completeTodo(e){const r=await Ze.authenticatedRequest(`/todos/${e}/complete`,{method:"PATCH"});if(!r.success)throw new Error(r.message||"Error al completar TODO");if(!r.data)throw new Error("Error al completar TODO");return r.data}async reopenTodo(e){const r=await Ze.authenticatedRequest(`/todos/${e}/reactivate`,{method:"PATCH"});if(!r.success)throw new Error(r.message||"Error al reabrir TODO");if(!r.data)throw new Error("Error al reabrir TODO");return r.data}async archiveTodo(e){const r=await Ze.authenticatedRequest(`/todos/${e}/archive`,{method:"PATCH"});if(!r.success)throw new Error(r.message||"Error al archivar TODO");if(!r.data)throw new Error("Error al archivar TODO");return r.data}async getPriorities(){const e=await Ze.authenticatedRequest("/todos/priorities");if(!e.success)throw new Error(e.message||"Error al obtener prioridades");return e.data||[]}async createPriority(e){const r=await Ze.authenticatedRequest("/todos/priorities",{method:"POST",body:JSON.stringify(e)});if(!r.success)throw new Error(r.message||"Error al crear prioridad");if(!r.data)throw new Error("Error al crear prioridad");return r.data}async updatePriority(e,r){const n=await Ze.authenticatedRequest(`/todos/priorities/${e}`,{method:"PUT",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Error al actualizar prioridad");if(!n.data)throw new Error("Error al actualizar prioridad");return n.data}async deletePriority(e){const r=await Ze.authenticatedRequest(`/todos/priorities/${e}`,{method:"DELETE"});if(!r.success)throw new Error(r.message||"Error al eliminar prioridad")}async startTodoTimer(e){const r=await Ze.authenticatedRequest(`/todos/${e}/start-timer`,{method:"POST"});if(!r.success)throw new Error(r.message||"Error al iniciar timer");if(!r.data)throw new Error("Error al iniciar timer");return r.data}async pauseTodoTimer(e){const r=await Ze.authenticatedRequest(`/todos/${e}/pause-timer`,{method:"POST"});if(!r.success)throw new Error(r.message||"Error al pausar timer");if(!r.data)throw new Error("Error al pausar timer");return r.data}async getTodoTimeEntries(e){const r=await Ze.authenticatedRequest(`/todos/${e}/time-entries`);if(!r.success)throw new Error(r.message||"Error al obtener entradas de tiempo");return r.data||[]}async addManualTimeEntry(e,r){const n=await Ze.authenticatedRequest(`/todos/${e}/manual-time-entries`,{method:"POST",body:JSON.stringify(r)});if(!n.success)throw new Error(n.message||"Error al agregar tiempo manual");if(!n.data)throw new Error("Error al agregar tiempo manual");return n.data}async getTimeEntries(e){const r=await Ze.authenticatedRequest(`/todos/${e}/time-entries`);if(!r.success)throw new Error(r.message||"Error al obtener entradas de tiempo");return r.data||[]}async getManualTimeEntries(e){const r=await Ze.authenticatedRequest(`/todos/${e}/manual-time-entries`);if(!r.success)throw new Error(r.message||"Error al obtener entradas de tiempo manual");return r.data||[]}async deleteTimeEntry(e,r){const n=await Ze.authenticatedRequest(`/todos/${e}/time-entries/${r}`,{method:"DELETE"});if(!n.success)throw new Error(n.message||"Error al eliminar entrada de tiempo")}async deleteManualTimeEntry(e,r){const n=await Ze.authenticatedRequest(`/todos/${e}/manual-time-entries/${r}`,{method:"DELETE"});if(!n.success)throw new Error(n.message||"Error al eliminar entrada de tiempo manual")}async getTodoMetrics(e){const r=new URLSearchParams;e&&Object.entries(e).forEach(([s,a])=>{a!=null&&r.append(s,String(a))});const n=await Ze.authenticatedRequest(`/todos/metrics${r.toString()?`?${r.toString()}`:""}`);if(!n.success)throw new Error(n.message||"Error al obtener mtricas");if(!n.data)throw new Error("Error al obtener mtricas");return n.data}}const bs=new lxe,LT=t=>{const[e,r]=x.useState([]),[n,s]=x.useState([]),[a,i]=x.useState(!0),[l,c]=x.useState(null),[d,u]=x.useState({}),h=x.useCallback(async M=>{try{i(!0),c(null);const L=M||d,V=await bs.getAllTodos(L);r(V)}catch(L){c(L instanceof Error?L.message:"Error al cargar TODOs"),console.error("Error fetching todos:",L)}finally{i(!1)}},[d]),f=x.useCallback(async()=>{try{const M=await bs.getPriorities();s(M)}catch(M){console.error("Error fetching priorities:",M)}},[]),m=x.useCallback(async M=>{try{c(null);const L=await bs.createTodo(M);return r(V=>[L,...V]),L}catch(L){return c(L instanceof Error?L.message:"Error al crear TODO"),console.error("Error creating todo:",L),null}},[]),p=x.useCallback(async(M,L)=>{try{c(null);const V=await bs.updateTodo(M,L);return r(ee=>ee.map(Q=>Q.id===M?V:Q)),V}catch(V){return c(V instanceof Error?V.message:"Error al actualizar TODO"),console.error("Error updating todo:",V),null}},[]),g=x.useCallback(async M=>{try{return c(null),await bs.deleteTodo(M),r(L=>L.filter(V=>V.id!==M)),!0}catch(L){return c(L instanceof Error?L.message:"Error al eliminar TODO"),console.error("Error deleting todo:",L),!1}},[]),y=x.useCallback(async M=>{try{c(null);const L=await bs.completeTodo(M);return r(V=>V.map(ee=>ee.id===M?L:ee)),L}catch(L){return c(L instanceof Error?L.message:"Error al completar TODO"),console.error("Error completing todo:",L),null}},[]),b=x.useCallback(async M=>{try{c(null);const L=await bs.reopenTodo(M);return r(V=>V.map(ee=>ee.id===M?L:ee)),L}catch(L){return c(L instanceof Error?L.message:"Error al reactivar TODO"),console.error("Error reactivating todo:",L),null}},[]),v=x.useCallback(async M=>{try{c(null);const L=await bs.startTodoTimer(M);return L?(r(V=>V.map(ee=>ee.id===M?L:ee)),L):null}catch(L){return c(L instanceof Error?L.message:"Error al iniciar timer"),console.error("Error starting timer:",L),null}},[]),w=x.useCallback(async M=>{try{c(null);const L=await bs.pauseTodoTimer(M);return L?(r(V=>V.map(ee=>ee.id===M?L:ee)),L):null}catch(L){return c(L instanceof Error?L.message:"Error al pausar timer"),console.error("Error pausing timer:",L),null}},[]),k=x.useCallback(async(M,L)=>{try{c(null);const V=await bs.addManualTimeEntry(M,L);return await h(d),V}catch(V){return c(V instanceof Error?V.message:"Error al agregar tiempo manual"),console.error("Error adding manual time entry:",V),null}},[d,h]),N=x.useCallback(async M=>{try{return c(null),await bs.getTodoTimeEntries(M)}catch(L){return c(L instanceof Error?L.message:"Error al obtener entradas de tiempo manual"),console.error("Error getting manual time entries:",L),[]}},[]),S=x.useCallback(async(M,L)=>{try{return c(null),await bs.deleteManualTimeEntry(M,L),await h(d),!0}catch(V){return c(V instanceof Error?V.message:"Error al eliminar entrada de tiempo manual"),console.error("Error deleting manual time entry:",V),!1}},[d,h]),C=x.useCallback(async(M,L)=>{try{return c(null),await bs.deleteTimeEntry(M,L),await h(d),!0}catch(V){return c(V instanceof Error?V.message:"Error al eliminar entrada de tiempo"),console.error("Error deleting time entry:",V),!1}},[d,h]),E=x.useCallback(M=>{u(M),h(M)},[h]),T=x.useCallback(()=>{const M={};u(M),h(M)},[h]),R=x.useCallback(()=>{const M=new Date().toISOString().split("T")[0];return e.filter(L=>!L.isCompleted&&L.dueDate&&L.dueDate<M)},[e]),B=x.useCallback(M=>e.filter(L=>L.priorityId===M),[e]);return x.useEffect(()=>{h(),f()},[]),{todos:e,priorities:n,loading:a,error:l,filters:d,fetchTodos:h,createTodo:m,updateTodo:p,deleteTodo:g,completeTodo:y,reactivateTodo:b,startTimer:v,pauseTimer:w,addManualTimeEntry:k,getManualTimeEntries:N,deleteManualTimeEntry:S,deleteTimeEntry:C,applyFilters:E,clearFilters:T,getOverdueTodos:R,getTodosByPriority:B,totalTodos:e.length,activeTodos:e.filter(M=>!M.isCompleted).length,completedTodos:e.filter(M=>M.isCompleted).length,overdueTodos:R().length}},cxe=({isOpen:t,onClose:e,todoId:r,todoTitle:n})=>{const{addManualTimeEntry:s,deleteManualTimeEntry:a,deleteTimeEntry:i}=LT(),{success:l,error:c}=nr(),{confirmDelete:d,modalState:u,modalHandlers:h}=hc(),{user:f}=ti(),[m,p]=x.useState(!1),[g,y]=x.useState([]),[b,v]=x.useState([]),[w,k]=x.useState(!1),[N,S]=x.useState({description:"",hours:0,minutes:0,date:C()});function C(){const _=new Date,H=_.getFullYear(),P=String(_.getMonth()+1).padStart(2,"0"),K=String(_.getDate()).padStart(2,"0");return`${H}-${P}-${K}`}const E=_=>{if(_<60)return`${_}m`;const H=Math.floor(_/60),P=_%60;return P>0?`${H}h ${P}m`:`${H}h`},T=_=>new Date(_).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=_=>new Date(_).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});x.useEffect(()=>{t&&B()},[t,r]);const B=async()=>{if(r){k(!0);try{const[_,H]=await Promise.all([bs.getTimeEntries(r),bs.getManualTimeEntries(r)]);y(_||[]),v(H||[])}catch(_){console.error("Error loading time data:",_)}finally{k(!1)}}},M=async()=>{const _=N.hours*60+N.minutes;if(_<=0){c("Error de validacin","Debe especificar un tiempo vlido");return}if(!N.description.trim()){c("Error de validacin","Debe proporcionar una descripcin");return}try{const H=f==null?void 0:f.id;if(!H){c("Error","No se pudo obtener el usuario actual");return}await s(r,{description:N.description,durationMinutes:_,date:N.date,userId:H})?(l("Tiempo agregado","El tiempo manual se ha agregado correctamente"),S({description:"",hours:0,minutes:0,date:C()}),p(!1),await B()):c("Error","No se pudo agregar el tiempo manual")}catch(H){console.error("Error adding manual time:",H),c("Error","Ocurri un error al agregar el tiempo manual")}},L=async _=>{if(await d("esta entrada de tiempo manual"))try{await a(r,_)?(l("Entrada eliminada","La entrada de tiempo manual se elimin correctamente"),await B()):c("Error","No se pudo eliminar la entrada de tiempo manual")}catch(P){console.error("Error al eliminar entrada manual:",P),c("Error","Ocurri un error al eliminar la entrada de tiempo manual")}},V=async _=>{if(await d("esta entrada de tiempo del cronmetro"))try{await i(r,_)?(l("Entrada eliminada","La entrada de tiempo del cronmetro se elimin correctamente"),await B()):c("Error","No se pudo eliminar la entrada de tiempo del cronmetro")}catch(P){console.error("Error al eliminar entrada de tiempo:",P),c("Error","Ocurri un error al eliminar la entrada de tiempo del cronmetro")}},ee=g.reduce((_,H)=>{const P=H.durationMinutes||0;return _+P},0),Q=b.reduce((_,H)=>{const P=H.durationMinutes||0;return _+P},0),J=ee+Q;return o.jsxs(At,{isOpen:t,onClose:e,title:`Detalles de Tiempo - ${n}`,size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:E(J)}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tiempo Total"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:E(ee)}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automtico"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:E(Q)}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Manual"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"0h"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimado"})]})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Historial de Tiempo"}),o.jsxs(ae,{onClick:()=>p(!m),variant:"secondary",size:"sm",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Agregar Tiempo Manual"]})]}),m&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 space-y-4",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Agregar Tiempo Manual"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha"}),o.jsx(ft,{type:"date",value:N.date,onChange:_=>S(H=>({...H,date:_.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Horas"}),o.jsx(ft,{type:"number",min:"0",max:"23",value:N.hours,onChange:_=>S(H=>({...H,hours:parseInt(_.target.value)||0}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minutos"}),o.jsx(ft,{type:"number",min:"0",max:"59",value:N.minutes,onChange:_=>S(H=>({...H,minutes:parseInt(_.target.value)||0}))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx(ft,{type:"text",placeholder:"Descripcin del trabajo realizado...",value:N.description,onChange:_=>S(H=>({...H,description:_.target.value}))})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(ae,{onClick:M,children:"Agregar"}),o.jsx(ae,{variant:"secondary",onClick:()=>p(!1),children:"Cancelar"})]})]}),o.jsx("div",{className:"space-y-4",children:w?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Cargando..."})]}):o.jsxs(o.Fragment,{children:[g.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:["Tiempo Automtico (",g.length," entradas)"]}),o.jsx("div",{className:"space-y-2",children:g.map(_=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(O,{action:"time",size:"md",color:"success"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:E(_.durationMinutes||0)}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[_.startTime&&T(_.startTime)," -"," ",_.endTime&&T(_.endTime)]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automtico"}),o.jsx(ae,{onClick:()=>V(_.id),variant:"ghost",size:"xs",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1",title:"Eliminar entrada de tiempo",children:o.jsx(O,{action:"delete",size:"sm"})})]})]},_.id))})]}),b.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:["Tiempo Manual (",b.length," entradas)"]}),o.jsx("div",{className:"space-y-2",children:b.map(_=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(O,{action:"calendar",size:"md",color:"warning"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:E(_.durationMinutes)}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[R(_.date)," -"," ",_.description]})]})]}),o.jsx(ae,{onClick:()=>L(_.id),variant:"ghost",size:"xs",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1",children:o.jsx(O,{action:"delete",size:"sm"})})]},_.id))})]}),g.length===0&&b.length===0&&o.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"time",size:"xl",className:"mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No hay entradas de tiempo registradas"})]})]})})]}),u.options&&o.jsx(Ha,{isOpen:u.isOpen,onClose:h.onClose,onConfirm:h.onConfirm,title:u.options.title,message:u.options.message,confirmText:u.options.confirmText,cancelText:u.options.cancelText,type:u.options.type})]})},IB=({todo:t,onStartTimer:e,onPauseTimer:r,onComplete:n,onEdit:s,onDelete:a,onArchive:i,showActions:l=!0})=>{var B,M,L,V,ee,Q,J,_,H,P;const[c,d]=x.useState(!1),[u,h]=x.useState("00:00:00"),{success:f,error:m}=nr(),{confirmDelete:p,modalState:g,modalHandlers:y}=hc(),b=((B=t.control)==null?void 0:B.isTimerActive)||!1;x.useEffect(()=>{var F;let K;return b&&((F=t.control)!=null&&F.timerStartAt)?K=window.setInterval(()=>{const ne=new Date(t.control.timerStartAt),Z=Math.floor((new Date().getTime()-ne.getTime())/1e3),oe=Math.floor(Z/3600),ue=Math.floor(Z%3600/60),_e=Z%60;h(`${oe.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}:${_e.toString().padStart(2,"0")}`)},1e3):h("00:00:00"),()=>{K&&window.clearInterval(K)}},[b,(M=t.control)==null?void 0:M.timerStartAt]);const v=K=>{switch(K){case 1:return"#10B981";case 2:return"#06B6D4";case 3:return"#F59E0B";case 4:return"#EF4444";case 5:return"#DC2626";default:return"#6B7280"}},w=()=>{var K;return t.isCompleted?"border-l-green-500":b?"border-l-yellow-500":k()?"border-l-red-500":`border-l-[${v(((K=t.priority)==null?void 0:K.level)||1)}]`},k=()=>!t.dueDate||t.isCompleted?!1:new Date(t.dueDate)<new Date,N=K=>{if(K<60)return`${K}m`;const F=Math.floor(K/60),ne=K%60;return ne>0?`${F}h ${ne}m`:`${F}h`},S=K=>new Date(K).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),C=async()=>{e&&await e(t.id)},E=async()=>{r&&await r(t.id)},T=async()=>{n&&await n(t.id)},R=async()=>{if(await p("TODO")&&a)try{await a(t.id),f("TODO eliminado exitosamente")}catch{m("Error al eliminar el TODO")}};return o.jsxs("div",{className:`
        bg-white dark:bg-gray-800 rounded-lg border-l-4 shadow-sm hover:shadow-md transition-shadow
        ${t.isCompleted?"opacity-75":""}
        ${w()}
      `,children:[o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${t.isCompleted?"line-through":""}`,children:t.title})}),t.description&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.description})]}),o.jsx("span",{className:`
              px-2 py-1 text-xs font-medium rounded-full
              ${t.isCompleted?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":b?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}
            `,children:t.isCompleted?"Completado":b?"En curso":"Pendiente"})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:v(((L=t.priority)==null?void 0:L.level)||1)}}),o.jsx("span",{children:((V=t.priority)==null?void 0:V.name)||"Sin prioridad"}),((ee=t.priority)==null?void 0:ee.level)&&o.jsxs("span",{className:"ml-1 text-xs",children:["(Nivel ",t.priority.level,")"]})]}),t.assignedUser&&o.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(O,{action:"user",size:"sm",className:"mr-2"}),o.jsx("span",{children:t.assignedUser.fullName||t.assignedUser.email})]}),t.dueDate&&o.jsxs("div",{className:`flex items-center text-sm ${k()?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:[o.jsx(O,{action:"calendar",size:"sm",className:"mr-2"}),o.jsx("span",{children:S(t.dueDate)}),k()&&o.jsx(O,{action:"warning",size:"sm",color:"danger",className:"ml-1"})]}),t.control&&o.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[o.jsx(O,{action:"time",size:"sm",className:"mr-2"}),o.jsxs("span",{children:[N(t.control.totalTimeMinutes||0),t.estimatedMinutes&&t.estimatedMinutes>0&&o.jsxs("span",{className:"text-xs ml-1",children:["/ ",N(t.estimatedMinutes)," estimado"]})]}),b&&o.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 border border-green-200 dark:border-green-700",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"}),o.jsxs("span",{className:"font-mono",children:["+",u]})]})]})]}),l&&o.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsxs("div",{className:"flex flex-wrap gap-2 min-w-0",children:[t.control&&!t.isCompleted&&o.jsx(o.Fragment,{children:b?o.jsxs(ae,{onClick:E,variant:"secondary",size:"sm",className:"flex-shrink-0",children:[o.jsx(O,{action:"pause",size:"sm",className:"mr-1"}),"Pausar"]}):o.jsxs(ae,{onClick:C,variant:"secondary",size:"sm",className:"flex-shrink-0",children:[o.jsx(O,{action:"play",size:"sm",className:"mr-1"}),"Reanudar"]})}),t.control&&!t.isCompleted&&o.jsxs(ae,{onClick:T,variant:"success",size:"sm",className:"flex-shrink-0",children:[o.jsx(O,{action:"check",size:"sm",className:"mr-1"}),"Completar"]}),!t.control&&!t.isCompleted&&o.jsxs(ae,{onClick:C,variant:"primary",size:"sm",className:"inline-flex items-center flex-shrink-0",children:[o.jsx(O,{action:"play",size:"sm",className:"mr-1"}),"Comenzar"]})]}),o.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[o.jsx(ae,{variant:"ghost",size:"xs",onClick:()=>d(!0),className:"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 p-1",title:"Ver detalles de tiempo",children:o.jsx(O,{action:"view",size:"sm"})}),s&&o.jsx(ae,{variant:"ghost",size:"xs",onClick:()=>s(t),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-1",title:"Editar TODO",children:o.jsx(O,{action:"edit",size:"sm"})}),a&&!t.isCompleted&&o.jsx(ae,{variant:"ghost",size:"xs",onClick:R,className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400 p-1",title:"Eliminar TODO",children:o.jsx(O,{action:"delete",size:"sm"})}),i&&t.isCompleted&&o.jsx(ae,{variant:"ghost",size:"xs",onClick:()=>i(t),className:"text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400 p-1",title:"Archivar TODO",children:o.jsx(O,{action:"archive",size:"sm"})})]})]})})]}),c&&o.jsx(cxe,{isOpen:c,onClose:()=>d(!1),todoId:t.id,todoTitle:t.title}),o.jsx(Ha,{isOpen:g.isOpen,onClose:y.onClose,onConfirm:y.onConfirm,title:((Q=g.options)==null?void 0:Q.title)||"",message:((J=g.options)==null?void 0:J.message)||"",confirmText:(_=g.options)==null?void 0:_.confirmText,cancelText:(H=g.options)==null?void 0:H.cancelText,type:(P=g.options)==null?void 0:P.type})]})},DB=({priorities:t,onClose:e,onSubmit:r})=>{const[n,s]=x.useState([]),[a,i]=x.useState(!1),[l,c]=x.useState(!1),[d,u]=x.useState({title:"",description:"",priorityId:"",assignedUserId:"",estimatedMinutes:void 0,dueDate:void 0});x.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0);const v=(await Gs.getUsers()).users.filter(w=>w.isActive);s(v)}catch(b){console.error("Error loading users:",b)}finally{i(!1)}},f=async b=>{if(b.preventDefault(),!!d.title.trim()){c(!0);try{await r(d)}catch(v){console.error("Error creating TODO:",v)}finally{c(!1)}}},m=b=>{const{name:v,value:w}=b.target;u(k=>({...k,[v]:v==="estimatedMinutes"?w?parseInt(w,10):void 0:w}))},p=b=>{const v=b.target.value;u(w=>({...w,dueDate:v?`${v}T23:59:59`:void 0}))},g=()=>{u({title:"",description:"",priorityId:"",assignedUserId:"",estimatedMinutes:void 0,dueDate:void 0})},y=()=>{g(),e()};return o.jsx(At,{isOpen:!0,onClose:y,title:"Crear Nuevo TODO",size:"xl",children:o.jsxs("form",{onSubmit:f,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Ttulo ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"title",name:"title",value:d.title,onChange:m,required:!0,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",placeholder:"Ingrese el ttulo del TODO"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{id:"description",name:"description",rows:4,value:d.description,onChange:m,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all resize-none",placeholder:"Ingrese una descripcin detallada del TODO"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"priorityId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Prioridad ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{id:"priorityId",name:"priorityId",value:d.priorityId,onChange:m,required:!0,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",children:[o.jsx("option",{value:"",children:"Seleccione una prioridad"}),t.sort((b,v)=>b.level-v.level).map(b=>o.jsx("option",{value:b.id,children:b.name},b.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"assignedUserId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Asignar a ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{id:"assignedUserId",name:"assignedUserId",value:d.assignedUserId,onChange:m,required:!0,disabled:a,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("option",{value:"",children:a?"Cargando usuarios...":"Seleccione un usuario"}),n.map(b=>o.jsx("option",{value:b.id,children:b.fullName||b.email},b.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"estimatedMinutes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tiempo Estimado (minutos)"}),o.jsx("input",{type:"number",id:"estimatedMinutes",name:"estimatedMinutes",value:d.estimatedMinutes||"",onChange:m,min:"1",step:"1",className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",placeholder:"Ej: 60"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tiempo estimado para completar esta tarea"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Vencimiento"}),o.jsx("input",{type:"date",id:"dueDate",name:"dueDate",value:d.dueDate?d.dueDate.split("T")[0]:"",onChange:p,className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Fecha lmite para completar el TODO"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-6",children:[o.jsx(ae,{type:"button",variant:"ghost",onClick:y,disabled:l,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:l||!d.title.trim()||!d.priorityId||!d.assignedUserId,children:l?"Creando...":"Crear TODO"})]})]})})},LB=({todo:t,priorities:e,onClose:r,onSubmit:n})=>{var u,h;const[s,a]=x.useState({title:t.title,description:t.description||"",priorityId:((u=t.priority)==null?void 0:u.id)||"",dueDate:t.dueDate?new Date(t.dueDate).toISOString().slice(0,16):void 0}),[i,l]=x.useState(!1),c=async f=>{if(f.preventDefault(),!(!s.title||!s.title.trim())){l(!0);try{await n(s)}catch(m){console.error("Error updating TODO:",m)}finally{l(!1)}}},d=f=>{const{name:m,value:p}=f.target;a(g=>({...g,[m]:p}))};return o.jsx(At,{isOpen:!0,onClose:r,title:"Editar TODO",size:"lg",children:o.jsxs("form",{onSubmit:c,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ttulo *"}),o.jsx("input",{type:"text",id:"title",name:"title",value:s.title,onChange:d,required:!0,className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Ingresa el ttulo del TODO"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Descripcin"}),o.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:d,rows:3,className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",placeholder:"Descripcin opcional del TODO"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"priorityId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prioridad"}),o.jsxs("select",{id:"priorityId",name:"priorityId",value:s.priorityId,onChange:d,className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Seleccionar prioridad"}),e.map(f=>o.jsx("option",{value:f.id,children:f.name},f.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha de vencimiento"}),o.jsx("input",{type:"datetime-local",id:"dueDate",name:"dueDate",value:s.dueDate||"",onChange:d,className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Informacin actual"}),o.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsxs("p",{children:["Estado: ",t.isCompleted?"Completado":"Activo"]}),o.jsxs("p",{children:["Creado: ",new Date(t.createdAt).toLocaleString()]}),t.completedAt&&o.jsxs("p",{children:["Completado: ",new Date(t.completedAt).toLocaleString()]}),((h=t.control)==null?void 0:h.totalTimeMinutes)&&o.jsxs("p",{children:["Tiempo total: ",t.control.totalTimeMinutes," minutos"]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 mt-6",children:[o.jsx(ae,{type:"button",variant:"ghost",onClick:r,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:i||!s.title||!s.title.trim(),children:i?"Guardando...":"Guardar Cambios"})]})]})})},dxe=()=>{var ne,z,Z,oe,ue,_e;const{todos:t,priorities:e,loading:r,error:n,filters:s,createTodo:a,updateTodo:i,deleteTodo:l,completeTodo:c,startTimer:d,pauseTimer:u,applyFilters:h,clearFilters:f,totalTodos:m,activeTodos:p,completedTodos:g,overdueTodos:y,fetchTodos:b}=LT(),{success:v,error:w}=po(),{confirmDelete:k,modalState:N,modalHandlers:S}=hc(),[C,E]=x.useState(!1),[T,R]=x.useState(!1),[B,M]=x.useState(null),[L,V]=x.useState({});x.useEffect(()=>{b()},[]);const ee=async we=>{await a(we)&&E(!1)},Q=async(we,Y)=>{await i(we,Y)&&M(null)},J=async we=>{await k("TODO")&&(await l(we),v("TODO eliminado exitosamente"))},_=async we=>{await c(we)&&v("TODO completado exitosamente")},H=async we=>{await d(we)?v("Timer iniciado exitosamente"):w("Error al iniciar el timer")},P=async we=>{await u(we)?v("Timer pausado exitosamente"):w("Error al pausar el timer")},K=()=>{h(L),R(!1)},F=()=>{V({}),f(),R(!1)};return r?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando TODOs..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"TODOs"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona tus tareas y proyectos"})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs(ae,{onClick:()=>R(!T),variant:"secondary",children:[o.jsx(Mne,{size:"sm",className:"mr-2"}),"Filtros"]}),o.jsxs(ae,{onClick:()=>E(!0),variant:"primary",children:[o.jsx(GE,{size:"sm",className:"mr-2"}),"Nuevo TODO"]})]})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:grid-cols-4 sm:gap-5",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"success",size:"md",color:"neutral"})}),o.jsx("div",{className:"ml-3 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:m})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"md",color:"blue"})}),o.jsx("div",{className:"ml-3 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Activos"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:p})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"success",size:"md",color:"green"})}),o.jsx("div",{className:"ml-3 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Completos"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:g})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"md",color:"red"})}),o.jsx("div",{className:"ml-3 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Vencidos"}),o.jsx("dd",{className:"text-lg font-medium text-gray-900 dark:text-white",children:y})]})})]})})})]})]}),T&&o.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),o.jsxs("select",{value:L.priorityId||"",onChange:we=>V({...L,priorityId:we.target.value||void 0}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[o.jsx("option",{value:"",children:"Todas las prioridades"}),e.map(we=>o.jsx("option",{value:we.id,children:we.name},we.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),o.jsxs("select",{value:((ne=L.showCompleted)==null?void 0:ne.toString())||"",onChange:we=>V({...L,showCompleted:we.target.value===""?void 0:we.target.value==="true"}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"false",children:"Activos"}),o.jsx("option",{value:"true",children:"Completados"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bsqueda"}),o.jsx("input",{type:"text",value:L.search||"",onChange:we=>V({...L,search:we.target.value||void 0}),placeholder:"Buscar en ttulo o descripcin...",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx(ae,{onClick:F,variant:"secondary",children:"Limpiar"}),o.jsx(ae,{onClick:K,variant:"primary",children:"Aplicar Filtros"})]})]}),n&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsx("p",{className:"text-red-600",children:n})}),o.jsx("div",{className:"space-y-4",children:t.length===0?o.jsxs("div",{className:"text-center py-12 bg-white shadow rounded-md",children:[o.jsx(O,{action:"success",size:"xl",color:"neutral",className:"mx-auto"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay TODOs"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.keys(s).length>0?"No se encontraron TODOs con los filtros aplicados.":"Comienza creando tu primer TODO."}),Object.keys(s).length===0&&o.jsx("div",{className:"mt-6",children:o.jsxs(ae,{onClick:()=>E(!0),variant:"primary",children:[o.jsx(GE,{size:"sm",className:"mr-2"}),"Crear TODO"]})})]}):t.map(we=>o.jsx(IB,{todo:we,onStartTimer:H,onPauseTimer:P,onComplete:_,onEdit:M,onDelete:J,showActions:!0},we.id))})]}),C&&o.jsx(DB,{priorities:e,onClose:()=>E(!1),onSubmit:ee}),B&&o.jsx(LB,{todo:B,priorities:e,onClose:()=>M(null),onSubmit:we=>Q(B.id,we)}),o.jsx(Ha,{isOpen:N.isOpen,onClose:S.onClose,onConfirm:S.onConfirm,title:((z=N.options)==null?void 0:z.title)||"",message:((Z=N.options)==null?void 0:Z.message)||"",confirmText:(oe=N.options)==null?void 0:oe.confirmText,cancelText:(ue=N.options)==null?void 0:ue.cancelText,type:(_e=N.options)==null?void 0:_e.type})]})},uxe=()=>{const[t,e]=x.useState(!1);return{exportToExcel:async(s,a={})=>{var i,l;if(s.length===0){(i=a.onError)==null||i.call(a,"No hay TODOs para exportar");return}try{e(!0),await she(s,a.filename,a.onSuccess)}catch(c){console.error("Error exporting TODOs to Excel:",c),(l=a.onError)==null||l.call(a,"Error al exportar TODOs a Excel")}finally{e(!1)}},exportToCSV:async(s,a={})=>{var i,l;if(s.length===0){(i=a.onError)==null||i.call(a,"No hay TODOs para exportar");return}try{e(!0),await ahe(s,a.filename,a.onSuccess)}catch(c){console.error("Error exporting TODOs to CSV:",c),(l=a.onError)==null||l.call(a,"Error al exportar TODOs a CSV")}finally{e(!1)}},isExporting:t}},hxe=({filteredTodos:t,onSuccess:e,onError:r,className:n=""})=>{const{exportToExcel:s,exportToCSV:a,isExporting:i}=uxe(),l=()=>{const h=new Date().toISOString().split("T")[0];s(t,{filename:`todos-${h}.xlsx`,onSuccess:e,onError:r})},c=()=>{const h=new Date().toISOString().split("T")[0];a(t,{filename:`todos-${h}.csv`,onSuccess:e,onError:r})},d=t.length>0,u=t.length;return o.jsxs("div",{className:`flex space-x-2 ${n}`,children:[o.jsxs(ae,{variant:"secondary",size:"sm",onClick:c,disabled:!d||i,title:d?`Exportar ${u} TODO(s) a CSV`:"No hay TODOs para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"CSV"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:l,disabled:!d||i,title:d?`Exportar ${u} TODO(s) a Excel`:"No hay TODOs para exportar",children:[o.jsx(Im,{size:"sm"}),i?"Exportando...":"Excel"]})]})},fxe=()=>{var H;const{todos:t,priorities:e,loading:r,error:n,filters:s,fetchTodos:a,createTodo:i,updateTodo:l,deleteTodo:c,completeTodo:d,startTimer:u,pauseTimer:h,applyFilters:f,clearFilters:m,totalTodos:p,activeTodos:g,completedTodos:y,overdueTodos:b}=LT(),[v,w]=x.useState(!1),[k,N]=x.useState(!1),[S,C]=x.useState(null),[E,T]=x.useState({}),R=async P=>{await i(P)&&w(!1)},B=async(P,K)=>{await l(P,K)&&C(null)},M=async P=>{await c(P)},L=async P=>{await d(P)},V=async P=>{try{await bs.archiveTodo(P.id),await a()}catch(K){console.error("Error archiving todo:",K)}},ee=async P=>{await u(P)},Q=async P=>{await h(P)},J=()=>{f(E),N(!1)},_=()=>{T({}),m(),N(!1)};return r?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Cargando TODOs..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestin de TODOs"}),o.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Sistema avanzado de gestin de tareas con control de tiempo"})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx(hxe,{filteredTodos:t,onSuccess:P=>console.log(P),onError:P=>console.error(P)}),o.jsxs(ae,{onClick:()=>N(!k),variant:"secondary",children:[o.jsx(O,{action:"filter",size:"sm",color:"secondary"}),"Filtros"]}),o.jsxs(ae,{onClick:()=>w(!0),variant:"primary",children:[o.jsx(O,{action:"add",size:"sm",color:"neutral"}),"Nuevo TODO"]})]})]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:grid-cols-4 sm:gap-5",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"check",size:"sm",color:"gray"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:p})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"sm",color:"blue"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Activos"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:g})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"check",size:"sm",color:"green"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Completos"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:y})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"sm",color:"red"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Vencidos"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:b})]})})]})})})]})]}),k&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Prioridad"}),o.jsxs("select",{value:E.priorityId||"",onChange:P=>T({...E,priorityId:P.target.value||void 0}),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas las prioridades"}),e.map(P=>o.jsx("option",{value:P.id,children:P.name},P.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado"}),o.jsxs("select",{value:((H=E.showCompleted)==null?void 0:H.toString())||"",onChange:P=>T({...E,showCompleted:P.target.value===""?void 0:P.target.value==="true"}),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"false",children:"Activos"}),o.jsx("option",{value:"true",children:"Completados"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bsqueda"}),o.jsx("input",{type:"text",value:E.search||"",onChange:P=>T({...E,search:P.target.value||void 0}),placeholder:"Buscar en ttulo o descripcin...",className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white"})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx(ae,{onClick:_,variant:"secondary",children:"Limpiar"}),o.jsx(ae,{onClick:J,variant:"primary",children:"Aplicar Filtros"})]})]}),n&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 mb-6",children:o.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})}),t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(O,{action:"check",size:"xl",color:"gray"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay TODOs"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:Object.keys(s).length>0?"No se encontraron TODOs con los filtros aplicados.":"Comienza creando tu primer TODO."}),Object.keys(s).length===0&&o.jsx("div",{className:"mt-6",children:o.jsxs(ae,{onClick:()=>w(!0),variant:"primary",children:[o.jsx(O,{action:"add",size:"sm",color:"neutral"}),"Crear TODO"]})})]}):o.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:t.map(P=>o.jsx(IB,{todo:P,onStartTimer:ee,onPauseTimer:Q,onComplete:L,onEdit:C,onDelete:M,onArchive:V,showActions:!0},P.id))})]}),v&&o.jsx(DB,{priorities:e,onClose:()=>w(!1),onSubmit:R}),S&&o.jsx(LB,{todo:S,priorities:e,onClose:()=>C(null),onSubmit:P=>B(S.id,P)})]})},mxe=()=>{const t=Ri(),e=()=>{t(-1)};return o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:o.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-red-100 dark:bg-red-900/20 mb-6",children:o.jsx(O,{action:"deactivate",size:"xl",color:"red"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Acceso Denegado"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-6",children:"No tienes permisos para acceder a este recurso"}),o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"md",color:"yellow"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Recursos restringidos"}),o.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:o.jsx("p",{children:"Esta pgina requiere permisos especiales que tu cuenta actual no posee. Si crees que deberas tener acceso, contacta con tu administrador."})})]})]})}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-8 space-y-1",children:[o.jsx("p",{children:"Cdigo de error: 403"}),o.jsx("p",{children:"Si el problema persiste, contacta al soporte tcnico"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs(ae,{onClick:e,variant:"secondary",children:[o.jsx(O,{action:"back",size:"sm",className:"mr-2"}),"Volver atrs"]}),o.jsxs(cs,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:[o.jsx(O,{action:"home",size:"sm",className:"mr-2"}),"Ir al inicio"]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Necesitas ayuda? Contacta al administrador del sistema"})})]})})})})};class pxe{constructor(){ve(this,"baseUrl","/api/origins")}async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={...r,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers}};try{const i=await fetch(`${this.baseUrl}${e}`,a),l=await i.json();if(!i.ok)throw new Error(l.message||`HTTP error! status: ${i.status}`);return{success:!0,data:l.data||l,message:l.message}}catch(i){return console.error("API request failed:",i),{success:!1,message:i instanceof Error?i.message:"Unknown error occurred",errors:[i instanceof Error?i.message:"Unknown error"]}}}async getAllOrigins(e={}){const r=new URLSearchParams;e.search&&r.append("search",e.search),e.activo!==void 0&&r.append("activo",String(e.activo)),e.page&&r.append("page",String(e.page)),e.limit&&r.append("limit",String(e.limit)),e.sortBy&&r.append("sortBy",e.sortBy),e.sortOrder&&r.append("sortOrder",e.sortOrder);const n=r.toString(),s=n?`?${n}`:"";return this.makeRequest(s)}async searchOrigins(e){const r=new URLSearchParams;return Object.entries(e).forEach(([n,s])=>{s!=null&&r.append(n,String(s))}),this.makeRequest(`/search?${r.toString()}`)}async getOriginStats(){return this.makeRequest("/stats")}async getOriginById(e){return this.makeRequest(`/${e}`)}async createOrigin(e){return this.makeRequest("",{method:"POST",body:JSON.stringify(e)})}async updateOrigin(e,r){return this.makeRequest(`/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteOrigin(e){return this.makeRequest(`/${e}`,{method:"DELETE"})}async checkCanDeleteOrigin(e){return this.makeRequest(`/${e}/can-delete`)}}const nf=new pxe,gxe=()=>{var we;const[t,e]=x.useState([]),[r,n]=x.useState(null),[s,a]=x.useState(!0),[i,l]=x.useState(""),[c,d]=x.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"DESC"}),[u,h]=x.useState({total:0,totalPages:0,currentPage:1}),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),[k,N]=x.useState(null),[S,C]=x.useState({nombre:"",descripcion:"",activo:!0}),[E,T]=x.useState({nombre:"",descripcion:"",activo:!0}),[R,B]=x.useState(!1),{error:M,success:L}=nr(),V=async()=>{try{a(!0);const Y=await nf.getAllOrigins(c);Y.success&&Y.data?(e(Y.data.origins||[]),h({total:Y.data.total||0,totalPages:Y.data.totalPages||0,currentPage:Y.data.page||1})):(M(Y.message||"Error al cargar orgenes"),e([]))}catch{M("Error al cargar orgenes"),e([])}finally{a(!1)}},ee=async()=>{try{const Y=await nf.getOriginStats();Y.success&&Y.data&&n(Y.data)}catch(Y){console.error("Error loading stats:",Y)}};x.useEffect(()=>{V(),ee()},[c]);const Q=Y=>{l(Y),d(le=>({...le,search:Y||void 0,page:1}))},J=Y=>{d(le=>({...le,sortBy:Y,sortOrder:le.sortBy===Y&&le.sortOrder==="ASC"?"DESC":"ASC",page:1}))},_=Y=>{d(le=>({...le,page:Y}))},H=()=>{w(null),m(!0)},P=Y=>{w(Y),C({nombre:Y.nombre,descripcion:Y.descripcion||"",activo:Y.activo}),g(!0)},K=Y=>{w(Y),b(!0)},F=async Y=>{var le,ye;try{const Ve=await nf.checkCanDeleteOrigin(Y);if(!Ve.success||!((le=Ve.data)!=null&&le.canDelete)){M(((ye=Ve.data)==null?void 0:ye.reason)||"No se puede eliminar este origen");return}const Be=await nf.deleteOrigin(Y);Be.success?(L("Origen eliminado correctamente"),V(),ee()):M(Be.message||"Error al eliminar origen")}catch{M("Error al eliminar origen")}finally{N(null)}},ne=async()=>{if(v)try{B(!0);const Y=await nf.updateOrigin(v.id,{nombre:S.nombre.trim(),descripcion:S.descripcion.trim()||void 0,activo:S.activo});Y.success?(L("Origen actualizado correctamente"),g(!1),w(null),V(),ee()):M(Y.message||"Error al actualizar origen")}catch{M("Error al actualizar origen")}finally{B(!1)}},z=()=>{g(!1),w(null),C({nombre:"",descripcion:"",activo:!0})},Z=()=>{b(!1),w(null)},oe=()=>{m(!1),T({nombre:"",descripcion:"",activo:!0})},ue=async()=>{if(E.nombre.trim()){B(!0);try{await nf.createOrigin({nombre:E.nombre.trim(),descripcion:E.descripcion.trim()||void 0,activo:E.activo}),oe(),V()}catch(Y){console.error("Error al crear origen:",Y)}finally{B(!1)}}},_e=Y=>c.sortBy!==Y?null:c.sortOrder==="ASC"?o.jsx(O,{action:"sortUp",size:"sm"}):o.jsx(O,{action:"sortDown",size:"sm"});return s&&t.length===0?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Orgenes"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los orgenes de casos del sistema"})]}),o.jsxs(ae,{onClick:H,variant:"primary",className:"inline-flex items-center",children:[o.jsx(O,{action:"add",size:"lg",className:"mr-2"}),"Nuevo Origen"]})]}),r&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Orgenes"}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalOrigins})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Activos"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.activeOrigins})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Inactivos"}),o.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.inactiveOrigins})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Casos Asociados"}),o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.casesCount})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Creados Recientemente"}),o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.recentlyCreated})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow space-y-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(O,{action:"search",size:"lg",color:"gray",className:"absolute left-3 top-1/2 transform -translate-y-1/2"}),o.jsx("input",{type:"text",placeholder:"Buscar orgenes...",value:i,onChange:Y=>Q(Y.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:((we=c.activo)==null?void 0:we.toString())||"all",onChange:Y=>d(le=>({...le,isActive:Y.target.value==="all"?void 0:Y.target.value==="true",page:1})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"all",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{onClick:()=>J("nombre"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Nombre"}),_e("nombre")]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{onClick:()=>J("isActive"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Estado"}),_e("isActive")]})}),o.jsx("th",{onClick:()=>J("createdAt"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Creado"}),_e("createdAt")]})}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(t||[]).map(Y=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Y.nombre})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:Y.descripcion||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Y.activo?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:Y.activo?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(Y.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>K(Y),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalles",children:o.jsx(O,{action:"view",size:"sm"})}),o.jsx("button",{onClick:()=>P(Y),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar",children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsx("button",{onClick:()=>N(Y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},Y.id))})]})}),u.totalPages>1&&o.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>_(u.currentPage-1),disabled:u.currentPage<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>_(u.currentPage+1),disabled:u.currentPage>=u.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Mostrando"," ",o.jsx("span",{className:"font-medium",children:(u.currentPage-1)*c.limit+1})," ","a"," ",o.jsx("span",{className:"font-medium",children:Math.min(u.currentPage*c.limit,u.total)})," ","de ",o.jsx("span",{className:"font-medium",children:u.total})," ","resultados"]})}),o.jsx("div",{children:o.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:u.totalPages},(Y,le)=>le+1).map(Y=>o.jsx("button",{onClick:()=>_(Y),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${Y===u.currentPage?"z-10 bg-orange-50 border-orange-500 text-orange-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Y},Y))})})]})]})})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Confirmar eliminacin"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ests seguro de que deseas eliminar este origen? Esta accin no se puede deshacer."}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(ae,{variant:"secondary",onClick:()=>N(null),children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:()=>F(k),children:"Eliminar"})]})]})}),o.jsx(At,{isOpen:y,onClose:Z,title:"Detalles del Origen",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ID"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.id})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),o.jsx("div",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.activo?"Activo":"Inactivo"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.nombre})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2 min-h-[60px]",children:v.descripcion||"Sin descripcin"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Creacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.createdAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ltima Actualizacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.updatedAt).toLocaleString()})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:Z,children:"Cerrar"}),o.jsx(ae,{variant:"primary",onClick:()=>{Z(),P(v)},children:"Editar"})]})]})}),o.jsx(At,{isOpen:p,onClose:z,title:"Editar Origen",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:S.nombre,onChange:Y=>C({...S,nombre:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre del origen",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:S.descripcion,onChange:Y=>C({...S,descripcion:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"activo",checked:S.activo,onChange:Y=>C({...S,activo:Y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"activo",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:z,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:ne,disabled:R||!S.nombre.trim()||S.nombre===v.nombre&&S.descripcion===(v.descripcion||"")&&S.activo===v.activo,children:R?"Guardando...":"Guardar Cambios"})]})]})}),o.jsx(At,{isOpen:f,onClose:oe,title:"Crear Nuevo Origen",size:"lg",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:E.nombre,onChange:Y=>T({...E,nombre:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre del origen",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:E.descripcion,onChange:Y=>T({...E,descripcion:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"createActivo",checked:E.activo,onChange:Y=>T({...E,activo:Y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"createActivo",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:oe,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:ue,disabled:R||!E.nombre.trim(),children:R?"Creando...":"Crear Origen"})]})]})})]})};class xxe{constructor(){ve(this,"baseUrl","/api/applications")}async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={...r,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers}};try{const i=await fetch(`${this.baseUrl}${e}`,a),l=await i.json();return{success:i.ok,data:l.data||l,message:l.message}}catch(i){return{success:!1,message:i instanceof Error?i.message:"Error desconocido",errors:[i instanceof Error?i.message:"Error desconocido"]}}}async getAllApplications(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,s])=>{s!==void 0&&r.append(n,String(s))}),this.makeRequest(`?${r.toString()}`)}async getApplicationById(e){return this.makeRequest(`/${e}`)}async createApplication(e){return this.makeRequest("",{method:"POST",body:JSON.stringify(e)})}async updateApplication(e,r){return this.makeRequest(`/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteApplication(e){return this.makeRequest(`/${e}`,{method:"DELETE"})}async getApplicationStats(){return this.makeRequest("/stats")}async checkCanDeleteApplication(e){return this.makeRequest(`/${e}/can-delete`)}async toggleApplicationStatus(e){return this.makeRequest(`/${e}/toggle-status`,{method:"PATCH"})}async searchApplications(e){return this.makeRequest(`/search?q=${encodeURIComponent(e)}`)}}const sf=new xxe,yxe=()=>{var we;const[t,e]=x.useState([]),[r,n]=x.useState(null),[s,a]=x.useState(!0),[i,l]=x.useState(""),[c,d]=x.useState({page:1,limit:10,sortBy:"createdAt",sortOrder:"DESC"}),[u,h]=x.useState({total:0,totalPages:0,currentPage:1}),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),[k,N]=x.useState(null),[S,C]=x.useState({nombre:"",descripcion:"",activo:!0}),[E,T]=x.useState({nombre:"",descripcion:"",activo:!0}),[R,B]=x.useState(!1),{error:M,success:L}=po(),V=async()=>{try{a(!0);const Y=await sf.getAllApplications(c);Y.success&&Y.data?(e(Y.data.applications||[]),h({total:Y.data.total||0,totalPages:Y.data.totalPages||0,currentPage:Y.data.page||1})):(M(Y.message||"Error al cargar aplicaciones"),e([]))}catch{M("Error al cargar aplicaciones"),e([])}finally{a(!1)}},ee=async()=>{try{const Y=await sf.getApplicationStats();Y.success&&Y.data&&n(Y.data)}catch(Y){console.error("Error loading stats:",Y)}};x.useEffect(()=>{V(),ee()},[c]);const Q=Y=>{l(Y),d(le=>({...le,search:Y||void 0,page:1}))},J=Y=>{d(le=>({...le,sortBy:Y,sortOrder:le.sortBy===Y&&le.sortOrder==="ASC"?"DESC":"ASC",page:1}))},_=Y=>{d(le=>({...le,page:Y}))},H=()=>{w(null),m(!0)},P=Y=>{w(Y),C({nombre:Y.nombre,descripcion:Y.descripcion||"",activo:Y.activo}),g(!0)},K=Y=>{w(Y),b(!0)},F=()=>{g(!1),w(null),C({nombre:"",descripcion:"",activo:!0})},ne=()=>{b(!1),w(null)},z=()=>{m(!1),T({nombre:"",descripcion:"",activo:!0})},Z=async()=>{if(E.nombre.trim()){B(!0);try{await sf.createApplication({nombre:E.nombre.trim(),descripcion:E.descripcion.trim()||void 0,activo:E.activo}),z(),V(),L("Aplicacin creada exitosamente")}catch(Y){console.error("Error al crear aplicacin:",Y),M("Error al crear aplicacin")}finally{B(!1)}}},oe=async()=>{if(!(!v||!S.nombre.trim())){B(!0);try{await sf.updateApplication(v.id,{nombre:S.nombre.trim(),descripcion:S.descripcion.trim()||void 0,activo:S.activo}),F(),V(),L("Aplicacin actualizada exitosamente")}catch(Y){console.error("Error al actualizar aplicacin:",Y),M("Error al actualizar aplicacin")}finally{B(!1)}}},ue=async Y=>{var le,ye;try{const Ve=await sf.checkCanDeleteApplication(Y);if(!Ve.success||!((le=Ve.data)!=null&&le.canDelete)){M(((ye=Ve.data)==null?void 0:ye.message)||"No se puede eliminar esta aplicacin");return}const Be=await sf.deleteApplication(Y);Be.success?(L("Aplicacin eliminada correctamente"),V(),ee()):M(Be.message||"Error al eliminar aplicacin")}catch{M("Error al eliminar aplicacin")}finally{N(null)}},_e=Y=>c.sortBy!==Y?null:c.sortOrder==="ASC"?o.jsx(O,{action:"sortUp",size:"sm"}):o.jsx(O,{action:"sortDown",size:"sm"});return s&&t.length===0?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Aplicaciones"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra las aplicaciones de casos del sistema"})]}),o.jsxs(ae,{onClick:H,variant:"primary",className:"inline-flex items-center",children:[o.jsx(O,{action:"add",size:"lg",className:"mr-2"}),"Nueva Aplicacin"]})]}),r&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Aplicaciones"}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalApplications})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Activas"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.activeApplications})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Inactivas"}),o.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.inactiveApplications})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Casos Asociados"}),o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.casesCount})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Creadas Recientemente"}),o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.recentlyCreated})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow space-y-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(O,{action:"search",size:"lg",color:"gray",className:"absolute left-3 top-1/2 transform -translate-y-1/2"}),o.jsx("input",{type:"text",placeholder:"Buscar aplicaciones...",value:i,onChange:Y=>Q(Y.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:((we=c.activo)==null?void 0:we.toString())||"all",onChange:Y=>d(le=>({...le,activo:Y.target.value==="all"?void 0:Y.target.value==="true",page:1})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"all",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activas"}),o.jsx("option",{value:"false",children:"Inactivas"})]})})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{onClick:()=>J("nombre"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Nombre"}),_e("nombre")]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{onClick:()=>J("activo"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Estado"}),_e("activo")]})}),o.jsx("th",{onClick:()=>J("createdAt"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Creada"}),_e("createdAt")]})}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(t||[]).map(Y=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Y.nombre})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:Y.descripcion||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Y.activo?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:Y.activo?"Activa":"Inactiva"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(Y.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>K(Y),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalles",children:o.jsx(O,{action:"view",size:"sm",color:"blue"})}),o.jsx("button",{onClick:()=>P(Y),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar",children:o.jsx(O,{action:"edit",size:"sm",color:"orange"})}),o.jsx("button",{onClick:()=>N(Y.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:o.jsx(O,{action:"delete",size:"sm",color:"red"})})]})})]},Y.id))})]})}),u.totalPages>1&&o.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>_(u.currentPage-1),disabled:u.currentPage<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>_(u.currentPage+1),disabled:u.currentPage>=u.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Mostrando"," ",o.jsx("span",{className:"font-medium",children:(u.currentPage-1)*c.limit+1})," ","a"," ",o.jsx("span",{className:"font-medium",children:Math.min(u.currentPage*c.limit,u.total)})," ","de ",o.jsx("span",{className:"font-medium",children:u.total})," ","resultados"]})}),o.jsx("div",{children:o.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:u.totalPages},(Y,le)=>le+1).map(Y=>o.jsx("button",{onClick:()=>_(Y),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${Y===u.currentPage?"z-10 bg-orange-50 border-orange-500 text-orange-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:Y},Y))})})]})]})})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Confirmar eliminacin"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ests seguro de que deseas eliminar esta aplicacin? Esta accin no se puede deshacer."}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(ae,{variant:"secondary",onClick:()=>N(null),children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:()=>ue(k),children:"Eliminar"})]})]})}),o.jsx(At,{isOpen:y,onClose:ne,title:"Detalles de la Aplicacin",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ID"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.id})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),o.jsx("div",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.activo?"Activa":"Inactiva"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.nombre})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2 min-h-[60px]",children:v.descripcion||"Sin descripcin"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Creacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.createdAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ltima Actualizacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.updatedAt).toLocaleString()})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:ne,children:"Cerrar"}),o.jsx(ae,{variant:"primary",onClick:()=>{ne(),P(v)},children:"Editar"})]})]})}),o.jsx(At,{isOpen:p,onClose:F,title:"Editar Aplicacin",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:S.nombre,onChange:Y=>C({...S,nombre:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre de la aplicacin",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:S.descripcion,onChange:Y=>C({...S,descripcion:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"editActivo",checked:S.activo,onChange:Y=>C({...S,activo:Y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"editActivo",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:F,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:oe,disabled:R||!S.nombre.trim()||S.nombre===v.nombre&&S.descripcion===(v.descripcion||"")&&S.activo===v.activo,children:R?"Guardando...":"Guardar Cambios"})]})]})}),o.jsx(At,{isOpen:f,onClose:z,title:"Crear Nueva Aplicacin",size:"lg",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:E.nombre,onChange:Y=>T({...E,nombre:Y.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre de la aplicacin",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:E.descripcion,onChange:Y=>T({...E,descripcion:Y.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"createActivo",checked:E.activo,onChange:Y=>T({...E,activo:Y.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"createActivo",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:z,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:Z,disabled:R||!E.nombre.trim(),children:R?"Creando...":"Crear Aplicacin"})]})]})})]})};class vxe{constructor(){ve(this,"baseUrl","/api/case-statuses")}async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={...r,headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers}};try{const i=await fetch(`${this.baseUrl}${e}`,a),l=await i.json();return{success:i.ok,data:l.data||l,message:l.message}}catch(i){return{success:!1,message:i instanceof Error?i.message:"Error desconocido",errors:[i instanceof Error?i.message:"Error desconocido"]}}}async getAllStatuses(e={}){const r=new URLSearchParams;return Object.entries(e).forEach(([n,s])=>{s!==void 0&&r.append(n,String(s))}),this.makeRequest(`?${r.toString()}`)}async createStatus(e){return this.makeRequest("",{method:"POST",body:JSON.stringify(e)})}async updateStatus(e,r){return this.makeRequest(`/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteStatus(e){return this.makeRequest(`/${e}`,{method:"DELETE"})}async getStatusStats(){return this.makeRequest("/stats")}async checkCanDeleteStatus(e){return this.makeRequest(`/${e}/can-delete`)}}const af=new vxe,bxe=()=>{var Y;const[t,e]=x.useState([]),[r,n]=x.useState(null),[s,a]=x.useState(!0),[i,l]=x.useState(""),[c,d]=x.useState({page:1,limit:10,sortBy:"displayOrder",sortOrder:"ASC"}),[u,h]=x.useState({total:0,totalPages:0,currentPage:1}),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),[k,N]=x.useState(null),[S,C]=x.useState({name:"",description:"",color:"#3B82F6",isActive:!0}),[E,T]=x.useState({name:"",description:"",color:"#3B82F6",isActive:!0}),[R,B]=x.useState(!1),{error:M,success:L}=nr(),V=async()=>{try{a(!0);const le=await af.getAllStatuses(c);le.success&&le.data?(e(le.data.statuses||[]),h({total:le.data.total||0,totalPages:le.data.totalPages||0,currentPage:le.data.page||1})):(M(le.message||"Error al cargar estados"),e([]))}catch{M("Error al cargar estados"),e([])}finally{a(!1)}},ee=async()=>{try{const le=await af.getStatusStats();le.success&&le.data&&n(le.data)}catch(le){console.error("Error loading stats:",le)}};x.useEffect(()=>{V(),ee()},[c]);const Q=le=>{l(le),d(ye=>({...ye,search:le||void 0,page:1}))},J=le=>{d(ye=>({...ye,sortBy:le,sortOrder:ye.sortBy===le&&ye.sortOrder==="ASC"?"DESC":"ASC",page:1}))},_=le=>{d(ye=>({...ye,page:le}))},H=()=>{w(null),m(!0)},P=le=>{Z(le)},K=le=>{w(le),b(!0)},F=()=>{g(!1),w(null),C({name:"",description:"",color:"#3B82F6",isActive:!0})},ne=()=>{b(!1),w(null)},z=()=>{m(!1),T({name:"",description:"",color:"#3B82F6",isActive:!0})},Z=le=>{w(le),C({name:le.name,description:le.description||"",color:le.color||"#3B82F6",isActive:le.isActive}),g(!0)},oe=async()=>{if(!(!v||!S.name.trim())){B(!0);try{await af.updateStatus(v.id,{name:S.name.trim(),description:S.description.trim()||void 0,color:S.color,isActive:S.isActive}),F(),V(),L("Estado actualizado correctamente")}catch(le){console.error("Error al actualizar estado:",le),M("Error al actualizar estado")}finally{B(!1)}}},ue=async()=>{if(E.name.trim()){B(!0);try{await af.createStatus({name:E.name.trim(),description:E.description.trim()||void 0,color:E.color,isActive:E.isActive}),z(),V(),L("Estado creado correctamente")}catch(le){console.error("Error al crear estado:",le),M("Error al crear estado")}finally{B(!1)}}},_e=async le=>{var ye,Ve;try{const Be=await af.checkCanDeleteStatus(le);if(!Be.success||!((ye=Be.data)!=null&&ye.canDelete)){M(((Ve=Be.data)==null?void 0:Ve.reason)||"No se puede eliminar este estado");return}const ut=await af.deleteStatus(le);ut.success?(L("Estado eliminado correctamente"),V(),ee()):M(ut.message||"Error al eliminar estado")}catch{M("Error al eliminar estado")}finally{N(null)}},we=le=>c.sortBy!==le?null:c.sortOrder==="ASC"?o.jsx(O,{action:"sortUp",size:"sm",color:"gray"}):o.jsx(O,{action:"sortDown",size:"sm",color:"gray"});return s&&t.length===0?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestin de Estados de Control"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra los estados de casos del sistema"})]}),o.jsxs(ae,{onClick:H,variant:"primary",className:"inline-flex items-center",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nuevo Estado"]})]}),r&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Estados"}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalStatuses})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Activos"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.activeStatuses})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Inactivos"}),o.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.inactiveStatuses})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Casos Asociados"}),o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.casesCount})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow",children:[o.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Creados Recientemente"}),o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.recentlyCreated})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow space-y-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(O,{action:"search",size:"sm",color:"gray"}),o.jsx("input",{type:"text",placeholder:"Buscar estados...",value:i,onChange:le=>Q(le.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:((Y=c.isActive)==null?void 0:Y.toString())||"all",onChange:le=>d(ye=>({...ye,isActive:le.target.value==="all"?void 0:le.target.value==="true",page:1})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"all",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{onClick:()=>J("displayOrder"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(O,{action:"menu",size:"sm",color:"gray"}),o.jsx("span",{children:"Orden"}),we("displayOrder")]})}),o.jsx("th",{onClick:()=>J("nombre"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Nombre"}),we("nombre")]})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Color"}),o.jsx("th",{onClick:()=>J("isActive"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Estado"}),we("isActive")]})}),o.jsx("th",{onClick:()=>J("createdAt"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Creado"}),we("createdAt")]})}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(t||[]).map(le=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"menu",size:"sm",color:"gray"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:le.displayOrder})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:le.name})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:le.description||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:le.color||"#6B7280"}}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 font-mono",children:le.color||"Sin color"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${le.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}`,children:le.isActive?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(le.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>K(le),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Ver detalles",children:o.jsx(O,{action:"view",size:"sm",color:"blue"})}),o.jsx("button",{onClick:()=>P(le),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar",children:o.jsx(O,{action:"edit",size:"sm",color:"orange"})}),o.jsx("button",{onClick:()=>N(le.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:o.jsx(O,{action:"delete",size:"sm",color:"red"})})]})})]},le.id))})]})}),u.totalPages>1&&o.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>_(u.currentPage-1),disabled:u.currentPage<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>_(u.currentPage+1),disabled:u.currentPage>=u.totalPages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Mostrando"," ",o.jsx("span",{className:"font-medium",children:(u.currentPage-1)*c.limit+1})," ","a"," ",o.jsx("span",{className:"font-medium",children:Math.min(u.currentPage*c.limit,u.total)})," ","de ",o.jsx("span",{className:"font-medium",children:u.total})," ","resultados"]})}),o.jsx("div",{children:o.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:u.totalPages},(le,ye)=>ye+1).map(le=>o.jsx("button",{onClick:()=>_(le),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${le===u.currentPage?"z-10 bg-orange-50 border-orange-500 text-orange-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:le},le))})})]})]})})]}),k&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Confirmar eliminacin"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Ests seguro de que deseas eliminar este estado? Esta accin no se puede deshacer."}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(ae,{variant:"secondary",onClick:()=>N(null),children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:()=>_e(k),children:"Eliminar"})]})]})}),o.jsx(At,{isOpen:y,onClose:ne,title:"Detalles del Estado",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ID"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.id})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),o.jsx("div",{children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.isActive?"Activo":"Inactivo"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2 min-h-[60px]",children:v.description||"Sin descripcin"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded border border-gray-300",style:{backgroundColor:v.color||"#3B82F6"}}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2 font-mono",children:v.color||"#3B82F6"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Orden de Visualizacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:v.displayOrder})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de Creacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.createdAt).toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"ltima Actualizacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 rounded-md px-3 py-2",children:new Date(v.updatedAt).toLocaleString()})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:ne,children:"Cerrar"}),o.jsx(ae,{variant:"primary",onClick:()=>{ne(),P(v)},children:"Editar"})]})]})}),o.jsx(At,{isOpen:p,onClose:F,title:"Editar Estado",size:"lg",children:v&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:S.name,onChange:le=>C({...S,name:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre del estado",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:S.description,onChange:le=>C({...S,description:le.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:S.color,onChange:le=>C({...S,color:le.target.value}),className:"h-10 w-20 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:S.color,onChange:le=>C({...S,color:le.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono",placeholder:"#3B82F6"})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"editActive",checked:S.isActive,onChange:le=>C({...S,isActive:le.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"editActive",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:F,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:oe,disabled:R||!S.name.trim()||S.name===v.name&&S.description===(v.description||"")&&S.color===(v.color||"#3B82F6")&&S.isActive===v.isActive,children:R?"Guardando...":"Guardar Cambios"})]})]})}),o.jsx(At,{isOpen:f,onClose:z,title:"Crear Nuevo Estado",size:"lg",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("form",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:E.name,onChange:le=>T({...E,name:le.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese el nombre del estado",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripcin"}),o.jsx("textarea",{value:E.description,onChange:le=>T({...E,description:le.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Ingrese una descripcin (opcional)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:E.color,onChange:le=>T({...E,color:le.target.value}),className:"h-10 w-20 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:E.color,onChange:le=>T({...E,color:le.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 font-mono",placeholder:"#3B82F6"})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"createActive",checked:E.isActive,onChange:le=>T({...E,isActive:le.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"createActive",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Estado activo"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:z,disabled:R,children:"Cancelar"}),o.jsx(ae,{variant:"primary",onClick:ue,disabled:R||!E.name.trim(),children:R?"Creando...":"Crear Estado"})]})]})})]})},wxe=Pn.api.baseUrl;class kxe{async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers},...r},i=await fetch(`${wxe}${e}`,a);if(!i.ok){const l=await i.json().catch(()=>({}));throw new Error(l.message||`HTTP error! status: ${i.status}`)}return i.status===204?null:i.json()}async getAllTags(e){try{const r=new URLSearchParams;e!=null&&e.category&&e.category!=="all"&&r.append("category",e.category),(e==null?void 0:e.isActive)!==void 0&&r.append("isActive",String(e.isActive)),e!=null&&e.search&&r.append("search",e.search);const n=r.toString(),s=n?`/knowledge/tags?${n}`:"/knowledge/tags",a=await this.makeRequest(s);return{success:!0,data:Array.isArray(a)?a:[]}}catch(r){throw console.error("Error fetching tags:",r),new Error(r.message||"Error al obtener las etiquetas")}}async getTagById(e){try{return{success:!0,data:await this.makeRequest(`/knowledge/tags/${e}`)}}catch(r){throw console.error("Error fetching tag:",r),new Error(r.message||"Error al obtener la etiqueta")}}async createTag(e){try{return{success:!0,data:await this.makeRequest("/knowledge/tags",{method:"POST",body:JSON.stringify(e)}),message:"Etiqueta creada exitosamente"}}catch(r){throw console.error("Error creating tag:",r),new Error(r.message||"Error al crear la etiqueta")}}async updateTag(e,r){try{return{success:!0,data:await this.makeRequest(`/knowledge/tags/${e}`,{method:"PUT",body:JSON.stringify(r)}),message:"Etiqueta actualizada exitosamente"}}catch(n){throw console.error("Error updating tag:",n),new Error(n.message||"Error al actualizar la etiqueta")}}async deleteTag(e){try{await this.makeRequest(`/knowledge/tags/${e}`,{method:"DELETE"})}catch(r){throw console.error("Error deleting tag:",r),new Error(r.message||"Error al eliminar la etiqueta")}}async toggleTagStatus(e){try{const r=await this.getTagById(e);return this.updateTag(e,{isActive:!r.data.isActive})}catch(r){throw console.error("Error toggling tag status:",r),new Error(r.message||"Error al cambiar el estado de la etiqueta")}}}const Hm=new kxe,Ia=[{value:"priority",label:"Prioridad",description:"Etiquetas de prioridad",color:"#EF4444"},{value:"technical",label:"Tcnico",description:"Etiquetas tcnicas por rea",color:"#3B82F6"},{value:"type",label:"Tipo",description:"Tipo de trabajo realizado",color:"#8B5CF6"},{value:"technology",label:"Tecnologa",description:"Tecnologas especficas",color:"#10B981"},{value:"module",label:"Mdulo",description:"Mdulos del sistema",color:"#F59E0B"},{value:"custom",label:"Personalizado",description:"Etiquetas personalizadas",color:"#6B7280"}],id=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899","#F43F5E","#6B7280"];function Cxe({isOpen:t,onClose:e,onSuccess:r}){var y;const{success:n,error:s}=nr(),[a,i]=x.useState(!1),[l,c]=x.useState({tagName:"",description:"",color:id[0],category:"custom"}),[d,u]=x.useState({}),h=()=>{const b={};return l.tagName.trim()?l.tagName.trim().length<2?b.tagName="El nombre debe tener al menos 2 caracteres":l.tagName.trim().length>50&&(b.tagName="El nombre no puede exceder 50 caracteres"):b.tagName="El nombre de la etiqueta es requerido",l.description&&l.description.length>200&&(b.description="La descripcin no puede exceder 200 caracteres"),l.category||(b.category="La categora es requerida"),u(b),Object.keys(b).length===0},f=async b=>{var v;if(b.preventDefault(),!!h()){i(!0);try{await Hm.createTag({...l,tagName:l.tagName.trim(),description:((v=l.description)==null?void 0:v.trim())||void 0}),n("Etiqueta creada exitosamente"),m(),r()}catch(w){console.error("Error creating tag:",w),s(w.message||"Error al crear la etiqueta")}finally{i(!1)}}},m=()=>{c({tagName:"",description:"",color:id[0],category:"custom"}),u({}),e()},p=(b,v)=>{if(c(w=>({...w,[b]:v})),d[b]){const w={...d};delete w[b],u(w)}},g=b=>{const v=Ia.find(w=>w.value===b);return(v==null?void 0:v.color)||id[0]};return o.jsx(At,{isOpen:t,onClose:m,title:"Crear Nueva Etiqueta",children:o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tagName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre de la Etiqueta *"}),o.jsx("input",{type:"text",id:"tagName",value:l.tagName,onChange:b=>p("tagName",b.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.tagName?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ingresa el nombre de la etiqueta",disabled:a,maxLength:50}),d.tagName&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.tagName}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.tagName.length,"/50 caracteres"]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora *"}),o.jsx("select",{id:"category",value:l.category,onChange:b=>{const v=b.target.value;p("category",v),c(w=>({...w,category:v,color:g(v)}))},className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.category?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:a,children:Ia.map(b=>o.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),d.category&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.category})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),o.jsx("div",{className:"grid grid-cols-6 gap-2",children:id.map(b=>o.jsx("button",{type:"button",onClick:()=>p("color",b),className:`w-8 h-8 rounded-full border-2 transition-all ${l.color===b?"border-gray-900 scale-110":"border-gray-300 hover:border-gray-500 dark:hover:border-gray-400"}`,style:{backgroundColor:b},disabled:a,title:b},b))}),o.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:l.color}}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Color seleccionado: ",l.color]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",value:l.description||"",onChange:b=>p("description",b.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.description?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Descripcin opcional de la etiqueta",disabled:a,maxLength:200}),d.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(l.description||"").length,"/200 caracteres"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vista Previa"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),o.jsx("span",{className:"text-sm font-medium",children:l.tagName||"Nombre de la etiqueta"}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs text-white",style:{backgroundColor:g(l.category)},children:(y=Ia.find(b=>b.value===l.category))==null?void 0:y.label})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:m,disabled:a,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:a,className:"flex items-center",children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Crear Etiqueta"]})})]})]})})}function Nxe({isOpen:t,onClose:e,onSuccess:r,tag:n}){var b;const{success:s,error:a}=nr(),[i,l]=x.useState(!1),[c,d]=x.useState({tagName:"",description:"",color:id[0],category:"custom",isActive:!0}),[u,h]=x.useState({});x.useEffect(()=>{t&&n&&(d({tagName:n.tagName,description:n.description||"",color:n.color,category:n.category,isActive:n.isActive}),h({}))},[t,n]);const f=()=>{var w;const v={};return(w=c.tagName)!=null&&w.trim()?c.tagName.trim().length<2?v.tagName="El nombre debe tener al menos 2 caracteres":c.tagName.trim().length>50&&(v.tagName="El nombre no puede exceder 50 caracteres"):v.tagName="El nombre de la etiqueta es requerido",c.description&&c.description.length>200&&(v.description="La descripcin no puede exceder 200 caracteres"),c.category||(v.category="La categora es requerida"),h(v),Object.keys(v).length===0},m=async v=>{var w,k;if(v.preventDefault(),!(!n||!f())){l(!0);try{await Hm.updateTag(n.id,{...c,tagName:(w=c.tagName)==null?void 0:w.trim(),description:((k=c.description)==null?void 0:k.trim())||void 0}),s("Etiqueta actualizada exitosamente"),p(),r()}catch(N){console.error("Error updating tag:",N),a(N.message||"Error al actualizar la etiqueta")}finally{l(!1)}}},p=()=>{d({tagName:"",description:"",color:id[0],category:"custom",isActive:!0}),h({}),e()},g=(v,w)=>{if(d(k=>({...k,[v]:w})),u[v]){const k={...u};delete k[v],h(k)}},y=v=>{const w=Ia.find(k=>k.value===v);return(w==null?void 0:w.color)||id[0]};return n?o.jsx(At,{isOpen:t,onClose:p,title:"Editar Etiqueta",children:o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tagName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre de la Etiqueta *"}),o.jsx("input",{type:"text",id:"tagName",value:c.tagName||"",onChange:v=>g("tagName",v.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.tagName?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ingresa el nombre de la etiqueta",disabled:i,maxLength:50}),u.tagName&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.tagName}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(c.tagName||"").length,"/50 caracteres"]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categora *"}),o.jsx("select",{id:"category",value:c.category||"custom",onChange:v=>{const w=v.target.value;g("category",w),d(k=>({...k,category:w,color:y(w)}))},className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.category?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:i,children:Ia.map(v=>o.jsxs("option",{value:v.value,children:[v.label," - ",v.description]},v.value))}),u.category&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.category})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsx("div",{className:"grid grid-cols-6 gap-2",children:id.map(v=>o.jsx("button",{type:"button",onClick:()=>g("color",v),className:`w-8 h-8 rounded-full border-2 transition-all ${c.color===v?"border-gray-900 dark:border-gray-100 scale-110":"border-gray-300 dark:border-gray-600 hover:border-gray-500 dark:hover:border-gray-400"}`,style:{backgroundColor:v},disabled:i,title:v},v))}),o.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:c.color}}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Color seleccionado: ",c.color]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",value:c.description||"",onChange:v=>g("description",v.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.description?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Descripcin opcional de la etiqueta",disabled:i,maxLength:200}),u.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(c.description||"").length,"/200 caracteres"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:c.isActive||!1,onChange:v=>g("isActive",v.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 bg-white dark:bg-gray-800",disabled:i}),o.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Etiqueta activa"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Las etiquetas inactivas no aparecern como opciones en los formularios"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vista Previa"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.tagName||"Nombre de la etiqueta"}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs text-white",style:{backgroundColor:y(c.category)},children:(b=Ia.find(v=>v.value===c.category))==null?void 0:b.label}),!c.isActive&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200",children:"Inactiva"})]})]}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md p-4",children:o.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("p",{className:"font-medium mb-1",children:"Informacin de la etiqueta:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsxs("li",{children:[" Creada: ",new Date(n.createdAt).toLocaleDateString()]}),o.jsxs("li",{children:[" ltima actualizacin:"," ",new Date(n.updatedAt).toLocaleDateString()]}),o.jsxs("li",{children:[" Uso actual: ",n.usageCount," documento",n.usageCount!==1?"s":""]})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:p,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:i,className:"flex items-center",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Actualizando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"edit",size:"sm",className:"mr-2"}),"Guardar Cambios"]})})]})]})}):null}function Sxe({isOpen:t,onClose:e,onSuccess:r,tag:n}){const{success:s,error:a}=nr(),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!t||!(n!=null&&n.id)){d(null);return}h(!0);try{const b=await Hm.getTagById(n.id);b.success&&b.data?d(b.data):d(n)}catch(b){console.error("Error loading tag data:",b),d(n)}finally{h(!1)}})()},[t,n]);const f=async()=>{if(n){l(!0);try{await Hm.deleteTag(n.id),s("Etiqueta eliminada exitosamente"),e(),r()}catch(y){console.error("Error deleting tag:",y),a(y.message||"Error al eliminar la etiqueta")}finally{l(!1)}}},m=y=>Ia.find(b=>b.value===y)||Ia[5];if(!n)return null;const p=c||n,g=m(p.category);return o.jsx(At,{isOpen:t,onClose:e,title:"Eliminar Etiqueta",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full",children:o.jsx(O,{action:"warning",size:"md",color:"danger","aria-hidden":"true"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Ests seguro de eliminar esta etiqueta?"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin no se puede deshacer."})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Informacin de la etiqueta:"}),u?o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Cargando informacin..."})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.tagName}),o.jsx("span",{className:"px-2 py-1 rounded-full text-xs text-white",style:{backgroundColor:g.color},children:g.label}),!p.isActive&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200",children:"Inactiva"})]}),p.description&&o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Descripcin:"," "]}),o.jsx("span",{className:"text-xs text-gray-900 dark:text-white",children:p.description})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Uso actual:"," "]}),o.jsxs("span",{className:"text-xs text-gray-900 dark:text-white font-medium",children:[p.usageCount," documento",p.usageCount!==1?"s":""]})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creada:"," "]}),o.jsx("span",{className:"text-xs text-gray-900 dark:text-white",children:new Date(p.createdAt).toLocaleDateString()})]})]})]}),!u&&p.usageCount>0&&o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(O,{action:"warning",size:"sm",color:"warning"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Advertencia"}),o.jsxs("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:["Esta etiqueta est siendo utilizada por"," ",o.jsx("strong",{children:p.usageCount}),p.usageCount===1?" documento":" documentos",". Al eliminarla, se remover automticamente de todos los documentos que la utilicen."]})]})]})}),!u&&p.usageCount===0&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Etiqueta sin uso"}),o.jsx("p",{className:"mt-1 text-sm text-green-700 dark:text-green-300",children:"Esta etiqueta no est siendo utilizada por ningn documento. Es seguro eliminarla."})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:i||u,children:"Cancelar"}),o.jsx(ae,{type:"button",variant:"danger",onClick:f,disabled:i||u,className:"flex items-center",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Eliminando..."]}):u?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"delete",size:"sm",className:"mr-2"}),"Eliminar Etiqueta"]})})]})]})})}function Exe(){const{success:t,error:e}=nr(),[r,n]=x.useState([]),[s,a]=x.useState(!0),[i,l]=x.useState(""),[c,d]=x.useState("all"),[u,h]=x.useState(!1),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[k,N]=x.useState(null),S=async()=>{try{a(!0);const J={category:c,isActive:u?!1:void 0,search:i||void 0},_=await Hm.getAllTags(J);n(_.data)}catch(J){console.error("Error loading tags:",J),e(J.message||"Error al cargar las etiquetas")}finally{a(!1)}};x.useEffect(()=>{S()},[c,u]);const C=r.filter(J=>J.tagName.toLowerCase().includes(i.toLowerCase())||J.description&&J.description.toLowerCase().includes(i.toLowerCase())),E=()=>{g(!1),S()},T=J=>{N(J),b(!0)},R=()=>{b(!1),N(null),S()},B=J=>{N(J),w(!0)},M=()=>{w(!1),N(null),S()},L=async J=>{try{await Hm.toggleTagStatus(J.id),t(`Etiqueta ${J.isActive?"desactivada":"activada"} exitosamente`),S()}catch(_){e(_.message||"Error al cambiar el estado de la etiqueta")}},V=J=>Ia.find(_=>_.value===J)||Ia[5],Q=(()=>{const J=r.length,_=r.filter(K=>K.isActive).length,H=J-_,P=Ia.reduce((K,F)=>(K[F.value]=r.filter(ne=>ne.category===F.value).length,K),{});return{total:J,active:_,inactive:H,byCategory:P}})();return s?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((J,_)=>o.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},_))}),o.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]})})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"tag",size:"xl",color:"blue",className:"mr-3"}),"Gestin de Etiquetas"]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Administra las etiquetas del sistema de gestin del conocimiento"})]}),o.jsxs(ae,{onClick:()=>g(!0),variant:"primary",className:"flex items-center",children:[o.jsx(O,{action:"add",size:"lg",className:"mr-2"}),"Nueva Etiqueta"]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(O,{action:"tag",size:"lg",color:"blue",title:"Total de etiquetas"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Total"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Q.total})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:o.jsx(O,{action:"view",size:"lg",color:"green",title:"Etiquetas activas"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Activas"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Q.active})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg",children:o.jsx(O,{action:"hide",size:"lg",color:"red",title:"Etiquetas inactivas"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Inactivas"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Q.inactive})]})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:o.jsx(O,{action:"filter",size:"lg",color:"purple",title:"Categoras disponibles"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Categoras"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Ia.length})]})]})})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:o.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsx("div",{className:"flex-1 max-w-md",children:o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:o.jsx(O,{action:"search",size:"md",color:"neutral"})}),o.jsx("input",{type:"text",placeholder:"Buscar etiquetas...",value:i,onChange:J=>l(J.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]})}),o.jsxs(ae,{onClick:()=>m(!f),variant:"secondary",className:"flex items-center",children:[o.jsx(O,{action:"filter",size:"md",className:"mr-2"}),"Filtros"]})]}),f&&o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categora"}),o.jsxs("select",{value:c,onChange:J=>d(J.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"all",children:"Todas las categoras"}),Ia.map(J=>o.jsx("option",{value:J.value,children:J.label},J.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:u,onChange:J=>h(J.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 dark:bg-gray-700"}),o.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Solo inactivas"})]})})]})]})})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Etiqueta"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Categora"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Uso"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"tag",size:"xl",className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),o.jsx("p",{className:"text-lg font-medium",children:"No se encontraron etiquetas"}),o.jsx("p",{className:"text-sm",children:i||c!=="all"||u?"Intenta ajustar los filtros de bsqueda":"Crea tu primera etiqueta para comenzar"})]})}):C.map(J=>{const _=V(J.category);return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:J.color}}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.tagName}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Creada:"," ",new Date(J.createdAt).toLocaleDateString()]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:_.color},children:_.label})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white max-w-xs truncate",children:J.description||"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[J.usageCount," documento",J.usageCount!==1?"s":""]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>L(J),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${J.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:J.isActive?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"view",size:"sm",className:"mr-1"}),"Activa"]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"hide",size:"sm",className:"mr-1"}),"Inactiva"]})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>T(J),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar etiqueta",children:o.jsx(O,{action:"edit",size:"md"})}),o.jsx("button",{onClick:()=>B(J),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar etiqueta",children:o.jsx(O,{action:"delete",size:"md"})})]})})]},J.id)})})]})})})]}),o.jsx(Cxe,{isOpen:p,onClose:()=>g(!1),onSuccess:E}),o.jsx(Nxe,{isOpen:y,onClose:()=>{b(!1),N(null)},onSuccess:R,tag:k}),o.jsx(Sxe,{isOpen:v,onClose:()=>{w(!1),N(null)},onSuccess:M,tag:k})]})}function $B(t,e){return function(){return t.apply(e,arguments)}}const{toString:jxe}=Object.prototype,{getPrototypeOf:$T}=Object,{iterator:Ik,toStringTag:FB}=Symbol,Dk=(t=>e=>{const r=jxe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),go=t=>(t=t.toLowerCase(),e=>Dk(e)===t),Lk=t=>e=>typeof e===t,{isArray:bp}=Array,Gg=Lk("undefined");function Zx(t){return t!==null&&!Gg(t)&&t.constructor!==null&&!Gg(t.constructor)&&pa(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const BB=go("ArrayBuffer");function Txe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&BB(t.buffer),e}const _xe=Lk("string"),pa=Lk("function"),zB=Lk("number"),Yx=t=>t!==null&&typeof t=="object",Axe=t=>t===!0||t===!1,nv=t=>{if(Dk(t)!=="object")return!1;const e=$T(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(FB in t)&&!(Ik in t)},Mxe=t=>{if(!Yx(t)||Zx(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Oxe=go("Date"),Rxe=go("File"),Pxe=go("Blob"),Ixe=go("FileList"),Dxe=t=>Yx(t)&&pa(t.pipe),Lxe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pa(t.append)&&((e=Dk(t))==="formdata"||e==="object"&&pa(t.toString)&&t.toString()==="[object FormData]"))},$xe=go("URLSearchParams"),[Fxe,Bxe,zxe,Uxe]=["ReadableStream","Request","Response","Headers"].map(go),Vxe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xx(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),bp(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Zx(t))return;const a=r?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let l;for(n=0;n<i;n++)l=a[n],e.call(null,t[l],l,t)}}function UB(t,e){if(Zx(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const _u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,VB=t=>!Gg(t)&&t!==_u;function hj(){const{caseless:t}=VB(this)&&this||{},e={},r=(n,s)=>{const a=t&&UB(e,s)||s;nv(e[a])&&nv(n)?e[a]=hj(e[a],n):nv(n)?e[a]=hj({},n):bp(n)?e[a]=n.slice():e[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&Xx(arguments[n],r);return e}const Hxe=(t,e,r,{allOwnKeys:n}={})=>(Xx(e,(s,a)=>{r&&pa(s)?t[a]=$B(s,r):t[a]=s},{allOwnKeys:n}),t),Wxe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qxe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Gxe=(t,e,r,n)=>{let s,a,i;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)i=s[a],(!n||n(i,t,e))&&!l[i]&&(e[i]=t[i],l[i]=!0);t=r!==!1&&$T(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Kxe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Zxe=t=>{if(!t)return null;if(bp(t))return t;let e=t.length;if(!zB(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Yxe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&$T(Uint8Array)),Xxe=(t,e)=>{const n=(t&&t[Ik]).call(t);let s;for(;(s=n.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},Jxe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Qxe=go("HTMLFormElement"),eye=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),ZO=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),tye=go("RegExp"),HB=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xx(r,(s,a)=>{let i;(i=e(s,a,t))!==!1&&(n[a]=i||s)}),Object.defineProperties(t,n)},rye=t=>{HB(t,(e,r)=>{if(pa(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(pa(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},nye=(t,e)=>{const r={},n=s=>{s.forEach(a=>{r[a]=!0})};return bp(t)?n(t):n(String(t).split(e)),r},sye=()=>{},aye=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function iye(t){return!!(t&&pa(t.append)&&t[FB]==="FormData"&&t[Ik])}const oye=t=>{const e=new Array(10),r=(n,s)=>{if(Yx(n)){if(e.indexOf(n)>=0)return;if(Zx(n))return n;if(!("toJSON"in n)){e[s]=n;const a=bp(n)?[]:{};return Xx(n,(i,l)=>{const c=r(i,s+1);!Gg(c)&&(a[l]=c)}),e[s]=void 0,a}}return n};return r(t,0)},lye=go("AsyncFunction"),cye=t=>t&&(Yx(t)||pa(t))&&pa(t.then)&&pa(t.catch),WB=((t,e)=>t?setImmediate:e?((r,n)=>(_u.addEventListener("message",({source:s,data:a})=>{s===_u&&a===r&&n.length&&n.shift()()},!1),s=>{n.push(s),_u.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",pa(_u.postMessage)),dye=typeof queueMicrotask<"u"?queueMicrotask.bind(_u):typeof process<"u"&&process.nextTick||WB,uye=t=>t!=null&&pa(t[Ik]),ke={isArray:bp,isArrayBuffer:BB,isBuffer:Zx,isFormData:Lxe,isArrayBufferView:Txe,isString:_xe,isNumber:zB,isBoolean:Axe,isObject:Yx,isPlainObject:nv,isEmptyObject:Mxe,isReadableStream:Fxe,isRequest:Bxe,isResponse:zxe,isHeaders:Uxe,isUndefined:Gg,isDate:Oxe,isFile:Rxe,isBlob:Pxe,isRegExp:tye,isFunction:pa,isStream:Dxe,isURLSearchParams:$xe,isTypedArray:Yxe,isFileList:Ixe,forEach:Xx,merge:hj,extend:Hxe,trim:Vxe,stripBOM:Wxe,inherits:qxe,toFlatObject:Gxe,kindOf:Dk,kindOfTest:go,endsWith:Kxe,toArray:Zxe,forEachEntry:Xxe,matchAll:Jxe,isHTMLForm:Qxe,hasOwnProperty:ZO,hasOwnProp:ZO,reduceDescriptors:HB,freezeMethods:rye,toObjectSet:nye,toCamelCase:eye,noop:sye,toFiniteNumber:aye,findKey:UB,global:_u,isContextDefined:VB,isSpecCompliantForm:iye,toJSONObject:oye,isAsyncFn:lye,isThenable:cye,setImmediate:WB,asap:dye,isIterable:uye};function _t(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ke.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ke.toJSONObject(this.config),code:this.code,status:this.status}}});const qB=_t.prototype,GB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{GB[t]={value:t}});Object.defineProperties(_t,GB);Object.defineProperty(qB,"isAxiosError",{value:!0});_t.from=(t,e,r,n,s,a)=>{const i=Object.create(qB);return ke.toFlatObject(t,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),_t.call(i,t.message,e,r,n,s),i.cause=t,i.name=t.name,a&&Object.assign(i,a),i};const hye=null;function fj(t){return ke.isPlainObject(t)||ke.isArray(t)}function KB(t){return ke.endsWith(t,"[]")?t.slice(0,-2):t}function YO(t,e,r){return t?t.concat(e).map(function(s,a){return s=KB(s),!r&&a?"["+s+"]":s}).join(r?".":""):e}function fye(t){return ke.isArray(t)&&!t.some(fj)}const mye=ke.toFlatObject(ke,{},null,function(e){return/^is[A-Z]/.test(e)});function $k(t,e,r){if(!ke.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!ke.isUndefined(y[g])});const n=r.metaTokens,s=r.visitor||u,a=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ke.isSpecCompliantForm(e);if(!ke.isFunction(s))throw new TypeError("visitor must be a function");function d(p){if(p===null)return"";if(ke.isDate(p))return p.toISOString();if(ke.isBoolean(p))return p.toString();if(!c&&ke.isBlob(p))throw new _t("Blob is not supported. Use a Buffer instead.");return ke.isArrayBuffer(p)||ke.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,y){let b=p;if(p&&!y&&typeof p=="object"){if(ke.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(ke.isArray(p)&&fye(p)||(ke.isFileList(p)||ke.endsWith(g,"[]"))&&(b=ke.toArray(p)))return g=KB(g),b.forEach(function(w,k){!(ke.isUndefined(w)||w===null)&&e.append(i===!0?YO([g],k,a):i===null?g:g+"[]",d(w))}),!1}return fj(p)?!0:(e.append(YO(y,g,a),d(p)),!1)}const h=[],f=Object.assign(mye,{defaultVisitor:u,convertValue:d,isVisitable:fj});function m(p,g){if(!ke.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),ke.forEach(p,function(b,v){(!(ke.isUndefined(b)||b===null)&&s.call(e,b,ke.isString(v)?v.trim():v,g,f))===!0&&m(b,g?g.concat(v):[v])}),h.pop()}}if(!ke.isObject(t))throw new TypeError("data must be an object");return m(t),e}function XO(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function FT(t,e){this._pairs=[],t&&$k(t,this,e)}const ZB=FT.prototype;ZB.append=function(e,r){this._pairs.push([e,r])};ZB.toString=function(e){const r=e?function(n){return e.call(this,n,XO)}:XO;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function pye(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function YB(t,e,r){if(!e)return t;const n=r&&r.encode||pye;ke.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(s?a=s(e,r):a=ke.isURLSearchParams(e)?e.toString():new FT(e,r).toString(n),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class JO{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ke.forEach(this.handlers,function(n){n!==null&&e(n)})}}const XB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gye=typeof URLSearchParams<"u"?URLSearchParams:FT,xye=typeof FormData<"u"?FormData:null,yye=typeof Blob<"u"?Blob:null,vye={isBrowser:!0,classes:{URLSearchParams:gye,FormData:xye,Blob:yye},protocols:["http","https","file","blob","url","data"]},BT=typeof window<"u"&&typeof document<"u",mj=typeof navigator=="object"&&navigator||void 0,bye=BT&&(!mj||["ReactNative","NativeScript","NS"].indexOf(mj.product)<0),wye=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kye=BT&&window.location.href||"http://localhost",Cye=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:BT,hasStandardBrowserEnv:bye,hasStandardBrowserWebWorkerEnv:wye,navigator:mj,origin:kye},Symbol.toStringTag,{value:"Module"})),Ss={...Cye,...vye};function Nye(t,e){return $k(t,new Ss.classes.URLSearchParams,{visitor:function(r,n,s,a){return Ss.isNode&&ke.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function Sye(t){return ke.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Eye(t){const e={},r=Object.keys(t);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],e[a]=t[a];return e}function JB(t){function e(r,n,s,a){let i=r[a++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=a>=r.length;return i=!i&&ke.isArray(s)?s.length:i,c?(ke.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!l):((!s[i]||!ke.isObject(s[i]))&&(s[i]=[]),e(r,n,s[i],a)&&ke.isArray(s[i])&&(s[i]=Eye(s[i])),!l)}if(ke.isFormData(t)&&ke.isFunction(t.entries)){const r={};return ke.forEachEntry(t,(n,s)=>{e(Sye(n),s,r,0)}),r}return null}function jye(t,e,r){if(ke.isString(t))try{return(e||JSON.parse)(t),ke.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Jx={transitional:XB,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,a=ke.isObject(e);if(a&&ke.isHTMLForm(e)&&(e=new FormData(e)),ke.isFormData(e))return s?JSON.stringify(JB(e)):e;if(ke.isArrayBuffer(e)||ke.isBuffer(e)||ke.isStream(e)||ke.isFile(e)||ke.isBlob(e)||ke.isReadableStream(e))return e;if(ke.isArrayBufferView(e))return e.buffer;if(ke.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Nye(e,this.formSerializer).toString();if((l=ke.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return $k(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||s?(r.setContentType("application/json",!1),jye(e)):e}],transformResponse:[function(e){const r=this.transitional||Jx.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(ke.isResponse(e)||ke.isReadableStream(e))return e;if(e&&ke.isString(e)&&(n&&!this.responseType||s)){const i=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(i)throw l.name==="SyntaxError"?_t.from(l,_t.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ss.classes.FormData,Blob:Ss.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ke.forEach(["delete","get","head","post","put","patch"],t=>{Jx.headers[t]={}});const Tye=ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_ye=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),r=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!r||e[r]&&Tye[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},QO=Symbol("internals");function f0(t){return t&&String(t).trim().toLowerCase()}function sv(t){return t===!1||t==null?t:ke.isArray(t)?t.map(sv):String(t)}function Aye(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Mye=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function eN(t,e,r,n,s){if(ke.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!ke.isString(e)){if(ke.isString(n))return e.indexOf(n)!==-1;if(ke.isRegExp(n))return n.test(e)}}function Oye(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Rye(t,e){const r=ke.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,a,i){return this[n].call(this,e,s,a,i)},configurable:!0})})}let ga=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function a(l,c,d){const u=f0(c);if(!u)throw new Error("header name must be a non-empty string");const h=ke.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=sv(l))}const i=(l,c)=>ke.forEach(l,(d,u)=>a(d,u,c));if(ke.isPlainObject(e)||e instanceof this.constructor)i(e,r);else if(ke.isString(e)&&(e=e.trim())&&!Mye(e))i(_ye(e),r);else if(ke.isObject(e)&&ke.isIterable(e)){let l={},c,d;for(const u of e){if(!ke.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ke.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,r)}else e!=null&&a(r,e,n);return this}get(e,r){if(e=f0(e),e){const n=ke.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Aye(s);if(ke.isFunction(r))return r.call(this,s,n);if(ke.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=f0(e),e){const n=ke.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||eN(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function a(i){if(i=f0(i),i){const l=ke.findKey(n,i);l&&(!r||eN(n,n[l],l,r))&&(delete n[l],s=!0)}}return ke.isArray(e)?e.forEach(a):a(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const a=r[n];(!e||eN(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const r=this,n={};return ke.forEach(this,(s,a)=>{const i=ke.findKey(n,a);if(i){r[i]=sv(s),delete r[a];return}const l=e?Oye(a):String(a).trim();l!==a&&delete r[a],r[l]=sv(s),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return ke.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&ke.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[QO]=this[QO]={accessors:{}}).accessors,s=this.prototype;function a(i){const l=f0(i);n[l]||(Rye(s,i),n[l]=!0)}return ke.isArray(e)?e.forEach(a):a(e),this}};ga.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ke.reduceDescriptors(ga.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});ke.freezeMethods(ga);function tN(t,e){const r=this||Jx,n=e||r,s=ga.from(n.headers);let a=n.data;return ke.forEach(t,function(l){a=l.call(r,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function QB(t){return!!(t&&t.__CANCEL__)}function wp(t,e,r){_t.call(this,t??"canceled",_t.ERR_CANCELED,e,r),this.name="CanceledError"}ke.inherits(wp,_t,{__CANCEL__:!0});function ez(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new _t("Request failed with status code "+r.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Pye(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Iye(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,a=0,i;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=n[a];i||(i=d),r[s]=c,n[s]=d;let h=a,f=0;for(;h!==s;)f+=r[h++],h=h%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),d-i<e)return;const m=u&&d-u;return m?Math.round(f*1e3/m):void 0}}function Dye(t,e){let r=0,n=1e3/e,s,a;const i=(d,u=Date.now())=>{r=u,s=null,a&&(clearTimeout(a),a=null),t(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?i(d,u):(s=d,a||(a=setTimeout(()=>{a=null,i(s)},n-h)))},()=>s&&i(s)]}const jb=(t,e,r=3)=>{let n=0;const s=Iye(50,250);return Dye(a=>{const i=a.loaded,l=a.lengthComputable?a.total:void 0,c=i-n,d=s(c),u=i<=l;n=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},r)},eR=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},tR=t=>(...e)=>ke.asap(()=>t(...e)),Lye=Ss.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Ss.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Ss.origin),Ss.navigator&&/(msie|trident)/i.test(Ss.navigator.userAgent)):()=>!0,$ye=Ss.hasStandardBrowserEnv?{write(t,e,r,n,s,a){const i=[t+"="+encodeURIComponent(e)];ke.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),ke.isString(n)&&i.push("path="+n),ke.isString(s)&&i.push("domain="+s),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fye(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Bye(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function tz(t,e,r){let n=!Fye(e);return t&&(n||r==!1)?Bye(t,e):e}const rR=t=>t instanceof ga?{...t}:t;function xh(t,e){e=e||{};const r={};function n(d,u,h,f){return ke.isPlainObject(d)&&ke.isPlainObject(u)?ke.merge.call({caseless:f},d,u):ke.isPlainObject(u)?ke.merge({},u):ke.isArray(u)?u.slice():u}function s(d,u,h,f){if(ke.isUndefined(u)){if(!ke.isUndefined(d))return n(void 0,d,h,f)}else return n(d,u,h,f)}function a(d,u){if(!ke.isUndefined(u))return n(void 0,u)}function i(d,u){if(ke.isUndefined(u)){if(!ke.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in e)return n(d,u);if(h in t)return n(void 0,d)}const c={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,h)=>s(rR(d),rR(u),h,!0)};return ke.forEach(Object.keys({...t,...e}),function(u){const h=c[u]||s,f=h(t[u],e[u],u);ke.isUndefined(f)&&h!==l||(r[u]=f)}),r}const rz=t=>{const e=xh({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:l}=e;e.headers=i=ga.from(i),e.url=YB(tz(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ke.isFormData(r)){if(Ss.hasStandardBrowserEnv||Ss.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Ss.hasStandardBrowserEnv&&(n&&ke.isFunction(n)&&(n=n(e)),n||n!==!1&&Lye(e.url))){const d=s&&a&&$ye.read(a);d&&i.set(s,d)}return e},zye=typeof XMLHttpRequest<"u",Uye=zye&&function(t){return new Promise(function(r,n){const s=rz(t);let a=s.data;const i=ga.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,f,m,p;function g(){m&&m(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function b(){if(!y)return;const w=ga.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:t,request:y};ez(function(C){r(C),g()},function(C){n(C),g()},N),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(n(new _t("Request aborted",_t.ECONNABORTED,t,y)),y=null)},y.onerror=function(){n(new _t("Network Error",_t.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||XB;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new _t(k,N.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,t,y)),y=null},a===void 0&&i.setContentType(null),"setRequestHeader"in y&&ke.forEach(i.toJSON(),function(k,N){y.setRequestHeader(N,k)}),ke.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),l&&l!=="json"&&(y.responseType=s.responseType),d&&([f,p]=jb(d,!0),y.addEventListener("progress",f)),c&&y.upload&&([h,m]=jb(c),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(u=w=>{y&&(n(!w||w.type?new wp(null,t,y):w),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const v=Pye(s.url);if(v&&Ss.protocols.indexOf(v)===-1){n(new _t("Unsupported protocol "+v+":",_t.ERR_BAD_REQUEST,t));return}y.send(a||null)})},Vye=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const a=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof _t?u:new wp(u instanceof Error?u.message:u))}};let i=e&&setTimeout(()=>{i=null,a(new _t(`timeout ${e} of ms exceeded`,_t.ETIMEDOUT))},e);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),t=null)};t.forEach(d=>d.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>ke.asap(l),c}},Hye=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Wye=async function*(t,e){for await(const r of qye(t))yield*Hye(r,e)},qye=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},nR=(t,e,r,n)=>{const s=Wye(t,e);let a=0,i,l=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let f=a+=h;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},Fk=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",nz=Fk&&typeof ReadableStream=="function",Gye=Fk&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),sz=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Kye=nz&&sz(()=>{let t=!1;const e=new Request(Ss.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),sR=64*1024,pj=nz&&sz(()=>ke.isReadableStream(new Response("").body)),Tb={stream:pj&&(t=>t.body)};Fk&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tb[e]&&(Tb[e]=ke.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new _t(`Response type '${e}' is not supported`,_t.ERR_NOT_SUPPORT,n)})})})(new Response);const Zye=async t=>{if(t==null)return 0;if(ke.isBlob(t))return t.size;if(ke.isSpecCompliantForm(t))return(await new Request(Ss.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ke.isArrayBufferView(t)||ke.isArrayBuffer(t))return t.byteLength;if(ke.isURLSearchParams(t)&&(t=t+""),ke.isString(t))return(await Gye(t)).byteLength},Yye=async(t,e)=>{const r=ke.toFiniteNumber(t.getContentLength());return r??Zye(e)},Xye=Fk&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:a,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:f}=rz(t);d=d?(d+"").toLowerCase():"text";let m=Vye([s,a&&a.toAbortSignal()],i),p;const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let y;try{if(c&&Kye&&r!=="get"&&r!=="head"&&(y=await Yye(u,n))!==0){let N=new Request(e,{method:"POST",body:n,duplex:"half"}),S;if(ke.isFormData(n)&&(S=N.headers.get("content-type"))&&u.setContentType(S),N.body){const[C,E]=eR(y,jb(tR(c)));n=nR(N.body,sR,C,E)}}ke.isString(h)||(h=h?"include":"omit");const b="credentials"in Request.prototype;p=new Request(e,{...f,signal:m,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:b?h:void 0});let v=await fetch(p,f);const w=pj&&(d==="stream"||d==="response");if(pj&&(l||w&&g)){const N={};["status","statusText","headers"].forEach(T=>{N[T]=v[T]});const S=ke.toFiniteNumber(v.headers.get("content-length")),[C,E]=l&&eR(S,jb(tR(l),!0))||[];v=new Response(nR(v.body,sR,C,()=>{E&&E(),g&&g()}),N)}d=d||"text";let k=await Tb[ke.findKey(Tb,d)||"text"](v,t);return!w&&g&&g(),await new Promise((N,S)=>{ez(N,S,{data:k,headers:ga.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:p})})}catch(b){throw g&&g(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,t,p),{cause:b.cause||b}):_t.from(b,b&&b.code,t,p)}}),gj={http:hye,xhr:Uye,fetch:Xye};ke.forEach(gj,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const aR=t=>`- ${t}`,Jye=t=>ke.isFunction(t)||t===null||t===!1,az={getAdapter:t=>{t=ke.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let a=0;a<e;a++){r=t[a];let i;if(n=r,!Jye(r)&&(n=gj[(i=String(r)).toLowerCase()],n===void 0))throw new _t(`Unknown adapter '${i}'`);if(n)break;s[i||"#"+a]=n}if(!n){const a=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=e?a.length>1?`since :
`+a.map(aR).join(`
`):" "+aR(a[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:gj};function rN(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wp(null,t)}function iR(t){return rN(t),t.headers=ga.from(t.headers),t.data=tN.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),az.getAdapter(t.adapter||Jx.adapter)(t).then(function(n){return rN(t),n.data=tN.call(t,t.transformResponse,n),n.headers=ga.from(n.headers),n},function(n){return QB(n)||(rN(t),n&&n.response&&(n.response.data=tN.call(t,t.transformResponse,n.response),n.response.headers=ga.from(n.response.headers))),Promise.reject(n)})}const iz="1.11.0",Bk={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Bk[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const oR={};Bk.transitional=function(e,r,n){function s(a,i){return"[Axios v"+iz+"] Transitional option '"+a+"'"+i+(n?". "+n:"")}return(a,i,l)=>{if(e===!1)throw new _t(s(i," has been removed"+(r?" in "+r:"")),_t.ERR_DEPRECATED);return r&&!oR[i]&&(oR[i]=!0,console.warn(s(i," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,i,l):!0}};Bk.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Qye(t,e,r){if(typeof t!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const a=n[s],i=e[a];if(i){const l=t[a],c=l===void 0||i(l,a,t);if(c!==!0)throw new _t("option "+a+" must be "+c,_t.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _t("Unknown option "+a,_t.ERR_BAD_OPTION)}}const av={assertOptions:Qye,validators:Bk},wo=av.validators;let Xu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new JO,response:new JO}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=xh(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:a}=r;n!==void 0&&av.assertOptions(n,{silentJSONParsing:wo.transitional(wo.boolean),forcedJSONParsing:wo.transitional(wo.boolean),clarifyTimeoutError:wo.transitional(wo.boolean)},!1),s!=null&&(ke.isFunction(s)?r.paramsSerializer={serialize:s}:av.assertOptions(s,{encode:wo.function,serialize:wo.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),av.assertOptions(r,{baseUrl:wo.spelling("baseURL"),withXsrfToken:wo.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=a&&ke.merge(a.common,a[r.method]);a&&ke.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),r.headers=ga.concat(i,a);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,f;if(!c){const p=[iR.bind(this),void 0];for(p.unshift(...l),p.push(...d),f=p.length,u=Promise.resolve(r);h<f;)u=u.then(p[h++],p[h++]);return u}f=l.length;let m=r;for(h=0;h<f;){const p=l[h++],g=l[h++];try{m=p(m)}catch(y){g.call(this,y);break}}try{u=iR.call(this,m)}catch(p){return Promise.reject(p)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(e){e=xh(this.defaults,e);const r=tz(e.baseURL,e.url,e.allowAbsoluteUrls);return YB(r,e.params,e.paramsSerializer)}};ke.forEach(["delete","get","head","options"],function(e){Xu.prototype[e]=function(r,n){return this.request(xh(n||{},{method:e,url:r,data:(n||{}).data}))}});ke.forEach(["post","put","patch"],function(e){function r(n){return function(a,i,l){return this.request(xh(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}Xu.prototype[e]=r(),Xu.prototype[e+"Form"]=r(!0)});let e1e=class oz{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(l=>{n.subscribe(l),a=l}).then(s);return i.cancel=function(){n.unsubscribe(a)},i},e(function(a,i,l){n.reason||(n.reason=new wp(a,i,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new oz(function(s){e=s}),cancel:e}}};function t1e(t){return function(r){return t.apply(null,r)}}function r1e(t){return ke.isObject(t)&&t.isAxiosError===!0}const xj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xj).forEach(([t,e])=>{xj[e]=t});function lz(t){const e=new Xu(t),r=$B(Xu.prototype.request,e);return ke.extend(r,Xu.prototype,e,{allOwnKeys:!0}),ke.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return lz(xh(t,s))},r}const ln=lz(Jx);ln.Axios=Xu;ln.CanceledError=wp;ln.CancelToken=e1e;ln.isCancel=QB;ln.VERSION=iz;ln.toFormData=$k;ln.AxiosError=_t;ln.Cancel=ln.CanceledError;ln.all=function(e){return Promise.all(e)};ln.spread=t1e;ln.isAxiosError=r1e;ln.mergeConfig=xh;ln.AxiosHeaders=ga;ln.formToJSON=t=>JB(ke.isHTMLForm(t)?new FormData(t):t);ln.getAdapter=az.getAdapter;ln.HttpStatusCode=xj;ln.default=ln;const{Axios:lBe,AxiosError:cBe,CanceledError:dBe,isCancel:uBe,CancelToken:hBe,VERSION:fBe,all:mBe,Cancel:pBe,isAxiosError:gBe,spread:xBe,toFormData:yBe,AxiosHeaders:vBe,HttpStatusCode:bBe,formToJSON:wBe,getAdapter:kBe,mergeConfig:CBe}=ln,n1e=Pn.api.baseUrl,Gt=ln.create({baseURL:n1e,headers:{"Content-Type":"application/json"}});Gt.interceptors.request.use(t=>{const e=ct.getValidTokens();return e!=null&&e.token&&(t.headers.Authorization=`Bearer ${e.token}`),t});Gt.interceptors.response.use(t=>t,t=>{var e,r,n,s,a,i,l;if(console.error(" API Error:",{url:(e=t.config)==null?void 0:e.url,method:(r=t.config)==null?void 0:r.method,status:(n=t.response)==null?void 0:n.status,data:(s=t.response)==null?void 0:s.data,message:t.message}),t.response){const c=t.response.status,d=((a=t.config)==null?void 0:a.url)||"unknown";switch(c){case 401:t.userMessage="Sesin expirada. Por favor, inicia sesin nuevamente.",t.technicalDetails=`Error 401 en ${d}: Token de autenticacin invlido o expirado`;break;case 403:t.userMessage="No tienes permisos para acceder a este recurso.",t.technicalDetails=`Error 403 en ${d}: Permisos insuficientes`;break;case 404:t.userMessage="El recurso solicitado no fue encontrado.",t.technicalDetails=`Error 404 en ${d}: Recurso no encontrado`;break;case 500:t.userMessage="Error interno del servidor. Por favor, contacta al administrador.",t.technicalDetails=`Error 500 en ${d}: Error interno del servidor`;break;case 502:t.userMessage="Error de conexin con el servidor. Intntalo ms tarde.",t.technicalDetails=`Error 502 en ${d}: Bad Gateway`;break;case 503:t.userMessage="El servicio no est disponible temporalmente.",t.technicalDetails=`Error 503 en ${d}: Service Unavailable`;break;default:t.userMessage=`Error ${c}: ${((l=(i=t.response)==null?void 0:i.data)==null?void 0:l.message)||"Error desconocido"}`,t.technicalDetails=`Error ${c} en ${d}`}}else t.request?(t.userMessage="Error de conexin. Verifica tu conexin a internet.",t.technicalDetails="No se recibi respuesta del servidor"):(t.userMessage="Error inesperado. Por favor, intntalo nuevamente.",t.technicalDetails=t.message);return Promise.reject(t)});class s1e{static async findAll(e){const{data:r}=await Gt.get("/knowledge",{params:e});return r}static async findOne(e){const{data:r}=await Gt.get(`/knowledge/${e}`);return r}static async create(e){const{data:r}=await Gt.post("/knowledge",e);return r}static async update(e,r){const{data:n}=await Gt.put(`/knowledge/${e}`,r);return n}static async publish(e,r,n){const{data:s}=await Gt.put(`/knowledge/${e}/publish`,{isPublished:r,changeSummary:n});return s}static async archive(e,r,n,s){const{data:a}=await Gt.put(`/knowledge/${e}/archive`,{isArchived:r,reason:n,replacementDocumentId:s});return a}static async remove(e){await Gt.delete(`/knowledge/${e}`)}static async getVersions(e){const{data:r}=await Gt.get(`/knowledge/${e}/versions`);return r}static async getVersion(e,r){const{data:n}=await Gt.get(`/knowledge/${e}/versions/${r}`);return n}static async search(e,r){const{data:n}=await Gt.get("/knowledge/search",{params:{q:e,limit:r}});return n}static async getSearchSuggestions(e,r){const{data:n}=await Gt.get("/knowledge/search/suggestions",{params:{q:e,limit:r}});return n}static async enhancedSearch(e){const{data:r}=await Gt.post("/knowledge/search/advanced",e);return r}static async getStats(e){const{data:r}=await Gt.get(`/knowledge/${e}/stats`);return r}static async getFeedback(e){const{data:r}=await Gt.get(`/knowledge/${e}/feedback`);return r}}class Nd{static async findAll(e){const{data:r}=await Gt.get("/document-types",{params:e?{active:!0}:void 0});return r}static async findOne(e){const{data:r}=await Gt.get(`/document-types/${e}`);return r}static async create(e){const{data:r}=await Gt.post("/document-types",e);return r}static async update(e,r){const{data:n}=await Gt.put(`/document-types/${e}`,r);return n}static async toggleActive(e){const{data:r}=await Gt.put(`/document-types/${e}/toggle`);return r}static async remove(e){await Gt.delete(`/document-types/${e}`)}static async getStats(e){const{data:r}=await Gt.get(`/document-types/${e}/stats`);return r}}class a1e{static async create(e){const{data:r}=await Gt.post("/feedback",e);return r}static async checkUserFeedback(e){const{data:r}=await Gt.get(`/feedback/check/${e}`);return r}static async update(e,r){const{data:n}=await Gt.put(`/feedback/${e}`,r);return n}static async remove(e){await Gt.delete(`/feedback/${e}`)}static async getMyFeedback(){const{data:e}=await Gt.get("/feedback/my");return e}}class zk{static async createTag(e,r){const{data:n}=await Gt.post("/knowledge/tags",{tagName:e,...r});return n}static async findByName(e){var r;try{const{data:n}=await Gt.get(`/knowledge/tags/${encodeURIComponent(e)}`);return n}catch(n){if(((r=n.response)==null?void 0:r.status)===404)return null;throw n}}static async getAllTags(){const{data:e}=await Gt.get("/knowledge/tags");return e}static async getTagById(e){const{data:r}=await Gt.get(`/knowledge/tags/details/${e}`);return r}static async deleteTag(e){await Gt.delete(`/knowledge/tags/${e}`)}static async getPopularTags(e){const{data:r}=await Gt.get("/knowledge/tags/popular",{params:{limit:e}});return r}}const Ai={documents:s1e,types:Nd,feedback:a1e,tags:zk},nN=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899","#F43F5E","#6B7280"],i1e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function o1e({isOpen:t,onClose:e,onSuccess:r}){const{success:n,error:s}=po(),[a,i]=x.useState(!1),[l,c]=x.useState({code:"",name:"",description:"",icon:"",color:nN[0],displayOrder:0}),[d,u]=x.useState({}),h=()=>{const g={};return l.code.trim()?l.code.trim().length<2?g.code="El cdigo debe tener al menos 2 caracteres":l.code.trim().length>50?g.code="El cdigo no puede exceder 50 caracteres":/^[A-Z0-9_-]+$/i.test(l.code.trim())||(g.code="El cdigo solo puede contener letras, nmeros, guiones y guiones bajos"):g.code="El cdigo es requerido",l.name.trim()?l.name.trim().length<2?g.name="El nombre debe tener al menos 2 caracteres":l.name.trim().length>100&&(g.name="El nombre no puede exceder 100 caracteres"):g.name="El nombre es requerido",l.description&&l.description.length>500&&(g.description="La descripcin no puede exceder 500 caracteres"),l.displayOrder!==void 0&&l.displayOrder<0&&(g.displayOrder="El orden de visualizacin debe ser un nmero positivo"),u(g),Object.keys(g).length===0},f=async g=>{var y;if(g.preventDefault(),!!h()){i(!0);try{await Nd.create({...l,code:l.code.trim().toUpperCase(),name:l.name.trim(),description:((y=l.description)==null?void 0:y.trim())||void 0}),n("Tipo de documento creado exitosamente"),m(),r()}catch(b){console.error("Error creating document type:",b),s(b.message||"Error al crear el tipo de documento")}finally{i(!1)}}},m=()=>{c({code:"",name:"",description:"",icon:"",color:nN[0],displayOrder:0}),u({}),e()},p=(g,y)=>{if(c(b=>({...b,[g]:y})),d[g]){const b={...d};delete b[g],u(b)}};return o.jsx(At,{isOpen:t,onClose:m,title:"Crear Nuevo Tipo de Documento",children:o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cdigo *"}),o.jsx("input",{type:"text",id:"code",value:l.code,onChange:g=>p("code",g.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.code?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: MANUAL, GUIDE, PROC",disabled:a,maxLength:50}),d.code&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.code}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.code.length,"/50 caracteres. Solo letras, nmeros, guiones y guiones bajos."]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre *"}),o.jsx("input",{type:"text",id:"name",value:l.name,onChange:g=>p("name",g.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.name?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Manual de usuario, Gua tcnica",disabled:a,maxLength:100}),d.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.name}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[l.name.length,"/100 caracteres"]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",value:l.description||"",onChange:g=>p("description",g.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.description?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Descripcin opcional del tipo de documento",disabled:a,maxLength:500}),d.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(l.description||"").length,"/500 caracteres"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Icono"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",id:"icon",value:l.icon||"",onChange:g=>p("icon",g.target.value),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",placeholder:"Ej:  o emoji",disabled:a,maxLength:10}),o.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Iconos comunes:"}),o.jsx("div",{className:"grid grid-cols-8 gap-1",children:i1e.map((g,y)=>o.jsx("button",{type:"button",onClick:()=>p("icon",g),className:"p-1 text-lg hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-center",title:`Seleccionar ${g}`,children:g},y))})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"grid grid-cols-6 gap-2",children:nN.map(g=>o.jsx("button",{type:"button",onClick:()=>p("color",g),className:`w-8 h-8 rounded-full border-2 ${l.color===g?"border-gray-900 dark:border-white scale-110":"border-gray-300 dark:border-gray-600 hover:scale-105"} transition-transform`,style:{backgroundColor:g},title:g},g))}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:l.color}}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Color seleccionado: ",l.color]})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Orden de visualizacin"}),o.jsx("input",{type:"number",id:"displayOrder",value:l.displayOrder||0,onChange:g=>p("displayOrder",parseInt(g.target.value)||0),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d.displayOrder?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"0",disabled:a,min:0,step:1}),d.displayOrder&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.displayOrder}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Orden en que aparecer en las listas (0 = primero)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vista Previa"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[l.icon&&o.jsx("span",{className:"text-lg",children:l.icon}),o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l.name||"Nombre del tipo de documento"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",l.code||"CODIGO",")"]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:m,disabled:a,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:a,className:"flex items-center",children:a?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Crear Tipo de Documento"]})})]})]})})}const sN=["#EF4444","#F97316","#F59E0B","#EAB308","#84CC16","#22C55E","#10B981","#14B8A6","#06B6D4","#0EA5E9","#3B82F6","#6366F1","#8B5CF6","#A855F7","#D946EF","#EC4899","#F43F5E","#6B7280"],l1e=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function c1e({isOpen:t,onClose:e,onSuccess:r,documentType:n}){const{success:s,error:a}=po(),[i,l]=x.useState(!1),[c,d]=x.useState({code:"",name:"",description:"",icon:"",color:sN[0],isActive:!0,displayOrder:0}),[u,h]=x.useState({});x.useEffect(()=>{t&&n&&(d({code:n.code,name:n.name,description:n.description||"",icon:n.icon||"",color:n.color,isActive:n.isActive,displayOrder:n.displayOrder}),h({}))},[t,n]);const f=()=>{var b,v;const y={};return(b=c.code)!=null&&b.trim()?c.code.trim().length<2?y.code="El cdigo debe tener al menos 2 caracteres":c.code.trim().length>50?y.code="El cdigo no puede exceder 50 caracteres":/^[A-Z0-9_-]+$/i.test(c.code.trim())||(y.code="El cdigo solo puede contener letras, nmeros, guiones y guiones bajos"):y.code="El cdigo es requerido",(v=c.name)!=null&&v.trim()?c.name.trim().length<2?y.name="El nombre debe tener al menos 2 caracteres":c.name.trim().length>100&&(y.name="El nombre no puede exceder 100 caracteres"):y.name="El nombre es requerido",c.description&&c.description.length>500&&(y.description="La descripcin no puede exceder 500 caracteres"),c.displayOrder!==void 0&&c.displayOrder<0&&(y.displayOrder="El orden de visualizacin debe ser un nmero positivo"),h(y),Object.keys(y).length===0},m=async y=>{var b,v,w;if(y.preventDefault(),!(!n||!f())){l(!0);try{await Nd.update(n.id,{...c,code:(b=c.code)==null?void 0:b.trim().toUpperCase(),name:(v=c.name)==null?void 0:v.trim(),description:((w=c.description)==null?void 0:w.trim())||void 0}),s("Tipo de documento actualizado exitosamente"),p(),r()}catch(k){console.error("Error updating document type:",k),a(k.message||"Error al actualizar el tipo de documento")}finally{l(!1)}}},p=()=>{d({code:"",name:"",description:"",icon:"",color:sN[0],isActive:!0,displayOrder:0}),h({}),e()},g=(y,b)=>{if(d(v=>({...v,[y]:b})),u[y]){const v={...u};delete v[y],h(v)}};return n?o.jsx(At,{isOpen:t,onClose:p,title:"Editar Tipo de Documento",children:o.jsxs("form",{onSubmit:m,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cdigo *"}),o.jsx("input",{type:"text",id:"code",value:c.code||"",onChange:y=>g("code",y.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.code?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: MANUAL, GUIDE, PROC",disabled:i,maxLength:50}),u.code&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.code}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(c.code||"").length,"/50 caracteres. Solo letras, nmeros, guiones y guiones bajos."]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre *"}),o.jsx("input",{type:"text",id:"name",value:c.name||"",onChange:y=>g("name",y.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.name?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Ej: Manual de usuario, Gua tcnica",disabled:i,maxLength:100}),u.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.name}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(c.name||"").length,"/100 caracteres"]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx("textarea",{id:"description",value:c.description||"",onChange:y=>g("description",y.target.value),rows:3,className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.description?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Descripcin opcional del tipo de documento",disabled:i,maxLength:500}),u.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.description}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(c.description||"").length,"/500 caracteres"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Icono"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",id:"icon",value:c.icon||"",onChange:y=>g("icon",y.target.value),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",placeholder:"Ej:  o emoji",disabled:i,maxLength:10}),o.jsxs("div",{className:"border rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:"Iconos comunes:"}),o.jsx("div",{className:"grid grid-cols-8 gap-1",children:l1e.map((y,b)=>o.jsx("button",{type:"button",onClick:()=>g("icon",y),className:"p-1 text-lg hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-center",title:`Seleccionar ${y}`,children:y},b))})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"grid grid-cols-6 gap-2",children:sN.map(y=>o.jsx("button",{type:"button",onClick:()=>g("color",y),className:`w-8 h-8 rounded-full border-2 ${c.color===y?"border-gray-900 dark:border-white scale-110":"border-gray-300 dark:border-gray-600 hover:scale-105"} transition-transform`,style:{backgroundColor:y},title:y},y))}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:c.color}}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Color seleccionado: ",c.color]})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Orden de visualizacin"}),o.jsx("input",{type:"number",id:"displayOrder",value:c.displayOrder||0,onChange:y=>g("displayOrder",parseInt(y.target.value)||0),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${u.displayOrder?"border-red-300 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"0",disabled:i,min:0,step:1}),u.displayOrder&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.displayOrder}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Orden en que aparecer en las listas (0 = primero)"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:c.isActive||!1,onChange:y=>g("isActive",y.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 bg-white dark:bg-gray-800",disabled:i}),o.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Tipo de documento activo"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Los tipos de documento inactivos no aparecern como opciones en los formularios"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vista Previa"}),o.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[c.icon&&o.jsx("span",{className:"text-lg",children:c.icon}),o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name||"Nombre del tipo de documento"}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",c.code||"CODIGO",")"]}),!c.isActive&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200",children:"Inactivo"})]})]}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-md p-4",children:o.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("p",{className:"font-medium mb-1",children:"Informacin del tipo de documento:"}),o.jsxs("ul",{className:"space-y-1",children:[o.jsxs("li",{children:[" Creado:"," ",new Date(n.createdAt).toLocaleDateString()]}),o.jsxs("li",{children:[" ltima actualizacin:"," ",new Date(n.updatedAt).toLocaleDateString()]}),o.jsxs("li",{children:[" ID: ",n.id]})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:p,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:i,className:"flex items-center",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Actualizando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"edit",size:"sm",color:"orange"}),"Actualizar Tipo de Documento"]})})]})]})}):null}function d1e({isOpen:t,onClose:e,onSuccess:r,documentType:n}){const{success:s,error:a}=po(),[i,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,m]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!t||!(n!=null&&n.id)){d(null),h(null);return}m(!0);try{const b=await Nd.findOne(n.id);d(b);const v=await Nd.getStats(n.id);h(v)}catch(b){console.error("Error loading document type data:",b),d(n),h(null)}finally{m(!1)}})()},[t,n]);const p=async()=>{if(n){l(!0);try{await Nd.remove(n.id),s("Tipo de documento eliminado exitosamente"),e(),r()}catch(y){console.error("Error deleting document type:",y),a(y.message||"Error al eliminar el tipo de documento")}finally{l(!1)}}};if(!n)return null;const g=c||n;return o.jsx(At,{isOpen:t,onClose:e,title:"Eliminar Tipo de Documento",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full",children:o.jsx(O,{action:"warning",size:"md",color:"red"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Ests seguro de eliminar este tipo de documento?"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin no se puede deshacer."})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Informacin del tipo de documento:"}),f?o.jsxs("div",{className:"flex items-center justify-center py-4",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"ml-2 text-sm text-gray-500 dark:text-gray-400",children:"Cargando informacin..."})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[g.icon&&o.jsx("span",{className:"text-lg",children:g.icon}),o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.name}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",g.code,")"]}),!g.isActive&&o.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200",children:"Inactivo"})]}),g.description&&o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Descripcin:"," "]}),o.jsx("span",{className:"text-xs text-gray-900 dark:text-white",children:g.description})]}),u&&o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Documentos asociados:"," "]}),o.jsxs("span",{className:"text-xs text-gray-900 dark:text-white font-medium",children:[u.totalDocuments," total",u.totalDocuments>0&&o.jsxs(o.Fragment,{children:[" ","(",u.publishedDocuments," publicados,"," ",u.archivedDocuments," archivados",u.templateDocuments>0&&`, ${u.templateDocuments} plantillas`,")"]})]})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Creado:"," "]}),o.jsx("span",{className:"text-xs text-gray-900 dark:text-white",children:new Date(g.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Orden de visualizacin:"," "]}),o.jsx("span",{className:"text-xs text-gray-900 dark:text-white",children:g.displayOrder})]})]})]}),!f&&u&&u.totalDocuments>0&&o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx(O,{action:"warning",size:"sm",color:"yellow"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Advertencia"}),o.jsxs("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:["Este tipo de documento est siendo utilizado por"," ",o.jsx("strong",{children:u.totalDocuments}),u.totalDocuments===1?" documento":" documentos",". Al eliminarlo, estos documentos quedarn sin tipo de documento asignado."]}),u.publishedDocuments>0&&o.jsxs("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:[o.jsx("strong",{children:"Nota:"})," Hay ",u.publishedDocuments," ","documentos publicados que usan este tipo."]})]})]})}),!f&&u&&u.totalDocuments===0&&o.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h4",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Eliminacin segura"}),o.jsx("p",{className:"mt-1 text-sm text-green-700 dark:text-green-300",children:"Este tipo de documento no tiene documentos asociados y puede eliminarse de forma segura."})]})]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"secondary",onClick:e,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"button",variant:"danger",onClick:p,disabled:i,className:"flex items-center",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Eliminando..."]}):"Eliminar Tipo de Documento"})]})]})})}function u1e(){const{success:t,error:e}=po(),[r,n]=x.useState([]),[s,a]=x.useState(!0),[i,l]=x.useState({}),[c,d]=x.useState("displayOrder"),[u,h]=x.useState("asc"),[f,m]=x.useState(!1),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(null),k=async()=>{try{a(!0);const V=await Nd.findAll(i.isActive);n(V||[])}catch(V){console.error("Error loading document types:",V),e(V.message||"Error al cargar los tipos de documento")}finally{a(!1)}};x.useEffect(()=>{k()},[i.isActive]);const N=x.useMemo(()=>{let V=[...r];if(i.search){const ee=i.search.toLowerCase();V=V.filter(Q=>{var J;return Q.name.toLowerCase().includes(ee)||Q.code.toLowerCase().includes(ee)||((J=Q.description)==null?void 0:J.toLowerCase().includes(ee))})}return V.sort((ee,Q)=>{let J,_;switch(c){case"name":J=ee.name,_=Q.name;break;case"code":J=ee.code,_=Q.code;break;case"displayOrder":J=ee.displayOrder,_=Q.displayOrder;break;case"createdAt":J=new Date(ee.createdAt),_=new Date(Q.createdAt);break;default:return 0}return J<_?u==="asc"?-1:1:J>_?u==="asc"?1:-1:0}),V},[r,i,c,u]),S=V=>{c===V?h(u==="asc"?"desc":"asc"):(d(V),h("asc"))},C=()=>{k(),t("Tipo de documento creado exitosamente")},E=V=>{w(V),g(!0)},T=()=>{k(),t("Tipo de documento actualizado exitosamente")},R=V=>{w(V),b(!0)},B=()=>{k(),t("Tipo de documento eliminado exitosamente")},M=async V=>{try{await Nd.toggleActive(V.id),k(),t(`Tipo de documento ${V.isActive?"desactivado":"activado"} exitosamente`)}catch(ee){console.error("Error toggling document type status:",ee),e(ee.message||"Error al cambiar el estado del tipo de documento")}},L=V=>c!==V?null:u==="asc"?o.jsx(O,{action:"chevronUp",size:"sm"}):o.jsx(O,{action:"dropdown",size:"sm"});return o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Tipos de Documento"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gestiona los tipos de documentos del sistema"})]}),o.jsxs(ae,{onClick:()=>m(!0),className:"flex items-center",children:[o.jsx(O,{action:"add",size:"sm",className:"mr-2"}),"Nuevo Tipo"]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),o.jsx("input",{type:"text",value:i.search||"",onChange:V=>l({...i,search:V.target.value}),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",placeholder:"Buscar por nombre, cdigo o descripcin..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),o.jsxs("select",{value:i.isActive===void 0?"all":i.isActive?"active":"inactive",onChange:V=>{const ee=V.target.value;l({...i,isActive:ee==="all"?void 0:ee==="active"})},className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:[o.jsx("option",{value:"all",children:"Todos"}),o.jsx("option",{value:"active",children:"Activos"}),o.jsx("option",{value:"inactive",children:"Inactivos"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ordenar por"}),o.jsxs("select",{value:c,onChange:V=>d(V.target.value),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:[o.jsx("option",{value:"displayOrder",children:"Orden de visualizacin"}),o.jsx("option",{value:"name",children:"Nombre"}),o.jsx("option",{value:"code",children:"Cdigo"}),o.jsx("option",{value:"createdAt",children:"Fecha de creacin"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),o.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Activos"}),o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.filter(V=>V.isActive).length})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inactivos"}),o.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r.filter(V=>!V.isActive).length})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Filtrados"}),o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:N.length})]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>S("code"),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Cdigo"}),L("code")]})}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>S("name"),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Nombre"}),L("name")]})}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcin"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>S("displayOrder"),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Orden"}),L("displayOrder")]})}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600",onClick:()=>S("createdAt"),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:"Creado"}),L("createdAt")]})}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-4 text-center",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Cargando tipos de documento..."})]})})}):N.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No se encontraron tipos de documento"})}):N.map(V=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.code})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[V.icon&&o.jsx("span",{className:"text-lg",children:V.icon}),o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.name})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-w-xs truncate",children:V.description||"Sin descripcin"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600",style:{backgroundColor:V.color}}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:V.color})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:V.displayOrder})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.isActive?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200"}`,children:V.isActive?"Activo":"Inactivo"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(V.createdAt).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>M(V),className:V.isActive?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:V.isActive?"Desactivar tipo de documento":"Activar tipo de documento",children:V.isActive?o.jsx(O,{action:"deactivate",size:"sm"}):o.jsx(O,{action:"activate",size:"sm"})}),o.jsx("button",{onClick:()=>E(V),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar tipo de documento",children:o.jsx(O,{action:"edit",size:"sm"})}),o.jsx("button",{onClick:()=>R(V),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar tipo de documento",children:o.jsx(O,{action:"delete",size:"sm"})})]})})]},V.id))})]})})}),o.jsx(o1e,{isOpen:f,onClose:()=>m(!1),onSuccess:C}),o.jsx(c1e,{isOpen:p,onClose:()=>{g(!1),w(null)},onSuccess:T,documentType:v}),o.jsx(d1e,{isOpen:y,onClose:()=>{b(!1),w(null)},onSuccess:B,documentType:v})]})}let h1e=0;const Kg=[],iv=[],cz=()=>{iv.forEach(t=>t([...Kg]))},f1e=t=>{const e=`toast-${++h1e}`,r={...t,id:e,duration:t.duration||5e3};Kg.push(r),cz(),setTimeout(()=>{dz(e)},r.duration)},dz=t=>{const e=Kg.findIndex(r=>r.id===t);e>-1&&(Kg.splice(e,1),cz())},Uk=()=>{const[t,e]=x.useState([...Kg]),r=x.useCallback(n=>(iv.push(n),()=>{const s=iv.indexOf(n);s>-1&&iv.splice(s,1)}),[]);return x.useState(()=>r(e)),{toasts:t,addToast:f1e,removeToast:dz}},m1e=Pn.api.baseUrl;class p1e{async makeRequest(e,r={}){const n=ct.getValidTokens(),s=n==null?void 0:n.token,a={headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers},...r},i=await fetch(`${m1e}${e}`,a);if(!i.ok){const l=await i.json().catch(()=>({}));throw new Error(l.message||`HTTP error! status: ${i.status}`)}return i.status===204?null:i.json()}async getAllPriorities(e){try{const r=new URLSearchParams;e!=null&&e.page&&r.append("page",e.page.toString()),e!=null&&e.limit&&r.append("limit",e.limit.toString()),e!=null&&e.sortBy&&r.append("sortBy",e.sortBy),e!=null&&e.sortOrder&&r.append("sortOrder",e.sortOrder),e!=null&&e.search&&r.append("search",e.search),(e==null?void 0:e.isActive)!==void 0&&r.append("isActive",e.isActive.toString());const n=r.toString(),s=n?`/admin/todo-priorities?${n}`:"/admin/todo-priorities";return await this.makeRequest(s)}catch(r){throw r}}async getPriorityById(e){try{return await this.makeRequest(`/admin/todo-priorities/${e}`)}catch(r){throw r}}async createPriority(e){try{return await this.makeRequest("/admin/todo-priorities",{method:"POST",body:JSON.stringify(e)})}catch(r){throw r}}async updatePriority(e,r){try{return await this.makeRequest(`/admin/todo-priorities/${e}`,{method:"PUT",body:JSON.stringify(r)})}catch(n){throw n}}async deletePriority(e){try{return await this.makeRequest(`/admin/todo-priorities/${e}`,{method:"DELETE"})}catch(r){throw r}}async togglePriorityStatus(e){try{return await this.makeRequest(`/admin/todo-priorities/${e}/toggle`,{method:"PATCH"})}catch(r){throw r}}async reorderPriorities(e){try{return await this.makeRequest("/admin/todo-priorities/reorder",{method:"POST",body:JSON.stringify({priorities:e})})}catch(r){throw r}}async getPriorityStats(){try{return await this.makeRequest("/admin/todo-priorities/stats")}catch(e){throw e}}}const rm=new p1e,aN=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899","#6b7280"],g1e=({isOpen:t,onClose:e,onSuccess:r})=>{const{addToast:n}=Uk(),[s,a]=x.useState({name:"",description:"",color:aN[0],level:1}),[i,l]=x.useState(!1),[c,d]=x.useState({}),u=async m=>{var g;m.preventDefault();const p={};if(s.name.trim()||(p.name="El nombre es requerido"),(s.level<1||s.level>10)&&(p.level="El nivel debe estar entre 1 y 10"),Object.keys(p).length>0){d(p);return}l(!0),d({});try{const y=await rm.createPriority({...s,description:((g=s.description)==null?void 0:g.trim())||void 0});if(y.success)n({type:"success",title:"xito",message:"Prioridad creada correctamente"}),r(),h();else throw new Error(y.message||"Error al crear la prioridad")}catch(y){const b=y instanceof Error?y.message:"Error desconocido";n({type:"error",title:"Error",message:b})}finally{l(!1)}},h=()=>{a({name:"",description:"",color:aN[0],level:1}),d({}),l(!1),e()},f=(m,p)=>{a(g=>({...g,[m]:p})),c[m]&&d(g=>({...g,[m]:""}))};return t?o.jsx(At,{isOpen:t,onClose:h,title:"Nueva Prioridad",size:"md",children:o.jsxs("form",{onSubmit:u,children:[o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre *"}),o.jsx(ft,{type:"text",value:s.name,onChange:m=>f("name",m.target.value),placeholder:"Ingrese el nombre de la prioridad",className:c.name?"border-red-300":""}),c.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx(Rk,{value:s.description,onChange:m=>f("description",m.target.value),placeholder:"Descripcin opcional de la prioridad",rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nivel (1-10) *"}),o.jsx(ft,{type:"number",min:"1",max:"10",value:s.level,onChange:m=>f("level",parseInt(m.target.value)||1),className:c.level?"border-red-300":""}),c.level&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.level})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),o.jsx("div",{className:"flex space-x-2 mt-2",children:aN.map(m=>o.jsx("button",{type:"button",onClick:()=>f("color",m),className:`w-8 h-8 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${s.color===m?"border-gray-900 dark:border-white":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:m}},m))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 px-6 py-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"ghost",onClick:h,disabled:i,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:i,children:i?"Creando...":"Crear Prioridad"})]})]})}):null},lR=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899","#6b7280"],x1e=({isOpen:t,onClose:e,onSuccess:r,priority:n})=>{const{addToast:s}=Uk(),[a,i]=x.useState({name:"",description:"",color:lR[0],level:1}),[l,c]=x.useState(!1),[d,u]=x.useState({});x.useEffect(()=>{n&&i({name:n.name,description:n.description||"",color:n.color,level:n.level})},[n]);const h=async p=>{var y,b;p.preventDefault();const g={};if((y=a.name)!=null&&y.trim()||(g.name="El nombre es requerido"),(!a.level||a.level<1||a.level>10)&&(g.level="El nivel debe estar entre 1 y 10"),Object.keys(g).length>0){u(g);return}c(!0),u({});try{const v=await rm.updatePriority(n.id,{...a,description:((b=a.description)==null?void 0:b.trim())||void 0});if(v.success)s({type:"success",title:"xito",message:"Prioridad actualizada correctamente"}),r(),f();else throw new Error(v.message||"Error al actualizar la prioridad")}catch(v){const w=v instanceof Error?v.message:"Error desconocido";s({type:"error",title:"Error",message:w})}finally{c(!1)}},f=()=>{u({}),c(!1),e()},m=(p,g)=>{i(y=>({...y,[p]:g})),d[p]&&u(y=>({...y,[p]:""}))};return!t||!n?null:o.jsx(At,{isOpen:t,onClose:f,title:"Editar Prioridad",size:"md",children:o.jsxs("form",{onSubmit:h,children:[o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre *"}),o.jsx(ft,{type:"text",value:a.name,onChange:p=>m("name",p.target.value),placeholder:"Ingrese el nombre de la prioridad",className:d.name?"border-red-300":""}),d.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),o.jsx(Rk,{value:a.description,onChange:p=>m("description",p.target.value),placeholder:"Descripcin opcional de la prioridad",rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nivel (1-10) *"}),o.jsx(ft,{type:"number",min:"1",max:"10",value:a.level,onChange:p=>m("level",parseInt(p.target.value)||1),className:d.level?"border-red-300":""}),d.level&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.level})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),o.jsx("div",{className:"flex space-x-2 mt-2",children:lR.map(p=>o.jsx("button",{type:"button",onClick:()=>m("color",p),className:`w-8 h-8 rounded-full border-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${a.color===p?"border-gray-900 dark:border-white":"border-gray-300 dark:border-gray-600"}`,style:{backgroundColor:p}},p))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 px-6 py-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{type:"button",variant:"ghost",onClick:f,disabled:l,children:"Cancelar"}),o.jsx(ae,{type:"submit",variant:"primary",disabled:l,children:l?"Actualizando...":"Actualizar Prioridad"})]})]})})},y1e=({isOpen:t,onClose:e,onSuccess:r,priority:n})=>{const{addToast:s}=Uk(),[a,i]=x.useState(!1),l=async()=>{i(!0);try{const c=await rm.deletePriority(n.id);if(c.success)s({type:"success",title:"xito",message:"Prioridad eliminada correctamente"}),r(),e();else throw new Error(c.message||"Error al eliminar la prioridad")}catch(c){const d=c instanceof Error?c.message:"Error desconocido";s({type:"error",title:"Error",message:d})}finally{i(!1)}};return!t||!n?null:o.jsx(At,{isOpen:t,onClose:e,title:"Eliminar Prioridad",size:"sm",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"lg",color:"danger"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Eliminar prioridad?"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin no se puede deshacer."})]})]}),o.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-md",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:n.color}}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.name}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(Nivel ",n.level,")"]})]}),n.description&&o.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:n.description})]}),o.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-6",children:"Ests seguro de que deseas eliminar esta prioridad? Esta accin no se puede deshacer y podra afectar las tareas que la utilicen."}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(ae,{type:"button",variant:"ghost",onClick:e,disabled:a,children:"Cancelar"}),o.jsx(ae,{type:"button",variant:"danger",onClick:l,disabled:a,children:a?"Eliminando...":"Eliminar"})]})]})})},v1e=()=>{const{addToast:t}=Uk(),[e,r]=x.useState([]),[n,s]=x.useState({total:0,active:0,inactive:0}),[a,i]=x.useState(!0),[l,c]=x.useState(null),[d,u]=x.useState(""),[h,f]=x.useState(null),[m,p]=x.useState(1),[g]=x.useState(10),[y,b]=x.useState(1),[v,w]=x.useState(!1),[k,N]=x.useState(!1),[S,C]=x.useState(!1),[E,T]=x.useState(null);x.useEffect(()=>{R(),B()},[m,d,h]);const R=async()=>{try{i(!0),c(null);const z={page:m,limit:g,sortBy:"level",sortOrder:"ASC",search:d,...h!==null&&{isActive:h}},Z=await rm.getAllPriorities(z);if(Z.success&&Z.data)r(Z.data.priorities),b(Z.data.totalPages);else throw new Error(Z.message||"Error al cargar prioridades")}catch(z){const Z=z instanceof Error?z.message:"Error desconocido";c(Z),t({type:"error",title:"Error",message:Z})}finally{i(!1)}},B=async()=>{try{const z=await rm.getPriorityStats();z.success&&z.data&&s(z.data)}catch(z){console.error("Error al cargar estadsticas:",z)}},M=()=>{w(!0)},L=z=>{T(z),N(!0)},V=z=>{T(z),C(!0)},ee=async z=>{try{const Z=await rm.togglePriorityStatus(z.id);if(Z.success)t({type:"success",title:"xito",message:`Prioridad ${z.isActive?"desactivada":"activada"} correctamente`}),R(),B();else throw new Error(Z.message||"Error al cambiar estado")}catch(Z){const oe=Z instanceof Error?Z.message:"Error desconocido";t({type:"error",title:"Error",message:oe})}},Q=()=>{w(!1),R(),B()},J=()=>{N(!1),T(null),R(),B()},_=()=>{C(!1),T(null),R(),B()},H=z=>{u(z.target.value),p(1)},P=z=>{f(z),p(1)},K=()=>{u(""),f(null),p(1)},F=z=>{p(z)},ne=()=>{const z=[],Z=Math.max(1,m-2),oe=Math.min(y,m+2);Z>1&&(z.push(o.jsx("button",{onClick:()=>F(1),className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:"1"},1)),Z>2&&z.push(o.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:"..."},"ellipsis1")));for(let ue=Z;ue<=oe;ue++)z.push(o.jsx("button",{onClick:()=>F(ue),className:`relative inline-flex items-center px-4 py-2 text-sm font-medium border ${m===ue?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-200":"text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:ue},ue));return oe<y&&(oe<y-1&&z.push(o.jsx("span",{className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600",children:"..."},"ellipsis2")),z.push(o.jsx("button",{onClick:()=>F(y),className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:y},y))),z};return a&&e.length===0?o.jsx("div",{className:"flex items-center justify-center min-h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-5",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"analytics",size:"sm",color:"gray"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Total"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:n.total})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"success",size:"sm",color:"green"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Activas"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:n.active})]})})]})})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg",children:o.jsx("div",{className:"p-3 sm:p-5",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"error",size:"sm",color:"red"})}),o.jsx("div",{className:"ml-2 sm:ml-5 min-w-0",children:o.jsxs("dl",{children:[o.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:"Inactivas"}),o.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900 dark:text-white",children:n.inactive})]})})]})})})]}),o.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 dark:text-white sm:text-3xl sm:truncate",children:"Prioridades de Tareas"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gestiona las prioridades disponibles para las tareas del sistema"})]}),o.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:o.jsxs(ae,{variant:"primary",size:"md",onClick:M,children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nueva Prioridad"]})})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:o.jsx("div",{className:"px-4 py-5 sm:p-6",children:o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Buscar"}),o.jsx("input",{type:"text",id:"search",value:d,onChange:H,placeholder:"Buscar por nombre o descripcin...",className:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Estado"}),o.jsxs("select",{id:"status",value:h===null?"":h.toString(),onChange:z=>P(z.target.value===""?null:z.target.value==="true"),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"true",children:"Activos"}),o.jsx("option",{value:"false",children:"Inactivos"})]})]}),o.jsx("div",{className:"sm:col-span-2 flex items-end space-x-3",children:o.jsxs(ae,{variant:"ghost",size:"md",onClick:K,children:[o.jsx(O,{action:"filter",size:"sm",color:"gray"}),"Limpiar Filtros"]})})]})})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow overflow-hidden sm:rounded-md",children:[l&&o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 dark:border-red-500 p-4 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"warning",size:"sm",color:"red"})}),o.jsx("div",{className:"ml-3",children:o.jsx("p",{className:"text-sm text-red-700 dark:text-red-200",children:l})})]})}),e.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(O,{action:"warning",size:"xl",color:"gray"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay prioridades"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:d||h!==null?"No se encontraron prioridades con los filtros aplicados.":"Comienza creando una nueva prioridad."}),!d&&h===null&&o.jsx("div",{className:"mt-6",children:o.jsxs("button",{type:"button",onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nueva Prioridad"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800",children:e.map(z=>o.jsx("li",{className:"bg-white dark:bg-gray-800",children:o.jsxs("div",{className:"px-4 py-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[o.jsx("div",{className:"h-4 w-4 rounded-full mr-3 flex-shrink-0",style:{backgroundColor:z.color}}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:z.name}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:["Nivel ",z.level]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.isActive?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:z.isActive?"Activa":"Inactiva"})]}),z.description&&o.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400 truncate",children:z.description})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[o.jsx("button",{onClick:()=>ee(z),className:z.isActive?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:z.isActive?"Desactivar prioridad":"Activar prioridad",children:z.isActive?o.jsx(O,{action:"deactivate",size:"sm",color:"red"}):o.jsx(O,{action:"activate",size:"sm",color:"green"})}),o.jsx("button",{onClick:()=>L(z),className:"text-orange-600 hover:text-orange-900 dark:text-orange-400 dark:hover:text-orange-300",title:"Editar prioridad",children:o.jsx(O,{action:"edit",size:"sm",color:"orange"})}),o.jsx("button",{onClick:()=>V(z),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar prioridad",children:o.jsx(O,{action:"delete",size:"sm",color:"red"})})]})]})},z.id))}),y>1&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>F(Math.max(1,m-1)),disabled:m===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>F(Math.min(y,m+1)),disabled:m===y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando pgina"," ",o.jsx("span",{className:"font-medium",children:m})," de"," ",o.jsx("span",{className:"font-medium",children:y})]})}),o.jsx("div",{children:o.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[o.jsxs("button",{onClick:()=>F(Math.max(1,m-1)),disabled:m===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Anterior"}),o.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),ne(),o.jsxs("button",{onClick:()=>F(Math.min(y,m+1)),disabled:m===y,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Siguiente"}),o.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})]})]}),o.jsx(g1e,{isOpen:v,onClose:()=>w(!1),onSuccess:Q}),E&&o.jsxs(o.Fragment,{children:[o.jsx(x1e,{isOpen:k,onClose:()=>{N(!1),T(null)},onSuccess:J,priority:E}),o.jsx(y1e,{isOpen:S,onClose:()=>{C(!1),T(null)},onSuccess:_,priority:E})]})]})};class b1e{constructor(){ve(this,"baseURL",`${Pn.api.baseUrl}/audit`)}getToken(){const e=ct.getValidTokens();return(e==null?void 0:e.token)||null}async makeRequest(e,r={}){const n=this.getToken(),s=await fetch(`${this.baseURL}${e}`,{...r,headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`},...r.headers}});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);const a=await s.json();if(!a.data)throw new Error("No se recibieron datos del servidor");return a.data}async getAuditLogs(e){var l,c,d,u,h,f;const r=new URLSearchParams;e&&Object.entries(e).forEach(([m,p])=>{p!=null&&p!==""&&r.append(m,String(p))});const n=`/logs${r.toString()?`?${r.toString()}`:""}`,s=this.getToken(),a=await fetch(`${this.baseURL}${n}`,{headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}}});if(!a.ok)throw new Error(`Error ${a.status}: ${a.statusText}`);const i=await a.json();if(!i.success)throw new Error(i.message||"Error al obtener los logs de auditora");return{logs:i.data||[],total:((l=i.pagination)==null?void 0:l.total)||0,page:((c=i.pagination)==null?void 0:c.page)||1,limit:((d=i.pagination)==null?void 0:d.limit)||25,totalPages:((u=i.pagination)==null?void 0:u.totalPages)||0,hasNextPage:((h=i.pagination)==null?void 0:h.hasNextPage)||!1,hasPreviousPage:((f=i.pagination)==null?void 0:f.hasPrevPage)||!1}}async getAuditStats(e){const r=new URLSearchParams;e&&Object.entries(e).forEach(([s,a])=>{a!=null&&a!==""&&r.append(s,String(a))});const n=`/stats${r.toString()?`?${r.toString()}`:""}`;return this.makeRequest(n)}async getEntityHistory(e,r){return this.makeRequest(`/entity/${e}/${r}`)}async getAuditLogDetails(e){return this.makeRequest(`/logs/${e}`)}async exportAuditLogs(e){const r=this.getToken(),n=await fetch(`${this.baseURL}/export`,{method:"POST",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}},body:JSON.stringify(e)});if(!n.ok)throw new Error(`Error ${n.status}: ${n.statusText}`);return n.blob()}async createAuditLog(e){return this.makeRequest("/logs",{method:"POST",body:JSON.stringify(e)})}async cleanupOldLogs(e){return this.makeRequest("/cleanup",{method:"DELETE",body:JSON.stringify(e)})}async getAuditUsers(){return this.makeRequest("/users")}downloadFile(e,r,n){const s=window.URL.createObjectURL(e),a=document.createElement("a");a.href=s;let i="";switch(n){case"JSON":i=".json";break;case"CSV":i=".csv";break;case"XLSX":i=".xlsx";break;default:i=".txt"}a.download=`${r}${i}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}formatDateForFilter(e){return e.toISOString().split("T")[0]}formatDateTimeForFilter(e){return e.toISOString()}hasAuditViewPermission(){return!0}hasAuditAdminPermission(){return!0}}const o1=new b1e;var uz=(t=>(t.CREATE="CREATE",t.UPDATE="UPDATE",t.DELETE="DELETE",t.LOGIN="LOGIN",t.LOGOUT="LOGOUT",t.LOGOUT_ALL="LOGOUT_ALL",t.FORCE_LOGOUT="FORCE_LOGOUT",t.PASSWORD_CHANGE="PASSWORD_CHANGE",t.PERMISSION_CHANGE="PERMISSION_CHANGE",t.BULK_OPERATION="BULK_OPERATION",t.EXPORT="EXPORT",t.IMPORT="IMPORT",t.ARCHIVE="ARCHIVE",t.RESTORE="RESTORE",t.READ="READ",t.VIEW="VIEW",t.DOWNLOAD="DOWNLOAD",t))(uz||{}),hz=(t=>(t.FIELD_ADDED="FIELD_ADDED",t.FIELD_MODIFIED="FIELD_MODIFIED",t.FIELD_REMOVED="FIELD_REMOVED",t.FIELD_CLEARED="FIELD_CLEARED",t.RELATION_ADDED="RELATION_ADDED",t.RELATION_REMOVED="RELATION_REMOVED",t.STATUS_CHANGE="STATUS_CHANGE",t))(hz||{}),fz=(t=>(t.AUTH="AUTH",t.USERS="USERS",t.ROLES="ROLES",t.PERMISSIONS="PERMISSIONS",t.CASES="CASES",t.TODOS="TODOS",t.NOTES="NOTES",t.DISPOSITIONS="DISPOSITIONS",t.ARCHIVE="ARCHIVE",t.TIME_TRACKING="TIME_TRACKING",t.KNOWLEDGE_BASE="KNOWLEDGE_BASE",t.TAGS="TAGS",t.SYSTEM="SYSTEM",t.ADMIN="ADMIN",t.FILES="FILES",t.REPORTS="REPORTS",t.SESSION_MANAGEMENT="SessionManagement",t))(fz||{}),mz=(t=>(t.USER="USER",t.ROLE="ROLE",t.PERMISSION="PERMISSION",t.CASE="CASE",t.TODO="TODO",t.NOTE="NOTE",t.DISPOSITION="DISPOSITION",t.TIME_ENTRY="TIME_ENTRY",t.KNOWLEDGE_DOCUMENT="KNOWLEDGE_DOCUMENT",t.TAG="TAG",t.FILE="FILE",t.COMMENT="COMMENT",t.ATTACHMENT="ATTACHMENT",t))(mz||{});const l1={DEFAULT_PAGE_SIZE:25},w1e=Object.values(uz).map(t=>({value:t,label:t})),k1e=Object.values(fz).map(t=>({value:t,label:t})),C1e=Object.values(mz).map(t=>({value:t,label:t}));Object.values(hz).map(t=>({value:t,label:t}));const iN=t=>({CREATE:"Crear",UPDATE:"Actualizar",DELETE:"Eliminar",LOGIN:"Iniciar Sesin",LOGOUT:"Cerrar Sesin",LOGOUT_ALL:"Cerrar Todas las Sesiones",FORCE_LOGOUT:"Forzar Cierre de Sesin",PASSWORD_CHANGE:"Cambiar Contrasea",PERMISSION_CHANGE:"Cambiar Permisos",BULK_OPERATION:"Operacin Masiva",EXPORT:"Exportar",IMPORT:"Importar",ARCHIVE:"Archivar",RESTORE:"Restaurar",READ:"Leer",VIEW:"Ver",DOWNLOAD:"Descargar"})[t]||t,oN=t=>({AUTH:"Autenticacin",USERS:"Usuarios",ROLES:"Roles",PERMISSIONS:"Permisos",CASES:"Casos",TODOS:"Tareas",NOTES:"Notas",DISPOSITIONS:"Disposiciones",ARCHIVE:"Archivo",TIME_TRACKING:"Seguimiento de Tiempo",KNOWLEDGE_BASE:"Base de Conocimiento",TAGS:"Etiquetas",SYSTEM:"Sistema",ADMIN:"Administracin",FILES:"Archivos",REPORTS:"Reportes",SessionManagement:"Gestin de Sesiones"})[t]||t,lN=t=>({USER:"Usuario",ROLE:"Rol",PERMISSION:"Permiso",CASE:"Caso",TODO:"Tarea",NOTE:"Nota",DISPOSITION:"Disposicin",TIME_ENTRY:"Entrada de Tiempo",KNOWLEDGE_DOCUMENT:"Documento de Conocimiento",TAG:"Etiqueta",FILE:"Archivo",COMMENT:"Comentario",ATTACHMENT:"Adjunto"})[t]||t,cR=t=>({CREATE:"text-green-600 bg-green-100",UPDATE:"text-blue-600 bg-blue-100",DELETE:"text-red-600 bg-red-100",LOGIN:"text-indigo-600 bg-indigo-100",LOGOUT:"text-gray-600 bg-gray-100",LOGOUT_ALL:"text-red-700 bg-red-200",FORCE_LOGOUT:"text-red-800 bg-red-300",PASSWORD_CHANGE:"text-yellow-600 bg-yellow-100",PERMISSION_CHANGE:"text-orange-600 bg-orange-100",BULK_OPERATION:"text-purple-600 bg-purple-100",EXPORT:"text-cyan-600 bg-cyan-100",IMPORT:"text-teal-600 bg-teal-100",ARCHIVE:"text-amber-600 bg-amber-100",RESTORE:"text-emerald-600 bg-emerald-100",READ:"text-sky-600 bg-sky-100",VIEW:"text-slate-600 bg-slate-100",DOWNLOAD:"text-lime-600 bg-lime-100"})[t]||"text-gray-600 bg-gray-100",N1e=()=>{var R,B;const[t,e]=x.useState([]),[r,n]=x.useState(!0),[s,a]=x.useState({page:1,limit:l1.DEFAULT_PAGE_SIZE,total:0,totalPages:0,hasNextPage:!1,hasPreviousPage:!1}),[i,l]=x.useState({page:1,limit:l1.DEFAULT_PAGE_SIZE,sortBy:"createdAt",sortOrder:"DESC"}),[c,d]=x.useState(null),[u,h]=x.useState(!1),[f,m]=x.useState(!1),[p,g]=x.useState(""),{success:y,error:b}=nr();x.useEffect(()=>{v()},[i]);const v=x.useCallback(async()=>{try{n(!0);const M=await o1.getAuditLogs(i);e(M.logs||[]),a({page:M.page,limit:M.limit,total:M.total,totalPages:M.totalPages,hasNextPage:M.hasNextPage,hasPreviousPage:M.hasPreviousPage})}catch(M){console.error("Error al cargar logs de auditora:",M),b("Error al cargar los logs de auditora"),e([]),a({page:1,limit:l1.DEFAULT_PAGE_SIZE,total:0,totalPages:0,hasNextPage:!1,hasPreviousPage:!1})}finally{n(!1)}},[i,b]),w=M=>{l(L=>({...L,page:M}))},k=(M,L)=>{l(V=>({...V,[M]:L,page:1}))},N=x.useCallback(()=>{k("searchTerm",p)},[p]),S=()=>{l({page:1,limit:l1.DEFAULT_PAGE_SIZE,sortBy:"createdAt",sortOrder:"DESC"}),g("")},C=async M=>{try{const L=await o1.getAuditLogDetails(M.id);d(L),h(!0)}catch(L){console.error("Error al cargar detalles del log:",L),b("Error al cargar los detalles del log")}},E=async M=>{try{const L=await o1.exportAuditLogs({format:M,filters:i,includeChanges:!0}),V=`audit_logs_${new Date().toISOString().split("T")[0]}`;o1.downloadFile(L,V,M),y(`Logs exportados exitosamente en formato ${M}`)}catch(L){console.error("Error al exportar logs:",L),b("Error al exportar los logs")}},T=M=>new Date(M).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sistema de Auditora"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Monitoreo completo de todas las operaciones del sistema"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(ae,{variant:"secondary",onClick:()=>m(!f),className:"flex items-center gap-2",children:[o.jsx(O,{action:"filter",className:"w-4 h-4"}),"Filtros"]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>E("CSV"),title:"Exportar CSV",className:"flex items-center gap-1",children:[o.jsx(O,{action:"download",className:"w-4 h-4"}),"CSV"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>E("XLSX"),title:"Exportar Excel",className:"flex items-center gap-1",children:[o.jsx(O,{action:"download",className:"w-4 h-4"}),"Excel"]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>E("JSON"),title:"Exportar JSON",className:"flex items-center gap-1",children:[o.jsx(O,{action:"download",className:"w-4 h-4"}),"JSON"]})]})]})]}),f&&o.jsxs(Pa,{className:"p-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Bsqueda general"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ft,{placeholder:"Buscar en logs...",value:p,onChange:M=>g(M.target.value),onKeyPress:M=>M.key==="Enter"&&N(),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"}),o.jsxs(ae,{onClick:N,size:"sm",className:"flex items-center gap-1",children:[o.jsx(O,{action:"search",className:"w-4 h-4"}),"Buscar"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Accin"}),o.jsxs(Kt,{value:i.action||"",onChange:M=>k("action",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[o.jsx("option",{value:"",children:"Todas las acciones"}),w1e.map(M=>o.jsx("option",{value:M.value,children:iN(M.value)},M.value))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Mdulo"}),o.jsxs(Kt,{value:i.module||"",onChange:M=>k("module",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[o.jsx("option",{value:"",children:"Todos los mdulos"}),k1e.map(M=>o.jsx("option",{value:M.value,children:oN(M.value)},M.value))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Tipo de Entidad"}),o.jsxs(Kt,{value:i.entityType||"",onChange:M=>k("entityType",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[o.jsx("option",{value:"",children:"Todos los tipos"}),C1e.map(M=>o.jsx("option",{value:M.value,children:lN(M.value)},M.value))]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Fecha desde"}),o.jsx(ft,{type:"date",value:i.startDate||"",onChange:M=>k("startDate",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Fecha hasta"}),o.jsx(ft,{type:"date",value:i.endDate||"",onChange:M=>k("endDate",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Usuario"}),o.jsx(ft,{placeholder:"Email del usuario",value:i.userEmail||"",onChange:M=>k("userEmail",M.target.value||void 0),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:placeholder-gray-400"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(hr,{className:"text-gray-700 dark:text-gray-300",children:"Estado"}),o.jsxs(Kt,{value:((R=i.operationSuccess)==null?void 0:R.toString())||"",onChange:M=>k("operationSuccess",M.target.value===""?void 0:M.target.value==="true"),className:"dark:bg-gray-800 dark:border-gray-600 dark:text-white",children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"true",children:"Exitosos"}),o.jsx("option",{value:"false",children:"Con errores"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsxs(ae,{variant:"secondary",onClick:S,className:"flex items-center gap-1",children:[o.jsx(O,{action:"restore",className:"w-4 h-4"}),"Limpiar Filtros"]}),o.jsxs(ae,{onClick:()=>m(!1),className:"flex items-center gap-1",children:[o.jsx(O,{action:"close",className:"w-4 h-4"}),"Cerrar"]})]})]}),o.jsx(Pa,{children:o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Logs de Auditora (",s.total," registros)"]})}),r?o.jsx("div",{className:"flex justify-center items-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Fecha"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Usuario"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Accin"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Mdulo"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Entidad"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Estado"}),o.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-500 dark:text-gray-400",children:"Acciones"})]})}),o.jsx("tbody",{children:t&&Array.isArray(t)&&t.length>0?t.map(M=>o.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[o.jsx("td",{className:"py-3 px-4",children:o.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:T(M.createdAt)})}),o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:M.userName||M.userEmail}),o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:M.userRole})]})}),o.jsx("td",{className:"py-3 px-4",children:o.jsx(la,{variant:"secondary",className:cR(M.action),children:iN(M.action)})}),o.jsx("td",{className:"py-3 px-4",children:o.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100",children:oN(M.module)})}),o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:lN(M.entityType)}),M.entityName&&o.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:M.entityName})]})}),o.jsx("td",{className:"py-3 px-4",children:o.jsx(la,{variant:M.operationSuccess?"success":"danger",children:M.operationSuccess?"Exitoso":"Error"})}),o.jsx("td",{className:"py-3 px-4",children:o.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>C(M),className:"flex items-center gap-1",children:[o.jsx(O,{action:"view",className:"w-4 h-4"}),"Ver Detalles"]})})]},M.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"text-center py-8",children:o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(O,{action:"info",className:"w-8 h-8 text-gray-400"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron logs de auditora"})]})})})})]})}),t.length===0&&!r&&o.jsx("div",{className:"text-center py-8",children:o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx(O,{action:"info",className:"w-8 h-8 text-gray-400"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron logs de auditora con los filtros aplicados."})]})}),s.totalPages>1&&o.jsxs("div",{className:"flex items-center justify-between mt-6",children:[o.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando"," ",Math.min((s.page-1)*s.limit+1,s.total),"-",Math.min(s.page*s.limit,s.total)," ","de ",s.total," registros"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>w(s.page-1),disabled:!s.hasPreviousPage,className:"flex items-center gap-1",children:[o.jsx(O,{action:"back",className:"w-4 h-4"}),"Anterior"]}),o.jsxs("span",{className:"flex items-center px-3 py-1 text-sm text-gray-700 dark:text-gray-300",children:["Pgina ",s.page," de ",s.totalPages]}),o.jsxs(ae,{variant:"secondary",size:"sm",onClick:()=>w(s.page+1),disabled:!s.hasNextPage,className:"flex items-center gap-1",children:["Siguiente",o.jsx(O,{action:"arrowRight",className:"w-4 h-4"})]})]})]})]})]})}),o.jsx(At,{isOpen:u,onClose:()=>h(!1),title:"Detalles del Log de Auditora",size:"lg",children:c&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha y Hora"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:T(c.createdAt)})]}),o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Usuario"}),o.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:[c.userName||c.userEmail," (",c.userRole,")"]})]}),o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Accin"}),o.jsx(la,{className:cR(c.action),children:iN(c.action)})]}),o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Estado"}),o.jsx(la,{variant:c.operationSuccess?"success":"danger",children:c.operationSuccess?"Exitoso":"Error"})]}),o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Mdulo"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:oN(c.module)})]}),o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Tipo de Entidad"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:lN(c.entityType)})]}),c.entityName&&o.jsxs("div",{className:"md:col-span-2",children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Nombre de Entidad"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:c.entityName})]}),c.ipAddress&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Direccin IP"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:c.ipAddress})]}),c.ipGeolocation&&!c.ipGeolocation.isPrivateIp&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Ubicacin"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:[c.ipGeolocation.city,c.ipGeolocation.country].filter(Boolean).join(", ")||"Desconocida"})]}),((B=c.ipGeolocation)==null?void 0:B.isp)&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"ISP / Proveedor"}),o.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:c.ipGeolocation.isp})]}),c.requestPath&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Ruta de Request"}),o.jsxs("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:[c.requestMethod," ",c.requestPath]})]})]}),c.errorMessage&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-red-500 dark:text-red-400",children:"Mensaje de Error"}),o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3 mt-1",children:o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:c.errorMessage})})]}),c.changes&&c.changes.length>0&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Cambios Realizados"}),o.jsx("div",{className:"mt-2 space-y-2",children:c.changes.map((M,L)=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border dark:border-gray-700 rounded p-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:M.fieldName}),o.jsx(la,{variant:"secondary",children:M.changeType})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[M.oldValue&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:"Valor anterior:"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:M.oldValue})]}),M.newValue&&o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:"Valor nuevo:"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:M.newValue})]})]})]},L))})]}),c.operationContext&&Object.keys(c.operationContext).length>0&&o.jsxs("div",{children:[o.jsx(hr,{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Contexto de Operacin"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 border dark:border-gray-700 rounded p-3 mt-1",children:o.jsx("pre",{className:"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:JSON.stringify(c.operationContext,null,2)})})]})]})})]})},S1e=(t={})=>{const{debounceMs:e=300,minChars:r=2,maxSuggestions:n=5}=t,[s,a]=x.useState(""),[i,l]=x.useState(""),[c,d]=x.useState(!1),[u,h]=x.useState(!1);x.useEffect(()=>{const v=setTimeout(()=>{l(s)},e);return()=>clearTimeout(v)},[s,e]);const{data:f,isLoading:m,error:p}=Vr({queryKey:["search-suggestions",i],queryFn:()=>Ai.documents.getSearchSuggestions(i,n),enabled:i.length>=r&&u,staleTime:3e4}),g=x.useCallback(async(v,w={})=>{if(!v.trim())return{documents:[],total:0};d(!0);try{return await Ai.documents.enhancedSearch({search:v,...w})}finally{d(!1)}},[]),y=x.useCallback(v=>{v.type==="document"?a(v.title):v.type==="tag"?a(v.name):v.type==="case"&&a(v.caseNumber),h(!1)},[]),b=x.useCallback(()=>{a(""),l(""),h(!1)},[]);return{searchTerm:s,setSearchTerm:a,suggestions:f,suggestionsLoading:m,suggestionsError:p,showSuggestions:u,setShowSuggestions:h,isSearching:c,performSearch:g,selectSuggestion:y,clearSearch:b,hasResults:f&&(f.documents.length>0||f.tags.length>0||f.cases.length>0)}},E1e=({onSearch:t,onRefineSearch:e,onSelectDocument:r,placeholder:n="Buscar documentos, etiquetas, casos...",className:s="",isRefining:a=!1})=>{const{searchTerm:i,setSearchTerm:l,suggestions:c,suggestionsLoading:d,showSuggestions:u,setShowSuggestions:h,isSearching:f,selectSuggestion:m,clearSearch:p,hasResults:g}=S1e(),[y,b]=x.useState(-1),v=x.useRef(null),w=x.useRef(null),k=E=>{E.preventDefault(),i.trim()&&(e?(e(i.trim()),l("")):t(i.trim()),h(!1))},N=E=>{if(!u||!c)return;const T=c.documents.length+c.tags.length+c.cases.length;switch(E.key){case"ArrowDown":E.preventDefault(),b(R=>R<T-1?R+1:0);break;case"ArrowUp":E.preventDefault(),b(R=>R>0?R-1:T-1);break;case"Enter":E.preventDefault(),y>=0?S(y):k(E);break;case"Escape":h(!1),b(-1);break}},S=E=>{if(!c)return;const T=[...c.documents,...c.tags,...c.cases];if(E<T.length){const R=T[E];m(R),R.type==="document"&&r?r(R.id):R.type==="tag"?t(R.name,{filterType:"tag"}):R.type==="case"?t(R.caseNumber,{filterType:"case"}):t(i)}};x.useEffect(()=>{const E=T=>{v.current&&!v.current.contains(T.target)&&w.current&&!w.current.contains(T.target)&&h(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const C=(E,T,R)=>{const B=()=>{switch(E.type){case"document":return"document";case"tag":return"tag";case"case":return"case";default:return"search"}},M=()=>{switch(E.type){case"document":return"text-blue-600 dark:text-blue-400";case"tag":return"text-green-600 dark:text-green-400";case"case":return"text-purple-600 dark:text-purple-400";default:return"text-gray-600 dark:text-gray-400"}},L=V=>{switch(V){case"title":return"en ttulo";case"content":return"en contenido";case"tag":return"en etiqueta";case"case":return"en caso asociado";default:return""}};return o.jsxs("div",{className:`px-4 py-2 cursor-pointer flex items-center space-x-3 hover:bg-gray-50 dark:hover:bg-gray-700 ${R?"bg-blue-50 dark:bg-blue-900/20":""}`,onClick:()=>S(T),children:[o.jsx(O,{action:B(),size:"sm",color:"gray",className:M()}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[E.type==="document"&&E.title,E.type==="tag"&&E.name,E.type==="case"&&E.caseNumber]}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.type==="document"&&o.jsxs(o.Fragment,{children:["Documento",E.matchType&&E.matchType!=="title"&&o.jsxs("span",{className:"ml-1 text-blue-500 dark:text-blue-400",children:[" Coincidencia ",L(E.matchType)]})]}),E.type==="tag"&&"Etiqueta",E.type==="case"&&"Caso"]})]})]},T)};return o.jsxs("div",{className:`relative ${s}`,children:[a&&e&&o.jsxs("div",{className:"absolute -top-5 left-0 right-0 text-xs text-green-600 dark:text-green-400 flex items-center",children:[o.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-1.5 animate-pulse"}),"Refinando bsqueda..."]}),o.jsx("form",{onSubmit:k,className:"relative",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400"}):e?o.jsx(O,{action:"filter",size:"sm",color:"green"}):o.jsx(O,{action:"search",size:"sm",color:"gray"})}),o.jsx("input",{ref:v,type:"text",value:i,onChange:E=>l(E.target.value),onFocus:()=>h(!0),onKeyDown:N,className:`block w-full pl-10 pr-10 py-3 border rounded-lg leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 transition-all duration-200 ${e?"border-green-300 dark:border-green-600 focus:ring-2 focus:ring-green-500 focus:border-green-500 dark:focus:ring-green-400 dark:focus:border-green-400":"border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400"}`,placeholder:n}),i&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:o.jsx("button",{type:"button",onClick:p,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(O,{action:"close",size:"sm",color:"gray"})})})]})}),u&&g&&o.jsx("div",{ref:w,className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:d?o.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400 mr-2"}),"Buscando..."]}):o.jsxs("div",{children:[c==null?void 0:c.documents.map((E,T)=>C(E,T,y===T)),c==null?void 0:c.tags.map((E,T)=>{const R=c.documents.length+T;return C(E,R,y===R)}),c==null?void 0:c.cases.map((E,T)=>{const R=c.documents.length+c.tags.length+T;return C(E,R,y===R)}),o.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 px-4 py-2 bg-gray-50 dark:bg-gray-700",children:o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between",children:[o.jsx("span",{children:e?`Presiona Enter para filtrar por "${i}"`:`Presiona Enter para buscar "${i}"`}),o.jsx("span",{className:"text-xs",children:" navegar, Enter seleccionar"})]})})]})})]})},j1e=({filters:t,onRemoveFilter:e,onUndoLastFilter:r,onClearAll:n,resultCount:s,canUndo:a})=>t.length===0?null:o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[o.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 flex items-center",children:[o.jsx(O,{action:"filter",size:"sm",color:"gray",className:"mr-1"}),"Filtros:"]}),t.map(i=>{const l=()=>{switch(i.type){case"search":return"bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-200 border border-blue-200 dark:border-blue-700";case"tag":return"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-200 border border-emerald-200 dark:border-emerald-700";case"case":return"bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-200 border border-purple-200 dark:border-purple-700";default:return"bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-700"}},c=()=>{switch(i.type){case"search":return"";case"tag":return"";case"case":return"";default:return""}},d=()=>{switch(i.type){case"search":return"hover:bg-blue-600 dark:hover:bg-blue-400";case"tag":return"hover:bg-emerald-600 dark:hover:bg-emerald-400";case"case":return"hover:bg-purple-600 dark:hover:bg-purple-400";default:return"hover:bg-green-600 dark:hover:bg-green-400"}};return o.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-all ${l()}`,children:[o.jsx("span",{className:"mr-1.5",children:c()}),o.jsx("span",{className:"max-w-32 truncate",title:i.term,children:i.term}),o.jsx("button",{onClick:()=>e(i.id),className:`ml-2 p-0.5 rounded-full hover:bg-opacity-30 transition-colors ${d()}`,title:"Eliminar filtro","aria-label":`Eliminar filtro: ${i.term}`,children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},i.id)}),s!==void 0&&o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:["(",s," resultado",s!==1?"s":"",")"]}),o.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[a&&o.jsxs("button",{onClick:r,className:"inline-flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:underline transition-colors",title:"Deshacer ltimo filtro",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Deshacer"]}),o.jsxs("button",{onClick:n,className:"inline-flex items-center text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:underline transition-colors",title:"Limpiar todos los filtros",children:[o.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Limpiar todo"]})]})]}),T1e=({score:t,matchedWords:e=[],totalWords:r=0,hasExactPhrase:n=!1,matchLocations:s=[]})=>{const i=(c=>c>=90?{text:"text-green-600 dark:text-green-400",bar:"bg-green-500"}:c>=70?{text:"text-blue-600 dark:text-blue-400",bar:"bg-blue-500"}:c>=50?{text:"text-yellow-600 dark:text-yellow-400",bar:"bg-yellow-500"}:c>=30?{text:"text-orange-600 dark:text-orange-400",bar:"bg-orange-500"}:{text:"text-gray-500 dark:text-gray-400",bar:"bg-gray-400"})(t),l=c=>s.includes(c);return o.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 pt-3 mt-3",children:o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs transition-all ${l("title")?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500 opacity-50"}`,title:l("title")?" Coincidencia en ttulo":" Sin coincidencia en ttulo",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),l("title")&&o.jsx("svg",{className:"w-2.5 h-2.5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),o.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs transition-all ${l("content")?"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300":"bg-gray-100 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500 opacity-50"}`,title:l("content")?" Coincidencia en contenido":" Sin coincidencia en contenido",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l("content")&&o.jsx("svg",{className:"w-2.5 h-2.5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),o.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs transition-all ${l("tags")?"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300":"bg-gray-100 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500 opacity-50"}`,title:l("tags")?" Coincidencia en etiquetas":" Sin coincidencia en etiquetas",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),l("tags")&&o.jsx("svg",{className:"w-2.5 h-2.5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),o.jsxs("div",{className:`flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs transition-all ${l("cases")?"bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300":"bg-gray-100 dark:bg-gray-700/50 text-gray-400 dark:text-gray-500 opacity-50"}`,title:l("cases")?" Coincidencia en casos asociados":" Sin coincidencia en casos asociados",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),l("cases")&&o.jsx("svg",{className:"w-2.5 h-2.5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[n&&o.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300",children:[o.jsx("svg",{className:"w-2.5 h-2.5 mr-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Exacta"]}),r>0&&o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.length,"/",r]}),o.jsx("div",{className:"w-10 h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${i.bar} transition-all duration-300`,style:{width:`${t}%`}})}),o.jsxs("span",{className:`text-xs font-semibold ${i.text} min-w-[32px] text-right`,children:[t,"%"]})]})]})})},Ar={all:["knowledge"],documents:()=>[...Ar.all,"documents"],document:t=>[...Ar.documents(),t],documentVersions:t=>[...Ar.document(t),"versions"],documentStats:t=>[...Ar.document(t),"stats"],documentFeedback:t=>[...Ar.document(t),"feedback"],types:()=>[...Ar.all,"types"],type:t=>[...Ar.types(),t],typeStats:t=>[...Ar.type(t),"stats"],search:t=>[...Ar.all,"search",t],myFeedback:()=>[...Ar.all,"feedback","my"]},_1e=(t,e)=>Vr({queryKey:[...Ar.documents(),t],queryFn:()=>Ai.documents.findAll(t),...e}),pz=(t,e)=>Vr({queryKey:Ar.document(t),queryFn:()=>Ai.documents.findOne(t),enabled:!!t,staleTime:30*1e3,...e}),gz=t=>{const e=ur();return gr({mutationFn:Ai.documents.create,onSuccess:()=>{e.invalidateQueries({queryKey:Ar.documents()})},...t})},dR=t=>{const e=ur();return gr({mutationFn:({id:r,data:n})=>Ai.documents.update(r,n),onSuccess:(r,n)=>{e.invalidateQueries({queryKey:Ar.document(n.id),refetchType:"active"}),e.invalidateQueries({queryKey:Ar.documents(),refetchType:"active"}),e.invalidateQueries({queryKey:Ar.documentVersions(n.id),refetchType:"active"}),e.refetchQueries({queryKey:Ar.document(n.id)})},...t})},A1e=()=>{const t=ur();return gr({mutationFn:({id:e,isArchived:r,reason:n,replacementDocumentId:s})=>Ai.documents.archive(e,r,n,s),onSuccess:(e,r)=>{t.invalidateQueries({queryKey:Ar.document(r.id)}),t.invalidateQueries({queryKey:Ar.documents()})}})},M1e=()=>{const t=ur();return gr({mutationFn:Ai.documents.remove,onSuccess:(e,r)=>{t.invalidateQueries({queryKey:Ar.documents()}),t.removeQueries({queryKey:Ar.document(r)})}})},O1e=t=>Vr({queryKey:[...Ar.types(),t],queryFn:()=>Ai.types.findAll(t)}),R1e=()=>{const t=ur();return gr({mutationFn:Ai.feedback.create,onSuccess:e=>{t.invalidateQueries({queryKey:Ar.documentFeedback(e.documentId)}),t.invalidateQueries({queryKey:Ar.documentStats(e.documentId)}),t.invalidateQueries({queryKey:Ar.myFeedback()})}})},P1e=t=>Vr({queryKey:["feedback","check",t],queryFn:async()=>{var e;try{return await Ai.feedback.checkUserFeedback(t)}catch(r){if(((e=r.response)==null?void 0:e.status)===404)return{hasFeedback:!1,feedback:null};throw r}},enabled:!!t,retry:(e,r)=>{var n;return((n=r.response)==null?void 0:n.status)===404?!1:e<3}}),I1e=()=>Vr({queryKey:["knowledge","tags","all"],queryFn:()=>zk.getAllTags(),staleTime:2*60*1e3}),D1e=t=>Vr({queryKey:["knowledge","tags","search",t],queryFn:async()=>!t||t.length<2?[]:(await zk.getAllTags()).filter(r=>r.tagName.toLowerCase().includes(t.toLowerCase())),enabled:t.length>=2,staleTime:30*1e3}),L1e=t=>{const e=ur();return gr({mutationFn:r=>zk.createTag(r.tagName,{description:r.description,color:r.color,category:r.category}),onSuccess:r=>{var n;e.invalidateQueries({queryKey:["knowledge","tags"]}),(n=t==null?void 0:t.onSuccess)==null||n.call(t,r)},onError:r=>{var n;(n=t==null?void 0:t.onError)==null||n.call(t,r)}})},$1e=()=>{const{error:t}=nr(),e=(n,s)=>{console.error(" Error Handler:",n);let a="Error",i="";if(n.userMessage)a=n.userMessage,i=s?`Contexto: ${s}`:"";else if(n.response){const l=n.response.status;if(a=`Error ${l}`,n.response.data&&typeof n.response.data=="object"&&"message"in n.response.data)i=n.response.data.message;else switch(l){case 400:i="Datos invlidos en la solicitud";break;case 401:i="Sesin expirada. Por favor, inicia sesin nuevamente";break;case 403:i="No tienes permisos para esta accin";break;case 404:i="Recurso no encontrado";break;case 409:i="Conflicto con el estado actual del recurso";break;case 422:i="Error de validacin en los datos enviados";break;case 429:i="Demasiadas solicitudes. Intntalo ms tarde";break;case 500:i="Error interno del servidor";break;case 502:i="Error de conexin con el servidor";break;case 503:i="Servicio temporalmente no disponible";break;case 504:i="Tiempo de espera agotado";break;default:i="Error desconocido del servidor"}}else n.request?(a="Error de conexin",i="No se pudo conectar con el servidor. Verifica tu conexin a internet"):(a="Error inesperado",i=n.message||"Ha ocurrido un error inesperado");s&&!i.includes("Contexto:")&&(i=i?`${i} (${s})`:s),t(a,i)};return{handleError:e,handleAsyncOperation:async(n,s,a)=>{try{const i=await n();if(a!=null&&a.showSuccessToast&&(a!=null&&a.successMessage)){const{success:l}=nr();l(a.successMessage)}return i}catch(i){return a!=null&&a.suppressErrorToast||e(i,s),null}}}},F1e=()=>{const{handleError:t}=$1e();return{handleCreateError:(e,r)=>t(e,`Error al crear ${r}`),handleUpdateError:(e,r)=>t(e,`Error al actualizar ${r}`),handleDeleteError:(e,r)=>t(e,`Error al eliminar ${r}`),handleFetchError:(e,r)=>t(e,`Error al cargar ${r}`),handleSearchError:e=>t(e,"Error al realizar la bsqueda")}},uR=t=>t?t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim():"",m0=(t,e)=>!t||!e?!1:uR(t).includes(uR(e)),xz=[{id:"heading-1",type:"heading",props:{level:2,textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"1. Descripcin del Problema",styles:{}}],children:[]},{id:"q1a",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"QU est ocurriendo?",styles:{bold:!0}}],children:[]},{id:"q1a-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Describir el problema reportado de manera clara y concisa)",styles:{italic:!0}}],children:[]},{id:"q1a-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"q1b",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"CMO ocurre?",styles:{bold:!0}}],children:[]},{id:"q1b-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Explicar los pasos para reproducir el problema, si es posible)",styles:{italic:!0}}],children:[]},{id:"q1b-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"q1c",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"POR QU es importante resolverlo?",styles:{bold:!0}}],children:[]},{id:"q1c-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Indicar el impacto que tiene en el usuario o en el sistema)",styles:{italic:!0}}],children:[]},{id:"q1c-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"heading-2",type:"heading",props:{level:2,textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"2. Diagnstico del Resolutor",styles:{}}],children:[]},{id:"q2a",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"Anlisis del caso",styles:{bold:!0}}],children:[]},{id:"q2a-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(El resolutor indica si el problema es conforme a lo reportado y aade cualquier observacin relevante)",styles:{italic:!0}}],children:[]},{id:"q2a-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"q2b",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"Confirmacin de causa",styles:{bold:!0}}],children:[]},{id:"q2b-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Indicar si el problema se debe a error del usuario, falla del sistema, configuracin incorrecta, etc.)",styles:{italic:!0}}],children:[]},{id:"q2b-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"heading-3",type:"heading",props:{level:2,textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"3. Solucin Aplicada",styles:{}}],children:[]},{id:"q3a",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"Acciones tomadas",styles:{bold:!0}}],children:[]},{id:"q3a-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Lista de pasos realizados para resolver el problema)",styles:{italic:!0}}],children:[]},{id:"q3a-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"q3b",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"Resultado final",styles:{bold:!0}}],children:[]},{id:"q3b-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Indicar si el problema se resolvi completamente, si requiere seguimiento o si hay una solucin alternativa)",styles:{italic:!0}}],children:[]},{id:"q3b-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"q3c",type:"heading",props:{level:3,textColor:"blue",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"Tiempo empleado",styles:{bold:!0}}],children:[]},{id:"q3c-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Tiempo estimado en la resolucin del caso)",styles:{italic:!0}}],children:[]},{id:"q3c-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]},{id:"heading-4",type:"heading",props:{level:2,textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"4. Notas y Observaciones",styles:{}}],children:[]},{id:"q4-desc",type:"paragraph",props:{textColor:"gray",backgroundColor:"default",textAlignment:"left"},content:[{type:"text",text:"(Cualquier informacin adicional relevante sobre el caso)",styles:{italic:!0}}],children:[]},{id:"q4-content",type:"paragraph",props:{textColor:"default",backgroundColor:"default",textAlignment:"left"},content:[],children:[]}],B1e={type:"doc",content:[{type:"paragraph",content:[]}]},z1e=()=>{const t=Ri(),{success:e,error:r}=po(),n=r$(),{handleCreateError:s}=F1e(),[a,i]=x.useState(""),[l,c]=x.useState("updated_at"),[d,u]=x.useState("DESC"),[h,f]=x.useState(null),[m,p]=x.useState(!1),[g,y]=x.useState([]),[b,v]=x.useState([]),[w,k]=x.useState(!1),[N,S]=x.useState(!1),[C,E]=x.useState(""),[T,R]=x.useState(!1),[B,M]=x.useState(!1),{data:L,isLoading:V,error:ee}=_1e({search:a,documentTypeId:void 0,sortBy:l,sortOrder:d,limit:20}),{data:Q}=up(),J=gz({onSuccess:ye=>{S(!1),E(""),R(!1),M(!1),e("Documento creado exitosamente"),t(`/knowledge/${ye.id}/edit`)},onError:ye=>{R(!1),s(ye,"documento de conocimiento")}}),_=()=>{S(!0)},H=()=>{if(!C.trim()){r("El ttulo del documento es requerido");return}R(!0);const ye=B?xz:B1e;J.mutate({title:C.trim(),content:"",jsonContent:ye,priority:"medium",isTemplate:!1})},P=()=>{S(!1),E(""),R(!1),M(!1)},K=async(ye,Ve)=>{try{p(!0),k(!1);const Be=await Ai.documents.enhancedSearch({search:ye,documentTypeId:void 0});f(Be.documents),i(ye);let ut="search";(Ve==null?void 0:Ve.filterType)==="tag"?ut="tag":(Ve==null?void 0:Ve.filterType)==="case"&&(ut="case"),y([{id:`${ut}-${Date.now()}`,term:ye,type:ut,timestamp:Date.now()}]),v([])}catch(Be){r("Error al realizar la bsqueda"),console.error("Search error:",Be)}},F=x.useCallback(ye=>{if(!h||!ye.trim())return;v(ut=>[...ut,h]);const Ve=new Map((Q==null?void 0:Q.map(ut=>[ut.id,ut]))||[]),Be=h.filter(ut=>{var Te,je;return m0(ut.title,ye)||m0(ut.content||"",ye)||(Te=ut.tags)!=null&&Te.some(ht=>m0(ht.tagName,ye))?!0:(je=ut.associatedCases)!=null&&je.length?ut.associatedCases.some(ht=>{const pt=Ve.get(ht);return pt?m0(pt.numeroCaso||"",ye)||m0(pt.descripcion||"",ye):!1}):!1});f(Be),y(ut=>[...ut,{id:`refine-${Date.now()}`,term:ye.trim(),type:"refine",timestamp:Date.now()}]),k(!0)},[h,Q]),ne=x.useCallback(ye=>{const Ve=g.findIndex(Te=>Te.id===ye);if(Ve===-1)return;if(Ve===0){oe();return}const Be=g.slice(0,Ve),ut=b[Ve-1]||[];f(ut),y(Be),v(Te=>Te.slice(0,Ve-1)),Be.length<=1&&k(!1)},[g,b]),z=x.useCallback(()=>{if(b.length===0||g.length<=1)return;const ye=b[b.length-1];f(ye),v(Ve=>Ve.slice(0,-1)),y(Ve=>Ve.slice(0,-1)),b.length===1&&k(!1)},[b,g]),Z=ye=>{t(`/knowledge/${ye}`)},oe=()=>{p(!1),k(!1),f(null),i(""),y([]),v([])},ue=(ye,Ve,Be)=>Ve?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200":Be?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":ye?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400":"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400",_e=(ye,Ve,Be)=>Ve?"Archivado":Be?"Obsoleto":ye?"Publicado":"Borrador",we=ye=>!ye.associatedCases||!Q?null:Q.filter(Be=>{var ut;return(ut=ye.associatedCases)==null?void 0:ut.includes(Be.id)}),Y=ye=>{const Ve=ye.tags||[],Be=6;return{documentTags:Ve.slice(0,Be),relatedTags:[],totalDocTags:Ve.length,showMore:Ve.length>Be}},le=m&&h?h:(L==null?void 0:L.documents)||[];return V?o.jsx("div",{className:"flex items-center justify-center min-h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400"})}):ee?o.jsx("div",{className:"text-center py-8",children:o.jsxs("div",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error al cargar los documentos: ",ee.message]})}):o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"folder",size:"lg",color:"blue"}),"Base de Conocimiento"]}),o.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:"Centraliza y organiza toda la informacin de tu equipo"})]}),o.jsx("div",{className:"flex space-x-3",children:n.canCreateKnowledge&&o.jsxs("button",{onClick:_,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Nuevo Documento"]})})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(E1e,{onSearch:K,onRefineSearch:m?F:void 0,onSelectDocument:Z,placeholder:w?"Refinar bsqueda dentro de los resultados...":"Buscar documentos, etiquetas, casos...",className:"w-full",isRefining:w})}),m&&o.jsxs("button",{onClick:oe,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[o.jsx(O,{action:"close",size:"sm",color:"gray",className:"mr-2"}),"Limpiar bsqueda"]})]}),m&&g.length>0&&o.jsx("div",{className:"mt-3",children:o.jsx(j1e,{filters:g,onRemoveFilter:ne,onUndoLastFilter:z,onClearAll:oe,resultCount:h==null?void 0:h.length,canUndo:b.length>0})}),o.jsx("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:w?o.jsxs(o.Fragment,{children:[" ",o.jsx("strong",{children:"Modo refinamiento:"})," Escribe para filtrar dentro de los ",(h==null?void 0:h.length)||0," resultados actuales"]}):o.jsxs(o.Fragment,{children:[" Tip: Usa la bsqueda inteligente arriba para mejores resultados",m&&o.jsx("span",{className:"ml-2 text-blue-600 dark:text-blue-400",children:" Puedes refinar la bsqueda escribiendo ms trminos"})]})})]}),o.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Ordenar por:"}),o.jsxs("select",{value:`${l}_${d}`,onChange:ye=>{const[Ve,Be]=ye.target.value.split("_");c(Ve),u(Be)},className:"text-sm border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400",children:[o.jsx("option",{value:"updated_at_DESC",children:"ltima actualizacin"}),o.jsx("option",{value:"created_at_DESC",children:"Ms reciente"}),o.jsx("option",{value:"title_ASC",children:"Ttulo (A-Z)"}),o.jsx("option",{value:"title_DESC",children:"Ttulo (Z-A)"})]})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:m?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 mr-2",children:[o.jsx(O,{action:"search",size:"xs",color:"blue",className:"mr-1"}),"Bsqueda inteligente"]}),"Mostrando ",le.length,' resultado(s) para "',a,'"']}):o.jsxs(o.Fragment,{children:[(le==null?void 0:le.length)||0," documento",(le==null?void 0:le.length)!==1?"s":""," encontrado",(le==null?void 0:le.length)!==1?"s":""]})}),!m&&o.jsx("div",{})]})}),le&&le.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:le.map(ye=>{var Ve,Be,ut,Te,je;return o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 overflow-hidden",children:o.jsxs("div",{className:"p-4 md:p-5",children:[o.jsx("div",{className:"flex items-center mb-3",children:o.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ue(ye.isPublished,ye.isArchived,ye.isDeprecated)}`,children:_e(ye.isPublished,ye.isArchived,ye.isDeprecated)})}),o.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2",children:o.jsx(cs,{to:`/knowledge/${ye.id}`,className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:ye.title})}),ye.associatedCases&&ye.associatedCases.length>0&&o.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mb-3",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"case",size:"xs",color:"blue",className:"flex-shrink-0"}),o.jsx("span",{children:"Caso:"})]}),(()=>{const ht=we(ye);return ht&&ht.length>0?o.jsxs(o.Fragment,{children:[ht.slice(0,3).map((pt,re)=>o.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300",title:`${pt.numeroCaso}: ${pt.descripcion}`,children:pt.numeroCaso},re)),ye.associatedCases.length>3&&o.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:["+",ye.associatedCases.length-3]})]}):o.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:[ye.associatedCases.length," caso",ye.associatedCases.length!==1?"s":""]})})()]}),(()=>{const ht=Y(ye);return ht.documentTags.length>0?o.jsxs("div",{className:"flex items-center flex-wrap gap-1.5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"tag",size:"xs",color:"gray",className:"flex-shrink-0"}),o.jsx("span",{children:"Tags:"})]}),ht.documentTags.map((pt,re)=>o.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium text-white",style:{backgroundColor:pt.color||"#6b7280"},title:pt.tagName,children:pt.tagName},re)),ht.showMore&&o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",ht.totalDocTags-ht.documentTags.length]})]}):null})(),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100 dark:border-gray-700 text-xs text-gray-500 dark:text-gray-400",children:[o.jsxs("div",{className:"flex items-center gap-1 truncate",children:[o.jsx(O,{action:"folder",size:"xs",color:"gray",className:"flex-shrink-0"}),o.jsx("span",{className:"truncate",children:((Ve=ye.documentType)==null?void 0:Ve.name)||"Sin tipo"})]}),o.jsxs("div",{className:"flex items-center gap-1 truncate",children:[o.jsx(O,{action:"user",size:"xs",color:"gray",className:"flex-shrink-0"}),o.jsx("span",{className:"truncate max-w-[100px]",title:((Be=ye.__createdByUser__)==null?void 0:Be.fullName)||((ut=ye.__createdByUser__)==null?void 0:ut.email)||"Desconocido",children:((Te=ye.__createdByUser__)==null?void 0:Te.fullName)||((je=ye.__createdByUser__)==null?void 0:je.email)||"Desconocido"})]})]}),m&&ye.relevanceScore!==void 0&&o.jsx(T1e,{score:ye.relevanceScore,matchedWords:ye.matchedWords,totalWords:ye.totalSearchWords,hasExactPhrase:ye.hasExactPhrase,matchLocations:ye.matchLocations})]})},ye.id)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(O,{action:"folder",size:"xl",color:"gray"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No se encontraron documentos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:a?"Prueba con otros trminos de bsqueda.":n.canCreateKnowledge?"Comienza creando tu primer documento de conocimiento.":"No tienes permisos para crear documentos. Contacta al administrador para ms informacin."}),!a&&n.canCreateKnowledge&&o.jsxs("button",{onClick:_,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 dark:focus:ring-offset-gray-800",children:[o.jsx(O,{action:"add",size:"sm",color:"primary"}),"Crear Primer Documento"]})]}),N&&o.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 dark:bg-gray-900 dark:bg-opacity-70 overflow-y-auto h-full w-full z-50",children:o.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800 dark:border-gray-600",children:o.jsxs("div",{className:"mt-3",children:[o.jsxs("div",{className:"flex items-center justify-between pb-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Crear Nuevo Documento"}),o.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:o.jsx(O,{action:"close",size:"md",color:"gray"})})]}),o.jsxs("div",{className:"py-3",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Ingresa el ttulo del documento. Una vez creado, podrs editarlo y agregar archivos."}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"document-title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Ttulo del Documento *"}),o.jsx("input",{id:"document-title",type:"text",value:C,onChange:ye=>E(ye.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ej: Gua de procedimientos...",autoFocus:!0,onKeyPress:ye=>{ye.key==="Enter"&&!T&&H()}})]}),o.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:o.jsxs("label",{className:"flex items-start cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:B,onChange:ye=>M(ye.target.checked),className:"mt-0.5 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Usar plantilla de documentacin"}),o.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:"Incluye estructura con las 4 secciones: Descripcin del Problema, Diagnstico, Solucin Aplicada y Notas."})]})]})})]}),o.jsxs("div",{className:"flex items-center justify-end pt-3 border-t border-gray-200 dark:border-gray-600 space-x-3",children:[o.jsx("button",{onClick:P,disabled:T,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),o.jsx("button",{onClick:H,disabled:T||!C.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 border border-transparent rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:T?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creando..."]}):"Crear Documento"})]})]})})})]})};function Vk(){return typeof window<"u"}function kp(t){return yz(t)?(t.nodeName||"").toLowerCase():"#document"}function xa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function nl(t){var e;return(e=(yz(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yz(t){return Vk()?t instanceof Node||t instanceof xa(t).Node:!1}function Mr(t){return Vk()?t instanceof Element||t instanceof xa(t).Element:!1}function Ga(t){return Vk()?t instanceof HTMLElement||t instanceof xa(t).HTMLElement:!1}function yj(t){return!Vk()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof xa(t).ShadowRoot}const U1e=new Set(["inline","contents"]);function Qx(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Mi(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!U1e.has(s)}const V1e=new Set(["table","td","th"]);function H1e(t){return V1e.has(kp(t))}const W1e=[":popover-open",":modal"];function Hk(t){return W1e.some(e=>{try{return t.matches(e)}catch{return!1}})}const q1e=["transform","translate","scale","rotate","perspective"],G1e=["transform","translate","scale","rotate","perspective","filter"],K1e=["paint","layout","strict","content"];function zT(t){const e=Wk(),r=Mr(t)?Mi(t):t;return q1e.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||G1e.some(n=>(r.willChange||"").includes(n))||K1e.some(n=>(r.contain||"").includes(n))}function Z1e(t){let e=ic(t);for(;Ga(e)&&!Ld(e);){if(zT(e))return e;if(Hk(e))return null;e=ic(e)}return null}function Wk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Y1e=new Set(["html","body","#document"]);function Ld(t){return Y1e.has(kp(t))}function Mi(t){return xa(t).getComputedStyle(t)}function qk(t){return Mr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ic(t){if(kp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yj(t)&&t.host||nl(t);return yj(e)?e.host:e}function vz(t){const e=ic(t);return Ld(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ga(e)&&Qx(e)?e:vz(e)}function Hl(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=vz(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),i=xa(s);if(a){const l=vj(i);return e.concat(i,i.visualViewport||[],Qx(s)?s:[],l&&r?Hl(l):[])}return e.concat(s,Hl(s,[],r))}function vj(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bj(t){let e=t.activeElement;for(;((r=e)==null||(r=r.shadowRoot)==null?void 0:r.activeElement)!=null;){var r;e=e.shadowRoot.activeElement}return e}function Wm(t,e){if(!t||!e)return!1;const r=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(r&&yj(r)){let n=e;for(;n;){if(t===n)return!0;n=n.parentNode||n.host}}return!1}function bz(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function wz(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}function X1e(t){return Q1e()?!1:!hR()&&t.width===0&&t.height===0||hR()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function kz(){return/apple/i.test(navigator.vendor)}function hR(){const t=/android/i;return t.test(bz())||t.test(wz())}function J1e(){return bz().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Q1e(){return wz().includes("jsdom/")}function wj(t,e){const r=["mouse","pen"];return r.push("",void 0),r.includes(t)}function eve(t){return"nativeEvent"in t}function tve(t){return t.matches("html,body")}function od(t){return(t==null?void 0:t.ownerDocument)||document}function cN(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const r=t;return r.target!=null&&e.contains(r.target)}function yf(t){return"composedPath"in t?t.composedPath()[0]:t.target}const rve="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function nve(t){return Ga(t)&&t.matches(rve)}const lo=Math.min,Ns=Math.max,_b=Math.round,c1=Math.floor,Ho=t=>({x:t,y:t}),sve={left:"right",right:"left",bottom:"top",top:"bottom"},ave={start:"end",end:"start"};function kj(t,e,r){return Ns(t,lo(e,r))}function oc(t,e){return typeof t=="function"?t(e):t}function co(t){return t.split("-")[0]}function Cp(t){return t.split("-")[1]}function UT(t){return t==="x"?"y":"x"}function VT(t){return t==="y"?"height":"width"}const ive=new Set(["top","bottom"]);function Ji(t){return ive.has(co(t))?"y":"x"}function HT(t){return UT(Ji(t))}function ove(t,e,r){r===void 0&&(r=!1);const n=Cp(t),s=HT(t),a=VT(s);let i=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=Ab(i)),[i,Ab(i)]}function lve(t){const e=Ab(t);return[Cj(t),e,Cj(e)]}function Cj(t){return t.replace(/start|end/g,e=>ave[e])}const fR=["left","right"],mR=["right","left"],cve=["top","bottom"],dve=["bottom","top"];function uve(t,e,r){switch(t){case"top":case"bottom":return r?e?mR:fR:e?fR:mR;case"left":case"right":return e?cve:dve;default:return[]}}function hve(t,e,r,n){const s=Cp(t);let a=uve(co(t),r==="start",n);return s&&(a=a.map(i=>i+"-"+s),e&&(a=a.concat(a.map(Cj)))),a}function Ab(t){return t.replace(/left|right|bottom|top/g,e=>sve[e])}function fve(t){return{top:0,right:0,bottom:0,left:0,...t}}function WT(t){return typeof t!="number"?fve(t):{top:t,right:t,bottom:t,left:t}}function qm(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var mve=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Nj=mve.join(","),Cz=typeof Element>"u",Zg=Cz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Mb=!Cz&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ob=function t(e,r){var n;r===void 0&&(r=!0);var s=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),a=s===""||s==="true",i=a||r&&e&&t(e.parentNode);return i},pve=function(e){var r,n=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"contenteditable");return n===""||n==="true"},gve=function(e,r,n){if(Ob(e))return[];var s=Array.prototype.slice.apply(e.querySelectorAll(Nj));return r&&Zg.call(e,Nj)&&s.unshift(e),s=s.filter(n),s},xve=function t(e,r,n){for(var s=[],a=Array.from(e);a.length;){var i=a.shift();if(!Ob(i,!1))if(i.tagName==="SLOT"){var l=i.assignedElements(),c=l.length?l:i.children,d=t(c,!0,n);n.flatten?s.push.apply(s,d):s.push({scopeParent:i,candidates:d})}else{var u=Zg.call(i,Nj);u&&n.filter(i)&&(r||!e.includes(i))&&s.push(i);var h=i.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(i),f=!Ob(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(i));if(h&&f){var m=t(h===!0?i.children:h.children,!0,n);n.flatten?s.push.apply(s,m):s.push({scopeParent:i,candidates:m})}else a.unshift.apply(a,i.children)}}return s},Nz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Sz=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||pve(e))&&!Nz(e)?0:e.tabIndex},yve=function(e,r){var n=Sz(e);return n<0&&r&&!Nz(e)?0:n},vve=function(e,r){return e.tabIndex===r.tabIndex?e.documentOrder-r.documentOrder:e.tabIndex-r.tabIndex},Ez=function(e){return e.tagName==="INPUT"},bve=function(e){return Ez(e)&&e.type==="hidden"},wve=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return r},kve=function(e,r){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===r)return e[n]},Cve=function(e){if(!e.name)return!0;var r=e.form||Mb(e),n=function(l){return r.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=n(window.CSS.escape(e.name));else try{s=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var a=kve(s,e.form);return!a||a===e},Nve=function(e){return Ez(e)&&e.type==="radio"},Sve=function(e){return Nve(e)&&!Cve(e)},Eve=function(e){var r,n=e&&Mb(e),s=(r=n)===null||r===void 0?void 0:r.host,a=!1;if(n&&n!==e){var i,l,c;for(a=!!((i=s)!==null&&i!==void 0&&(l=i.ownerDocument)!==null&&l!==void 0&&l.contains(s)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!a&&s;){var d,u,h;n=Mb(s),s=(d=n)===null||d===void 0?void 0:d.host,a=!!((u=s)!==null&&u!==void 0&&(h=u.ownerDocument)!==null&&h!==void 0&&h.contains(s))}}return a},pR=function(e){var r=e.getBoundingClientRect(),n=r.width,s=r.height;return n===0&&s===0},jve=function(e,r){var n=r.displayCheck,s=r.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var a=Zg.call(e,"details>summary:first-of-type"),i=a?e.parentElement:e;if(Zg.call(i,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof s=="function"){for(var l=e;e;){var c=e.parentElement,d=Mb(e);if(c&&!c.shadowRoot&&s(c)===!0)return pR(e);e.assignedSlot?e=e.assignedSlot:!c&&d!==e.ownerDocument?e=d.host:e=c}e=l}if(Eve(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return pR(e);return!1},Tve=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var s=r.children.item(n);if(s.tagName==="LEGEND")return Zg.call(r,"fieldset[disabled] *")?!0:!s.contains(e)}return!0}r=r.parentElement}return!1},_ve=function(e,r){return!(r.disabled||Ob(r)||bve(r)||jve(r,e)||wve(r)||Tve(r))},gR=function(e,r){return!(Sve(r)||Sz(r)<0||!_ve(e,r))},Ave=function(e){var r=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},Mve=function t(e){var r=[],n=[];return e.forEach(function(s,a){var i=!!s.scopeParent,l=i?s.scopeParent:s,c=yve(l,i),d=i?t(s.candidates):l;c===0?i?r.push.apply(r,d):r.push(l):n.push({documentOrder:a,tabIndex:c,item:s,isScope:i,content:d})}),n.sort(vve).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(r)},jz=function(e,r){r=r||{};var n;return r.getShadowRoot?n=xve([e],r.includeContainer,{filter:gR.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:Ave}):n=gve(e,r.includeContainer,gR.bind(null,r)),Mve(n)};function xR(t,e,r){let{reference:n,floating:s}=t;const a=Ji(e),i=HT(e),l=VT(i),c=co(e),d=a==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:u,y:n.y-s.height};break;case"bottom":m={x:u,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(Cp(e)){case"start":m[i]-=f*(r&&d?-1:1);break;case"end":m[i]+=f*(r&&d?-1:1);break}return m}const Ove=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let d=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:h}=xR(d,n,c),f=n,m={},p=0;for(let g=0;g<l.length;g++){const{name:y,fn:b}=l[g],{x:v,y:w,data:k,reset:N}=await b({x:u,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:d,platform:i,elements:{reference:t,floating:e}});u=v??u,h=w??h,m={...m,[y]:{...m[y],...k}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):N.rects),{x:u,y:h}=xR(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:s,middlewareData:m}};async function qT(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=oc(e,t),p=WT(m),y=l[f?h==="floating"?"reference":"floating":h],b=qm(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(y)))==null||r?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=h==="floating"?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},N=qm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:c}):v);return{top:(b.top-N.top+p.top)/k.y,bottom:(N.bottom-b.bottom+p.bottom)/k.y,left:(b.left-N.left+p.left)/k.x,right:(N.right-b.right+p.right)/k.x}}const Rve=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=oc(t,e)||{};if(d==null)return{};const h=WT(u),f={x:r,y:n},m=HT(s),p=VT(m),g=await i.getDimensions(d),y=m==="y",b=y?"top":"left",v=y?"bottom":"right",w=y?"clientHeight":"clientWidth",k=a.reference[p]+a.reference[m]-f[m]-a.floating[p],N=f[m]-a.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let C=S?S[w]:0;(!C||!await(i.isElement==null?void 0:i.isElement(S)))&&(C=l.floating[w]||a.floating[p]);const E=k/2-N/2,T=C/2-g[p]/2-1,R=lo(h[b],T),B=lo(h[v],T),M=R,L=C-g[p]-B,V=C/2-g[p]/2+E,ee=kj(M,V,L),Q=!c.arrow&&Cp(s)!=null&&V!==ee&&a.reference[p]/2-(V<M?R:B)-g[p]/2<0,J=Q?V<M?V-M:V-L:0;return{[m]:f[m]+J,data:{[m]:ee,centerOffset:V-ee-J,...Q&&{alignmentOffset:J}},reset:Q}}}),Pve=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=oc(t,e);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const b=co(s),v=Ji(l),w=co(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(w||!g?[Ab(l)]:lve(l)),S=p!=="none";!f&&S&&N.push(...hve(l,g,p,k));const C=[l,...N],E=await qT(e,y),T=[];let R=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&T.push(E[b]),h){const V=ove(s,i,k);T.push(E[V[0]],E[V[1]])}if(R=[...R,{placement:s,overflows:T}],!T.every(V=>V<=0)){var B,M;const V=(((B=a.flip)==null?void 0:B.index)||0)+1,ee=C[V];if(ee&&(!(h==="alignment"?v!==Ji(ee):!1)||R.every(_=>Ji(_.placement)===v?_.overflows[0]>0:!0)))return{data:{index:V,overflows:R},reset:{placement:ee}};let Q=(M=R.filter(J=>J.overflows[0]<=0).sort((J,_)=>J.overflows[1]-_.overflows[1])[0])==null?void 0:M.placement;if(!Q)switch(m){case"bestFit":{var L;const J=(L=R.filter(_=>{if(S){const H=Ji(_.placement);return H===v||H==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(H=>H>0).reduce((H,P)=>H+P,0)]).sort((_,H)=>_[1]-H[1])[0])==null?void 0:L[0];J&&(Q=J);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Tz(t){const e=lo(...t.map(a=>a.left)),r=lo(...t.map(a=>a.top)),n=Ns(...t.map(a=>a.right)),s=Ns(...t.map(a=>a.bottom));return{x:e,y:r,width:n-e,height:s-r}}function Ive(t){const e=t.slice().sort((s,a)=>s.y-a.y),r=[];let n=null;for(let s=0;s<e.length;s++){const a=e[s];!n||a.y-n.y>n.height/2?r.push([a]):r[r.length-1].push(a),n=a}return r.map(s=>qm(Tz(s)))}const Dve=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:r,elements:n,rects:s,platform:a,strategy:i}=e,{padding:l=2,x:c,y:d}=oc(t,e),u=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(n.reference))||[]),h=Ive(u),f=qm(Tz(u)),m=WT(l);function p(){if(h.length===2&&h[0].left>h[1].right&&c!=null&&d!=null)return h.find(y=>c>y.left-m.left&&c<y.right+m.right&&d>y.top-m.top&&d<y.bottom+m.bottom)||f;if(h.length>=2){if(Ji(r)==="y"){const R=h[0],B=h[h.length-1],M=co(r)==="top",L=R.top,V=B.bottom,ee=M?R.left:B.left,Q=M?R.right:B.right,J=Q-ee,_=V-L;return{top:L,bottom:V,left:ee,right:Q,width:J,height:_,x:ee,y:L}}const y=co(r)==="left",b=Ns(...h.map(R=>R.right)),v=lo(...h.map(R=>R.left)),w=h.filter(R=>y?R.left===v:R.right===b),k=w[0].top,N=w[w.length-1].bottom,S=v,C=b,E=C-S,T=N-k;return{top:k,bottom:N,left:S,right:C,width:E,height:T,x:S,y:k}}return f}const g=await a.getElementRects({reference:{getBoundingClientRect:p},floating:n.floating,strategy:i});return s.reference.x!==g.reference.x||s.reference.y!==g.reference.y||s.reference.width!==g.reference.width||s.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},_z=new Set(["left","top"]);async function Lve(t,e){const{placement:r,platform:n,elements:s}=t,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),i=co(r),l=Cp(r),c=Ji(r)==="y",d=_z.has(i)?-1:1,u=a&&c?-1:1,h=oc(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof p=="number"&&(m=l==="end"?p*-1:p),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const $ve=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=e,c=await Lve(e,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},Fve=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:b,y:v}=y;return{x:b,y:v}}},...c}=oc(t,e),d={x:r,y:n},u=await qT(e,c),h=Ji(co(s)),f=UT(h);let m=d[f],p=d[h];if(a){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",v=m+u[y],w=m-u[b];m=kj(v,m,w)}if(i){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=p+u[y],w=p-u[b];p=kj(v,p,w)}const g=l.fn({...e,[f]:m,[h]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:a,[h]:i}}}}}},Bve=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:a,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=oc(t,e),u={x:r,y:n},h=Ji(s),f=UT(h);let m=u[f],p=u[h];const g=oc(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f==="y"?"height":"width",k=a.reference[f]-a.floating[w]+y.mainAxis,N=a.reference[f]+a.reference[w]-y.mainAxis;m<k?m=k:m>N&&(m=N)}if(d){var b,v;const w=f==="y"?"width":"height",k=_z.has(co(s)),N=a.reference[h]-a.floating[w]+(k&&((b=i.offset)==null?void 0:b[h])||0)+(k?0:y.crossAxis),S=a.reference[h]+a.reference[w]+(k?0:((v=i.offset)==null?void 0:v[h])||0)-(k?y.crossAxis:0);p<N?p=N:p>S&&(p=S)}return{[f]:m,[h]:p}}}},zve=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:a,platform:i,elements:l}=e,{apply:c=()=>{},...d}=oc(t,e),u=await qT(e,d),h=co(s),f=Cp(s),m=Ji(s)==="y",{width:p,height:g}=a.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,y=f==="end"?"top":"bottom");const v=g-u.top-u.bottom,w=p-u.left-u.right,k=lo(g-u[y],v),N=lo(p-u[b],w),S=!e.middlewareData.shift;let C=k,E=N;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(E=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(C=v),S&&!f){const R=Ns(u.left,0),B=Ns(u.right,0),M=Ns(u.top,0),L=Ns(u.bottom,0);m?E=p-2*(R!==0||B!==0?R+B:Ns(u.left,u.right)):C=g-2*(M!==0||L!==0?M+L:Ns(u.top,u.bottom))}await c({...e,availableWidth:E,availableHeight:C});const T=await i.getDimensions(l.floating);return p!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function Az(t){const e=Mi(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Ga(t),a=s?t.offsetWidth:r,i=s?t.offsetHeight:n,l=_b(r)!==a||_b(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function GT(t){return Mr(t)?t:t.contextElement}function nm(t){const e=GT(t);if(!Ga(e))return Ho(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:a}=Az(e);let i=(a?_b(r.width):r.width)/n,l=(a?_b(r.height):r.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Uve=Ho(0);function Mz(t){const e=xa(t);return!Wk()||!e.visualViewport?Uve:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vve(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==xa(t)?!1:e}function yh(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),a=GT(t);let i=Ho(1);e&&(n?Mr(n)&&(i=nm(n)):i=nm(t));const l=Vve(a,r,n)?Mz(a):Ho(0);let c=(s.left+l.x)/i.x,d=(s.top+l.y)/i.y,u=s.width/i.x,h=s.height/i.y;if(a){const f=xa(a),m=n&&Mr(n)?xa(n):n;let p=f,g=vj(p);for(;g&&n&&m!==p;){const y=nm(g),b=g.getBoundingClientRect(),v=Mi(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,k=b.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,h*=y.y,c+=w,d+=k,p=xa(g),g=vj(p)}}return qm({width:u,height:h,x:c,y:d})}function Gk(t,e){const r=qk(t).scrollLeft;return e?e.left+r:yh(nl(t)).left+r}function Oz(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-Gk(t,r),s=r.top+e.scrollTop;return{x:n,y:s}}function Hve(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const a=s==="fixed",i=nl(n),l=e?Hk(e.floating):!1;if(n===i||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=Ho(1);const u=Ho(0),h=Ga(n);if((h||!h&&!a)&&((kp(n)!=="body"||Qx(i))&&(c=qk(n)),Ga(n))){const m=yh(n);d=nm(n),u.x=m.x+n.clientLeft,u.y=m.y+n.clientTop}const f=i&&!h&&!a?Oz(i,c):Ho(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:r.y*d.y-c.scrollTop*d.y+u.y+f.y}}function Wve(t){return Array.from(t.getClientRects())}function qve(t){const e=nl(t),r=qk(t),n=t.ownerDocument.body,s=Ns(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Ns(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Gk(t);const l=-r.scrollTop;return Mi(n).direction==="rtl"&&(i+=Ns(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}const yR=25;function Gve(t,e){const r=xa(t),n=nl(t),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=Wk();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=Gk(n);if(d<=0){const u=n.ownerDocument,h=u.body,f=getComputedStyle(h),m=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(n.clientWidth-h.clientWidth-m);p<=yR&&(a-=p)}else d<=yR&&(a+=d);return{width:a,height:i,x:l,y:c}}const Kve=new Set(["absolute","fixed"]);function Zve(t,e){const r=yh(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,a=Ga(t)?nm(t):Ho(1),i=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,d=n*a.y;return{width:i,height:l,x:c,y:d}}function vR(t,e,r){let n;if(e==="viewport")n=Gve(t,r);else if(e==="document")n=qve(nl(t));else if(Mr(e))n=Zve(e,r);else{const s=Mz(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return qm(n)}function Rz(t,e){const r=ic(t);return r===e||!Mr(r)||Ld(r)?!1:Mi(r).position==="fixed"||Rz(r,e)}function Yve(t,e){const r=e.get(t);if(r)return r;let n=Hl(t,[],!1).filter(l=>Mr(l)&&kp(l)!=="body"),s=null;const a=Mi(t).position==="fixed";let i=a?ic(t):t;for(;Mr(i)&&!Ld(i);){const l=Mi(i),c=zT(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&Kve.has(s.position)||Qx(i)&&!c&&Rz(t,i))?n=n.filter(u=>u!==i):s=l,i=ic(i)}return e.set(t,n),n}function Xve(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const i=[...r==="clippingAncestors"?Hk(e)?[]:Yve(e,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,u)=>{const h=vR(e,u,s);return d.top=Ns(h.top,d.top),d.right=lo(h.right,d.right),d.bottom=lo(h.bottom,d.bottom),d.left=Ns(h.left,d.left),d},vR(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Jve(t){const{width:e,height:r}=Az(t);return{width:e,height:r}}function Qve(t,e,r){const n=Ga(e),s=nl(e),a=r==="fixed",i=yh(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Ho(0);function d(){c.x=Gk(s)}if(n||!n&&!a)if((kp(e)!=="body"||Qx(s))&&(l=qk(e)),n){const m=yh(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&d();a&&!n&&s&&d();const u=s&&!n&&!a?Oz(s,l):Ho(0),h=i.left+l.scrollLeft-c.x-u.x,f=i.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:i.width,height:i.height}}function dN(t){return Mi(t).position==="static"}function bR(t,e){if(!Ga(t)||Mi(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return nl(t)===r&&(r=r.ownerDocument.body),r}function Pz(t,e){const r=xa(t);if(Hk(t))return r;if(!Ga(t)){let s=ic(t);for(;s&&!Ld(s);){if(Mr(s)&&!dN(s))return s;s=ic(s)}return r}let n=bR(t,e);for(;n&&H1e(n)&&dN(n);)n=bR(n,e);return n&&Ld(n)&&dN(n)&&!zT(n)?r:n||Z1e(t)||r}const ebe=async function(t){const e=this.getOffsetParent||Pz,r=this.getDimensions,n=await r(t.floating);return{reference:Qve(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function tbe(t){return Mi(t).direction==="rtl"}const rbe={convertOffsetParentRelativeRectToViewportRelativeRect:Hve,getDocumentElement:nl,getClippingRect:Xve,getOffsetParent:Pz,getElementRects:ebe,getClientRects:Wve,getDimensions:Jve,getScale:nm,isElement:Mr,isRTL:tbe};function Iz(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nbe(t,e){let r=null,n;const s=nl(t);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=d;if(l||e(),!f||!m)return;const p=c1(h),g=c1(s.clientWidth-(u+f)),y=c1(s.clientHeight-(h+m)),b=c1(u),w={rootMargin:-p+"px "+-g+"px "+-y+"px "+-b+"px",threshold:Ns(0,lo(1,c))||1};let k=!0;function N(S){const C=S[0].intersectionRatio;if(C!==c){if(!k)return i();C?i(!1,C):n=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!Iz(d,t.getBoundingClientRect())&&i(),k=!1}try{r=new IntersectionObserver(N,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(N,w)}r.observe(t)}return i(!0),a}function sbe(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=GT(t),u=s||a?[...d?Hl(d):[],...Hl(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",r,{passive:!0}),a&&b.addEventListener("resize",r)});const h=d&&l?nbe(d,r):null;let f=-1,m=null;i&&(m=new ResizeObserver(b=>{let[v]=b;v&&v.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),r()}),d&&!c&&m.observe(d),m.observe(e));let p,g=c?yh(t):null;c&&y();function y(){const b=yh(t);g&&!Iz(g,b)&&r(),g=b,p=requestAnimationFrame(y)}return r(),()=>{var b;u.forEach(v=>{s&&v.removeEventListener("scroll",r),a&&v.removeEventListener("resize",r)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(p)}}const abe=$ve,ibe=Fve,obe=Pve,lbe=zve,wR=Rve,cbe=Dve,dbe=Bve,ube=(t,e,r)=>{const n=new Map,s={platform:rbe,...r},a={...s.platform,_c:n};return Ove(t,e,{...s,platform:a})};var hbe=typeof document<"u",fbe=function(){},ov=hbe?x.useLayoutEffect:fbe;function Rb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!Rb(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&t.$$typeof)&&!Rb(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Dz(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function kR(t,e){const r=Dz(t);return Math.round(e*r)/r}function uN(t){const e=x.useRef(t);return ov(()=>{e.current=t}),e}function mbe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=x.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=x.useState(n);Rb(f,n)||m(n);const[p,g]=x.useState(null),[y,b]=x.useState(null),v=x.useCallback(_=>{_!==S.current&&(S.current=_,g(_))},[]),w=x.useCallback(_=>{_!==C.current&&(C.current=_,b(_))},[]),k=a||p,N=i||y,S=x.useRef(null),C=x.useRef(null),E=x.useRef(u),T=c!=null,R=uN(c),B=uN(s),M=uN(d),L=x.useCallback(()=>{if(!S.current||!C.current)return;const _={placement:e,strategy:r,middleware:f};B.current&&(_.platform=B.current),ube(S.current,C.current,_).then(H=>{const P={...H,isPositioned:M.current!==!1};V.current&&!Rb(E.current,P)&&(E.current=P,Va.flushSync(()=>{h(P)}))})},[f,e,r,B,M]);ov(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(_=>({..._,isPositioned:!1})))},[d]);const V=x.useRef(!1);ov(()=>(V.current=!0,()=>{V.current=!1}),[]),ov(()=>{if(k&&(S.current=k),N&&(C.current=N),k&&N){if(R.current)return R.current(k,N,L);L()}},[k,N,L,R,T]);const ee=x.useMemo(()=>({reference:S,floating:C,setReference:v,setFloating:w}),[v,w]),Q=x.useMemo(()=>({reference:k,floating:N}),[k,N]),J=x.useMemo(()=>{const _={position:r,left:0,top:0};if(!Q.floating)return _;const H=kR(Q.floating,u.x),P=kR(Q.floating,u.y);return l?{..._,transform:"translate("+H+"px, "+P+"px)",...Dz(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:H,top:P}},[r,l,Q.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:L,refs:ee,elements:Q,floatingStyles:J}),[u,L,ee,Q,J])}const pbe=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?wR({element:n.current,padding:s}).fn(r):{}:n?wR({element:n,padding:s}).fn(r):{}}}},sl=(t,e)=>({...abe(t),options:[t,e]}),Bh=(t,e)=>({...ibe(t),options:[t,e]}),CR=(t,e)=>({...dbe(t),options:[t,e]}),uo=(t,e)=>({...obe(t),options:[t,e]}),Kk=(t,e)=>({...lbe(t),options:[t,e]}),eg=(t,e)=>({...cbe(t),options:[t,e]}),Lz=(t,e)=>({...pbe(t),options:[t,e]}),$z={...hD},gbe=$z.useInsertionEffect,xbe=gbe||(t=>t());function Al(t){const e=x.useRef(()=>{});return xbe(()=>{e.current=t}),x.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}var Ms=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sj.apply(this,arguments)}let NR=!1,ybe=0;const SR=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+ybe++;function vbe(){const[t,e]=x.useState(()=>NR?SR():void 0);return Ms(()=>{t==null&&e(SR())},[]),x.useEffect(()=>{NR=!0},[]),t}const bbe=$z.useId,KT=bbe||vbe;function wbe(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(s=>s(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(s=>s!==r))||[])}}}const kbe=x.createContext(null),Cbe=x.createContext(null),ZT=()=>{var t;return((t=x.useContext(kbe))==null?void 0:t.id)||null},YT=()=>x.useContext(Cbe);function ey(t){return"data-floating-ui-"+t}function Au(t){const e=x.useRef(t);return Ms(()=>{e.current=t}),e}const ER=ey("safe-polygon");function lv(t,e,r){return r&&!wj(r)?0:typeof t=="number"?t:t==null?void 0:t[e]}function Nbe(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,dataRef:s,events:a,elements:i}=t,{enabled:l=!0,delay:c=0,handleClose:d=null,mouseOnly:u=!1,restMs:h=0,move:f=!0}=e,m=YT(),p=ZT(),g=Au(d),y=Au(c),b=Au(r),v=x.useRef(),w=x.useRef(-1),k=x.useRef(),N=x.useRef(-1),S=x.useRef(!0),C=x.useRef(!1),E=x.useRef(()=>{}),T=x.useRef(!1),R=x.useCallback(()=>{var J;const _=(J=s.current.openEvent)==null?void 0:J.type;return(_==null?void 0:_.includes("mouse"))&&_!=="mousedown"},[s]);x.useEffect(()=>{if(!l)return;function J(_){let{open:H}=_;H||(clearTimeout(w.current),clearTimeout(N.current),S.current=!0,T.current=!1)}return a.on("openchange",J),()=>{a.off("openchange",J)}},[l,a]),x.useEffect(()=>{if(!l||!g.current||!r)return;function J(H){R()&&n(!1,H,"hover")}const _=od(i.floating).documentElement;return _.addEventListener("mouseleave",J),()=>{_.removeEventListener("mouseleave",J)}},[i.floating,r,n,l,g,R]);const B=x.useCallback(function(J,_,H){_===void 0&&(_=!0),H===void 0&&(H="hover");const P=lv(y.current,"close",v.current);P&&!k.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>n(!1,J,H),P)):_&&(clearTimeout(w.current),n(!1,J,H))},[y,n]),M=Al(()=>{E.current(),k.current=void 0}),L=Al(()=>{if(C.current){const J=od(i.floating).body;J.style.pointerEvents="",J.removeAttribute(ER),C.current=!1}}),V=Al(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);x.useEffect(()=>{if(!l)return;function J(K){if(clearTimeout(w.current),S.current=!1,u&&!wj(v.current)||h>0&&!lv(y.current,"open"))return;const F=lv(y.current,"open",v.current);F?w.current=window.setTimeout(()=>{b.current||n(!0,K,"hover")},F):r||n(!0,K,"hover")}function _(K){if(V())return;E.current();const F=od(i.floating);if(clearTimeout(N.current),T.current=!1,g.current&&s.current.floatingContext){r||clearTimeout(w.current),k.current=g.current({...s.current.floatingContext,tree:m,x:K.clientX,y:K.clientY,onClose(){L(),M(),V()||B(K,!0,"safe-polygon")}});const z=k.current;F.addEventListener("mousemove",z),E.current=()=>{F.removeEventListener("mousemove",z)};return}(v.current==="touch"?!Wm(i.floating,K.relatedTarget):!0)&&B(K)}function H(K){V()||s.current.floatingContext&&(g.current==null||g.current({...s.current.floatingContext,tree:m,x:K.clientX,y:K.clientY,onClose(){L(),M(),V()||B(K)}})(K))}if(Mr(i.domReference)){var P;const K=i.domReference;return r&&K.addEventListener("mouseleave",H),(P=i.floating)==null||P.addEventListener("mouseleave",H),f&&K.addEventListener("mousemove",J,{once:!0}),K.addEventListener("mouseenter",J),K.addEventListener("mouseleave",_),()=>{var F;r&&K.removeEventListener("mouseleave",H),(F=i.floating)==null||F.removeEventListener("mouseleave",H),f&&K.removeEventListener("mousemove",J),K.removeEventListener("mouseenter",J),K.removeEventListener("mouseleave",_)}}},[i,l,t,u,h,f,B,M,L,n,r,b,m,y,g,s,V]),Ms(()=>{var J;if(l&&r&&(J=g.current)!=null&&J.__options.blockPointerEvents&&R()){C.current=!0;const H=i.floating;if(Mr(i.domReference)&&H){var _;const P=od(i.floating).body;P.setAttribute(ER,"");const K=i.domReference,F=m==null||(_=m.nodesRef.current.find(ne=>ne.id===p))==null||(_=_.context)==null?void 0:_.elements.floating;return F&&(F.style.pointerEvents=""),P.style.pointerEvents="none",K.style.pointerEvents="auto",H.style.pointerEvents="auto",()=>{P.style.pointerEvents="",K.style.pointerEvents="",H.style.pointerEvents=""}}}},[l,r,p,i,m,g,R]),Ms(()=>{r||(v.current=void 0,T.current=!1,M(),L())},[r,M,L]),x.useEffect(()=>()=>{M(),clearTimeout(w.current),clearTimeout(N.current),L()},[l,i.domReference,M,L]);const ee=x.useMemo(()=>{function J(_){v.current=_.pointerType}return{onPointerDown:J,onPointerEnter:J,onMouseMove(_){const{nativeEvent:H}=_;function P(){!S.current&&!b.current&&n(!0,H,"hover")}u&&!wj(v.current)||r||h===0||T.current&&_.movementX**2+_.movementY**2<2||(clearTimeout(N.current),v.current==="touch"?P():(T.current=!0,N.current=window.setTimeout(P,h)))}}},[u,n,r,b,h]),Q=x.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(J){V()||B(J.nativeEvent,!1)}}),[B,V]);return x.useMemo(()=>l?{reference:ee,floating:Q}:{},[l,ee,Q])}const Ej=()=>{},Fz=x.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Ej,setState:Ej,isInstantPhase:!1}),Sbe=()=>x.useContext(Fz);function Ebe(t){const{children:e,delay:r,timeoutMs:n=0}=t,[s,a]=x.useReducer((c,d)=>({...c,...d}),{delay:r,timeoutMs:n,initialDelay:r,currentId:null,isInstantPhase:!1}),i=x.useRef(null),l=x.useCallback(c=>{a({currentId:c})},[]);return Ms(()=>{s.currentId?i.current===null?i.current=s.currentId:s.isInstantPhase||a({isInstantPhase:!0}):(s.isInstantPhase&&a({isInstantPhase:!1}),i.current=null)},[s.currentId,s.isInstantPhase]),x.createElement(Fz.Provider,{value:x.useMemo(()=>({...s,setState:a,setCurrentId:l}),[s,l])},e)}function jbe(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,floatingId:s}=t,{id:a,enabled:i=!0}=e,l=a??s,c=Sbe(),{currentId:d,setCurrentId:u,initialDelay:h,setState:f,timeoutMs:m}=c;return Ms(()=>{i&&d&&(f({delay:{open:1,close:lv(h,"close")}}),d!==l&&n(!1))},[i,l,n,f,d,h]),Ms(()=>{function p(){n(!1),f({delay:h,currentId:null})}if(i&&d&&!r&&d===l){if(m){const g=window.setTimeout(p,m);return()=>{clearTimeout(g)}}p()}},[i,r,f,d,l,n,h,m]),Ms(()=>{i&&(u===Ej||!r||u(l))},[i,r,u,l]),c}function hN(t,e){let r=t.filter(s=>{var a;return s.parentId===e&&((a=s.context)==null?void 0:a.open)}),n=r;for(;n.length;)n=t.filter(s=>{var a;return(a=n)==null?void 0:a.some(i=>{var l;return s.parentId===i.id&&((l=s.context)==null?void 0:l.open)})}),r=r.concat(n);return r}const Bz=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function zz(t,e){const r=jz(t,Bz());e==="prev"&&r.reverse();const n=r.indexOf(bj(od(t)));return r.slice(n+1)[0]}function Tbe(){return zz(document.body,"next")}function _be(){return zz(document.body,"prev")}function fN(t,e){const r=e||t.currentTarget,n=t.relatedTarget;return!n||!Wm(r,n)}function Abe(t){jz(t,Bz()).forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")})}function jR(t){t.querySelectorAll("[data-tabindex]").forEach(r=>{const n=r.dataset.tabindex;delete r.dataset.tabindex,n?r.setAttribute("tabindex",n):r.removeAttribute("tabindex")})}const Uz={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Mbe;function TR(t){t.key==="Tab"&&(t.target,clearTimeout(Mbe))}const _R=x.forwardRef(function(e,r){const[n,s]=x.useState();Ms(()=>(kz()&&s("button"),document.addEventListener("keydown",TR),()=>{document.removeEventListener("keydown",TR)}),[]);const a={ref:r,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[ey("focus-guard")]:"",style:Uz};return x.createElement("span",Sj({},e,a))}),Vz=x.createContext(null),AR=ey("portal");function Obe(t){t===void 0&&(t={});const{id:e,root:r}=t,n=KT(),s=Pbe(),[a,i]=x.useState(null),l=x.useRef(null);return Ms(()=>()=>{a==null||a.remove(),queueMicrotask(()=>{l.current=null})},[a]),Ms(()=>{if(!n||l.current)return;const c=e?document.getElementById(e):null;if(!c)return;const d=document.createElement("div");d.id=n,d.setAttribute(AR,""),c.appendChild(d),l.current=d,i(d)},[e,n]),Ms(()=>{if(r===null||!n||l.current)return;let c=r||(s==null?void 0:s.portalNode);c&&!Mr(c)&&(c=c.current),c=c||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,c.appendChild(d));const u=document.createElement("div");u.id=n,u.setAttribute(AR,""),c=d||c,c.appendChild(u),l.current=u,i(u)},[e,r,n,s]),a}function Rbe(t){const{children:e,id:r,root:n,preserveTabOrder:s=!0}=t,a=Obe({id:r,root:n}),[i,l]=x.useState(null),c=x.useRef(null),d=x.useRef(null),u=x.useRef(null),h=x.useRef(null),f=i==null?void 0:i.modal,m=i==null?void 0:i.open,p=!!i&&!i.modal&&i.open&&s&&!!(n||a);return x.useEffect(()=>{if(!a||!s||f)return;function g(y){a&&fN(y)&&(y.type==="focusin"?jR:Abe)(a)}return a.addEventListener("focusin",g,!0),a.addEventListener("focusout",g,!0),()=>{a.removeEventListener("focusin",g,!0),a.removeEventListener("focusout",g,!0)}},[a,s,f]),x.useEffect(()=>{a&&(m||jR(a))},[m,a]),x.createElement(Vz.Provider,{value:x.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:c,afterOutsideRef:d,beforeInsideRef:u,afterInsideRef:h,portalNode:a,setFocusManagerState:l}),[s,a])},p&&a&&x.createElement(_R,{"data-type":"outside",ref:c,onFocus:g=>{if(fN(g,a)){var y;(y=u.current)==null||y.focus()}else{const b=_be()||(i==null?void 0:i.refs.domReference.current);b==null||b.focus()}}}),p&&a&&x.createElement("span",{"aria-owns":a.id,style:Uz}),a&&Va.createPortal(e,a),p&&a&&x.createElement(_R,{"data-type":"outside",ref:d,onFocus:g=>{if(fN(g,a)){var y;(y=h.current)==null||y.focus()}else{const b=Tbe()||(i==null?void 0:i.refs.domReference.current);b==null||b.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,g.nativeEvent,"focus-out"))}}}))}const Pbe=()=>x.useContext(Vz),Ibe="data-floating-ui-focusable",Dbe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Lbe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},MR=t=>{var e,r;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(r=t==null?void 0:t.outsidePress)!=null?r:!0}};function Hz(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,elements:s,dataRef:a}=t,{enabled:i=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:d="pointerdown",referencePress:u=!1,referencePressEvent:h="pointerdown",ancestorScroll:f=!1,bubbles:m,capture:p}=e,g=YT(),y=Al(typeof c=="function"?c:()=>!1),b=typeof c=="function"?y:c,v=x.useRef(!1),w=x.useRef(!1),{escapeKey:k,outsidePress:N}=MR(m),{escapeKey:S,outsidePress:C}=MR(p),E=x.useRef(!1),T=Al(ee=>{var Q;if(!r||!i||!l||ee.key!=="Escape"||E.current)return;const J=(Q=a.current.floatingContext)==null?void 0:Q.nodeId,_=g?hN(g.nodesRef.current,J):[];if(!k&&(ee.stopPropagation(),_.length>0)){let H=!0;if(_.forEach(P=>{var K;if((K=P.context)!=null&&K.open&&!P.context.dataRef.current.__escapeKeyBubbles){H=!1;return}}),!H)return}n(!1,eve(ee)?ee.nativeEvent:ee,"escape-key")}),R=Al(ee=>{var Q;const J=()=>{var _;T(ee),(_=yf(ee))==null||_.removeEventListener("keydown",J)};(Q=yf(ee))==null||Q.addEventListener("keydown",J)}),B=Al(ee=>{var Q;const J=v.current;v.current=!1;const _=w.current;if(w.current=!1,d==="click"&&_||J||typeof b=="function"&&!b(ee))return;const H=yf(ee),P="["+ey("inert")+"]",K=od(s.floating).querySelectorAll(P);let F=Mr(H)?H:null;for(;F&&!Ld(F);){const oe=ic(F);if(Ld(oe)||!Mr(oe))break;F=oe}if(K.length&&Mr(H)&&!tve(H)&&!Wm(H,s.floating)&&Array.from(K).every(oe=>!Wm(F,oe)))return;if(Ga(H)&&V){const oe=H.clientWidth>0&&H.scrollWidth>H.clientWidth,ue=H.clientHeight>0&&H.scrollHeight>H.clientHeight;let _e=ue&&ee.offsetX>H.clientWidth;if(ue&&Mi(H).direction==="rtl"&&(_e=ee.offsetX<=H.offsetWidth-H.clientWidth),_e||oe&&ee.offsetY>H.clientHeight)return}const ne=(Q=a.current.floatingContext)==null?void 0:Q.nodeId,z=g&&hN(g.nodesRef.current,ne).some(oe=>{var ue;return cN(ee,(ue=oe.context)==null?void 0:ue.elements.floating)});if(cN(ee,s.floating)||cN(ee,s.domReference)||z)return;const Z=g?hN(g.nodesRef.current,ne):[];if(Z.length>0){let oe=!0;if(Z.forEach(ue=>{var _e;if((_e=ue.context)!=null&&_e.open&&!ue.context.dataRef.current.__outsidePressBubbles){oe=!1;return}}),!oe)return}n(!1,ee,"outside-press")}),M=Al(ee=>{var Q;const J=()=>{var _;B(ee),(_=yf(ee))==null||_.removeEventListener(d,J)};(Q=yf(ee))==null||Q.addEventListener(d,J)});x.useEffect(()=>{if(!r||!i)return;a.current.__escapeKeyBubbles=k,a.current.__outsidePressBubbles=N;let ee=-1;function Q(K){n(!1,K,"ancestor-scroll")}function J(){window.clearTimeout(ee),E.current=!0}function _(){ee=window.setTimeout(()=>{E.current=!1},Wk()?5:0)}const H=od(s.floating);l&&(H.addEventListener("keydown",S?R:T,S),H.addEventListener("compositionstart",J),H.addEventListener("compositionend",_)),b&&H.addEventListener(d,C?M:B,C);let P=[];return f&&(Mr(s.domReference)&&(P=Hl(s.domReference)),Mr(s.floating)&&(P=P.concat(Hl(s.floating))),!Mr(s.reference)&&s.reference&&s.reference.contextElement&&(P=P.concat(Hl(s.reference.contextElement)))),P=P.filter(K=>{var F;return K!==((F=H.defaultView)==null?void 0:F.visualViewport)}),P.forEach(K=>{K.addEventListener("scroll",Q,{passive:!0})}),()=>{l&&(H.removeEventListener("keydown",S?R:T,S),H.removeEventListener("compositionstart",J),H.removeEventListener("compositionend",_)),b&&H.removeEventListener(d,C?M:B,C),P.forEach(K=>{K.removeEventListener("scroll",Q)}),window.clearTimeout(ee)}},[a,s,l,b,d,r,n,f,i,k,N,T,S,R,B,C,M]),x.useEffect(()=>{v.current=!1},[b,d]);const L=x.useMemo(()=>({onKeyDown:T,[Dbe[h]]:ee=>{u&&n(!1,ee.nativeEvent,"reference-press")}}),[T,n,u,h]),V=x.useMemo(()=>({onKeyDown:T,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[Lbe[d]]:()=>{v.current=!0}}),[T,d]);return x.useMemo(()=>i?{reference:L,floating:V}:{},[i,L,V])}function $be(t){const{open:e=!1,onOpenChange:r,elements:n}=t,s=KT(),a=x.useRef({}),[i]=x.useState(()=>wbe()),l=ZT()!=null,[c,d]=x.useState(n.reference),u=Al((m,p,g)=>{a.current.openEvent=m?p:void 0,i.emit("openchange",{open:m,event:p,reason:g,nested:l}),r==null||r(m,p,g)}),h=x.useMemo(()=>({setPositionReference:d}),[]),f=x.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return x.useMemo(()=>({dataRef:a,open:e,onOpenChange:u,elements:f,events:i,floatingId:s,refs:h}),[e,u,f,i,s,h])}function Np(t){t===void 0&&(t={});const{nodeId:e}=t,r=$be({...t,elements:{reference:null,floating:null,...t.elements}}),n=t.rootContext||r,s=n.elements,[a,i]=x.useState(null),[l,c]=x.useState(null),u=(s==null?void 0:s.domReference)||a,h=x.useRef(null),f=YT();Ms(()=>{u&&(h.current=u)},[u]);const m=mbe({...t,elements:{...s,...l&&{reference:l}}}),p=x.useCallback(w=>{const k=Mr(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;c(k),m.refs.setReference(k)},[m.refs]),g=x.useCallback(w=>{(Mr(w)||w===null)&&(h.current=w,i(w)),(Mr(m.refs.reference.current)||m.refs.reference.current===null||w!==null&&!Mr(w))&&m.refs.setReference(w)},[m.refs]),y=x.useMemo(()=>({...m.refs,setReference:g,setPositionReference:p,domReference:h}),[m.refs,g,p]),b=x.useMemo(()=>({...m.elements,domReference:u}),[m.elements,u]),v=x.useMemo(()=>({...m,...n,refs:y,elements:b,nodeId:e}),[m,y,b,e,n]);return Ms(()=>{n.dataRef.current.floatingContext=v;const w=f==null?void 0:f.nodesRef.current.find(k=>k.id===e);w&&(w.context=v)}),x.useMemo(()=>({...m,context:v,refs:y,elements:b}),[m,y,b,v])}function Fbe(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,events:s,dataRef:a,elements:i}=t,{enabled:l=!0,visibleOnly:c=!0}=e,d=x.useRef(!1),u=x.useRef(),h=x.useRef(!0);x.useEffect(()=>{if(!l)return;const m=xa(i.domReference);function p(){!r&&Ga(i.domReference)&&i.domReference===bj(od(i.domReference))&&(d.current=!0)}function g(){h.current=!0}return m.addEventListener("blur",p),m.addEventListener("keydown",g,!0),()=>{m.removeEventListener("blur",p),m.removeEventListener("keydown",g,!0)}},[i.domReference,r,l]),x.useEffect(()=>{if(!l)return;function m(p){let{reason:g}=p;(g==="reference-press"||g==="escape-key")&&(d.current=!0)}return s.on("openchange",m),()=>{s.off("openchange",m)}},[s,l]),x.useEffect(()=>()=>{clearTimeout(u.current)},[]);const f=x.useMemo(()=>({onPointerDown(m){X1e(m.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(m){if(d.current)return;const p=yf(m.nativeEvent);if(c&&Mr(p))try{if(kz()&&J1e())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!h.current&&!nve(p))return}n(!0,m.nativeEvent,"focus")},onBlur(m){d.current=!1;const p=m.relatedTarget,g=m.nativeEvent,y=Mr(p)&&p.hasAttribute(ey("focus-guard"))&&p.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var b;const v=bj(i.domReference?i.domReference.ownerDocument:document);!p&&v===i.domReference||Wm((b=a.current.floatingContext)==null?void 0:b.refs.floating.current,v)||Wm(i.domReference,v)||y||n(!1,g,"focus")})}}),[a,i.domReference,n,c]);return x.useMemo(()=>l?{reference:f}:{},[l,f])}const OR="active",RR="selected";function mN(t,e,r){const n=new Map,s=r==="item";let a=t;if(s&&t){const{[OR]:i,[RR]:l,...c}=t;a=c}return{...r==="floating"&&{tabIndex:-1,[Ibe]:""},...a,...e.map(i=>{const l=i?i[r]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((i,l)=>(l&&Object.entries(l).forEach(c=>{let[d,u]=c;if(!(s&&[OR,RR].includes(d)))if(d.indexOf("on")===0){if(n.has(d)||n.set(d,[]),typeof u=="function"){var h;(h=n.get(d))==null||h.push(u),i[d]=function(){for(var f,m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];return(f=n.get(d))==null?void 0:f.map(y=>y(...p)).find(y=>y!==void 0)}}}else i[d]=u}),i),{})}}function Wz(t){t===void 0&&(t=[]);const e=t.map(l=>l==null?void 0:l.reference),r=t.map(l=>l==null?void 0:l.floating),n=t.map(l=>l==null?void 0:l.item),s=x.useCallback(l=>mN(l,t,"reference"),e),a=x.useCallback(l=>mN(l,t,"floating"),r),i=x.useCallback(l=>mN(l,t,"item"),n);return x.useMemo(()=>({getReferenceProps:s,getFloatingProps:a,getItemProps:i}),[s,a,i])}const Bbe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function zbe(t,e){var r;e===void 0&&(e={});const{open:n,floatingId:s}=t,{enabled:a=!0,role:i="dialog"}=e,l=(r=Bbe.get(i))!=null?r:i,c=KT(),u=ZT()!=null,h=x.useMemo(()=>l==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:n?s:void 0}:{"aria-expanded":n?"true":"false","aria-haspopup":l==="alertdialog"?"dialog":l,"aria-controls":n?s:void 0,...l==="listbox"&&{role:"combobox"},...l==="menu"&&{id:c},...l==="menu"&&u&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[l,s,u,n,c,i]),f=x.useMemo(()=>{const p={id:s,...l&&{role:l}};return l==="tooltip"||i==="label"?p:{...p,...l==="menu"&&{"aria-labelledby":c}}},[l,s,c,i]),m=x.useCallback(p=>{let{active:g,selected:y}=p;const b={role:"option",...g&&{id:s+"-option"}};switch(i){case"select":return{...b,"aria-selected":g&&y};case"combobox":return{...b,...g&&{"aria-selected":!0}}}return{}},[s,i]);return x.useMemo(()=>a?{reference:h,floating:f,item:m}:{},[a,h,f,m])}const PR=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,r)=>(r?"-":"")+e.toLowerCase());function of(t,e){return typeof t=="function"?t(e):t}function Ube(t,e){const[r,n]=x.useState(t);return t&&!r&&n(!0),x.useEffect(()=>{if(!t&&r){const s=setTimeout(()=>n(!1),e);return()=>clearTimeout(s)}},[t,r,e]),r}function Vbe(t,e){e===void 0&&(e={});const{open:r,elements:{floating:n}}=t,{duration:s=250}=e,i=(typeof s=="number"?s:s.close)||0,[l,c]=x.useState("unmounted"),d=Ube(r,i);return!d&&l==="close"&&c("unmounted"),Ms(()=>{if(n){if(r){c("initial");const u=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(u)}}c("close")}},[r,n]),{isMounted:d,status:l}}function XT(t,e){e===void 0&&(e={});const{initial:r={opacity:0},open:n,close:s,common:a,duration:i=250}=e,l=t.placement,c=l.split("-")[0],d=x.useMemo(()=>({side:c,placement:l}),[c,l]),u=typeof i=="number",h=(u?i:i.open)||0,f=(u?i:i.close)||0,[m,p]=x.useState(()=>({...of(a,d),...of(r,d)})),{isMounted:g,status:y}=Vbe(t,{duration:i}),b=Au(r),v=Au(n),w=Au(s),k=Au(a);return Ms(()=>{const N=of(b.current,d),S=of(w.current,d),C=of(k.current,d),E=of(v.current,d)||Object.keys(N).reduce((T,R)=>(T[R]="",T),{});if(y==="initial"&&p(T=>({transitionProperty:T.transitionProperty,...C,...N})),y==="open"&&p({transitionProperty:Object.keys(E).map(PR).join(","),transitionDuration:h+"ms",...C,...E}),y==="close"){const T=S||N;p({transitionProperty:Object.keys(T).map(PR).join(","),transitionDuration:f+"ms",...C,...T})}},[f,w,b,v,k,h,y,d]),{isMounted:g,styles:m}}function ts(t){this.content=t}ts.prototype={constructor:ts,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,s=n.find(t),a=n.content.slice();return s==-1?a.push(r||t,e):(a[s+1]=e,r&&(a[s]=r)),new ts(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new ts(r)},addToStart:function(t,e){return new ts([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new ts(r)},addBefore:function(t,e,r){var n=this.remove(e),s=n.content.slice(),a=n.find(t);return s.splice(a==-1?s.length:a,0,e,r),new ts(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ts.from(t),t.size?new ts(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ts.from(t),t.size?new ts(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ts.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};ts.from=function(t){if(t instanceof ts)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new ts(e)};function qz(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let s=t.child(n),a=e.child(n);if(s==a){r+=s.nodeSize;continue}if(!s.sameMarkup(a))return r;if(s.isText&&s.text!=a.text){for(let i=0;s.text[i]==a.text[i];i++)r++;return r}if(s.content.size||a.content.size){let i=qz(s.content,a.content,r+1);if(i!=null)return i}r+=s.nodeSize}}function Gz(t,e,r,n){for(let s=t.childCount,a=e.childCount;;){if(s==0||a==0)return s==a?null:{a:r,b:n};let i=t.child(--s),l=e.child(--a),c=i.nodeSize;if(i==l){r-=c,n-=c;continue}if(!i.sameMarkup(l))return{a:r,b:n};if(i.isText&&i.text!=l.text){let d=0,u=Math.min(i.text.length,l.text.length);for(;d<u&&i.text[i.text.length-d-1]==l.text[l.text.length-d-1];)d++,r--,n--;return{a:r,b:n}}if(i.content.size||l.content.size){let d=Gz(i.content,l.content,r-1,n-1);if(d)return d}r-=c,n-=c}}class Ne{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,s=0,a){for(let i=0,l=0;l<r;i++){let c=this.content[i],d=l+c.nodeSize;if(d>e&&n(c,s+l,a||null,i)!==!1&&c.content.size){let u=l+1;c.nodesBetween(Math.max(0,e-u),Math.min(c.content.size,r-u),n,s+u)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,s){let a="",i=!0;return this.nodesBetween(e,r,(l,c)=>{let d=l.isText?l.text.slice(Math.max(e,c)-c,r-c):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&n&&(i?i=!1:a+=n),a+=d},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,s=this.content.slice(),a=0;for(r.isText&&r.sameMarkup(n)&&(s[s.length-1]=r.withText(r.text+n.text),a=1);a<e.content.length;a++)s.push(e.content[a]);return new Ne(s,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],s=0;if(r>e)for(let a=0,i=0;i<r;a++){let l=this.content[a],c=i+l.nodeSize;c>e&&((i<e||c>r)&&(l.isText?l=l.cut(Math.max(0,e-i),Math.min(l.text.length,r-i)):l=l.cut(Math.max(0,e-i-1),Math.min(l.content.size,r-i-1))),n.push(l),s+=l.nodeSize),i=c}return new Ne(n,s)}cutByIndex(e,r){return e==r?Ne.empty:e==0&&r==this.content.length?this:new Ne(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let s=this.content.slice(),a=this.size+r.nodeSize-n.nodeSize;return s[e]=r,new Ne(s,a)}addToStart(e){return new Ne([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ne(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let s=this.content[r];e(s,n,r),n+=s.nodeSize}}findDiffStart(e,r=0){return qz(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return Gz(this,e,r,n)}findIndex(e){if(e==0)return d1(0,e);if(e==this.size)return d1(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let s=this.child(r),a=n+s.nodeSize;if(a>=e)return a==e?d1(r+1,a):d1(r,n);n=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return Ne.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ne(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ne.empty;let r,n=0;for(let s=0;s<e.length;s++){let a=e[s];n+=a.nodeSize,s&&a.isText&&e[s-1].sameMarkup(a)?(r||(r=e.slice(0,s)),r[r.length-1]=a.withText(r[r.length-1].text+a.text)):r&&r.push(a)}return new Ne(r||e,n)}static from(e){if(!e)return Ne.empty;if(e instanceof Ne)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ne([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ne.empty=new Ne([],0);const pN={index:0,offset:0};function d1(t,e){return pN.index=t,pN.offset=e,pN}function Pb(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Pb(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Pb(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let jr=class jj{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let s=0;s<e.length;s++){let a=e[s];if(this.eq(a))return e;if(this.type.excludes(a.type))r||(r=e.slice(0,s));else{if(a.type.excludes(this.type))return e;!n&&a.type.rank>this.type.rank&&(r||(r=e.slice(0,s)),r.push(this),n=!0),r&&r.push(a)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Pb(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let s=n.create(r.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return jj.none;if(e instanceof jj)return[e];let r=e.slice();return r.sort((n,s)=>n.type.rank-s.type.rank),r}};jr.none=[];class Ib extends Error{}class $e{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=Zz(this.content,e+this.openStart,r);return n&&new $e(n,this.openStart,this.openEnd)}removeBetween(e,r){return new $e(Kz(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return $e.empty;let n=r.openStart||0,s=r.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new $e(Ne.fromJSON(e,r.content),n,s)}static maxOpen(e,r=!0){let n=0,s=0;for(let a=e.firstChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=e.lastChild;a&&!a.isLeaf&&(r||!a.type.spec.isolating);a=a.lastChild)s++;return new $e(e,n,s)}}$e.empty=new $e(Ne.empty,0,0);function Kz(t,e,r){let{index:n,offset:s}=t.findIndex(e),a=t.maybeChild(n),{index:i,offset:l}=t.findIndex(r);if(s==e||a.isText){if(l!=r&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(n,a.copy(Kz(a.content,e-s-1,r-s-1)))}function Zz(t,e,r,n){let{index:s,offset:a}=t.findIndex(e),i=t.maybeChild(s);if(a==e||i.isText)return n&&!n.canReplace(s,s,r)?null:t.cut(0,e).append(r).append(t.cut(e));let l=Zz(i.content,e-a-1,r,i);return l&&t.replaceChild(s,i.copy(l))}function Hbe(t,e,r){if(r.openStart>t.depth)throw new Ib("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new Ib("Inconsistent open depths");return Yz(t,e,r,0)}function Yz(t,e,r,n){let s=t.index(n),a=t.node(n);if(s==e.index(n)&&n<t.depth-r.openStart){let i=Yz(t,e,r,n+1);return a.copy(a.content.replaceChild(s,i))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let i=t.parent,l=i.content;return Qu(i,l.cut(0,t.parentOffset).append(r.content).append(l.cut(e.parentOffset)))}else{let{start:i,end:l}=Wbe(r,t);return Qu(a,Jz(t,i,l,e,n))}else return Qu(a,Db(t,e,n))}function Xz(t,e){if(!e.type.compatibleContent(t.type))throw new Ib("Cannot join "+e.type.name+" onto "+t.type.name)}function Tj(t,e,r){let n=t.node(r);return Xz(n,e.node(r)),n}function Ju(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function tg(t,e,r,n){let s=(e||t).node(r),a=0,i=e?e.index(r):s.childCount;t&&(a=t.index(r),t.depth>r?a++:t.textOffset&&(Ju(t.nodeAfter,n),a++));for(let l=a;l<i;l++)Ju(s.child(l),n);e&&e.depth==r&&e.textOffset&&Ju(e.nodeBefore,n)}function Qu(t,e){return t.type.checkContent(e),t.copy(e)}function Jz(t,e,r,n,s){let a=t.depth>s&&Tj(t,e,s+1),i=n.depth>s&&Tj(r,n,s+1),l=[];return tg(null,t,s,l),a&&i&&e.index(s)==r.index(s)?(Xz(a,i),Ju(Qu(a,Jz(t,e,r,n,s+1)),l)):(a&&Ju(Qu(a,Db(t,e,s+1)),l),tg(e,r,s,l),i&&Ju(Qu(i,Db(r,n,s+1)),l)),tg(n,null,s,l),new Ne(l)}function Db(t,e,r){let n=[];if(tg(null,t,r,n),t.depth>r){let s=Tj(t,e,r+1);Ju(Qu(s,Db(t,e,r+1)),n)}return tg(e,null,r,n),new Ne(n)}function Wbe(t,e){let r=e.depth-t.openStart,s=e.node(r).copy(t.content);for(let a=r-1;a>=0;a--)s=e.node(a).copy(Ne.from(s));return{start:s.resolveNoCache(t.openStart+r),end:s.resolveNoCache(s.content.size-t.openEnd-r)}}class Yg{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(r);return n?e.child(r).cut(n):s}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],s=r==0?0:this.path[r*3-1]+1;for(let a=0;a<e;a++)s+=n.child(a).nodeSize;return s}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return jr.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),s=e.maybeChild(r);if(!n){let l=n;n=s,s=l}let a=n.marks;for(var i=0;i<a.length;i++)a[i].type.spec.inclusive===!1&&(!s||!a[i].isInSet(s.marks))&&(a=a[i--].removeFromSet(a));return a}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,s=e.parent.maybeChild(e.index());for(var a=0;a<n.length;a++)n[a].type.spec.inclusive===!1&&(!s||!n[a].isInSet(s.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new Lb(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],s=0,a=r;for(let i=e;;){let{index:l,offset:c}=i.content.findIndex(a),d=a-c;if(n.push(i,l,s+c),!d||(i=i.child(l),i.isText))break;a=d-1,s+=c+1}return new Yg(r,n,a)}static resolveCached(e,r){let n=IR.get(e);if(n)for(let a=0;a<n.elts.length;a++){let i=n.elts[a];if(i.pos==r)return i}else IR.set(e,n=new qbe);let s=n.elts[n.i]=Yg.resolve(e,r);return n.i=(n.i+1)%Gbe,s}}class qbe{constructor(){this.elts=[],this.i=0}}const Gbe=12,IR=new WeakMap;class Lb{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Kbe=Object.create(null);let Wl=class _j{constructor(e,r,n,s=jr.none){this.type=e,this.attrs=r,this.marks=s,this.content=n||Ne.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,s=0){this.content.nodesBetween(e,r,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,s){return this.content.textBetween(e,r,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&Pb(this.attrs,r||e.defaultAttrs||Kbe)&&jr.sameSet(this.marks,n||jr.none)}copy(e=null){return e==this.content?this:new _j(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new _j(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return $e.empty;let s=this.resolve(e),a=this.resolve(r),i=n?0:s.sharedDepth(r),l=s.start(i),d=s.node(i).content.cut(s.pos-l,a.pos-l);return new $e(d,s.depth-i,a.depth-i)}replace(e,r,n){return Hbe(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:s}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(s==e||r.isText)return r;e-=s+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let s=this.content.child(r-1);return{node:s,index:r-1,offset:n-s.nodeSize}}resolve(e){return Yg.resolveCached(this,e)}resolveNoCache(e){return Yg.resolve(this,e)}rangeHasMark(e,r,n){let s=!1;return r>e&&this.nodesBetween(e,r,a=>(n.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Qz(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=Ne.empty,s=0,a=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,s,a),l=i&&i.matchFragment(this.content,r);if(!l||!l.validEnd)return!1;for(let c=s;c<a;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0}canReplaceWith(e,r,n,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(e).matchType(n),i=a&&a.matchFragment(this.content,r);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=jr.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!jr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let s=Ne.fromJSON(e,r.content),a=e.nodeType(r.type).create(r.attrs,s,n);return a.type.checkAttrs(a.attrs),a}};Wl.prototype.text=void 0;class $b extends Wl{constructor(e,r,n,s){if(super(e,r,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qz(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $b(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $b(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Qz(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class vh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new Zbe(e,r);if(n.next==null)return vh.empty;let s=eU(n);n.next&&n.err("Unexpected trailing text");let a=rwe(twe(s));return nwe(a,n),a}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let s=this;for(let a=r;s&&a<n;a++)s=s.matchType(e.child(a).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let s=[this];function a(i,l){let c=i.matchFragment(e,n);if(c&&(!r||c.validEnd))return Ne.from(l.map(d=>d.createAndFill()));for(let d=0;d<i.next.length;d++){let{type:u,next:h}=i.next[d];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(h)==-1){s.push(h);let f=a(h,l.concat(u));if(f)return f}}return null}return a(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),a=s.match;if(a.matchType(e)){let i=[];for(let l=s;l.type;l=l.via)i.push(l.type);return i.reverse()}for(let i=0;i<a.next.length;i++){let{type:l,next:c}=a.next[i];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in r)&&(!s.type||c.validEnd)&&(n.push({match:l.contentMatch,type:l,via:s}),r[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&r(n.next[s].next)}return r(this),e.map((n,s)=>{let a=s+(n.validEnd?"*":" ")+" ";for(let i=0;i<n.next.length;i++)a+=(i?", ":"")+n.next[i].type.name+"->"+e.indexOf(n.next[i].next);return a}).join(`
`)}}vh.empty=new vh(!0);class Zbe{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function eU(t){let e=[];do e.push(Ybe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ybe(t){let e=[];do e.push(Xbe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Xbe(t){let e=ewe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Jbe(t,e);else break;return e}function DR(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Jbe(t,e){let r=DR(t),n=r;return t.eat(",")&&(t.next!="}"?n=DR(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function Qbe(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let s=[];for(let a in r){let i=r[a];i.isInGroup(e)&&s.push(i)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function ewe(t){if(t.eat("(")){let e=eU(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Qbe(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function twe(t){let e=[[]];return s(a(t,0),r()),e;function r(){return e.push([])-1}function n(i,l,c){let d={term:c,to:l};return e[i].push(d),d}function s(i,l){i.forEach(c=>c.to=l)}function a(i,l){if(i.type=="choice")return i.exprs.reduce((c,d)=>c.concat(a(d,l)),[]);if(i.type=="seq")for(let c=0;;c++){let d=a(i.exprs[c],l);if(c==i.exprs.length-1)return d;s(d,l=r())}else if(i.type=="star"){let c=r();return n(l,c),s(a(i.expr,c),c),[n(c)]}else if(i.type=="plus"){let c=r();return s(a(i.expr,l),c),s(a(i.expr,c),c),[n(c)]}else{if(i.type=="opt")return[n(l)].concat(a(i.expr,l));if(i.type=="range"){let c=l;for(let d=0;d<i.min;d++){let u=r();s(a(i.expr,c),u),c=u}if(i.max==-1)s(a(i.expr,c),c);else for(let d=i.min;d<i.max;d++){let u=r();n(c,u),s(a(i.expr,c),u),c=u}return[n(c)]}else{if(i.type=="name")return[n(l,void 0,i.value)];throw new Error("Unknown expr type")}}}}function tU(t,e){return e-t}function LR(t,e){let r=[];return n(e),r.sort(tU);function n(s){let a=t[s];if(a.length==1&&!a[0].term)return n(a[0].to);r.push(s);for(let i=0;i<a.length;i++){let{term:l,to:c}=a[i];!l&&r.indexOf(c)==-1&&n(c)}}}function rwe(t){let e=Object.create(null);return r(LR(t,0));function r(n){let s=[];n.forEach(i=>{t[i].forEach(({term:l,to:c})=>{if(!l)return;let d;for(let u=0;u<s.length;u++)s[u][0]==l&&(d=s[u][1]);LR(t,c).forEach(u=>{d||s.push([l,d=[]]),d.indexOf(u)==-1&&d.push(u)})})});let a=e[n.join(",")]=new vh(n.indexOf(t.length-1)>-1);for(let i=0;i<s.length;i++){let l=s[i][1].sort(tU);a.next.push({type:s[i][0],next:e[l.join(",")]||r(l)})}return a}}function nwe(t,e){for(let r=0,n=[t];r<n.length;r++){let s=n[r],a=!s.validEnd,i=[];for(let l=0;l<s.next.length;l++){let{type:c,next:d}=s.next[l];i.push(c.name),a&&!(c.isText||c.hasRequiredAttrs())&&(a=!1),n.indexOf(d)==-1&&n.push(d)}a&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rU(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function nU(t,e){let r=Object.create(null);for(let n in t){let s=e&&e[n];if(s===void 0){let a=t[n];if(a.hasDefault)s=a.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=s}return r}function sU(t,e,r,n){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${r} of type ${s}`);for(let s in t){let a=t[s];a.validate&&a.validate(e[s])}}function aU(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new awe(t,n,e[n]);return r}let $R=class iU{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=aU(e,n.attrs),this.defaultAttrs=rU(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:nU(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wl(this,this.computeAttrs(e),Ne.from(r),jr.setFrom(n))}createChecked(e=null,r,n){return r=Ne.from(r),this.checkContent(r),new Wl(this,this.computeAttrs(e),r,jr.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=Ne.from(r),r.size){let i=this.contentMatch.fillBefore(r);if(!i)return null;r=i.append(r)}let s=this.contentMatch.matchFragment(r),a=s&&s.fillBefore(Ne.empty,!0);return a?new Wl(this,e,r.append(a),jr.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){sU(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:jr.none:e}static compile(e,r){let n=Object.create(null);e.forEach((a,i)=>n[a]=new iU(a,r,i));let s=r.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function swe(t,e,r){let n=r.split("|");return s=>{let a=s===null?"null":typeof s;if(n.indexOf(a)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${a}`)}}class awe{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?swe(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Zk{constructor(e,r,n,s){this.name=e,this.rank=r,this.schema=n,this.spec=s,this.attrs=aU(e,s.attrs),this.excluded=null;let a=rU(this.attrs);this.instance=a?new jr(this,a):null}create(e=null){return!e&&this.instance?this.instance:new jr(this,nU(this.attrs,e))}static compile(e,r){let n=Object.create(null),s=0;return e.forEach((a,i)=>n[a]=new Zk(a,s++,r,i)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){sU(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let oU=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let s in e)r[s]=e[s];r.nodes=ts.from(e.nodes),r.marks=ts.from(e.marks||{}),this.nodes=$R.compile(this.spec.nodes,this),this.marks=Zk.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let a=this.nodes[s],i=a.spec.content||"",l=a.spec.marks;if(a.contentMatch=n[i]||(n[i]=vh.parse(i,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=l=="_"?null:l?FR(this,l.split(" ")):l==""||!a.inlineContent?[]:null}for(let s in this.marks){let a=this.marks[s],i=a.spec.excludes;a.excluded=i==null?[a]:i==""?[]:FR(this,i.split(" "))}this.nodeFromJSON=s=>Wl.fromJSON(this,s),this.markFromJSON=s=>jr.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $R){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,s)}text(e,r){let n=this.nodes.text;return new $b(n,n.defaultAttrs,e,jr.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}};function FR(t,e){let r=[];for(let n=0;n<e.length;n++){let s=e[n],a=t.marks[s],i=a;if(a)r.push(a);else for(let l in t.marks){let c=t.marks[l];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&r.push(i=c)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function iwe(t){return t.tag!=null}function owe(t){return t.style!=null}let Wo=class Aj{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(s=>{if(iwe(s))this.tags.push(s);else if(owe(s)){let a=/[^=]*/.exec(s.style)[0];n.indexOf(a)<0&&n.push(a),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let a=e.nodes[s.node];return a.contentMatch.matchType(a)})}parse(e,r={}){let n=new zR(this,r,!1);return n.addAll(e,jr.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new zR(this,r,!0);return n.addAll(e,jr.none,r.from,r.to),$e.maxOpen(n.finish())}matchTag(e,r,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(dwe(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||r.matchesContext(a.context))){if(a.getAttrs){let i=a.getAttrs(e);if(i===!1)continue;a.attrs=i||void 0}return a}}}matchStyle(e,r,n,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let i=this.styles[a],l=i.style;if(!(l.indexOf(e)!=0||i.context&&!n.matchesContext(i.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=r))){if(i.getAttrs){let c=i.getAttrs(r);if(c===!1)continue;i.attrs=c||void 0}return i}}}static schemaRules(e){let r=[];function n(s){let a=s.priority==null?50:s.priority,i=0;for(;i<r.length;i++){let l=r[i];if((l.priority==null?50:l.priority)<a)break}r.splice(i,0,s)}for(let s in e.marks){let a=e.marks[s].spec.parseDOM;a&&a.forEach(i=>{n(i=UR(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in e.nodes){let a=e.nodes[s].spec.parseDOM;a&&a.forEach(i=>{n(i=UR(i)),i.node||i.ignore||i.mark||(i.node=s)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Aj(e,Aj.schemaRules(e)))}};const lU={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},lwe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cU={ol:!0,ul:!0},Xg=1,Mj=2,rg=4;function BR(t,e,r){return e!=null?(e?Xg:0)|(e==="full"?Mj:0):t&&t.whitespace=="pre"?Xg|Mj:r&~rg}class u1{constructor(e,r,n,s,a,i){this.type=e,this.attrs=r,this.marks=n,this.solid=s,this.options=i,this.content=[],this.activeMarks=jr.none,this.match=a||(i&rg?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(Ne.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Xg)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let r=Ne.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Ne.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!lU.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class zR{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=r.topNode,a,i=BR(null,r.preserveWhitespace,0)|(n?rg:0);s?a=new u1(s.type,s.attrs,jr.none,!0,r.topMatch||s.type.contentMatch,i):n?a=new u1(null,null,jr.none,!0,null,i):a=new u1(e.schema.topNodeType,null,jr.none,!0,null,i),this.nodes=[a],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,s=this.top,a=s.options&Mj?"full":this.localPreserveWS||(s.options&Xg)>0;if(a==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(a)a!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=s.content[s.content.length-1],l=e.previousSibling;(!i||l&&l.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let s=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),l;cU.hasOwnProperty(i)&&this.parser.normalizeLists&&cwe(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,n));e:if(c?c.ignore:lwe.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,r);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,u=this.needsBlock;if(lU.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),d=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let h=c&&c.skip?r:this.readStyles(e,r);h&&this.addAll(e,h),d&&this.sync(a),this.needsBlock=u}else{let d=this.readStyles(e,r);d&&this.addElementByRule(e,c,d,c.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let a=this.parser.matchedStyles[s],i=n.getPropertyValue(a);if(i)for(let l=void 0;;){let c=this.parser.matchStyle(a,i,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?r=r.filter(d=>!c.clearMark(d)):r=r.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return r}addElementByRule(e,r,n,s){let a,i;if(r.node)if(i=this.parser.schema.nodes[r.node],i.isLeaf)this.insertNode(i.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let c=this.enter(i,r.attrs||null,n,r.preserveWhitespace);c&&(a=!0,n=c)}else{let c=this.parser.schema.marks[r.mark];n=n.concat(c.create(r.attrs))}let l=this.top;if(i&&i.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,n,!1));else{let c=e;typeof r.contentElement=="string"?c=e.querySelector(r.contentElement):typeof r.contentElement=="function"?c=r.contentElement(e):r.contentElement&&(c=r.contentElement),this.findAround(e,c,!0),this.addAll(c,n),this.findAround(e,c,!1)}a&&this.sync(l)&&this.open--}addAll(e,r,n,s){let a=n||0;for(let i=n?e.childNodes[n]:e.firstChild,l=s==null?null:e.childNodes[s];i!=l;i=i.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(i,r);this.findAtPoint(e,a)}findPlace(e,r,n){let s,a;for(let i=this.open,l=0;i>=0;i--){let c=this.nodes[i],d=c.findWrapping(e);if(d&&(!s||s.length>d.length+l)&&(s=d,a=c,!d.length))break;if(c.solid){if(n)break;l+=2}}if(!s)return null;this.sync(a);for(let i=0;i<s.length;i++)r=this.enterInner(s[i],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(r=this.enterInner(a,null,r))}let s=this.findPlace(e,r,n);if(s){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let i=jr.none;for(let l of s.concat(e.marks))(a.type?a.type.allowsMarkType(l.type):VR(l.type,e.type))&&(i=l.addToSet(i));return a.content.push(e.mark(i)),!0}return!1}enter(e,r,n,s){let a=this.findPlace(e.create(r),n,!1);return a&&(a=this.enterInner(e,r,n,!0,s)),a}enterInner(e,r,n,s=!1,a){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let l=BR(e,a,i.options);i.options&rg&&i.content.length==0&&(l|=rg);let c=jr.none;return n=n.filter(d=>(i.type?i.type.allowsMarkType(d.type):VR(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new u1(e,r,c,s,null,l)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Xg)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&r.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),a=-(n?n.depth+1:0)+(s?0:1),i=(l,c)=>{for(;l>=0;l--){let d=r[l];if(d==""){if(l==r.length-1||l==0)continue;for(;c>=a;c--)if(i(l-1,c))return!0;return!1}else{let u=c>0||c==0&&s?this.nodes[c].type:n&&c>=a?n.node(c-a).type:null;if(!u||u.name!=d&&!u.isInGroup(d))return!1;c--}}return!0};return i(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function cwe(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&cU.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function dwe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function UR(t){let e={};for(let r in t)e[r]=t[r];return e}function VR(t,e){let r=e.schema.nodes;for(let n in r){let s=r[n];if(!s.allowsMarkType(t))continue;let a=[],i=l=>{a.push(l);for(let c=0;c<l.edgeCount;c++){let{type:d,next:u}=l.edge(c);if(d==e||a.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}class fc{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=gN(r).createDocumentFragment());let s=n,a=[];return e.forEach(i=>{if(a.length||i.marks.length){let l=0,c=0;for(;l<a.length&&c<i.marks.length;){let d=i.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(a[l][0])||d.type.spec.spanning===!1)break;l++,c++}for(;l<a.length;)s=a.pop()[1];for(;c<i.marks.length;){let d=i.marks[c++],u=this.serializeMark(d,i.isInline,r);u&&(a.push([d,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:s}=cv(gN(r),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,s)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let s=e.marks.length-1;s>=0;s--){let a=this.serializeMark(e.marks[s],e.isInline,r);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(e,r,n={}){let s=this.marks[e.type.name];return s&&cv(gN(n),s(e,r),null,e.attrs)}static renderSpec(e,r,n=null,s){return cv(e,r,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=HR(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return HR(e.marks)}}function HR(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function gN(t){return t.document||window.document}const WR=new WeakMap;function uwe(t){let e=WR.get(t);return e===void 0&&WR.set(t,e=hwe(t)),e}function hwe(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)r(n[s]);else for(let s in n)r(n[s])}return r(t),e}function cv(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],a;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(a=uwe(n))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(r=s.slice(0,i),s=s.slice(i+1));let l,c=r?t.createElementNS(r,s):t.createElement(s),d=e[1],u=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){u=2;for(let h in d)if(d[h]!=null){let f=h.indexOf(" ");f>0?c.setAttributeNS(h.slice(0,f),h.slice(f+1),d[h]):h=="style"&&c.style?c.style.cssText=d[h]:c.setAttribute(h,d[h])}}for(let h=u;h<e.length;h++){let f=e[h];if(f===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:p}=cv(t,f,r,n);if(c.appendChild(m),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:c,contentDOM:l}}const dU=65535,uU=Math.pow(2,16);function fwe(t,e){return t+e*uU}function qR(t){return t&dU}function mwe(t){return(t-(t&dU))/uU}const hU=1,fU=2,dv=4,mU=8;class Oj{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&mU)>0}get deletedBefore(){return(this.delInfo&(hU|dv))>0}get deletedAfter(){return(this.delInfo&(fU|dv))>0}get deletedAcross(){return(this.delInfo&dv)>0}}class Da{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&Da.empty)return Da.empty}recover(e){let r=0,n=qR(e);if(!this.inverted)for(let s=0;s<n;s++)r+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+r+mwe(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let s=0,a=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?s:0);if(c>e)break;let d=this.ranges[l+a],u=this.ranges[l+i],h=c+d;if(e<=h){let f=d?e==c?-1:e==h?1:r:r,m=c+s+(f<0?0:u);if(n)return m;let p=e==(r<0?c:h)?null:fwe(l/3,e-c),g=e==c?fU:e==h?hU:dv;return(r<0?e!=c:e!=h)&&(g|=mU),new Oj(m,g,p)}s+=u-d}return n?e+s:new Oj(e+s,0,null)}touches(e,r){let n=0,s=qR(r),a=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?n:0);if(c>e)break;let d=this.ranges[l+a],u=c+d;if(e<=u&&l==s*3)return!0;n+=this.ranges[l+i]-d}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let i=this.ranges[s],l=i-(this.inverted?a:0),c=i+(this.inverted?0:a),d=this.ranges[s+r],u=this.ranges[s+n];e(l,l+d,c,c+u),a+=u-d}}invert(){return new Da(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Da.empty:new Da(e<0?[0,-e,0]:[0,0,e])}}Da.empty=new Da([]);class Gm{constructor(e,r,n=0,s=e?e.length:0){this.mirror=r,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Gm(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let s=e.getMirror(r);this.appendMap(e._maps[r],s!=null&&s<r?n+s:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let s=e.getMirror(r);this.appendMap(e._maps[r].invert(),s!=null&&s>r?n-s-1:void 0)}}invert(){let e=new Gm;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let s=0;for(let a=this.from;a<this.to;a++){let i=this._maps[a],l=i.mapResult(e,r);if(l.recover!=null){let c=this.getMirror(a);if(c!=null&&c>a&&c<this.to){a=c,e=this._maps[c].recover(l.recover);continue}}s|=l.delInfo,e=l.pos}return n?e:new Oj(e,s,null)}}const xN=Object.create(null);class Is{getMap(){return Da.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=xN[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in xN)throw new RangeError("Duplicate use of step JSON ID "+e);return xN[e]=r,r.prototype.jsonID=e,r}}class Nn{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Nn(e,null)}static fail(e){return new Nn(null,e)}static fromReplace(e,r,n,s){try{return Nn.ok(e.replace(r,n,s))}catch(a){if(a instanceof Ib)return Nn.fail(a.message);throw a}}}function JT(t,e,r){let n=[];for(let s=0;s<t.childCount;s++){let a=t.child(s);a.content.size&&(a=a.copy(JT(a.content,e,a))),a.isInline&&(a=e(a,r,s)),n.push(a)}return Ne.fromArray(n)}class ld extends Is{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),a=new $e(JT(r.content,(i,l)=>!i.isAtom||!l.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),r.openStart,r.openEnd);return Nn.fromReplace(e,this.from,this.to,a)}invert(){return new Fo(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new ld(r.pos,n.pos,this.mark)}merge(e){return e instanceof ld&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ld(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ld(r.from,r.to,e.markFromJSON(r.mark))}}Is.jsonID("addMark",ld);class Fo extends Is{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new $e(JT(r.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),r.openStart,r.openEnd);return Nn.fromReplace(e,this.from,this.to,n)}invert(){return new ld(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new Fo(r.pos,n.pos,this.mark)}merge(e){return e instanceof Fo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Fo(r.from,r.to,e.markFromJSON(r.mark))}}Is.jsonID("removeMark",Fo);class cd extends Is{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nn.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new $e(Ne.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let s=0;s<r.marks.length;s++)if(!r.marks[s].isInSet(n))return new cd(this.pos,r.marks[s]);return new cd(this.pos,this.mark)}}return new bh(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new cd(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cd(r.pos,e.markFromJSON(r.mark))}}Is.jsonID("addNodeMark",cd);class bh extends Is{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nn.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Nn.fromReplace(e,this.pos,this.pos+1,new $e(Ne.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new cd(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new bh(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new bh(r.pos,e.markFromJSON(r.mark))}}Is.jsonID("removeNodeMark",bh);class wn extends Is{constructor(e,r,n,s=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=s}apply(e){return this.structure&&Rj(e,this.from,this.to)?Nn.fail("Structure replace would overwrite content"):Nn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Da([this.from,this.to-this.from,this.slice.size])}invert(e){return new wn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new wn(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof wn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?$e.empty:new $e(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new wn(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?$e.empty:new $e(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new wn(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new wn(r.from,r.to,$e.fromJSON(e,r.slice),!!r.structure)}}Is.jsonID("replace",wn);class mn extends Is{constructor(e,r,n,s,a,i,l=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=s,this.slice=a,this.insert=i,this.structure=l}apply(e){if(this.structure&&(Rj(e,this.from,this.gapFrom)||Rj(e,this.gapTo,this.to)))return Nn.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Nn.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Nn.fromReplace(e,this.from,this.to,n):Nn.fail("Content does not fit in gap")}getMap(){return new Da([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new mn(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||s<r.pos||a>n.pos?null:new mn(r.pos,n.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new mn(r.from,r.to,r.gapFrom,r.gapTo,$e.fromJSON(e,r.slice),r.insert,!!r.structure)}}Is.jsonID("replaceAround",mn);function Rj(t,e,r){let n=t.resolve(e),s=r-e,a=n.depth;for(;s>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,s--;if(s>0){let i=n.node(a).maybeChild(n.indexAfter(a));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function pwe(t,e,r,n){let s=[],a=[],i,l;t.doc.nodesBetween(e,r,(c,d,u)=>{if(!c.isInline)return;let h=c.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){let f=Math.max(d,e),m=Math.min(d+c.nodeSize,r),p=n.addToSet(h);for(let g=0;g<h.length;g++)h[g].isInSet(p)||(i&&i.to==f&&i.mark.eq(h[g])?i.to=m:s.push(i=new Fo(f,m,h[g])));l&&l.to==f?l.to=m:a.push(l=new ld(f,m,n))}}),s.forEach(c=>t.step(c)),a.forEach(c=>t.step(c))}function gwe(t,e,r,n){let s=[],a=0;t.doc.nodesBetween(e,r,(i,l)=>{if(!i.isInline)return;a++;let c=null;if(n instanceof Zk){let d=i.marks,u;for(;u=n.isInSet(d);)(c||(c=[])).push(u),d=u.removeFromSet(d)}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length){let d=Math.min(l+i.nodeSize,r);for(let u=0;u<c.length;u++){let h=c[u],f;for(let m=0;m<s.length;m++){let p=s[m];p.step==a-1&&h.eq(s[m].style)&&(f=p)}f?(f.to=d,f.step=a):s.push({style:h,from:Math.max(l,e),to:d,step:a})}}}),s.forEach(i=>t.step(new Fo(i.from,i.to,i.style)))}function QT(t,e,r,n=r.contentMatch,s=!0){let a=t.doc.nodeAt(e),i=[],l=e+1;for(let c=0;c<a.childCount;c++){let d=a.child(c),u=l+d.nodeSize,h=n.matchType(d.type);if(!h)i.push(new wn(l,u,$e.empty));else{n=h;for(let f=0;f<d.marks.length;f++)r.allowsMarkType(d.marks[f].type)||t.step(new Fo(l,u,d.marks[f]));if(s&&d.isText&&r.whitespace!="pre"){let f,m=/\r?\n|\r/g,p;for(;f=m.exec(d.text);)p||(p=new $e(Ne.from(r.schema.text(" ",r.allowedMarks(d.marks))),0,0)),i.push(new wn(l+f.index,l+f.index+f[0].length,p))}}l=u}if(!n.validEnd){let c=n.fillBefore(Ne.empty,!0);t.replace(l,l,new $e(c,0,0))}for(let c=i.length-1;c>=0;c--)t.step(i[c])}function xwe(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function Sp(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let s=t.$from.node(n),a=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&s.canReplace(a,i,r))return n;if(n==0||s.type.spec.isolating||!xwe(s,a,i))break}return null}function ywe(t,e,r){let{$from:n,$to:s,depth:a}=e,i=n.before(a+1),l=s.after(a+1),c=i,d=l,u=Ne.empty,h=0;for(let p=a,g=!1;p>r;p--)g||n.index(p)>0?(g=!0,u=Ne.from(n.node(p).copy(u)),h++):c--;let f=Ne.empty,m=0;for(let p=a,g=!1;p>r;p--)g||s.after(p+1)<s.end(p)?(g=!0,f=Ne.from(s.node(p).copy(f)),m++):d++;t.step(new mn(c,d,i,l,new $e(u.append(f),h,m),u.size-h,!0))}function pU(t,e,r=null,n=t){let s=vwe(t,e),a=s&&bwe(n,e);return a?s.map(GR).concat({type:e,attrs:r}).concat(a.map(GR)):null}function GR(t){return{type:t,attrs:null}}function vwe(t,e){let{parent:r,startIndex:n,endIndex:s}=t,a=r.contentMatchAt(n).findWrapping(e);if(!a)return null;let i=a.length?a[0]:e;return r.canReplaceWith(n,s,i)?a:null}function bwe(t,e){let{parent:r,startIndex:n,endIndex:s}=t,a=r.child(n),i=e.contentMatch.findWrapping(a.type);if(!i)return null;let c=(i.length?i[i.length-1]:e).contentMatch;for(let d=n;c&&d<s;d++)c=c.matchType(r.child(d).type);return!c||!c.validEnd?null:i}function wwe(t,e,r){let n=Ne.empty;for(let i=r.length-1;i>=0;i--){if(n.size){let l=r[i].type.contentMatch.matchFragment(n);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Ne.from(r[i].type.create(r[i].attrs,n))}let s=e.start,a=e.end;t.step(new mn(s,a,s,a,new $e(n,0,0),r.length,!0))}function kwe(t,e,r,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,r,(i,l)=>{let c=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(n,c)&&Cwe(t.doc,t.mapping.slice(a).map(l),n)){let d=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",p=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!p?d=!1:!m&&p&&(d=!0)}d===!1&&xU(t,i,l,a),QT(t,t.mapping.slice(a).map(l,1),n,void 0,d===null);let u=t.mapping.slice(a),h=u.map(l,1),f=u.map(l+i.nodeSize,1);return t.step(new mn(h,f,h+1,f-1,new $e(Ne.from(n.create(c,null,i.marks)),0,0),1,!0)),d===!0&&gU(t,i,l,a),!1}})}function gU(t,e,r,n){e.forEach((s,a)=>{if(s.isText){let i,l=/\r?\n|\r/g;for(;i=l.exec(s.text);){let c=t.mapping.slice(n).map(r+1+a+i.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function xU(t,e,r,n){e.forEach((s,a)=>{if(s.type==s.type.schema.linebreakReplacement){let i=t.mapping.slice(n).map(r+1+a);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function Cwe(t,e,r){let n=t.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,r)}function Nwe(t,e,r,n,s){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let i=r.create(n,null,s||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,i);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new mn(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new $e(Ne.from(i),0,0),1,!0))}function ql(t,e,r=1,n){let s=t.resolve(e),a=s.depth-r,i=n&&n[n.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let d=s.depth-1,u=r-2;d>a;d--,u--){let h=s.node(d),f=s.index(d);if(h.type.spec.isolating)return!1;let m=h.content.cutByIndex(f,h.childCount),p=n&&n[u+1];p&&(m=m.replaceChild(0,p.type.create(p.attrs)));let g=n&&n[u]||h;if(!h.canReplace(f+1,h.childCount)||!g.type.validContent(m))return!1}let l=s.indexAfter(a),c=n&&n[0];return s.node(a).canReplaceWith(l,l,c?c.type:s.node(a+1).type)}function Swe(t,e,r=1,n){let s=t.doc.resolve(e),a=Ne.empty,i=Ne.empty;for(let l=s.depth,c=s.depth-r,d=r-1;l>c;l--,d--){a=Ne.from(s.node(l).copy(a));let u=n&&n[d];i=Ne.from(u?u.type.create(u.attrs,i):s.node(l).copy(i))}t.step(new wn(e,e,new $e(a.append(i),r,r),!0))}function zh(t,e){let r=t.resolve(e),n=r.index();return yU(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Ewe(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let s=0;s<e.childCount;s++){let a=e.child(s),i=a.type==n?t.type.schema.nodes.text:a.type;if(r=r.matchType(i),!r||!t.type.allowsMarks(a.marks))return!1}return r.validEnd}function yU(t,e){return!!(t&&e&&!t.isLeaf&&Ewe(t,e))}function Yk(t,e,r=-1){let n=t.resolve(e);for(let s=n.depth;;s--){let a,i,l=n.index(s);if(s==n.depth?(a=n.nodeBefore,i=n.nodeAfter):r>0?(a=n.node(s+1),l++,i=n.node(s).maybeChild(l)):(a=n.node(s).maybeChild(l-1),i=n.node(s+1)),a&&!a.isTextblock&&yU(a,i)&&n.node(s).canReplace(l,l+1))return e;if(s==0)break;e=r<0?n.before(s):n.after(s)}}function jwe(t,e,r){let n=null,{linebreakReplacement:s}=t.doc.type.schema,a=t.doc.resolve(e-r),i=a.node().type;if(s&&i.inlineContent){let u=i.whitespace=="pre",h=!!i.contentMatch.matchType(s);u&&!h?n=!1:!u&&h&&(n=!0)}let l=t.steps.length;if(n===!1){let u=t.doc.resolve(e+r);xU(t,u.node(),u.before(),l)}i.inlineContent&&QT(t,e+r-1,i,a.node().contentMatchAt(a.index()),n==null);let c=t.mapping.slice(l),d=c.map(e-r);if(t.step(new wn(d,c.map(e+r,-1),$e.empty,!0)),n===!0){let u=t.doc.resolve(d);gU(t,u.node(),u.before(),t.steps.length)}return t}function Twe(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let a=n.index(s);if(n.node(s).canReplaceWith(a,a,r))return n.before(s+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,r))return n.after(s+1);if(a<n.node(s).childCount)return null}return null}function vU(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let s=r.content;for(let a=0;a<r.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(r.openStart==0&&r.size?2:1);a++)for(let i=n.depth;i>=0;i--){let l=i==n.depth?0:n.pos<=(n.start(i+1)+n.end(i+1))/2?-1:1,c=n.index(i)+(l>0?1:0),d=n.node(i),u=!1;if(a==1)u=d.canReplace(c,c,s);else{let h=d.contentMatchAt(c).findWrapping(s.firstChild.type);u=h&&d.canReplaceWith(c,c,h[0])}if(u)return l==0?n.pos:l<0?n.before(i+1):n.after(i+1)}return null}function Xk(t,e,r=e,n=$e.empty){if(e==r&&!n.size)return null;let s=t.resolve(e),a=t.resolve(r);return bU(s,a,n)?new wn(e,r,n):new _we(s,a,n).fit()}function bU(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class _we{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=Ne.empty;for(let s=0;s<=e.depth;s++){let a=e.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Ne.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let a=this.placed,i=n.depth,l=s.depth;for(;i&&l&&a.childCount==1;)a=a.firstChild.content,i--,l--;let c=new $e(a,i,l);return e>-1?new mn(n.pos,e,this.$to.pos,this.$to.end(),c,r):c.size||n.pos!=this.$to.pos?new wn(n.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let a=r.firstChild;if(r.childCount>1&&(s=0),a.type.spec.isolating&&s<=n){e=n;break}r=a.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let s,a=null;n?(a=yN(this.unplaced.content,n-1).firstChild,s=a.content):s=this.unplaced.content;let i=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:d}=this.frontier[l],u,h=null;if(r==1&&(i?d.matchType(i.type)||(h=d.fillBefore(Ne.from(i),!1)):a&&c.compatibleContent(a.type)))return{sliceDepth:n,frontierDepth:l,parent:a,inject:h};if(r==2&&i&&(u=d.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:l,parent:a,wrap:u};if(a&&d.matchType(a.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=yN(e,r);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new $e(e,r+1,Math.max(n,s.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=yN(e,r);if(s.childCount<=1&&r>0){let a=e.size-r<=r+s.size;this.unplaced=new $e(_0(e,r-1,1),r-1,a?r-1:n)}else this.unplaced=new $e(_0(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:s,wrap:a}){for(;this.depth>r;)this.closeFrontierNode();if(a)for(let g=0;g<a.length;g++)this.openFrontierNode(a[g]);let i=this.unplaced,l=n?n.content:i.content,c=i.openStart-e,d=0,u=[],{match:h,type:f}=this.frontier[r];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));h=h.matchFragment(s)}let m=l.size+e-(i.content.size-i.openEnd);for(;d<l.childCount;){let g=l.child(d),y=h.matchType(g.type);if(!y)break;d++,(d>1||c==0||g.content.size)&&(h=y,u.push(wU(g.mark(f.allowedMarks(g.marks)),d==1?c:0,d==l.childCount?m:-1)))}let p=d==l.childCount;p||(m=-1),this.placed=A0(this.placed,r,Ne.from(u)),this.frontier[r].match=h,p&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=l;g<m;g++){let b=y.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),y=b.content}this.unplaced=p?e==0?$e.empty:new $e(_0(i.content,e-1,1),e-1,m<0?i.openEnd:e-1):new $e(_0(i.content,e,d),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!vN(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:s}=this.frontier[r],a=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),i=vN(e,r,s,n,a);if(i){for(let l=r-1;l>=0;l--){let{match:c,type:d}=this.frontier[l],u=vN(e,l,d,c,!0);if(!u||u.childCount)continue e}return{depth:r,fit:i,move:a?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=A0(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let s=e.node(n),a=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,a)}return e}openFrontierNode(e,r=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=A0(this.placed,this.depth,Ne.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(Ne.empty,!0);r.childCount&&(this.placed=A0(this.placed,this.frontier.length,r))}}function _0(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(_0(t.firstChild.content,e-1,r)))}function A0(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(A0(t.lastChild.content,e-1,r)))}function yN(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function wU(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,wU(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(Ne.empty,!0)))),t.copy(n)}function vN(t,e,r,n,s){let a=t.node(e),i=s?t.indexAfter(e):t.index(e);if(i==a.childCount&&!r.compatibleContent(a.type))return null;let l=n.fillBefore(a.content,!0,i);return l&&!Awe(r,a.content,i)?l:null}function Awe(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function Mwe(t){return t.spec.defining||t.spec.definingForContent}function Owe(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let s=t.doc.resolve(e),a=t.doc.resolve(r);if(bU(s,a,n))return t.step(new wn(e,r,n));let i=CU(s,t.doc.resolve(r));i[i.length-1]==0&&i.pop();let l=-(s.depth+1);i.unshift(l);for(let f=s.depth,m=s.pos-1;f>0;f--,m--){let p=s.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;i.indexOf(f)>-1?l=f:s.before(f)==m&&i.splice(1,0,-f)}let c=i.indexOf(l),d=[],u=n.openStart;for(let f=n.content,m=0;;m++){let p=f.firstChild;if(d.push(p),m==n.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let m=d[f],p=Mwe(m.type);if(p&&!m.sameMarkup(s.node(Math.abs(l)-1)))u=f;else if(p||!m.type.isTextblock)break}for(let f=n.openStart;f>=0;f--){let m=(f+u+1)%(n.openStart+1),p=d[m];if(p)for(let g=0;g<i.length;g++){let y=i[(g+c)%i.length],b=!0;y<0&&(b=!1,y=-y);let v=s.node(y-1),w=s.index(y-1);if(v.canReplaceWith(w,w,p.type,p.marks))return t.replace(s.before(y),b?a.after(y):r,new $e(kU(n.content,0,n.openStart,m),m,n.openEnd))}}let h=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,r,n),!(t.steps.length>h));f--){let m=i[f];m<0||(e=s.before(m),r=a.after(m))}}function kU(t,e,r,n,s){if(e<r){let a=t.firstChild;t=t.replaceChild(0,a.copy(kU(a.content,e+1,r,n,a)))}if(e>n){let a=s.contentMatchAt(0),i=a.fillBefore(t).append(t);t=i.append(a.matchFragment(i).fillBefore(Ne.empty,!0))}return t}function Rwe(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let s=Twe(t.doc,e,n.type);s!=null&&(e=r=s)}t.replaceRange(e,r,new $e(Ne.from(n),0,0))}function Pwe(t,e,r){let n=t.doc.resolve(e),s=t.doc.resolve(r),a=CU(n,s);for(let i=0;i<a.length;i++){let l=a[i],c=i==a.length-1;if(c&&l==0||n.node(l).type.contentMatch.validEnd)return t.delete(n.start(l),s.end(l));if(l>0&&(c||n.node(l-1).canReplace(n.index(l-1),s.indexAfter(l-1))))return t.delete(n.before(l),s.after(l))}for(let i=1;i<=n.depth&&i<=s.depth;i++)if(e-n.start(i)==n.depth-i&&r>n.end(i)&&s.end(i)-r!=s.depth-i&&n.start(i-1)==s.start(i-1)&&n.node(i-1).canReplace(n.index(i-1),s.index(i-1)))return t.delete(n.before(i),r);t.delete(e,r)}function CU(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let s=n;s>=0;s--){let a=t.start(s);if(a<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(a==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==a-1)&&r.push(s)}return r}class sm extends Is{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Nn.fail("No node at attribute step's position");let n=Object.create(null);for(let a in r.attrs)n[a]=r.attrs[a];n[this.attr]=this.value;let s=r.type.create(n,null,r.marks);return Nn.fromReplace(e,this.pos,this.pos+1,new $e(Ne.from(s),0,r.isLeaf?0:1))}getMap(){return Da.empty}invert(e){return new sm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new sm(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new sm(r.pos,r.attr,r.value)}}Is.jsonID("attr",sm);class Jg extends Is{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let s in e.attrs)r[s]=e.attrs[s];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Nn.ok(n)}getMap(){return Da.empty}invert(e){return new Jg(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Jg(r.attr,r.value)}}Is.jsonID("docAttr",Jg);let Km=class extends Error{};Km=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Km.prototype=Object.create(Error.prototype);Km.prototype.constructor=Km;Km.prototype.name="TransformError";class e3{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Km(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=$e.empty){let s=Xk(this.doc,e,r,n);return s&&this.step(s),this}replaceWith(e,r,n){return this.replace(e,r,new $e(Ne.from(n),0,0))}delete(e,r){return this.replace(e,r,$e.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return Owe(this,e,r,n),this}replaceRangeWith(e,r,n){return Rwe(this,e,r,n),this}deleteRange(e,r){return Pwe(this,e,r),this}lift(e,r){return ywe(this,e,r),this}join(e,r=1){return jwe(this,e,r),this}wrap(e,r){return wwe(this,e,r),this}setBlockType(e,r=e,n,s=null){return kwe(this,e,r,n,s),this}setNodeMarkup(e,r,n=null,s){return Nwe(this,e,r,n,s),this}setNodeAttribute(e,r,n){return this.step(new sm(e,r,n)),this}setDocAttribute(e,r){return this.step(new Jg(e,r)),this}addNodeMark(e,r){return this.step(new cd(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof jr)r.isInSet(n.marks)&&this.step(new bh(e,r));else{let s=n.marks,a,i=[];for(;a=r.isInSet(s);)i.push(new bh(e,a)),s=a.removeFromSet(s);for(let l=i.length-1;l>=0;l--)this.step(i[l])}return this}split(e,r=1,n){return Swe(this,e,r,n),this}addMark(e,r,n){return pwe(this,e,r,n),this}removeMark(e,r,n){return gwe(this,e,r,n),this}clearIncompatible(e,r,n){return QT(this,e,r,n),this}}const bN=Object.create(null);class gt{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new NU(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=$e.empty){let n=r.content.lastChild,s=null;for(let l=0;l<r.openEnd;l++)s=n,n=n.lastChild;let a=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){let{$from:c,$to:d}=i[l],u=e.mapping.slice(a);e.replaceRange(u.map(c.pos),u.map(d.pos),l?$e.empty:r),l==0&&YR(e,a,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:i,$to:l}=s[a],c=e.mapping.slice(n),d=c.map(i.pos),u=c.map(l.pos);a?e.deleteRange(d,u):(e.replaceRangeWith(d,u,r),YR(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let s=e.parent.inlineContent?new Je(e):vf(e.node(0),e.parent,e.pos,e.index(),r,n);if(s)return s;for(let a=e.depth-1;a>=0;a--){let i=r<0?vf(e.node(0),e.node(a),e.before(a+1),e.index(a),r,n):vf(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,r,n);if(i)return i}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new ya(e.node(0))}static atStart(e){return vf(e,e,0,0,1)||new ya(e)}static atEnd(e){return vf(e,e,e.content.size,e.childCount,-1)||new ya(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=bN[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in bN)throw new RangeError("Duplicate use of selection JSON ID "+e);return bN[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Je.between(this.$anchor,this.$head).getBookmark()}}gt.prototype.visible=!0;class NU{constructor(e,r){this.$from=e,this.$to=r}}let KR=!1;function ZR(t){!KR&&!t.parent.inlineContent&&(KR=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Je extends gt{constructor(e,r=e){ZR(e),ZR(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return gt.near(n);let s=e.resolve(r.map(this.anchor));return new Je(s.parent.inlineContent?s:n,n)}replace(e,r=$e.empty){if(super.replace(e,r),r==$e.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Jk(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Je(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let s=e.resolve(r);return new this(s,n==r?s:e.resolve(n))}static between(e,r,n){let s=e.pos-r.pos;if((!n||s)&&(n=s>=0?1:-1),!r.parent.inlineContent){let a=gt.findFrom(r,n,!0)||gt.findFrom(r,-n,!0);if(a)r=a.$head;else return gt.near(r,n)}return e.parent.inlineContent||(s==0?e=r:(e=(gt.findFrom(e,-n,!0)||gt.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=s<0&&(e=r))),new Je(e,r)}}gt.jsonID("text",Je);class Jk{constructor(e,r){this.anchor=e,this.head=r}map(e){return new Jk(e.map(this.anchor),e.map(this.head))}resolve(e){return Je.between(e.resolve(this.anchor),e.resolve(this.head))}}class it extends gt{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:s}=r.mapResult(this.anchor),a=e.resolve(s);return n?gt.near(a):new it(a)}content(){return new $e(Ne.from(this.node),0,0)}eq(e){return e instanceof it&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new t3(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new it(e.resolve(r.anchor))}static create(e,r){return new it(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}it.prototype.visible=!1;gt.jsonID("node",it);class t3{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new Jk(n,n):new t3(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&it.isSelectable(n)?new it(r):gt.near(r)}}class ya extends gt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=$e.empty){if(r==$e.empty){e.delete(0,e.doc.content.size);let n=gt.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new ya(e)}map(e){return new ya(e)}eq(e){return e instanceof ya}getBookmark(){return Iwe}}gt.jsonID("all",ya);const Iwe={map(){return this},resolve(t){return new ya(t)}};function vf(t,e,r,n,s,a=!1){if(e.inlineContent)return Je.create(t,r);for(let i=n-(s>0?0:1);s>0?i<e.childCount:i>=0;i+=s){let l=e.child(i);if(l.isAtom){if(!a&&it.isSelectable(l))return it.create(t,r-(s<0?l.nodeSize:0))}else{let c=vf(t,l,r+s,s<0?l.childCount:0,s,a);if(c)return c}r+=l.nodeSize*s}return null}function YR(t,e,r){let n=t.steps.length-1;if(n<e)return;let s=t.steps[n];if(!(s instanceof wn||s instanceof mn))return;let a=t.mapping.maps[n],i;a.forEach((l,c,d,u)=>{i==null&&(i=u)}),t.setSelection(gt.near(t.doc.resolve(i),r))}const XR=1,h1=2,JR=4;let Dwe=class extends e3{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|XR)&~h1,this.storedMarks=null,this}get selectionSet(){return(this.updated&XR)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=h1,this}ensureMarks(e){return jr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&h1)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~h1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||jr.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let s=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),n=n??r,!e)return this.deleteRange(r,n);let a=this.storedMarks;if(!a){let i=this.doc.resolve(r);a=n==r?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,s.text(e,a)),this.selection.empty||this.setSelection(gt.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=JR,this}get scrolledIntoView(){return(this.updated&JR)>0}};function QR(t,e){return!e||!t?t:t.bind(e)}class M0{constructor(e,r,n){this.name=e,this.init=QR(r.init,n),this.apply=QR(r.apply,n)}}const Lwe=[new M0("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new M0("selection",{init(t,e){return t.selection||gt.atStart(e.doc)},apply(t){return t.selection}}),new M0("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new M0("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class wN{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Lwe.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new M0(n.key,n.spec.state,n))})}}class Mu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),s=null;for(;;){let a=!1;for(let i=0;i<this.config.plugins.length;i++){let l=this.config.plugins[i];if(l.spec.appendTransaction){let c=s?s[i].n:0,d=s?s[i].state:this,u=c<r.length&&l.spec.appendTransaction.call(l,c?r.slice(c):r,d,n);if(u&&n.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let h=0;h<this.config.plugins.length;h++)s.push(h<i?{state:n,n:r.length}:{state:this,n:0})}r.push(u),n=n.applyInner(u),a=!0}s&&(s[i]={state:n,n:r.length})}}if(!a)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new Mu(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let a=n[s];r[a.name]=a.apply(e,this[a.name],this,r)}return r}get tr(){return new Dwe(this)}static create(e){let r=new wN(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Mu(r);for(let s=0;s<r.fields.length;s++)n[r.fields[s].name]=r.fields[s].init(e,n);return n}reconfigure(e){let r=new wN(this.schema,e.plugins),n=r.fields,s=new Mu(r);for(let a=0;a<n.length;a++){let i=n[a].name;s[i]=this.hasOwnProperty(i)?this[i]:n[a].init(e,s)}return s}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],a=s.spec.state;a&&a.toJSON&&(r[n]=a.toJSON.call(s,this[s.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new wN(e.schema,e.plugins),a=new Mu(s);return s.fields.forEach(i=>{if(i.name=="doc")a.doc=Wl.fromJSON(e.schema,r.doc);else if(i.name=="selection")a.selection=gt.fromJSON(a.doc,r.selection);else if(i.name=="storedMarks")r.storedMarks&&(a.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let l in n){let c=n[l],d=c.spec.state;if(c.key==i.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(r,l)){a[i.name]=d.fromJSON.call(c,e,r[l],a);return}}a[i.name]=i.init(e,a)}}),a}}function SU(t,e,r){for(let n in t){let s=t[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=SU(s,e,{})),r[n]=s}return r}class Dt{constructor(e){this.spec=e,this.props={},e.props&&SU(e.props,this,this.props),this.key=e.key?e.key.key:EU("plugin")}getState(e){return e[this.key]}}const kN=Object.create(null);function EU(t){return t in kN?t+"$"+ ++kN[t]:(kN[t]=0,t+"$")}class Qt{constructor(e="key"){this.key=EU(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ns=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Zm=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Pj=null;const Nl=function(t,e,r){let n=Pj||(Pj=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},$we=function(){Pj=null},wh=function(t,e,r,n){return r&&(e8(t,e,r,n,-1)||e8(t,e,r,n,1))},Fwe=/^(img|br|input|textarea|hr)$/i;function e8(t,e,r,n,s){for(var a;;){if(t==r&&e==n)return!0;if(e==(s<0?0:gi(t))){let i=t.parentNode;if(!i||i.nodeType!=1||ty(t)||Fwe.test(t.nodeName)||t.contentEditable=="false")return!1;e=ns(t)+(s<0?0:1),t=i}else if(t.nodeType==1){let i=t.childNodes[e+(s<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((a=i.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=s;else return!1;else t=i,e=s<0?gi(t):0}else return!1}}function gi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Bwe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=gi(t)}else if(t.parentNode&&!ty(t))e=ns(t),t=t.parentNode;else return null}}function zwe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ty(t))e=ns(t)+1,t=t.parentNode;else return null}}function Uwe(t,e,r){for(let n=e==0,s=e==gi(t);n||s;){if(t==r)return!0;let a=ns(t);if(t=t.parentNode,!t)return!1;n=n&&a==0,s=s&&a==gi(t)}}function ty(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Qk=function(t){return t.focusNode&&wh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function bu(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function Vwe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Hwe(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(gi(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(gi(n.startContainer),n.startOffset)}}}const Zo=typeof navigator<"u"?navigator:null,t8=typeof document<"u"?document:null,tu=Zo&&Zo.userAgent||"",Ij=/Edge\/(\d+)/.exec(tu),jU=/MSIE \d/.exec(tu),Dj=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tu),va=!!(jU||Dj||Ij),Sd=jU?document.documentMode:Dj?+Dj[1]:Ij?+Ij[1]:0,Si=!va&&/gecko\/(\d+)/i.test(tu);Si&&+(/Firefox\/(\d+)/.exec(tu)||[0,0])[1];const Lj=!va&&/Chrome\/(\d+)/.exec(tu),js=!!Lj,TU=Lj?+Lj[1]:0,Ys=!va&&!!Zo&&/Apple Computer/.test(Zo.vendor),Ym=Ys&&(/Mobile\/\w+/.test(tu)||!!Zo&&Zo.maxTouchPoints>2),hi=Ym||(Zo?/Mac/.test(Zo.platform):!1),Wwe=Zo?/Win/.test(Zo.platform):!1,Il=/Android \d/.test(tu),ry=!!t8&&"webkitFontSmoothing"in t8.documentElement.style,qwe=ry?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Gwe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ml(t,e){return typeof t=="number"?t:t[e]}function Kwe(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function r8(t,e,r){let n=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let i=r||t.dom;i;){if(i.nodeType!=1){i=Zm(i);continue}let l=i,c=l==a.body,d=c?Gwe(a):Kwe(l),u=0,h=0;if(e.top<d.top+ml(n,"top")?h=-(d.top-e.top+ml(s,"top")):e.bottom>d.bottom-ml(n,"bottom")&&(h=e.bottom-e.top>d.bottom-d.top?e.top+ml(s,"top")-d.top:e.bottom-d.bottom+ml(s,"bottom")),e.left<d.left+ml(n,"left")?u=-(d.left-e.left+ml(s,"left")):e.right>d.right-ml(n,"right")&&(u=e.right-d.right+ml(s,"right")),u||h)if(c)a.defaultView.scrollBy(u,h);else{let m=l.scrollLeft,p=l.scrollTop;h&&(l.scrollTop+=h),u&&(l.scrollLeft+=u);let g=l.scrollLeft-m,y=l.scrollTop-p;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let f=c?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(f))break;i=f=="absolute"?i.offsetParent:Zm(i)}}function Zwe(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,s;for(let a=(e.left+e.right)/2,i=r+1;i<Math.min(innerHeight,e.bottom);i+=5){let l=t.root.elementFromPoint(a,i);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=r-20){n=l,s=c.top;break}}return{refDOM:n,refTop:s,stack:_U(t.dom)}}function _U(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Zm(n));return e}function Ywe({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;AU(r,n==0?0:n-e)}function AU(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:s,left:a}=t[r];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=a&&(n.scrollLeft=a)}}let lf=null;function Xwe(t){if(t.setActive)return t.setActive();if(lf)return t.focus(lf);let e=_U(t);t.focus(lf==null?{get preventScroll(){return lf={preventScroll:!0},!0}}:void 0),lf||(lf=!1,AU(e,0))}function MU(t,e){let r,n=2e8,s,a=0,i=e.top,l=e.top,c,d;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Nl(u).getClientRects();else continue;for(let m=0;m<f.length;m++){let p=f[m];if(p.top<=i&&p.bottom>=l){i=Math.max(p.bottom,i),l=Math.min(p.top,l);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<n){r=u,n=g,s=g&&r.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(a=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!c&&p.left<=e.left&&p.right>=e.left&&(c=u,d={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!r&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(a=h+1)}}return!r&&c&&(r=c,s=d,n=0),r&&r.nodeType==3?Jwe(r,s):!r||n&&r.nodeType==1?{node:t,offset:a}:MU(r,s)}function Jwe(t,e){let r=t.nodeValue.length,n=document.createRange();for(let s=0;s<r;s++){n.setEnd(t,s+1),n.setStart(t,s);let a=Ec(n,1);if(a.top!=a.bottom&&r3(e,a))return{node:t,offset:s+(e.left>=(a.left+a.right)/2?1:0)}}return{node:t,offset:0}}function r3(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Qwe(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function eke(t,e,r){let{node:n,offset:s}=MU(e,r),a=-1;if(n.nodeType==1&&!n.firstChild){let i=n.getBoundingClientRect();a=i.left!=i.right&&r.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(n,s,a)}function tke(t,e,r,n){let s=-1;for(let a=e,i=!1;a!=t.dom;){let l=t.docView.nearestDesc(a,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!i&&c.left>n.left||c.top>n.top?s=l.posBefore:(!i&&c.right<n.left||c.bottom<n.top)&&(s=l.posAfter),i=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?n.top<(c.top+c.bottom)/2:n.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;a=l.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,r,-1)}function OU(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),a=s;;){let i=t.childNodes[a];if(i.nodeType==1){let l=i.getClientRects();for(let c=0;c<l.length;c++){let d=l[c];if(r3(e,d))return OU(i,e,d)}}if((a=(a+1)%n)==s)break}return t}function rke(t,e){let r=t.dom.ownerDocument,n,s=0,a=Hwe(r,e.left,e.top);a&&({node:n,offset:s}=a);let i=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),l;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let d=t.dom.getBoundingClientRect();if(!r3(e,d)||(i=OU(t.dom,e,d),!i))return null}if(Ys)for(let d=i;n&&d;d=Zm(d))d.draggable&&(n=void 0);if(i=Qwe(i,e),n){if(Si&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let u=n.childNodes[s],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&s++}let d;ry&&s&&n.nodeType==1&&(d=n.childNodes[s-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&s--,n==t.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(l=tke(t,n,s,e))}l==null&&(l=eke(t,i,e));let c=t.docView.nearestDesc(i,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function n8(t){return t.top<t.bottom||t.left<t.right}function Ec(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(n8(n))return n}return Array.prototype.find.call(r,n8)||t.getBoundingClientRect()}const nke=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function RU(t,e,r){let{node:n,offset:s,atom:a}=t.docView.domFromPos(e,r<0?-1:1),i=ry||Si;if(n.nodeType==3)if(i&&(nke.test(n.nodeValue)||(r<0?!s:s==n.nodeValue.length))){let c=Ec(Nl(n,s,s),r);if(Si&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let d=Ec(Nl(n,s-1,s-1),-1);if(d.top==c.top){let u=Ec(Nl(n,s,s+1),-1);if(u.top!=c.top)return p0(u,u.left<d.left)}}return c}else{let c=s,d=s,u=r<0?1:-1;return r<0&&!s?(d++,u=-1):r>=0&&s==n.nodeValue.length?(c--,u=1):r<0?c--:d++,p0(Ec(Nl(n,c,d),u),u<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&s&&(r<0||s==gi(n))){let c=n.childNodes[s-1];if(c.nodeType==1)return CN(c.getBoundingClientRect(),!1)}if(a==null&&s<gi(n)){let c=n.childNodes[s];if(c.nodeType==1)return CN(c.getBoundingClientRect(),!0)}return CN(n.getBoundingClientRect(),r>=0)}if(a==null&&s&&(r<0||s==gi(n))){let c=n.childNodes[s-1],d=c.nodeType==3?Nl(c,gi(c)-(i?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return p0(Ec(d,1),!1)}if(a==null&&s<gi(n)){let c=n.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?Nl(c,0,i?0:1):c.nodeType==1?c:null:null;if(d)return p0(Ec(d,-1),!0)}return p0(Ec(n.nodeType==3?Nl(n):n,-r),r>=0)}function p0(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function CN(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function PU(t,e,r){let n=t.state,s=t.root.activeElement;n!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),s!=t.dom&&s&&s.focus()}}function ske(t,e,r){let n=e.selection,s=r=="up"?n.$from:n.$to;return PU(t,e,()=>{let{node:a}=t.docView.domFromPos(s.pos,r=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(a,!0);if(!l)break;if(l.node.isBlock){a=l.contentDOM||l.dom;break}a=l.dom.parentNode}let i=RU(t,s.pos,1);for(let l=a.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Nl(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let u=c[d];if(u.bottom>u.top+1&&(r=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const ake=/[\u0590-\u08ac]/;function ike(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,a=!s,i=s==n.parent.content.size,l=t.domSelection();return l?!ake.test(n.parent.textContent)||!l.modify?r=="left"||r=="backward"?a:i:PU(t,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",r,"character");let m=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:p,focusOffset:g}=t.domSelectionRange(),y=p&&!m.contains(p.nodeType==1?p:p.parentNode)||c==p&&d==g;try{l.collapse(u,h),c&&(c!=u||d!=h)&&l.extend&&l.extend(c,d)}catch{}return f!=null&&(l.caretBidiLevel=f),y}):n.pos==n.start()||n.pos==n.end()}let s8=null,a8=null,i8=!1;function oke(t,e,r){return s8==e&&a8==r?i8:(s8=e,a8=r,i8=r=="up"||r=="down"?ske(t,e,r):ike(t,e,r))}const Ei=0,o8=1,Ou=2,Yo=3;class ny{constructor(e,r,n,s){this.parent=e,this.children=r,this.dom=n,this.contentDOM=s,this.dirty=Ei,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let s=this.children[r];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let a,i;if(e==this.contentDOM)a=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((i=a.pmViewDesc)&&i.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(i)+i.size:this.posAtStart}else{let a,i;if(e==this.contentDOM)a=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((i=a.pmViewDesc)&&i.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(i):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=r>ns(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(s==null&&r==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,s=e;s;s=s.parentNode){let a=this.getDesc(s),i;if(a&&(!r||a.node))if(n&&(i=a.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))n=!1;else return a}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let s=e;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let s=this.children[r],a=n+s.size;if(n==e&&a!=n){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let l=s.children[i];if(l.size){s=l;break}}return s}if(e<a)return s.descAt(e-n-s.border);n=a}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let a=0;n<this.children.length;n++){let i=this.children[n],l=a+i.size;if(l>e||i instanceof DU){s=e-a;break}a=l}if(s)return this.children[n].domFromPos(s-this.children[n].border,r);for(let a;n&&!(a=this.children[n-1]).size&&a instanceof IU&&a.side>=0;n--);if(r<=0){let a,i=!0;for(;a=n?this.children[n-1]:null,!(!a||a.dom.parentNode==this.contentDOM);n--,i=!1);return a&&r&&i&&!a.border&&!a.domAtom?a.domFromPos(a.size,r):{node:this.contentDOM,offset:a?ns(a.dom)+1:0}}else{let a,i=!0;for(;a=n<this.children.length?this.children[n]:null,!(!a||a.dom.parentNode==this.contentDOM);n++,i=!1);return a&&i&&!a.border&&!a.domAtom?a.domFromPos(0,r):{node:this.contentDOM,offset:a?ns(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let i=n,l=0;;l++){let c=this.children[l],d=i+c.size;if(s==-1&&e<=d){let u=i+c.border;if(e>=u&&r<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,r,u);e=i;for(let h=l;h>0;h--){let f=this.children[h-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=ns(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(d>r||l==this.children.length-1)){r=d;for(let u=l+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){a=ns(h.dom);break}r+=h.size}a==-1&&(a=this.contentDOM.childNodes.length);break}i=d}return{node:this.contentDOM,from:e,to:r,fromOffset:s,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,s=!1){let a=Math.min(e,r),i=Math.max(e,r);for(let m=0,p=0;m<this.children.length;m++){let g=this.children[m],y=p+g.size;if(a>p&&i<y)return g.setSelection(e-p-g.border,r-p-g.border,n,s);p=y}let l=this.domFromPos(e,e?-1:1),c=r==e?l:this.domFromPos(r,r?-1:1),d=n.root.getSelection(),u=n.domSelectionRange(),h=!1;if((Si||Ys)&&e==r){let{node:m,offset:p}=l;if(m.nodeType==3){if(h=!!(p&&m.nodeValue[p-1]==`
`),h&&p==m.nodeValue.length)for(let g=m,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(l=c={node:y.parentNode,offset:ns(y)+1});break}let b=g.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let g=m.childNodes[p-1];h=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Si&&u.focusNode&&u.focusNode!=c.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(s=!0)}if(!(s||h&&Ys)&&wh(l.node,l.offset,u.anchorNode,u.anchorOffset)&&wh(c.node,c.offset,u.focusNode,u.focusOffset))return;let f=!1;if((d.extend||e==r)&&!(h&&Si)){d.collapse(l.node,l.offset);try{e!=r&&d.extend(c.node,c.offset),f=!0}catch{}}if(!f){if(e>r){let p=l;l=c,c=p}let m=document.createRange();m.setEnd(c.node,c.offset),m.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,s=0;s<this.children.length;s++){let a=this.children[s],i=n+a.size;if(n==i?e<=i&&r>=n:e<i&&r>n){let l=n+a.border,c=i-a.border;if(e>=l&&r<=c){this.dirty=e==n||r==i?Ou:o8,e==l&&r==c&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Yo:a.markDirty(e-l,r-l);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ou:Yo}n=i}this.dirty=Ou}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?Ou:o8;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class IU extends ny{constructor(e,r,n,s){let a,i=r.type.toDOM;if(typeof i=="function"&&(i=i(n,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!r.type.spec.raw){if(i.nodeType!=1){let l=document.createElement("span");l.appendChild(i),i=l}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=r,this.widget=r,a=this}matchesWidget(e){return this.dirty==Ei&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lke extends ny{constructor(e,r,n,s){super(e,[],r,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class kh extends ny{constructor(e,r,n,s,a){super(e,[],n,s),this.mark=r,this.spec=a}static create(e,r,n,s){let a=s.nodeViews[r.type.name],i=a&&a(r,s,n);return(!i||!i.dom)&&(i=fc.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new kh(e,r,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Yo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Yo&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=Ei){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=Ei}}slice(e,r,n){let s=kh.create(this.parent,this.mark,!0,n),a=this.children,i=this.size;r<i&&(a=Fj(a,r,i,n)),e>0&&(a=Fj(a,0,e,n));for(let l=0;l<a.length;l++)a[l].parent=s;return s.children=a,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ed extends ny{constructor(e,r,n,s,a,i,l,c,d){super(e,[],a,i),this.node=r,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=l}static create(e,r,n,s,a,i){let l=a.nodeViews[r.type.name],c,d=l&&l(r,a,()=>{if(!c)return i;if(c.parent)return c.parent.posBeforeChild(c)},n,s),u=d&&d.dom,h=d&&d.contentDOM;if(r.isText){if(!u)u=document.createTextNode(r.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=fc.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!h&&!r.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),r.type.spec.draggable&&(u.draggable=!0));let f=u;return u=FU(u,n,r),d?c=new cke(e,r,n,s,u,h||null,f,d,a,i+1):r.isText?new e2(e,r,n,s,u,f,a):new Ed(e,r,n,s,u,h||null,f,a,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ne.empty)}return e}matchesNode(e,r,n){return this.dirty==Ei&&e.eq(this.node)&&Fb(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,s=r,a=e.composing?this.localCompositionInfo(e,r):null,i=a&&a.pos>-1?a:null,l=a&&a.pos<0,c=new uke(this,i&&i.node,e);mke(this.node,this.innerDeco,(d,u,h)=>{d.spec.marks?c.syncToMarks(d.spec.marks,n,e):d.type.side>=0&&!h&&c.syncToMarks(u==this.node.childCount?jr.none:this.node.child(u).marks,n,e),c.placeWidget(d,e,s)},(d,u,h,f)=>{c.syncToMarks(d.marks,n,e);let m;c.findNodeMatch(d,u,h,f)||l&&e.state.selection.from>s&&e.state.selection.to<s+d.nodeSize&&(m=c.findIndexWithChild(a.node))>-1&&c.updateNodeAt(d,u,h,m,e)||c.updateNextNode(d,u,h,e,f,s)||c.addNode(d,u,h,e,s),s+=d.nodeSize}),c.syncToMarks([],n,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Ou)&&(i&&this.protectLocalComposition(e,i),LU(this.contentDOM,this.children,e),Ym&&pke(this.dom))}localCompositionInfo(e,r){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof Je)||n<r||s>r+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let i=a.nodeValue,l=gke(this.node.content,i,n-r,s-r);return l<0?null:{node:a,pos:l,text:i}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:s}){if(this.getDesc(r))return;let a=r;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let i=new lke(this,a,r,s);e.input.compositionNodes.push(i),this.children=Fj(this.children,n,n+s.length,e,i)}update(e,r,n,s){return this.dirty==Yo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,s),!0)}updateInner(e,r,n,s){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Ei}updateOuterDeco(e){if(Fb(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=$U(this.dom,this.nodeDOM,$j(this.outerDeco,this.node,r),$j(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function l8(t,e,r,n,s){FU(n,e,t);let a=new Ed(void 0,t,e,r,n,n,n,s,0);return a.contentDOM&&a.updateChildren(s,0),a}class e2 extends Ed{constructor(e,r,n,s,a,i,l){super(e,r,n,s,a,null,i,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,s){return this.dirty==Yo||this.dirty!=Ei&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=Ei||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Ei,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let s=this.node.cut(e,r),a=document.createTextNode(s.text);return new e2(this.parent,s,this.outerDeco,this.innerDeco,a,a,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=Yo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class DU extends ny{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ei&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cke extends Ed{constructor(e,r,n,s,a,i,l,c,d,u){super(e,r,n,s,a,i,l,d,u),this.spec=c}update(e,r,n,s){if(this.dirty==Yo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,r,n);return a&&this.updateInner(e,r,n,s),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,s){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function LU(t,e,r){let n=t.firstChild,s=!1;for(let a=0;a<e.length;a++){let i=e[a],l=i.dom;if(l.parentNode==t){for(;l!=n;)n=c8(n),s=!0;n=n.nextSibling}else s=!0,t.insertBefore(l,n);if(i instanceof kh){let c=n?n.previousSibling:t.lastChild;LU(i.contentDOM,i.children,r),n=c?c.nextSibling:t.firstChild}}for(;n;)n=c8(n),s=!0;s&&r.trackWrites==t&&(r.trackWrites=null)}const ng=function(t){t&&(this.nodeName=t)};ng.prototype=Object.create(null);const Ru=[new ng];function $j(t,e,r){if(t.length==0)return Ru;let n=r?Ru[0]:new ng,s=[n];for(let a=0;a<t.length;a++){let i=t[a].type.attrs;if(i){i.nodeName&&s.push(n=new ng(i.nodeName));for(let l in i){let c=i[l];c!=null&&(r&&s.length==1&&s.push(n=new ng(e.isInline?"span":"div")),l=="class"?n.class=(n.class?n.class+" ":"")+c:l=="style"?n.style=(n.style?n.style+";":"")+c:l!="nodeName"&&(n[l]=c))}}}return s}function $U(t,e,r,n){if(r==Ru&&n==Ru)return e;let s=e;for(let a=0;a<n.length;a++){let i=n[a],l=r[a];if(a){let c;l&&l.nodeName==i.nodeName&&s!=t&&(c=s.parentNode)&&c.nodeName.toLowerCase()==i.nodeName||(c=document.createElement(i.nodeName),c.pmIsDeco=!0,c.appendChild(s),l=Ru[0]),s=c}dke(s,l||Ru[0],i)}return s}function dke(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=r.class?r.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)s.indexOf(n[a])==-1&&t.classList.remove(n[a]);for(let a=0;a<s.length;a++)n.indexOf(s[a])==-1&&t.classList.add(s[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)t.style.removeProperty(s[1])}r.style&&(t.style.cssText+=r.style)}}function FU(t,e,r){return $U(t,t,Ru,$j(e,r,t.nodeType!=1))}function Fb(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function c8(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class uke{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hke(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n){let s=0,a=this.stack.length>>1,i=Math.min(a,e.length);for(;s<i&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=Ei,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let d=this.top.children[c];if(d.matchesMark(e[a])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=kh.create(this.top,e[a],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,a++}}findNodeMatch(e,r,n,s){let a=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(e,r,n))a=this.top.children.indexOf(i,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let d=this.top.children[l];if(d.matchesNode(e,r,n)&&!this.preMatch.matched.has(d)){a=l;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,r,n,s,a){let i=this.top.children[s];return i.dirty==Yo&&i.dom==i.contentDOM&&(i.dirty=Ou),i.update(e,r,n,a)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=r}}updateNextNode(e,r,n,s,a,i){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Ed){let d=this.preMatch.matched.get(c);if(d!=null&&d!=a)return!1;let u=c.dom,h,f=this.isLocked(u)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Yo&&Fb(r,c.outerDeco));if(!f&&c.update(e,r,n,s))return this.destroyBetween(this.index,l),c.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(h=this.recreateWrapper(c,e,r,n,s,i)))return this.destroyBetween(this.index,l),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ou,h.updateChildren(s,i+1),h.dirty=Ei),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,s,a,i){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!Fb(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let l=Ed.create(this.top,r,n,s,a,i);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,r,n,s,a){let i=Ed.create(this.top,e,r,n,s,a);i.contentDOM&&i.updateChildren(s,a+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,r,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let a=new IU(this.top,e,r,n);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof kh;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof e2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ys||js)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new DU(this.top,[],n,null);r!=this.top?r.children.push(s):r.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hke(t,e){let r=e,n=r.children.length,s=t.childCount,a=new Map,i=[];e:for(;s>0;){let l;for(;;)if(n){let d=r.children[n-1];if(d instanceof kh)r=d,n=d.children.length;else{l=d,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let c=l.node;if(c){if(c!=t.child(s-1))break;--s,a.set(l,s),i.push(l)}}return{index:s,matched:a,matches:i.reverse()}}function fke(t,e){return t.type.side-e.type.side}function mke(t,e,r,n){let s=e.locals(t),a=0;if(s.length==0){for(let d=0;d<t.childCount;d++){let u=t.child(d);n(u,s,e.forChild(a,u),d),a+=u.nodeSize}return}let i=0,l=[],c=null;for(let d=0;;){let u,h;for(;i<s.length&&s[i].to==a;){let y=s[i++];y.widget&&(u?(h||(h=[u])).push(y):u=y)}if(u)if(h){h.sort(fke);for(let y=0;y<h.length;y++)r(h[y],d,!!c)}else r(u,d,!!c);let f,m;if(c)m=-1,f=c,c=null;else if(d<t.childCount)m=d,f=t.child(d++);else break;for(let y=0;y<l.length;y++)l[y].to<=a&&l.splice(y--,1);for(;i<s.length&&s[i].from<=a&&s[i].to>a;)l.push(s[i++]);let p=a+f.nodeSize;if(f.isText){let y=p;i<s.length&&s[i].from<y&&(y=s[i].from);for(let b=0;b<l.length;b++)l[b].to<y&&(y=l[b].to);y<p&&(c=f.cut(y-a),f=f.cut(0,y-a),p=y,m=-1)}else for(;i<s.length&&s[i].to<p;)i++;let g=f.isInline&&!f.isLeaf?l.filter(y=>!y.inline):l.slice();n(f,g,e.forChild(a,f),m),a=p}}function pke(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function gke(t,e,r,n){for(let s=0,a=0;s<t.childCount&&a<=n;){let i=t.child(s++),l=a;if(a+=i.nodeSize,!i.isText)continue;let c=i.text;for(;s<t.childCount;){let d=t.child(s++);if(a+=d.nodeSize,!d.isText)break;c+=d.text}if(a>=r){if(a>=n&&c.slice(n-e.length-l,n-l)==e)return n-e.length;let d=l<n?c.lastIndexOf(e,n-l-1):-1;if(d>=0&&d+e.length+l>=r)return l+d;if(r==n&&c.length>=n+e.length-l&&c.slice(n-l,n-l+e.length)==e)return n}}return-1}function Fj(t,e,r,n,s){let a=[];for(let i=0,l=0;i<t.length;i++){let c=t[i],d=l,u=l+=c.size;d>=r||u<=e?a.push(c):(d<e&&a.push(c.slice(0,e-d,n)),s&&(a.push(s),s=void 0),u>r&&a.push(c.slice(r-d,c.size,n)))}return a}function n3(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let s=t.docView.nearestDesc(r.focusNode),a=s&&s.size==0,i=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(i<0)return null;let l=n.resolve(i),c,d;if(Qk(r)){for(c=i;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&it.isSelectable(h)&&s.parent&&!(h.isInline&&Uwe(r.focusNode,r.focusOffset,s.dom))){let f=s.posBefore;d=new it(i==f?l:n.resolve(f))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let h=i,f=i;for(let m=0;m<r.rangeCount;m++){let p=r.getRangeAt(m);h=Math.min(h,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[c,i]=f==t.state.selection.anchor?[f,h]:[h,f],l=n.resolve(i)}else c=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(c<0)return null}let u=n.resolve(c);if(!d){let h=e=="pointer"||t.state.selection.head<l.pos&&!a?1:-1;d=s3(t,u,l,h)}return d}function BU(t){return t.editable?t.hasFocus():UU(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gl(t,e=!1){let r=t.state.selection;if(zU(t,r),!!BU(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&js){let n=t.domSelectionRange(),s=t.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&wh(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yke(t);else{let{anchor:n,head:s}=r,a,i;d8&&!(r instanceof Je)&&(r.$from.parent.inlineContent||(a=u8(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(i=u8(t,r.to))),t.docView.setSelection(n,s,t,e),d8&&(a&&h8(a),i&&h8(i)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&xke(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const d8=Ys||js&&TU<63;function u8(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),s=n<r.childNodes.length?r.childNodes[n]:null,a=n?r.childNodes[n-1]:null;if(Ys&&s&&s.contentEditable=="false")return NN(s);if((!s||s.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(s)return NN(s);if(a)return NN(a)}}function NN(t){return t.contentEditable="true",Ys&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function h8(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function xke(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,s=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!BU(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yke(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,ns(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&va&&Sd<=11&&(r.disabled=!0,r.disabled=!1)}function zU(t,e){if(e instanceof it){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(f8(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else f8(t)}function f8(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function s3(t,e,r,n){return t.someProp("createSelectionBetween",s=>s(t,e,r))||Je.between(e,r,n)}function m8(t){return t.editable&&!t.hasFocus()?!1:UU(t)}function UU(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vke(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return wh(e.node,e.offset,r.anchorNode,r.anchorOffset)}function Bj(t,e){let{$anchor:r,$head:n}=t.selection,s=e>0?r.max(n):r.min(n),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&gt.findFrom(a,e)}function Oc(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function p8(t,e,r){let n=t.state.selection;if(n instanceof Je)if(r.indexOf("s")>-1){let{$head:s}=n,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let i=t.state.doc.resolve(s.pos+a.nodeSize*(e<0?-1:1));return Oc(t,new Je(n.$anchor,i))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Bj(t.state,e);return s&&s instanceof it?Oc(t,s):!1}else if(!(hi&&r.indexOf("m")>-1)){let s=n.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,i;if(!a||a.isText)return!1;let l=e<0?s.pos-a.nodeSize:s.pos;return a.isAtom||(i=t.docView.descAt(l))&&!i.contentDOM?it.isSelectable(a)?Oc(t,new it(e<0?t.state.doc.resolve(s.pos-a.nodeSize):s)):ry?Oc(t,new Je(t.state.doc.resolve(e<0?l:l+a.nodeSize))):!1:!1}}else return!1;else{if(n instanceof it&&n.node.isInline)return Oc(t,new Je(e>0?n.$to:n.$from));{let s=Bj(t.state,e);return s?Oc(t,s):!1}}}function Bb(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sg(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function cf(t,e){return e<0?bke(t):wke(t)}function bke(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s,a,i=!1;for(Si&&r.nodeType==1&&n<Bb(r)&&sg(r.childNodes[n],-1)&&(i=!0);;)if(n>0){if(r.nodeType!=1)break;{let l=r.childNodes[n-1];if(sg(l,-1))s=r,a=--n;else if(l.nodeType==3)r=l,n=r.nodeValue.length;else break}}else{if(VU(r))break;{let l=r.previousSibling;for(;l&&sg(l,-1);)s=r.parentNode,a=ns(l),l=l.previousSibling;if(l)r=l,n=Bb(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}i?zj(t,r,n):s&&zj(t,s,a)}function wke(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s=Bb(r),a,i;for(;;)if(n<s){if(r.nodeType!=1)break;let l=r.childNodes[n];if(sg(l,1))a=r,i=++n;else break}else{if(VU(r))break;{let l=r.nextSibling;for(;l&&sg(l,1);)a=l.parentNode,i=ns(l)+1,l=l.nextSibling;if(l)r=l,n=0,s=Bb(r);else{if(r=r.parentNode,r==t.dom)break;n=s=0}}}a&&zj(t,a,i)}function VU(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function kke(t,e){for(;t&&e==t.childNodes.length&&!ty(t);)e=ns(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function Cke(t,e){for(;t&&!e&&!ty(t);)e=ns(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function zj(t,e,r){if(e.nodeType!=3){let a,i;(i=kke(e,r))?(e=i,r=0):(a=Cke(e,r))&&(e=a,r=a.nodeValue.length)}let n=t.domSelection();if(!n)return;if(Qk(n)){let a=document.createRange();a.setEnd(e,r),a.setStart(e,r),n.removeAllRanges(),n.addRange(a)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Gl(t)},50)}function g8(t,e){let r=t.state.doc.resolve(e);if(!(js||Wwe)&&r.parent.inlineContent){let s=t.coordsAtPos(e);if(e>r.start()){let a=t.coordsAtPos(e-1),i=(a.top+a.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(a.left-s.left)>1)return a.left<s.left?"ltr":"rtl"}if(e<r.end()){let a=t.coordsAtPos(e+1),i=(a.top+a.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(a.left-s.left)>1)return a.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function x8(t,e,r){let n=t.state.selection;if(n instanceof Je&&!n.empty||r.indexOf("s")>-1||hi&&r.indexOf("m")>-1)return!1;let{$from:s,$to:a}=n;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Bj(t.state,e);if(i&&i instanceof it)return Oc(t,i)}if(!s.parent.inlineContent){let i=e<0?s:a,l=n instanceof ya?gt.near(i,e):gt.findFrom(i,e);return l?Oc(t,l):!1}return!1}function y8(t,e){if(!(t.state.selection instanceof Je))return!0;let{$head:r,$anchor:n,empty:s}=t.state.selection;if(!r.sameParent(n))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let i=t.state.tr;return e<0?i.delete(r.pos-a.nodeSize,r.pos):i.delete(r.pos,r.pos+a.nodeSize),t.dispatch(i),!0}return!1}function v8(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function Nke(t){if(!Ys||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;v8(t,n,"true"),setTimeout(()=>v8(t,n,"false"),20)}return!1}function Ske(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Eke(t,e){let r=e.keyCode,n=Ske(e);if(r==8||hi&&r==72&&n=="c")return y8(t,-1)||cf(t,-1);if(r==46&&!e.shiftKey||hi&&r==68&&n=="c")return y8(t,1)||cf(t,1);if(r==13||r==27)return!0;if(r==37||hi&&r==66&&n=="c"){let s=r==37?g8(t,t.state.selection.from)=="ltr"?-1:1:-1;return p8(t,s,n)||cf(t,s)}else if(r==39||hi&&r==70&&n=="c"){let s=r==39?g8(t,t.state.selection.from)=="ltr"?1:-1:1;return p8(t,s,n)||cf(t,s)}else{if(r==38||hi&&r==80&&n=="c")return x8(t,-1,n)||cf(t,-1);if(r==40||hi&&r==78&&n=="c")return Nke(t)||x8(t,1,n)||cf(t,1);if(n==(hi?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function a3(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let r=[],{content:n,openStart:s,openEnd:a}=e;for(;s>1&&a>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,a--;let m=n.firstChild;r.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let i=t.someProp("clipboardSerializer")||fc.fromSchema(t.state.schema),l=ZU(),c=l.createElement("div");c.appendChild(i.serializeFragment(n,{document:l}));let d=c.firstChild,u,h=0;for(;d&&d.nodeType==1&&(u=KU[d.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let p=l.createElement(u[m]);for(;c.firstChild;)p.appendChild(c.firstChild);c.appendChild(p),h++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${s} ${a}${h?` -${h}`:""} ${JSON.stringify(r)}`);let f=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:f,slice:e}}function HU(t,e,r,n,s){let a=s.parent.type.spec.code,i,l;if(!r&&!e)return null;let c=!!e&&(n||a||!r);if(c){if(t.someProp("transformPastedText",f=>{e=f(e,a||n,t)}),a)return l=new $e(Ne.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{l=f(l,t,!0)}),l;let h=t.someProp("clipboardTextParser",f=>f(e,s,n,t));if(h)l=h;else{let f=s.marks(),{schema:m}=t.state,p=fc.fromSchema(m);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=i.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(m.text(g,f)))})}}else t.someProp("transformPastedHTML",h=>{r=h(r,t)}),i=Ake(r),ry&&Mke(i);let d=i&&i.querySelector("[data-pm-slice]"),u=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Wo.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(c||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!jke.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=Oke(b8(l,+u[1],+u[2]),u[4]);else if(l=$e.maxOpen(Tke(l.content,s),!0),l.openStart||l.openEnd){let h=0,f=0;for(let m=l.content.firstChild;h<l.openStart&&!m.type.spec.isolating;h++,m=m.firstChild);for(let m=l.content.lastChild;f<l.openEnd&&!m.type.spec.isolating;f++,m=m.lastChild);l=b8(l,h,f)}return t.someProp("transformPasted",h=>{l=h(l,t,c)}),l}const jke=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Tke(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let s=e.node(r).contentMatchAt(e.index(r)),a,i=[];if(t.forEach(l=>{if(!i)return;let c=s.findWrapping(l.type),d;if(!c)return i=null;if(d=i.length&&a.length&&qU(c,a,l,i[i.length-1],0))i[i.length-1]=d;else{i.length&&(i[i.length-1]=GU(i[i.length-1],a.length));let u=WU(l,c);i.push(u),s=s.matchType(u.type),a=c}}),i)return Ne.from(i)}return t}function WU(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,Ne.from(t));return t}function qU(t,e,r,n,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let a=qU(t,e,r,n.lastChild,s+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(s==t.length-1?r.type:t[s+1]))return n.copy(n.content.append(Ne.from(WU(r,t,s+1))))}}function GU(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,GU(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(Ne.empty,!0);return t.copy(r.append(n))}function Uj(t,e,r,n,s,a){let i=e<0?t.firstChild:t.lastChild,l=i.content;return t.childCount>1&&(a=0),s<n-1&&(l=Uj(l,e,r,n,s+1,a)),s>=r&&(l=e<0?i.contentMatchAt(0).fillBefore(l,a<=s).append(l):l.append(i.contentMatchAt(i.childCount).fillBefore(Ne.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(l))}function b8(t,e,r){return e<t.openStart&&(t=new $e(Uj(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new $e(Uj(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const KU={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let w8=null;function ZU(){return w8||(w8=document.implementation.createHTMLDocument("title"))}let SN=null;function _ke(t){let e=window.trustedTypes;return e?(SN||(SN=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),SN.createHTML(t)):t}function Ake(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=ZU().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),s;if((s=n&&KU[n[1].toLowerCase()])&&(t=s.map(a=>"<"+a+">").join("")+t+s.map(a=>"</"+a+">").reverse().join("")),r.innerHTML=_ke(t),s)for(let a=0;a<s.length;a++)r=r.querySelector(s[a])||r;return r}function Mke(t){let e=t.querySelectorAll(js?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function Oke(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:s,openStart:a,openEnd:i}=t;for(let l=n.length-2;l>=0;l-=2){let c=r.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;s=Ne.from(c.create(n[l+1],s)),a++,i++}return new $e(s,a,i)}const Xs={},Js={},Rke={touchstart:!0,touchmove:!0};class Pke{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ike(t){for(let e in Xs){let r=Xs[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{Lke(t,n)&&!i3(t,n)&&(t.editable||!(n.type in Js))&&r(t,n)},Rke[e]?{passive:!0}:void 0)}Ys&&t.dom.addEventListener("input",()=>null),Vj(t)}function dd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Dke(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Vj(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>i3(t,n))})}function i3(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function Lke(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function $ke(t,e){!i3(t,e)&&Xs[e.type]&&(t.editable||!(e.type in Js))&&Xs[e.type](t,e)}Js.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!XU(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Il&&js&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Ym&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",s=>s(t,bu(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||Eke(t,r)?r.preventDefault():dd(t,"key")};Js.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Js.keypress=(t,e)=>{let r=e;if(XU(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||hi&&r.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Je)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(r.charCode),a=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",i=>i(t,n.$from.pos,n.$to.pos,s,a))&&t.dispatch(a()),r.preventDefault()}};function t2(t){return{left:t.clientX,top:t.clientY}}function Fke(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function o3(t,e,r,n,s){if(n==-1)return!1;let a=t.state.doc.resolve(n);for(let i=a.depth+1;i>0;i--)if(t.someProp(e,l=>i>a.depth?l(t,r,a.nodeAfter,a.before(i),s,!0):l(t,r,a.node(i),a.before(i),s,!1)))return!0;return!1}function am(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function Bke(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&it.isSelectable(n)?(am(t,new it(r)),!0):!1}function zke(t,e){if(e==-1)return!1;let r=t.state.selection,n,s;r instanceof it&&(n=r.node);let a=t.state.doc.resolve(e);for(let i=a.depth+1;i>0;i--){let l=i>a.depth?a.nodeAfter:a.node(i);if(it.isSelectable(l)){n&&r.$from.depth>0&&i>=r.$from.depth&&a.before(r.$from.depth+1)==r.$from.pos?s=a.before(r.$from.depth):s=a.before(i);break}}return s!=null?(am(t,it.create(t.state.doc,s)),!0):!1}function Uke(t,e,r,n,s){return o3(t,"handleClickOn",e,r,n)||t.someProp("handleClick",a=>a(t,e,n))||(s?zke(t,r):Bke(t,r))}function Vke(t,e,r,n){return o3(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",s=>s(t,e,n))}function Hke(t,e,r,n){return o3(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",s=>s(t,e,n))||Wke(t,r,n)}function Wke(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(am(t,Je.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let a=s.depth+1;a>0;a--){let i=a>s.depth?s.nodeAfter:s.node(a),l=s.before(a);if(i.inlineContent)am(t,Je.create(n,l+1,l+1+i.content.size));else if(it.isSelectable(i))am(t,it.create(n,l));else continue;return!0}}function l3(t){return zb(t)}const YU=hi?"metaKey":"ctrlKey";Xs.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=l3(t),s=Date.now(),a="singleClick";s-t.input.lastClick.time<500&&Fke(r,t.input.lastClick)&&!r[YU]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:s,x:r.clientX,y:r.clientY,type:a,button:r.button};let i=t.posAtCoords(t2(r));i&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qke(t,i,r,!!n)):(a=="doubleClick"?Vke:Hke)(t,i.pos,i.inside,r)?r.preventDefault():dd(t,"pointer"))};class qke{constructor(e,r,n,s){this.view=e,this.pos=r,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[YU],this.allowDefault=n.shiftKey;let a,i;if(r.inside>-1)a=e.state.doc.nodeAt(r.inside),i=r.inside;else{let u=e.state.doc.resolve(r.pos);a=u.parent,i=u.depth?u.before():0}const l=s?null:n.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:d}=e.state;(n.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||d instanceof it&&d.from<=i&&d.to>i)&&(this.mightDrag={node:a,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Si&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),dd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gl(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(t2(e))),this.updateAllowDefault(e),this.allowDefault||!r?dd(this.view,"pointer"):Uke(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ys&&this.mightDrag&&!this.mightDrag.node.isAtom||js&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(am(this.view,gt.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):dd(this.view,"pointer")}move(e){this.updateAllowDefault(e),dd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Xs.touchstart=t=>{t.input.lastTouch=Date.now(),l3(t),dd(t,"pointer")};Xs.touchmove=t=>{t.input.lastTouch=Date.now(),dd(t,"pointer")};Xs.contextmenu=t=>l3(t);function XU(t,e){return t.composing?!0:Ys&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Gke=Il?5e3:-1;Js.compositionstart=Js.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Je&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||r.marks(),zb(t,!0),t.markCursor=null;else if(zb(t,!e.selection.empty),Si&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let s=n.focusNode,a=n.focusOffset;s&&s.nodeType==1&&a!=0;){let i=a<0?s.lastChild:s.childNodes[a-1];if(!i)break;if(i.nodeType==3){let l=t.domSelection();l&&l.collapse(i,i.nodeValue.length);break}else s=i,a=-1}}t.input.composing=!0}JU(t,Gke)};Js.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,JU(t,20))};function JU(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>zb(t),e))}function QU(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Zke());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Kke(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=Bwe(e.focusNode,e.focusOffset),n=zwe(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let s=n.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(r==a||n==a)return a;if(!s||!s.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let i=r.pmViewDesc;if(!(!i||!i.isText(r.nodeValue)))return n}}return r||n}function Zke(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function zb(t,e=!1){if(!(Il&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),QU(t),e||t.docView&&t.docView.dirty){let r=n3(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Yke(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Qg=va&&Sd<15||Ym&&qwe<604;Xs.copy=Js.cut=(t,e)=>{let r=e,n=t.state.selection,s=r.type=="cut";if(n.empty)return;let a=Qg?null:r.clipboardData,i=n.content(),{dom:l,text:c}=a3(t,i);a?(r.preventDefault(),a.clearData(),a.setData("text/html",l.innerHTML),a.setData("text/plain",c)):Yke(t,l),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Xke(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Jke(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?ex(t,n.value,null,s,e):ex(t,n.textContent,n.innerHTML,s,e)},50)}function ex(t,e,r,n,s){let a=HU(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,s,a||$e.empty)))return!0;if(!a)return!1;let i=Xke(a),l=i?t.state.tr.replaceSelectionWith(i,n):t.state.tr.replaceSelection(a);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function eV(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Js.paste=(t,e)=>{let r=e;if(t.composing&&!Il)return;let n=Qg?null:r.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&ex(t,eV(n),n.getData("text/html"),s,r)?r.preventDefault():Jke(t,r)};class tV{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const Qke=hi?"altKey":"ctrlKey";function rV(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[Qke]}Xs.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let s=t.state.selection,a=s.empty?null:t.posAtCoords(t2(r)),i;if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof it?s.to-1:s.to))){if(n&&n.mightDrag)i=it.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let h=t.docView.nearestDesc(r.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(i=it.create(t.state.doc,h.posBefore))}}let l=(i||t.state.selection).content(),{dom:c,text:d,slice:u}=a3(t,l);(!r.dataTransfer.files.length||!js||TU>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Qg?"Text":"text/html",c.innerHTML),r.dataTransfer.effectAllowed="copyMove",Qg||r.dataTransfer.setData("text/plain",d),t.dragging=new tV(u,rV(t,r),i)};Xs.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Js.dragover=Js.dragenter=(t,e)=>e.preventDefault();Js.drop=(t,e)=>{let r=e,n=t.dragging;if(t.dragging=null,!r.dataTransfer)return;let s=t.posAtCoords(t2(r));if(!s)return;let a=t.state.doc.resolve(s.pos),i=n&&n.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=HU(t,eV(r.dataTransfer),Qg?null:r.dataTransfer.getData("text/html"),!1,a);let l=!!(n&&rV(t,r));if(t.someProp("handleDrop",p=>p(t,r,i||$e.empty,l))){r.preventDefault();return}if(!i)return;r.preventDefault();let c=i?vU(t.state.doc,a.pos,i):a.pos;c==null&&(c=a.pos);let d=t.state.tr;if(l){let{node:p}=n;p?p.replace(d):d.deleteSelection()}let u=d.mapping.map(c),h=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=d.doc;if(h?d.replaceRangeWith(u,u,i.content.firstChild):d.replaceRange(u,u,i),d.doc.eq(f))return;let m=d.doc.resolve(u);if(h&&it.isSelectable(i.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(i.content.firstChild))d.setSelection(new it(m));else{let p=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((g,y,b,v)=>p=v),d.setSelection(s3(t,m,d.doc.resolve(p)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};Xs.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gl(t)},20))};Xs.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Xs.beforeinput=(t,e)=>{if(js&&Il&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,bu(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Js)Xs[t]=Js[t];function tx(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class Ub{constructor(e,r){this.toDOM=e,this.spec=r||eh,this.side=this.spec.side||0}map(e,r,n,s){let{pos:a,deleted:i}=e.mapResult(r.from+s,this.side<0?-1:1);return i?null:new kr(a-n,a-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Ub&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tx(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jd{constructor(e,r){this.attrs=e,this.spec=r||eh}map(e,r,n,s){let a=e.map(r.from+s,this.spec.inclusiveStart?-1:1)-n,i=e.map(r.to+s,this.spec.inclusiveEnd?1:-1)-n;return a>=i?null:new kr(a,i,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof jd&&tx(this.attrs,e.attrs)&&tx(this.spec,e.spec)}static is(e){return e.type instanceof jd}destroy(){}}class c3{constructor(e,r){this.attrs=e,this.spec=r||eh}map(e,r,n,s){let a=e.mapResult(r.from+s,1);if(a.deleted)return null;let i=e.mapResult(r.to+s,-1);return i.deleted||i.pos<=a.pos?null:new kr(a.pos-n,i.pos-n,this)}valid(e,r){let{index:n,offset:s}=e.content.findIndex(r.from),a;return s==r.from&&!(a=e.child(n)).isText&&s+a.nodeSize==r.to}eq(e){return this==e||e instanceof c3&&tx(this.attrs,e.attrs)&&tx(this.spec,e.spec)}destroy(){}}class kr{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new kr(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new kr(e,e,new Ub(r,n))}static inline(e,r,n,s){return new kr(e,r,new jd(n,s))}static node(e,r,n,s){return new kr(e,r,new c3(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof jd}get widget(){return this.type instanceof Ub}}const bf=[],eh={};class Ht{constructor(e,r){this.local=e.length?e:bf,this.children=r.length?r:bf}static create(e,r){return r.length?Vb(r,e,0,eh):ws}find(e,r,n){let s=[];return this.findInner(e??0,r??1e9,s,0,n),s}findInner(e,r,n,s,a){for(let i=0;i<this.local.length;i++){let l=this.local[i];l.from<=r&&l.to>=e&&(!a||a(l.spec))&&n.push(l.copy(l.from+s,l.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<r&&this.children[i+1]>e){let l=this.children[i]+1;this.children[i+2].findInner(e-l,r-l,n,s+l,a)}}map(e,r,n){return this==ws||e.maps.length==0?this:this.mapInner(e,r,0,0,n||eh)}mapInner(e,r,n,s,a){let i;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,n,s);c&&c.type.valid(r,c)?(i||(i=[])).push(c):a.onRemove&&a.onRemove(this.local[l].spec)}return this.children.length?e2e(this.children,i||[],e,r,n,s,a):i?new Ht(i.sort(th),bf):ws}add(e,r){return r.length?this==ws?Ht.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let s,a=0;e.forEach((l,c)=>{let d=c+n,u;if(u=sV(r,l,d)){for(s||(s=this.children.slice());a<s.length&&s[a]<c;)a+=3;s[a]==c?s[a+2]=s[a+2].addInner(l,u,d+1):s.splice(a,0,c,c+l.nodeSize,Vb(u,l,d+1,eh)),a+=3}});let i=nV(a?aV(r):r,-n);for(let l=0;l<i.length;l++)i[l].type.valid(e,i[l])||i.splice(l--,1);return new Ht(i.length?this.local.concat(i).sort(th):this.local,s||this.children)}remove(e){return e.length==0||this==ws?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,s=this.local;for(let a=0;a<n.length;a+=3){let i,l=n[a]+r,c=n[a+1]+r;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>l&&h.to<c&&(e[u]=null,(i||(i=[])).push(h));if(!i)continue;n==this.children&&(n=this.children.slice());let d=n[a+2].removeInner(i,l+1);d!=ws?n[a+2]=d:(n.splice(a,3),a-=3)}if(s.length){for(let a=0,i;a<e.length;a++)if(i=e[a])for(let l=0;l<s.length;l++)s[l].eq(i,r)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new Ht(s,n):ws}forChild(e,r){if(this==ws)return this;if(r.isLeaf)return Ht.empty;let n,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(n=this.children[l+2]);break}let a=e+1,i=a+r.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<i&&c.to>a&&c.type instanceof jd){let d=Math.max(a,c.from)-a,u=Math.min(i,c.to)-a;d<u&&(s||(s=[])).push(c.copy(d,u))}}if(s){let l=new Ht(s.sort(th),bf);return n?new Fc([l,n]):l}return n||ws}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return d3(this.localsInner(e))}localsInner(e){if(this==ws)return bf;if(e.inlineContent||!this.local.some(jd.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof jd||r.push(this.local[n]);return r}forEachSet(e){e(this)}}Ht.empty=new Ht([],[]);Ht.removeOverlap=d3;const ws=Ht.empty;class Fc{constructor(e){this.members=e}map(e,r){const n=this.members.map(s=>s.map(e,r,eh));return Fc.from(n)}forChild(e,r){if(r.isLeaf)return Ht.empty;let n=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(e,r);a!=ws&&(a instanceof Fc?n=n.concat(a.members):n.push(a))}return Fc.from(n)}eq(e){if(!(e instanceof Fc)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(e);if(a.length)if(!r)r=a;else{n&&(r=r.slice(),n=!1);for(let i=0;i<a.length;i++)r.push(a[i])}}return r?d3(n?r:r.sort(th)):bf}static from(e){switch(e.length){case 0:return ws;case 1:return e[0];default:return new Fc(e.every(r=>r instanceof Ht)?e:e.reduce((r,n)=>r.concat(n instanceof Ht?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function e2e(t,e,r,n,s,a,i){let l=t.slice();for(let d=0,u=a;d<r.maps.length;d++){let h=0;r.maps[d].forEach((f,m,p,g)=>{let y=g-p-(m-f);for(let b=0;b<l.length;b+=3){let v=l[b+1];if(v<0||f>v+u-h)continue;let w=l[b]+u-h;m>=w?l[b+1]=f<=w?-2:-1:f>=u&&y&&(l[b]+=y,l[b+1]+=y)}h+=y}),u=r.maps[d].map(u,-1)}let c=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){c=!0,l[d+1]=-1;continue}let u=r.map(t[d]+a),h=u-s;if(h<0||h>=n.content.size){c=!0;continue}let f=r.map(t[d+1]+a,-1),m=f-s,{index:p,offset:g}=n.content.findIndex(h),y=n.maybeChild(p);if(y&&g==h&&g+y.nodeSize==m){let b=l[d+2].mapInner(r,y,u+1,t[d]+a+1,i);b!=ws?(l[d]=h,l[d+1]=m,l[d+2]=b):(l[d+1]=-2,c=!0)}else c=!0}if(c){let d=t2e(l,t,e,r,s,a,i),u=Vb(d,n,0,i);e=u.local;for(let h=0;h<l.length;h+=3)l[h+1]<0&&(l.splice(h,3),h-=3);for(let h=0,f=0;h<u.children.length;h+=3){let m=u.children[h];for(;f<l.length&&l[f]<m;)f+=3;l.splice(f,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Ht(e.sort(th),l)}function nV(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let s=t[n];r.push(new kr(s.from+e,s.to+e,s.type))}return r}function t2e(t,e,r,n,s,a,i){function l(c,d){for(let u=0;u<c.local.length;u++){let h=c.local[u].map(n,s,d);h?r.push(h):i.onRemove&&i.onRemove(c.local[u].spec)}for(let u=0;u<c.children.length;u+=3)l(c.children[u+2],c.children[u]+d+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+a+1);return r}function sV(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,s=null;for(let a=0,i;a<t.length;a++)(i=t[a])&&i.from>r&&i.to<n&&((s||(s=[])).push(i),t[a]=null);return s}function aV(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function Vb(t,e,r,n){let s=[],a=!1;e.forEach((l,c)=>{let d=sV(t,l,c+r);if(d){a=!0;let u=Vb(d,l,r+c+1,n);u!=ws&&s.push(c,c+l.nodeSize,u)}});let i=nV(a?aV(t):t,-r).sort(th);for(let l=0;l<i.length;l++)i[l].type.valid(e,i[l])||(n.onRemove&&n.onRemove(i[l].spec),i.splice(l--,1));return i.length||s.length?new Ht(i,s):ws}function th(t,e){return t.from-e.from||t.to-e.to}function d3(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let s=r+1;s<e.length;s++){let a=e[s];if(a.from==n.from){a.to!=n.to&&(e==t&&(e=t.slice()),e[s]=a.copy(a.from,n.to),k8(e,s+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,a.from),k8(e,s,n.copy(a.from,n.to)));break}}}return e}function k8(t,e,r){for(;e<t.length&&th(r,t[e])>0;)e++;t.splice(e,0,r)}function EN(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=ws&&e.push(n)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),Fc.from(e)}const r2e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},n2e=va&&Sd<=11;class s2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class a2e{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new s2e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);va&&Sd<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),n2e&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,r2e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(m8(this.view)){if(this.suppressingSelectionUpdates)return Gl(this.view);if(va&&Sd<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&wh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let a=e.focusNode;a;a=Zm(a))r.add(a);for(let a=e.anchorNode;a;a=Zm(a))if(r.has(a)){n=a;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&m8(e)&&!this.ignoreSelectionChange(n),a=-1,i=-1,l=!1,c=[];if(e.editable)for(let u=0;u<r.length;u++){let h=this.registerMutation(r[u],c);h&&(a=a<0?h.from:Math.min(h.from,a),i=i<0?h.to:Math.max(h.to,i),h.typeOver&&(l=!0))}if(Si&&c.length){let u=c.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,f]=u;h.parentNode&&h.parentNode.parentNode==f.parentNode?f.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let f of u){let m=f.parentNode;m&&m.nodeName=="LI"&&(!h||l2e(e,h)!=m)&&f.remove()}}}let d=null;a<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Qk(n)&&(d=n3(e))&&d.eq(gt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gl(e),this.currentSelection.set(n),e.scrollToSelection()):(a>-1||s)&&(a>-1&&(e.docView.markDirty(a,i),i2e(e)),this.handleDOMChange(a,i,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Gl(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];r.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,a=e.nextSibling;if(va&&Sd<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:f}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(a=f)}let i=s&&s.parentNode==e.target?ns(s)+1:0,l=n.localPosFromDOM(e.target,i,-1),c=a&&a.parentNode==e.target?ns(a):e.target.childNodes.length,d=n.localPosFromDOM(e.target,c,1);return{from:l,to:d}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let C8=new WeakMap,N8=!1;function i2e(t){if(!C8.has(t)&&(C8.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Si,N8)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),N8=!0}}function S8(t,e){let r=e.startContainer,n=e.startOffset,s=e.endContainer,a=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return wh(i.node,i.offset,s,a)&&([r,n,s,a]=[s,a,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:a}}function o2e(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return S8(t,s)}let r;function n(s){s.preventDefault(),s.stopImmediatePropagation(),r=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?S8(t,r):null}function l2e(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function c2e(t,e,r){let{node:n,fromOffset:s,toOffset:a,from:i,to:l}=t.docView.parseRange(e,r),c=t.domSelectionRange(),d,u=c.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(d=[{node:u,offset:c.anchorOffset}],Qk(c)||d.push({node:c.focusNode,offset:c.focusOffset})),js&&t.input.lastKeyCode===8)for(let y=a;y>s;y--){let b=n.childNodes[y-1],v=b.pmViewDesc;if(b.nodeName=="BR"&&!v){a=y;break}if(!v||v.size)break}let h=t.state.doc,f=t.someProp("domParser")||Wo.fromSchema(t.state.schema),m=h.resolve(i),p=null,g=f.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:s,to:a,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:d2e,context:m});if(d&&d[0].pos!=null){let y=d[0].pos,b=d[1]&&d[1].pos;b==null&&(b=y),p={anchor:y+i,head:b+i}}return{doc:g,sel:p,from:i,to:l}}function d2e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ys&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||Ys&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const u2e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function h2e(t,e,r,n,s){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,T=n3(t,E);if(T&&!t.state.selection.eq(T)){if(js&&Il&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",B=>B(t,bu(13,"Enter"))))return;let R=t.state.tr.setSelection(T);E=="pointer"?R.setMeta("pointer",!0):E=="key"&&R.scrollIntoView(),a&&R.setMeta("composition",a),t.dispatch(R)}return}let i=t.state.doc.resolve(e),l=i.sharedDepth(r);e=i.before(l+1),r=t.state.doc.resolve(r).after(l+1);let c=t.state.selection,d=c2e(t,e,r),u=t.state.doc,h=u.slice(d.from,d.to),f,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,m="end"):(f=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let p=p2e(h.content,d.doc.content,d.from,f,m);if(p&&t.input.domChangeCount++,(Ym&&t.input.lastIOSEnter>Date.now()-225||Il)&&s.some(E=>E.nodeType==1&&!u2e.test(E.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",E=>E(t,bu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(n&&c instanceof Je&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))p={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let E=E8(t,t.state.doc,d.sel);if(E&&!E.eq(t.state.selection)){let T=t.state.tr.setSelection(E);a&&T.setMeta("composition",a),t.dispatch(T)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Je&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),va&&Sd<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>d.from&&d.doc.textBetween(p.start-d.from-1,p.start-d.from+1)==" "&&(p.start--,p.endA--,p.endB--);let g=d.doc.resolveNoCache(p.start-d.from),y=d.doc.resolveNoCache(p.endB-d.from),b=u.resolve(p.start),v=g.sameParent(y)&&g.parent.inlineContent&&b.end()>=p.endA,w;if((Ym&&t.input.lastIOSEnter>Date.now()-225&&(!v||s.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!v&&g.pos<d.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(g.pos,y.pos,"",""))&&(w=gt.findFrom(d.doc.resolve(g.pos+1),1,!0))&&w.head>g.pos)&&t.someProp("handleKeyDown",E=>E(t,bu(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&m2e(u,p.start,p.endA,g,y)&&t.someProp("handleKeyDown",E=>E(t,bu(8,"Backspace")))){Il&&js&&t.domObserver.suppressSelectionUpdates();return}js&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),Il&&!v&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==p.endA&&(p.endB-=2,y=d.doc.resolveNoCache(p.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,bu(13,"Enter"))})},20));let k=p.start,N=p.endA,S=E=>{let T=E||t.state.tr.replace(k,N,d.doc.slice(p.start-d.from,p.endB-d.from));if(d.sel){let R=E8(t,T.doc,d.sel);R&&!(js&&t.composing&&R.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(R.head==k||R.head==T.mapping.map(N)-1)||va&&R.empty&&R.head==k)&&T.setSelection(R)}return a&&T.setMeta("composition",a),T.scrollIntoView()},C;if(v){if(g.pos==y.pos){va&&Sd<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gl(t),20));let E=S(t.state.tr.delete(k,N)),T=u.resolve(p.start).marksAcross(u.resolve(p.endA));T&&E.ensureMarks(T),t.dispatch(E)}else if(p.endA==p.endB&&(C=f2e(g.parent.content.cut(g.parentOffset,y.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start())))){let E=S(t.state.tr);C.type=="add"?E.addMark(k,N,C.mark):E.removeMark(k,N,C.mark),t.dispatch(E)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,y.parentOffset),T=()=>S(t.state.tr.insertText(E,k,N));t.someProp("handleTextInput",R=>R(t,k,N,E,T))||t.dispatch(T())}}else t.dispatch(S())}function E8(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:s3(t,e.resolve(r.anchor),e.resolve(r.head))}function f2e(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,s=r,a=n,i,l,c;for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);for(let u=0;u<r.length;u++)a=r[u].removeFromSet(a);if(s.length==1&&a.length==0)l=s[0],i="add",c=u=>u.mark(l.addToSet(u.marks));else if(s.length==0&&a.length==1)l=a[0],i="remove",c=u=>u.mark(l.removeFromSet(u.marks));else return null;let d=[];for(let u=0;u<e.childCount;u++)d.push(c(e.child(u)));if(Ne.from(d).eq(t))return{mark:l,type:i}}function m2e(t,e,r,n,s){if(r-e<=s.pos-n.pos||jN(n,!0,!1)<s.pos)return!1;let a=t.resolve(e);if(!n.parent.isTextblock){let l=a.nodeAfter;return l!=null&&r==e+l.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let i=t.resolve(jN(a,!0,!0));return!i.parent.isTextblock||i.pos>r||jN(i,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(i.parent.content)}function jN(t,e,r){let n=t.depth,s=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,s++,e=!1;if(r){let a=t.node(n).maybeChild(t.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}function p2e(t,e,r,n,s){let a=t.findDiffStart(e,r);if(a==null)return null;let{a:i,b:l}=t.findDiffEnd(e,r+t.size,r+e.size);if(s=="end"){let c=Math.max(0,a-Math.min(i,l));n-=i+c-a}if(i<a&&t.size<e.size){let c=n<=a&&n>=i?a-n:0;a-=c,a&&a<e.size&&j8(e.textBetween(a-1,a+1))&&(a+=c?1:-1),l=a+(l-i),i=a}else if(l<a){let c=n<=a&&n>=l?a-n:0;a-=c,a&&a<t.size&&j8(t.textBetween(a-1,a+1))&&(a+=c?1:-1),i=a+(i-l),l=a}return{start:a,endA:i,endB:l}}function j8(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class u3{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Pke,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(O8),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=A8(this),_8(this),this.nodeViews=M8(this),this.docView=l8(this.state.doc,T8(this),EN(this),this.dom,this),this.domObserver=new a2e(this,(n,s,a,i)=>h2e(this,n,s,a,i)),this.domObserver.start(),Ike(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Vj(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(O8),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let s=this.state,a=!1,i=!1;e.storedMarks&&this.composing&&(QU(this),i=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=r.plugins;if(l||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let m=M8(this);x2e(m,this.nodeViews)&&(this.nodeViews=m,a=!0)}(l||r.handleDOMEvents!=this._props.handleDOMEvents)&&Vj(this),this.editable=A8(this),_8(this);let c=EN(this),d=T8(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",h=a||!this.docView.matchesNode(e.doc,d,c);(h||!e.selection.eq(s.selection))&&(i=!0);let f=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&Zwe(this);if(i){this.domObserver.stop();let m=h&&(va||js)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&g2e(s.selection,e.selection);if(h){let p=js?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Kke(this)),(a||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=l8(e.doc,d,c,this.dom,this)),p&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vke(this))?Gl(this,m):(zU(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&Ywe(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof it){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&r8(this,r.getBoundingClientRect(),e)}else r8(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let a=n.from+(this.state.doc.content.size-r.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==n.node&&(s=a)}this.dragging=new tV(e.slice,e.move,s<0?void 0:it.create(this.state.doc,s))}someProp(e,r){let n=this._props&&this._props[e],s;if(n!=null&&(s=r?r(n):n))return s;for(let i=0;i<this.directPlugins.length;i++){let l=this.directPlugins[i].props[e];if(l!=null&&(s=r?r(l):l))return s}let a=this.state.plugins;if(a)for(let i=0;i<a.length;i++){let l=a[i].props[e];if(l!=null&&(s=r?r(l):l))return s}}hasFocus(){if(va){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xwe(this.dom),Gl(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rke(this,e)}coordsAtPos(e,r=1){return RU(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let s=this.docView.posFromDOM(e,r,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,r){return oke(this,r||this.state,e)}pasteHTML(e,r){return ex(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return ex(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return a3(this,e)}destroy(){this.docView&&(Dke(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],EN(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,$we())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return $ke(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ys&&this.root.nodeType===11&&Vwe(this.dom.ownerDocument)==this.dom&&o2e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}u3.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function T8(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[kr.node(0,t.state.doc.content.size,e)]}function _8(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:kr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function A8(t){return!t.someProp("editable",e=>e(t.state)===!1)}function g2e(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function M8(t){let e=Object.create(null);function r(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function x2e(t,e){let r=0,n=0;for(let s in t){if(t[s]!=e[s])return!0;r++}for(let s in e)n++;return r!=n}function O8(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var $d={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Hb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},y2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),v2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ss=0;ss<10;ss++)$d[48+ss]=$d[96+ss]=String(ss);for(var ss=1;ss<=24;ss++)$d[ss+111]="F"+ss;for(var ss=65;ss<=90;ss++)$d[ss]=String.fromCharCode(ss+32),Hb[ss]=String.fromCharCode(ss);for(var TN in $d)Hb.hasOwnProperty(TN)||(Hb[TN]=$d[TN]);function b2e(t){var e=y2e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||v2e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?Hb:$d)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const w2e=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),k2e=typeof navigator<"u"&&/Win/.test(navigator.platform);function C2e(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,s,a,i;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))w2e?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),i&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function N2e(t){let e=Object.create(null);for(let r in t)e[C2e(r)]=t[r];return e}function _N(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function S2e(t){return new Dt({props:{handleKeyDown:h3(t)}})}function h3(t){let e=N2e(t);return function(r,n){let s=b2e(n),a,i=e[_N(s,n)];if(i&&i(r.state,r.dispatch,r))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let l=e[_N(s,n,!1)];if(l&&l(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(k2e&&n.ctrlKey&&n.altKey)&&(a=$d[n.keyCode])&&a!=s){let l=e[_N(a,n)];if(l&&l(r.state,r.dispatch,r))return!0}}return!1}}const f3=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function iV(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const oV=(t,e,r)=>{let n=iV(t,r);if(!n)return!1;let s=m3(n);if(!s){let i=n.blockRange(),l=i&&Sp(i);return l==null?!1:(e&&e(t.tr.lift(i,l).scrollIntoView()),!0)}let a=s.nodeBefore;if(gV(t,s,e,-1))return!0;if(n.parent.content.size==0&&(Xm(a,"end")||it.isSelectable(a)))for(let i=n.depth;;i--){let l=Xk(t.doc,n.before(i),n.after(i),$e.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Xm(a,"end")?gt.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):it.create(c.doc,s.pos-a.nodeSize)),e(c.scrollIntoView())}return!0}if(i==1||n.node(i-1).childCount>1)break}return a.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),!0):!1},E2e=(t,e,r)=>{let n=iV(t,r);if(!n)return!1;let s=m3(n);return s?lV(t,s,e):!1},j2e=(t,e,r)=>{let n=dV(t,r);if(!n)return!1;let s=p3(n);return s?lV(t,s,e):!1};function lV(t,e,r){let n=e.nodeBefore,s=n,a=e.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=e.nodeAfter,l=i,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let d=Xk(t.doc,a,c,$e.empty);if(!d||d.from!=a||d instanceof wn&&d.slice.size>=c-a)return!1;if(r){let u=t.tr.step(d);u.setSelection(Je.create(u.doc,a)),r(u.scrollIntoView())}return!0}function Xm(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const cV=(t,e,r)=>{let{$head:n,empty:s}=t.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;a=m3(n)}let i=a&&a.nodeBefore;return!i||!it.isSelectable(i)?!1:(e&&e(t.tr.setSelection(it.create(t.doc,a.pos-i.nodeSize)).scrollIntoView()),!0)};function m3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function dV(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const uV=(t,e,r)=>{let n=dV(t,r);if(!n)return!1;let s=p3(n);if(!s)return!1;let a=s.nodeAfter;if(gV(t,s,e,1))return!0;if(n.parent.content.size==0&&(Xm(a,"start")||it.isSelectable(a))){let i=Xk(t.doc,n.before(),n.after(),$e.empty);if(i&&i.slice.size<i.to-i.from){if(e){let l=t.tr.step(i);l.setSelection(Xm(a,"start")?gt.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):it.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return a.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0):!1},hV=(t,e,r)=>{let{$head:n,empty:s}=t.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;a=p3(n)}let i=a&&a.nodeAfter;return!i||!it.isSelectable(i)?!1:(e&&e(t.tr.setSelection(it.create(t.doc,a.pos)).scrollIntoView()),!0)};function p3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const T2e=(t,e)=>{let r=t.selection,n=r instanceof it,s;if(n){if(r.node.isTextblock||!zh(t.doc,r.from))return!1;s=r.from}else if(s=Yk(t.doc,r.from,-1),s==null)return!1;if(e){let a=t.tr.join(s);n&&a.setSelection(it.create(a.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},_2e=(t,e)=>{let r=t.selection,n;if(r instanceof it){if(r.node.isTextblock||!zh(t.doc,r.to))return!1;n=r.to}else if(n=Yk(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},A2e=(t,e)=>{let{$from:r,$to:n}=t.selection,s=r.blockRange(n),a=s&&Sp(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)},fV=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function g3(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const M2e=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let s=r.node(-1),a=r.indexAfter(-1),i=g3(s.contentMatchAt(a));if(!i||!s.canReplaceWith(a,a,i))return!1;if(e){let l=r.after(),c=t.tr.replaceWith(l,l,i.createAndFill());c.setSelection(gt.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},mV=(t,e)=>{let r=t.selection,{$from:n,$to:s}=r;if(r instanceof ya||n.parent.inlineContent||s.parent.inlineContent)return!1;let a=g3(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let i=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,l=t.tr.insert(i,a.createAndFill());l.setSelection(Je.create(l.doc,i+1)),e(l.scrollIntoView())}return!0},pV=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let a=r.before();if(ql(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let n=r.blockRange(),s=n&&Sp(n);return s==null?!1:(e&&e(t.tr.lift(n,s).scrollIntoView()),!0)};function O2e(t){return(e,r)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof it&&e.selection.node.isBlock)return!n.parentOffset||!ql(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let a=[],i,l,c=!1,d=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){c=n.end(m)==n.pos+(n.depth-m),d=n.start(m)==n.pos-(n.depth-m),l=g3(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),a.unshift(c&&l?{type:l}:null),i=m;break}else{if(m==1)return!1;a.unshift(null)}let u=e.tr;(e.selection instanceof Je||e.selection instanceof ya)&&u.deleteSelection();let h=u.mapping.map(n.pos),f=ql(u.doc,h,a.length,a);if(f||(a[0]=l?{type:l}:null,f=ql(u.doc,h,a.length,a)),!f)return!1;if(u.split(h,a.length,a),!c&&d&&n.node(i).type!=l){let m=u.mapping.map(n.before(i)),p=u.doc.resolve(m);l&&n.node(i-1).canReplaceWith(p.index(),p.index()+1,l)&&u.setNodeMarkup(u.mapping.map(n.before(i)),l)}return r&&r(u.scrollIntoView()),!0}}const R2e=O2e(),P2e=(t,e)=>{let{$from:r,to:n}=t.selection,s,a=r.sharedDepth(n);return a==0?!1:(s=r.before(a),e&&e(t.tr.setSelection(it.create(t.doc,s))),!0)};function I2e(t,e,r){let n=e.nodeBefore,s=e.nodeAfter,a=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(a-1,a)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(s.isTextblock||zh(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function gV(t,e,r,n){let s=e.nodeBefore,a=e.nodeAfter,i,l,c=s.type.spec.isolating||a.type.spec.isolating;if(!c&&I2e(t,e,r))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(i=(l=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&l.matchType(i[0]||a.type).validEnd){if(r){let m=e.pos+a.nodeSize,p=Ne.empty;for(let b=i.length-1;b>=0;b--)p=Ne.from(i[b].create(null,p));p=Ne.from(s.copy(p));let g=t.tr.step(new mn(e.pos-1,m,e.pos,m,new $e(p,1,0),i.length,!0)),y=g.doc.resolve(m+2*i.length);y.nodeAfter&&y.nodeAfter.type==s.type&&zh(g.doc,y.pos)&&g.join(y.pos),r(g.scrollIntoView())}return!0}let u=a.type.spec.isolating||n>0&&c?null:gt.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),f=h&&Sp(h);if(f!=null&&f>=e.depth)return r&&r(t.tr.lift(h,f).scrollIntoView()),!0;if(d&&Xm(a,"start",!0)&&Xm(s,"end")){let m=s,p=[];for(;p.push(m),!m.isTextblock;)m=m.lastChild;let g=a,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(m.canReplace(m.childCount,m.childCount,g.content)){if(r){let b=Ne.empty;for(let w=p.length-1;w>=0;w--)b=Ne.from(p[w].copy(b));let v=t.tr.step(new mn(e.pos-p.length,e.pos+a.nodeSize,e.pos+y,e.pos+a.nodeSize-y,new $e(b,p.length,0),0,!0));r(v.scrollIntoView())}return!0}}return!1}function xV(t){return function(e,r){let n=e.selection,s=t<0?n.$from:n.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return s.node(a).isTextblock?(r&&r(e.tr.setSelection(Je.create(e.doc,t<0?s.start(a):s.end(a)))),!0):!1}}const D2e=xV(-1),L2e=xV(1);function $2e(t,e=null){return function(r,n){let{$from:s,$to:a}=r.selection,i=s.blockRange(a),l=i&&pU(i,t,e);return l?(n&&n(r.tr.wrap(i,l).scrollIntoView()),!0):!1}}function R8(t,e=null){return function(r,n){let s=!1;for(let a=0;a<r.selection.ranges.length&&!s;a++){let{$from:{pos:i},$to:{pos:l}}=r.selection.ranges[a];r.doc.nodesBetween(i,l,(c,d)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)s=!0;else{let u=r.doc.resolve(d),h=u.index();s=u.parent.canReplaceWith(h,h+1,t)}})}if(!s)return!1;if(n){let a=r.tr;for(let i=0;i<r.selection.ranges.length;i++){let{$from:{pos:l},$to:{pos:c}}=r.selection.ranges[i];a.setBlockType(l,c,t,e)}n(a.scrollIntoView())}return!0}}function x3(...t){return function(e,r,n){for(let s=0;s<t.length;s++)if(t[s](e,r,n))return!0;return!1}}x3(f3,oV,cV);x3(f3,uV,hV);x3(fV,mV,pV,R2e);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function F2e(t,e=null){return function(r,n){let{$from:s,$to:a}=r.selection,i=s.blockRange(a);if(!i)return!1;let l=n?r.tr:null;return B2e(l,i,t,e)?(n&&n(l.scrollIntoView()),!0):!1}}function B2e(t,e,r,n=null){let s=!1,a=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=i.resolve(e.start-2);a=new Lb(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Lb(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let l=pU(a,r,n,e);return l?(t&&z2e(t,e,l,s,r),!0):!1}function z2e(t,e,r,n,s){let a=Ne.empty;for(let u=r.length-1;u>=0;u--)a=Ne.from(r[u].type.create(r[u].attrs,a));t.step(new mn(e.start-(n?2:0),e.end,e.start,e.end,new $e(a,0,0),r.length,!0));let i=0;for(let u=0;u<r.length;u++)r[u].type==s&&(i=u+1);let l=r.length-i,c=e.start+r.length-(n?2:0),d=e.parent;for(let u=e.startIndex,h=e.endIndex,f=!0;u<h;u++,f=!1)!f&&ql(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=d.child(u).nodeSize;return t}function U2e(t){return function(e,r){let{$from:n,$to:s}=e.selection,a=n.blockRange(s,i=>i.childCount>0&&i.firstChild.type==t);return a?r?n.node(a.depth-1).type==t?V2e(e,r,t,a):H2e(e,r,a):!0:!1}}function V2e(t,e,r,n){let s=t.tr,a=n.end,i=n.$to.end(n.depth);a<i&&(s.step(new mn(a-1,i,a,i,new $e(Ne.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new Lb(s.doc.resolve(n.$from.pos),s.doc.resolve(i),n.depth));const l=Sp(n);if(l==null)return!1;s.lift(n,l);let c=s.doc.resolve(s.mapping.map(a,-1)-1);return zh(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),e(s.scrollIntoView()),!0}function H2e(t,e,r){let n=t.tr,s=r.parent;for(let m=r.end,p=r.endIndex-1,g=r.startIndex;p>g;p--)m-=s.child(p).nodeSize,n.delete(m-1,m+1);let a=n.doc.resolve(r.start),i=a.nodeAfter;if(n.mapping.map(r.end)!=r.start+a.nodeAfter.nodeSize)return!1;let l=r.startIndex==0,c=r.endIndex==s.childCount,d=a.node(-1),u=a.index(-1);if(!d.canReplace(u+(l?0:1),u+1,i.content.append(c?Ne.empty:Ne.from(s))))return!1;let h=a.pos,f=h+i.nodeSize;return n.step(new mn(h-(l?1:0),f+(c?1:0),h+1,f-1,new $e((l?Ne.empty:Ne.from(s.copy(Ne.empty))).append(c?Ne.empty:Ne.from(s.copy(Ne.empty))),l?0:1,c?0:1),l?0:1)),e(n.scrollIntoView()),!0}function W2e(t){return function(e,r){let{$from:n,$to:s}=e.selection,a=n.blockRange(s,d=>d.childCount>0&&d.firstChild.type==t);if(!a)return!1;let i=a.startIndex;if(i==0)return!1;let l=a.parent,c=l.child(i-1);if(c.type!=t)return!1;if(r){let d=c.lastChild&&c.lastChild.type==l.type,u=Ne.from(d?t.create():null),h=new $e(Ne.from(t.create(null,Ne.from(l.type.create(null,u)))),d?3:1,0),f=a.start,m=a.end;r(e.tr.step(new mn(f-(d?3:1),m,f,m,h,1,!0)).scrollIntoView())}return!0}}function r2(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:s}=r,{storedMarks:a}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return n},get doc(){return s},get tr(){return n=r.selection,s=r.doc,a=r.storedMarks,r}}}class n2{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:r,state:n}=this,{view:s}=r,{tr:a}=n,i=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...u)=>{const h=c(...u)(i);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(a),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,r=!0){const{rawCommands:n,editor:s,state:a}=this,{view:i}=s,l=[],c=!!e,d=e||a.tr,u=()=>(!c&&r&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(d),l.every(f=>f===!0)),h={...Object.fromEntries(Object.entries(n).map(([f,m])=>[f,(...g)=>{const y=this.buildProps(d,r),b=m(...g)(y);return l.push(b),h}])),run:u};return h}createCan(e){const{rawCommands:r,state:n}=this,s=!1,a=e||n.tr,i=this.buildProps(a,s);return{...Object.fromEntries(Object.entries(r).map(([c,d])=>[c,(...u)=>d(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(a,s)}}buildProps(e,r=!0){const{rawCommands:n,editor:s,state:a}=this,{view:i}=s,l={tr:e,editor:s,view:i,state:r2({state:a,transaction:e}),dispatch:r?()=>{}:void 0,chain:()=>this.createChain(e,r),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...u)=>d(...u)(l)]))}};return l}}class q2e{constructor(){this.callbacks={}}on(e,r){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(r),this}emit(e,...r){const n=this.callbacks[e];return n&&n.forEach(s=>s.apply(this,r)),this}off(e,r){const n=this.callbacks[e];return n&&(r?this.callbacks[e]=n.filter(s=>s!==r):delete this.callbacks[e]),this}once(e,r){const n=(...s)=>{this.off(e,n),r.apply(this,s)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function nt(t,e,r){return t.config[e]===void 0&&t.parent?nt(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?nt(t.parent,e,r):null}):t.config[e]}function s2(t){const e=t.filter(s=>s.type==="extension"),r=t.filter(s=>s.type==="node"),n=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function yV(t){const e=[],{nodeExtensions:r,markExtensions:n}=s2(t),s=[...r,...n],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const l={name:i.name,options:i.options,storage:i.storage,extensions:s},c=nt(i,"addGlobalAttributes",l);if(!c)return;c().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([f,m])=>{e.push({type:h,name:f,attribute:{...a,...m}})})})})}),s.forEach(i=>{const l={name:i.name,options:i.options,storage:i.storage},c=nt(i,"addAttributes",l);if(!c)return;const d=c();Object.entries(d).forEach(([u,h])=>{const f={...a,...h};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:i.name,name:u,attribute:f})})}),e}function Zn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ka(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([s,a])=>{if(!n[s]){n[s]=a;return}if(s==="class"){const l=a?String(a).split(" "):[],c=n[s]?n[s].split(" "):[],d=l.filter(u=>!c.includes(u));n[s]=[...c,...d].join(" ")}else if(s==="style"){const l=a?a.split(";").map(u=>u.trim()).filter(Boolean):[],c=n[s]?n[s].split(";").map(u=>u.trim()).filter(Boolean):[],d=new Map;c.forEach(u=>{const[h,f]=u.split(":").map(m=>m.trim());d.set(h,f)}),l.forEach(u=>{const[h,f]=u.split(":").map(m=>m.trim());d.set(h,f)}),n[s]=Array.from(d.entries()).map(([u,h])=>`${u}: ${h}`).join("; ")}else n[s]=a}),n},{})}function Wb(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>Ka(r,n),{})}function vV(t){return typeof t=="function"}function Ft(t,e=void 0,...r){return vV(t)?e?t.bind(e)(...r):t(...r):t}function G2e(t={}){return Object.keys(t).length===0&&t.constructor===Object}function K2e(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function P8(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const s=e.reduce((a,i)=>{const l=i.attribute.parseHTML?i.attribute.parseHTML(r):K2e(r.getAttribute(i.name));return l==null?a:{...a,[i.name]:l}},{});return{...n,...s}}}}function I8(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&G2e(r)?!1:r!=null))}function bV(t,e){var r;const n=yV(t),{nodeExtensions:s,markExtensions:a}=s2(t),i=(r=s.find(d=>nt(d,"topNode")))===null||r===void 0?void 0:r.name,l=Object.fromEntries(s.map(d=>{const u=n.filter(b=>b.type===d.name),h={name:d.name,options:d.options,storage:d.storage,editor:e},f=t.reduce((b,v)=>{const w=nt(v,"extendNodeSchema",h);return{...b,...w?w(d):{}}},{}),m=I8({...f,content:Ft(nt(d,"content",h)),marks:Ft(nt(d,"marks",h)),group:Ft(nt(d,"group",h)),inline:Ft(nt(d,"inline",h)),atom:Ft(nt(d,"atom",h)),selectable:Ft(nt(d,"selectable",h)),draggable:Ft(nt(d,"draggable",h)),code:Ft(nt(d,"code",h)),whitespace:Ft(nt(d,"whitespace",h)),linebreakReplacement:Ft(nt(d,"linebreakReplacement",h)),defining:Ft(nt(d,"defining",h)),isolating:Ft(nt(d,"isolating",h)),attrs:Object.fromEntries(u.map(b=>{var v;return[b.name,{default:(v=b==null?void 0:b.attribute)===null||v===void 0?void 0:v.default}]}))}),p=Ft(nt(d,"parseHTML",h));p&&(m.parseDOM=p.map(b=>P8(b,u)));const g=nt(d,"renderHTML",h);g&&(m.toDOM=b=>g({node:b,HTMLAttributes:Wb(b,u)}));const y=nt(d,"renderText",h);return y&&(m.toText=y),[d.name,m]})),c=Object.fromEntries(a.map(d=>{const u=n.filter(y=>y.type===d.name),h={name:d.name,options:d.options,storage:d.storage,editor:e},f=t.reduce((y,b)=>{const v=nt(b,"extendMarkSchema",h);return{...y,...v?v(d):{}}},{}),m=I8({...f,inclusive:Ft(nt(d,"inclusive",h)),excludes:Ft(nt(d,"excludes",h)),group:Ft(nt(d,"group",h)),spanning:Ft(nt(d,"spanning",h)),code:Ft(nt(d,"code",h)),attrs:Object.fromEntries(u.map(y=>{var b;return[y.name,{default:(b=y==null?void 0:y.attribute)===null||b===void 0?void 0:b.default}]}))}),p=Ft(nt(d,"parseHTML",h));p&&(m.parseDOM=p.map(y=>P8(y,u)));const g=nt(d,"renderHTML",h);return g&&(m.toDOM=y=>g({mark:y,HTMLAttributes:Wb(y,u)})),[d.name,m]}));return new oU({topNode:i,nodes:l,marks:c})}function AN(t,e){return e.nodes[t]||e.marks[t]||null}function D8(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function y3(t,e){const r=fc.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(r),s.innerHTML}const Z2e=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(s,a,i,l)=>{var c,d;const u=((d=(c=s.type.spec).toText)===null||d===void 0?void 0:d.call(c,{node:s,pos:a,parent:i,index:l}))||s.textContent||"%leaf%";r+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,n-a))}),r};function v3(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Fd{constructor(e){this.find=e.find,this.handler=e.handler}}const Y2e=(t,e)=>{if(v3(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function f1(t){var e;const{editor:r,from:n,to:s,text:a,rules:i,plugin:l}=t,{view:c}=r;if(c.composing)return!1;const d=c.state.doc.resolve(n);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const h=Z2e(d)+a;return i.forEach(f=>{if(u)return;const m=Y2e(h,f.find);if(!m)return;const p=c.state.tr,g=r2({state:c.state,transaction:p}),y={from:n-(m[0].length-a.length),to:s},{commands:b,chain:v,can:w}=new n2({editor:r,state:g});f.handler({state:g,range:y,match:m,commands:b,chain:v,can:w})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:n,to:s,text:a}),c.dispatch(p),u=!0)}),u}function X2e(t){const{editor:e,rules:r}=t,n=new Dt({state:{init(){return null},apply(s,a,i){const l=s.getMeta(n);if(l)return l;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:u}=c;typeof u=="string"?u=u:u=y3(Ne.from(u),i.schema);const{from:h}=c,f=h+u.length;f1({editor:e,from:h,to:f,text:u,rules:r,plugin:n})}),s.selectionSet||s.docChanged?null:a}},props:{handleTextInput(s,a,i,l){return f1({editor:e,from:a,to:i,text:l,rules:r,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:a}=s.state.selection;a&&f1({editor:e,from:a.pos,to:a.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(s,a){if(a.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?f1({editor:e,from:i.pos,to:i.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function J2e(t){return Object.prototype.toString.call(t).slice(8,-1)}function m1(t){return J2e(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function a2(t,e){const r={...t};return m1(t)&&m1(e)&&Object.keys(e).forEach(n=>{m1(e[n])&&m1(t[n])?r[n]=a2(t[n],e[n]):r[n]=e[n]}),r}class ms{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ft(nt(this,"addOptions",{name:this.name}))),this.storage=Ft(nt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ms(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>a2(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new ms(e);return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=Ft(nt(r,"addOptions",{name:r.name})),r.storage=Ft(nt(r,"addStorage",{name:r.name,options:r.options})),r}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(d=>(d==null?void 0:d.type.name)===r.name))return!1;const c=i.find(d=>(d==null?void 0:d.type.name)===r.name);return c&&n.removeStoredMark(c),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}}function Q2e(t){return typeof t=="number"}class eCe{constructor(e){this.find=e.find,this.handler=e.handler}}const tCe=(t,e,r)=>{if(v3(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(s=>{const a=[s.text];return a.index=s.index,a.input=t,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(s.replaceWith)),a}):[]};function rCe(t){const{editor:e,state:r,from:n,to:s,rule:a,pasteEvent:i,dropEvent:l}=t,{commands:c,chain:d,can:u}=new n2({editor:e,state:r}),h=[];return r.doc.nodesBetween(n,s,(m,p)=>{if(!m.isTextblock||m.type.spec.code)return;const g=Math.max(n,p),y=Math.min(s,p+m.content.size),b=m.textBetween(g-p,y-p,void 0,"");tCe(b,a.find,i).forEach(w=>{if(w.index===void 0)return;const k=g+w.index+1,N=k+w[0].length,S={from:r.tr.mapping.map(k),to:r.tr.mapping.map(N)},C=a.handler({state:r,range:S,match:w,commands:c,chain:d,can:u,pasteEvent:i,dropEvent:l});h.push(C)})}),h.every(m=>m!==null)}let p1=null;const nCe=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)===null||e===void 0||e.setData("text/html",t),r};function sCe(t){const{editor:e,rules:r}=t;let n=null,s=!1,a=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:u,from:h,to:f,rule:m,pasteEvt:p})=>{const g=u.tr,y=r2({state:u,transaction:g});if(!(!rCe({editor:e,state:y,from:Math.max(h-1,0),to:f.b-1,rule:m,pasteEvent:p,dropEvent:l})||!g.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return r.map(u=>new Dt({view(h){const f=p=>{var g;n=!((g=h.dom.parentElement)===null||g===void 0)&&g.contains(p.target)?h.dom.parentElement:null,n&&(p1=e)},m=()=>{p1&&(p1=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(h,f)=>{if(a=n===h.dom.parentElement,l=f,!a){const m=p1;m!=null&&m.isEditable&&setTimeout(()=>{const p=m.state.selection;p&&m.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(h,f)=>{var m;const p=(m=f.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return i=f,s=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,f,m)=>{const p=h[0],g=p.getMeta("uiEvent")==="paste"&&!s,y=p.getMeta("uiEvent")==="drop"&&!a,b=p.getMeta("applyPasteRules"),v=!!b;if(!g&&!y&&!v)return;if(v){let{text:N}=b;typeof N=="string"?N=N:N=y3(Ne.from(N),m.schema);const{from:S}=b,C=S+N.length,E=nCe(N);return c({rule:u,state:m,from:S,to:{b:C},pasteEvt:E})}const w=f.doc.content.findDiffStart(m.doc.content),k=f.doc.content.findDiffEnd(m.doc.content);if(!(!Q2e(w)||!k||w===k.b))return c({rule:u,state:m,from:w,to:k,pasteEvt:i})}}))}function aCe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}class Pu{constructor(e,r){this.splittableMarks=[],this.editor=r,this.extensions=Pu.resolve(e),this.schema=bV(this.extensions,r),this.setupExtensions()}static resolve(e){const r=Pu.sort(Pu.flatten(e)),n=aCe(r.map(s=>s.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),r}static flatten(e){return e.map(r=>{const n={name:r.name,options:r.options,storage:r.storage},s=nt(r,"addExtensions",n);return s?[r,...this.flatten(s())]:r}).flat(10)}static sort(e){return e.sort((n,s)=>{const a=nt(n,"priority")||100,i=nt(s,"priority")||100;return a>i?-1:a<i?1:0})}get commands(){return this.extensions.reduce((e,r)=>{const n={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:AN(r.name,this.schema)},s=nt(r,"addCommands",n);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,r=Pu.sort([...this.extensions].reverse()),n=[],s=[],a=r.map(i=>{const l={name:i.name,options:i.options,storage:i.storage,editor:e,type:AN(i.name,this.schema)},c=[],d=nt(i,"addKeyboardShortcuts",l);let u={};if(i.type==="mark"&&nt(i,"exitable",l)&&(u.ArrowRight=()=>ms.handleExit({editor:e,mark:i})),d){const g=Object.fromEntries(Object.entries(d()).map(([y,b])=>[y,()=>b({editor:e})]));u={...u,...g}}const h=S2e(u);c.push(h);const f=nt(i,"addInputRules",l);D8(i,e.options.enableInputRules)&&f&&n.push(...f());const m=nt(i,"addPasteRules",l);D8(i,e.options.enablePasteRules)&&m&&s.push(...m());const p=nt(i,"addProseMirrorPlugins",l);if(p){const g=p();c.push(...g)}return c}).flat();return[X2e({editor:e,rules:n}),...sCe({editor:e,rules:s}),...a]}get attributes(){return yV(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:r}=s2(this.extensions);return Object.fromEntries(r.filter(n=>!!nt(n,"addNodeView")).map(n=>{const s=this.attributes.filter(c=>c.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:e,type:Zn(n.name,this.schema)},i=nt(n,"addNodeView",a);if(!i)return[];const l=(c,d,u,h,f)=>{const m=Wb(c,s);return i()({node:c,view:d,getPos:u,decorations:h,innerDecorations:f,editor:e,extension:n,HTMLAttributes:m})};return[n.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var r;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:AN(e.name,this.schema)};e.type==="mark"&&(!((r=Ft(nt(e,"keepOnSplit",n)))!==null&&r!==void 0)||r)&&this.splittableMarks.push(e.name);const s=nt(e,"onBeforeCreate",n),a=nt(e,"onCreate",n),i=nt(e,"onUpdate",n),l=nt(e,"onSelectionUpdate",n),c=nt(e,"onTransaction",n),d=nt(e,"onFocus",n),u=nt(e,"onBlur",n),h=nt(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),a&&this.editor.on("create",a),i&&this.editor.on("update",i),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),u&&this.editor.on("blur",u),h&&this.editor.on("destroy",h)})}}class Tr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ft(nt(this,"addOptions",{name:this.name}))),this.storage=Ft(nt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Tr(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>a2(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new Tr({...this.config,...e});return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=Ft(nt(r,"addOptions",{name:r.name})),r.storage=Ft(nt(r,"addStorage",{name:r.name,options:r.options})),r}}function wV(t,e,r){const{from:n,to:s}=e,{blockSeparator:a=`

`,textSerializers:i={}}=r||{};let l="";return t.nodesBetween(n,s,(c,d,u,h)=>{var f;c.isBlock&&d>n&&(l+=a);const m=i==null?void 0:i[c.type.name];if(m)return u&&(l+=m({node:c,pos:d,parent:u,index:h,range:e})),!1;c.isText&&(l+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(n,d)-d,s-d))}),l}function kV(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}const CV=Tr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dt({key:new Qt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:s}=e,{ranges:a}=s,i=Math.min(...a.map(u=>u.$from.pos)),l=Math.max(...a.map(u=>u.$to.pos)),c=kV(r);return wV(n,{from:i,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),iCe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())===null||r===void 0||r.removeAllRanges())}),!0),oCe=(t=!1)=>({commands:e})=>e.setContent("",t),lCe=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:s}=n;return r&&s.forEach(({$from:a,$to:i})=>{t.doc.nodesBetween(a.pos,i.pos,(l,c)=>{if(l.type.isText)return;const{doc:d,mapping:u}=e,h=d.resolve(u.map(c)),f=d.resolve(u.map(c+l.nodeSize)),m=h.blockRange(f);if(!m)return;const p=Sp(m);if(l.type.isTextblock){const{defaultType:g}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(m.start,g)}(p||p===0)&&e.lift(m,p)})}),!0},cCe=t=>e=>t(e),dCe=()=>({state:t,dispatch:e})=>mV(t,e),uCe=(t,e)=>({editor:r,tr:n})=>{const{state:s}=r,a=s.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const i=n.mapping.map(e);return n.insert(i,a.content),n.setSelection(new Je(n.doc.resolve(Math.max(i-1,0)))),!0},hCe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===n.type){if(e){const l=s.before(a),c=s.after(a);t.delete(l,c).scrollIntoView()}return!0}return!1},fCe=t=>({tr:e,state:r,dispatch:n})=>{const s=Zn(t,r.schema),a=e.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===s){if(n){const c=a.before(i),d=a.after(i);e.delete(c,d).scrollIntoView()}return!0}return!1},mCe=t=>({tr:e,dispatch:r})=>{const{from:n,to:s}=t;return r&&e.delete(n,s),!0},pCe=()=>({state:t,dispatch:e})=>f3(t,e),gCe=()=>({commands:t})=>t.keyboardShortcut("Enter"),xCe=()=>({state:t,dispatch:e})=>M2e(t,e);function qb(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>r.strict?e[s]===t[s]:v3(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function NV(t,e,r={}){return t.find(n=>n.type===e&&qb(Object.fromEntries(Object.keys(r).map(s=>[s,n.attrs[s]])),r))}function L8(t,e,r={}){return!!NV(t,e,r)}function rx(t,e,r){var n;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(r=r||((n=s.node.marks[0])===null||n===void 0?void 0:n.attrs),!NV([...s.node.marks],e,r)))return;let i=s.index,l=t.start()+s.offset,c=i+1,d=l+s.node.nodeSize;for(;i>0&&L8([...t.parent.child(i-1).marks],e,r);)i-=1,l-=t.parent.child(i).nodeSize;for(;c<t.parent.childCount&&L8([...t.parent.child(c).marks],e,r);)d+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:d}}function ru(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const yCe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const a=ru(t,n.schema),{doc:i,selection:l}=r,{$from:c,from:d,to:u}=l;if(s){const h=rx(c,a,e);if(h&&h.from<=d&&h.to>=u){const f=Je.create(i,h.from,h.to);r.setSelection(f)}}return!0},vCe=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function i2(t){return t instanceof Je}function Dl(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function SV(t,e=null){if(!e)return null;const r=gt.atStart(t),n=gt.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const s=r.from,a=n.to;return e==="all"?Je.create(t,Dl(0,s,a),Dl(t.content.size,s,a)):Je.create(t,Dl(e,s,a),Dl(e,s,a))}function EV(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function o2(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const bCe=(t=null,e={})=>({editor:r,view:n,tr:s,dispatch:a})=>{e={scrollIntoView:!0,...e};const i=()=>{(o2()||EV())&&n.dom.focus(),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(a&&t===null&&!i2(r.state.selection))return i(),!0;const l=SV(s.doc,t)||r.state.selection,c=r.state.selection.eq(l);return a&&(c||s.setSelection(l),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},wCe=(t,e)=>r=>t.every((n,s)=>e(n,{...r,index:s})),kCe=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),jV=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&jV(n)}return t};function g1(t){const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return jV(r)}function nx(t,e,r){if(t instanceof Wl||t instanceof Ne)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,s=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return Ne.fromArray(t.map(l=>e.nodeFromJSON(l)));const i=e.nodeFromJSON(t);return r.errorOnInvalidContent&&i.check(),i}catch(a){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),nx("",e,r)}if(s){if(r.errorOnInvalidContent){let i=!1,l="";const c=new oU({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(i=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(r.slice?Wo.fromSchema(c).parseSlice(g1(t),r.parseOptions):Wo.fromSchema(c).parse(g1(t),r.parseOptions),r.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const a=Wo.fromSchema(e);return r.slice?a.parseSlice(g1(t),r.parseOptions).content:a.parse(g1(t),r.parseOptions)}return nx("",e,r)}function TV(t,e,r){const n=t.steps.length-1;if(n<e)return;const s=t.steps[n];if(!(s instanceof wn||s instanceof mn))return;const a=t.mapping.maps[n];let i=0;a.forEach((l,c,d,u)=>{i===0&&(i=u)}),t.setSelection(gt.near(t.doc.resolve(i),r))}const CCe=t=>!("type"in t),NCe=(t,e,r)=>({tr:n,dispatch:s,editor:a})=>{var i;if(s){r={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let l;const c=y=>{a.emit("contentError",{editor:a,error:y,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{nx(e,a.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(y){c(y)}try{l=nx(e,a.schema,{parseOptions:d,errorOnInvalidContent:(i=r.errorOnInvalidContent)!==null&&i!==void 0?i:a.options.enableContentCheck})}catch(y){return c(y),!1}let{from:u,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,m=!0;if((CCe(l)?l:[l]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,m=m?y.isBlock:!1}),u===h&&m){const{parent:y}=n.doc.resolve(u);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(u-=1,h+=1)}let g;if(f){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof Ne){let y="";e.forEach(b=>{b.text&&(y+=b.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;n.insertText(g,u,h)}else g=l,n.replaceWith(u,h,g);r.updateSelection&&TV(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:g}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:g})}return!0},SCe=()=>({state:t,dispatch:e})=>T2e(t,e),ECe=()=>({state:t,dispatch:e})=>_2e(t,e),jCe=()=>({state:t,dispatch:e})=>oV(t,e),TCe=()=>({state:t,dispatch:e})=>uV(t,e),_Ce=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Yk(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},ACe=()=>({state:t,dispatch:e,tr:r})=>{try{const n=Yk(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},MCe=()=>({state:t,dispatch:e})=>E2e(t,e),OCe=()=>({state:t,dispatch:e})=>j2e(t,e);function _V(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function RCe(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,s,a,i;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))o2()||_V()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return n&&(r=`Alt-${r}`),s&&(r=`Ctrl-${r}`),i&&(r=`Meta-${r}`),a&&(r=`Shift-${r}`),r}const PCe=t=>({editor:e,view:r,tr:n,dispatch:s})=>{const a=RCe(t).split(/-(?!$)/),i=a.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{r.someProp("handleKeyDown",d=>d(r,l))});return c==null||c.steps.forEach(d=>{const u=d.map(n.mapping);u&&s&&n.maybeStep(u)}),!0};function sx(t,e,r={}){const{from:n,to:s,empty:a}=t.selection,i=e?Zn(e,t.schema):null,l=[];t.doc.nodesBetween(n,s,(h,f)=>{if(h.isText)return;const m=Math.max(n,f),p=Math.min(s,f+h.nodeSize);l.push({node:h,from:m,to:p})});const c=s-n,d=l.filter(h=>i?i.name===h.node.type.name:!0).filter(h=>qb(h.node.attrs,r,{strict:!1}));return a?!!d.length:d.reduce((h,f)=>h+f.to-f.from,0)>=c}const ICe=(t,e={})=>({state:r,dispatch:n})=>{const s=Zn(t,r.schema);return sx(r,s,e)?A2e(r,n):!1},DCe=()=>({state:t,dispatch:e})=>pV(t,e),LCe=t=>({state:e,dispatch:r})=>{const n=Zn(t,e.schema);return U2e(n)(e,r)},$Ce=()=>({state:t,dispatch:e})=>fV(t,e);function l2(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function $8(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,s)=>(r.includes(s)||(n[s]=t[s]),n),{})}const FCe=(t,e)=>({tr:r,state:n,dispatch:s})=>{let a=null,i=null;const l=l2(typeof t=="string"?t:t.name,n.schema);return l?(l==="node"&&(a=Zn(t,n.schema)),l==="mark"&&(i=ru(t,n.schema)),s&&r.selection.ranges.forEach(c=>{n.doc.nodesBetween(c.$from.pos,c.$to.pos,(d,u)=>{a&&a===d.type&&r.setNodeMarkup(u,void 0,$8(d.attrs,e)),i&&d.marks.length&&d.marks.forEach(h=>{i===h.type&&r.addMark(u,u+d.nodeSize,i.create($8(h.attrs,e)))})})}),!0):!1},BCe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),zCe=()=>({tr:t,dispatch:e})=>{if(e){const r=new ya(t.doc);t.setSelection(r)}return!0},UCe=()=>({state:t,dispatch:e})=>cV(t,e),VCe=()=>({state:t,dispatch:e})=>hV(t,e),HCe=()=>({state:t,dispatch:e})=>P2e(t,e),WCe=()=>({state:t,dispatch:e})=>L2e(t,e),qCe=()=>({state:t,dispatch:e})=>D2e(t,e);function Gb(t,e,r={},n={}){return nx(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}const GCe=(t,e=!1,r={},n={})=>({editor:s,tr:a,dispatch:i,commands:l})=>{var c,d;const{doc:u}=a;if(r.preserveWhitespace!=="full"){const h=Gb(t,s.schema,r,{errorOnInvalidContent:(c=n.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck});return i&&a.replaceWith(0,u.content.size,h).setMeta("preventUpdate",!e),!0}return i&&a.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:(d=n.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck})};function AV(t,e){const r=ru(e,t.schema),{from:n,to:s,empty:a}=t.selection,i=[];a?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,s,c=>{i.push(...c.marks)});const l=i.find(c=>c.type.name===r.name);return l?{...l.attrs}:{}}function b3(t,e){const r=new e3(t);return e.forEach(n=>{n.steps.forEach(s=>{r.step(s)})}),r}function KCe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function F8(t,e){const r=[];return t.descendants((n,s)=>{e(n)&&r.push({node:n,pos:s})}),r}function MV(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(s,a)=>{r(s)&&n.push({node:s,pos:a})}),n}function ZCe(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function c2(t){return e=>ZCe(e.$from,t)}function YCe(t,e){const r=Pu.resolve(t);return bV(r,e)}function XCe(t,e){const r={from:0,to:t.content.size};return wV(t,r,e)}function JCe(t,e){const r=Zn(e,t.schema),{from:n,to:s}=t.selection,a=[];t.doc.nodesBetween(n,s,l=>{a.push(l)});const i=a.reverse().find(l=>l.type.name===r.name);return i?{...i.attrs}:{}}function OV(t,e){const r=l2(typeof e=="string"?e:e.name,t.schema);return r==="node"?JCe(t,e):r==="mark"?AV(t,e):{}}function QCe(t,e=JSON.stringify){const r={};return t.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(r,s)?!1:r[s]=!0})}function eNe(t){const e=QCe(t);return e.length===1?e:e.filter((r,n)=>!e.filter((a,i)=>i!==n).some(a=>r.oldRange.from>=a.oldRange.from&&r.oldRange.to<=a.oldRange.to&&r.newRange.from>=a.newRange.from&&r.newRange.to<=a.newRange.to))}function RV(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((s,a)=>{const i=[];if(s.ranges.length)s.forEach((l,c)=>{i.push({from:l,to:c})});else{const{from:l,to:c}=r[a];if(l===void 0||c===void 0)return;i.push({from:l,to:c})}i.forEach(({from:l,to:c})=>{const d=e.slice(a).map(l,-1),u=e.slice(a).map(c),h=e.invert().map(d,-1),f=e.invert().map(u);n.push({oldRange:{from:h,to:f},newRange:{from:d,to:u}})})}),eNe(n)}function w3(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(s=>{const a=r.resolve(t),i=rx(a,s.type);i&&n.push({mark:s,...i})}):r.nodesBetween(t,e,(s,a)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(i=>({from:a,to:a+s.nodeSize,mark:i})))}),n}function uv(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const s=t.find(a=>a.type===e&&a.name===n);return s?s.attribute.keepOnSplit:!1}))}function Hj(t,e,r={}){const{empty:n,ranges:s}=t.selection,a=e?ru(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>a?a.name===h.type.name:!0).find(h=>qb(h.attrs,r,{strict:!1}));let i=0;const l=[];if(s.forEach(({$from:h,$to:f})=>{const m=h.pos,p=f.pos;t.doc.nodesBetween(m,p,(g,y)=>{if(!g.isText&&!g.marks.length)return;const b=Math.max(m,y),v=Math.min(p,y+g.nodeSize),w=v-b;i+=w,l.push(...g.marks.map(k=>({mark:k,from:b,to:v})))})}),i===0)return!1;const c=l.filter(h=>a?a.name===h.mark.type.name:!0).filter(h=>qb(h.mark.attrs,r,{strict:!1})).reduce((h,f)=>h+f.to-f.from,0),d=l.filter(h=>a?h.mark.type!==a&&h.mark.type.excludes(a):!0).reduce((h,f)=>h+f.to-f.from,0);return(c>0?c+d:c)>=i}function tNe(t,e,r={}){if(!e)return sx(t,null,r)||Hj(t,null,r);const n=l2(e,t.schema);return n==="node"?sx(t,e,r):n==="mark"?Hj(t,e,r):!1}function B8(t,e){const{nodeExtensions:r}=s2(e),n=r.find(i=>i.name===t);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},a=Ft(nt(n,"group",s));return typeof a!="string"?!1:a.split(" ").includes("list")}function k3(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!==null&&n!==void 0?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(a=>{s!==!1&&(k3(a,{ignoreWhitespace:r,checkChildren:e})||(s=!1))}),s}return!1}function Wj(t){return t instanceof it}function Kb(t,e,r){const s=t.state.doc.content.size,a=Dl(e,0,s),i=Dl(r,0,s),l=t.coordsAtPos(a),c=t.coordsAtPos(i,-1),d=Math.min(l.top,c.top),u=Math.max(l.bottom,c.bottom),h=Math.min(l.left,c.left),f=Math.max(l.right,c.right),m=f-h,p=u-d,b={top:d,bottom:u,left:h,right:f,width:m,height:p,x:h,y:d};return{...b,toJSON:()=>b}}function rNe(t,e,r){var n;const{selection:s}=e;let a=null;if(i2(s)&&(a=s.$cursor),a){const l=(n=t.storedMarks)!==null&&n!==void 0?n:a.marks();return!!r.isInSet(l)||!l.some(c=>c.type.excludes(r))}const{ranges:i}=s;return i.some(({$from:l,$to:c})=>{let d=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(l.pos,c.pos,(u,h,f)=>{if(d)return!1;if(u.isInline){const m=!f||f.type.allowsMarkType(r),p=!!r.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(r));d=m&&p}return!d}),d})}const nNe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const{selection:a}=r,{empty:i,ranges:l}=a,c=ru(t,n.schema);if(s)if(i){const d=AV(n,c);r.addStoredMark(c.create({...d,...e}))}else l.forEach(d=>{const u=d.$from.pos,h=d.$to.pos;n.doc.nodesBetween(u,h,(f,m)=>{const p=Math.max(m,u),g=Math.min(m+f.nodeSize,h);f.marks.find(b=>b.type===c)?f.marks.forEach(b=>{c===b.type&&r.addMark(p,g,c.create({...b.attrs,...e}))}):r.addMark(p,g,c.create(e))})});return rNe(n,r,c)},sNe=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),aNe=(t,e={})=>({state:r,dispatch:n,chain:s})=>{const a=Zn(t,r.schema);let i;return r.selection.$anchor.sameParent(r.selection.$head)&&(i=r.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:l})=>R8(a,{...i,...e})(r)?!0:l.clearNodes()).command(({state:l})=>R8(a,{...i,...e})(l,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},iNe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,s=Dl(t,0,n.content.size),a=it.create(n,s);e.setSelection(a)}return!0},oNe=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:s,to:a}=typeof t=="number"?{from:t,to:t}:t,i=Je.atStart(n).from,l=Je.atEnd(n).to,c=Dl(s,i,l),d=Dl(a,i,l),u=Je.create(n,c,d);e.setSelection(u)}return!0},lNe=t=>({state:e,dispatch:r})=>{const n=Zn(t,e.schema);return W2e(n)(e,r)};function z8(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(n)}}const cNe=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:s})=>{const{selection:a,doc:i}=e,{$from:l,$to:c}=a,d=s.extensionManager.attributes,u=uv(d,l.node().type.name,l.node().attrs);if(a instanceof it&&a.node.isBlock)return!l.parentOffset||!ql(i,l.pos)?!1:(n&&(t&&z8(r,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const h=c.parentOffset===c.parent.content.size,f=l.depth===0?void 0:KCe(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=h&&f?[{type:f,attrs:u}]:void 0,p=ql(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!p&&ql(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,m=f?[{type:f,attrs:u}]:void 0),n){if(p&&(a instanceof Je&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),f&&!h&&!l.parentOffset&&l.parent.type!==f)){const g=e.mapping.map(l.before()),y=e.doc.resolve(g);l.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&z8(r,s.extensionManager.splittableMarks),e.scrollIntoView()}return p},dNe=(t,e={})=>({tr:r,state:n,dispatch:s,editor:a})=>{var i;const l=Zn(t,n.schema),{$from:c,$to:d}=n.selection,u=n.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(d))return!1;const h=c.node(-1);if(h.type!==l)return!1;const f=a.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let b=Ne.empty;const v=c.index(-1)?1:c.index(-2)?2:3;for(let E=c.depth-v;E>=c.depth-3;E-=1)b=Ne.from(c.node(E).copy(b));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,k={...uv(f,c.node().type.name,c.node().attrs),...e},N=((i=l.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(k))||void 0;b=b.append(Ne.from(l.createAndFill(null,N)||void 0));const S=c.before(c.depth-(v-1));r.replace(S,c.after(-w),new $e(b,4-v,0));let C=-1;r.doc.nodesBetween(S,r.doc.content.size,(E,T)=>{if(C>-1)return!1;E.isTextblock&&E.content.size===0&&(C=T+1)}),C>-1&&r.setSelection(Je.near(r.doc.resolve(C))),r.scrollIntoView()}return!0}const m=d.pos===c.end()?h.contentMatchAt(0).defaultType:null,p={...uv(f,h.type.name,h.attrs),...e},g={...uv(f,c.node().type.name,c.node().attrs),...e};r.delete(c.pos,d.pos);const y=m?[{type:l,attrs:p},{type:m,attrs:g}]:[{type:l,attrs:p}];if(!ql(r.doc,c.pos,2))return!1;if(s){const{selection:b,storedMarks:v}=n,{splittableMarks:w}=a.extensionManager,k=v||b.$to.parentOffset&&b.$from.marks();if(r.split(c.pos,2,y).scrollIntoView(),!k||!s)return!0;const N=k.filter(S=>w.includes(S.type.name));r.ensureMarks(N)}return!0},MN=(t,e)=>{const r=c2(i=>i.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&zh(t.doc,r.pos)&&t.join(r.pos),!0},ON=(t,e)=>{const r=c2(i=>i.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&zh(t.doc,n)&&t.join(n),!0},uNe=(t,e,r,n={})=>({editor:s,tr:a,state:i,dispatch:l,chain:c,commands:d,can:u})=>{const{extensions:h,splittableMarks:f}=s.extensionManager,m=Zn(t,i.schema),p=Zn(e,i.schema),{selection:g,storedMarks:y}=i,{$from:b,$to:v}=g,w=b.blockRange(v),k=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const N=c2(S=>B8(S.type.name,h))(g);if(w.depth>=1&&N&&w.depth-N.depth<=1){if(N.node.type===m)return d.liftListItem(p);if(B8(N.node.type.name,h)&&m.validContent(N.node.content)&&l)return c().command(()=>(a.setNodeMarkup(N.pos,m),!0)).command(()=>MN(a,m)).command(()=>ON(a,m)).run()}return!r||!k||!l?c().command(()=>u().wrapInList(m,n)?!0:d.clearNodes()).wrapInList(m,n).command(()=>MN(a,m)).command(()=>ON(a,m)).run():c().command(()=>{const S=u().wrapInList(m,n),C=k.filter(E=>f.includes(E.type.name));return a.ensureMarks(C),S?!0:d.clearNodes()}).wrapInList(m,n).command(()=>MN(a,m)).command(()=>ON(a,m)).run()},hNe=(t,e={},r={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:a=!1}=r,i=ru(t,n.schema);return Hj(n,i,e)?s.unsetMark(i,{extendEmptyMarkRange:a}):s.setMark(i,e)},fNe=(t,e,r={})=>({state:n,commands:s})=>{const a=Zn(t,n.schema),i=Zn(e,n.schema),l=sx(n,a,r);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l?s.setNode(i,c):s.setNode(a,{...c,...r})},mNe=(t,e={})=>({state:r,commands:n})=>{const s=Zn(t,r.schema);return sx(r,s,e)?n.lift(s):n.wrapIn(s,e)},pNe=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const s=r[n];let a;if(s.spec.isInputRules&&(a=s.getState(t))){if(e){const i=t.tr,l=a.transform;for(let c=l.steps.length-1;c>=0;c-=1)i.step(l.steps[c].invert(l.docs[c]));if(a.text){const c=i.doc.resolve(a.from).marks();i.replaceWith(a.from,a.to,t.schema.text(a.text,c))}else i.delete(a.from,a.to)}return!0}}return!1},gNe=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:s}=r;return n||e&&s.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},xNe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{var a;const{extendEmptyMarkRange:i=!1}=e,{selection:l}=r,c=ru(t,n.schema),{$from:d,empty:u,ranges:h}=l;if(!s)return!0;if(u&&i){let{from:f,to:m}=l;const p=(a=d.marks().find(y=>y.type===c))===null||a===void 0?void 0:a.attrs,g=rx(d,c,p);g&&(f=g.from,m=g.to),r.removeMark(f,m,c)}else h.forEach(f=>{r.removeMark(f.$from.pos,f.$to.pos,c)});return r.removeStoredMark(c),!0},yNe=(t,e={})=>({tr:r,state:n,dispatch:s})=>{let a=null,i=null;const l=l2(typeof t=="string"?t:t.name,n.schema);return l?(l==="node"&&(a=Zn(t,n.schema)),l==="mark"&&(i=ru(t,n.schema)),s&&r.selection.ranges.forEach(c=>{const d=c.$from.pos,u=c.$to.pos;let h,f,m,p;r.selection.empty?n.doc.nodesBetween(d,u,(g,y)=>{a&&a===g.type&&(m=Math.max(y,d),p=Math.min(y+g.nodeSize,u),h=y,f=g)}):n.doc.nodesBetween(d,u,(g,y)=>{y<d&&a&&a===g.type&&(m=Math.max(y,d),p=Math.min(y+g.nodeSize,u),h=y,f=g),y>=d&&y<=u&&(a&&a===g.type&&r.setNodeMarkup(y,void 0,{...g.attrs,...e}),i&&g.marks.length&&g.marks.forEach(b=>{if(i===b.type){const v=Math.max(y,d),w=Math.min(y+g.nodeSize,u);r.addMark(v,w,i.create({...b.attrs,...e}))}}))}),f&&(h!==void 0&&r.setNodeMarkup(h,void 0,{...f.attrs,...e}),i&&f.marks.length&&f.marks.forEach(g=>{i===g.type&&r.addMark(m,p,i.create({...g.attrs,...e}))}))}),!0):!1},vNe=(t,e={})=>({state:r,dispatch:n})=>{const s=Zn(t,r.schema);return $2e(s,e)(r,n)},bNe=(t,e={})=>({state:r,dispatch:n})=>{const s=Zn(t,r.schema);return F2e(s,e)(r,n)};var wNe=Object.freeze({__proto__:null,blur:iCe,clearContent:oCe,clearNodes:lCe,command:cCe,createParagraphNear:dCe,cut:uCe,deleteCurrentNode:hCe,deleteNode:fCe,deleteRange:mCe,deleteSelection:pCe,enter:gCe,exitCode:xCe,extendMarkRange:yCe,first:vCe,focus:bCe,forEach:wCe,insertContent:kCe,insertContentAt:NCe,joinBackward:jCe,joinDown:ECe,joinForward:TCe,joinItemBackward:_Ce,joinItemForward:ACe,joinTextblockBackward:MCe,joinTextblockForward:OCe,joinUp:SCe,keyboardShortcut:PCe,lift:ICe,liftEmptyBlock:DCe,liftListItem:LCe,newlineInCode:$Ce,resetAttributes:FCe,scrollIntoView:BCe,selectAll:zCe,selectNodeBackward:UCe,selectNodeForward:VCe,selectParentNode:HCe,selectTextblockEnd:WCe,selectTextblockStart:qCe,setContent:GCe,setMark:nNe,setMeta:sNe,setNode:aNe,setNodeSelection:iNe,setTextSelection:oNe,sinkListItem:lNe,splitBlock:cNe,splitListItem:dNe,toggleList:uNe,toggleMark:hNe,toggleNode:fNe,toggleWrap:mNe,undoInputRule:pNe,unsetAllMarks:gNe,unsetMark:xNe,updateAttributes:yNe,wrapIn:vNe,wrapInList:bNe});const PV=Tr.create({name:"commands",addCommands(){return{...wNe}}}),IV=Tr.create({name:"drop",addProseMirrorPlugins(){return[new Dt({key:new Qt("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),DV=Tr.create({name:"editable",addProseMirrorPlugins(){return[new Dt({key:new Qt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),LV=new Qt("focusEvents"),$V=Tr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Dt({key:LV,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),FV=Tr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:u,$anchor:h}=c,{pos:f,parent:m}=h,p=h.parent.isTextblock&&f>0?l.doc.resolve(f-1):h,g=p.parent.type.spec.isolating,y=h.pos-h.parentOffset,b=g&&p.parent.childCount===1?y===h.pos:gt.atStart(d).from===f;return!u||!m.type.isTextblock||m.textContent.length||!b||b&&h.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},a={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return o2()||_V()?a:s},addProseMirrorPlugins(){return[new Dt({key:new Qt("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(g=>g.getMeta("composition")))return;const n=t.some(g=>g.docChanged)&&!e.doc.eq(r.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!n||s)return;const{empty:a,from:i,to:l}=e.selection,c=gt.atStart(e.doc).from,d=gt.atEnd(e.doc).to;if(a||!(i===c&&l===d)||!k3(r.doc))return;const f=r.tr,m=r2({state:r,transaction:f}),{commands:p}=new n2({editor:this.editor,state:m});if(p.clearNodes(),!!f.steps.length)return f}})]}}),BV=Tr.create({name:"paste",addProseMirrorPlugins(){return[new Dt({key:new Qt("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),zV=Tr.create({name:"tabindex",addProseMirrorPlugins(){return[new Dt({key:new Qt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var g0=Object.freeze({__proto__:null,ClipboardTextSerializer:CV,Commands:PV,Drop:IV,Editable:DV,FocusEvents:$V,Keymap:FV,Paste:BV,Tabindex:zV,focusEventsPluginKey:LV});class wu{get name(){return this.node.type.name}constructor(e,r,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new wu(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new wu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new wu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const s=r.isBlock&&!r.isTextblock,a=r.isAtom&&!r.isText,i=this.pos+n+(a?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(i);if(!s&&l.depth<=this.depth)return;const c=new wu(l,this.editor,s,s?r:null);s&&(c.actualDepth=this.depth+1),e.push(new wu(l,this.editor,s,s?r:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===e)if(Object.keys(r).length>0){const a=s.node.attrs,i=Object.keys(r);for(let l=0;l<i.length;l+=1){const c=i[l];if(a[c]!==r[c])break}}else n=s;s=s.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const a=Object.keys(r);return this.children.forEach(i=>{n&&s.length>0||(i.node.type.name===e&&a.every(c=>r[c]===i.node.attrs[c])&&s.push(i),!(n&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,r,n))))}),s}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}}const kNe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function CNe(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class NNe extends q2e{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:n,moved:s})=>this.options.onDrop(r,n,s)),this.on("paste",({event:r,slice:n})=>this.options.onPaste(r,n)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=CNe(kNe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,r=!0){this.setOptions({editable:e}),r&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,r){const n=vV(r)?r(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:n});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const r=this.state.plugins;let n=r;if([].concat(e).forEach(a=>{const i=typeof a=="string"?`${a}$`:a.key;n=n.filter(l=>!l.key.startsWith(i))}),r.length===n.length)return;const s=this.state.reconfigure({plugins:n});return this.view.updateState(s),s}createExtensionManager(){var e,r;const s=[...this.options.enableCoreExtensions?[DV,CV.configure({blockSeparator:(r=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||r===void 0?void 0:r.blockSeparator}),PV,$V,FV,zV,IV,BV].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Pu(s,this)}createCommandManager(){this.commandManager=new n2({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let r;try{r=Gb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),r=Gb(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const n=SV(r,this.options.autofocus);this.view=new u3(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Mu.create({doc:r,selection:n||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const r=this.capturedTransaction;return this.capturedTransaction=null,r}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(i)});return}const r=this.state.apply(e),n=!this.state.selection.eq(r.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:r}),this.view.updateState(r),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),a=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return OV(this.state,e)}isActive(e,r){const n=typeof e=="string"?e:null,s=typeof e=="string"?r:e;return tNe(this.state,n,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return y3(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:r=`

`,textSerializers:n={}}=e||{};return XCe(this.state.doc,{blockSeparator:r,textSerializers:{...kV(this.schema),...n}})}get isEmpty(){return k3(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelector(e,r))||null}$nodes(e,r){var n;return((n=this.$doc)===null||n===void 0?void 0:n.querySelectorAll(e,r))||null}$pos(e){const r=this.state.doc.resolve(e);return new wu(r,this)}get $doc(){return this.$pos(0)}}function Jm(t){return new Fd({find:t.find,handler:({state:e,range:r,match:n})=>{const s=Ft(t.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:a}=e,i=n[n.length-1],l=n[0];if(i){const c=l.search(/\S/),d=r.from+l.indexOf(i),u=d+i.length;if(w3(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(g=>g===t.type&&g!==m.mark.type)).filter(m=>m.to>d).length)return null;u<r.to&&a.delete(u,r.to),d>r.from&&a.delete(r.from+c,d);const f=r.from+c+i.length;a.addMark(r.from+c,f,t.type.create(s||{})),a.removeStoredMark(t.type)}}})}let al=class qj{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ft(nt(this,"addOptions",{name:this.name}))),this.storage=Ft(nt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qj(e)}configure(e={}){const r=this.extend({...this.config,addOptions:()=>a2(this.options,e)});return r.name=this.name,r.parent=this.parent,r}extend(e={}){const r=new qj(e);return r.parent=this,this.child=r,r.name=e.name?e.name:r.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${r.name}".`),r.options=Ft(nt(r,"addOptions",{name:r.name})),r.storage=Ft(nt(r,"addStorage",{name:r.name,options:r.options})),r}};class SNe{constructor(e,r,n){this.isDragging=!1,this.component=e,this.editor=r.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=r.extension,this.node=r.node,this.decorations=r.decorations,this.innerDecorations=r.innerDecorations,this.view=r.view,this.HTMLAttributes=r.HTMLAttributes,this.getPos=r.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var r,n,s,a,i,l,c;const{view:d}=this.editor,u=e.target,h=u.nodeType===3?(r=u.parentElement)===null||r===void 0?void 0:r.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((n=this.contentDOM)===null||n===void 0)&&n.contains(u)||!h)return;let f=0,m=0;if(this.dom!==h){const v=this.dom.getBoundingClientRect(),w=h.getBoundingClientRect(),k=(s=e.offsetX)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetX,N=(i=e.offsetY)!==null&&i!==void 0?i:(l=e.nativeEvent)===null||l===void 0?void 0:l.offsetY;f=w.x-v.x+k,m=w.y-v.y+N}const p=this.dom.cloneNode(!0);(c=e.dataTransfer)===null||c===void 0||c.setDragImage(p,f,m);const g=this.getPos();if(typeof g!="number")return;const y=it.create(d.state.doc,g),b=d.state.tr.setSelection(y);d.dispatch(b)}stopEvent(e){var r;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const n=e.target;if(!(this.dom.contains(n)&&!(!((r=this.contentDOM)===null||r===void 0)&&r.contains(n))))return!1;const a=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!a)return!0;const{isEditable:c}=this.editor,{isDragging:d}=this,u=!!this.node.type.spec.draggable,h=it.isSelectable(this.node),f=e.type==="copy",m=e.type==="paste",p=e.type==="cut",g=e.type==="mousedown";if(!u&&h&&a&&e.target===this.dom&&e.preventDefault(),u&&a&&!d&&e.target===this.dom)return e.preventDefault(),!1;if(u&&c&&!d&&g){const y=n.closest("[data-drag-handle]");y&&(this.dom===y||this.dom.contains(y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(d||i||f||m||p||g&&h)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(o2()||EV())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(n=>n.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:r})=>{const n=this.getPos();return typeof n!="number"?!1:(r.setNodeMarkup(n,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const r=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:r})}}function Ch(t){return new eCe({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:s})=>{const a=Ft(t.getAttributes,void 0,n,s);if(a===!1||a===null)return null;const{tr:i}=e,l=n[n.length-1],c=n[0];let d=r.to;if(l){const u=c.search(/\S/),h=r.from+c.indexOf(l),f=h+l.length;if(w3(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>h).length)return null;f<r.to&&i.delete(f,r.to),h>r.from&&i.delete(r.from+u,h),d=r.from+u+l.length,i.addMark(r.from+u,d,t.type.create(a||{})),i.removeStoredMark(t.type)}}})}var x1,ENe=new Uint8Array(16);function jNe(){if(!x1&&(x1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x1(ENe)}const TNe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _Ne(t){return typeof t=="string"&&TNe.test(t)}var Jn=[];for(var RN=0;RN<256;++RN)Jn.push((RN+256).toString(16).substr(1));function ANe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Jn[t[e+0]]+Jn[t[e+1]]+Jn[t[e+2]]+Jn[t[e+3]]+"-"+Jn[t[e+4]]+Jn[t[e+5]]+"-"+Jn[t[e+6]]+Jn[t[e+7]]+"-"+Jn[t[e+8]]+Jn[t[e+9]]+"-"+Jn[t[e+10]]+Jn[t[e+11]]+Jn[t[e+12]]+Jn[t[e+13]]+Jn[t[e+14]]+Jn[t[e+15]]).toLowerCase();if(!_Ne(r))throw TypeError("Stringified UUID is invalid");return r}function UV(t,e,r){t=t||{};var n=t.random||(t.rng||jNe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ANe(n)}var Gj,Kj;if(typeof WeakMap<"u"){let t=new WeakMap;Gj=e=>t.get(e),Kj=(e,r)=>(t.set(e,r),r)}else{const t=[];let r=0;Gj=n=>{for(let s=0;s<t.length;s+=2)if(t[s]==n)return t[s+1]},Kj=(n,s)=>(r==10&&(r=0),t[r++]=n,t[r++]=s)}var Or=class{constructor(t,e,r,n){this.width=t,this.height=e,this.map=r,this.problems=n}findCell(t){for(let e=0;e<this.map.length;e++){const r=this.map[e];if(r!=t)continue;const n=e%this.width,s=e/this.width|0;let a=n+1,i=s+1;for(let l=1;a<this.width&&this.map[e+l]==r;l++)a++;for(let l=1;i<this.height&&this.map[e+this.width*l]==r;l++)i++;return{left:n,top:s,right:a,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,r){const{left:n,right:s,top:a,bottom:i}=this.findCell(t);return e=="horiz"?(r<0?n==0:s==this.width)?null:this.map[a*this.width+(r<0?n-1:s)]:(r<0?a==0:i==this.height)?null:this.map[n+this.width*(r<0?a-1:i)]}rectBetween(t,e){const{left:r,right:n,top:s,bottom:a}=this.findCell(t),{left:i,right:l,top:c,bottom:d}=this.findCell(e);return{left:Math.min(r,i),top:Math.min(s,c),right:Math.max(n,l),bottom:Math.max(a,d)}}cellsInRect(t){const e=[],r={};for(let n=t.top;n<t.bottom;n++)for(let s=t.left;s<t.right;s++){const a=n*this.width+s,i=this.map[a];r[i]||(r[i]=!0,!(s==t.left&&s&&this.map[a-1]==i||n==t.top&&n&&this.map[a-this.width]==i)&&e.push(i))}return e}positionAt(t,e,r){for(let n=0,s=0;;n++){const a=s+r.child(n).nodeSize;if(n==t){let i=e+t*this.width;const l=(t+1)*this.width;for(;i<l&&this.map[i]<s;)i++;return i==l?a-1:this.map[i]}s=a}}static get(t){return Gj(t)||Kj(t,MNe(t))}};function MNe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=ONe(t),r=t.childCount,n=[];let s=0,a=null;const i=[];for(let d=0,u=e*r;d<u;d++)n[d]=0;for(let d=0,u=0;d<r;d++){const h=t.child(d);u++;for(let p=0;;p++){for(;s<n.length&&n[s]!=0;)s++;if(p==h.childCount)break;const g=h.child(p),{colspan:y,rowspan:b,colwidth:v}=g.attrs;for(let w=0;w<b;w++){if(w+d>=r){(a||(a=[])).push({type:"overlong_rowspan",pos:u,n:b-w});break}const k=s+w*e;for(let N=0;N<y;N++){n[k+N]==0?n[k+N]=u:(a||(a=[])).push({type:"collision",row:d,pos:u,n:y-N});const S=v&&v[N];if(S){const C=(k+N)%e*2,E=i[C];E==null||E!=S&&i[C+1]==1?(i[C]=S,i[C+1]=1):E==S&&i[C+1]++}}}s+=y,u+=g.nodeSize}const f=(d+1)*e;let m=0;for(;s<f;)n[s++]==0&&m++;m&&(a||(a=[])).push({type:"missing",row:d,n:m}),u++}(e===0||r===0)&&(a||(a=[])).push({type:"zero_sized"});const l=new Or(e,r,n,a);let c=!1;for(let d=0;!c&&d<i.length;d+=2)i[d]!=null&&i[d+1]<r&&(c=!0);return c&&RNe(l,i,t),l}function ONe(t){let e=-1,r=!1;for(let n=0;n<t.childCount;n++){const s=t.child(n);let a=0;if(r)for(let i=0;i<n;i++){const l=t.child(i);for(let c=0;c<l.childCount;c++){const d=l.child(c);i+d.attrs.rowspan>n&&(a+=d.attrs.colspan)}}for(let i=0;i<s.childCount;i++){const l=s.child(i);a+=l.attrs.colspan,l.attrs.rowspan>1&&(r=!0)}e==-1?e=a:e!=a&&(e=Math.max(e,a))}return e}function RNe(t,e,r){t.problems||(t.problems=[]);const n={};for(let s=0;s<t.map.length;s++){const a=t.map[s];if(n[a])continue;n[a]=!0;const i=r.nodeAt(a);if(!i)throw new RangeError(`No cell with offset ${a} found`);let l=null;const c=i.attrs;for(let d=0;d<c.colspan;d++){const u=(s+d)%t.width,h=e[u*2];h!=null&&(!c.colwidth||c.colwidth[d]!=h)&&((l||(l=PNe(c)))[d]=h)}l&&t.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:l})}}function PNe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let r=0;r<t.colspan;r++)e.push(0);return e}function Ps(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const r in t.nodes){const n=t.nodes[r],s=n.spec.tableRole;s&&(e[s]=n)}}return e}var Bc=new Qt("selectingCells");function Ep(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function INe(t){for(let e=t.depth;e>0;e--){const r=t.node(e).type.spec.tableRole;if(r==="cell"||r==="header_cell")return t.node(e)}return null}function il(t){const e=t.selection.$head;for(let r=e.depth;r>0;r--)if(e.node(r).type.spec.tableRole=="row")return!0;return!1}function C3(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const r=Ep(e.$head)||DNe(e.$head);if(r)return r;throw new RangeError(`No cell found around position ${e.head}`)}function DNe(t){for(let e=t.nodeAfter,r=t.pos;e;e=e.firstChild,r++){const n=e.type.spec.tableRole;if(n=="cell"||n=="header_cell")return t.doc.resolve(r)}for(let e=t.nodeBefore,r=t.pos;e;e=e.lastChild,r--){const n=e.type.spec.tableRole;if(n=="cell"||n=="header_cell")return t.doc.resolve(r-e.nodeSize)}}function Zj(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function LNe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function N3(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function VV(t,e,r){const n=t.node(-1),s=Or.get(n),a=t.start(-1),i=s.nextCell(t.pos-a,e,r);return i==null?null:t.node(0).resolve(a+i)}function Nh(t,e,r=1){const n={...t,colspan:t.colspan-r};return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(e,r),n.colwidth.some(s=>s>0)||(n.colwidth=null)),n}function HV(t,e,r=1){const n={...t,colspan:t.colspan+r};if(n.colwidth){n.colwidth=n.colwidth.slice();for(let s=0;s<r;s++)n.colwidth.splice(e,0,0)}return n}function $Ne(t,e,r){const n=Ps(e.type.schema).header_cell;for(let s=0;s<t.height;s++)if(e.nodeAt(t.map[r+s*t.width]).type!=n)return!1;return!0}var Cr=class wl extends gt{constructor(e,r=e){const n=e.node(-1),s=Or.get(n),a=e.start(-1),i=s.rectBetween(e.pos-a,r.pos-a),l=e.node(0),c=s.cellsInRect(i).filter(u=>u!=r.pos-a);c.unshift(r.pos-a);const d=c.map(u=>{const h=n.nodeAt(u);if(!h)throw RangeError(`No cell with offset ${u} found`);const f=a+u+1;return new NU(l.resolve(f),l.resolve(f+h.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=r}map(e,r){const n=e.resolve(r.map(this.$anchorCell.pos)),s=e.resolve(r.map(this.$headCell.pos));if(Zj(n)&&Zj(s)&&N3(n,s)){const a=this.$anchorCell.node(-1)!=n.node(-1);return a&&this.isRowSelection()?wl.rowSelection(n,s):a&&this.isColSelection()?wl.colSelection(n,s):new wl(n,s)}return Je.between(n,s)}content(){const e=this.$anchorCell.node(-1),r=Or.get(e),n=this.$anchorCell.start(-1),s=r.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),a={},i=[];for(let c=s.top;c<s.bottom;c++){const d=[];for(let u=c*r.width+s.left,h=s.left;h<s.right;h++,u++){const f=r.map[u];if(a[f])continue;a[f]=!0;const m=r.findCell(f);let p=e.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const g=s.left-m.left,y=m.right-s.right;if(g>0||y>0){let b=p.attrs;if(g>0&&(b=Nh(b,0,g)),y>0&&(b=Nh(b,b.colspan-y,y)),m.left<s.left){if(p=p.type.createAndFill(b),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else p=p.type.create(b,p.content)}if(m.top<s.top||m.bottom>s.bottom){const b={...p.attrs,rowspan:Math.min(m.bottom,s.bottom)-Math.max(m.top,s.top)};m.top<s.top?p=p.type.createAndFill(b):p=p.type.create(b,p.content)}d.push(p)}i.push(e.child(c).copy(Ne.from(d)))}const l=this.isColSelection()&&this.isRowSelection()?e:i;return new $e(Ne.from(l),1,1)}replace(e,r=$e.empty){const n=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){const{$from:l,$to:c}=s[i],d=e.mapping.slice(n);e.replace(d.map(l.pos),d.map(c.pos),i?$e.empty:r)}const a=gt.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);a&&e.setSelection(a)}replaceWith(e,r){this.replace(e,new $e(Ne.from(r),0,0))}forEachCell(e){const r=this.$anchorCell.node(-1),n=Or.get(r),s=this.$anchorCell.start(-1),a=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let i=0;i<a.length;i++)e(r.nodeAt(a[i]),s+a[i])}isColSelection(){const e=this.$anchorCell.index(-1),r=this.$headCell.index(-1);if(Math.min(e,r)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=r+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,s)==this.$headCell.node(-1).childCount}static colSelection(e,r=e){const n=e.node(-1),s=Or.get(n),a=e.start(-1),i=s.findCell(e.pos-a),l=s.findCell(r.pos-a),c=e.node(0);return i.top<=l.top?(i.top>0&&(e=c.resolve(a+s.map[i.left])),l.bottom<s.height&&(r=c.resolve(a+s.map[s.width*(s.height-1)+l.right-1]))):(l.top>0&&(r=c.resolve(a+s.map[l.left])),i.bottom<s.height&&(e=c.resolve(a+s.map[s.width*(s.height-1)+i.right-1]))),new wl(e,r)}isRowSelection(){const e=this.$anchorCell.node(-1),r=Or.get(e),n=this.$anchorCell.start(-1),s=r.colCount(this.$anchorCell.pos-n),a=r.colCount(this.$headCell.pos-n);if(Math.min(s,a)>0)return!1;const i=s+this.$anchorCell.nodeAfter.attrs.colspan,l=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,l)==r.width}eq(e){return e instanceof wl&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,r=e){const n=e.node(-1),s=Or.get(n),a=e.start(-1),i=s.findCell(e.pos-a),l=s.findCell(r.pos-a),c=e.node(0);return i.left<=l.left?(i.left>0&&(e=c.resolve(a+s.map[i.top*s.width])),l.right<s.width&&(r=c.resolve(a+s.map[s.width*(l.top+1)-1]))):(l.left>0&&(r=c.resolve(a+s.map[l.top*s.width])),i.right<s.width&&(e=c.resolve(a+s.map[s.width*(i.top+1)-1]))),new wl(e,r)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,r){return new wl(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){return new wl(e.resolve(r),e.resolve(n))}getBookmark(){return new FNe(this.$anchorCell.pos,this.$headCell.pos)}};Cr.prototype.visible=!1;gt.jsonID("cell",Cr);var FNe=class WV{constructor(e,r){this.anchor=e,this.head=r}map(e){return new WV(e.map(this.anchor),e.map(this.head))}resolve(e){const r=e.resolve(this.anchor),n=e.resolve(this.head);return r.parent.type.spec.tableRole=="row"&&n.parent.type.spec.tableRole=="row"&&r.index()<r.parent.childCount&&n.index()<n.parent.childCount&&N3(r,n)?new Cr(r,n):gt.near(n,1)}};function BNe(t){if(!(t.selection instanceof Cr))return null;const e=[];return t.selection.forEachCell((r,n)=>{e.push(kr.node(n,n+r.nodeSize,{class:"selectedCell"}))}),Ht.create(t.doc,e)}function zNe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let r=t.pos,n=e.pos,s=t.depth;for(;s>=0&&!(t.after(s+1)<t.end(s));s--,r++);for(let a=e.depth;a>=0&&!(e.before(a+1)>e.start(a));a--,n--);return r==n&&/row|table/.test(t.node(s).type.spec.tableRole)}function UNe({$from:t,$to:e}){let r,n;for(let s=t.depth;s>0;s--){const a=t.node(s);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){r=a;break}}for(let s=e.depth;s>0;s--){const a=e.node(s);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){n=a;break}}return r!==n&&e.parentOffset===0}function VNe(t,e,r){const n=(e||t).selection,s=(e||t).doc;let a,i;if(n instanceof it&&(i=n.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")a=Cr.create(s,n.from);else if(i=="row"){const l=s.resolve(n.from+1);a=Cr.rowSelection(l,l)}else if(!r){const l=Or.get(n.node),c=n.from+1,d=c+l.map[l.width*l.height-1];a=Cr.create(s,c+1,d)}}else n instanceof Je&&zNe(n)?a=Je.create(s,n.from):n instanceof Je&&UNe(n)&&(a=Je.create(s,n.$from.start(),n.$from.end()));return a&&(e||(e=t.tr)).setSelection(a),e}var HNe=new Qt("fix-tables");function qV(t,e,r,n){const s=t.childCount,a=e.childCount;e:for(let i=0,l=0;i<a;i++){const c=e.child(i);for(let d=l,u=Math.min(s,i+3);d<u;d++)if(t.child(d)==c){l=d+1,r+=c.nodeSize;continue e}n(c,r),l<s&&t.child(l).sameMarkup(c)?qV(t.child(l),c,r+1,n):c.nodesBetween(0,c.content.size,n,r+1),r+=c.nodeSize}}function WNe(t,e){let r;const n=(s,a)=>{s.type.spec.tableRole=="table"&&(r=qNe(t,s,a,r))};return e?e.doc!=t.doc&&qV(e.doc,t.doc,0,n):t.doc.descendants(n),r}function qNe(t,e,r,n){const s=Or.get(e);if(!s.problems)return n;n||(n=t.tr);const a=[];for(let c=0;c<s.height;c++)a.push(0);for(let c=0;c<s.problems.length;c++){const d=s.problems[c];if(d.type=="collision"){const u=e.nodeAt(d.pos);if(!u)continue;const h=u.attrs;for(let f=0;f<h.rowspan;f++)a[d.row+f]+=d.n;n.setNodeMarkup(n.mapping.map(r+1+d.pos),null,Nh(h,h.colspan-d.n,d.n))}else if(d.type=="missing")a[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const u=e.nodeAt(d.pos);if(!u)continue;n.setNodeMarkup(n.mapping.map(r+1+d.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-d.n})}else if(d.type=="colwidth mismatch"){const u=e.nodeAt(d.pos);if(!u)continue;n.setNodeMarkup(n.mapping.map(r+1+d.pos),null,{...u.attrs,colwidth:d.colwidth})}else if(d.type=="zero_sized"){const u=n.mapping.map(r);n.delete(u,u+e.nodeSize)}}let i,l;for(let c=0;c<a.length;c++)a[c]&&(i==null&&(i=c),l=c);for(let c=0,d=r+1;c<s.height;c++){const u=e.child(c),h=d+u.nodeSize,f=a[c];if(f>0){let m="cell";u.firstChild&&(m=u.firstChild.type.spec.tableRole);const p=[];for(let y=0;y<f;y++){const b=Ps(t.schema)[m].createAndFill();b&&p.push(b)}const g=(c==0||i==c-1)&&l==c?d+1:h-1;n.insert(n.mapping.map(g),p)}d=h}return n.setMeta(HNe,{fixTables:!0})}function ol(t){const e=t.selection,r=C3(t),n=r.node(-1),s=r.start(-1),a=Or.get(n);return{...e instanceof Cr?a.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):a.findCell(r.pos-s),tableStart:s,map:a,table:n}}function GV(t,{map:e,tableStart:r,table:n},s){let a=s>0?-1:0;$Ne(e,n,s+a)&&(a=s==0||s==e.width?null:0);for(let i=0;i<e.height;i++){const l=i*e.width+s;if(s>0&&s<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],d=n.nodeAt(c);t.setNodeMarkup(t.mapping.map(r+c),null,HV(d.attrs,s-e.colCount(c))),i+=d.attrs.rowspan-1}else{const c=a==null?Ps(n.type.schema).cell:n.nodeAt(e.map[l+a]).type,d=e.positionAt(i,s,n);t.insert(t.mapping.map(r+d),c.createAndFill())}}return t}function GNe(t,e){if(!il(t))return!1;if(e){const r=ol(t);e(GV(t.tr,r,r.left))}return!0}function KNe(t,e){if(!il(t))return!1;if(e){const r=ol(t);e(GV(t.tr,r,r.right))}return!0}function ZNe(t,{map:e,table:r,tableStart:n},s){const a=t.mapping.maps.length;for(let i=0;i<e.height;){const l=i*e.width+s,c=e.map[l],d=r.nodeAt(c),u=d.attrs;if(s>0&&e.map[l-1]==c||s<e.width-1&&e.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(a).map(n+c),null,Nh(u,s-e.colCount(c)));else{const h=t.mapping.slice(a).map(n+c);t.delete(h,h+d.nodeSize)}i+=u.rowspan}}function YNe(t,e){if(!il(t))return!1;if(e){const r=ol(t),n=t.tr;if(r.left==0&&r.right==r.map.width)return!1;for(let s=r.right-1;ZNe(n,r,s),s!=r.left;s--){const a=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!a)throw RangeError("No table found");r.table=a,r.map=Or.get(a)}e(n)}return!0}function XNe(t,e,r){var n;const s=Ps(e.type.schema).header_cell;for(let a=0;a<t.width;a++)if(((n=e.nodeAt(t.map[a+r*t.width]))==null?void 0:n.type)!=s)return!1;return!0}function KV(t,{map:e,tableStart:r,table:n},s){var a;let i=r;for(let d=0;d<s;d++)i+=n.child(d).nodeSize;const l=[];let c=s>0?-1:0;XNe(e,n,s+c)&&(c=s==0||s==e.height?null:0);for(let d=0,u=e.width*s;d<e.width;d++,u++)if(s>0&&s<e.height&&e.map[u]==e.map[u-e.width]){const h=e.map[u],f=n.nodeAt(h).attrs;t.setNodeMarkup(r+h,null,{...f,rowspan:f.rowspan+1}),d+=f.colspan-1}else{const h=c==null?Ps(n.type.schema).cell:(a=n.nodeAt(e.map[u+c*e.width]))==null?void 0:a.type,f=h==null?void 0:h.createAndFill();f&&l.push(f)}return t.insert(i,Ps(n.type.schema).row.create(null,l)),t}function JNe(t,e){if(!il(t))return!1;if(e){const r=ol(t);e(KV(t.tr,r,r.top))}return!0}function QNe(t,e){if(!il(t))return!1;if(e){const r=ol(t);e(KV(t.tr,r,r.bottom))}return!0}function eSe(t,{map:e,table:r,tableStart:n},s){let a=0;for(let d=0;d<s;d++)a+=r.child(d).nodeSize;const i=a+r.child(s).nodeSize,l=t.mapping.maps.length;t.delete(a+n,i+n);const c=new Set;for(let d=0,u=s*e.width;d<e.width;d++,u++){const h=e.map[u];if(!c.has(h)){if(c.add(h),s>0&&h==e.map[u-e.width]){const f=r.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(l).map(h+n),null,{...f,rowspan:f.rowspan-1}),d+=f.colspan-1}else if(s<e.height&&h==e.map[u+e.width]){const f=r.nodeAt(h),m=f.attrs,p=f.type.create({...m,rowspan:f.attrs.rowspan-1},f.content),g=e.positionAt(s+1,d,r);t.insert(t.mapping.slice(l).map(n+g),p),d+=m.colspan-1}}}}function tSe(t,e){if(!il(t))return!1;if(e){const r=ol(t),n=t.tr;if(r.top==0&&r.bottom==r.map.height)return!1;for(let s=r.bottom-1;eSe(n,r,s),s!=r.top;s--){const a=r.tableStart?n.doc.nodeAt(r.tableStart-1):n.doc;if(!a)throw RangeError("No table found");r.table=a,r.map=Or.get(r.table)}e(n)}return!0}function U8(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function rSe({width:t,height:e,map:r},n){let s=n.top*t+n.left,a=s,i=(n.bottom-1)*t+n.left,l=s+(n.right-n.left-1);for(let c=n.top;c<n.bottom;c++){if(n.left>0&&r[a]==r[a-1]||n.right<t&&r[l]==r[l+1])return!0;a+=t,l+=t}for(let c=n.left;c<n.right;c++){if(n.top>0&&r[s]==r[s-t]||n.bottom<e&&r[i]==r[i+t])return!0;s++,i++}return!1}function nSe(t,e){const r=t.selection;if(!(r instanceof Cr)||r.$anchorCell.pos==r.$headCell.pos)return!1;const n=ol(t),{map:s}=n;if(rSe(s,n))return!1;if(e){const a=t.tr,i={};let l=Ne.empty,c,d;for(let u=n.top;u<n.bottom;u++)for(let h=n.left;h<n.right;h++){const f=s.map[u*s.width+h],m=n.table.nodeAt(f);if(!(i[f]||!m))if(i[f]=!0,c==null)c=f,d=m;else{U8(m)||(l=l.append(m.content));const p=a.mapping.map(f+n.tableStart);a.delete(p,p+m.nodeSize)}}if(c==null||d==null)return!0;if(a.setNodeMarkup(c+n.tableStart,null,{...HV(d.attrs,d.attrs.colspan,n.right-n.left-d.attrs.colspan),rowspan:n.bottom-n.top}),l.size){const u=c+1+d.content.size,h=U8(d)?c+1:u;a.replaceWith(h+n.tableStart,u+n.tableStart,l)}a.setSelection(new Cr(a.doc.resolve(c+n.tableStart))),e(a)}return!0}function sSe(t,e){const r=Ps(t.schema);return aSe(({node:n})=>r[n.type.spec.tableRole])(t,e)}function aSe(t){return(e,r)=>{var n;const s=e.selection;let a,i;if(s instanceof Cr){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;a=s.$anchorCell.nodeAfter,i=s.$anchorCell.pos}else{if(a=INe(s.$from),!a)return!1;i=(n=Ep(s.$from))==null?void 0:n.pos}if(a==null||i==null||a.attrs.colspan==1&&a.attrs.rowspan==1)return!1;if(r){let l=a.attrs;const c=[],d=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const u=ol(e),h=e.tr;for(let m=0;m<u.right-u.left;m++)c.push(d?{...l,colwidth:d&&d[m]?[d[m]]:null}:l);let f;for(let m=u.top;m<u.bottom;m++){let p=u.map.positionAt(m,u.left,u.table);m==u.top&&(p+=a.nodeSize);for(let g=u.left,y=0;g<u.right;g++,y++)g==u.left&&m==u.top||h.insert(f=h.mapping.map(p+u.tableStart,1),t({node:a,row:m,col:g}).createAndFill(c[y]))}h.setNodeMarkup(i,t({node:a,row:u.top,col:u.left}),c[0]),s instanceof Cr&&h.setSelection(new Cr(h.doc.resolve(s.$anchorCell.pos),f?h.doc.resolve(f):void 0)),r(h)}return!0}}function iSe(t){return function(e,r){if(!il(e))return!1;if(r){const n=Ps(e.schema),s=ol(e),a=e.tr,i=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),l=i.map(c=>s.table.nodeAt(c));for(let c=0;c<i.length;c++)l[c].type==n.header_cell&&a.setNodeMarkup(s.tableStart+i[c],n.cell,l[c].attrs);if(a.steps.length==0)for(let c=0;c<i.length;c++)a.setNodeMarkup(s.tableStart+i[c],n.header_cell,l[c].attrs);r(a)}return!0}}function V8(t,e,r){const n=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<n.length;s++){const a=e.table.nodeAt(n[s]);if(a&&a.type!==r.header_cell)return!1}return!0}function S3(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?iSe(t):function(r,n){if(!il(r))return!1;if(n){const s=Ps(r.schema),a=ol(r),i=r.tr,l=V8("row",a,s),c=V8("column",a,s),u=(t==="column"?l:t==="row"?c:!1)?1:0,h=t=="column"?{left:0,top:u,right:1,bottom:a.map.height}:t=="row"?{left:u,top:0,right:a.map.width,bottom:1}:a,f=t=="column"?c?s.cell:s.header_cell:t=="row"?l?s.cell:s.header_cell:s.cell;a.map.cellsInRect(h).forEach(m=>{const p=m+a.tableStart,g=i.doc.nodeAt(p);g&&i.setNodeMarkup(p,f,g.attrs)}),n(i)}return!0}}S3("row",{useDeprecatedLogic:!0});S3("column",{useDeprecatedLogic:!0});S3("cell",{useDeprecatedLogic:!0});function oSe(t,e){if(e<0){const r=t.nodeBefore;if(r)return t.pos-r.nodeSize;for(let n=t.index(-1)-1,s=t.before();n>=0;n--){const a=t.node(-1).child(n),i=a.lastChild;if(i)return s-1-i.nodeSize;s-=a.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const r=t.node(-1);for(let n=t.indexAfter(-1),s=t.after();n<r.childCount;n++){const a=r.child(n);if(a.childCount)return s+1;s+=a.nodeSize}}return null}function H8(t){return function(e,r){if(!il(e))return!1;const n=oSe(C3(e),t);if(n==null)return!1;if(r){const s=e.doc.resolve(n);r(e.tr.setSelection(Je.between(s,LNe(s))).scrollIntoView())}return!0}}function y1(t,e){const r=t.selection;if(!(r instanceof Cr))return!1;if(e){const n=t.tr,s=Ps(t.schema).cell.createAndFill().content;r.forEachCell((a,i)=>{a.content.eq(s)||n.replace(n.mapping.map(i+1),n.mapping.map(i+a.nodeSize-1),new $e(s,0,0))}),n.docChanged&&e(n)}return!0}function lSe(t){if(!t.size)return null;let{content:e,openStart:r,openEnd:n}=t;for(;e.childCount==1&&(r>0&&n>0||e.child(0).type.spec.tableRole=="table");)r--,n--,e=e.child(0).content;const s=e.child(0),a=s.type.spec.tableRole,i=s.type.schema,l=[];if(a=="row")for(let c=0;c<e.childCount;c++){let d=e.child(c).content;const u=c?0:Math.max(0,r-1),h=c<e.childCount-1?0:Math.max(0,n-1);(u||h)&&(d=Yj(Ps(i).row,new $e(d,u,h)).content),l.push(d)}else if(a=="cell"||a=="header_cell")l.push(r||n?Yj(Ps(i).row,new $e(e,r,n)).content:e);else return null;return cSe(i,l)}function cSe(t,e){const r=[];for(let s=0;s<e.length;s++){const a=e[s];for(let i=a.childCount-1;i>=0;i--){const{rowspan:l,colspan:c}=a.child(i).attrs;for(let d=s;d<s+l;d++)r[d]=(r[d]||0)+c}}let n=0;for(let s=0;s<r.length;s++)n=Math.max(n,r[s]);for(let s=0;s<r.length;s++)if(s>=e.length&&e.push(Ne.empty),r[s]<n){const a=Ps(t).cell.createAndFill(),i=[];for(let l=r[s];l<n;l++)i.push(a);e[s]=e[s].append(Ne.from(i))}return{height:e.length,width:n,rows:e}}function Yj(t,e){const r=t.createAndFill();return new e3(r).replace(0,r.content.size,e).doc}function dSe({width:t,height:e,rows:r},n,s){if(t!=n){const a=[],i=[];for(let l=0;l<r.length;l++){const c=r[l],d=[];for(let u=a[l]||0,h=0;u<n;h++){let f=c.child(h%c.childCount);u+f.attrs.colspan>n&&(f=f.type.createChecked(Nh(f.attrs,f.attrs.colspan,u+f.attrs.colspan-n),f.content)),d.push(f),u+=f.attrs.colspan;for(let m=1;m<f.attrs.rowspan;m++)a[l+m]=(a[l+m]||0)+f.attrs.colspan}i.push(Ne.from(d))}r=i,t=n}if(e!=s){const a=[];for(let i=0,l=0;i<s;i++,l++){const c=[],d=r[l%e];for(let u=0;u<d.childCount;u++){let h=d.child(u);i+h.attrs.rowspan>s&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,s-h.attrs.rowspan)},h.content)),c.push(h)}a.push(Ne.from(c))}r=a,e=s}return{width:t,height:e,rows:r}}function uSe(t,e,r,n,s,a,i){const l=t.doc.type.schema,c=Ps(l);let d,u;if(s>e.width)for(let h=0,f=0;h<e.height;h++){const m=r.child(h);f+=m.nodeSize;const p=[];let g;m.lastChild==null||m.lastChild.type==c.cell?g=d||(d=c.cell.createAndFill()):g=u||(u=c.header_cell.createAndFill());for(let y=e.width;y<s;y++)p.push(g);t.insert(t.mapping.slice(i).map(f-1+n),p)}if(a>e.height){const h=[];for(let p=0,g=(e.height-1)*e.width;p<Math.max(e.width,s);p++){const y=p>=e.width?!1:r.nodeAt(e.map[g+p]).type==c.header_cell;h.push(y?u||(u=c.header_cell.createAndFill()):d||(d=c.cell.createAndFill()))}const f=c.row.create(null,Ne.from(h)),m=[];for(let p=e.height;p<a;p++)m.push(f);t.insert(t.mapping.slice(i).map(n+r.nodeSize-2),m)}return!!(d||u)}function W8(t,e,r,n,s,a,i,l){if(i==0||i==e.height)return!1;let c=!1;for(let d=s;d<a;d++){const u=i*e.width+d,h=e.map[u];if(e.map[u-e.width]==h){c=!0;const f=r.nodeAt(h),{top:m,left:p}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(l).map(h+n),null,{...f.attrs,rowspan:i-m}),t.insert(t.mapping.slice(l).map(e.positionAt(i,p,r)),f.type.createAndFill({...f.attrs,rowspan:m+f.attrs.rowspan-i})),d+=f.attrs.colspan-1}}return c}function q8(t,e,r,n,s,a,i,l){if(i==0||i==e.width)return!1;let c=!1;for(let d=s;d<a;d++){const u=d*e.width+i,h=e.map[u];if(e.map[u-1]==h){c=!0;const f=r.nodeAt(h),m=e.colCount(h),p=t.mapping.slice(l).map(h+n);t.setNodeMarkup(p,null,Nh(f.attrs,i-m,f.attrs.colspan-(i-m))),t.insert(p+f.nodeSize,f.type.createAndFill(Nh(f.attrs,0,i-m))),d+=f.attrs.rowspan-1}}return c}function G8(t,e,r,n,s){let a=r?t.doc.nodeAt(r-1):t.doc;if(!a)throw new Error("No table found");let i=Or.get(a);const{top:l,left:c}=n,d=c+s.width,u=l+s.height,h=t.tr;let f=0;function m(){if(a=r?h.doc.nodeAt(r-1):h.doc,!a)throw new Error("No table found");i=Or.get(a),f=h.mapping.maps.length}uSe(h,i,a,r,d,u,f)&&m(),W8(h,i,a,r,c,d,l,f)&&m(),W8(h,i,a,r,c,d,u,f)&&m(),q8(h,i,a,r,l,u,c,f)&&m(),q8(h,i,a,r,l,u,d,f)&&m();for(let p=l;p<u;p++){const g=i.positionAt(p,c,a),y=i.positionAt(p,d,a);h.replace(h.mapping.slice(f).map(g+r),h.mapping.slice(f).map(y+r),new $e(s.rows[p-l],0,0))}m(),h.setSelection(new Cr(h.doc.resolve(r+i.positionAt(l,c,a)),h.doc.resolve(r+i.positionAt(u-1,d-1,a)))),e(h)}var hSe=h3({ArrowLeft:v1("horiz",-1),ArrowRight:v1("horiz",1),ArrowUp:v1("vert",-1),ArrowDown:v1("vert",1),"Shift-ArrowLeft":b1("horiz",-1),"Shift-ArrowRight":b1("horiz",1),"Shift-ArrowUp":b1("vert",-1),"Shift-ArrowDown":b1("vert",1),Backspace:y1,"Mod-Backspace":y1,Delete:y1,"Mod-Delete":y1});function hv(t,e,r){return r.eq(t.selection)?!1:(e&&e(t.tr.setSelection(r).scrollIntoView()),!0)}function v1(t,e){return(r,n,s)=>{if(!s)return!1;const a=r.selection;if(a instanceof Cr)return hv(r,n,gt.near(a.$headCell,e));if(t!="horiz"&&!a.empty)return!1;const i=ZV(s,t,e);if(i==null)return!1;if(t=="horiz")return hv(r,n,gt.near(r.doc.resolve(a.head+e),e));{const l=r.doc.resolve(i),c=VV(l,t,e);let d;return c?d=gt.near(c,1):e<0?d=gt.near(r.doc.resolve(l.before(-1)),-1):d=gt.near(r.doc.resolve(l.after(-1)),1),hv(r,n,d)}}}function b1(t,e){return(r,n,s)=>{if(!s)return!1;const a=r.selection;let i;if(a instanceof Cr)i=a;else{const c=ZV(s,t,e);if(c==null)return!1;i=new Cr(r.doc.resolve(c))}const l=VV(i.$headCell,t,e);return l?hv(r,n,new Cr(i.$anchorCell,l)):!1}}function fSe(t,e){const r=t.state.doc,n=Ep(r.resolve(e));return n?(t.dispatch(t.state.tr.setSelection(new Cr(n))),!0):!1}function mSe(t,e,r){if(!il(t.state))return!1;let n=lSe(r);const s=t.state.selection;if(s instanceof Cr){n||(n={width:1,height:1,rows:[Ne.from(Yj(Ps(t.state.schema).cell,r))]});const a=s.$anchorCell.node(-1),i=s.$anchorCell.start(-1),l=Or.get(a).rectBetween(s.$anchorCell.pos-i,s.$headCell.pos-i);return n=dSe(n,l.right-l.left,l.bottom-l.top),G8(t.state,t.dispatch,i,l,n),!0}else if(n){const a=C3(t.state),i=a.start(-1);return G8(t.state,t.dispatch,i,Or.get(a.node(-1)).findCell(a.pos-i),n),!0}else return!1}function pSe(t,e){var r;if(e.ctrlKey||e.metaKey)return;const n=K8(t,e.target);let s;if(e.shiftKey&&t.state.selection instanceof Cr)a(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&n&&(s=Ep(t.state.selection.$anchor))!=null&&((r=PN(t,e))==null?void 0:r.pos)!=s.pos)a(s,e),e.preventDefault();else if(!n)return;function a(c,d){let u=PN(t,d);const h=Bc.getState(t.state)==null;if(!u||!N3(c,u))if(h)u=c;else return;const f=new Cr(c,u);if(h||!t.state.selection.eq(f)){const m=t.state.tr.setSelection(f);h&&m.setMeta(Bc,c.pos),t.dispatch(m)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",l),Bc.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Bc,-1))}function l(c){const d=c,u=Bc.getState(t.state);let h;if(u!=null)h=t.state.doc.resolve(u);else if(K8(t,d.target)!=n&&(h=PN(t,e),!h))return i();h&&a(h,d)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",l)}function ZV(t,e,r){if(!(t.state.selection instanceof Je))return null;const{$head:n}=t.state.selection;for(let s=n.depth-1;s>=0;s--){const a=n.node(s);if((r<0?n.index(s):n.indexAfter(s))!=(r<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){const l=n.before(s),c=e=="vert"?r>0?"down":"up":r>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}function K8(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function PN(t,e){const r=t.posAtCoords({left:e.clientX,top:e.clientY});return r&&r?Ep(t.state.doc.resolve(r.pos)):null}var YV=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Xj(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,Xj(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function Xj(t,e,r,n,s,a){var i;let l=0,c=!0,d=e.firstChild;const u=t.firstChild;if(u){for(let h=0,f=0;h<u.childCount;h++){const{colspan:m,colwidth:p}=u.child(h).attrs;for(let g=0;g<m;g++,f++){const y=s==f?a:p&&p[g],b=y?y+"px":"";if(l+=y||n,y||(c=!1),d)d.style.width!=b&&(d.style.width=b),d=d.nextSibling;else{const v=document.createElement("col");v.style.width=b,e.appendChild(v)}}}for(;d;){const h=d.nextSibling;(i=d.parentNode)==null||i.removeChild(d),d=h}c?(r.style.width=l+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=l+"px")}}var La=new Qt("tableColumnResizing");function gSe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:r=100,View:n=YV,lastColumnResizable:s=!0}={}){const a=new Dt({key:La,state:{init(i,l){var c,d;const u=(d=(c=a.spec)==null?void 0:c.props)==null?void 0:d.nodeViews,h=Ps(l.schema).table.name;return n&&u&&(u[h]=(f,m)=>new n(f,r,m)),new xSe(-1,!1)},apply(i,l){return l.apply(i)}},props:{attributes:i=>{const l=La.getState(i);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,l)=>{ySe(i,l,t,s)},mouseleave:i=>{vSe(i)},mousedown:(i,l)=>{bSe(i,l,e,r)}},decorations:i=>{const l=La.getState(i);if(l&&l.activeHandle>-1)return SSe(i,l.activeHandle)},nodeViews:{}}});return a}var xSe=class fv{constructor(e,r){this.activeHandle=e,this.dragging=r}apply(e){const r=this,n=e.getMeta(La);if(n&&n.setHandle!=null)return new fv(n.setHandle,!1);if(n&&n.setDragging!==void 0)return new fv(r.activeHandle,n.setDragging);if(r.activeHandle>-1&&e.docChanged){let s=e.mapping.map(r.activeHandle,-1);return Zj(e.doc.resolve(s))||(s=-1),new fv(s,r.dragging)}return r}};function ySe(t,e,r,n){if(!t.editable)return;const s=La.getState(t.state);if(s&&!s.dragging){const a=kSe(e.target);let i=-1;if(a){const{left:l,right:c}=a.getBoundingClientRect();e.clientX-l<=r?i=Z8(t,e,"left",r):c-e.clientX<=r&&(i=Z8(t,e,"right",r))}if(i!=s.activeHandle){if(!n&&i!==-1){const l=t.state.doc.resolve(i),c=l.node(-1),d=Or.get(c),u=l.start(-1);if(d.colCount(l.pos-u)+l.nodeAfter.attrs.colspan-1==d.width-1)return}XV(t,i)}}}function vSe(t){if(!t.editable)return;const e=La.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&XV(t,-1)}function bSe(t,e,r,n){var s;if(!t.editable)return!1;const a=(s=t.dom.ownerDocument.defaultView)!=null?s:window,i=La.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const l=t.state.doc.nodeAt(i.activeHandle),c=wSe(t,i.activeHandle,l.attrs);t.dispatch(t.state.tr.setMeta(La,{setDragging:{startX:e.clientX,startWidth:c}}));function d(h){a.removeEventListener("mouseup",d),a.removeEventListener("mousemove",u);const f=La.getState(t.state);f!=null&&f.dragging&&(CSe(t,f.activeHandle,Y8(f.dragging,h,r)),t.dispatch(t.state.tr.setMeta(La,{setDragging:null})))}function u(h){if(!h.which)return d(h);const f=La.getState(t.state);if(f&&f.dragging){const m=Y8(f.dragging,h,r);X8(t,f.activeHandle,m,n)}}return X8(t,i.activeHandle,c,n),a.addEventListener("mouseup",d),a.addEventListener("mousemove",u),e.preventDefault(),!0}function wSe(t,e,{colspan:r,colwidth:n}){const s=n&&n[n.length-1];if(s)return s;const a=t.domAtPos(e);let l=a.node.childNodes[a.offset].offsetWidth,c=r;if(n)for(let d=0;d<r;d++)n[d]&&(l-=n[d],c--);return l/c}function kSe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Z8(t,e,r,n){const s=r=="right"?-n:n,a=t.posAtCoords({left:e.clientX+s,top:e.clientY});if(!a)return-1;const{pos:i}=a,l=Ep(t.state.doc.resolve(i));if(!l)return-1;if(r=="right")return l.pos;const c=Or.get(l.node(-1)),d=l.start(-1),u=c.map.indexOf(l.pos-d);return u%c.width==0?-1:d+c.map[u-1]}function Y8(t,e,r){const n=e.clientX-t.startX;return Math.max(r,t.startWidth+n)}function XV(t,e){t.dispatch(t.state.tr.setMeta(La,{setHandle:e}))}function CSe(t,e,r){const n=t.state.doc.resolve(e),s=n.node(-1),a=Or.get(s),i=n.start(-1),l=a.colCount(n.pos-i)+n.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let d=0;d<a.height;d++){const u=d*a.width+l;if(d&&a.map[u]==a.map[u-a.width])continue;const h=a.map[u],f=s.nodeAt(h).attrs,m=f.colspan==1?0:l-a.colCount(h);if(f.colwidth&&f.colwidth[m]==r)continue;const p=f.colwidth?f.colwidth.slice():NSe(f.colspan);p[m]=r,c.setNodeMarkup(i+h,null,{...f,colwidth:p})}c.docChanged&&t.dispatch(c)}function X8(t,e,r,n){const s=t.state.doc.resolve(e),a=s.node(-1),i=s.start(-1),l=Or.get(a).colCount(s.pos-i)+s.nodeAfter.attrs.colspan-1;let c=t.domAtPos(s.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&Xj(a,c.firstChild,c,n,l,r)}function NSe(t){return Array(t).fill(0)}function SSe(t,e){var r;const n=[],s=t.doc.resolve(e),a=s.node(-1);if(!a)return Ht.empty;const i=Or.get(a),l=s.start(-1),c=i.colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;for(let d=0;d<i.height;d++){const u=c+d*i.width;if((c==i.width-1||i.map[u]!=i.map[u+1])&&(d==0||i.map[u]!=i.map[u-i.width])){const h=i.map[u],f=l+h+a.nodeAt(h).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(r=La.getState(t))!=null&&r.dragging&&n.push(kr.node(l+h,l+h+a.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),n.push(kr.widget(f,m))}}return Ht.create(t.doc,n)}function ESe({allowTableNodeSelection:t=!1}={}){return new Dt({key:Bc,state:{init(){return null},apply(e,r){const n=e.getMeta(Bc);if(n!=null)return n==-1?null:n;if(r==null||!e.docChanged)return r;const{deleted:s,pos:a}=e.mapping.mapResult(r);return s?null:a}},props:{decorations:BNe,handleDOMEvents:{mousedown:pSe},createSelectionBetween(e){return Bc.getState(e.state)!=null?e.state.selection:null},handleTripleClick:fSe,handleKeyDown:hSe,handlePaste:mSe},appendTransaction(e,r,n){return VNe(n,WNe(n,r),t)}})}var jSe=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!==0;){var i=a[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r};const TSe=sk(jSe);var _Se=class JV{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,r,n){e<0||this.cache.set(e,[r,n])}replace(e,r,n,s){this.remove(e),this.set(r,n,s)}remove(e){this.cache.delete(e)}invalidate(e){const r=new JV(this.cache),n=e.mapping;return this.cache.forEach(([s,a],i)=>{if(i<0)return;const l=n.mapResult(i),c=e.doc.nodeAt(l.pos);if(l.deleted||!(c!=null&&c.eq(s)))r.remove(i);else if(i!==l.pos){const d=a.map(u=>u.map(n,0,0)).filter(u=>u!=null);r.replace(i,l.pos,c,d)}}),r}};function ASe({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:r=n=>n.attrs.language}){const n=new Qt("prosemirror-highlight");return new Dt({key:n,state:{init(s,a){const i=new _Se,[l,c]=J8(a.doc,t,e,r,i);return{cache:i,decorations:l,promises:c}},apply:(s,a)=>{const i=a.cache.invalidate(s),l=!!s.getMeta("prosemirror-highlight-refresh");if(!s.docChanged&&!l){const u=a.decorations.map(s.mapping,s.doc),h=a.promises;return{cache:i,decorations:u,promises:h}}const[c,d]=J8(s.doc,t,e,r,i);return{cache:i,decorations:c,promises:d}}},view:s=>{const a=new Set,i=()=>{if(a.size>0)return;const c=s.state.tr.setMeta("prosemirror-highlight-refresh",!0);s.dispatch(c)},l=()=>{var c;const d=n.getState(s.state);for(const u of(c=d==null?void 0:d.promises)!=null?c:[])a.add(u),u.then(()=>{a.delete(u),i()}).catch(()=>{a.delete(u)})};return l(),{update:()=>{l()}}},props:{decorations(s){var a;return(a=this.getState(s))==null?void 0:a.decorations}}})}function J8(t,e,r,n,s){const a=[],i=[];return t.descendants((l,c)=>{if(!l.type.isTextblock)return!0;if(r.includes(l.type.name)){const d=n(l),u=s.get(c);if(u){const[h,f]=u;a.push(...f)}else{const h=e({content:l.textContent,language:d||void 0,pos:c,size:l.nodeSize});h&&Array.isArray(h)?(s.set(c,l,h),a.push(...h)):h instanceof Promise&&(s.remove(c),i.push(h))}}return!1}),[Ht.create(t,a),i]}function MSe(t,e){return function({content:n,language:s,pos:a,size:i}){var l;const c=[],{tokens:d,fg:u,bg:h,rootStyle:f}=t.codeToTokens(n,{lang:s,theme:t.getLoadedThemes()[0]}),m=f||(u&&h?`--prosemirror-highlight:${u};--prosemirror-highlight-bg:${h}`:"");if(m){const g=kr.node(a,a+i,{style:m});c.push(g)}let p=a+1;for(const g of d){for(const y of g){const b=p+y.content.length,v=kr.inline(p,b,{style:OSe((l=y.htmlStyle)!=null?l:`color: ${y.color}`),class:"shiki"});c.push(v),p=b}p+=1}return c}}function OSe(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r}`).join(";")}const RSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,PSe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ISe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,DSe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,LSe=ms.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ka(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Jm({find:RSe,type:this.type}),Jm({find:ISe,type:this.type})]},addPasteRules(){return[Ch({find:PSe,type:this.type}),Ch({find:DSe,type:this.type})]}}),$Se=/(^|[^`])`([^`]+)`(?!`)/,FSe=/(^|[^`])`([^`]+)`(?!`)/g,BSe=ms.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ka(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Jm({find:$Se,type:this.type})]},addPasteRules(){return[Ch({find:FSe,type:this.type})]}}),zSe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,USe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,VSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,HSe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,WSe=ms.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ka(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Jm({find:zSe,type:this.type}),Jm({find:VSe,type:this.type})]},addPasteRules(){return[Ch({find:USe,type:this.type}),Ch({find:HSe,type:this.type})]}}),qSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,GSe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,KSe=ms.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ka(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Jm({find:qSe,type:this.type})]},addPasteRules(){return[Ch({find:GSe,type:this.type})]}}),ZSe=ms.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ka(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),YSe=al.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Ka(this.options.HTMLAttributes,t),0]}}),XSe=al.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(n=>parseInt(n,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Ka(this.options.HTMLAttributes,t),0]}});class sn extends gt{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return sn.valid(n)?new sn(n):gt.near(n)}content(){return $e.empty}eq(e){return e instanceof sn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new sn(e.resolve(r.pos))}getBookmark(){return new E3(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!JSe(e)||!QSe(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let s=r.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&sn.valid(e))return e;let s=e.pos,a=null;for(let i=e.depth;;i--){let l=e.node(i);if(r>0?e.indexAfter(i)<l.childCount:e.index(i)>0){a=l.child(r>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;s+=r;let c=e.doc.resolve(s);if(sn.valid(c))return c}for(;;){let i=r>0?a.firstChild:a.lastChild;if(!i){if(a.isAtom&&!a.isText&&!it.isSelectable(a)){e=e.doc.resolve(s+a.nodeSize*r),n=!1;continue e}break}a=i,s+=r;let l=e.doc.resolve(s);if(sn.valid(l))return l}return null}}}sn.prototype.visible=!1;sn.findFrom=sn.findGapCursorFrom;gt.jsonID("gapcursor",sn);class E3{constructor(e){this.pos=e}map(e){return new E3(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return sn.valid(r)?new sn(r):gt.near(r)}}function JSe(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function QSe(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function eEe(){return new Dt({props:{decorations:sEe,createSelectionBetween(t,e,r){return e.pos==r.pos&&sn.valid(r)?new sn(r):null},handleClick:rEe,handleKeyDown:tEe,handleDOMEvents:{beforeinput:nEe}}})}const tEe=h3({ArrowLeft:w1("horiz",-1),ArrowRight:w1("horiz",1),ArrowUp:w1("vert",-1),ArrowDown:w1("vert",1)});function w1(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,a){let i=n.selection,l=e>0?i.$to:i.$from,c=i.empty;if(i instanceof Je){if(!a.endOfTextblock(r)||l.depth==0)return!1;c=!1,l=n.doc.resolve(e>0?l.after():l.before())}let d=sn.findGapCursorFrom(l,e,c);return d?(s&&s(n.tr.setSelection(new sn(d))),!0):!1}}function rEe(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!sn.valid(n))return!1;let s=t.posAtCoords({left:r.clientX,top:r.clientY});return s&&s.inside>-1&&it.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new sn(n))),!0)}function nEe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof sn))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let s=Ne.empty;for(let i=n.length-1;i>=0;i--)s=Ne.from(n[i].createAndFill(null,s));let a=t.state.tr.replace(r.pos,r.pos,new $e(s,0,0));return a.setSelection(Je.near(a.doc.resolve(r.pos+1))),t.dispatch(a),!1}function sEe(t){if(!(t.selection instanceof sn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[kr.widget(t.selection.head,e,{key:"gapcursor"})])}const aEe=Tr.create({name:"gapCursor",addProseMirrorPlugins(){return[eEe()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ft(nt(t,"allowGapCursor",r)))!==null&&e!==void 0?e:null}}});var Zb=200,Gn=function(){};Gn.prototype.append=function(e){return e.length?(e=Gn.from(e),!this.length&&e||e.length<Zb&&this.leafAppend(e)||this.length<Zb&&e.leafPrepend(this)||this.appendInner(e)):this};Gn.prototype.prepend=function(e){return e.length?Gn.from(e).append(this):this};Gn.prototype.appendInner=function(e){return new iEe(this,e)};Gn.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Gn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Gn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Gn.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Gn.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(a,i){return s.push(e(a,i))},r,n),s};Gn.from=function(e){return e instanceof Gn?e:e&&e.length?new QV(e):Gn.empty};var QV=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new e(this.values.slice(s,a))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,a,i,l){for(var c=a;c<i;c++)if(s(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(s,a,i,l){for(var c=a-1;c>=i;c--)if(s(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Zb)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Zb)return new e(s.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Gn);Gn.empty=new QV([]);var iEe=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,a,i){var l=this.left.length;if(s<l&&this.left.forEachInner(n,s,Math.min(a,l),i)===!1||a>l&&this.right.forEachInner(n,Math.max(s-l,0),Math.min(this.length,a)-l,i+l)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,a,i){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(n,s-l,Math.max(a,l)-l,i+l)===!1||a<l&&this.left.forEachInvertedInner(n,Math.min(s,l),a,i)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(n,s):n>=a?this.right.slice(n-a,s-a):this.left.slice(n,a).append(this.right.slice(0,s-a))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Gn);const oEe=500;class Zi{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,a;r&&(s=this.remapping(n,this.items.length),a=s.maps.length);let i=e.tr,l,c,d=[],u=[];return this.items.forEach((h,f)=>{if(!h.step){s||(s=this.remapping(n,f+1),a=s.maps.length),a--,u.push(h);return}if(s){u.push(new kc(h.map));let m=h.step.map(s.slice(a)),p;m&&i.maybeStep(m).doc&&(p=i.mapping.maps[i.mapping.maps.length-1],d.push(new kc(p,void 0,void 0,d.length+u.length))),a--,p&&s.appendMap(p,a)}else i.maybeStep(h.step);if(h.selection)return l=s?h.selection.map(s.slice(a)):h.selection,c=new Zi(this.items.slice(0,n).append(u.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:i,selection:l}}addTransform(e,r,n,s){let a=[],i=this.eventCount,l=this.items,c=!s&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),f=new kc(e.mapping.maps[u],h,r),m;(m=c&&c.merge(f))&&(f=m,u?a.pop():l=l.slice(0,l.length-1)),a.push(f),r&&(i++,r=void 0),s||(c=f)}let d=i-n.depth;return d>cEe&&(l=lEe(l,d),i-=d),new Zi(l.append(a),i)}remapping(e,r){let n=new Gm;return this.items.forEach((s,a)=>{let i=s.mirrorOffset!=null&&a-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,i)},e,r),n}addMaps(e){return this.eventCount==0?this:new Zi(this.items.append(e.map(r=>new kc(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-r),a=e.mapping,i=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},s);let c=r;this.items.forEach(f=>{let m=a.getMirror(--c);if(m==null)return;i=Math.min(i,m);let p=a.maps[m];if(f.step){let g=e.steps[m].invert(e.docs[m]),y=f.selection&&f.selection.map(a.slice(c+1,m));y&&l++,n.push(new kc(p,g,y))}else n.push(new kc(p))},s);let d=[];for(let f=r;f<i;f++)d.push(new kc(a.maps[f]));let u=this.items.slice(0,s).append(d).append(n),h=new Zi(u,l);return h.emptyItemCount()>oEe&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,s=[],a=0;return this.items.forEach((i,l)=>{if(l>=e)s.push(i),i.selection&&a++;else if(i.step){let c=i.step.map(r.slice(n)),d=c&&c.getMap();if(n--,d&&r.appendMap(d,n),c){let u=i.selection&&i.selection.map(r.slice(n));u&&a++;let h=new kc(d.invert(),c,u),f,m=s.length-1;(f=s.length&&s[m].merge(h))?s[m]=f:s.push(h)}}else i.map&&n--},this.items.length,0),new Zi(Gn.from(s.reverse()),a)}}Zi.empty=new Zi(Gn.empty,0);function lEe(t,e){let r;return t.forEach((n,s)=>{if(n.selection&&e--==0)return r=s,!1}),t.slice(r)}let kc=class eH{constructor(e,r,n,s){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new eH(r.getMap().invert(),r,this.selection)}}};class Rc{constructor(e,r,n,s,a){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=s,this.prevComposition=a}}const cEe=20;function dEe(t,e,r,n){let s=r.getMeta(rh),a;if(s)return s.historyState;r.getMeta(fEe)&&(t=new Rc(t.done,t.undone,null,0,-1));let i=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(i&&i.getMeta(rh))return i.getMeta(rh).redo?new Rc(t.done.addTransform(r,void 0,n,mv(e)),t.undone,Q8(r.mapping.maps),t.prevTime,t.prevComposition):new Rc(t.done,t.undone.addTransform(r,void 0,n,mv(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let l=r.getMeta("composition"),c=t.prevTime==0||!i&&t.prevComposition!=l&&(t.prevTime<(r.time||0)-n.newGroupDelay||!uEe(r,t.prevRanges)),d=i?IN(t.prevRanges,r.mapping):Q8(r.mapping.maps);return new Rc(t.done.addTransform(r,c?e.selection.getBookmark():void 0,n,mv(e)),Zi.empty,d,r.time,l??t.prevComposition)}else return(a=r.getMeta("rebased"))?new Rc(t.done.rebased(r,a),t.undone.rebased(r,a),IN(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new Rc(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),IN(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function uEe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,s)=>{for(let a=0;a<e.length;a+=2)n<=e[a+1]&&s>=e[a]&&(r=!0)}),r}function Q8(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,s,a,i)=>e.push(a,i));return e}function IN(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let s=e.map(t[n],1),a=e.map(t[n+1],-1);s<=a&&r.push(s,a)}return r}function hEe(t,e,r){let n=mv(e),s=rh.get(e).spec.config,a=(r?t.undone:t.done).popEvent(e,n);if(!a)return null;let i=a.selection.resolve(a.transform.doc),l=(r?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),s,n),c=new Rc(r?l:a.remaining,r?a.remaining:l,null,0,-1);return a.transform.setSelection(i).setMeta(rh,{redo:r,historyState:c})}let DN=!1,eP=null;function mv(t){let e=t.plugins;if(eP!=e){DN=!1,eP=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){DN=!0;break}}return DN}const rh=new Qt("history"),fEe=new Qt("closeHistory");function mEe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Dt({key:rh,state:{init(){return new Rc(Zi.empty,Zi.empty,null,0,-1)},apply(e,r,n){return dEe(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,s=n=="historyUndo"?j3:n=="historyRedo"?T3:null;return s?(r.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function tH(t,e){return(r,n)=>{let s=rh.getState(r);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(n){let a=hEe(s,r,t);a&&n(e?a.scrollIntoView():a)}return!0}}const j3=tH(!1,!0),T3=tH(!0,!0),pEe=Tr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>j3(t,e),redo:()=>({state:t,dispatch:e})=>T3(t,e)}},addProseMirrorPlugins(){return[mEe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),gEe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xEe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Jj="numeric",Qj="ascii",e4="alpha",ag="asciinumeric",O0="alphanumeric",t4="domain",rH="emoji",yEe="scheme",vEe="slashscheme",LN="whitespace";function bEe(t,e){return t in e||(e[t]=[]),e[t]}function Iu(t,e,r){e[Jj]&&(e[ag]=!0,e[O0]=!0),e[Qj]&&(e[ag]=!0,e[e4]=!0),e[ag]&&(e[O0]=!0),e[e4]&&(e[O0]=!0),e[O0]&&(e[t4]=!0),e[rH]&&(e[t4]=!0);for(const n in e){const s=bEe(n,r);s.indexOf(t)<0&&s.push(t)}}function wEe(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function oa(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}oa.groups={};oa.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const s=e.jr[n][0],a=e.jr[n][1];if(a&&s.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let s=0;s<t.length;s++)this.tt(t[s],e,r,n)},tr(t,e,r,n){n=n||oa.groups;let s;return e&&e.j?s=e:(s=new oa(e),r&&n&&Iu(e,r,n)),this.jr.push([t,s]),s},ts(t,e,r,n){let s=this;const a=t.length;if(!a)return s;for(let i=0;i<a-1;i++)s=s.tt(t[i]);return s.tt(t[a-1],e,r,n)},tt(t,e,r,n){n=n||oa.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const a=e;let i,l=s.go(t);if(l?(i=new oa,Object.assign(i.j,l.j),i.jr.push.apply(i.jr,l.jr),i.jd=l.jd,i.t=l.t):i=new oa,a){if(n)if(i.t&&typeof i.t=="string"){const c=Object.assign(wEe(i.t,n),r);Iu(a,c,n)}else r&&Iu(a,r,n);i.t=a}return s.j[t]=i,i}};const Pt=(t,e,r,n,s)=>t.ta(e,r,n,s),Qr=(t,e,r,n,s)=>t.tr(e,r,n,s),tP=(t,e,r,n,s)=>t.ts(e,r,n,s),Ie=(t,e,r,n,s)=>t.tt(e,r,n,s),kl="WORD",r4="UWORD",nH="ASCIINUMERICAL",sH="ALPHANUMERICAL",ax="LOCALHOST",n4="TLD",s4="UTLD",pv="SCHEME",wf="SLASH_SCHEME",_3="NUM",a4="WS",A3="NL",ig="OPENBRACE",og="CLOSEBRACE",Yb="OPENBRACKET",Xb="CLOSEBRACKET",Jb="OPENPAREN",Qb="CLOSEPAREN",ew="OPENANGLEBRACKET",tw="CLOSEANGLEBRACKET",rw="FULLWIDTHLEFTPAREN",nw="FULLWIDTHRIGHTPAREN",sw="LEFTCORNERBRACKET",aw="RIGHTCORNERBRACKET",iw="LEFTWHITECORNERBRACKET",ow="RIGHTWHITECORNERBRACKET",lw="FULLWIDTHLESSTHAN",cw="FULLWIDTHGREATERTHAN",dw="AMPERSAND",uw="APOSTROPHE",hw="ASTERISK",Pc="AT",fw="BACKSLASH",mw="BACKTICK",pw="CARET",zc="COLON",M3="COMMA",gw="DOLLAR",jo="DOT",xw="EQUALS",O3="EXCLAMATION",oi="HYPHEN",lg="PERCENT",yw="PIPE",vw="PLUS",bw="POUND",cg="QUERY",R3="QUOTE",aH="FULLWIDTHMIDDLEDOT",P3="SEMI",To="SLASH",dg="TILDE",ww="UNDERSCORE",iH="EMOJI",kw="SYM";var oH=Object.freeze({__proto__:null,ALPHANUMERICAL:sH,AMPERSAND:dw,APOSTROPHE:uw,ASCIINUMERICAL:nH,ASTERISK:hw,AT:Pc,BACKSLASH:fw,BACKTICK:mw,CARET:pw,CLOSEANGLEBRACKET:tw,CLOSEBRACE:og,CLOSEBRACKET:Xb,CLOSEPAREN:Qb,COLON:zc,COMMA:M3,DOLLAR:gw,DOT:jo,EMOJI:iH,EQUALS:xw,EXCLAMATION:O3,FULLWIDTHGREATERTHAN:cw,FULLWIDTHLEFTPAREN:rw,FULLWIDTHLESSTHAN:lw,FULLWIDTHMIDDLEDOT:aH,FULLWIDTHRIGHTPAREN:nw,HYPHEN:oi,LEFTCORNERBRACKET:sw,LEFTWHITECORNERBRACKET:iw,LOCALHOST:ax,NL:A3,NUM:_3,OPENANGLEBRACKET:ew,OPENBRACE:ig,OPENBRACKET:Yb,OPENPAREN:Jb,PERCENT:lg,PIPE:yw,PLUS:vw,POUND:bw,QUERY:cg,QUOTE:R3,RIGHTCORNERBRACKET:aw,RIGHTWHITECORNERBRACKET:ow,SCHEME:pv,SEMI:P3,SLASH:To,SLASH_SCHEME:wf,SYM:kw,TILDE:dg,TLD:n4,UNDERSCORE:ww,UTLD:s4,UWORD:r4,WORD:kl,WS:a4});const pl=/[a-z]/,x0=new RegExp("\\p{L}","u"),$N=new RegExp("\\p{Emoji}","u"),gl=/\d/,FN=/\s/,rP="\r",BN=`
`,kEe="",CEe="",zN="";let k1=null,C1=null;function NEe(t=[]){const e={};oa.groups=e;const r=new oa;k1==null&&(k1=nP(gEe)),C1==null&&(C1=nP(xEe)),Ie(r,"'",uw),Ie(r,"{",ig),Ie(r,"}",og),Ie(r,"[",Yb),Ie(r,"]",Xb),Ie(r,"(",Jb),Ie(r,")",Qb),Ie(r,"<",ew),Ie(r,">",tw),Ie(r,"",rw),Ie(r,"",nw),Ie(r,"",sw),Ie(r,"",aw),Ie(r,"",iw),Ie(r,"",ow),Ie(r,"",lw),Ie(r,"",cw),Ie(r,"&",dw),Ie(r,"*",hw),Ie(r,"@",Pc),Ie(r,"`",mw),Ie(r,"^",pw),Ie(r,":",zc),Ie(r,",",M3),Ie(r,"$",gw),Ie(r,".",jo),Ie(r,"=",xw),Ie(r,"!",O3),Ie(r,"-",oi),Ie(r,"%",lg),Ie(r,"|",yw),Ie(r,"+",vw),Ie(r,"#",bw),Ie(r,"?",cg),Ie(r,'"',R3),Ie(r,"/",To),Ie(r,";",P3),Ie(r,"~",dg),Ie(r,"_",ww),Ie(r,"\\",fw),Ie(r,"",aH);const n=Qr(r,gl,_3,{[Jj]:!0});Qr(n,gl,n);const s=Qr(n,pl,nH,{[ag]:!0}),a=Qr(n,x0,sH,{[O0]:!0}),i=Qr(r,pl,kl,{[Qj]:!0});Qr(i,gl,s),Qr(i,pl,i),Qr(s,gl,s),Qr(s,pl,s);const l=Qr(r,x0,r4,{[e4]:!0});Qr(l,pl),Qr(l,gl,a),Qr(l,x0,l),Qr(a,gl,a),Qr(a,pl),Qr(a,x0,a);const c=Ie(r,BN,A3,{[LN]:!0}),d=Ie(r,rP,a4,{[LN]:!0}),u=Qr(r,FN,a4,{[LN]:!0});Ie(r,zN,u),Ie(d,BN,c),Ie(d,zN,u),Qr(d,FN,u),Ie(u,rP),Ie(u,BN),Qr(u,FN,u),Ie(u,zN,u);const h=Qr(r,$N,iH,{[rH]:!0});Ie(h,"#"),Qr(h,$N,h),Ie(h,kEe,h);const f=Ie(h,CEe);Ie(f,"#"),Qr(f,$N,h);const m=[[pl,i],[gl,s]],p=[[pl,null],[x0,l],[gl,a]];for(let g=0;g<k1.length;g++)Cc(r,k1[g],n4,kl,m);for(let g=0;g<C1.length;g++)Cc(r,C1[g],s4,r4,p);Iu(n4,{tld:!0,ascii:!0},e),Iu(s4,{utld:!0,alpha:!0},e),Cc(r,"file",pv,kl,m),Cc(r,"mailto",pv,kl,m),Cc(r,"http",wf,kl,m),Cc(r,"https",wf,kl,m),Cc(r,"ftp",wf,kl,m),Cc(r,"ftps",wf,kl,m),Iu(pv,{scheme:!0,ascii:!0},e),Iu(wf,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],v=t[g][1]?{[yEe]:!0}:{[vEe]:!0};y.indexOf("-")>=0?v[t4]=!0:pl.test(y)?gl.test(y)?v[ag]=!0:v[Qj]=!0:v[Jj]=!0,tP(r,y,y,v)}return tP(r,"localhost",ax,{ascii:!0}),r.jd=new oa(kw),{start:r,tokens:Object.assign({groups:e},oH)}}function lH(t,e){const r=SEe(e.replace(/[A-Z]/g,l=>l.toLowerCase())),n=r.length,s=[];let a=0,i=0;for(;i<n;){let l=t,c=null,d=0,u=null,h=-1,f=-1;for(;i<n&&(c=l.go(r[i]));)l=c,l.accepts()?(h=0,f=0,u=l):h>=0&&(h+=r[i].length,f++),d+=r[i].length,a+=r[i].length,i++;a-=h,i-=f,d-=h,s.push({t:u.t,v:e.slice(a-d,a),s:a-d,e:a})}return s}function SEe(t){const e=[],r=t.length;let n=0;for(;n<r;){let s=t.charCodeAt(n),a,i=s<55296||s>56319||n+1===r||(a=t.charCodeAt(n+1))<56320||a>57343?t[n]:t.slice(n,n+2);e.push(i),n+=i.length}return e}function Cc(t,e,r,n,s){let a;const i=e.length;for(let l=0;l<i-1;l++){const c=e[l];t.j[c]?a=t.j[c]:(a=new oa(n),a.jr=s.slice(),t.j[c]=a),t=a}return a=new oa(r),a.jr=s.slice(),t.j[e[i-1]]=a,a}function nP(t){const e=[],r=[];let n=0,s="0123456789";for(;n<t.length;){let a=0;for(;s.indexOf(t[n+a])>=0;)a++;if(a>0){e.push(r.join(""));for(let i=parseInt(t.substring(n,n+a),10);i>0;i--)r.pop();n+=a}else r.push(t[n]),n++}return e}const ix={defaultProtocol:"http",events:null,format:sP,formatHref:sP,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function I3(t,e=null){let r=Object.assign({},ix);t&&(r=Object.assign(r,t instanceof I3?t.o:t));const n=r.ignoreTags,s=[];for(let a=0;a<n.length;a++)s.push(n[a].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=s}I3.prototype={o:ix,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:ix[t],typeof s=="function"&&n&&(s=s(e,r))):typeof s=="function"&&n&&(s=s(e,r.t,r)),s)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function sP(t){return t}function cH(t,e){this.t="token",this.v=t,this.tk=e}cH.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=ix.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),s=t.get("tagName",r,e),a=this.toFormattedString(t),i={},l=t.get("className",r,e),c=t.get("target",r,e),d=t.get("rel",r,e),u=t.getObj("attributes",r,e),h=t.getObj("events",r,e);return i.href=n,l&&(i.class=l),c&&(i.target=c),d&&(i.rel=d),u&&Object.assign(i,u),{tagName:s,attributes:i,content:a,eventListeners:h}}};function d2(t,e){class r extends cH{constructor(s,a){super(s,a),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const aP=d2("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),iP=d2("text"),EEe=d2("nl"),N1=d2("url",{isLink:!0,toHref(t=ix.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==ax&&t[1].t===zc}}),si=t=>new oa(t);function jEe({groups:t}){const e=t.domain.concat([dw,hw,Pc,fw,mw,pw,gw,xw,oi,_3,lg,yw,vw,bw,To,kw,dg,ww]),r=[uw,zc,M3,jo,O3,lg,cg,R3,P3,ew,tw,ig,og,Xb,Yb,Jb,Qb,rw,nw,sw,aw,iw,ow,lw,cw],n=[dw,uw,hw,fw,mw,pw,gw,xw,oi,ig,og,lg,yw,vw,bw,cg,To,kw,dg,ww],s=si(),a=Ie(s,dg);Pt(a,n,a),Pt(a,t.domain,a);const i=si(),l=si(),c=si();Pt(s,t.domain,i),Pt(s,t.scheme,l),Pt(s,t.slashscheme,c),Pt(i,n,a),Pt(i,t.domain,i);const d=Ie(i,Pc);Ie(a,Pc,d),Ie(l,Pc,d),Ie(c,Pc,d);const u=Ie(a,jo);Pt(u,n,a),Pt(u,t.domain,a);const h=si();Pt(d,t.domain,h),Pt(h,t.domain,h);const f=Ie(h,jo);Pt(f,t.domain,h);const m=si(aP);Pt(f,t.tld,m),Pt(f,t.utld,m),Ie(d,ax,m);const p=Ie(h,oi);Ie(p,oi,p),Pt(p,t.domain,h),Pt(m,t.domain,h),Ie(m,jo,f),Ie(m,oi,p);const g=Ie(m,zc);Pt(g,t.numeric,aP);const y=Ie(i,oi),b=Ie(i,jo);Ie(y,oi,y),Pt(y,t.domain,i),Pt(b,n,a),Pt(b,t.domain,i);const v=si(N1);Pt(b,t.tld,v),Pt(b,t.utld,v),Pt(v,t.domain,i),Pt(v,n,a),Ie(v,jo,b),Ie(v,oi,y),Ie(v,Pc,d);const w=Ie(v,zc),k=si(N1);Pt(w,t.numeric,k);const N=si(N1),S=si();Pt(N,e,N),Pt(N,r,S),Pt(S,e,N),Pt(S,r,S),Ie(v,To,N),Ie(k,To,N);const C=Ie(l,zc),E=Ie(c,zc),T=Ie(E,To),R=Ie(T,To);Pt(l,t.domain,i),Ie(l,jo,b),Ie(l,oi,y),Pt(c,t.domain,i),Ie(c,jo,b),Ie(c,oi,y),Pt(C,t.domain,N),Ie(C,To,N),Ie(C,cg,N),Pt(R,t.domain,N),Pt(R,e,N),Ie(R,To,N);const B=[[ig,og],[Yb,Xb],[Jb,Qb],[ew,tw],[rw,nw],[sw,aw],[iw,ow],[lw,cw]];for(let M=0;M<B.length;M++){const[L,V]=B[M],ee=Ie(N,L);Ie(S,L,ee),Ie(ee,V,N);const Q=si(N1);Pt(ee,e,Q);const J=si();Pt(ee,r),Pt(Q,e,Q),Pt(Q,r,J),Pt(J,e,Q),Pt(J,r,J),Ie(Q,V,N),Ie(J,V,N)}return Ie(s,ax,v),Ie(s,A3,EEe),{start:s,tokens:oH}}function TEe(t,e,r){let n=r.length,s=0,a=[],i=[];for(;s<n;){let l=t,c=null,d=null,u=0,h=null,f=-1;for(;s<n&&!(c=l.go(r[s].t));)i.push(r[s++]);for(;s<n&&(d=c||l.go(r[s].t));)c=null,l=d,l.accepts()?(f=0,h=l):f>=0&&f++,s++,u++;if(f<0)s-=u,s<n&&(i.push(r[s]),s++);else{i.length>0&&(a.push(UN(iP,e,i)),i=[]),s-=f,u-=f;const m=h.t,p=r.slice(s-u,s);a.push(UN(m,e,p))}}return i.length>0&&a.push(UN(iP,e,i)),a}function UN(t,e,r){const n=r[0].s,s=r[r.length-1].e,a=e.slice(n,s);return new t(a,r)}const _Ee=typeof console<"u"&&console&&console.warn||(()=>{}),AEe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Br={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function MEe(){return oa.groups={},Br.scanner=null,Br.parser=null,Br.tokenQueue=[],Br.pluginQueue=[],Br.customSchemes=[],Br.initialized=!1,Br}function oP(t,e=!1){if(Br.initialized&&_Ee(`linkifyjs: already initialized - will not register custom scheme "${t}" ${AEe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Br.customSchemes.push([t,e])}function OEe(){Br.scanner=NEe(Br.customSchemes);for(let t=0;t<Br.tokenQueue.length;t++)Br.tokenQueue[t][1]({scanner:Br.scanner});Br.parser=jEe(Br.scanner.tokens);for(let t=0;t<Br.pluginQueue.length;t++)Br.pluginQueue[t][1]({scanner:Br.scanner,parser:Br.parser});return Br.initialized=!0,Br}function D3(t){return Br.initialized||OEe(),TEe(Br.parser.start,t,lH(Br.scanner.start,t))}D3.scan=lH;function dH(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new I3(r),s=D3(t),a=[];for(let i=0;i<s.length;i++){const l=s[i];l.isLink&&(!e||l.t===e)&&n.check(l)&&a.push(l.toFormattedObject(n))}return a}const L3="[\0- -\u2029]",REe=new RegExp(L3),PEe=new RegExp(`${L3}$`),IEe=new RegExp(L3,"g");function DEe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function LEe(t){return new Dt({key:new Qt("autolink"),appendTransaction:(e,r,n)=>{const s=e.some(d=>d.docChanged)&&!r.doc.eq(n.doc),a=e.some(d=>d.getMeta("preventAutolink"));if(!s||a)return;const{tr:i}=n,l=b3(r.doc,[...e]);if(RV(l).forEach(({newRange:d})=>{const u=MV(n.doc,d,m=>m.isTextblock);let h,f;if(u.length>1)h=u[0],f=n.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(u.length){const m=n.doc.textBetween(d.from,d.to," "," ");if(!PEe.test(m))return;h=u[0],f=n.doc.textBetween(h.pos,d.to,void 0," ")}if(h&&f){const m=f.split(REe).filter(Boolean);if(m.length<=0)return!1;const p=m[m.length-1],g=h.pos+f.lastIndexOf(p);if(!p)return!1;const y=D3(p).map(b=>b.toObject(t.defaultProtocol));if(!DEe(y))return!1;y.filter(b=>b.isLink).map(b=>({...b,from:g+b.start+1,to:g+b.end+1})).filter(b=>n.schema.marks.code?!n.doc.rangeHasMark(b.from,b.to,n.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{w3(b.from,b.to,n.doc).some(v=>v.mark.type===t.type)||i.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!i.steps.length)return i}})}function $Ee(t){return new Dt({key:new Qt("handleClickLink"),props:{handleClick:(e,r,n)=>{var s,a;if(n.button!==0||!e.editable)return!1;let i=n.target;const l=[];for(;i.nodeName!=="DIV";)l.push(i),i=i.parentNode;if(!l.find(f=>f.nodeName==="A"))return!1;const c=OV(e.state,t.type.name),d=n.target,u=(s=d==null?void 0:d.href)!==null&&s!==void 0?s:c.href,h=(a=d==null?void 0:d.target)!==null&&a!==void 0?a:c.target;return d&&u?(window.open(u,h),!0):!1}}})}function FEe(t){return new Dt({key:new Qt("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{state:s}=e,{selection:a}=s,{empty:i}=a;if(i)return!1;let l="";n.content.forEach(d=>{l+=d.textContent});const c=dH(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!c?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function fu(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&r.push(s)}),!t||t.replace(IEe,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const BEe=ms.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){oP(t);return}oP(t.scheme,t.optionalSlashes)})},onDestroy(){MEe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!fu(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!fu(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!fu(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ka(this.options.HTMLAttributes,t),0]:["a",Ka(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!fu(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!fu(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ch({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,s=dH(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:i=>!!fu(i,r),protocols:r,defaultProtocol:n}));s.length&&s.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(LEe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!fu(s,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push($Ee({type:this.type})),this.options.linkOnPaste&&t.push(FEe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),zEe=al.create({name:"text",group:"inline"}),ji=()=>new Map,i4=t=>{const e=ji();return t.forEach((r,n)=>{e.set(n,r)}),e},ll=(t,e,r)=>{let n=t.get(e);return n===void 0&&t.set(e,n=r()),n},UEe=(t,e)=>{const r=[];for(const[n,s]of t)r.push(e(s,n));return r},VEe=(t,e)=>{for(const[r,n]of t)if(e(n,r))return!0;return!1},Sh=()=>new Set,VN=t=>t[t.length-1],HEe=(t,e)=>{for(let r=0;r<e.length;r++)t.push(e[r])},Bd=Array.from,WEe=(t,e)=>{for(let r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1},o4=Array.isArray;class uH{constructor(){this._observers=ji()}on(e,r){return ll(this._observers,e,Sh).add(r),r}once(e,r){const n=(...s)=>{this.off(e,n),r(...s)};this.on(e,n)}off(e,r){const n=this._observers.get(e);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(e))}emit(e,r){return Bd((this._observers.get(e)||ji()).values()).forEach(n=>n(...r))}destroy(){this._observers=ji()}}const lc=Math.floor,gv=Math.abs,Kl=(t,e)=>t<e?t:e,ho=(t,e)=>t>e?t:e,hH=t=>t!==0?t<0:1/t<0,lP=1,cP=2,HN=4,WN=8,ox=32,Zl=64,Zs=128,qEe=1<<29,u2=31,l4=63,nh=127,GEe=2147483647,fH=Number.MAX_SAFE_INTEGER,KEe=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&lc(t)===t),ZEe=String.fromCharCode,YEe=t=>t.toLowerCase(),XEe=/^\s*/g,JEe=t=>t.replace(XEe,""),QEe=/([A-Z])/g,dP=(t,e)=>JEe(t.replace(QEe,r=>`${e}${YEe(r)}`)),eje=t=>{const e=unescape(encodeURIComponent(t)),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.codePointAt(s);return n},lx=typeof TextEncoder<"u"?new TextEncoder:null,tje=t=>lx.encode(t),rje=lx?tje:eje;let ug=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ug&&ug.decode(new Uint8Array).length===1&&(ug=null);class sy{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ay=()=>new sy,nje=t=>{const e=ay();return t(e),Qi(e)},sje=t=>{let e=t.cpos;for(let r=0;r<t.bufs.length;r++)e+=t.bufs[r].length;return e},Qi=t=>{const e=new Uint8Array(sje(t));let r=0;for(let n=0;n<t.bufs.length;n++){const s=t.bufs[n];e.set(s,r),r+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),r),e},aje=(t,e)=>{const r=t.cbuf.length;r-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(ho(r,e)*2),t.cpos=0)},$n=(t,e)=>{const r=t.cbuf.length;t.cpos===r&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(r*2),t.cpos=0),t.cbuf[t.cpos++]=e},c4=$n,Vt=(t,e)=>{for(;e>nh;)$n(t,Zs|nh&e),e=lc(e/128);$n(t,nh&e)},$3=(t,e)=>{const r=hH(e);for(r&&(e=-e),$n(t,(e>l4?Zs:0)|(r?Zl:0)|l4&e),e=lc(e/64);e>0;)$n(t,(e>nh?Zs:0)|nh&e),e=lc(e/128)},d4=new Uint8Array(3e4),ije=d4.length/3,oje=(t,e)=>{if(e.length<ije){const r=lx.encodeInto(e,d4).written||0;Vt(t,r);for(let n=0;n<r;n++)$n(t,d4[n])}else Ea(t,rje(e))},lje=(t,e)=>{const r=unescape(encodeURIComponent(e)),n=r.length;Vt(t,n);for(let s=0;s<n;s++)$n(t,r.codePointAt(s))},im=lx&&lx.encodeInto?oje:lje,h2=(t,e)=>{const r=t.cbuf.length,n=t.cpos,s=Kl(r-n,e.length),a=e.length-s;t.cbuf.set(e.subarray(0,s),n),t.cpos+=s,a>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ho(r*2,a)),t.cbuf.set(e.subarray(s)),t.cpos=a)},Ea=(t,e)=>{Vt(t,e.byteLength),h2(t,e)},F3=(t,e)=>{aje(t,e);const r=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,r},cje=(t,e)=>F3(t,4).setFloat32(0,e,!1),dje=(t,e)=>F3(t,8).setFloat64(0,e,!1),uje=(t,e)=>F3(t,8).setBigInt64(0,e,!1),uP=new DataView(new ArrayBuffer(4)),hje=t=>(uP.setFloat32(0,t),uP.getFloat32(0)===t),Qm=(t,e)=>{switch(typeof e){case"string":$n(t,119),im(t,e);break;case"number":KEe(e)&&gv(e)<=GEe?($n(t,125),$3(t,e)):hje(e)?($n(t,124),cje(t,e)):($n(t,123),dje(t,e));break;case"bigint":$n(t,122),uje(t,e);break;case"object":if(e===null)$n(t,126);else if(o4(e)){$n(t,117),Vt(t,e.length);for(let r=0;r<e.length;r++)Qm(t,e[r])}else if(e instanceof Uint8Array)$n(t,116),Ea(t,e);else{$n(t,118);const r=Object.keys(e);Vt(t,r.length);for(let n=0;n<r.length;n++){const s=r[n];im(t,s),Qm(t,e[s])}}break;case"boolean":$n(t,e?120:121);break;default:$n(t,127)}};class hP extends sy{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Vt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const fP=t=>{t.count>0&&($3(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Vt(t.encoder,t.count-2))};class xv{constructor(){this.encoder=new sy,this.s=0,this.count=0}write(e){this.s===e?this.count++:(fP(this),this.count=1,this.s=e)}toUint8Array(){return fP(this),Qi(this.encoder)}}const mP=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);$3(t.encoder,e),t.count>1&&Vt(t.encoder,t.count-2)}};class qN{constructor(){this.encoder=new sy,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(mP(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return mP(this),Qi(this.encoder)}}class fje{constructor(){this.sarr=[],this.s="",this.lensE=new xv}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new sy;return this.sarr.push(this.s),this.s="",im(e,this.sarr.join("")),h2(e,this.lensE.toUint8Array()),Qi(e)}}const zd=t=>new Error(t),so=()=>{throw zd("Method unimplemented")},Za=()=>{throw zd("Unexpected case")},mH=zd("Unexpected end of array"),pH=zd("Integer out of Range");class f2{constructor(e){this.arr=e,this.pos=0}}const jp=t=>new f2(t),mje=t=>t.pos!==t.arr.length,pje=(t,e)=>{const r=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,r},ja=t=>pje(t,Lt(t)),ep=t=>t.arr[t.pos++],Lt=t=>{let e=0,r=1;const n=t.arr.length;for(;t.pos<n;){const s=t.arr[t.pos++];if(e=e+(s&nh)*r,r*=128,s<Zs)return e;if(e>fH)throw pH}throw mH},B3=t=>{let e=t.arr[t.pos++],r=e&l4,n=64;const s=(e&Zl)>0?-1:1;if(!(e&Zs))return s*r;const a=t.arr.length;for(;t.pos<a;){if(e=t.arr[t.pos++],r=r+(e&nh)*n,n*=128,e<Zs)return s*r;if(r>fH)throw pH}throw mH},gje=t=>{let e=Lt(t);if(e===0)return"";{let r=String.fromCodePoint(ep(t));if(--e<100)for(;e--;)r+=String.fromCodePoint(ep(t));else for(;e>0;){const n=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+n);t.pos+=n,r+=String.fromCodePoint.apply(null,s),e-=n}return decodeURIComponent(escape(r))}},xje=t=>ug.decode(ja(t)),om=ug?xje:gje,z3=(t,e)=>{const r=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,r},yje=t=>z3(t,4).getFloat32(0,!1),vje=t=>z3(t,8).getFloat64(0,!1),bje=t=>z3(t,8).getBigInt64(0,!1),wje=[t=>{},t=>null,B3,yje,vje,bje,t=>!1,t=>!0,om,t=>{const e=Lt(t),r={};for(let n=0;n<e;n++){const s=om(t);r[s]=cx(t)}return r},t=>{const e=Lt(t),r=[];for(let n=0;n<e;n++)r.push(cx(t));return r},ja],cx=t=>wje[127-ep(t)](t);class pP extends f2{constructor(e,r){super(e),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),mje(this)?this.count=Lt(this)+1:this.count=-1),this.count--,this.s}}class yv extends f2{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=B3(this);const e=hH(this.s);this.count=1,e&&(this.s=-this.s,this.count=Lt(this)+2)}return this.count--,this.s}}class GN extends f2{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=B3(this),r=e&1;this.diff=lc(e/2),this.count=1,r&&(this.count=Lt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class kje{constructor(e){this.decoder=new yv(e),this.str=om(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),r=this.str.slice(this.spos,e);return this.spos=e,r}}const Cje=crypto.getRandomValues.bind(crypto),Nje=Math.random,gH=()=>Cje(new Uint32Array(1))[0],Sje=t=>t[lc(Nje()*t.length)],Eje="10000000-1000-4000-8000"+-1e11,jje=()=>Eje.replace(/[018]/g,t=>(t^gH()&15>>t/4).toString(16)),Tje=Date.now,gP=t=>new Promise(t);Promise.all.bind(Promise);const xP=t=>t===void 0?null:t;class _je{constructor(){this.map=new Map}setItem(e,r){this.map.set(e,r)}getItem(e){return this.map.get(e)}}let xH=new _je,Aje=!0;try{typeof localStorage<"u"&&localStorage&&(xH=localStorage,Aje=!1)}catch{}const Mje=xH,Oje=Object.assign,yH=Object.keys,Rje=(t,e)=>{for(const r in t)e(t[r],r)},yP=t=>yH(t).length,Pje=t=>{for(const e in t)return!1;return!0},vH=(t,e)=>{for(const r in t)if(!e(t[r],r))return!1;return!0},Ije=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Dje=(t,e)=>t===e||yP(t)===yP(e)&&vH(t,(r,n)=>(r!==void 0||Ije(e,n))&&e[n]===r),Lje=Object.freeze,bH=t=>{for(const e in t){const r=t[e];(typeof r=="object"||typeof r=="function")&&bH(t[e])}return Lje(t)},U3=(t,e,r=0)=>{try{for(;r<t.length;r++)t[r](...e)}finally{r<t.length&&U3(t,e,r+1)}},$je=t=>t,Fje=(t,e)=>e.includes(t);var wH={};const tp=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",kH=typeof window<"u"&&typeof document<"u"&&!tp;let ko;const Bje=()=>{if(ko===void 0)if(tp){ko=ji();const t=process.argv;let e=null;for(let r=0;r<t.length;r++){const n=t[r];n[0]==="-"?(e!==null&&ko.set(e,""),e=n):e!==null&&(ko.set(e,n),e=null)}e!==null&&ko.set(e,"")}else typeof location=="object"?(ko=ji(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,r]=t.split("=");ko.set(`--${dP(e,"-")}`,r),ko.set(`-${dP(e,"-")}`,r)}})):ko=ji();return ko},u4=t=>Bje().has(t),Cw=t=>xP(tp?wH[t.toUpperCase().replaceAll("-","_")]:Mje.getItem(t)),CH=t=>u4("--"+t)||Cw(t)!==null;CH("production");const zje=tp&&Fje(wH.FORCE_COLOR,["true","1","2"]),Uje=zje||!u4("--no-colors")&&!CH("no-color")&&(!tp||process.stdout.isTTY)&&(!tp||u4("--color")||Cw("COLORTERM")!==null||(Cw("TERM")||"").includes("color")),Vje=t=>new Uint8Array(t),Hje=t=>{let e="";for(let r=0;r<t.byteLength;r++)e+=ZEe(t[r]);return btoa(e)},Wje=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),qje=kH?Hje:Wje,Gje=t=>{const e=Vje(t.byteLength);return e.set(t),e},Kje=t=>nje(e=>Qm(e,t));class Zje{constructor(e,r){this.left=e,this.right=r}}const xl=(t,e)=>new Zje(t,e),Yje=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Xje=t=>UEe(t,(e,r)=>`${r}:${e};`).join(""),Jje=t=>class{constructor(r){this._=r}destroy(){t(this._)}},Qje=Jje(clearTimeout),V3=(t,e)=>new Qje(setTimeout(e,t)),mc=Symbol,NH=mc(),SH=mc(),e4e=mc(),t4e=mc(),r4e=mc(),EH=mc(),n4e=mc(),H3=mc(),s4e=mc(),a4e=t=>{var s;t.length===1&&((s=t[0])==null?void 0:s.constructor)===Function&&(t=t[0]());const e=[],r=[];let n=0;for(;n<t.length;n++){const a=t[n];if(a===void 0)break;if(a.constructor===String||a.constructor===Number)e.push(a);else if(a.constructor===Object)break}for(n>0&&r.push(e.join(""));n<t.length;n++){const a=t[n];a instanceof Symbol||r.push(a)}return r},i4e={[NH]:xl("font-weight","bold"),[SH]:xl("font-weight","normal"),[e4e]:xl("color","blue"),[r4e]:xl("color","green"),[t4e]:xl("color","grey"),[EH]:xl("color","red"),[n4e]:xl("color","purple"),[H3]:xl("color","orange"),[s4e]:xl("color","black")},o4e=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],r=[],n=ji();let s=[],a=0;for(;a<t.length;a++){const l=t[a],c=i4e[l];if(c!==void 0)n.set(c.left,c.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const d=Xje(n);a>0||d.length>0?(e.push("%c"+l),r.push(d)):e.push(l)}else break}}for(a>0&&(s=r,s.unshift(e.join("")));a<t.length;a++){const l=t[a];l instanceof Symbol||s.push(l)}return s},jH=Uje?o4e:a4e,l4e=(...t)=>{console.log(...jH(t)),_H.forEach(e=>e.print(t))},TH=(...t)=>{console.warn(...jH(t)),t.unshift(H3),_H.forEach(e=>e.print(t))},_H=Sh(),AH=t=>({[Symbol.iterator](){return this},next:t}),c4e=(t,e)=>AH(()=>{let r;do r=t.next();while(!r.done&&!e(r.value));return r}),KN=(t,e)=>AH(()=>{const{done:r,value:n}=t.next();return{done:r,value:r?void 0:e(n)}});class W3{constructor(e,r){this.clock=e,this.len=r}}class Tp{constructor(){this.clients=new Map}}const Ud=(t,e,r)=>e.clients.forEach((n,s)=>{const a=t.doc.store.clients.get(s);if(a!=null){const i=a[a.length-1],l=i.id.clock+i.length;for(let c=0,d=n[c];c<n.length&&d.clock<l;d=n[++c])HH(t,a,d.clock,d.len,r)}}),d4e=(t,e)=>{let r=0,n=t.length-1;for(;r<=n;){const s=lc((r+n)/2),a=t[s],i=a.clock;if(i<=e){if(e<i+a.len)return s;r=s+1}else n=s-1}return null},_p=(t,e)=>{const r=t.clients.get(e.client);return r!==void 0&&d4e(r,e.clock)!==null},q3=t=>{t.clients.forEach(e=>{e.sort((s,a)=>s.clock-a.clock);let r,n;for(r=1,n=1;r<e.length;r++){const s=e[n-1],a=e[r];s.clock+s.len>=a.clock?s.len=ho(s.len,a.clock+a.len-s.clock):(n<r&&(e[n]=a),n++)}e.length=n})},h4=t=>{const e=new Tp;for(let r=0;r<t.length;r++)t[r].clients.forEach((n,s)=>{if(!e.clients.has(s)){const a=n.slice();for(let i=r+1;i<t.length;i++)HEe(a,t[i].clients.get(s)||[]);e.clients.set(s,a)}});return q3(e),e},dx=(t,e,r,n)=>{ll(t.clients,e,()=>[]).push(new W3(r,n))},MH=()=>new Tp,OH=t=>{const e=MH();return t.clients.forEach((r,n)=>{const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(i.deleted){const l=i.id.clock;let c=i.length;if(a+1<r.length)for(let d=r[a+1];a+1<r.length&&d.deleted;d=r[++a+1])c+=d.length;s.push(new W3(l,c))}}s.length>0&&e.clients.set(n,s)}),e},Ap=(t,e)=>{Vt(t.restEncoder,e.clients.size),Bd(e.clients.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{t.resetDsCurVal(),Vt(t.restEncoder,r);const s=n.length;Vt(t.restEncoder,s);for(let a=0;a<s;a++){const i=n[a];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},G3=t=>{const e=new Tp,r=Lt(t.restDecoder);for(let n=0;n<r;n++){t.resetDsCurVal();const s=Lt(t.restDecoder),a=Lt(t.restDecoder);if(a>0){const i=ll(e.clients,s,()=>[]);for(let l=0;l<a;l++)i.push(new W3(t.readDsClock(),t.readDsLen()))}}return e},vP=(t,e,r)=>{const n=new Tp,s=Lt(t.restDecoder);for(let a=0;a<s;a++){t.resetDsCurVal();const i=Lt(t.restDecoder),l=Lt(t.restDecoder),c=r.clients.get(i)||[],d=un(r,i);for(let u=0;u<l;u++){const h=t.readDsClock(),f=h+t.readDsLen();if(h<d){d<f&&dx(n,i,d,f-d);let m=Oi(c,h),p=c[m];for(!p.deleted&&p.id.clock<h&&(c.splice(m+1,0,Aw(e,p,h-p.id.clock)),m++);m<c.length&&(p=c[m++],p.id.clock<f);)p.deleted||(f<p.id.clock+p.length&&c.splice(m,0,Aw(e,p,f-p.id.clock)),p.delete(e))}else dx(n,i,h,f-h)}}if(n.clients.size>0){const a=new Eh;return Vt(a.restEncoder,0),Ap(a,n),a.toUint8Array()}return null},RH=gH;class nu extends uH{constructor({guid:e=jje(),collectionid:r=null,gc:n=!0,gcFilter:s=()=>!0,meta:a=null,autoLoad:i=!1,shouldLoad:l=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=RH(),this.guid=e,this.collectionid=r,this.share=new Map,this.store=new UH,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=i,this.meta=a,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=gP(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const c=()=>gP(d=>{const u=h=>{(h===void 0||h===!0)&&(this.off("sync",u),d())};this.on("sync",u)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Er(e.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Bd(this.subdocs).map(e=>e.guid))}transact(e,r=null){return Er(this,e,r)}get(e,r=Kn){const n=ll(this.share,e,()=>{const a=new r;return a._integrate(this,null),a}),s=n.constructor;if(r!==Kn&&s!==r)if(s===Kn){const a=new r;a._map=n._map,n._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=a}),a._start=n._start;for(let i=a._start;i!==null;i=i.right)i.parent=a;return a._length=n._length,this.share.set(e,a),a._integrate(this,null),a}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,dm)}getText(e=""){return this.get(e,Vd)}getMap(e=""){return this.get(e,np)}getXmlElement(e=""){return this.get(e,Ws)}getXmlFragment(e=""){return this.get(e,jh)}toJSON(){const e={};return this.share.forEach((r,n)=>{e[n]=r.toJSON()}),e}destroy(){this.isDestroyed=!0,Bd(this.subdocs).forEach(r=>r.destroy());const e=this._item;if(e!==null){this._item=null;const r=e.content;r.doc=new nu({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=e,Er(e.parent.doc,n=>{const s=r.doc;e.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class PH{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Lt(this.restDecoder)}readDsLen(){return Lt(this.restDecoder)}}class IH extends PH{readLeftID(){return Et(Lt(this.restDecoder),Lt(this.restDecoder))}readRightID(){return Et(Lt(this.restDecoder),Lt(this.restDecoder))}readClient(){return Lt(this.restDecoder)}readInfo(){return ep(this.restDecoder)}readString(){return om(this.restDecoder)}readParentInfo(){return Lt(this.restDecoder)===1}readTypeRef(){return Lt(this.restDecoder)}readLen(){return Lt(this.restDecoder)}readAny(){return cx(this.restDecoder)}readBuf(){return Gje(ja(this.restDecoder))}readJSON(){return JSON.parse(om(this.restDecoder))}readKey(){return om(this.restDecoder)}}class u4e{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Lt(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Lt(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class rp extends u4e{constructor(e){super(e),this.keys=[],Lt(e),this.keyClockDecoder=new GN(ja(e)),this.clientDecoder=new yv(ja(e)),this.leftClockDecoder=new GN(ja(e)),this.rightClockDecoder=new GN(ja(e)),this.infoDecoder=new pP(ja(e),ep),this.stringDecoder=new kje(ja(e)),this.parentInfoDecoder=new pP(ja(e),ep),this.typeRefDecoder=new yv(ja(e)),this.lenDecoder=new yv(ja(e))}readLeftID(){return new lm(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new lm(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return cx(this.restDecoder)}readBuf(){return ja(this.restDecoder)}readJSON(){return cx(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const r=this.stringDecoder.read();return this.keys.push(r),r}}}class DH{constructor(){this.restEncoder=ay()}toUint8Array(){return Qi(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Vt(this.restEncoder,e)}writeDsLen(e){Vt(this.restEncoder,e)}}class iy extends DH{writeLeftID(e){Vt(this.restEncoder,e.client),Vt(this.restEncoder,e.clock)}writeRightID(e){Vt(this.restEncoder,e.client),Vt(this.restEncoder,e.clock)}writeClient(e){Vt(this.restEncoder,e)}writeInfo(e){c4(this.restEncoder,e)}writeString(e){im(this.restEncoder,e)}writeParentInfo(e){Vt(this.restEncoder,e?1:0)}writeTypeRef(e){Vt(this.restEncoder,e)}writeLen(e){Vt(this.restEncoder,e)}writeAny(e){Qm(this.restEncoder,e)}writeBuf(e){Ea(this.restEncoder,e)}writeJSON(e){im(this.restEncoder,JSON.stringify(e))}writeKey(e){im(this.restEncoder,e)}}class LH{constructor(){this.restEncoder=ay(),this.dsCurrVal=0}toUint8Array(){return Qi(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const r=e-this.dsCurrVal;this.dsCurrVal=e,Vt(this.restEncoder,r)}writeDsLen(e){e===0&&Za(),Vt(this.restEncoder,e-1),this.dsCurrVal+=e}}class Eh extends LH{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new qN,this.clientEncoder=new xv,this.leftClockEncoder=new qN,this.rightClockEncoder=new qN,this.infoEncoder=new hP(c4),this.stringEncoder=new fje,this.parentInfoEncoder=new hP(c4),this.typeRefEncoder=new xv,this.lenEncoder=new xv}toUint8Array(){const e=ay();return Vt(e,0),Ea(e,this.keyClockEncoder.toUint8Array()),Ea(e,this.clientEncoder.toUint8Array()),Ea(e,this.leftClockEncoder.toUint8Array()),Ea(e,this.rightClockEncoder.toUint8Array()),Ea(e,Qi(this.infoEncoder)),Ea(e,this.stringEncoder.toUint8Array()),Ea(e,Qi(this.parentInfoEncoder)),Ea(e,this.typeRefEncoder.toUint8Array()),Ea(e,this.lenEncoder.toUint8Array()),h2(e,Qi(this.restEncoder)),Qi(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Qm(this.restEncoder,e)}writeBuf(e){Ea(this.restEncoder,e)}writeJSON(e){Qm(this.restEncoder,e)}writeKey(e){const r=this.keyMap.get(e);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(r)}}const h4e=(t,e,r,n)=>{n=ho(n,e[0].id.clock);const s=Oi(e,n);Vt(t.restEncoder,e.length-s),t.writeClient(r),Vt(t.restEncoder,n);const a=e[s];a.write(t,n-a.id.clock);for(let i=s+1;i<e.length;i++)e[i].write(t,0)},K3=(t,e,r)=>{const n=new Map;r.forEach((s,a)=>{un(e,a)>s&&n.set(a,s)}),oy(e).forEach((s,a)=>{r.has(a)||n.set(a,0)}),Vt(t.restEncoder,n.size),Bd(n.entries()).sort((s,a)=>a[0]-s[0]).forEach(([s,a])=>{h4e(t,e.clients.get(s),s,a)})},f4e=(t,e)=>{const r=ji(),n=Lt(t.restDecoder);for(let s=0;s<n;s++){const a=Lt(t.restDecoder),i=new Array(a),l=t.readClient();let c=Lt(t.restDecoder);r.set(l,{i:0,refs:i});for(let d=0;d<a;d++){const u=t.readInfo();switch(u2&u){case 0:{const h=t.readLen();i[d]=new xi(Et(l,c),h),c+=h;break}case 10:{const h=Lt(t.restDecoder);i[d]=new yi(Et(l,c),h),c+=h;break}default:{const h=(u&(Zl|Zs))===0,f=new yr(Et(l,c),null,(u&Zs)===Zs?t.readLeftID():null,null,(u&Zl)===Zl?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(u&ox)===ox?t.readString():null,hW(t,u));i[d]=f,c+=f.length}}}}return r},m4e=(t,e,r)=>{const n=[];let s=Bd(r.keys()).sort((m,p)=>m-p);if(s.length===0)return null;const a=()=>{if(s.length===0)return null;let m=r.get(s[s.length-1]);for(;m.refs.length===m.i;)if(s.pop(),s.length>0)m=r.get(s[s.length-1]);else return null;return m};let i=a();if(i===null)return null;const l=new UH,c=new Map,d=(m,p)=>{const g=c.get(m);(g==null||g>p)&&c.set(m,p)};let u=i.refs[i.i++];const h=new Map,f=()=>{for(const m of n){const p=m.id.client,g=r.get(p);g?(g.i--,l.clients.set(p,g.refs.slice(g.i)),r.delete(p),g.i=0,g.refs=[]):l.clients.set(p,[m]),s=s.filter(y=>y!==p)}n.length=0};for(;;){if(u.constructor!==yi){const p=ll(h,u.id.client,()=>un(e,u.id.client))-u.id.clock;if(p<0)n.push(u),d(u.id.client,u.id.clock-1),f();else{const g=u.getMissing(t,e);if(g!==null){n.push(u);const y=r.get(g)||{refs:[],i:0};if(y.refs.length===y.i)d(g,un(e,g)),f();else{u=y.refs[y.i++];continue}}else(p===0||p<u.length)&&(u.integrate(t,p),h.set(u.id.client,u.id.clock+u.length))}}if(n.length>0)u=n.pop();else if(i!==null&&i.i<i.refs.length)u=i.refs[i.i++];else{if(i=a(),i===null)break;u=i.refs[i.i++]}}if(l.clients.size>0){const m=new Eh;return K3(m,l,new Map),Vt(m.restEncoder,0),{missing:c,update:m.toUint8Array()}}return null},p4e=(t,e)=>K3(t,e.doc.store,e.beforeState),g4e=(t,e,r,n=new rp(t))=>Er(e,s=>{s.local=!1;let a=!1;const i=s.doc,l=i.store,c=f4e(n,i),d=m4e(s,l,c),u=l.pendingStructs;if(u){for(const[f,m]of u.missing)if(m<un(l,f)){a=!0;break}if(d){for(const[f,m]of d.missing){const p=u.missing.get(f);(p==null||p>m)&&u.missing.set(f,m)}u.update=Sw([u.update,d.update])}}else l.pendingStructs=d;const h=vP(n,s,l);if(l.pendingDs){const f=new rp(jp(l.pendingDs));Lt(f.restDecoder);const m=vP(f,s,l);h&&m?l.pendingDs=Sw([h,m]):l.pendingDs=h||m}else l.pendingDs=h;if(a){const f=l.pendingStructs.update;l.pendingStructs=null,Nw(s.doc,f)}},r,!1),Nw=(t,e,r,n=rp)=>{const s=jp(e);g4e(s,t,r,new n(s))},bP=(t,e,r)=>Nw(t,e,r,IH),x4e=(t,e,r=new Map)=>{K3(t,e.store,r),Ap(t,OH(e.store))},y4e=(t,e=new Uint8Array([0]),r=new Eh)=>{const n=$H(e);x4e(r,t,n);const s=[r.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(L4e(t.store.pendingStructs.update,e)),s.length>1){if(r.constructor===iy)return I4e(s.map((a,i)=>i===0?a:F4e(a)));if(r.constructor===Eh)return Sw(s)}return s[0]},wP=(t,e)=>y4e(t,e,new iy),v4e=t=>{const e=new Map,r=Lt(t.restDecoder);for(let n=0;n<r;n++){const s=Lt(t.restDecoder),a=Lt(t.restDecoder);e.set(s,a)}return e},$H=t=>v4e(new PH(jp(t))),FH=(t,e)=>(Vt(t.restEncoder,e.size),Bd(e.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{Vt(t.restEncoder,r),Vt(t.restEncoder,n)}),t),b4e=(t,e)=>FH(t,oy(e.store)),w4e=(t,e=new LH)=>(t instanceof Map?FH(e,t):b4e(e,t),e.toUint8Array()),k4e=t=>w4e(t,new DH);class C4e{constructor(){this.l=[]}}const kP=()=>new C4e,CP=(t,e)=>t.l.push(e),NP=(t,e)=>{const r=t.l,n=r.length;t.l=r.filter(s=>e!==s),n===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},BH=(t,e,r)=>U3(t.l,[e,r]);class lm{constructor(e,r){this.client=e,this.clock=r}}const Lf=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Et=(t,e)=>new lm(t,e),ux=t=>{for(const[e,r]of t.doc.share.entries())if(r===t)return e;throw Za()},hx=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class fx{constructor(e,r,n,s=0){this.type=e,this.tname=r,this.item=n,this.assoc=s}}const hg=t=>new fx(t.type==null?null:Et(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Et(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class N4e{constructor(e,r,n=0){this.type=e,this.index=r,this.assoc=n}}const S4e=(t,e,r=0)=>new N4e(t,e,r),S1=(t,e,r)=>{let n=null,s=null;return t._item===null?s=ux(t):n=Et(t._item.id.client,t._item.id.clock),new fx(n,s,e,r)},ZN=(t,e,r=0)=>{let n=t._start;if(r<0){if(e===0)return S1(t,null,r);e--}for(;n!==null;){if(!n.deleted&&n.countable){if(n.length>e)return S1(t,Et(n.id.client,n.id.clock+e),r);e-=n.length}if(n.right===null&&r<0)return S1(t,n.lastId,r);n=n.right}return S1(t,null,r)},E4e=(t,e)=>{const r=cm(t,e),n=e.clock-r.id.clock;return{item:r,diff:n}},j4e=(t,e,r=!0)=>{const n=e.store,s=t.item,a=t.type,i=t.tname,l=t.assoc;let c=null,d=0;if(s!==null){if(un(n,s.client)<=s.clock)return null;const u=r?g4(n,s):E4e(n,s),h=u.item;if(!(h instanceof yr))return null;if(c=h.parent,c._item===null||!c._item.deleted){d=h.deleted||!h.countable?0:u.diff+(l>=0?0:1);let f=h.left;for(;f!==null;)!f.deleted&&f.countable&&(d+=f.length),f=f.left}}else{if(i!==null)c=e.get(i);else if(a!==null){if(un(n,a.client)<=a.clock)return null;const{item:u}=r?g4(n,a):{item:cm(n,a)};if(u instanceof yr&&u.content instanceof xo)c=u.content.type;else return null}else throw Za();l>=0?d=c._length:d=0}return S4e(c,d,t.assoc)},SP=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Lf(t.item,e.item)&&Lf(t.type,e.type)&&t.assoc===e.assoc;class Z3{constructor(e,r){this.ds=e,this.sv=r}}const zH=(t,e)=>new Z3(t,e),YN=t=>zH(OH(t.store),oy(t.store)),ku=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!_p(e.ds,t.id),f4=(t,e)=>{const r=ll(t.meta,f4,Sh),n=t.doc.store;r.has(e)||(e.sv.forEach((s,a)=>{s<un(n,a)&&ca(t,Et(a,s))}),Ud(t,e.ds,s=>{}),r.add(e))};class UH{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const oy=t=>{const e=new Map;return t.clients.forEach((r,n)=>{const s=r[r.length-1];e.set(n,s.id.clock+s.length)}),e},un=(t,e)=>{const r=t.clients.get(e);if(r===void 0)return 0;const n=r[r.length-1];return n.id.clock+n.length},VH=(t,e)=>{let r=t.clients.get(e.id.client);if(r===void 0)r=[],t.clients.set(e.id.client,r);else{const n=r[r.length-1];if(n.id.clock+n.length!==e.id.clock)throw Za()}r.push(e)},Oi=(t,e)=>{let r=0,n=t.length-1,s=t[n],a=s.id.clock;if(a===e)return n;let i=lc(e/(a+s.length-1)*n);for(;r<=n;){if(s=t[i],a=s.id.clock,a<=e){if(e<a+s.length)return i;r=i+1}else n=i-1;i=lc((r+n)/2)}throw Za()},T4e=(t,e)=>{const r=t.clients.get(e.client);return r[Oi(r,e.clock)]},cm=T4e,m4=(t,e,r)=>{const n=Oi(e,r),s=e[n];return s.id.clock<r&&s instanceof yr?(e.splice(n+1,0,Aw(t,s,r-s.id.clock)),n+1):n},ca=(t,e)=>{const r=t.doc.store.clients.get(e.client);return r[m4(t,r,e.clock)]},EP=(t,e,r)=>{const n=e.clients.get(r.client),s=Oi(n,r.clock),a=n[s];return r.clock!==a.id.clock+a.length-1&&a.constructor!==xi&&n.splice(s+1,0,Aw(t,a,r.clock-a.id.clock+1)),a},_4e=(t,e,r)=>{const n=t.clients.get(e.id.client);n[Oi(n,e.id.clock)]=r},HH=(t,e,r,n,s)=>{if(n===0)return;const a=r+n;let i=m4(t,e,r),l;do l=e[i++],a<l.id.clock+l.length&&m4(t,e,a),s(l);while(i<e.length&&e[i].id.clock<a)};class A4e{constructor(e,r,n){this.doc=e,this.deleteSet=new Tp,this.beforeState=oy(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const jP=(t,e)=>e.deleteSet.clients.size===0&&!VEe(e.afterState,(r,n)=>e.beforeState.get(n)!==r)?!1:(q3(e.deleteSet),p4e(t,e),Ap(t,e.deleteSet),!0),TP=(t,e,r)=>{const n=e._item;(n===null||n.id.clock<(t.beforeState.get(n.id.client)||0)&&!n.deleted)&&ll(t.changed,e,Sh).add(r)},vv=(t,e)=>{let r=t[e],n=t[e-1],s=e;for(;s>0;r=n,n=t[--s-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof yr&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}const a=e-s;return a&&t.splice(e+1-a,a),a},M4e=(t,e,r)=>{for(const[n,s]of t.clients.entries()){const a=e.clients.get(n);for(let i=s.length-1;i>=0;i--){const l=s[i],c=l.clock+l.len;for(let d=Oi(a,l.clock),u=a[d];d<a.length&&u.id.clock<c;u=a[++d]){const h=a[d];if(l.clock+l.len<=h.id.clock)break;h instanceof yr&&h.deleted&&!h.keep&&r(h)&&h.gc(e,!1)}}}},O4e=(t,e)=>{t.clients.forEach((r,n)=>{const s=e.clients.get(n);for(let a=r.length-1;a>=0;a--){const i=r[a],l=Kl(s.length-1,1+Oi(s,i.clock+i.len-1));for(let c=l,d=s[c];c>0&&d.id.clock>=i.clock;d=s[c])c-=1+vv(s,c)}})},WH=(t,e)=>{if(e<t.length){const r=t[e],n=r.doc,s=n.store,a=r.deleteSet,i=r._mergeStructs;try{q3(a),r.afterState=oy(r.doc.store),n.emit("beforeObserverCalls",[r,n]);const l=[];r.changed.forEach((c,d)=>l.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(r,c)})),l.push(()=>{r.changedParentTypes.forEach((c,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(c=c.filter(u=>u.target._item===null||!u.target._item.deleted),c.forEach(u=>{u.currentTarget=d,u._path=null}),c.sort((u,h)=>u.path.length-h.path.length),BH(d._dEH,c,r))})}),l.push(()=>n.emit("afterTransaction",[r,n])),U3(l,[]),r._needFormattingCleanup&&Q4e(r)}finally{n.gc&&M4e(a,s,n.gcFilter),O4e(a,s),r.afterState.forEach((u,h)=>{const f=r.beforeState.get(h)||0;if(f!==u){const m=s.clients.get(h),p=ho(Oi(m,f),1);for(let g=m.length-1;g>=p;)g-=1+vv(m,g)}});for(let u=i.length-1;u>=0;u--){const{client:h,clock:f}=i[u].id,m=s.clients.get(h),p=Oi(m,f);p+1<m.length&&vv(m,p+1)>1||p>0&&vv(m,p)}if(!r.local&&r.afterState.get(n.clientID)!==r.beforeState.get(n.clientID)&&(l4e(H3,NH,"[yjs] ",SH,EH,"Changed the client-id because another client seems to be using it."),n.clientID=RH()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){const u=new iy;jP(u,r)&&n.emit("update",[u.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){const u=new Eh;jP(u,r)&&n.emit("updateV2",[u.toUint8Array(),r.origin,n,r])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:d}=r;(l.size>0||d.size>0||c.size>0)&&(l.forEach(u=>{u.clientID=n.clientID,u.collectionid==null&&(u.collectionid=n.collectionid),n.subdocs.add(u)}),d.forEach(u=>n.subdocs.delete(u)),n.emit("subdocs",[{loaded:c,added:l,removed:d},n,r]),d.forEach(u=>u.destroy())),t.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,t])):WH(t,e+1)}}},Er=(t,e,r=null,n=!0)=>{const s=t._transactionCleanups;let a=!1,i=null;t._transaction===null&&(a=!0,t._transaction=new A4e(t,r,n),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(a){const l=t._transaction===s[0];t._transaction=null,l&&WH(s,0)}}return i};class R4e{constructor(e,r){this.insertions=r,this.deletions=e,this.meta=new Map}}const _P=(t,e,r)=>{Ud(t,r.deletions,n=>{n instanceof yr&&e.scope.some(s=>s===t.doc||hx(s,n))&&n_(n,!1)})},AP=(t,e,r)=>{let n=null;const s=t.doc,a=t.scope;Er(s,l=>{for(;e.length>0&&t.currStackItem===null;){const c=s.store,d=e.pop(),u=new Set,h=[];let f=!1;Ud(l,d.insertions,m=>{if(m instanceof yr){if(m.redone!==null){let{item:p,diff:g}=g4(c,m.id);g>0&&(p=ca(l,Et(p.id.client,p.id.clock+g))),m=p}!m.deleted&&a.some(p=>p===l.doc||hx(p,m))&&h.push(m)}}),Ud(l,d.deletions,m=>{m instanceof yr&&a.some(p=>p===l.doc||hx(p,m))&&!_p(d.insertions,m.id)&&u.add(m)}),u.forEach(m=>{f=uW(l,m,u,d.insertions,t.ignoreRemoteMapChanges,t)!==null||f});for(let m=h.length-1;m>=0;m--){const p=h[m];t.deleteFilter(p)&&(p.delete(l),f=!0)}t.currStackItem=f?d:null}l.changed.forEach((c,d)=>{c.has(null)&&d._searchMarker&&(d._searchMarker.length=0)}),n=l},t);const i=t.currStackItem;if(i!=null){const l=n.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:r,changedParentTypes:l,origin:t},t]),t.currStackItem=null}return i};class qH extends uH{constructor(e,{captureTimeout:r=500,captureTransaction:n=c=>!0,deleteFilter:s=()=>!0,trackedOrigins:a=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:l=o4(e)?e[0].doc:e instanceof nu?e:e.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(e),this.deleteFilter=s,a.add(this),this.trackedOrigins=a,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=r,this.afterTransactionHandler=c=>{if(!this.captureTransaction(c)||!this.scope.some(y=>c.changedParentTypes.has(y)||y===this.doc)||!this.trackedOrigins.has(c.origin)&&(!c.origin||!this.trackedOrigins.has(c.origin.constructor)))return;const d=this.undoing,u=this.redoing,h=d?this.redoStack:this.undoStack;d?this.stopCapturing():u||this.clear(!1,!0);const f=new Tp;c.afterState.forEach((y,b)=>{const v=c.beforeState.get(b)||0,w=y-v;w>0&&dx(f,b,v,w)});const m=Tje();let p=!1;if(this.lastChange>0&&m-this.lastChange<this.captureTimeout&&h.length>0&&!d&&!u){const y=h[h.length-1];y.deletions=h4([y.deletions,c.deleteSet]),y.insertions=h4([y.insertions,f])}else h.push(new R4e(c.deleteSet,f)),p=!0;!d&&!u&&(this.lastChange=m),Ud(c,c.deleteSet,y=>{y instanceof yr&&this.scope.some(b=>b===c.doc||hx(b,y))&&n_(y,!0)});const g=[{stackItem:h[h.length-1],origin:c.origin,type:d?"redo":"undo",changedParentTypes:c.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const r=new Set(this.scope);e=o4(e)?e:[e],e.forEach(n=>{r.has(n)||(r.add(n),(n instanceof Kn?n.doc!==this.doc:n!==this.doc)&&TH("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,r=!0){(e&&this.canUndo()||r&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(s=>_P(n,this,s)),this.undoStack=[]),r&&(this.redoStack.forEach(s=>_P(n,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:r}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=AP(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=AP(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*P4e(t){const e=Lt(t.restDecoder);for(let r=0;r<e;r++){const n=Lt(t.restDecoder),s=t.readClient();let a=Lt(t.restDecoder);for(let i=0;i<n;i++){const l=t.readInfo();if(l===10){const c=Lt(t.restDecoder);yield new yi(Et(s,a),c),a+=c}else if(u2&l){const c=(l&(Zl|Zs))===0,d=new yr(Et(s,a),null,(l&Zs)===Zs?t.readLeftID():null,null,(l&Zl)===Zl?t.readRightID():null,c?t.readParentInfo()?t.readString():t.readLeftID():null,c&&(l&ox)===ox?t.readString():null,hW(t,l));yield d,a+=d.length}else{const c=t.readLen();yield new xi(Et(s,a),c),a+=c}}}}class Y3{constructor(e,r){this.gen=P4e(e),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===yi);return this.curr}}class X3{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const I4e=t=>Sw(t,IH,iy),D4e=(t,e)=>{if(t.constructor===xi){const{client:r,clock:n}=t.id;return new xi(Et(r,n+e),t.length-e)}else if(t.constructor===yi){const{client:r,clock:n}=t.id;return new yi(Et(r,n+e),t.length-e)}else{const r=t,{client:n,clock:s}=r.id;return new yr(Et(n,s+e),null,Et(n,s+e-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(e))}},Sw=(t,e=rp,r=Eh)=>{if(t.length===1)return t[0];const n=t.map(u=>new e(jp(u)));let s=n.map(u=>new Y3(u,!0)),a=null;const i=new r,l=new X3(i);for(;s=s.filter(f=>f.curr!==null),s.sort((f,m)=>{if(f.curr.id.client===m.curr.id.client){const p=f.curr.id.clock-m.curr.id.clock;return p===0?f.curr.constructor===m.curr.constructor?0:f.curr.constructor===yi?1:-1:p}else return m.curr.id.client-f.curr.id.client}),s.length!==0;){const u=s[0],h=u.curr.id.client;if(a!==null){let f=u.curr,m=!1;for(;f!==null&&f.id.clock+f.length<=a.struct.id.clock+a.struct.length&&f.id.client>=a.struct.id.client;)f=u.next(),m=!0;if(f===null||f.id.client!==h||m&&f.id.clock>a.struct.id.clock+a.struct.length)continue;if(h!==a.struct.id.client)Uc(l,a.struct,a.offset),a={struct:f,offset:0},u.next();else if(a.struct.id.clock+a.struct.length<f.id.clock)if(a.struct.constructor===yi)a.struct.length=f.id.clock+f.length-a.struct.id.clock;else{Uc(l,a.struct,a.offset);const p=f.id.clock-a.struct.id.clock-a.struct.length;a={struct:new yi(Et(h,a.struct.id.clock+a.struct.length),p),offset:0}}else{const p=a.struct.id.clock+a.struct.length-f.id.clock;p>0&&(a.struct.constructor===yi?a.struct.length-=p:f=D4e(f,p)),a.struct.mergeWith(f)||(Uc(l,a.struct,a.offset),a={struct:f,offset:0},u.next())}}else a={struct:u.curr,offset:0},u.next();for(let f=u.curr;f!==null&&f.id.client===h&&f.id.clock===a.struct.id.clock+a.struct.length&&f.constructor!==yi;f=u.next())Uc(l,a.struct,a.offset),a={struct:f,offset:0}}a!==null&&(Uc(l,a.struct,a.offset),a=null),J3(l);const c=n.map(u=>G3(u)),d=h4(c);return Ap(i,d),i.toUint8Array()},L4e=(t,e,r=rp,n=Eh)=>{const s=$H(e),a=new n,i=new X3(a),l=new r(jp(t)),c=new Y3(l,!1);for(;c.curr;){const u=c.curr,h=u.id.client,f=s.get(h)||0;if(c.curr.constructor===yi){c.next();continue}if(u.id.clock+u.length>f)for(Uc(i,u,ho(f-u.id.clock,0)),c.next();c.curr&&c.curr.id.client===h;)Uc(i,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===h&&c.curr.id.clock+c.curr.length<=f;)c.next()}J3(i);const d=G3(l);return Ap(a,d),a.toUint8Array()},GH=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Qi(t.encoder.restEncoder)}),t.encoder.restEncoder=ay(),t.written=0)},Uc=(t,e,r)=>{t.written>0&&t.currClient!==e.id.client&&GH(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Vt(t.encoder.restEncoder,e.id.clock+r)),e.write(t.encoder,r),t.written++},J3=t=>{GH(t);const e=t.encoder.restEncoder;Vt(e,t.clientStructs.length);for(let r=0;r<t.clientStructs.length;r++){const n=t.clientStructs[r];Vt(e,n.written),h2(e,n.restEncoder)}},$4e=(t,e,r,n)=>{const s=new r(jp(t)),a=new Y3(s,!1),i=new n,l=new X3(i);for(let d=a.curr;d!==null;d=a.next())Uc(l,e(d),0);J3(l);const c=G3(s);return Ap(i,c),i.toUint8Array()},F4e=t=>$4e(t,$je,rp,iy),MP="You must not compute changes after the event-handler fired.";class m2{constructor(e,r){this.target=e,this.currentTarget=e,this.transaction=r,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=B4e(this.currentTarget,this.target))}deletes(e){return _p(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw zd(MP);const e=new Map,r=this.target;this.transaction.changed.get(r).forEach(s=>{if(s!==null){const a=r._map.get(s);let i,l;if(this.adds(a)){let c=a.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(a))if(c!==null&&this.deletes(c))i="delete",l=VN(c.content.getContent());else return;else c!==null&&this.deletes(c)?(i="update",l=VN(c.content.getContent())):(i="add",l=void 0)}else if(this.deletes(a))i="delete",l=VN(a.content.getContent());else return;e.set(s,{action:i,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw zd(MP);const r=this.target,n=Sh(),s=Sh(),a=[];if(e={added:n,deleted:s,delta:a,keys:this.keys},this.transaction.changed.get(r).has(null)){let l=null;const c=()=>{l&&a.push(l)};for(let d=r._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((l===null||l.delete===void 0)&&(c(),l={delete:0}),l.delete+=d.length,s.add(d)):this.adds(d)?((l===null||l.insert===void 0)&&(c(),l={insert:[]}),l.insert=l.insert.concat(d.content.getContent()),n.add(d)):((l===null||l.retain===void 0)&&(c(),l={retain:0}),l.retain+=d.length);l!==null&&l.retain===void 0&&c()}this._changes=e}return e}}const B4e=(t,e)=>{const r=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)r.unshift(e._item.parentSub);else{let n=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(n+=s.length),s=s.right;r.unshift(n)}e=e._item.parent}return r},Os=()=>{TH("Invalid access: Add Yjs type to a document before reading data.")},KH=80;let Q3=0;class z4e{constructor(e,r){e.marker=!0,this.p=e,this.index=r,this.timestamp=Q3++}}const U4e=t=>{t.timestamp=Q3++},ZH=(t,e,r)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=r,t.timestamp=Q3++},V4e=(t,e,r)=>{if(t.length>=KH){const n=t.reduce((s,a)=>s.timestamp<a.timestamp?s:a);return ZH(n,e,r),n}else{const n=new z4e(e,r);return t.push(n),n}},p2=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const r=t._searchMarker.length===0?null:t._searchMarker.reduce((a,i)=>gv(e-a.index)<gv(e-i.index)?a:i);let n=t._start,s=0;for(r!==null&&(n=r.p,s=r.index,U4e(r));n.right!==null&&s<e;){if(!n.deleted&&n.countable){if(e<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>e;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return r!==null&&gv(r.index-s)<n.parent.length/KH?(ZH(r,n,s),r):V4e(t._searchMarker,n,s)},mx=(t,e,r)=>{for(let n=t.length-1;n>=0;n--){const s=t[n];if(r>0){let a=s.p;for(a.marker=!1;a&&(a.deleted||!a.countable);)a=a.left,a&&!a.deleted&&a.countable&&(s.index-=a.length);if(a===null||a.marker===!0){t.splice(n,1);continue}s.p=a,a.marker=!0}(e<s.index||r>0&&e===s.index)&&(s.index=ho(e,s.index+r))}},g2=(t,e,r)=>{const n=t,s=e.changedParentTypes;for(;ll(s,t,()=>[]).push(r),t._item!==null;)t=t._item.parent;BH(n._eH,r,e)};class Kn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=kP(),this._dEH=kP(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,r){this.doc=e,this._item=r}_copy(){throw so()}clone(){throw so()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,r){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){CP(this._eH,e)}observeDeep(e){CP(this._dEH,e)}unobserve(e){NP(this._eH,e)}unobserveDeep(e){NP(this._dEH,e)}toJSON(){}}const YH=(t,e,r)=>{t.doc??Os(),e<0&&(e=t._length+e),r<0&&(r=t._length+r);let n=r-e;const s=[];let a=t._start;for(;a!==null&&n>0;){if(a.countable&&!a.deleted){const i=a.content.getContent();if(i.length<=e)e-=i.length;else{for(let l=e;l<i.length&&n>0;l++)s.push(i[l]),n--;e=0}}a=a.right}return s},XH=t=>{t.doc??Os();const e=[];let r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){const n=r.content.getContent();for(let s=0;s<n.length;s++)e.push(n[s])}r=r.right}return e},JH=(t,e)=>{const r=[];let n=t._start;for(;n!==null;){if(n.countable&&ku(n,e)){const s=n.content.getContent();for(let a=0;a<s.length;a++)r.push(s[a])}n=n.right}return r},px=(t,e)=>{let r=0,n=t._start;for(t.doc??Os();n!==null;){if(n.countable&&!n.deleted){const s=n.content.getContent();for(let a=0;a<s.length;a++)e(s[a],r++,t)}n=n.right}},QH=(t,e)=>{const r=[];return px(t,(n,s)=>{r.push(e(n,s,t))}),r},H4e=t=>{let e=t._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};r=e.content.getContent(),n=0,e=e.right}const s=r[n++];return r.length<=n&&(r=null),{done:!1,value:s}}}},eW=(t,e)=>{t.doc??Os();const r=p2(t,e);let n=t._start;for(r!==null&&(n=r.p,e-=r.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},Ew=(t,e,r,n)=>{let s=r;const a=t.doc,i=a.clientID,l=a.store,c=r===null?e._start:r.right;let d=[];const u=()=>{d.length>0&&(s=new yr(Et(i,un(l,i)),s,s&&s.lastId,c,c&&c.id,e,null,new Th(d)),s.integrate(t,0),d=[])};n.forEach(h=>{if(h===null)d.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(h);break;default:switch(u(),h.constructor){case Uint8Array:case ArrayBuffer:s=new yr(Et(i,un(l,i)),s,s&&s.lastId,c,c&&c.id,e,null,new ly(new Uint8Array(h))),s.integrate(t,0);break;case nu:s=new yr(Et(i,un(l,i)),s,s&&s.lastId,c,c&&c.id,e,null,new cy(h)),s.integrate(t,0);break;default:if(h instanceof Kn)s=new yr(Et(i,un(l,i)),s,s&&s.lastId,c,c&&c.id,e,null,new xo(h)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},tW=()=>zd("Length exceeded!"),rW=(t,e,r,n)=>{if(r>e._length)throw tW();if(r===0)return e._searchMarker&&mx(e._searchMarker,r,n.length),Ew(t,e,null,n);const s=r,a=p2(e,r);let i=e._start;for(a!==null&&(i=a.p,r-=a.index,r===0&&(i=i.prev,r+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(r<=i.length){r<i.length&&ca(t,Et(i.id.client,i.id.clock+r));break}r-=i.length}return e._searchMarker&&mx(e._searchMarker,s,n.length),Ew(t,e,i,n)},W4e=(t,e,r)=>{let s=(e._searchMarker||[]).reduce((a,i)=>i.index>a.index?i:a,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Ew(t,e,s,r)},nW=(t,e,r,n)=>{if(n===0)return;const s=r,a=n,i=p2(e,r);let l=e._start;for(i!==null&&(l=i.p,r-=i.index);l!==null&&r>0;l=l.right)!l.deleted&&l.countable&&(r<l.length&&ca(t,Et(l.id.client,l.id.clock+r)),r-=l.length);for(;n>0&&l!==null;)l.deleted||(n<l.length&&ca(t,Et(l.id.client,l.id.clock+n)),l.delete(t),n-=l.length),l=l.right;if(n>0)throw tW();e._searchMarker&&mx(e._searchMarker,s,-a+n)},jw=(t,e,r)=>{const n=e._map.get(r);n!==void 0&&n.delete(t)},e_=(t,e,r,n)=>{const s=e._map.get(r)||null,a=t.doc,i=a.clientID;let l;if(n==null)l=new Th([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Th([n]);break;case Uint8Array:l=new ly(n);break;case nu:l=new cy(n);break;default:if(n instanceof Kn)l=new xo(n);else throw new Error("Unexpected content type")}new yr(Et(i,un(a.store,i)),s,s&&s.lastId,null,null,e,r,l).integrate(t,0)},t_=(t,e)=>{t.doc??Os();const r=t._map.get(e);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},sW=t=>{const e={};return t.doc??Os(),t._map.forEach((r,n)=>{r.deleted||(e[n]=r.content.getContent()[r.length-1])}),e},aW=(t,e)=>{t.doc??Os();const r=t._map.get(e);return r!==void 0&&!r.deleted},q4e=(t,e)=>{const r={};return t._map.forEach((n,s)=>{let a=n;for(;a!==null&&(!e.sv.has(a.id.client)||a.id.clock>=(e.sv.get(a.id.client)||0));)a=a.left;a!==null&&ku(a,e)&&(r[s]=a.content.getContent()[a.length-1])}),r},E1=t=>(t.doc??Os(),c4e(t._map.entries(),e=>!e[1].deleted));class G4e extends m2{}class dm extends Kn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const r=new dm;return r.push(e),r}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new dm}clone(){const e=new dm;return e.insert(0,this.toArray().map(r=>r instanceof Kn?r.clone():r)),e}get length(){return this.doc??Os(),this._length}_callObserver(e,r){super._callObserver(e,r),g2(this,e,new G4e(this,e))}insert(e,r){this.doc!==null?Er(this.doc,n=>{rW(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}push(e){this.doc!==null?Er(this.doc,r=>{W4e(r,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,r=1){this.doc!==null?Er(this.doc,n=>{nW(n,this,e,r)}):this._prelimContent.splice(e,r)}get(e){return eW(this,e)}toArray(){return XH(this)}slice(e=0,r=this.length){return YH(this,e,r)}toJSON(){return this.map(e=>e instanceof Kn?e.toJSON():e)}map(e){return QH(this,e)}forEach(e){px(this,e)}[Symbol.iterator](){return H4e(this)}_write(e){e.writeTypeRef(y5e)}}const K4e=t=>new dm;class Z4e extends m2{constructor(e,r,n){super(e,r),this.keysChanged=n}}class np extends Kn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,r){super._integrate(e,r),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new np}clone(){const e=new np;return this.forEach((r,n)=>{e.set(n,r instanceof Kn?r.clone():r)}),e}_callObserver(e,r){g2(this,e,new Z4e(this,e,r))}toJSON(){this.doc??Os();const e={};return this._map.forEach((r,n)=>{if(!r.deleted){const s=r.content.getContent()[r.length-1];e[n]=s instanceof Kn?s.toJSON():s}}),e}get size(){return[...E1(this)].length}keys(){return KN(E1(this),e=>e[0])}values(){return KN(E1(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return KN(E1(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Os(),this._map.forEach((r,n)=>{r.deleted||e(r.content.getContent()[r.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Er(this.doc,r=>{jw(r,this,e)}):this._prelimContent.delete(e)}set(e,r){return this.doc!==null?Er(this.doc,n=>{e_(n,this,e,r)}):this._prelimContent.set(e,r),r}get(e){return t_(this,e)}has(e){return aW(this,e)}clear(){this.doc!==null?Er(this.doc,e=>{this.forEach(function(r,n,s){jw(e,s,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(v5e)}}const Y4e=t=>new np,ud=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Dje(t,e);class p4{constructor(e,r,n,s){this.left=e,this.right=r,this.index=n,this.currentAttributes=s}forward(){switch(this.right===null&&Za(),this.right.content.constructor){case En:this.right.deleted||Mp(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const OP=(t,e,r)=>{for(;e.right!==null&&r>0;){switch(e.right.content.constructor){case En:e.right.deleted||Mp(e.currentAttributes,e.right.content);break;default:e.right.deleted||(r<e.right.length&&ca(t,Et(e.right.id.client,e.right.id.clock+r)),e.index+=e.right.length,r-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},j1=(t,e,r,n)=>{const s=new Map,a=n?p2(e,r):null;if(a){const i=new p4(a.p.left,a.p,a.index,s);return OP(t,i,r-a.index)}else{const i=new p4(null,e._start,0,s);return OP(t,i,r)}},iW=(t,e,r,n)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===En&&ud(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();const s=t.doc,a=s.clientID;n.forEach((i,l)=>{const c=r.left,d=r.right,u=new yr(Et(a,un(s.store,a)),c,c&&c.lastId,d,d&&d.id,e,null,new En(l,i));u.integrate(t,0),r.right=u,r.forward()})},Mp=(t,e)=>{const{key:r,value:n}=e;n===null?t.delete(r):t.set(r,n)},oW=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===En&&ud(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},lW=(t,e,r,n)=>{const s=t.doc,a=s.clientID,i=new Map;for(const l in n){const c=n[l],d=r.currentAttributes.get(l)??null;if(!ud(d,c)){i.set(l,d);const{left:u,right:h}=r;r.right=new yr(Et(a,un(s.store,a)),u,u&&u.lastId,h,h&&h.id,e,null,new En(l,c)),r.right.integrate(t,0),r.forward()}}return i},XN=(t,e,r,n,s)=>{r.currentAttributes.forEach((f,m)=>{s[m]===void 0&&(s[m]=null)});const a=t.doc,i=a.clientID;oW(r,s);const l=lW(t,e,r,s),c=n.constructor===String?new fo(n):n instanceof Kn?new xo(n):new Uh(n);let{left:d,right:u,index:h}=r;e._searchMarker&&mx(e._searchMarker,r.index,c.getLength()),u=new yr(Et(i,un(a.store,i)),d,d&&d.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),r.right=u,r.index=h,r.forward(),iW(t,e,r,l)},RP=(t,e,r,n,s)=>{const a=t.doc,i=a.clientID;oW(r,s);const l=lW(t,e,r,s);e:for(;r.right!==null&&(n>0||l.size>0&&(r.right.deleted||r.right.content.constructor===En));){if(!r.right.deleted)switch(r.right.content.constructor){case En:{const{key:c,value:d}=r.right.content,u=s[c];if(u!==void 0){if(ud(u,d))l.delete(c);else{if(n===0)break e;l.set(c,d)}r.right.delete(t)}else r.currentAttributes.set(c,d);break}default:n<r.right.length&&ca(t,Et(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;break}r.forward()}if(n>0){let c="";for(;n>0;n--)c+=`
`;r.right=new yr(Et(i,un(a.store,i)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,e,null,new fo(c)),r.right.integrate(t,0),r.forward()}iW(t,e,r,l)},cW=(t,e,r,n,s)=>{let a=e;const i=ji();for(;a&&(!a.countable||a.deleted);){if(!a.deleted&&a.content.constructor===En){const d=a.content;i.set(d.key,d)}a=a.right}let l=0,c=!1;for(;e!==a;){if(r===e&&(c=!0),!e.deleted){const d=e.content;switch(d.constructor){case En:{const{key:u,value:h}=d,f=n.get(u)??null;(i.get(u)!==d||f===h)&&(e.delete(t),l++,!c&&(s.get(u)??null)===h&&f!==h&&(f===null?s.delete(u):s.set(u,f))),!c&&!e.deleted&&Mp(s,d);break}}}e=e.right}return l},X4e=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const r=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===En){const n=e.content.key;r.has(n)?e.delete(t):r.add(n)}e=e.left}},J4e=t=>{let e=0;return Er(t.doc,r=>{let n=t._start,s=t._start,a=ji();const i=i4(a);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case En:Mp(i,s.content);break;default:e+=cW(r,n,s,a,i),a=i4(i),n=s;break}s=s.right}}),e},Q4e=t=>{const e=new Set,r=t.doc;for(const[n,s]of t.afterState.entries()){const a=t.beforeState.get(n)||0;s!==a&&HH(t,r.store.clients.get(n),a,s,i=>{!i.deleted&&i.content.constructor===En&&i.constructor!==xi&&e.add(i.parent)})}Er(r,n=>{Ud(t,t.deleteSet,s=>{if(s instanceof xi||!s.parent._hasFormatting||e.has(s.parent))return;const a=s.parent;s.content.constructor===En?e.add(a):X4e(n,s)});for(const s of e)J4e(s)})},PP=(t,e,r)=>{const n=r,s=i4(e.currentAttributes),a=e.right;for(;r>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case xo:case Uh:case fo:r<e.right.length&&ca(t,Et(e.right.id.client,e.right.id.clock+r)),r-=e.right.length,e.right.delete(t);break}e.forward()}a&&cW(t,a,e.right,s,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&mx(i._searchMarker,e.index,-n+r),e};class e5e extends m2{constructor(e,r,n){super(e,r),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,r=[];Er(e,n=>{const s=new Map,a=new Map;let i=this.target._start,l=null;const c={};let d="",u=0,h=0;const f=()=>{if(l!==null){let m=null;switch(l){case"delete":h>0&&(m={delete:h}),h=0;break;case"insert":(typeof d=="object"||d.length>0)&&(m={insert:d},s.size>0&&(m.attributes={},s.forEach((p,g)=>{p!==null&&(m.attributes[g]=p)}))),d="";break;case"retain":u>0&&(m={retain:u},Pje(c)||(m.attributes=Oje({},c))),u=0;break}m&&r.push(m),l=null}};for(;i!==null;){switch(i.content.constructor){case xo:case Uh:this.adds(i)?this.deletes(i)||(f(),l="insert",d=i.content.getContent()[0],f()):this.deletes(i)?(l!=="delete"&&(f(),l="delete"),h+=1):i.deleted||(l!=="retain"&&(f(),l="retain"),u+=1);break;case fo:this.adds(i)?this.deletes(i)||(l!=="insert"&&(f(),l="insert"),d+=i.content.str):this.deletes(i)?(l!=="delete"&&(f(),l="delete"),h+=i.length):i.deleted||(l!=="retain"&&(f(),l="retain"),u+=i.length);break;case En:{const{key:m,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){const g=s.get(m)??null;ud(g,p)?p!==null&&i.delete(n):(l==="retain"&&f(),ud(p,a.get(m)??null)?delete c[m]:c[m]=p)}}else if(this.deletes(i)){a.set(m,p);const g=s.get(m)??null;ud(g,p)||(l==="retain"&&f(),c[m]=g)}else if(!i.deleted){a.set(m,p);const g=c[m];g!==void 0&&(ud(g,p)?g!==null&&i.delete(n):(l==="retain"&&f(),p===null?delete c[m]:c[m]=p))}i.deleted||(l==="insert"&&f(),Mp(s,i.content));break}}i=i.right}for(f();r.length>0;){const m=r[r.length-1];if(m.retain!==void 0&&m.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}}class Vd extends Kn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Os(),this._length}_integrate(e,r){super._integrate(e,r);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Vd}clone(){const e=new Vd;return e.applyDelta(this.toDelta()),e}_callObserver(e,r){super._callObserver(e,r);const n=new e5e(this,e,r);g2(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Os();let e="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===fo&&(e+=r.content.str),r=r.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:r=!0}={}){this.doc!==null?Er(this.doc,n=>{const s=new p4(null,this._start,0,new Map);for(let a=0;a<e.length;a++){const i=e[a];if(i.insert!==void 0){const l=!r&&typeof i.insert=="string"&&a===e.length-1&&s.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof l!="string"||l.length>0)&&XN(n,this,s,l,i.attributes||{})}else i.retain!==void 0?RP(n,this,s,i.retain,i.attributes||{}):i.delete!==void 0&&PP(n,s,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,r,n){this.doc??Os();const s=[],a=new Map,i=this.doc;let l="",c=this._start;function d(){if(l.length>0){const h={};let f=!1;a.forEach((p,g)=>{f=!0,h[g]=p});const m={insert:l};f&&(m.attributes=h),s.push(m),l=""}}const u=()=>{for(;c!==null;){if(ku(c,e)||r!==void 0&&ku(c,r))switch(c.content.constructor){case fo:{const h=a.get("ychange");e!==void 0&&!ku(c,e)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(d(),a.set("ychange",n?n("removed",c.id):{type:"removed"})):r!==void 0&&!ku(c,r)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(d(),a.set("ychange",n?n("added",c.id):{type:"added"})):h!==void 0&&(d(),a.delete("ychange")),l+=c.content.str;break}case xo:case Uh:{d();const h={insert:c.content.getContent()[0]};if(a.size>0){const f={};h.attributes=f,a.forEach((m,p)=>{f[p]=m})}s.push(h);break}case En:ku(c,e)&&(d(),Mp(a,c.content));break}c=c.right}d()};return e||r?Er(i,h=>{e&&f4(h,e),r&&f4(h,r),u()},"cleanup"):u(),s}insert(e,r,n){if(r.length<=0)return;const s=this.doc;s!==null?Er(s,a=>{const i=j1(a,this,e,!n);n||(n={},i.currentAttributes.forEach((l,c)=>{n[c]=l})),XN(a,this,i,r,n)}):this._pending.push(()=>this.insert(e,r,n))}insertEmbed(e,r,n){const s=this.doc;s!==null?Er(s,a=>{const i=j1(a,this,e,!n);XN(a,this,i,r,n||{})}):this._pending.push(()=>this.insertEmbed(e,r,n||{}))}delete(e,r){if(r===0)return;const n=this.doc;n!==null?Er(n,s=>{PP(s,j1(s,this,e,!0),r)}):this._pending.push(()=>this.delete(e,r))}format(e,r,n){if(r===0)return;const s=this.doc;s!==null?Er(s,a=>{const i=j1(a,this,e,!1);i.right!==null&&RP(a,this,i,r,n)}):this._pending.push(()=>this.format(e,r,n))}removeAttribute(e){this.doc!==null?Er(this.doc,r=>{jw(r,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,r){this.doc!==null?Er(this.doc,n=>{e_(n,this,e,r)}):this._pending.push(()=>this.setAttribute(e,r))}getAttribute(e){return t_(this,e)}getAttributes(){return sW(this)}_write(e){e.writeTypeRef(b5e)}}const t5e=t=>new Vd;class JN{constructor(e,r=()=>!0){this._filter=r,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Os()}[Symbol.iterator](){return this}next(){let e=this._currentNode,r=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(r)))do if(r=e.content.type,!e.deleted&&(r.constructor===Ws||r.constructor===jh)&&r._start!==null)e=r._start;else for(;e!==null;){const n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class jh extends Kn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new jh}clone(){const e=new jh;return e.insert(0,this.toArray().map(r=>r instanceof Kn?r.clone():r)),e}get length(){return this.doc??Os(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new JN(this,e)}querySelector(e){e=e.toUpperCase();const n=new JN(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),Bd(new JN(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e))}_callObserver(e,r){g2(this,e,new s5e(this,r,e))}toString(){return QH(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,r={},n){const s=e.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),px(this,a=>{s.insertBefore(a.toDOM(e,r,n),null)}),s}insert(e,r){this.doc!==null?Er(this.doc,n=>{rW(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}insertAfter(e,r){if(this.doc!==null)Er(this.doc,n=>{const s=e&&e instanceof Kn?e._item:e;Ew(n,this,s,r)});else{const n=this._prelimContent,s=e===null?0:n.findIndex(a=>a===e)+1;if(s===0&&e!==null)throw zd("Reference item not found");n.splice(s,0,...r)}}delete(e,r=1){this.doc!==null?Er(this.doc,n=>{nW(n,this,e,r)}):this._prelimContent.splice(e,r)}toArray(){return XH(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return eW(this,e)}slice(e=0,r=this.length){return YH(this,e,r)}forEach(e){px(this,e)}_write(e){e.writeTypeRef(k5e)}}const r5e=t=>new jh;class Ws extends jh{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,r){super._integrate(e,r),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new Ws(this.nodeName)}clone(){const e=new Ws(this.nodeName),r=this.getAttributes();return Rje(r,(n,s)=>{typeof n=="string"&&e.setAttribute(s,n)}),e.insert(0,this.toArray().map(n=>n instanceof Kn?n.clone():n)),e}toString(){const e=this.getAttributes(),r=[],n=[];for(const l in e)n.push(l);n.sort();const s=n.length;for(let l=0;l<s;l++){const c=n[l];r.push(c+'="'+e[c]+'"')}const a=this.nodeName.toLocaleLowerCase(),i=r.length>0?" "+r.join(" "):"";return`<${a}${i}>${super.toString()}</${a}>`}removeAttribute(e){this.doc!==null?Er(this.doc,r=>{jw(r,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,r){this.doc!==null?Er(this.doc,n=>{e_(n,this,e,r)}):this._prelimAttrs.set(e,r)}getAttribute(e){return t_(this,e)}hasAttribute(e){return aW(this,e)}getAttributes(e){return e?q4e(this,e):sW(this)}toDOM(e=document,r={},n){const s=e.createElement(this.nodeName),a=this.getAttributes();for(const i in a){const l=a[i];typeof l=="string"&&s.setAttribute(i,l)}return px(this,i=>{s.appendChild(i.toDOM(e,r,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(e){e.writeTypeRef(w5e),e.writeKey(this.nodeName)}}const n5e=t=>new Ws(t.readKey());class s5e extends m2{constructor(e,r,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Tw extends np{constructor(e){super(),this.hookName=e}_copy(){return new Tw(this.hookName)}clone(){const e=new Tw(this.hookName);return this.forEach((r,n)=>{e.set(n,r)}),e}toDOM(e=document,r={},n){const s=r[this.hookName];let a;return s!==void 0?a=s.createDom(this):a=document.createElement(this.hookName),a.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(a,this),a}_write(e){e.writeTypeRef(C5e),e.writeKey(this.hookName)}}const a5e=t=>new Tw(t.readKey());class za extends Vd{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new za}clone(){const e=new za;return e.applyDelta(this.toDelta()),e}toDOM(e=document,r,n){const s=e.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const r=[];for(const s in e.attributes){const a=[];for(const i in e.attributes[s])a.push({key:i,value:e.attributes[s][i]});a.sort((i,l)=>i.key<l.key?-1:1),r.push({nodeName:s,attrs:a})}r.sort((s,a)=>s.nodeName<a.nodeName?-1:1);let n="";for(let s=0;s<r.length;s++){const a=r[s];n+=`<${a.nodeName}`;for(let i=0;i<a.attrs.length;i++){const l=a.attrs[i];n+=` ${l.key}="${l.value}"`}n+=">"}n+=e.insert;for(let s=r.length-1;s>=0;s--)n+=`</${r[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(N5e)}}const i5e=t=>new za;class r_{constructor(e,r){this.id=e,this.length=r}get deleted(){throw so()}mergeWith(e){return!1}write(e,r,n){throw so()}integrate(e,r){throw so()}}const o5e=0;class xi extends r_{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){r>0&&(this.id.clock+=r,this.length-=r),VH(e.doc.store,this)}write(e,r){e.writeInfo(o5e),e.writeLen(this.length-r)}getMissing(e,r){return null}}class ly{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ly(this.content)}splice(e){throw so()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeBuf(this.content)}getRef(){return 3}}const l5e=t=>new ly(t.readBuf());class gx{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new gx(this.len)}splice(e){const r=new gx(this.len-e);return this.len=e,r}mergeWith(e){return this.len+=e.len,!0}integrate(e,r){dx(e.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(e){}gc(e){}write(e,r){e.writeLen(this.len-r)}getRef(){return 1}}const c5e=t=>new gx(t.readLen()),dW=(t,e)=>new nu({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class cy{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const r={};this.opts=r,e.gc||(r.gc=!1),e.autoLoad&&(r.autoLoad=!0),e.meta!==null&&(r.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new cy(dW(this.doc.guid,this.opts))}splice(e){throw so()}mergeWith(e){return!1}integrate(e,r){this.doc._item=r,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,r){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const d5e=t=>new cy(dW(t.readString(),t.readAny()));class Uh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Uh(this.embed)}splice(e){throw so()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeJSON(this.embed)}getRef(){return 5}}const u5e=t=>new Uh(t.readJSON());class En{constructor(e,r){this.key=e,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new En(this.key,this.value)}splice(e){throw so()}mergeWith(e){return!1}integrate(e,r){const n=r.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,r){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const h5e=t=>new En(t.readKey(),t.readJSON());class _w{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new _w(this.arr)}splice(e){const r=new _w(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){const a=this.arr[s];e.writeString(a===void 0?"undefined":JSON.stringify(a))}}getRef(){return 2}}const f5e=t=>{const e=t.readLen(),r=[];for(let n=0;n<e;n++){const s=t.readString();s==="undefined"?r.push(void 0):r.push(JSON.parse(s))}return new _w(r)},m5e=Cw("node_env")==="development";class Th{constructor(e){this.arr=e,m5e&&bH(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Th(this.arr)}splice(e){const r=new Th(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){const n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){const a=this.arr[s];e.writeAny(a)}}getRef(){return 8}}const p5e=t=>{const e=t.readLen(),r=[];for(let n=0;n<e;n++)r.push(t.readAny());return new Th(r)};class fo{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new fo(this.str)}splice(e){const r=new fo(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",r.str=""+r.str.slice(1)),r}mergeWith(e){return this.str+=e.str,!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}}const g5e=t=>new fo(t.readString()),x5e=[K4e,Y4e,t5e,n5e,r5e,a5e,i5e],y5e=0,v5e=1,b5e=2,w5e=3,k5e=4,C5e=5,N5e=6;class xo{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xo(this.type._copy())}splice(e){throw so()}mergeWith(e){return!1}integrate(e,r){this.type._integrate(e.doc,r)}delete(e){let r=this.type._start;for(;r!==null;)r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e),r=r.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let r=this.type._start;for(;r!==null;)r.gc(e,!0),r=r.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,r){this.type._write(e)}getRef(){return 7}}const S5e=t=>new xo(x5e[t.readTypeRef()](t)),g4=(t,e)=>{let r=e,n=0,s;do n>0&&(r=Et(r.client,r.clock+n)),s=cm(t,r),n=r.clock-s.id.clock,r=s.redone;while(r!==null&&s instanceof yr);return{item:s,diff:n}},n_=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},Aw=(t,e,r)=>{const{client:n,clock:s}=e.id,a=new yr(Et(n,s+r),e,Et(n,s+r-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(r));return e.deleted&&a.markDeleted(),e.keep&&(a.keep=!0),e.redone!==null&&(a.redone=Et(e.redone.client,e.redone.clock+r)),e.right=a,a.right!==null&&(a.right.left=a),t._mergeStructs.push(a),a.parentSub!==null&&a.right===null&&a.parent._map.set(a.parentSub,a),e.length=r,a},IP=(t,e)=>WEe(t,r=>_p(r.deletions,e)),uW=(t,e,r,n,s,a)=>{const i=t.doc,l=i.store,c=i.clientID,d=e.redone;if(d!==null)return ca(t,d);let u=e.parent._item,h=null,f;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!r.has(u)||uW(t,u,r,n,s,a)===null))return null;for(;u.redone!==null;)u=ca(t,u.redone)}const m=u===null?e.parent:u.content.type;if(e.parentSub===null){for(h=e.left,f=e;h!==null;){let b=h;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:ca(t,b.redone);if(b!==null&&b.parent._item===u){h=b;break}h=h.left}for(;f!==null;){let b=f;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:ca(t,b.redone);if(b!==null&&b.parent._item===u){f=b;break}f=f.right}}else if(f=null,e.right&&!s){for(h=e;h!==null&&h.right!==null&&(h.right.redone||_p(n,h.right.id)||IP(a.undoStack,h.right.id)||IP(a.redoStack,h.right.id));)for(h=h.right;h.redone;)h=ca(t,h.redone);if(h&&h.right!==null)return null}else h=m._map.get(e.parentSub)||null;const p=un(l,c),g=Et(c,p),y=new yr(g,h,h&&h.lastId,f,f&&f.id,m,e.parentSub,e.content.copy());return e.redone=g,n_(y,!0),y.integrate(t,0),y};class yr extends r_{constructor(e,r,n,s,a,i,l,c){super(e,c.getLength()),this.origin=n,this.left=r,this.right=s,this.rightOrigin=a,this.parent=i,this.parentSub=l,this.redone=null,this.content=c,this.info=this.content.isCountable()?cP:0}set marker(e){(this.info&WN)>0!==e&&(this.info^=WN)}get marker(){return(this.info&WN)>0}get keep(){return(this.info&lP)>0}set keep(e){this.keep!==e&&(this.info^=lP)}get countable(){return(this.info&cP)>0}get deleted(){return(this.info&HN)>0}set deleted(e){this.deleted!==e&&(this.info^=HN)}markDeleted(){this.info|=HN}getMissing(e,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=un(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=un(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===lm&&this.id.client!==this.parent.client&&this.parent.clock>=un(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=EP(e,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ca(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===xi||this.right&&this.right.constructor===xi)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===yr?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===yr&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===lm){const n=cm(r,this.parent);n.constructor===xi?this.parent=null:this.parent=n.content.type}return null}integrate(e,r){if(r>0&&(this.id.clock+=r,this.left=EP(e,e.doc.store,Et(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const a=new Set,i=new Set;for(;s!==null&&s!==this.right;){if(i.add(s),a.add(s),Lf(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,a.clear();else if(Lf(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&i.has(cm(e.doc.store,s.origin)))a.has(cm(e.doc.store,s.origin))||(n=s,a.clear());else break;s=s.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),VH(e.doc.store,this),this.content.integrate(e,this),TP(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new xi(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Et(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Lf(e.origin,this.lastId)&&this.right===e&&Lf(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const r=this.parent._searchMarker;return r&&r.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),dx(e.deleteSet,this.id.client,this.id.clock,this.length),TP(e,r,this.parentSub),this.content.delete(e)}}gc(e,r){if(!this.deleted)throw Za();this.content.gc(e),r?_4e(e,this,new xi(this.id,this.length)):this.content=new gx(this.length)}write(e,r){const n=r>0?Et(this.id.client,this.id.clock+r-1):this.origin,s=this.rightOrigin,a=this.parentSub,i=this.content.getRef()&u2|(n===null?0:Zs)|(s===null?0:Zl)|(a===null?0:ox);if(e.writeInfo(i),n!==null&&e.writeLeftID(n),s!==null&&e.writeRightID(s),n===null&&s===null){const l=this.parent;if(l._item!==void 0){const c=l._item;if(c===null){const d=ux(l);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===lm?(e.writeParentInfo(!1),e.writeLeftID(l)):Za();a!==null&&e.writeString(a)}this.content.write(e,r)}}const hW=(t,e)=>E5e[e&u2](t),E5e=[()=>{Za()},c5e,f5e,l5e,g5e,u5e,h5e,S5e,p5e,d5e,()=>{Za()}],j5e=10;class yi extends r_{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){Za()}write(e,r){e.writeInfo(j5e),Vt(e.restEncoder,this.length-r)}getMissing(e,r){return null}}const fW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{},mW="__ $YJS$ __";fW[mW]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");fW[mW]=!0;const T5e=()=>{let t=!0;return(e,r)=>{if(t){t=!1;try{e()}finally{t=!0}}else r!==void 0&&r()}},_5e=/[\uD800-\uDBFF]/,A5e=/[\uDC00-\uDFFF]/,M5e=(t,e)=>{let r=0,n=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;for(r>0&&_5e.test(t[r-1])&&r--;n+r<t.length&&n+r<e.length&&t[t.length-n-1]===e[e.length-n-1];)n++;return n>0&&A5e.test(t[t.length-n])&&n--,{index:r,remove:t.length-r-n,insert:e.slice(r,e.length-n)}},O5e=M5e,cr=new Qt("y-sync"),wi=new Qt("y-undo"),R0=new Qt("yjs-cursor"),qo=(t,e)=>t>>>e|t<<32-e,R5e=t=>qo(t,2)^qo(t,13)^qo(t,22),P5e=t=>qo(t,6)^qo(t,11)^qo(t,25),I5e=t=>qo(t,7)^qo(t,18)^t>>>3,D5e=t=>qo(t,17)^qo(t,19)^t>>>10,L5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$5e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class F5e{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set($5e),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,r=this._W;for(let h=16;h<64;h++)r[h]=D5e(r[h-2])+r[h-7]+I5e(r[h-15])+r[h-16];let n=e[0],s=e[1],a=e[2],i=e[3],l=e[4],c=e[5],d=e[6],u=e[7];for(let h=0,f,m;h<64;h++)f=u+P5e(l)+(l&c^~l&d)+L5e[h]+r[h]>>>0,m=R5e(n)+(n&s^n&a^s&a)>>>0,u=d,d=c,c=l,l=i+f>>>0,i=a,a=s,s=n,n=f+m>>>0;e[0]+=n,e[1]+=s,e[2]+=a,e[3]+=i,e[4]+=l,e[5]+=c,e[6]+=d,e[7]+=u}digest(e){let r=0;for(;r+56<=e.length;){let i=0;for(;i<16&&r+3<e.length;i++)this._W[i]=e[r++]<<24|e[r++]<<16|e[r++]<<8|e[r++];if(r%64!==0){for(this._W.fill(0,i,16);r<e.length;)this._W[i]|=e[r]<<(3-r%4)*8,r++;this._W[i]|=Zs<<(3-r%4)*8}this._updateHash()}const n=r%64!==0;this._W.fill(0,0,16);let s=0;for(;r<e.length;s++)for(let i=3;i>=0&&r<e.length;i--)this._W[s]|=e[r++]<<i*8;n||(this._W[s-(r%4===0?0:1)]|=Zs<<(3-r%4)*8),this._W[14]=e.byteLength/qEe,this._W[15]=e.byteLength*8,this._updateHash();const a=new Uint8Array(32);for(let i=0;i<this._H.length;i++)for(let l=0;l<4;l++)a[i*4+l]=this._H[i]>>>(3-l)*8;return a}}const B5e=t=>new F5e().digest(t),z5e=t=>{for(let r=6;r<t.length;r++)t[r%6]=t[r%6]^t[r];return t.slice(0,6)},U5e=t=>qje(z5e(B5e(Kje(t)))),Mw=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!_p(e.ds,t.id),V5e=[{light:"#ecd44433",dark:"#ecd444"}],H5e=(t,e,r)=>{if(!t.has(r)){if(t.size<e.length){const n=Sh();t.forEach(s=>n.add(s)),e=e.filter(s=>!n.has(s))}t.set(r,Sje(e))}return t.get(r)},W5e=(t,{colors:e=V5e,colorMapping:r=new Map,permanentUserData:n=null,onFirstRender:s=()=>{},mapping:a}={})=>{let i=!1;const l=new G5e(t,a),c=new Dt({props:{editable:d=>{const u=cr.getState(d);return u.snapshot==null&&u.prevSnapshot==null}},key:cr,state:{init:(d,u)=>({type:t,doc:t.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:r,permanentUserData:n}),apply:(d,u)=>{const h=d.getMeta(cr);if(h!==void 0){u=Object.assign({},u);for(const f in h)u[f]=h[f]}return u.addToHistory=d.getMeta("addToHistory")!==!1,u.isChangeOrigin=h!==void 0&&!!h.isChangeOrigin,u.isUndoRedoOperation=h!==void 0&&!!h.isChangeOrigin&&!!h.isUndoRedoOperation,l.prosemirrorView!==null&&h!==void 0&&(h.snapshot!=null||h.prevSnapshot!=null)&&V3(0,()=>{l.prosemirrorView!=null&&(h.restore==null?l._renderSnapshot(h.snapshot,h.prevSnapshot,u):(l._renderSnapshot(h.snapshot,h.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))}),u}},view:d=>(l.initView(d),a==null&&l._forceRerender(),s(),{update:()=>{const u=c.getState(d.state);if(u.snapshot==null&&u.prevSnapshot==null&&(i||d.state.doc.content.findDiffStart(d.state.doc.type.createAndFill().content)!==null)){if(i=!0,u.addToHistory===!1&&!u.isChangeOrigin){const h=wi.getState(d.state),f=h&&h.undoManager;f&&f.stopCapturing()}l.mux(()=>{u.doc.transact(h=>{h.meta.set("addToHistory",u.addToHistory),l._prosemirrorChanged(d.state.doc)},cr)})}},destroy:()=>{l.destroy()}})});return c},q5e=(t,e,r)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new ya(t.doc));else if(e.type==="node"){const n=sh(r.doc,r.type,e.anchor,r.mapping);t.setSelection(it.create(t.doc,n))}else{const n=sh(r.doc,r.type,e.anchor,r.mapping),s=sh(r.doc,r.type,e.head,r.mapping);if(n!==null&&s!==null){const a=Je.between(t.doc.resolve(n),t.doc.resolve(s));t.setSelection(a)}}},Ow=(t,e)=>({type:e.selection.jsonID,anchor:yx(e.selection.anchor,t.type,t.mapping),head:yx(e.selection.head,t.type,t.mapping)});class G5e{constructor(e,r=new Map){this.type=e,this.prosemirrorView=null,this.mux=T5e(),this.mapping=r,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=Ow(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(kH&&this._domSelectionInView===null&&(V3(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const r=this.prosemirrorView._root.createRange();r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(e.focusNode,e.focusOffset),r.getClientRects().length===0&&r.startContainer&&r.collapsed&&r.selectNodeContents(r.startContainer);const s=r.getBoundingClientRect(),a=Yje.documentElement;return s.bottom>=0&&s.right>=0&&s.left<=(window.innerWidth||a.clientWidth||0)&&s.top<=(window.innerHeight||a.clientHeight||0)}renderSnapshot(e,r){r||(r=zH(MH(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(cr,{snapshot:e,prevSnapshot:r}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(n=>bv(n,this.prosemirrorView.state.schema,this)).filter(n=>n!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new $e(Ne.from(e),0,0));r.setMeta(cr,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(r)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,r=this.type.toArray().map(s=>bv(s,this.prosemirrorView.state.schema,this)).filter(s=>s!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new $e(Ne.from(r),0,0));if(e){const s=Kl(ho(e.anchor,0),n.doc.content.size),a=Kl(ho(e.head,0),n.doc.content.size);n.setSelection(Je.create(n.doc,s,a))}this.prosemirrorView.dispatch(n.setMeta(cr,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,r,n){let s=this.doc,a=this.type;if(e||(e=YN(this.doc)),e instanceof Uint8Array||r instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(r instanceof Uint8Array))&&Za(),s=new nu({gc:!1}),Nw(s,r),r=YN(s),Nw(s,e),e=YN(s),a._item===null){const i=Array.from(this.doc.share.keys()).find(l=>this.doc.share.get(l)===this.type);a=s.getXmlFragment(i)}else{const i=s.store.clients.get(a._item.id.client)??[],l=Oi(i,a._item.id.clock);a=i[l].content.type}this.mapping.clear(),this.mux(()=>{s.transact(i=>{const l=n.permanentUserData;l&&l.dss.forEach(h=>{Ud(i,h,f=>{})});const c=(h,f)=>{const m=h==="added"?l.getUserByClientId(f.client):l.getUserByDeletedId(f);return{user:m,type:h,color:H5e(n.colorMapping,n.colors,m)}},d=JH(a,new Z3(r.ds,e.sv)).map(h=>!h._item.deleted||Mw(h._item,e)||Mw(h._item,r)?bv(h,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,r,c):null).filter(h=>h!==null),u=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new $e(Ne.from(d),0,0));this.prosemirrorView.dispatch(u.setMeta(cr,{isChangeOrigin:!0}))},cr)})}_typeChanged(e,r){if(this.prosemirrorView==null)return;const n=cr.getState(this.prosemirrorView.state);if(e.length===0||n.snapshot!=null||n.prevSnapshot!=null){this.renderSnapshot(n.snapshot,n.prevSnapshot);return}this.mux(()=>{const s=(l,c)=>this.mapping.delete(c);Ud(r,r.deleteSet,l=>{if(l.constructor===yr){const c=l.content.type;c&&this.mapping.delete(c)}}),r.changed.forEach(s),r.changedParentTypes.forEach(s);const a=this.type.toArray().map(l=>pW(l,this.prosemirrorView.state.schema,this)).filter(l=>l!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new $e(Ne.from(a),0,0));q5e(i,this.beforeTransactionSelection,this),i=i.setMeta(cr,{isChangeOrigin:!0,isUndoRedoOperation:r.origin instanceof qH}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{y4(this.doc,this.type,e,this),this.beforeTransactionSelection=Ow(this,this.prosemirrorView.state)},cr)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const pW=(t,e,r,n,s,a)=>{const i=r.mapping.get(t);if(i===void 0){if(t instanceof Ws)return bv(t,e,r,n,s,a);throw so()}return i},bv=(t,e,r,n,s,a)=>{const i=[],l=c=>{var d,u;if(c instanceof Ws){const h=pW(c,e,r,n,s,a);h!==null&&i.push(h)}else{const h=(u=(d=c._item.right)==null?void 0:d.content)==null?void 0:u.type;h instanceof Vd&&!h._item.deleted&&h._item.id.client===h.doc.clientID&&(c.applyDelta([{retain:c.length},...h.toDelta()]),h.doc.transact(m=>{h._item.delete(m)}));const f=K5e(c,e,r,n,s,a);f!==null&&f.forEach(m=>{m!==null&&i.push(m)})}};n===void 0||s===void 0?t.toArray().forEach(l):JH(t,new Z3(s.ds,n.sv)).forEach(l);try{const c=t.getAttributes(n);n!==void 0&&(Mw(t._item,n)?Mw(t._item,s)||(c.ychange=a?a("added",t._item.id):{type:"added"}):c.ychange=a?a("removed",t._item.id):{type:"removed"});const d=e.node(t.nodeName,c,i);return r.mapping.set(t,d),d}catch{return t.doc.transact(d=>{t._item.delete(d)},cr),r.mapping.delete(t),null}},K5e=(t,e,r,n,s,a)=>{const i=[],l=t.toDelta(n,s,a);try{for(let c=0;c<l.length;c++){const d=l[c];i.push(e.text(d.insert,eTe(d.attributes,e)))}}catch{return t.doc.transact(d=>{t._item.delete(d)},cr),null}return i},Z5e=(t,e)=>{const r=new za,n=t.map(s=>({insert:s.text,attributes:yW(s.marks,e)}));return r.applyDelta(n),e.mapping.set(r,t),r},Y5e=(t,e)=>{const r=new Ws(t.type.name);for(const n in t.attrs){const s=t.attrs[n];s!==null&&n!=="ychange"&&r.setAttribute(n,s)}return r.insert(0,x2(t).map(n=>x4(n,e))),e.mapping.set(r,t),r},x4=(t,e)=>t instanceof Array?Z5e(t,e):Y5e(t,e),DP=t=>typeof t=="object"&&t!==null,s_=(t,e)=>{const r=Object.keys(t).filter(s=>t[s]!==null);let n=r.length===(e==null?0:Object.keys(e).filter(s=>e[s]!==null).length);for(let s=0;s<r.length&&n;s++){const a=r[s],i=t[a],l=e[a];n=a==="ychange"||i===l||DP(i)&&DP(l)&&s_(i,l)}return n},x2=t=>{const e=t.content.content,r=[];for(let n=0;n<e.length;n++){const s=e[n];if(s.isText){const a=[];for(let i=e[n];n<e.length&&i.isText;i=e[++n])a.push(i);n--,r.push(a)}else r.push(s)}return r},gW=(t,e)=>{const r=t.toDelta();return r.length===e.length&&r.every((n,s)=>n.insert===e[s].text&&yH(n.attributes||{}).length===e[s].marks.length&&vH(n.attributes,(a,i)=>{var d;const l=xW(i),c=e[s].marks;return s_(a,(d=c.find(u=>u.type.name===l))==null?void 0:d.attrs)}))},xx=(t,e)=>{if(t instanceof Ws&&!(e instanceof Array)&&v4(t,e)){const r=x2(e);return t._length===r.length&&s_(t.getAttributes(),e.attrs)&&t.toArray().every((n,s)=>xx(n,r[s]))}return t instanceof za&&e instanceof Array&&gW(t,e)},Rw=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((r,n)=>e[n]===r),LP=(t,e,r)=>{const n=t.toArray(),s=x2(e),a=s.length,i=n.length,l=Kl(i,a);let c=0,d=0,u=!1;for(;c<l;c++){const h=n[c],f=s[c];if(Rw(r.mapping.get(h),f))u=!0;else if(!xx(h,f))break}for(;c+d<l;d++){const h=n[i-d-1],f=s[a-d-1];if(Rw(r.mapping.get(h),f))u=!0;else if(!xx(h,f))break}return{equalityFactor:c+d,foundMappedChild:u}},X5e=t=>{let e="",r=t._start;const n={};for(;r!==null;)r.deleted||(r.countable&&r.content instanceof fo?e+=r.content.str:r.content instanceof En&&(n[r.content.key]=null)),r=r.right;return{str:e,nAttrs:n}},J5e=(t,e,r)=>{r.mapping.set(t,e);const{nAttrs:n,str:s}=X5e(t),a=e.map(d=>({insert:d.text,attributes:Object.assign({},n,yW(d.marks,r))})),{insert:i,remove:l,index:c}=O5e(s,a.map(d=>d.insert).join(""));t.delete(c,l),t.insert(c,i),t.applyDelta(a.map(d=>({retain:d.insert.length,attributes:d.attributes})))},Q5e=/(.*)(--[a-zA-Z0-9+/=]{8})$/,xW=t=>{var e;return((e=Q5e.exec(t))==null?void 0:e[1])??t},eTe=(t,e)=>{const r=[];for(const n in t)r.push(e.mark(xW(n),t[n]));return r},yW=(t,e)=>{const r={};return t.forEach(n=>{if(n.type.name!=="ychange"){const s=ll(e.isOMark,n.type,()=>!n.type.excludes(n.type));r[s?`${n.type.name}--${U5e(n.toJSON())}`:n.type.name]=n.attrs}}),r},y4=(t,e,r,n)=>{if(e instanceof Ws&&e.nodeName!==r.type.name)throw new Error("node name mismatch!");if(n.mapping.set(e,r),e instanceof Ws){const h=e.getAttributes(),f=r.attrs;for(const m in f)f[m]!==null?h[m]!==f[m]&&m!=="ychange"&&e.setAttribute(m,f[m]):e.removeAttribute(m);for(const m in h)f[m]===void 0&&e.removeAttribute(m)}const s=x2(r),a=s.length,i=e.toArray(),l=i.length,c=Kl(a,l);let d=0,u=0;for(;d<c;d++){const h=i[d],f=s[d];if(!Rw(n.mapping.get(h),f))if(xx(h,f))n.mapping.set(h,f);else break}for(;u+d<c;u++){const h=i[l-u-1],f=s[a-u-1];if(!Rw(n.mapping.get(h),f))if(xx(h,f))n.mapping.set(h,f);else break}t.transact(()=>{for(;l-d-u>0&&a-d-u>0;){const f=i[d],m=s[d],p=i[l-u-1],g=s[a-u-1];if(f instanceof za&&m instanceof Array)gW(f,m)||J5e(f,m,n),d+=1;else{let y=f instanceof Ws&&v4(f,m),b=p instanceof Ws&&v4(p,g);if(y&&b){const v=LP(f,m,n),w=LP(p,g,n);v.foundMappedChild&&!w.foundMappedChild?b=!1:!v.foundMappedChild&&w.foundMappedChild||v.equalityFactor<w.equalityFactor?y=!1:b=!1}y?(y4(t,f,m,n),d+=1):b?(y4(t,p,g,n),u+=1):(n.mapping.delete(e.get(d)),e.delete(d,1),e.insert(d,[x4(m,n)]),d+=1)}}const h=l-d-u;if(l===1&&a===0&&i[0]instanceof za?(n.mapping.delete(i[0]),i[0].delete(0,i[0].length)):h>0&&(e.slice(d,d+h).forEach(f=>n.mapping.delete(f)),e.delete(d,h)),d+u<a){const f=[];for(let m=d;m<a-u;m++)f.push(x4(s[m],n));e.insert(d,f)}},cr)},v4=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let fg=null;const tTe=()=>{const t=fg;fg=null,t.forEach((e,r)=>{const n=r.state.tr,s=cr.getState(r.state);s&&s.binding&&!s.binding.isDestroyed&&(e.forEach((a,i)=>{n.setMeta(i,a)}),r.dispatch(n))})},rTe=(t,e,r)=>{fg||(fg=new Map,V3(0,tTe)),ll(fg,t,ji).set(e,r)},yx=(t,e,r)=>{if(t===0)return ZN(e,0,e.length===0?-1:0);let n=e._first===null?null:e._first.content.type;for(;n!==null&&e!==n;){if(n instanceof za){if(n._length>=t)return ZN(n,t,e.length===0?-1:0);if(t-=n._length,n._item!==null&&n._item.next!==null)n=n._item.next.content.type;else{do n=n._item===null?null:n._item.parent,t--;while(n!==e&&n!==null&&n._item!==null&&n._item.next===null);n!==null&&n!==e&&(n=n._item===null?null:n._item.next.content.type)}}else{const s=(r.get(n)||{nodeSize:0}).nodeSize;if(n._first!==null&&t<s)n=n._first.content.type,t--;else{if(t===1&&n._length===0&&s>1)return new fx(n._item===null?null:n._item.id,n._item===null?ux(n):null,null);if(t-=s,n._item!==null&&n._item.next!==null)n=n._item.next.content.type;else{if(t===0)return n=n._item===null?n:n._item.parent,new fx(n._item===null?null:n._item.id,n._item===null?ux(n):null,null);do n=n._item.parent,t--;while(n!==e&&n._item.next===null);n!==e&&(n=n._item.next.content.type)}}}if(n===null)throw Za();if(t===0&&n.constructor!==za&&n!==e)return nTe(n._item.parent,n._item)}return ZN(e,e._length,e.length===0?-1:0)},nTe=(t,e)=>{let r=null,n=null;return t._item===null?n=ux(t):r=Et(t._item.id.client,t._item.id.clock),new fx(r,n,e.id)},sh=(t,e,r,n)=>{const s=j4e(r,t);if(s===null||s.type!==e&&!hx(e,s.type._item))return null;let a=s.type,i=0;if(a.constructor===za)i=s.index;else if(a._item===null||!a._item.deleted){let l=a._first,c=0;for(;c<a._length&&c<s.index&&l!==null;){if(!l.deleted){const d=l.content.type;c++,d instanceof za?i+=d._length:i+=n.get(d).nodeSize}l=l.right}i+=1}for(;a!==e&&a._item!==null;){const l=a._item.parent;if(l._item===null||!l._item.deleted){i+=1;let c=l._first;for(;c!==null;){const d=c.content.type;if(d===a)break;c.deleted||(d instanceof za?i+=d._length:i+=n.get(d).nodeSize),c=c.right}}a=l}return i-1},sTe=(t,e,r)=>t!==e,aTe=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const r=document.createElement("div");r.setAttribute("style",`background-color: ${t.color}`),r.insertBefore(document.createTextNode(t.name),null);const n=document.createTextNode(""),s=document.createTextNode("");return e.insertBefore(n,null),e.insertBefore(r,null),e.insertBefore(s,null),e},vW=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),iTe=/^#[0-9a-fA-F]{6}$/,$P=(t,e,r,n,s)=>{const a=cr.getState(t),i=a.doc,l=[];return a.snapshot!=null||a.prevSnapshot!=null||a.binding.mapping.size===0?Ht.create(t.doc,[]):(e.getStates().forEach((c,d)=>{if(r(i.clientID,d,c)&&c.cursor!=null){const u=c.user||{};u.color==null?u.color="#ffa500":iTe.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${d}`);let h=sh(i,a.type,hg(c.cursor.anchor),a.binding.mapping),f=sh(i,a.type,hg(c.cursor.head),a.binding.mapping);if(h!==null&&f!==null){const m=ho(t.doc.content.size-1,0);h=Kl(h,m),f=Kl(f,m),l.push(kr.widget(f,()=>n(u,d),{key:d+"",side:10}));const p=Kl(h,f),g=ho(h,f);l.push(kr.inline(p,g,s(u,d),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Ht.create(t.doc,l))},oTe=(t,{awarenessStateFilter:e=sTe,cursorBuilder:r=aTe,selectionBuilder:n=vW,getSelection:s=i=>i.selection}={},a="cursor")=>new Dt({key:R0,state:{init(i,l){return $P(l,t,e,r,n)},apply(i,l,c,d){const u=cr.getState(d),h=i.getMeta(R0);return u&&u.isChangeOrigin||h&&h.awarenessUpdated?$P(d,t,e,r,n):l.map(i.mapping,i.doc)}},props:{decorations:i=>R0.getState(i)},view:i=>{const l=()=>{i.docView&&rTe(i,R0,{awarenessUpdated:!0})},c=()=>{const d=cr.getState(i.state),u=t.getLocalState()||{};if(i.hasFocus()){const h=s(i.state),f=yx(h.anchor,d.type,d.binding.mapping),m=yx(h.head,d.type,d.binding.mapping);(u.cursor==null||!SP(hg(u.cursor.anchor),f)||!SP(hg(u.cursor.head),m))&&t.setLocalStateField(a,{anchor:f,head:m})}else u.cursor!=null&&sh(d.doc,d.type,hg(u.cursor.anchor),d.binding.mapping)!==null&&t.setLocalStateField(a,null)};return t.on("change",l),i.dom.addEventListener("focusin",c),i.dom.addEventListener("focusout",c),{update:c,destroy:()=>{i.dom.removeEventListener("focusin",c),i.dom.removeEventListener("focusout",c),t.off("change",l),t.setLocalStateField(a,null)}}}}),lTe=t=>{var e,r;return((r=(e=wi.getState(t))==null?void 0:e.undoManager)==null?void 0:r.undo())!=null},cTe=t=>{var e,r;return((r=(e=wi.getState(t))==null?void 0:e.undoManager)==null?void 0:r.redo())!=null},dTe=(t,e)=>{var r,n;return e==null?(n=(r=wi.getState(t))==null?void 0:r.undoManager)==null?void 0:n.canUndo():lTe(t)},uTe=(t,e)=>{var r,n;return e==null?(n=(r=wi.getState(t))==null?void 0:r.undoManager)==null?void 0:n.canRedo():cTe(t)},hTe=new Set(["paragraph"]),fTe=(t,e)=>!(t instanceof yr)||!(t.content instanceof xo)||!(t.content.type instanceof Vd||t.content.type instanceof Ws&&e.has(t.content.type.nodeName))||t.content.type._length===0,mTe=({protectedNodes:t=hTe,trackedOrigins:e=[],undoManager:r=null}={})=>new Dt({key:wi,state:{init:(n,s)=>{const a=cr.getState(s),i=r||new qH(a.type,{trackedOrigins:new Set([cr].concat(e)),deleteFilter:l=>fTe(l,t),captureTransaction:l=>l.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(n,s,a,i)=>{const l=cr.getState(i).binding,c=s.undoManager,d=c.undoStack.length>0,u=c.redoStack.length>0;return l?{undoManager:c,prevSel:Ow(l,a),hasUndoOps:d,hasRedoOps:u}:d!==s.hasUndoOps||u!==s.hasRedoOps?Object.assign({},s,{hasUndoOps:c.undoStack.length>0,hasRedoOps:c.redoStack.length>0}):s}},view:n=>{const s=cr.getState(n.state),a=wi.getState(n.state).undoManager;return a.on("stack-item-added",({stackItem:i})=>{const l=s.binding;l&&i.meta.set(l,wi.getState(n.state).prevSel)}),a.on("stack-item-popped",({stackItem:i})=>{const l=s.binding;l&&(l.beforeTransactionSelection=i.meta.get(l)||l.beforeTransactionSelection)}),{destroy:()=>{a.destroy()}}}});function pTe(t={}){return new Dt({view(e){return new gTe(e,t)}})}class gTe{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=i=>{this[s](i)};return e.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,s=this.editorView.dom,a=s.getBoundingClientRect(),i=a.width/s.offsetWidth,l=a.height/s.offsetHeight;if(r){let h=e.nodeBefore,f=e.nodeAfter;if(h||f){let m=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(m){let p=m.getBoundingClientRect(),g=h?p.bottom:p.top;h&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*l;n={left:p.left,right:p.right,top:g-y,bottom:g+y}}}}if(!n){let h=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*i;n={left:h.left-f,right:h.left+f,top:h.top,bottom:h.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let d,u;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,u=-pageYOffset;else{let h=c.getBoundingClientRect(),f=h.width/c.offsetWidth,m=h.height/c.offsetHeight;d=h.left-c.scrollLeft*f,u=h.top-c.scrollTop*m}this.element.style.left=(n.left-d)/i+"px",this.element.style.top=(n.top-u)/l+"px",this.element.style.width=(n.right-n.left)/i+"px",this.element.style.height=(n.bottom-n.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),s=n&&n.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,r,e):s;if(r&&!a){let i=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=vU(this.editorView.state.doc,i,this.editorView.dragging.slice);l!=null&&(i=l)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const xTe={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},toggle_blocks:{add_block_button:"Empty toggle. Click to add a block."},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var yTe=Object.defineProperty,vTe=(t,e,r)=>e in t?yTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,de=(t,e,r)=>vTe(t,typeof e!="symbol"?e+"":e,r);function bTe(t,e=JSON.stringify){const r={};return t.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(r,s)?!1:r[s]=!0})}function wTe(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return bTe(e)}const y2=Tr.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return UV()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new Dt({key:new Qt("uniqueID"),appendTransaction:(r,n,s)=>{const a=r.some(m=>m.docChanged)&&!n.doc.eq(s.doc),i=this.options.filterTransaction&&r.some(m=>{let p,g;return!(!((g=(p=this.options).filterTransaction)===null||g===void 0)&&g.call(p,m))});if(!a||i)return;const{tr:l}=s,{types:c,attributeName:d,generateID:u}=this.options,h=b3(n.doc,r),{mapping:f}=h;if(RV(h).forEach(({newRange:m})=>{const p=MV(s.doc,m,b=>c.includes(b.type.name)),g=p.map(({node:b})=>b.attrs[d]).filter(b=>b!==null),y=wTe(g);p.forEach(({node:b,pos:v})=>{let w;const k=(w=l.doc.nodeAt(v))===null||w===void 0?void 0:w.attrs[d];if(k===null){const S=n.doc.type.createAndFill().content;if(n.doc.content.findDiffStart(S)===null){const C=JSON.parse(JSON.stringify(s.doc.toJSON()));if(C.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(C.content)===JSON.stringify(S.toJSON())){l.setNodeMarkup(v,void 0,{...b.attrs,[d]:"initialBlockId"});return}}l.setNodeMarkup(v,void 0,{...b.attrs,[d]:u()});return}const{deleted:N}=f.invert().mapResult(v);N&&y.includes(k)&&l.setNodeMarkup(v,void 0,{...b.attrs,[d]:u()})})}),!!l.steps.length)return l},view(r){const n=s=>{let a;t=!((a=r.dom.parentElement)===null||a===void 0)&&a.contains(s.target)?r.dom.parentElement:null};return window.addEventListener("dragstart",n),{destroy(){window.removeEventListener("dragstart",n)}}},props:{handleDOMEvents:{drop:(r,n)=>{let s;return t!==r.dom.parentElement||((s=n.dataTransfer)===null||s===void 0?void 0:s.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:r=>{if(!e)return r;const{types:n,attributeName:s}=this.options,a=i=>{const l=[];return i.forEach(c=>{if(c.isText){l.push(c);return}if(!n.includes(c.type.name)){l.push(c.copy(a(c.content)));return}const d=c.type.create({...c.attrs,[s]:null},a(c.content),c.marks);l.push(d)}),Ne.from(l)};return e=!1,new $e(a(r.content),r.openStart,r.openEnd)}}})]}});function FP(t){return t.type==="link"}function bW(t){return typeof t!="string"&&t.type==="link"}function _h(t){return typeof t!="string"&&t.type==="text"}function Hd(t){var e,r,n,s,a;return Wd(t)?{...t}:vx(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((r=t.props)==null?void 0:r.textColor)??"default",textAlignment:((n=t.props)==null?void 0:n.textAlignment)??"left",colspan:((s=t.props)==null?void 0:s.colspan)??1,rowspan:((a=t.props)==null?void 0:a.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function vx(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Wd(t){return vx(t)&&t.props!==void 0&&t.content!==void 0}function Ah(t){return Wd(t)?t.props.colspan??1:1}function bx(t){return Wd(t)?t.props.rowspan??1:1}let Xo=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};function Rt(t,e=!0){const{"data-test":r,...n}=t;if(Object.keys(n).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const kTe=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function _a(t,e="Ctrl"){return kTe()?t.replace("Mod",""):t.replace("Mod",e)}function Dr(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}const b4=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Ya(t,e,r,n){const s=document.createElement("div");s.className=Dr("bn-block-content",r.class),s.setAttribute("data-content-type",t);for(const[i,l]of Object.entries(r))i!=="class"&&s.setAttribute(i,l);const a=document.createElement(e);a.className=Dr("bn-inline-content",n.class);for(const[i,l]of Object.entries(n))i!=="class"&&a.setAttribute(i,l);return s.appendChild(a),{dom:s,contentDOM:a}}const BP=(t,e)=>{let r=Vh(t,e.pmSchema);r.type.name==="blockContainer"&&(r=r.firstChild);const n=e.pmSchema.nodes[r.type.name].spec.toDOM;if(n===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const s=n(r);if(typeof s!="object"||!("dom"in s))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return s};function CTe(t){const e=t.querySelectorAll("p");if(e.length>1){const r=e[0];for(let n=1;n<e.length;n++){const s=e[n];r.innerHTML+="<br>"+s.innerHTML,s.remove()}}}const pn={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},a_=["backgroundColor","textColor"];function Pw(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zP(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function dy(t){const e={};return Object.entries(t).filter(([r,n])=>!a_.includes(r)).forEach(([r,n])=>{e[r]={default:n.default,keepOnSplit:!0,parseHTML:s=>{const a=s.getAttribute(Pw(r));if(a===null)return null;if(n.default===void 0&&n.type==="boolean"||n.default!==void 0&&typeof n.default=="boolean")return a==="true"?!0:a==="false"?!1:null;if(n.default===void 0&&n.type==="number"||n.default!==void 0&&typeof n.default=="number"){const i=parseFloat(a);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return a},renderHTML:s=>s[r]!==n.default?{[Pw(r)]:s[r]}:{}}}),e}function v2(t,e,r,n){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const s=t(),a=r.state.doc.resolve(s).node().attrs.id;if(!a)throw new Error("Block doesn't have id");const i=e.getBlock(a);if(i.type!==n)throw new Error("Block type does not match");return i}function P0(t,e,r,n,s=!1,a){const i=document.createElement("div");if(a!==void 0)for(const[l,c]of Object.entries(a))l!=="class"&&i.setAttribute(l,c);i.className=Dr("bn-block-content",(a==null?void 0:a.class)||""),i.setAttribute("data-content-type",e);for(const[l,c]of Object.entries(r)){const d=n[l].default;!a_.includes(l)&&c!==d&&i.setAttribute(Pw(l),c)}return s&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Dr("bn-inline-content",t.contentDOM.className)),{...t,dom:i}}function ri(t){return al.create(t)}function i_(t,e){return{config:t,implementation:e}}function cl(t,e,r){return i_({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:r,toInternalHTML:BP,toExternalHTML:BP})}function wW(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r.config]))}function kW(t,e){t.stopEvent=r=>(r.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function CW(t,e){const r=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&r.push({tag:"*",getAttrs(n){if(typeof n=="string")return!1;const s=e==null?void 0:e(n);return s===void 0?!1:s}}),r}function uy(t,e){const r=ri({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return dy(t.propSchema)},parseHTML(){return CW(t,e.parse)},renderHTML({HTMLAttributes:n}){const s=document.createElement("div");return P0({dom:s,contentDOM:t.content==="inline"?s:void 0},t.type,{},t.propSchema,t.isFileBlock,n)},addNodeView(){return({getPos:n})=>{var s;const a=this.options.editor,i=v2(n,a,this.editor,t.type),l=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},c=e.render(i,a),d=P0(c,i.type,i.props,t.propSchema,t.isFileBlock,l);return t.isSelectable===!1&&kW(d,this.editor),d}}});if(r.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return i_(t,{node:r,toInternalHTML:(n,s)=>{var a;const i=((a=r.options.domAttributes)==null?void 0:a.blockContent)||{},l=e.render(n,s);return P0(l,n.type,n.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(n,s)=>{var a,i;const l=((a=r.options.domAttributes)==null?void 0:a.blockContent)||{};let c=(i=e.toExternalHTML)==null?void 0:i.call(e,n,s);return c===void 0&&(c=e.render(n,s)),P0(c,n.type,n.props,t.propSchema,l)}})}function cc(t,e){const r=t.resolve(e);if(r.nodeAfter&&r.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:r.pos,node:r.nodeAfter};let n=r.depth,s=r.node(n);for(;n>0;){if(s.type.isInGroup("bnBlock"))return{posBeforeNode:r.before(n),node:s};n--,s=r.node(n)}const a=[];t.descendants((l,c)=>{l.type.isInGroup("bnBlock")&&a.push(c)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(a.find(l=>l>=e)||a[a.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function o_(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const r=t,n=e,s=n+r.nodeSize,a={node:r,beforePos:n,afterPos:s};if(r.type.name==="blockContainer"){let i,l;if(r.forEach((c,d)=>{if(c.type.spec.group==="blockContent"){const u=c,h=n+d+1,f=h+c.nodeSize;i={node:u,beforePos:h,afterPos:f}}else if(c.type.name==="blockGroup"){const u=c,h=n+d+1,f=h+c.nodeSize;l={node:u,beforePos:h,afterPos:f}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${r}`);return{isBlockContainer:!0,bnBlock:a,blockContent:i,childContainer:l,blockNoteType:i.node.type.name}}else{if(!a.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${a.node}`);return{isBlockContainer:!1,bnBlock:a,childContainer:a,blockNoteType:a.node.type.name}}}function qd(t){return o_(t.node,t.posBeforeNode)}function hy(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return o_(t.nodeAfter,t.pos)}function zr(t){const e=cc(t.doc,t.selection.anchor);return qd(e)}function b2(t){const e=cc(t.doc,t.selection.anchor);return qd(e)}function Xn(t){return"doc"in t?t.doc.type.schema:t.type.schema}function NW(t){return t.cached.blockNoteEditor}function fy(t){return NW(t).schema}function l_(t){return fy(t).blockSchema}function c_(t){return fy(t).inlineContentSchema}function Op(t){return fy(t).styleSchema}function d_(t){return NW(t).blockCache}function SW(t,e,r){var n,s;const a={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},i=[];t.content.forEach((l,c,d)=>{const u={cells:[]};d===0&&l.content.forEach(h=>{let f=h.attrs.colwidth;f==null&&(f=new Array(h.attrs.colspan??1).fill(void 0)),a.columnWidths.push(...f)}),u.cells=l.content.content.map((h,f)=>(i[d]||(i[d]=[]),i[d][f]=h.type.name==="tableHeader",{type:"tableCell",content:h.content.content.map(m=>w2(m,e,r)).reduce((m,p)=>{if(!m.length)return p;const g=m[m.length-1],y=p[0];return y&&_h(g)&&_h(y)&&JSON.stringify(g.styles)===JSON.stringify(y.styles)?(g.text+=`
`+y.text,m.push(...p.slice(1)),m):(m.push(...p),m)},[]),props:{colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,backgroundColor:h.attrs.backgroundColor,textColor:h.attrs.textColor,textAlignment:h.attrs.textAlignment}})),a.rows.push(u)});for(let l=0;l<i.length;l++)(n=i[l])!=null&&n.every(c=>c)&&(a.headerRows=(a.headerRows??0)+1);for(let l=0;l<((s=i[0])==null?void 0:s.length);l++)i!=null&&i.every(c=>c[l])&&(a.headerCols=(a.headerCols??0)+1);return a}function w2(t,e,r){const n=[];let s;return t.content.forEach(a=>{if(a.type.name==="hardBreak"){if(s)if(_h(s))s.text+=`
`;else if(FP(s))s.content[s.content.length-1].text+=`
`;else throw new Error("unexpected");else s={type:"text",text:`
`,styles:{}};return}if(a.type.name!=="link"&&a.type.name!=="text"){if(!e[a.type.name]){console.warn("unrecognized inline content type",a.type.name);return}s&&(n.push(s),s=void 0),n.push(NTe(a,e,r));return}const i={};let l;for(const c of a.marks)if(c.type.name==="link")l=c;else{const d=r[c.type.name];if(!d){if(c.type.spec.blocknoteIgnore)continue;throw new Error(`style ${c.type.name} not found in styleSchema`)}if(d.propSchema==="boolean")i[d.type]=!0;else if(d.propSchema==="string")i[d.type]=c.attrs.stringValue;else throw new Xo(d.propSchema)}s?_h(s)?l?(n.push(s),s={type:"link",href:l.attrs.href,content:[{type:"text",text:a.textContent,styles:i}]}):JSON.stringify(s.styles)===JSON.stringify(i)?s.text+=a.textContent:(n.push(s),s={type:"text",text:a.textContent,styles:i}):FP(s)&&(l?s.href===l.attrs.href?JSON.stringify(s.content[s.content.length-1].styles)===JSON.stringify(i)?s.content[s.content.length-1].text+=a.textContent:s.content.push({type:"text",text:a.textContent,styles:i}):(n.push(s),s={type:"link",href:l.attrs.href,content:[{type:"text",text:a.textContent,styles:i}]}):(n.push(s),s={type:"text",text:a.textContent,styles:i})):l?s={type:"link",href:l.attrs.href,content:[{type:"text",text:a.textContent,styles:i}]}:s={type:"text",text:a.textContent,styles:i}}),s&&n.push(s),n}function NTe(t,e,r){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const n={},s=e[t.type.name];for(const[i,l]of Object.entries(t.attrs)){if(!s)throw Error("ic node is of an unrecognized type: "+t.type.name);const c=s.propSchema;i in c&&(n[i]=l)}let a;return s.content==="styled"?a=w2(t,e,r):a=void 0,{type:t.type.name,props:n,content:a}}function Yr(t,e,r=l_(e),n=c_(e),s=Op(e),a=d_(e)){var i;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const l=a==null?void 0:a.get(t);if(l)return l;const c=o_(t,0);let d=c.bnBlock.node.attrs.id;d===null&&(d=y2.options.generateID());const u=r[c.blockNoteType];if(!u)throw Error("Block is of an unrecognized type: "+c.blockNoteType);const h={};for(const[y,b]of Object.entries({...t.attrs,...c.isBlockContainer?c.blockContent.node.attrs:{}})){const v=u.propSchema;y in v&&!(v[y].default===void 0&&b===void 0)&&(h[y]=b)}const f=r[c.blockNoteType],m=[];(i=c.childContainer)==null||i.node.forEach(y=>{m.push(Yr(y,e,r,n,s,a))});let p;if(f.content==="inline"){if(!c.isBlockContainer)throw new Error("impossible");p=w2(c.blockContent.node,n,s)}else if(f.content==="table"){if(!c.isBlockContainer)throw new Error("impossible");p=SW(c.blockContent.node,n,s)}else if(f.content==="none")p=void 0;else throw new Xo(f.content);const g={id:d,type:f.type,props:h,content:p,children:m};return a==null||a.set(t,g),g}function STe(t,e,r=l_(e),n=c_(e),s=Op(e),a=d_(e)){const i=[];return t.firstChild.descendants(l=>(i.push(Yr(l,e,r,n,s,a)),!1)),i}function ETe(t,e,r=l_(e),n=c_(e),s=Op(e),a=d_(e)){function i(l,c,d){if(l.type.name!=="blockGroup")throw new Error("unexpected");const u=[];let h,f;return l.forEach((m,p,g)=>{if(m.type.name!=="blockContainer")throw new Error("unexpected");if(m.childCount===0)return;if(m.childCount===0||m.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+m.childCount);const y=g===0,b=g===l.childCount-1;if(m.firstChild.type.name==="blockGroup"){if(!y)throw new Error("unexpected");const N=i(m.firstChild,Math.max(0,c-1),b?Math.max(0,d-1):0);h=N.blockCutAtStart,b&&(f=N.blockCutAtEnd),u.push(...N.blocks);return}const v=Yr(m,e,r,n,s,a),w=m.childCount>1?m.child(1):void 0;let k=[];if(w){const N=i(w,0,b?Math.max(0,d-1):0);k=N.blocks,b&&(f=N.blockCutAtEnd)}b&&!w&&d>1&&(f=v.id),y&&c>1&&(h=v.id),u.push({...v,children:k})}),{blocks:u,blockCutAtStart:h,blockCutAtEnd:f}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return i(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function EW(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r.config]))}function jTe(t,e){return{config:t,implementation:e}}function Cu(t,e){return jTe({type:t.name,propSchema:e},{mark:t})}function jW(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,r.config]))}function su(t){const{height:e,width:r}=u_(t),n=new Array(e).fill(!1).map(()=>new Array(r).fill(null)),s=(a,i)=>{for(let l=a;l<e;l++)for(let c=i;c<r;c++)if(!n[l][c])return{row:l,col:c};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let a=0;a<t.content.rows.length;a++)for(let i=0;i<t.content.rows[a].cells.length;i++){const l=Hd(t.content.rows[a].cells[i]),c=bx(l),d=Ah(l),{row:u,col:h}=s(a,i);for(let f=u;f<u+c;f++)for(let m=h;m<h+d;m++){if(n[f][m])throw new Error(`Unable to create occupancy grid for table, cell at ${f},${m} is already occupied`);n[f][m]={row:a,col:i,rowspan:c,colspan:d,cell:l}}}return n}function wx(t){const e=new Set;return t.map(r=>({cells:r.map(n=>e.has(n.row+":"+n.col)?!1:(e.add(n.row+":"+n.col),n.cell)).filter(n=>n!==!1)}))}function Mh(t,e,r=su(e)){for(let n=0;n<r.length;n++)for(let s=0;s<r[n].length;s++){const a=r[n][s];if(a.row===t.row&&a.col===t.col)return{row:n,col:s,cell:a.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function u_(t){const e=t.content.rows.length;let r=0;return t.content.rows.forEach(n=>{let s=0;n.cells.forEach(a=>{s+=Ah(a)}),r=Math.max(r,s)}),{height:e,width:r}}function TW(t,e,r=su(e)){var n;const s=(n=r[t.row])==null?void 0:n[t.col];if(s)return{row:s.row,col:s.col,cell:s.cell}}function w4(t,e){var r;const n=su(t);if(e<0||e>=n.length)return[];let s=0;for(let i=0;i<e;i++){const l=(r=n[s])==null?void 0:r[0];if(!l)return[];s+=l.rowspan}const a=new Array(n[0].length).fill(!1).map((i,l)=>TW({row:s,col:l},t,n)).filter(i=>i!==void 0);return a.filter((i,l)=>a.findIndex(c=>c.row===i.row&&c.col===i.col)===l)}function k4(t,e){var r;const n=su(t);if(e<0||e>=n[0].length)return[];let s=0;for(let i=0;i<e;i++){const l=(r=n[0])==null?void 0:r[s];if(!l)return[];s+=l.colspan}const a=new Array(n.length).fill(!1).map((i,l)=>TW({row:l,col:s},t,n)).filter(i=>i!==void 0);return a.filter((i,l)=>a.findIndex(c=>c.row===i.row&&c.col===i.col)===l)}function TTe(t,e,r,n=su(t)){const{col:s}=Mh({row:0,col:e},t,n),{col:a}=Mh({row:0,col:r},t,n);return n.forEach(i=>{const[l]=i.splice(s,1);i.splice(a,0,l)}),wx(n)}function _Te(t,e,r,n=su(t)){const{row:s}=Mh({row:e,col:0},t,n),{row:a}=Mh({row:r,col:0},t,n),[i]=n.splice(s,1);return n.splice(a,0,i),wx(n)}function C4(t){return t?vx(t)?C4(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:_h(e)?e.text.length===0:bW(e)?typeof e.content=="string"?e.content.length===0:e.content.every(r=>r.text.length===0):!1):!1:!0}function ATe(t,e,r=su(t)){if(e==="columns"){let a=0;for(let i=r[0].length-1;i>=0&&r.every(l=>C4(l[i].cell)&&l[i].colspan===1);i--)a++;for(let i=r.length-1;i>=0;i--){const l=Math.max(r[i].length-a,1);r[i]=r[i].slice(0,l)}return wx(r)}let n=0;for(let a=r.length-1;a>=0&&r[a].every(i=>C4(i.cell)&&i.rowspan===1);a--)n++;const s=Math.min(n,r.length-1);return r.splice(r.length-s,s),wx(r)}function MTe(t,e,r,n=su(t)){const{width:s,height:a}=u_(t);if(e==="columns")n.forEach((i,l)=>{if(r>=0)for(let c=0;c<r;c++)i.push({row:l,col:Math.max(...i.map(d=>d.col))+1,rowspan:1,colspan:1,cell:Hd("")});else i.splice(s+r,-1*r)});else if(r>0)for(let i=0;i<r;i++){const l=new Array(s).fill(null).map((c,d)=>({row:a+i,col:d,rowspan:1,colspan:1,cell:Hd("")}));n.push(l)}else r<0&&n.splice(a+r,-1*r);return wx(n)}function _W(t,e,r){const n=w4(t,r);if(!n.some(i=>bx(i.cell)>1))return!0;let s=r,a=r;return n.forEach(i=>{const l=bx(i.cell);s=Math.max(s,i.row+l-1),a=Math.min(a,i.row)}),e<r?r===s:r===a}function AW(t,e,r){const n=k4(t,r);if(!n.some(i=>Ah(i.cell)>1))return!0;let s=r,a=r;return n.forEach(i=>{const l=Ah(i.cell);s=Math.max(s,i.col+l-1),a=Math.min(a,i.col)}),e<r?r===s:r===a}function OTe(t,e,r){const n=Mh(t,r),s=Mh(e,r);return n.col===s.col}function UP(t,e,r,n){const s=[];for(const[a,i]of Object.entries(t.styles||{})){const l=r[a];if(!l)throw new Error(`style ${a} not found in styleSchema`);if(l.propSchema==="boolean")i&&s.push(e.mark(a));else if(l.propSchema==="string")i&&s.push(e.mark(a,{stringValue:i}));else throw new Xo(l.propSchema)}return!n||!e.nodes[n].spec.code?t.text.split(/(\n)/g).filter(a=>a.length>0).map(a=>a===`
`?e.nodes.hardBreak.createChecked():e.text(a,s)):t.text.length>0?[e.text(t.text,s)]:[]}function RTe(t,e,r){const n=e.marks.link.create({href:t.href});return N4(t.content,e,r).map(s=>{if(s.type.name==="text")return s.mark([...s.marks,n]);if(s.type.name==="hardBreak")return s;throw new Error("unexpected node type")})}function N4(t,e,r,n){const s=[];if(typeof t=="string")return s.push(...UP({text:t,styles:{}},e,r,n)),s;for(const a of t)s.push(...UP(a,e,r,n));return s}function mo(t,e,r,n=Op(e)){const s=[];for(const a of t)typeof a=="string"?s.push(...N4(a,e,n,r)):bW(a)?s.push(...RTe(a,e,n)):_h(a)?s.push(...N4([a],e,n,r)):s.push(MW(a,e,n));return s}function k2(t,e,r=Op(e)){const n=[],s=new Array(t.headerRows??0).fill(!0),a=new Array(t.headerCols??0).fill(!0),i=t.columnWidths??[];for(let l=0;l<t.rows.length;l++){const c=t.rows[l],d=[],u=s[l];for(let f=0;f<c.cells.length;f++){const m=c.cells[f],p=a[f],g=void 0;let y=null;const b=Mh({row:l,col:f},{content:t});let v=i[b.col]?[i[b.col]]:null;if(m)if(typeof m=="string")y=e.text(m);else if(vx(m)){m.content&&(y=mo(m.content,e,"tableParagraph",r));const k=Ah(m);k>1&&(v=new Array(k).fill(!1).map((N,S)=>i[b.col+S]??void 0))}else y=mo(m,e,"tableParagraph",r);const w=e.nodes[p||u?"tableHeader":"tableCell"].createChecked({...vx(m)?m.props:{},colwidth:v},e.nodes.tableParagraph.createChecked(g,y));d.push(w)}const h=e.nodes.tableRow.createChecked({},d);n.push(h)}return n}function MW(t,e,r){let n,s=t.type;if(s===void 0&&(s="paragraph"),!e.nodes[s])throw new Error(`node type ${s} not found in schema`);if(!t.content)n=e.nodes[s].createChecked(t.props);else if(typeof t.content=="string"){const a=mo([t.content],e,s,r);n=e.nodes[s].createChecked(t.props,a)}else if(Array.isArray(t.content)){const a=mo(t.content,e,s,r);n=e.nodes[s].createChecked(t.props,a)}else if(t.content.type==="tableContent"){const a=k2(t.content,e,r);n=e.nodes[s].createChecked(t.props,a)}else throw new Xo(t.content.type);return n}function Vh(t,e,r=Op(e)){let n=t.id;n===void 0&&(n=y2.options.generateID());const s=[];if(t.children)for(const a of t.children)s.push(Vh(a,e,r));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const a=MW(t,e,r),i=s.length>0?e.nodes.blockGroup.createChecked({},s):void 0;return e.nodes.blockContainer.createChecked({id:n,...t.props},i?[a,i]:a)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:n,...t.props},s);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function Xa(t,e){let r,n;if(e.firstChild.descendants((s,a)=>r?!1:!h_(s)||s.attrs.id!==t?!0:(r=s,n=a+1,!1)),!(r===void 0||n===void 0))return{node:r,posBeforeNode:n}}function h_(t){return t.type.isInGroup("bnBlock")}function PTe(t,e,r,n="before"){const s=typeof r=="string"?r:r.id,a=Xn(t),i=e.map(d=>Vh(d,a)),l=Xa(s,t.doc);if(!l)throw new Error(`Block with ID ${s} not found`);let c=l.posBeforeNode;return n==="after"&&(c+=l.node.nodeSize),t.step(new wn(c,c,new $e(Ne.from(i),0,0))),i.map(d=>Yr(d,a))}function VP(t,e,r){const n=Xn(t),s=r.map(d=>Vh(d,n)),a=new Set(e.map(d=>typeof d=="string"?d:d.id)),i=[],l=typeof e[0]=="string"?e[0]:e[0].id;let c=0;if(t.doc.descendants((d,u)=>{if(a.size===0)return!1;if(!d.type.isInGroup("bnBlock")||!a.has(d.attrs.id))return!0;if(i.push(Yr(d,n)),a.delete(d.attrs.id),r.length>0&&d.attrs.id===l){const p=t.doc.nodeSize;t.insert(u,s);const g=t.doc.nodeSize;c+=p-g}const h=t.doc.nodeSize,f=t.doc.resolve(u-c);f.node().type.name==="blockGroup"&&f.node(f.depth-1).type.name!=="doc"&&f.node().childCount===1?t.delete(f.before(),f.after()):t.delete(u-c,u-c+d.nodeSize);const m=t.doc.nodeSize;return c+=h-m,!1}),a.size>0){const d=[...a].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+d)}return{insertedBlocks:s.map(d=>Yr(d,n)),removedBlocks:i}}const Ts=(t,e)=>({tr:r,dispatch:n})=>(n&&OW(r,t,e),!0);function OW(t,e,r,n,s){const a=hy(t.doc.resolve(e));let i=null;a.blockNoteType==="table"&&(i=LTe(t));const l=Xn(t),c=l.nodes[a.blockNoteType],d=l.nodes[r.type||a.blockNoteType],u=d.isInGroup("bnBlock")?d:l.nodes.blockContainer;if(a.isBlockContainer&&d.isInGroup("blockContent"))HP(r,t,a),ITe(r,t,c,d,a);else if(!a.isBlockContainer&&d.isInGroup("bnBlock"))HP(r,t,a);else{const h=Yr(a.bnBlock.node,l);t.replaceWith(a.bnBlock.beforePos,a.bnBlock.afterPos,Vh({children:h.children,...r},l));return}t.setNodeMarkup(a.bnBlock.beforePos,u,{...a.bnBlock.node.attrs,...r.props}),i&&$Te(t,a,i)}function ITe(t,e,r,n,s,a,i){const l=Xn(e);let c="keep";if(t.content)if(typeof t.content=="string")c=mo([t.content],l,n.name);else if(Array.isArray(t.content))c=mo(t.content,l,n.name);else if(t.content.type==="tableContent")c=k2(t.content,l);else throw new Xo(t.content.type);else r.spec.content===""||n.spec.content!==r.spec.content&&(c=[]);c==="keep"?e.setNodeMarkup(s.blockContent.beforePos,n,{...s.blockContent.node.attrs,...t.props}):e.replaceWith(s.blockContent.beforePos,s.blockContent.afterPos,n.createChecked({...s.blockContent.node.attrs,...t.props},c))}function HP(t,e,r){const n=Xn(e);if(t.children!==void 0&&t.children.length>0){const s=t.children.map(a=>Vh(a,n));if(r.childContainer)e.step(new wn(r.childContainer.beforePos+1,r.childContainer.afterPos-1,new $e(Ne.from(s),0,0)));else{if(!r.isBlockContainer)throw new Error("impossible");e.insert(r.blockContent.afterPos,n.nodes.blockGroup.createChecked({},s))}}}function DTe(t,e,r,n,s){const a=typeof e=="string"?e:e.id,i=Xa(a,t.doc);if(!i)throw new Error(`Block with ID ${a} not found`);OW(t,i.posBeforeNode,r);const l=t.doc.resolve(i.posBeforeNode+1).node(),c=Xn(t);return Yr(l,c)}function LTe(t){const e="selection"in t?t.selection:null;if(!(e instanceof Je))return null;const r=t.doc.resolve(e.head);let n=-1,s=-1;for(let g=r.depth;g>=0;g--){const y=r.node(g).type.name;if(n<0&&(y==="tableCell"||y==="tableHeader")&&(n=g),y==="table"){s=g;break}}if(n<0||s<0)return null;const a=r.before(n),i=r.before(s),l=t.doc.nodeAt(i);if(!l||l.type.name!=="table")return null;const c=Or.get(l),d=a-(i+1),u=c.map.indexOf(d);if(u<0)return null;const h=Math.floor(u/c.width),f=u%c.width,m=a+1+1,p=Math.max(0,e.head-m);return{row:h,col:f,offset:p}}function $Te(t,e,r){var n;if(e.blockNoteType!=="table")return!1;let s=-1;if(e.isBlockContainer)s=t.mapping.map(e.blockContent.beforePos);else{const y=t.mapping.map(e.bnBlock.beforePos),b=y+(((n=t.doc.nodeAt(y))==null?void 0:n.nodeSize)||0);t.doc.nodesBetween(y,b,(v,w)=>v.type.name==="table"?(s=w,!1):!0)}const a=s>=0?t.doc.nodeAt(s):null;if(!a||a.type.name!=="table")return!1;const i=Or.get(a),l=Math.max(0,Math.min(r.row,i.height-1)),c=Math.max(0,Math.min(r.col,i.width-1)),d=l*i.width+c,u=i.map[d];if(u==null)return!1;const h=s+1+u+1,f=t.doc.nodeAt(h),m=h+1,p=f?f.content.size:0,g=m+Math.max(0,Math.min(r.offset,p));return"selection"in t&&t.setSelection(Je.create(t.doc,g)),!0}function RW(t){const e=Array.from(t.classList).filter(r=>!r.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function PW(t,e,r,n){let s;if(e)if(typeof e=="string")s=mo([e],t.pmSchema);else if(Array.isArray(e))s=mo(e,t.pmSchema);else if(e.type==="tableContent")s=k2(e,t.pmSchema);else throw new Xo(e.type);else throw new Error("blockContent is required");const a=r.serializeFragment(Ne.from(s),n);return a.nodeType===1&&RW(a),a}function FTe(t,e,r,n,s,a,i){var l,c,d,u,h,f,m,p;const g=(i==null?void 0:i.document)??document,y=e.pmSchema.nodes.blockContainer;let b=r.props;if(!r.props){b={};for(const[C,E]of Object.entries(e.schema.blockSchema[r.type].propSchema))E.default!==void 0&&(b[C]=E.default)}const v=(c=(l=y.spec)==null?void 0:l.toDOM)==null?void 0:c.call(l,y.create({id:r.id,...b})),w=Array.from(v.dom.attributes),k=e.blockImplementations[r.type].implementation.toExternalHTML({...r,props:b},e),N=g.createDocumentFragment();if(k.dom.classList.contains("bn-block-content")){const C=[...w,...Array.from(k.dom.attributes)].filter(E=>E.name.startsWith("data")&&E.name!=="data-content-type"&&E.name!=="data-file-block"&&E.name!=="data-node-view-wrapper"&&E.name!=="data-node-type"&&E.name!=="data-id"&&E.name!=="data-index"&&E.name!=="data-editable");for(const E of C)k.dom.firstChild.setAttribute(E.name,E.value);RW(k.dom.firstChild),N.append(...Array.from(k.dom.childNodes))}else N.append(k.dom);if(k.contentDOM&&r.content){const C=PW(e,r.content,n,i);k.contentDOM.appendChild(C)}let S;if(s.has(r.type)?S="OL":a.has(r.type)&&(S="UL"),S){if(((d=t.lastChild)==null?void 0:d.nodeName)!==S){const E=g.createElement(S);S==="OL"&&b!=null&&b.start&&(b==null?void 0:b.start)!==1&&E.setAttribute("start",b.start+""),t.append(E)}const C=g.createElement("li");C.append(N),t.lastChild.appendChild(C)}else t.append(N);if(r.children&&r.children.length>0){const C=g.createDocumentFragment();if(IW(C,e,r.children,n,s,a,i),((u=t.lastChild)==null?void 0:u.nodeName)==="UL"||((h=t.lastChild)==null?void 0:h.nodeName)==="OL")for(;((f=C.firstChild)==null?void 0:f.nodeName)==="UL"||((m=C.firstChild)==null?void 0:m.nodeName)==="OL";)t.lastChild.lastChild.appendChild(C.firstChild);e.pmSchema.nodes[r.type].isInGroup("blockContent")?t.append(C):(p=k.contentDOM)==null||p.append(C)}}const IW=(t,e,r,n,s,a,i)=>{for(const l of r)FTe(t,e,l,n,s,a,i)},BTe=(t,e,r,n,s,a)=>{const i=((a==null?void 0:a.document)??document).createDocumentFragment();return IW(i,t,e,r,n,s,a),i},C2=(t,e)=>{const r=fc.fromSchema(t);return{exportBlocks:(n,s)=>{const a=BTe(e,n,r,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),s),i=document.createElement("div");return i.append(a),i.innerHTML},exportInlineContent:(n,s)=>{const a=PW(e,n,r,s),i=document.createElement("div");return i.append(a.cloneNode(!0)),i.innerHTML}}};function zTe(t,e,r,n,s){let a;if(e)if(typeof e=="string")a=mo([e],t.pmSchema,n);else if(Array.isArray(e))a=mo(e,t.pmSchema,n);else if(e.type==="tableContent")a=k2(e,t.pmSchema);else throw new Xo(e.type);else throw new Error("blockContent is required");return r.serializeFragment(Ne.from(a),s)}function UTe(t,e,r,n,s){var a,i,l,c,d;const u=t.pmSchema.nodes.blockContainer;let h=e.props;if(!e.props){h={};for(const[p,g]of Object.entries(t.schema.blockSchema[e.type].propSchema))g.default!==void 0&&(h[p]=g.default)}const f=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:h},t);if(e.type==="numberedListItem"&&f.dom.setAttribute("data-index",n.toString()),f.contentDOM&&e.content){const p=zTe(t,e.content,r,e.type,s);f.contentDOM.appendChild(p)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const p=DW(t,e.children,r,s);(a=f.contentDOM)==null||a.append(p)}return f.dom}const m=(l=(i=u.spec)==null?void 0:i.toDOM)==null?void 0:l.call(i,u.create({id:e.id,...h}));return(c=m.contentDOM)==null||c.appendChild(f.dom),e.children&&e.children.length>0&&((d=m.contentDOM)==null||d.appendChild(LW(t,e.children,r,s))),m.dom}function DW(t,e,r,n){const s=((n==null?void 0:n.document)??document).createDocumentFragment();let a=0;for(const i of e){i.type==="numberedListItem"?a++:a=0;const l=UTe(t,i,r,a,n);s.appendChild(l)}return s}const LW=(t,e,r,n)=>{var s;const a=t.pmSchema.nodes.blockGroup,i=a.spec.toDOM(a.create({})),l=DW(t,e,r,n);return(s=i.contentDOM)==null||s.appendChild(l),i.dom},VTe=(t,e)=>{const r=fc.fromSchema(t);return{serializeBlocks:(n,s)=>LW(e,n,r,s).outerHTML}};function HTe(t,e){if(e===0)return;const r=t.resolve(e);for(let n=r.depth;n>0;n--){const s=r.node(n);if(h_(s))return s.attrs.id}}function WTe(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function WP(t){const e="__root__",r={},n={},s=Xn(t);return t.descendants((a,i)=>{if(!h_(a))return!0;const l=HTe(t,i),c=l??e;n[c]||(n[c]=[]);const d=Yr(a,s);return r[a.attrs.id]={block:d,parentId:l},n[c].push(a.attrs.id),!0}),{byId:r,childrenByParent:n}}function qTe(t,e){const r=new Set;if(!t||!e)return r;const n=new Set(t),s=e.filter(g=>n.has(g)),a=t.filter(g=>s.includes(g));if(a.length<=1||s.length<=1)return r;const i={};for(let g=0;g<a.length;g++)i[a[g]]=g;const l=s.map(g=>i[g]),c=l.length,d=[],u=[],h=new Array(c).fill(-1),f=(g,y)=>{let b=0,v=g.length;for(;b<v;){const w=b+v>>>1;g[w]<y?b=w+1:v=w}return b};for(let g=0;g<c;g++){const y=l[g],b=f(d,y);b>0&&(h[g]=u[b-1]),b===d.length?(d.push(y),u.push(g)):(d[b]=y,u[b]=g)}const m=new Set;let p=u[u.length-1]??-1;for(;p!==-1;)m.add(p),p=h[p];for(let g=0;g<s.length;g++)m.has(g)||r.add(s[g]);return r}function $W(t,e=[]){const r=WTe(t),n=b3(t.before,[t,...e]),s=WP(n.before),a=WP(n.doc),i=[],l=new Set;Object.keys(a.byId).filter(m=>!(m in s.byId)).forEach(m=>{i.push({type:"insert",block:a.byId[m].block,source:r,prevBlock:void 0}),l.add(m)}),Object.keys(s.byId).filter(m=>!(m in a.byId)).forEach(m=>{i.push({type:"delete",block:s.byId[m].block,source:r,prevBlock:void 0}),l.add(m)}),Object.keys(a.byId).filter(m=>m in s.byId).forEach(m=>{var p,g;const y=s.byId[m],b=a.byId[m];y.parentId!==b.parentId?(i.push({type:"move",block:b.block,prevBlock:y.block,source:r,prevParent:y.parentId?(p=s.byId[y.parentId])==null?void 0:p.block:void 0,currentParent:b.parentId?(g=a.byId[b.parentId])==null?void 0:g.block:void 0}),l.add(m)):TSe({...y.block,children:void 0},{...b.block,children:void 0})||(i.push({type:"update",block:b.block,prevBlock:y.block,source:r}),l.add(m))});const c=s.childrenByParent,d=a.childrenByParent,u="__root__",h=new Set([...Object.keys(c),...Object.keys(d)]),f=new Set;return h.forEach(m=>{const p=qTe(c[m],d[m]);p.size!==0&&p.forEach(g=>{var y,b;const v=s.byId[g],w=a.byId[g];!v||!w||v.parentId!==w.parentId||l.has(g)||(v.parentId??u)!==m||f.has(g)||(f.add(g),i.push({type:"move",block:w.block,prevBlock:v.block,source:r,prevParent:v.parentId?(y=s.byId[v.parentId])==null?void 0:y.block:void 0,currentParent:w.parentId?(b=a.byId[w.parentId])==null?void 0:b.block:void 0}),l.add(g))})}),i}const N2=(t,e)=>{const r=t.querySelector(e);if(!r)return;const n=t.querySelector("figcaption"),s=(n==null?void 0:n.textContent)??void 0;return{targetElement:r,caption:s}},GTe=(t,e,r,n)=>{const s=document.createElement("div");s.className="bn-add-file-button";const a=document.createElement("div");a.className="bn-add-file-button-icon",n?a.appendChild(n):a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',s.appendChild(a);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=r||e.dictionary.file_blocks.file.add_button_text,s.appendChild(i);const l=d=>{d.preventDefault()},c=()=>{e.transact(d=>d.setMeta(e.filePanel.plugins[0],{block:t}))};return s.addEventListener("mousedown",l,!0),s.addEventListener("click",c,!0),{dom:s,destroy:()=>{s.removeEventListener("mousedown",l,!0),s.removeEventListener("click",c,!0)}}},KTe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',ZTe=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const r=document.createElement("div");r.className="bn-file-icon",r.innerHTML=KTe,e.appendChild(r);const n=document.createElement("p");return n.className="bn-file-name",n.textContent=t.props.name,e.appendChild(n),{dom:e}},f_=(t,e,r,n,s)=>{const a=document.createElement("div");if(a.className="bn-file-block-content-wrapper",t.props.url===""){const l=GTe(t,e,n,s);a.appendChild(l.dom);const c=e.onUploadStart(d=>{if(d===t.id){a.removeChild(l.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",a.appendChild(u)}});return{dom:a,destroy:()=>{c(),l.destroy()}}}const i={dom:a};if(t.props.showPreview===!1||!r){const l=ZTe(t);a.appendChild(l.dom),i.destroy=()=>{var c;(c=l.destroy)==null||c.call(l)}}else a.appendChild(r.dom);if(t.props.caption){const l=document.createElement("p");l.className="bn-file-caption",l.textContent=t.props.caption,a.appendChild(l)}return i},m_=(t,e)=>{const r=document.createElement("figure"),n=document.createElement("figcaption");return n.textContent=e,r.appendChild(t),r.appendChild(n),{dom:r}},S2=(t,e)=>{const r=document.createElement("div"),n=document.createElement("p");return n.textContent=e,r.appendChild(t),r.appendChild(n),{dom:r}},qP=t=>({url:t.src||void 0}),YTe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',XTe={backgroundColor:pn.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},FW={type:"audio",propSchema:XTe,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},JTe=(t,e)=>{const r=document.createElement("div");r.innerHTML=YTe;const n=document.createElement("audio");return n.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{n.src=s}):n.src=t.props.url,n.controls=!0,n.contentEditable="false",n.draggable=!1,f_(t,e,{dom:n},e.dictionary.file_blocks.audio.add_button_text,r.firstElementChild)},BW=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:qP(t);if(t.tagName==="FIGURE"){const e=N2(t,"audio");if(!e)return;const{targetElement:r,caption:n}=e;return{...qP(r),caption:n}}},QTe=t=>{if(!t.props.url){const r=document.createElement("p");return r.textContent="Add audio",{dom:r}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?m_(e,t.props.caption):S2(e,t.props.caption):{dom:e}},e3e=uy(FW,{render:JTe,parse:BW,toExternalHTML:QTe}),GP=Symbol.for("blocknote.shikiParser"),QN=Symbol.for("blocknote.shikiHighlighterPromise"),t3e={language:{default:"text"}},r3e=ri({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let r=e,n=null;(r==null?void 0:r.tagName)==="DIV"&&(r==null?void 0:r.dataset.contentType)==="codeBlock"&&(r=r.children[0]),(r==null?void 0:r.tagName)==="PRE"&&(r=r==null?void 0:r.children[0]);const s=r==null?void 0:r.getAttribute("data-language");if(s)n=s.toLowerCase();else{const a=[...(r==null?void 0:r.className.split(" "))||[]].filter(i=>i.startsWith("language-")).map(i=>i.replace("language-",""));a.length>0&&(n=a[0].toLowerCase())}return n?eS(t.editor.settings.codeBlock,n)??n:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,r;const n=document.createElement("pre"),{dom:s,contentDOM:a}=Ya(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{},...t});return s.removeChild(a),s.appendChild(n),n.appendChild(a),{dom:s,contentDOM:a}},addNodeView(){const t=this.options;return({editor:e,node:r,getPos:n,HTMLAttributes:s})=>{var a,i;const l=document.createElement("pre"),c=document.createElement("select"),d=document.createElement("div"),{dom:u,contentDOM:h}=Ya(this.name,"code",{...((a=this.options.domAttributes)==null?void 0:a.blockContent)||{},...s},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),f=m=>{const p=m.target.value;e.commands.command(({tr:g})=>(g.setNodeAttribute(n(),"language",p),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([m,{name:p}])=>{const g=document.createElement("option");g.value=m,g.text=p,c.appendChild(g)}),d.contentEditable="false",c.value=r.attrs.language||t.editor.settings.codeBlock.defaultLanguage,u.removeChild(h),u.appendChild(d),u.appendChild(l),l.appendChild(h),d.appendChild(c),c.addEventListener("change",f),{dom:u,contentDOM:h,update:m=>m.type===this.type,destroy:()=>{c.removeEventListener("change",f)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let r,n;return[ASe({parser:s=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!r)return e[QN]=e[QN]||t.editor.settings.codeBlock.createHighlighter(),e[QN].then(i=>{r=i});const a=eS(t.editor.settings.codeBlock,s.language);return!a||a==="text"||a==="none"||a==="plaintext"||a==="txt"?[]:r.getLoadedLanguages().includes(a)?(n||(n=e[GP]||MSe(r),e[GP]=n),n(s)):r.loadLanguage(a)},languageExtractor:s=>s.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new Fd({find:/^```(.*?)\s$/,handler:({state:e,range:r,match:n})=>{const s=e.doc.resolve(r.from),a=n[1].trim(),i={language:eS(t.editor.settings.codeBlock,a)??a};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),this.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,this.type,i).setSelection(Je.create(e.tr.doc,r.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:r}=e;if(t.isActive(this.name)&&!r.parent.textContent&&i2(e)){const n=r.pos-r.parentOffset-2;return t.chain().setNodeSelection(n).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const r=e.parentOffset===e.parent.nodeSize-2,n=e.parent.textContent.endsWith(`

`);return!r||!n?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:s})=>(s.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),n3e=cl(r3e,t3e);function eS(t,e){var r;return(r=Object.entries(t.supportedLanguages).find(([n,{aliases:s}])=>(s==null?void 0:s.includes(e))||n===e))==null?void 0:r[0]}const s3e=ms.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),a3e=Cu(s3e,"string"),i3e=ms.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),o3e=Cu(i3e,"string"),KP=t=>({url:t.src||void 0}),l3e={backgroundColor:pn.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},zW={type:"file",propSchema:l3e,content:"none",isFileBlock:!0},c3e=(t,e)=>f_(t,e),UW=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:KP(t);if(t.tagName==="FIGURE"){const e=N2(t,"embed");if(!e)return;const{targetElement:r,caption:n}=e;return{...KP(r),caption:n}}},d3e=t=>{if(!t.props.url){const r=document.createElement("p");return r.textContent="Add file",{dom:r}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?S2(e,t.props.caption):{dom:e}},u3e=uy(zW,{render:c3e,parse:UW,toExternalHTML:d3e}),h3e={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},VW=(t,e,r,n=h3e)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:r};const s=document.createElement("div"),a=document.createElement("div");a.className="bn-toggle-wrapper";const i=document.createElement("button");i.className="bn-toggle-button",i.type="button",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const l=p=>p.preventDefault();i.addEventListener("mousedown",l);const c=()=>{var p;a.getAttribute("data-show-children")==="true"?(a.setAttribute("data-show-children","false"),n.set(e.getBlock(t),!1),s.contains(d)&&s.removeChild(d)):(a.setAttribute("data-show-children","true"),n.set(e.getBlock(t),!0),((p=e.getBlock(t))==null?void 0:p.children.length)===0&&!s.contains(d)&&s.appendChild(d))};i.addEventListener("click",c),a.appendChild(i),a.appendChild(r);const d=document.createElement("button");d.className="bn-toggle-add-block-button",d.type="button",d.textContent=e.dictionary.toggle_blocks.add_block_button;const u=p=>p.preventDefault();d.addEventListener("mousedown",u);const h=()=>{e.transact(()=>{const p=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(p.children[0].id,"end"),e.focus()})};d.addEventListener("click",h),s.appendChild(a);let f=t.children.length;const m=e.onChange(()=>{var p;const g=((p=e.getBlock(t))==null?void 0:p.children.length)??0;g>f?(a.getAttribute("data-show-children")==="false"&&(a.setAttribute("data-show-children","true"),n.set(e.getBlock(t),!0)),s.contains(d)&&s.removeChild(d)):g===0&&g<f&&(a.getAttribute("data-show-children")==="true"&&(a.setAttribute("data-show-children","false"),n.set(e.getBlock(t),!1)),s.contains(d)&&s.removeChild(d)),f=g});return n.get(t)?(a.setAttribute("data-show-children","true"),t.children.length===0&&s.appendChild(d)):a.setAttribute("data-show-children","false"),{dom:s,ignoreMutation:p=>p instanceof MutationRecord&&(p.type==="attributes"&&p.target===a&&p.attributeName==="data-show-children"||p.type==="childList"&&(p.addedNodes[0]===d||p.removedNodes[0]===d)),destroy:()=>{i.removeEventListener("mousedown",l),i.removeEventListener("click",c),d.removeEventListener("mousedown",u),d.removeEventListener("click",h),m==null||m()}}},f3e=[1,2,3,4,5,6],HW={...pn,level:{default:1,values:f3e},isToggleable:{default:!1}},m3e=ri({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return dy(HW)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(t=>new Fd({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:r,range:n})=>{const s=zr(e);!s.isBlockContainer||s.blockContent.node.type.spec.content!=="inline*"||r().command(Ts(s.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:n.from,to:n.to}).run()}}))]},addKeyboardShortcuts(){const t=this.options.editor;return Object.fromEntries(t.settings.heading.levels.map(e=>[`Mod-Alt-${e}`,()=>{const r=zr(this.editor.state);return!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(r.bnBlock.beforePos,{type:"heading",props:{level:e}}))}]))},parseHTML(){const t=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...t.settings.heading.levels.map(e=>({tag:`h${e}`,attrs:{level:e},node:"heading"}))]},renderHTML({node:t,HTMLAttributes:e}){var r,n;return Ya(this.name,`h${t.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r})=>{var n,s;const{dom:a,contentDOM:i}=Ya(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});a.removeChild(i);const l=this.options.editor,c=v2(r,l,this.editor,this.name),d=VW(c,l,i);return a.appendChild(d.dom),{dom:a,contentDOM:i,ignoreMutation:d.ignoreMutation,destroy:d.destroy}}}}),p3e=cl(m3e,HW),WW=(t,e,r,n,s,a)=>{const{dom:i,destroy:l}=f_(t,e,r,s,a),c=i;c.style.position="relative",t.props.url&&t.props.showPreview&&(t.props.previewWidth?c.style.width=`${t.props.previewWidth}px`:c.style.width="fit-content");const d=document.createElement("div");d.className="bn-resize-handle",d.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";const h=document.createElement("div");h.style.position="absolute",h.style.height="100%",h.style.width="100%";let f,m=t.props.previewWidth;const p=k=>{var N,S;if(!f){!e.isEditable&&n.contains(d)&&n.contains(u)&&(n.removeChild(d),n.removeChild(u));return}let C;t.props.textAlignment==="center"?f.handleUsed==="left"?C=f.initialWidth+(f.initialClientX-k.clientX)*2:C=f.initialWidth+(k.clientX-f.initialClientX)*2:f.handleUsed==="left"?C=f.initialWidth+f.initialClientX-k.clientX:C=f.initialWidth+k.clientX-f.initialClientX,m=Math.min(Math.max(C,64),((S=(N=e.domElement)==null?void 0:N.firstElementChild)==null?void 0:S.clientWidth)||Number.MAX_VALUE),c.style.width=`${m}px`},g=k=>{(!k.target||!c.contains(k.target)||!e.isEditable)&&n.contains(d)&&n.contains(u)&&(n.removeChild(d),n.removeChild(u)),f&&(f=void 0,c.contains(h)&&c.removeChild(h),e.updateBlock(t,{props:{previewWidth:m}}))},y=()=>{e.isEditable&&(n.appendChild(d),n.appendChild(u))},b=k=>{k.relatedTarget===d||k.relatedTarget===u||f||e.isEditable&&n.contains(d)&&n.contains(u)&&(n.removeChild(d),n.removeChild(u))},v=k=>{k.preventDefault(),c.contains(h)||c.appendChild(h),f={handleUsed:"left",initialWidth:c.clientWidth,initialClientX:k.clientX}},w=k=>{k.preventDefault(),c.contains(h)||c.appendChild(h),f={handleUsed:"right",initialWidth:c.clientWidth,initialClientX:k.clientX}};return window.addEventListener("mousemove",p),window.addEventListener("mouseup",g),c.addEventListener("mouseenter",y),c.addEventListener("mouseleave",b),d.addEventListener("mousedown",v),u.addEventListener("mousedown",w),{dom:c,destroy:()=>{l==null||l(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g),c.removeEventListener("mouseenter",y),c.removeEventListener("mouseleave",b),d.removeEventListener("mousedown",v),u.removeEventListener("mousedown",w)}}},ZP=t=>{const e=t.src||void 0,r=t.width||void 0,n=t.alt||void 0;return{url:e,previewWidth:r,name:n}},g3e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',x3e={textAlignment:pn.textAlignment,backgroundColor:pn.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},qW={type:"image",propSchema:x3e,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},y3e=(t,e)=>{const r=document.createElement("div");r.innerHTML=g3e;const n=document.createElement("div");n.className="bn-visual-media-wrapper";const s=document.createElement("img");return s.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(a=>{s.src=a}):s.src=t.props.url,s.alt=t.props.name||t.props.caption||"BlockNote image",s.contentEditable="false",s.draggable=!1,n.appendChild(s),WW(t,e,{dom:n},n,e.dictionary.file_blocks.image.add_button_text,r.firstElementChild)},GW=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:ZP(t);if(t.tagName==="FIGURE"){const e=N2(t,"img");if(!e)return;const{targetElement:r,caption:n}=e;return{...ZP(r),caption:n}}},v3e=t=>{if(!t.props.url){const r=document.createElement("p");return r.textContent="Add image",{dom:r}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?m_(e,t.props.caption):S2(e,t.props.caption):{dom:e}},b3e=uy(qW,{render:y3e,parse:GW,toExternalHTML:v3e}),KW=(t,e,r)=>({state:n,dispatch:s})=>{const a=cc(n.doc,t),i=qd(a);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const l=[{type:i.bnBlock.node.type,attrs:r?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:n.schema.nodes.paragraph,attrs:r?{...i.blockContent.node.attrs}:{}}];return s&&n.tr.split(t,2,l),!0},E2=t=>{const{blockInfo:e,selectionEmpty:r}=t.transact(a=>({blockInfo:b2(a),selectionEmpty:a.selection.anchor===a.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:n,blockContent:s}=e;return!(s.node.type.name==="toggleListItem"||s.node.type.name==="bulletListItem"||s.node.type.name==="numberedListItem"||s.node.type.name==="checkListItem")||!r?!1:t._tiptapEditor.commands.first(({state:a,chain:i,commands:l})=>[()=>l.command(()=>s.node.childCount===0?l.command(Ts(n.beforePos,{type:"paragraph",props:{}})):!1),()=>l.command(()=>s.node.childCount>0?(i().deleteSelection().command(KW(a.selection.from,!0)).run(),!0):!1)])},w3e={...pn},k3e=ri({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>E2(this.options.editor),"Mod-Shift-6":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){var e,r;return Ya(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({HTMLAttributes:t,getPos:e})=>{var r,n;const{dom:s,contentDOM:a}=Ya(this.name,"p",{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{}),i=this.options.editor,l=v2(e,i,this.editor,this.name),c=VW(l,i,a);return s.appendChild(c.dom),{dom:s,contentDOM:a,ignoreMutation:c.ignoreMutation,destroy:c.destroy}}}}),C3e=cl(k3e,w3e);function p_(t,e,r){var n,s,a;const i=Wo.fromSchema(e),l=t,c=document.createElement("div");c.setAttribute("data-node-type","blockGroup");for(const m of Array.from(l.childNodes))c.appendChild(m.cloneNode(!0));let d=i.parse(c,{topNode:e.nodes.blockGroup.create()});((s=(n=d.firstChild)==null?void 0:n.firstChild)==null?void 0:s.type.name)==="checkListItem"&&(d=d.copy(d.content.cut(d.firstChild.firstChild.nodeSize+2)));const u=(a=d.firstChild)==null?void 0:a.firstChild;if(!(u!=null&&u.isTextblock))return Ne.from(d);const h=e.nodes[r].create({},u.content),f=d.content.cut(u.nodeSize+2);if(f.size>0){const m=d.copy(f);return h.content.addToEnd(m)}return h.content}const N3e={...pn},S3e=ri({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new Fd({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:r})=>{const n=zr(t);!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"||n.blockNoteType==="heading"||e().command(Ts(n.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>E2(this.options.editor),"Mod-Shift-8":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const r=t.parentElement;return r===null?!1:r.tagName==="UL"||r.tagName==="DIV"&&((e=r.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>p_(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,r;return Ya(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),E3e=cl(S3e,N3e),ZW={...pn,checked:{default:!1}},j3e=ri({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return dy(ZW)},addInputRules(){return[new Fd({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:r})=>{const n=zr(t);!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"||e().command(Ts(n.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:r.from,to:r.to})}}),new Fd({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:r})=>{const n=zr(t);!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"||e().command(Ts(n.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>E2(this.options.editor),"Mod-Shift-9":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const r=t.parentElement;if(r===null)return!1;if(r.tagName==="UL"||r.tagName==="DIV"&&((e=r.parentElement)==null?void 0:e.tagName)==="UL"){const n=t.querySelector("input[type=checkbox]")||null;return n===null?!1:{checked:n.checked}}return!1},getContent:(t,e)=>p_(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var r,n;const s=document.createElement("input");s.type="checkbox",s.checked=t.attrs.checked,t.attrs.checked&&s.setAttribute("checked","");const{dom:a,contentDOM:i}=Ya(this.name,"p",{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{});return a.insertBefore(s,i),{dom:a,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:r,HTMLAttributes:n})=>{var s,a;const i=document.createElement("div"),l=document.createElement("div");l.contentEditable="false";const c=document.createElement("input");c.type="checkbox",c.checked=t.attrs.checked,t.attrs.checked&&c.setAttribute("checked","");const d=()=>{if(!r.isEditable){c.checked=!c.checked;return}if(typeof e!="boolean"){const f=cc(r.state.doc,e());if(f.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${f.node.type.name}`);this.editor.commands.command(Ts(f.posBeforeNode,{type:"checkListItem",props:{checked:c.checked}}))}};c.addEventListener("change",d);const{dom:u,contentDOM:h}=Ya(this.name,"p",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...n},((a=this.options.domAttributes)==null?void 0:a.inlineContent)||{});if(typeof e!="boolean"){const f="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;c.setAttribute("aria-labelledby",f),h.id=f}return u.removeChild(h),u.appendChild(i),i.appendChild(l),i.appendChild(h),l.appendChild(c),{dom:u,contentDOM:h,destroy:()=>{c.removeEventListener("change",d)}}}}}),T3e=cl(j3e,ZW),_3e=new Qt("numbered-list-indexing"),A3e=()=>new Dt({key:_3e,appendTransaction:(t,e,r)=>{const n=r.tr;n.setMeta("numberedListIndexing",!0);let s=!1;return r.doc.descendants((a,i)=>{var l;if(a.type.name==="blockContainer"&&a.firstChild.type.name==="numberedListItem"){let c=`${a.firstChild.attrs.start||1}`;const d=qd({posBeforeNode:i,node:a});if(!d.isBlockContainer)throw new Error("impossible");const u=n.doc.resolve(d.bnBlock.beforePos).nodeBefore;if(u){const p=qd({posBeforeNode:d.bnBlock.beforePos-u.nodeSize,node:u});if(p.blockNoteType==="numberedListItem"){if(!p.isBlockContainer)throw new Error("impossible");const g=p.blockContent.node.attrs.index;c=(parseInt(g)+1).toString()}}const h=d.blockContent.node,f=h.attrs.index,m=((l=u==null?void 0:u.firstChild)==null?void 0:l.type.name)!=="numberedListItem";if(f!==c||h.attrs.start&&!m){s=!0;const{start:p,...g}=h.attrs;n.setNodeMarkup(d.blockContent.beforePos,void 0,{...g,index:c,...typeof p=="number"&&m&&{start:p}})}}}),s?n:null}}),YW={...pn,start:{default:void 0,type:"number"}},M3e=ri({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...dy(YW),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new Fd({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:r,match:n})=>{const s=zr(t);if(!s.isBlockContainer||s.blockContent.node.type.spec.content!=="inline*"||s.blockNoteType==="numberedListItem"||s.blockNoteType==="heading")return;const a=parseInt(n[1]);e().command(Ts(s.bnBlock.beforePos,{type:"numberedListItem",props:a===1&&{}||{start:a}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{Enter:()=>E2(this.options.editor),"Mod-Shift-7":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[A3e()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const r=t.parentElement;if(r===null)return!1;if(r.tagName==="OL"||r.tagName==="DIV"&&((e=r.parentElement)==null?void 0:e.tagName)==="OL"){const n=parseInt(r.getAttribute("start")||"1")||1;return t.previousSibling||n===1?{}:{start:n}}return!1},getContent:(t,e)=>p_(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,r;return Ya(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),O3e=cl(M3e,YW),R3e={...pn},P3e=ri({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,r;return Ya(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),I3e=cl(P3e,R3e),D3e={...pn},L3e=ri({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new Fd({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:r})=>{const n=zr(t);!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"||e().command(Ts(n.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:r.from,to:r.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=zr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Ts(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote",getContent:(t,e)=>{const r=t.cloneNode(!0);return CTe(r),Wo.fromSchema(e).parse(r,{topNode:e.nodes.paragraph.create()}).content}}]},renderHTML({HTMLAttributes:t}){var e,r;return Ya(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),$3e=cl(L3e,D3e),F3e=35,g_=120,B3e=31,z3e=Tr.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[gSe({cellMinWidth:F3e,defaultCellMinWidth:g_,View:null}),ESe()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,r=t.$head.parentOffset===0,n=t.$head.node().type.name==="tableParagraph";return e&&r&&n},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:r})=>H8(1)(t,e,r)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:r})=>H8(-1)(t,e,r))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Ft(nt(t,"tableRole",e))}}}),U3e={textColor:pn.textColor},V3e=ri({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){var r,n,s;const a=Ya(this.name,"table",{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{}),i=document.createElement("colgroup");for(const l of t.children[0].children)if(l.attrs.colwidth)for(const c of l.attrs.colwidth){const d=document.createElement("col");c&&(d.style=`width: ${c}px`),i.appendChild(d)}else i.appendChild(document.createElement("col"));return(s=a.dom.firstChild)==null||s.appendChild(i),a},addNodeView(){return({node:t,HTMLAttributes:e})=>{var r;class n extends YV{constructor(a,i,l){super(a,i),this.node=a,this.cellMinWidth=i,this.blockContentHTMLAttributes=l;const c=document.createElement("div");c.className=Dr("bn-block-content",l.class),c.setAttribute("data-content-type","table");for(const[f,m]of Object.entries(l))f!=="class"&&c.setAttribute(f,m);const d=this.dom,u=document.createElement("div");u.className="tableWrapper-inner",u.appendChild(d.firstChild),d.appendChild(u),c.appendChild(d);const h=document.createElement("div");h.className="table-widgets-container",h.style.position="relative",d.appendChild(h),this.dom=c}ignoreMutation(a){return!a.target.closest(".tableWrapper-inner")||super.ignoreMutation(a)}}return new n(t,g_,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e})}}}),H3e=ri({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),W3e=al.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Ka(this.options.HTMLAttributes,t),0]}});function YP(t,e){const r=Wo.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),n=[];return r.content.descendants(s=>{if(s.isInline)return n.push(s),!1}),Ne.fromArray(n)}const q3e=cl(V3e,U3e,[z3e,H3e,XSe.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>YP(t,e)}]}}),YSe.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>YP(t,e)}]}}),W3e]),XP=t=>{const e=t.src||void 0,r=t.width||void 0;return{url:e,previewWidth:r}},G3e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',K3e={textAlignment:pn.textAlignment,backgroundColor:pn.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},XW={type:"video",propSchema:K3e,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},Z3e=(t,e)=>{const r=document.createElement("div");r.innerHTML=G3e;const n=document.createElement("div");n.className="bn-visual-media-wrapper";const s=document.createElement("video");return s.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(a=>{s.src=a}):s.src=t.props.url,s.controls=!0,s.contentEditable="false",s.draggable=!1,s.width=t.props.previewWidth,n.appendChild(s),WW(t,e,{dom:n},n,e.dictionary.file_blocks.video.add_button_text,r.firstElementChild)},JW=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:XP(t);if(t.tagName==="FIGURE"){const e=N2(t,"video");if(!e)return;const{targetElement:r,caption:n}=e;return{...XP(r),caption:n}}},Y3e=t=>{if(!t.props.url){const r=document.createElement("p");return r.textContent="Add video",{dom:r}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?m_(e,t.props.caption):S2(e,t.props.caption):{dom:e}},X3e=uy(XW,{render:Z3e,parse:JW,toExternalHTML:Y3e}),x_={paragraph:I3e,heading:p3e,quote:$3e,codeBlock:n3e,toggleListItem:C3e,bulletListItem:E3e,numberedListItem:O3e,checkListItem:T3e,table:q3e,file:u3e,image:b3e,video:X3e,audio:e3e},J3e=wW(x_),y_={bold:Cu(LSe,"boolean"),italic:Cu(WSe,"boolean"),underline:Cu(ZSe,"boolean"),strike:Cu(KSe,"boolean"),code:Cu(BSe,"boolean"),textColor:o3e,backgroundColor:a3e};jW(y_);const QW={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},Q3e=EW(QW);function vs(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===J3e[t]}function e_e(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===Q3e[t]}function t_e(t,e,r){return e.type===t&&e.type in r.schema.blockSchema&&vs(e.type,r)}function my(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function r_e(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function py(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function $f(t,e,r){return e in r.schema.blockSchema&&t in r.schema.blockSchema[e].propSchema&&r.schema.blockSchema[e].propSchema[t]===pn[t]}function S4(t,e,r){return $f(t,e.type,r)}function E4(t){return t instanceof Cr}function n_e(t){let e=t.getTextCursorPosition().block,r=t.schema.blockSchema[e.type].content;for(;r==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;r=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function Tn(t,e){const r=t.getTextCursorPosition().block;if(r.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let n;return Array.isArray(r.content)&&(r.content.length===1&&_h(r.content[0])&&r.content[0].type==="text"&&r.content[0].text==="/"||r.content.length===0)?(n=t.updateBlock(r,e),t.setTextCursorPosition(n)):(n=t.insertBlocks([e],r,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),n_e(t),n}function s_e(t){const e=[];return vs("heading",t)&&e.push({onItemClick:()=>{Tn(t,{type:"heading",props:{level:1}})},badge:_a("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{Tn(t,{type:"heading",props:{level:2}})},badge:_a("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{Tn(t,{type:"heading",props:{level:3}})},badge:_a("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),vs("quote",t)&&e.push({onItemClick:()=>{Tn(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),vs("toggleListItem",t)&&e.push({onItemClick:()=>{Tn(t,{type:"toggleListItem"})},badge:_a("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),vs("numberedListItem",t)&&e.push({onItemClick:()=>{Tn(t,{type:"numberedListItem"})},badge:_a("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),vs("bulletListItem",t)&&e.push({onItemClick:()=>{Tn(t,{type:"bulletListItem"})},badge:_a("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),vs("checkListItem",t)&&e.push({onItemClick:()=>{Tn(t,{type:"checkListItem"})},badge:_a("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),vs("paragraph",t)&&e.push({onItemClick:()=>{Tn(t,{type:"paragraph"})},badge:_a("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),vs("codeBlock",t)&&e.push({onItemClick:()=>{Tn(t,{type:"codeBlock"})},badge:_a("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),vs("table",t)&&e.push({onItemClick:()=>{Tn(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),vs("image",t)&&e.push({onItemClick:()=>{const r=Tn(t,{type:"image"});t.transact(n=>n.setMeta(t.filePanel.plugins[0],{block:r}))},key:"image",...t.dictionary.slash_menu.image}),vs("video",t)&&e.push({onItemClick:()=>{const r=Tn(t,{type:"video"});t.transact(n=>n.setMeta(t.filePanel.plugins[0],{block:r}))},key:"video",...t.dictionary.slash_menu.video}),vs("audio",t)&&e.push({onItemClick:()=>{const r=Tn(t,{type:"audio"});t.transact(n=>n.setMeta(t.filePanel.plugins[0],{block:r}))},key:"audio",...t.dictionary.slash_menu.audio}),vs("file",t)&&e.push({onItemClick:()=>{const r=Tn(t,{type:"file"});t.transact(n=>n.setMeta(t.filePanel.plugins[0],{block:r}))},key:"file",...t.dictionary.slash_menu.file}),vs("heading",t)&&(e.push({onItemClick:()=>{Tn(t,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...t.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{Tn(t,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...t.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{Tn(t,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...t.dictionary.slash_menu.toggle_heading_3}),t.settings.heading.levels.filter(r=>r>3).forEach(r=>{e.push({onItemClick:()=>{Tn(t,{type:"heading",props:{level:r}})},key:`heading_${r}`,...t.dictionary.slash_menu[`heading_${r}`]})})),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function a_e(t,e){return t.filter(({title:r,aliases:n})=>r.toLowerCase().includes(e.toLowerCase())||n&&n.filter(s=>s.toLowerCase().includes(e.toLowerCase())).length!==0)}function tS(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let v_=class eq{constructor(e){de(this,"blockSpecs"),de(this,"inlineContentSpecs"),de(this,"styleSpecs"),de(this,"blockSchema"),de(this,"inlineContentSchema"),de(this,"styleSchema"),de(this,"BlockNoteEditor","only for types"),de(this,"Block","only for types"),de(this,"PartialBlock","only for types"),this.blockSpecs=tS(e==null?void 0:e.blockSpecs)||x_,this.inlineContentSpecs=tS(e==null?void 0:e.inlineContentSpecs)||QW,this.styleSpecs=tS(e==null?void 0:e.styleSpecs)||y_,this.blockSchema=wW(this.blockSpecs),this.inlineContentSchema=EW(this.inlineContentSpecs),this.styleSchema=jW(this.styleSpecs)}static create(e){return new eq(e)}};const i_e={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},o_e=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},l_e=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},c_e=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},d_e=uy(i_e,{render:o_e,parse:l_e,toExternalHTML:c_e});v_.create({blockSpecs:{pageBreak:d_e}});function u_e(t){return t.transact(e=>{const r=cc(e.doc,e.selection.anchor);if(e.selection instanceof Cr)return{type:"cell",anchorBlockId:r.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-r.posBeforeNode,headCellOffset:e.selection.$headCell.pos-r.posBeforeNode};if(e.selection instanceof it)return{type:"node",anchorBlockId:r.node.attrs.id};{const n=cc(e.doc,e.selection.head);return{type:"text",anchorBlockId:r.node.attrs.id,headBlockId:n.node.attrs.id,anchorOffset:e.selection.anchor-r.posBeforeNode,headOffset:e.selection.head-n.posBeforeNode}}})}function h_e(t,e){var r,n;const s=(r=Xa(e.anchorBlockId,t.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let a;if(e.type==="cell")a=Cr.create(t.doc,s+e.anchorCellOffset,s+e.headCellOffset);else if(e.type==="node")a=it.create(t.doc,s+1);else{const i=(n=Xa(e.headBlockId,t.doc))==null?void 0:n.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);a=Je.create(t.doc,s+e.anchorOffset,i+e.headOffset)}t.setSelection(a)}function j4(t){return t.map(e=>e.type==="columnList"?e.children.map(r=>j4(r.children)).flat():{...e,children:j4(e.children)}).flat()}function tq(t,e,r){t.transact(n=>{var s;const a=((s=t.getSelection())==null?void 0:s.blocks)||[t.getTextCursorPosition().block],i=u_e(t);t.removeBlocks(a),t.insertBlocks(j4(a),e,r),h_e(n,i)})}function rq(t){return!t||t.type!=="columnList"}function nq(t,e,r){let n,s;if(e?e.children.length>0?(n=e.children[e.children.length-1],s="after"):(n=e,s="before"):r&&(n=r,s="before"),!n||!s)return;const a=t.getParentBlock(n);return rq(a)?{referenceBlock:n,placement:s}:nq(t,s==="after"?n:t.getPrevBlock(n),a)}function sq(t,e,r){let n,s;if(e?e.children.length>0?(n=e.children[0],s="before"):(n=e,s="after"):r&&(n=r,s="after"),!n||!s)return;const a=t.getParentBlock(n);return rq(a)?{referenceBlock:n,placement:s}:sq(t,s==="before"?n:t.getNextBlock(n),a)}function f_e(t){t.transact(()=>{const e=t.getSelection(),r=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,n=nq(t,t.getPrevBlock(r),t.getParentBlock(r));n&&tq(t,n.referenceBlock,n.placement)})}function m_e(t){t.transact(()=>{const e=t.getSelection(),r=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,n=sq(t,t.getNextBlock(r),t.getParentBlock(r));n&&tq(t,n.referenceBlock,n.placement)})}function p_e(t,e,r){const{$from:n,$to:s}=t.selection,a=n.blockRange(s,m=>m.childCount>0&&(m.type.name==="blockGroup"||m.type.name==="column"));if(!a)return!1;const i=a.startIndex;if(i===0)return!1;const l=a.parent.child(i-1);if(l.type!==e)return!1;const c=l.lastChild&&l.lastChild.type===r,d=Ne.from(c?e.create():null),u=new $e(Ne.from(e.create(null,Ne.from(r.create(null,d)))),c?3:1,0),h=a.start,f=a.end;return t.step(new mn(h-(c?3:1),f,h,f,u,1,!0)).scrollIntoView(),!0}function aq(t){return t.transact(e=>p_e(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function g_e(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function x_e(t){return t.transact(e=>{const{bnBlock:r}=b2(e);return e.doc.resolve(r.beforePos).nodeBefore!==null})}function y_e(t){return t.transact(e=>{const{bnBlock:r}=b2(e);return e.doc.resolve(r.beforePos).depth>1})}function v_e(t,e){const r=typeof e=="string"?e:e.id,n=Xn(t),s=Xa(r,t);if(s)return Yr(s.node,n)}function b_e(t,e){const r=typeof e=="string"?e:e.id,n=Xa(r,t),s=Xn(t);if(!n)return;const a=t.resolve(n.posBeforeNode).nodeBefore;if(a)return Yr(a,s)}function w_e(t,e){const r=typeof e=="string"?e:e.id,n=Xa(r,t),s=Xn(t);if(!n)return;const a=t.resolve(n.posBeforeNode+n.node.nodeSize).nodeAfter;if(a)return Yr(a,s)}function k_e(t,e){const r=typeof e=="string"?e:e.id,n=Xn(t),s=Xa(r,t);if(!s)return;const a=t.resolve(s.posBeforeNode),i=a.node(),l=a.node(-1),c=l.type.name!=="doc"?i.type.name==="blockGroup"?l:i:void 0;if(c)return Yr(c,n)}function C_e(t,e,r,n={updateSelection:!0}){let{from:s,to:a}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},i=!0,l=!0,c="";if(r.forEach(d=>{d.check(),i&&d.isText&&d.marks.length===0?c+=d.text:i=!1,l=l?d.isBlock:!1}),s===a&&l){const{parent:d}=t.doc.resolve(s);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(s-=1,a+=1)}return i?t.insertText(c,s,a):t.replaceWith(s,a,r),n.updateSelection&&TV(t,t.steps.length-1,-1),!0}function N_e(t){const e=Xn(t);if(t.selection.empty||"node"in t.selection)return;const r=t.doc.resolve(cc(t.doc,t.selection.from).posBeforeNode),n=t.doc.resolve(cc(t.doc,t.selection.to).posBeforeNode),s=(d,u)=>{const h=r.posAtIndex(d,u),f=t.doc.resolve(h).nodeAfter;if(!f)throw new Error(`Error getting selection - node not found at position ${h}`);return Yr(f,e)},a=[],i=r.sharedDepth(n.pos),l=r.index(i),c=n.index(i);if(r.depth>i){a.push(Yr(r.nodeAfter,e));for(let d=r.depth;d>i;d--)if(r.node(d).type.isInGroup("childContainer")){const u=r.index(d)+1,h=r.node(d).childCount;for(let f=u;f<h;f++)a.push(s(f,d))}}else a.push(s(l,i));for(let d=l+1;d<=c;d++)a.push(s(d,i));if(a.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:a}}function S_e(t,e,r){const n=typeof e=="string"?e:e.id,s=typeof r=="string"?r:r.id,a=Xn(t),i=fy(a);if(n===s)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${n})`);const l=Xa(n,t.doc);if(!l)throw new Error(`Block with ID ${n} not found`);const c=Xa(s,t.doc);if(!c)throw new Error(`Block with ID ${s} not found`);const d=qd(l),u=qd(c),h=i.blockSchema[d.blockNoteType],f=i.blockSchema[u.blockNoteType];if(!d.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${n})`);if(!u.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${s})`);let m,p;if(h.content==="table"){const g=Or.get(d.blockContent.node);m=d.blockContent.beforePos+g.positionAt(0,0,d.blockContent.node)+1+2}else m=d.blockContent.beforePos+1;if(f.content==="table"){const g=Or.get(u.blockContent.node),y=u.blockContent.beforePos+g.positionAt(g.height-1,g.width-1,u.blockContent.node)+1,b=t.doc.resolve(y).nodeAfter.nodeSize;p=y+b-2}else p=u.blockContent.afterPos-1;t.setSelection(Je.create(t.doc,m,p))}function E_e(t){const e=Xn(t);let r=t.selection.$from,n=t.selection.$to;for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);const s=ETe(t.doc.slice(r.pos,n.pos,!0),e);return{_meta:{startPos:r.pos,endPos:n.pos},...s}}function j_e(t){const{bnBlock:e}=b2(t),r=Xn(t.doc),n=t.doc.resolve(e.beforePos),s=n.nodeBefore,a=t.doc.resolve(e.afterPos).nodeAfter;let i;return n.depth>1&&(i=n.node(),i.type.isInGroup("bnBlock")||(i=n.node(n.depth-1))),{block:Yr(e.node,r),prevBlock:s===null?void 0:Yr(s,r),nextBlock:a===null?void 0:Yr(a,r),parentBlock:i===void 0?void 0:Yr(i,r)}}function iq(t,e,r="start"){const n=typeof e=="string"?e:e.id,s=Xn(t.doc),a=fy(s),i=Xa(n,t.doc);if(!i)throw new Error(`Block with ID ${n} not found`);const l=qd(i),c=a.blockSchema[l.blockNoteType].content;if(l.isBlockContainer){const d=l.blockContent;if(c==="none"){t.setSelection(it.create(t.doc,d.beforePos));return}if(c==="inline")r==="start"?t.setSelection(Je.create(t.doc,d.beforePos+1)):t.setSelection(Je.create(t.doc,d.afterPos-1));else if(c==="table")r==="start"?t.setSelection(Je.create(t.doc,d.beforePos+4)):t.setSelection(Je.create(t.doc,d.afterPos-4));else throw new Xo(c)}else{const d=r==="start"?l.childContainer.node.firstChild:l.childContainer.node.lastChild;iq(t,d.attrs.id,r)}}let Ff;async function j2(){if(Ff)return Ff;const t=await Promise.all([Nt(()=>import("./index-D0X1IP5Y.js"),__vite__mapDeps([0,1,2,3,4])),Nt(()=>import("./index-C_mdXLqE.js"),[]),Nt(()=>import("./index-D149j8az.js"),__vite__mapDeps([5,1,2])),Nt(()=>import("./index-CGTeKkTr.js"),__vite__mapDeps([6,4])),Nt(()=>import("./index-CknMtToR.js"),__vite__mapDeps([7,8,9,10,11,12,13])),Nt(()=>import("./index-Dss-okuC.js"),__vite__mapDeps([14,15,16,17,3,10,18,12,13,11])),Nt(()=>import("./index-Cc-sgT2Y.js"),__vite__mapDeps([19,18,17,16,12,10,13,11,20])),Nt(()=>import("./index-BNLM2Si7.js"),__vite__mapDeps([21,20,15,16,17,2,13])),Nt(()=>import("./index-CmeJremU.js"),__vite__mapDeps([22,8,16,12,10])),Nt(()=>import("./index-DbTOtaR4.js"),__vite__mapDeps([23,9,10]))]);return Ff={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},Ff}function T_e(){const t=e=>{let r=e.children.length;for(let n=0;n<r;n++){const s=e.children[n];if(s.type==="element"&&(t(s),s.tagName==="u"))if(s.children.length>0){e.children.splice(n,1,...s.children);const a=s.children.length-1;r+=a,n+=a}else e.children.splice(n,1),r--,n--}};return t}function __e(){const t=Ff;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=r=>{var n;if(r.children&&"length"in r.children&&r.children.length)for(let s=r.children.length-1;s>=0;s--){const a=r.children[s],i=s+1<r.children.length?r.children[s+1]:void 0;a.type==="element"&&a.tagName==="input"&&((n=a.properties)==null?void 0:n.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(a)}};return e}function b_(t){const e=Ff;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(T_e).use(__e).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:r=>r.value}}).processSync(t).value}async function A_e(t,e,r,n){await j2();const s=C2(e,r).exportBlocks(t,n);return b_(s)}function M_e(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function O_e(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function R_e(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const r=M_e(e),n=e.parentElement,s=Array.from(n.childNodes).slice(r+1);e.remove(),s.forEach(a=>{a.remove()}),n.insertAdjacentElement("afterend",e),s.reverse().forEach(a=>{if(O_e(a))return;const i=document.createElement("li");i.append(a),e.insertAdjacentElement("afterend",i)}),n.childNodes.length===0&&n.remove()})}function P_e(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var r,n;const s=e.previousElementSibling,a=document.createElement("div");s.insertAdjacentElement("afterend",a),a.append(s);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),a.append(i);((r=a.nextElementSibling)==null?void 0:r.nodeName)==="UL"||((n=a.nextElementSibling)==null?void 0:n.nodeName)==="OL";)i.append(a.nextElementSibling)})}let JP=null;function I_e(){return JP||(JP=document.implementation.createHTMLDocument("title"))}function oq(t){if(typeof t=="string"){const e=I_e().createElement("div");e.innerHTML=t,t=e}return R_e(t),P_e(t),t}async function lq(t,e){const r=oq(t),n=Wo.fromSchema(e).parse(r,{topNode:e.nodes.blockGroup.create()}),s=[];for(let a=0;a<n.childCount;a++)s.push(Yr(n.child(a),e));return s}function D_e(t,e){const r=e.value?e.value:"",n={};e.lang&&(n["data-language"]=e.lang);let s={type:"element",tagName:"code",properties:n,children:[{type:"text",value:r}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}async function cq(t){const e=await j2();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:D_e}}).use(e.rehypeStringify.default).processSync(t).value}async function L_e(t,e){const r=await cq(t);return lq(r,e)}const w_=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function $_e(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function F_e(t,e){const r=t.split("/"),n=e.split("/");if(r.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(n.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return r[1]==="*"||n[1]==="*"?r[0]===n[0]:(r[0]==="*"||n[0]==="*"||r[0]===n[0])&&r[1]===n[1]}function QP(t,e,r,n="after"){let s;return Array.isArray(e.content)&&e.content.length===0?s=t.updateBlock(e,r).id:s=t.insertBlocks([r],e,n)[0].id,s}async function dq(t,e){var r;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const n="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(n===null)return;let s=null;for(const l of w_)if(n.types.includes(l)){s=l;break}if(s!=="Files")return;const a=n.items;if(!a)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(l=>l.isFileBlock);for(let l=0;l<a.length;l++){let c="file";for(const u of i)for(const h of u.fileBlockAccept||[]){const f=h.startsWith("."),m=a[l].getAsFile();if(m&&(!f&&m.type&&F_e(a[l].type,h)||f&&$_e("."+m.name.split(".").pop(),h))){c=u.type;break}}const d=a[l].getAsFile();if(d){const u={type:c,props:{name:d.name}};let h;if(t.type==="paste"){const p=e.getTextCursorPosition().block;h=QP(e,p,u)}else if(t.type==="drop"){const p={left:t.clientX,top:t.clientY},g=(r=e.prosemirrorView)==null?void 0:r.posAtCoords(p);if(!g)return;h=e.transact(y=>{var b;const v=cc(y.doc,g.pos),w=(b=e.prosemirrorView)==null?void 0:b.dom.querySelector(`[data-id="${v.node.attrs.id}"]`),k=w==null?void 0:w.getBoundingClientRect();return QP(e,e.getBlock(v.node.attrs.id),u,k&&(k.top+k.bottom)/2>p.top?"before":"after")})}else return;const f=await e.uploadFile(d,h),m=typeof f=="string"?{props:{url:f}}:{...f};e.updateBlock(h,m)}}}const B_e=t=>Tr.create({name:"dropFile",addProseMirrorPlugins(){return[new Dt({props:{handleDOMEvents:{drop(e,r){if(!t.isEditable)return;let n=null;for(const s of w_)if(r.dataTransfer.types.includes(s)){n=s;break}return n===null?!0:n==="Files"?(dq(r,t),!0):!1}}}})]}}),z_e=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,U_e=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,V_e=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,H_e=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,W_e=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,q_e=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,G_e=/\n{2} {0,3}-{2,48}\n{2}/,K_e=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,Z_e=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,Y_e=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,X_e=/^\s*\|(.+\|)+\s*$/m,J_e=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,Q_e=/^\s*\|(.+\|)+\s*$/m,eAe=t=>z_e.test(t)||U_e.test(t)||V_e.test(t)||H_e.test(t)||W_e.test(t)||q_e.test(t)||G_e.test(t)||K_e.test(t)||Z_e.test(t)||Y_e.test(t)||X_e.test(t)||J_e.test(t)||Q_e.test(t);async function tAe(t,e){const{schema:r}=e.state;if(!t.clipboardData)return!1;const n=t.clipboardData.getData("text/plain");if(!n)return!1;if(!r.nodes.codeBlock)return e.pasteText(n),!0;const s=t.clipboardData.getData("vscode-editor-data"),a=s?JSON.parse(s):void 0,i=a==null?void 0:a.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${n.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function rAe({event:t,editor:e,prioritizeMarkdownOverHTML:r,plainTextAsMarkdown:n}){var s;if(e.transact(l=>l.selection.$from.parent.type.spec.code&&l.selection.$to.parent.type.spec.code)){const l=(s=t.clipboardData)==null?void 0:s.getData("text/plain");if(l)return e.pasteText(l),!0}let a;for(const l of w_)if(t.clipboardData.types.includes(l)){a=l;break}if(!a)return!0;if(a==="vscode-editor-data")return tAe(t,e.prosemirrorView),!0;if(a==="Files")return dq(t,e),!0;const i=t.clipboardData.getData(a);if(a==="blocknote/html")return e.pasteHTML(i,!0),!0;if(a==="text/markdown")return e.pasteMarkdown(i),!0;if(r){const l=t.clipboardData.getData("text/plain");if(eAe(l))return e.pasteMarkdown(l),!0}return a==="text/html"?(e.pasteHTML(i),!0):n?(e.pasteMarkdown(i),!0):(e.pasteText(i),!0)}const nAe=(t,e)=>Tr.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new Dt({props:{handleDOMEvents:{paste(r,n){if(n.preventDefault(),!!t.isEditable)return e({event:n,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:s=!0,plainTextAsMarkdown:a=!0}={})=>rAe({event:n,editor:t,prioritizeMarkdownOverHTML:s,plainTextAsMarkdown:a})})}}}})]}});function uq(t){const e=[];return t.descendants(r=>{var n,s;const a=Xn(r);return r.type.name==="blockContainer"&&((n=r.firstChild)==null?void 0:n.type.name)==="blockGroup"?!0:r.type.name==="columnList"&&r.childCount===1?((s=r.firstChild)==null||s.forEach(i=>{e.push(Yr(i,a))}),!1):r.type.isInGroup("bnBlock")?(e.push(Yr(r,a)),!1):!0}),e}function sAe(t,e,r){var n;let s=!1;const a=t.state.selection instanceof Cr;if(!a){const c=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,d=[];for(let u=0;u<c.childCount;u++)d.push(c.child(u));s=d.find(u=>u.type.isInGroup("bnBlock")||u.type.name==="blockGroup"||u.type.spec.group==="blockContent")===void 0,s&&(e=c)}let i;const l=C2(t.state.schema,r);if(a){((n=e.firstChild)==null?void 0:n.type.name)==="table"&&(e=e.firstChild.content);const c=SW(e,r.schema.inlineContentSchema,r.schema.styleSchema);i=`<table>${l.exportInlineContent(c,{})}</table>`}else if(s){const c=w2(e,r.schema.inlineContentSchema,r.schema.styleSchema);i=l.exportInlineContent(c,{})}else{const c=uq(e);i=l.exportBlocks(c,{})}return i}function hq(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(i=>i.setSelection(new it(i.doc.resolve(t.state.selection.from-1))));const r=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,n=t.state.selection.content().content,s=sAe(t,n,e),a=b_(s);return{clipboardHTML:r,externalHTML:s,markdown:a}}const eI=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},tI=(t,e,r)=>{r.preventDefault(),r.clipboardData.clearData();const{clipboardHTML:n,externalHTML:s,markdown:a}=hq(e,t);r.clipboardData.setData("blocknote/html",n),r.clipboardData.setData("text/html",s),r.clipboardData.setData("text/plain",a)},aAe=t=>Tr.create({name:"copyToClipboard",addProseMirrorPlugins(){return j2(),[new Dt({props:{handleDOMEvents:{copy(e,r){return eI()||tI(t,e,r),!0},cut(e,r){return eI()||(tI(t,e,r),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,r){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(i=>i.setSelection(new it(i.doc.resolve(e.state.selection.from-1)))),r.preventDefault(),r.dataTransfer.clearData();const{clipboardHTML:n,externalHTML:s,markdown:a}=hq(e,t);return r.dataTransfer.setData("blocknote/html",n),r.dataTransfer.setData("text/html",s),r.dataTransfer.setData("text/plain",a),!0}}}})]}}),iAe=Tr.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:pn.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):pn.backgroundColor.default,renderHTML:t=>t.backgroundColor===pn.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});class k_{constructor(){de(this,"callbacks",{})}on(e,r){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(r),()=>this.off(e,r)}emit(e,...r){const n=this.callbacks[e];n&&n.forEach(s=>s.apply(this,r))}off(e,r){const n=this.callbacks[e];n&&(r?this.callbacks[e]=n.filter(s=>s!==r):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}}let Yn=class extends k_{constructor(...e){super(),de(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};class oAe extends Yn{constructor(){super(),de(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new Dt({filterTransaction:e=>{let r;return this.beforeChangeCallbacks.reduce((n,s)=>n===!1?n:s({getChanges(){return r||(r=$W(e),r)},tr:e})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(e){return this.beforeChangeCallbacks.push(e),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(r=>r!==e)}}}const wv=class fq extends Yn{constructor(e){super(),de(this,"provider"),de(this,"recentlyUpdatedCursors"),de(this,"renderCursor",(r,n)=>{let s=this.recentlyUpdatedCursors.get(n);if(!s){const a=(this.collaboration.renderCursor??fq.defaultCursorRender)(r);this.collaboration.showCursorLabels!=="always"&&(a.addEventListener("mouseenter",()=>{const i=this.recentlyUpdatedCursors.get(n);i.element.setAttribute("data-active",""),i.hideTimeout&&(clearTimeout(i.hideTimeout),this.recentlyUpdatedCursors.set(n,{element:i.element,hideTimeout:void 0}))}),a.addEventListener("mouseleave",()=>{const i=this.recentlyUpdatedCursors.get(n);this.recentlyUpdatedCursors.set(n,{element:i.element,hideTimeout:setTimeout(()=>{i.element.removeAttribute("data-active")},2e3)})})),s={element:a,hideTimeout:void 0},this.recentlyUpdatedCursors.set(n,s)}return s.element}),de(this,"updateUser",r=>{this.provider.awareness.setLocalStateField("user",r)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:r})=>{for(const n of r){const s=this.recentlyUpdatedCursors.get(n);s&&(s.element.setAttribute("data-active",""),s.hideTimeout&&clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(n,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(oTe(this.provider.awareness,{selectionBuilder:vW,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(e){const r=e.charAt(0)==="#"?e.substring(1,7):e,n=parseInt(r.substring(0,2),16),s=parseInt(r.substring(2,4),16),a=parseInt(r.substring(4,6),16),i=[n/255,s/255,a/255].map(l=>l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4));return .2126*i[0]+.7152*i[1]+.0722*i[2]<=.179}};de(wv,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const r=document.createElement("span");r.setAttribute("contentedEditable","false"),r.classList.add("bn-collaboration-cursor__caret"),r.setAttribute("style",`background-color: ${t.color}; color: ${wv.isDarkColor(t.color)?"white":"black"}`);const n=document.createElement("span");return n.classList.add("bn-collaboration-cursor__label"),n.setAttribute("style",`background-color: ${t.color}; color: ${wv.isDarkColor(t.color)?"white":"black"}`),n.insertBefore(document.createTextNode(t.name),null),r.insertBefore(n,null),e.insertBefore(document.createTextNode(""),null),e.insertBefore(r,null),e.insertBefore(document.createTextNode(""),null),e});let mq=wv,T4=class extends Yn{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(W5e(e))}get priority(){return 1001}},_4=class extends Yn{static key(){return"yUndoPlugin"}constructor({editor:e}){super(),this.addProsemirrorPlugin(mTe({trackedOrigins:[e]}))}get priority(){return 1e3}};const pq=ms.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Ka(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class lAe extends k_{constructor(e){super(),de(this,"userCache",new Map),de(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const r=e.filter(n=>!this.userCache.has(n)&&!this.loadingUsers.has(n));if(r.length!==0){for(const n of r)this.loadingUsers.add(n);try{const n=await this.resolveUsers(r);for(const s of n)this.userCache.set(s.id,s);this.emit("update",this.userCache)}finally{for(const n of r)this.loadingUsers.delete(n)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const T1=new Qt("blocknote-comments"),cAe="SET_SELECTED_THREAD_ID";function dAe(t,e){const r=new Map;return t.descendants((n,s)=>{n.marks.forEach(a=>{if(a.type.name===e){const i=a.attrs.threadId;if(!i)return;const l=s,c=l+n.nodeSize,d=r.get(i)??{from:1/0,to:0};r.set(i,{from:Math.min(l,d.from),to:Math.max(c,d.to)})}})}),r}class uAe extends Yn{constructor(e,r,n){if(super(),de(this,"userStore"),de(this,"pendingComment",!1),de(this,"selectedThreadId"),de(this,"threadPositions",new Map),de(this,"updateMarksFromThreads",a=>{this.editor.transact(i=>{i.doc.descendants((l,c)=>{l.marks.forEach(d=>{if(d.type.name===this.markType){const u=d.type,h=d.attrs.threadId,f=a.get(h),m=!!(!f||f.resolved||f.deletedAt);if(m!==d.attrs.orphan){const p=Math.max(c,0),g=Math.min(c+l.nodeSize,i.doc.content.size-1,i.doc.content.size-1);i.removeMark(p,g,d),i.addMark(p,g,u.create({...d.attrs,orphan:m})),m&&this.selectedThreadId===h&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=r,this.markType=n,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new lAe(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const s=this;this.addProsemirrorPlugin(new Dt({key:T1,state:{init(){return{decorations:Ht.empty}},apply(a,i){const l=a.getMeta(T1);if(!a.docChanged&&!l)return i;const c=a.docChanged?dAe(a.doc,s.markType):s.threadPositions;(c.size>0||s.threadPositions.size>0)&&(s.threadPositions=c,s.emitStateUpdate());const d=[];if(s.selectedThreadId){const u=c.get(s.selectedThreadId);u&&d.push(kr.inline(u.from,u.to,{class:"bn-thread-mark-selected"}))}return{decorations:Ht.create(a.doc,d)}}},props:{decorations(a){var i;return((i=T1.getState(a))==null?void 0:i.decorations)??Ht.empty},handleClick:(a,i,l)=>{if(l.button!==0)return;const c=a.state.doc.nodeAt(i);if(!c){s.selectThread(void 0);return}const d=c.marks.find(h=>h.type.name===n&&h.attrs.orphan!==!0),u=d==null?void 0:d.attrs.threadId;s.selectThread(u,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,r=!0){var n,s;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(a=>a.setMeta(T1,{name:cAe})),e&&r)){const a=this.threadPositions.get(e);if(!a)return;(s=(n=this.editor.prosemirrorView)==null?void 0:n.domAtPos(a.from).node)==null||s.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const r=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const n=this.editor.prosemirrorView,s=n.state.selection,a=cr.getState(n.state),i={prosemirror:{head:s.head,anchor:s.anchor},yjs:a?Ow(a.binding,n.state):void 0};await this.threadStore.addThreadToDocument({threadId:r.id,selection:i})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:r.id})}}class hAe{constructor(e,r,n,s){de(this,"state"),de(this,"emitUpdate"),de(this,"mouseDownHandler",()=>{var a;(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate())}),de(this,"dragstartHandler",()=>{var a;(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate())}),de(this,"scrollHandler",()=>{var a;if((a=this.state)!=null&&a.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),de(this,"closeMenu",()=>{var a;(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=r,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");s(this.state)},n.dom.addEventListener("mousedown",this.mouseDownHandler),n.dom.addEventListener("dragstart",this.dragstartHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,r){var n,s;const a=this.pluginKey.getState(e.state),i=this.pluginKey.getState(r);if(!((n=this.state)!=null&&n.show)&&a!=null&&a.block&&this.editor.isEditable){const d=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${a.block.id}"]`);if(!d)return;this.state={show:!0,referencePos:d.getBoundingClientRect(),block:a.block},this.emitUpdate();return}const l=(a==null?void 0:a.block)&&!(i!=null&&i.block),c=!(a!=null&&a.block)&&(i==null?void 0:i.block);l&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),c&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const rS=new Qt("FilePanelPlugin");class fAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"closeMenu",()=>{var r;return(r=this.view)==null?void 0:r.closeMenu()}),this.addProsemirrorPlugin(new Dt({key:rS,view:r=>(this.view=new hAe(e,rS,r,n=>{this.emit("update",n)}),this.view),props:{handleKeyDown:(r,n)=>{var s;return n.key==="Escape"&&this.shown?((s=this.view)==null||s.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(r,n)=>r.getMeta(rS)||(!r.getMeta(cr)&&(r.selectionSet||r.docChanged)?{block:void 0}:n)}}))}static key(){return"filePanel"}get shown(){var e,r;return((r=(e=this.view)==null?void 0:e.state)==null?void 0:r.show)||!1}onUpdate(e){return this.on("update",e)}}class mAe{constructor(e,r,n){de(this,"state"),de(this,"emitUpdate"),de(this,"preventHide",!1),de(this,"preventShow",!1),de(this,"shouldShow",({view:s,state:a,from:i,to:l})=>{const{doc:c,selection:d}=a,{empty:u}=d,h=!c.textBetween(i,l).length&&i2(a.selection);if(d.$from.parent.type.spec.code||Wj(d)&&d.node.type.spec.code||u||h)return!1;const f=document.activeElement;return!(!this.isElementWithinEditorWrapper(f)&&s.editable)}),de(this,"blurHandler",s=>{var a;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;s&&s.relatedTarget&&(i===s.relatedTarget||i.contains(s.relatedTarget)||s.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate())}),de(this,"isElementWithinEditorWrapper",s=>{if(!s)return!1;const a=this.pmView.dom.parentElement;return a?a.contains(s):!1}),de(this,"viewMousedownHandler",s=>{(!this.isElementWithinEditorWrapper(s.target)||s.button===0)&&(this.preventShow=!0)}),de(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),de(this,"dragHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),de(this,"scrollHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),de(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");n(this.state)},r.dom.addEventListener("mousedown",this.viewMousedownHandler),r.root.addEventListener("mouseup",this.mouseupHandler),r.dom.addEventListener("dragstart",this.dragHandler),r.dom.addEventListener("dragover",this.dragHandler),r.dom.addEventListener("blur",this.blurHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,r){var n,s,a;const{state:i,composing:l}=e,{doc:c,selection:d}=i,u=r&&r.doc.eq(c)&&r.selection.eq(d);if(l||u)return;const{ranges:h}=d,f=Math.min(...h.map(y=>y.$from.pos)),m=Math.max(...h.map(y=>y.$to.pos)),p=this.shouldShow({view:e,state:i,from:f,to:m}),g=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(p||this.preventHide)&&!g){const y=this.getSelectionBoundingBox();if(y.height===0&&y.width===0){queueMicrotask(()=>{const v={show:!0,referencePos:this.getSelectionBoundingBox()};this.state=v,this.emitUpdate(),e.dispatch(e.state.tr.setSelection(Je.create(e.state.doc,e.state.selection.from+1,e.state.selection.to))),e.dispatch(e.state.tr.setSelection(Je.create(e.state.doc,e.state.selection.from-1,e.state.selection.to)))});return}const b={show:!0,referencePos:this.getSelectionBoundingBox()};(b.show!==((n=this.state)==null?void 0:n.show)||b.referencePos.toJSON()!==((s=this.state)==null?void 0:s.referencePos.toJSON()))&&(this.state=b,this.emitUpdate());return}if((a=this.state)!=null&&a.show&&!this.preventHide&&(!p||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:r}=e,{ranges:n}=r,s=Math.min(...n.map(i=>i.$from.pos)),a=Math.max(...n.map(i=>i.$to.pos));if(Wj(r)){const i=this.pmView.nodeDOM(s);if(i)return i.getBoundingClientRect()}return Kb(this.pmView,s,a)}}const pAe=new Qt("FormattingToolbarPlugin");class gAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Dt({key:pAe,view:r=>(this.view=new mAe(e,r,n=>{this.emit("update",n)}),this.view),props:{handleKeyDown:(r,n)=>n.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,r;return((r=(e=this.view)==null?void 0:e.state)==null?void 0:r.show)||!1}onUpdate(e){return this.on("update",e)}}const xAe=al.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ka(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),rI=(t,e)=>{const r=t.resolve(e);if(r.depth<=1)return;const n=r.posAtIndex(r.index(r.depth-1),r.depth-1);return hy(t.resolve(n))},kv=(t,e)=>{const r=t.resolve(e),n=r.index();if(n===0)return;const s=r.posAtIndex(n-1);return hy(t.resolve(s))},gq=(t,e)=>{for(;e.childContainer;){const r=e.childContainer.node,n=t.resolve(e.childContainer.beforePos+1).posAtIndex(r.childCount-1);e=hy(t.resolve(n))}return e},yAe=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",vAe=(t,e,r,n)=>{if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${n.bnBlock.beforePos} into previous block at position ${r.bnBlock.beforePos}, but next block is not a block container`);if(n.childContainer){const s=t.doc.resolve(n.childContainer.beforePos+1),a=t.doc.resolve(n.childContainer.afterPos-1),i=s.blockRange(a);if(e){const l=t.doc.resolve(n.bnBlock.beforePos);t.tr.lift(i,l.depth)}}if(e){if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${n.bnBlock.beforePos} into previous block at position ${r.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(r.blockContent.afterPos-1,n.blockContent.beforePos+1))}return!0},nI=t=>({state:e,dispatch:r})=>{const n=e.doc.resolve(t),s=hy(n),a=kv(e.doc,s.bnBlock.beforePos);if(!a)return!1;const i=gq(e.doc,a);return yAe(i,s)?vAe(e,r,i,s):!1},bAe=Tr.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:n,commands:s})=>[()=>s.deleteSelection(),()=>s.undoInputRule(),()=>s.command(({state:a})=>{const i=zr(a);if(!i.isBlockContainer)return!1;const l=a.selection.from===i.blockContent.beforePos+1,c=i.blockContent.node.type.name==="paragraph";return l&&!c?s.command(Ts(i.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>s.command(({state:a})=>{const i=zr(a);if(!i.isBlockContainer)return!1;const{blockContent:l}=i;return a.selection.from===l.beforePos+1?s.liftListItem("blockContainer"):!1}),()=>s.command(({state:a})=>{const i=zr(a);if(!i.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=i,d=a.selection.from===c.beforePos+1,u=a.selection.empty,h=l.beforePos;return d&&u?n().command(nI(h)).scrollIntoView().run():!1}),()=>s.command(({state:a,dispatch:i})=>{const l=zr(a);if(!l.isBlockContainer||a.selection.from!==l.blockContent.beforePos+1||kv(a.doc,l.bnBlock.beforePos))return!1;const c=rI(a.doc,l.bnBlock.beforePos);if((c==null?void 0:c.blockNoteType)!=="column")return!1;const d=c,u=rI(a.doc,d.bnBlock.beforePos);if((u==null?void 0:u.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const h=d.childContainer.node.childCount===1,f=h&&u.childContainer.node.childCount===2,m=u.childContainer.node.firstChild===d.bnBlock.node;if(i){const p=a.doc.slice(l.bnBlock.beforePos,l.bnBlock.afterPos,!1);if(f)if(m){a.tr.step(new mn(u.bnBlock.beforePos,u.bnBlock.afterPos,d.bnBlock.afterPos+1,u.bnBlock.afterPos-2,p,p.size,!1));const g=a.tr.doc.resolve(d.bnBlock.beforePos);a.tr.setSelection(Je.between(g,g))}else{a.tr.step(new mn(u.bnBlock.beforePos,u.bnBlock.afterPos,u.bnBlock.beforePos+2,d.bnBlock.beforePos-1,p,0,!1));const g=a.tr.doc.resolve(a.tr.mapping.map(d.bnBlock.beforePos-1));a.tr.setSelection(Je.between(g,g))}else if(h)if(m){a.tr.delete(d.bnBlock.beforePos,d.bnBlock.afterPos),a.tr.insert(u.bnBlock.beforePos,p.content);const g=a.tr.doc.resolve(u.bnBlock.beforePos);a.tr.setSelection(Je.between(g,g))}else a.tr.delete(d.bnBlock.beforePos-1,d.bnBlock.beforePos+1);else{a.tr.delete(l.bnBlock.beforePos,l.bnBlock.afterPos),m?a.tr.insert(u.bnBlock.beforePos-1,p.content):a.tr.insert(d.bnBlock.beforePos-1,p.content);const g=a.tr.doc.resolve(d.bnBlock.beforePos-1);a.tr.setSelection(Je.between(g,g))}}return!0}),()=>s.command(({state:a})=>{const i=zr(a);if(!i.isBlockContainer)return!1;if(i.blockContent.node.childCount===0&&i.blockContent.node.type.spec.content==="inline*"){const l=kv(a.doc,i.bnBlock.beforePos);if(!l||!l.isBlockContainer)return!1;let c=n();if(l.blockContent.node.type.spec.content==="tableRow+"){const d=i.bnBlock.beforePos-1-1-1-1-1;c=c.setTextSelection(d)}else if(l.blockContent.node.type.spec.content===""){const d=l.blockContent.afterPos-l.blockContent.node.nodeSize;c=c.setNodeSelection(d)}else{const d=l.blockContent.afterPos-l.blockContent.node.nodeSize;c=c.setTextSelection(d)}return c.deleteRange({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>s.command(({state:a})=>{const i=zr(a);if(!i.isBlockContainer)throw new Error("todo");const l=a.selection.from===i.blockContent.beforePos+1,c=a.selection.empty,d=kv(a.doc,i.bnBlock.beforePos);if(d&&l&&c){const u=gq(a.doc,d);if(!u.isBlockContainer)throw new Error("todo");if(u.blockContent.node.type.spec.content===""||u.blockContent.node.type.spec.content==="inline*"&&u.blockContent.node.childCount===0)return n().cut({from:i.bnBlock.beforePos,to:i.bnBlock.afterPos},u.bnBlock.afterPos).deleteRange({from:u.bnBlock.beforePos,to:u.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:n})=>[()=>n.deleteSelection(),()=>n.command(({state:s})=>{const a=zr(s);if(!a.isBlockContainer)return!1;const{bnBlock:i,blockContent:l,childContainer:c}=a,{depth:d}=s.doc.resolve(i.beforePos),u=i.afterPos===s.doc.nodeSize-3,h=s.selection.from===l.afterPos-1,f=s.selection.empty;if(!u&&h&&f&&c===void 0){let m=d,p=i.afterPos+1,g=s.doc.resolve(p).depth;for(;g<m;)m=g,p+=2,g=s.doc.resolve(p).depth;return n.command(nI(p-1))}return!1})]),r=(n=!1)=>this.editor.commands.first(({commands:s,tr:a})=>[()=>s.command(({state:i})=>{const l=zr(i);if(!l.isBlockContainer)return!1;const{bnBlock:c,blockContent:d}=l,{depth:u}=i.doc.resolve(c.beforePos),h=i.selection.$anchor.parentOffset===0,f=i.selection.anchor===i.selection.head,m=d.node.childCount===0,p=u>1;return h&&f&&m&&p?s.liftListItem("blockContainer"):!1}),()=>s.command(({state:i})=>{const l=zr(i),c=this.options.editor.schema.blockSchema[l.blockNoteType].hardBreakShortcut??"shift+enter";if(c==="none")return!1;if(c==="shift+enter"&&n||c==="enter"){const d=a.storedMarks||a.selection.$head.marks().filter(u=>this.editor.extensionManager.splittableMarks.includes(u.type.name));return a.insert(a.selection.head,a.doc.type.schema.nodes.hardBreak.create()).ensureMarks(d),!0}return!1}),()=>s.command(({state:i,dispatch:l})=>{const c=zr(i);if(!c.isBlockContainer)return!1;const{bnBlock:d,blockContent:u}=c,h=i.selection.$anchor.parentOffset===0,f=i.selection.anchor===i.selection.head,m=u.node.childCount===0;if(h&&f&&m){const p=d.afterPos,g=p+2;if(l){const y=i.schema.nodes.blockContainer.createAndFill();i.tr.insert(p,y).scrollIntoView(),i.tr.setSelection(new Je(i.doc.resolve(g)))}return!0}return!1}),()=>s.command(({state:i,chain:l})=>{const c=zr(i);if(!c.isBlockContainer)return!1;const{blockContent:d}=c,u=i.selection.$anchor.parentOffset===0;return d.node.childCount===0?!1:(l().deleteSelection().command(KW(i.selection.from,u,u)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>r(),"Shift-Enter":()=>r(!0),Tab:()=>{var n,s,a;return this.options.tabBehavior!=="prefer-indent"&&((n=this.options.editor.formattingToolbar)!=null&&n.shown||(s=this.options.editor.linkToolbar)!=null&&s.shown||(a=this.options.editor.filePanel)!=null&&a.shown)?!1:aq(this.options.editor)},"Shift-Tab":()=>{var n,s,a;return this.options.tabBehavior!=="prefer-indent"&&((n=this.options.editor.formattingToolbar)!=null&&n.shown||(s=this.options.editor.linkToolbar)!=null&&s.shown||(a=this.options.editor.filePanel)!=null&&a.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class wAe{constructor(e,r,n){de(this,"state"),de(this,"emitUpdate"),de(this,"menuUpdateTimer"),de(this,"startMenuUpdateTimer"),de(this,"stopMenuUpdateTimer"),de(this,"mouseHoveredLinkMark"),de(this,"mouseHoveredLinkMarkRange"),de(this,"keyboardHoveredLinkMark"),de(this,"keyboardHoveredLinkMarkRange"),de(this,"linkMark"),de(this,"linkMarkRange"),de(this,"mouseOverHandler",s=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),s.target instanceof HTMLAnchorElement&&s.target.nodeName==="A"){const a=s.target,i=this.pmView.posAtDOM(a,0)+1,l=this.pmView.state.doc.resolve(i),c=l.marks();for(const d of c)if(d.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=d,this.mouseHoveredLinkMarkRange=rx(l,d.type,d.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),de(this,"clickHandler",s=>{var a;const i=this.pmView.dom.parentElement;this.linkMark&&s&&s.target&&!(i===s.target||i.contains(s.target))&&(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate())}),de(this,"scrollHandler",()=>{var s;this.linkMark!==void 0&&(s=this.state)!=null&&s.show&&(this.state.referencePos=Kb(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),de(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");n(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,r){var n;this.editor.transact(s=>{const a=Xn(s);s.insertText(r,this.linkMarkRange.from,this.linkMarkRange.to),s.addMark(this.linkMarkRange.from,this.linkMarkRange.from+r.length,a.mark("link",{href:e}))}),this.pmView.focus(),(n=this.state)!=null&&n.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(r=>r.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,r,n=!1){var s;const{state:a}=e;if(r&&r.selection.from===a.selection.from&&r.selection.to===a.selection.to||!this.pmView.hasFocus())return;const i=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const l=this.pmView.state.selection.$from.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=c,this.keyboardHoveredLinkMarkRange=rx(this.pmView.state.selection.$from,c.type,c.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&n&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Kb(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((s=this.state)!=null&&s.show&&i&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const kAe=new Qt("LinkToolbarPlugin");class CAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"editLink",(r,n)=>{this.view.editLink(r,n)}),de(this,"deleteLink",()=>{this.view.deleteLink()}),de(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),de(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),de(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Dt({key:kAe,view:r=>(this.view=new wAe(e,r,n=>{this.emit("update",n)}),this.view),props:{handleKeyDown:(r,n)=>n.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,r;return((r=(e=this.view)==null?void 0:e.state)==null?void 0:r.show)||!1}}const xq=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],yq="https",NAe=new Qt("node-selection-keyboard");class SAe extends Yn{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new Dt({key:NAe,props:{handleKeyDown:(e,r)=>{if("node"in e.state.selection){if(r.ctrlKey||r.metaKey)return!1;if(r.key.length===1)return r.preventDefault(),!0;if(r.key==="Enter"&&!r.shiftKey&&!r.altKey&&!r.ctrlKey&&!r.metaKey){const n=e.state.tr;return e.dispatch(n.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new Je(n.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const EAe=new Qt("blocknote-placeholder");class jAe extends Yn{static key(){return"placeholder"}constructor(e,r){super(),this.addProsemirrorPlugin(new Dt({key:EAe,view:n=>{var s,a;const i=`placeholder-selector-${UV()}`;n.dom.classList.add(i);const l=document.createElement("style"),c=e._tiptapEditor.options.injectNonce;c&&l.setAttribute("nonce",c),((s=e.prosemirrorView)==null?void 0:s.root)instanceof ShadowRoot?e.prosemirrorView.root.append(l):(a=e.prosemirrorView)==null||a.root.head.appendChild(l);const d=l.sheet,u=(h="")=>`.${i} .bn-block-content${h} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:h,emptyDocument:f,...m}=r;for(const[y,b]of Object.entries(m)){const v=`[data-content-type="${y}"]`;d.insertRule(`${u(v)} { content: ${JSON.stringify(b)}; }`)}d.insertRule(`${u("[data-is-only-empty-block]")} { content: ${JSON.stringify(f)}; }`),d.insertRule(`${u("[data-is-empty-and-focused]")} { content: ${JSON.stringify(h)}; }`)}catch(h){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",h)}return{destroy:()=>{var h,f;((h=e.prosemirrorView)==null?void 0:h.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(l):(f=e.prosemirrorView)==null||f.root.head.removeChild(l)}}},props:{decorations:n=>{const{doc:s,selection:a}=n;if(!e.isEditable||!a.empty||a.$from.parent.type.spec.code)return;const i=[];n.doc.content.size===6&&i.push(kr.node(2,4,{"data-is-only-empty-block":"true"}));const l=a.$anchor,c=l.parent;if(c.content.size===0){const d=l.before();i.push(kr.node(d,d+c.nodeSize,{"data-is-empty-and-focused":"true"}))}return Ht.create(s,i)}}}))}}const sI=new Qt("previous-blocks"),TAe={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class _Ae extends Yn{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new Dt({key:sI,view(r){return{update:async(n,s)=>{var a;((a=this.key)==null?void 0:a.getState(n.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{n.dispatch(n.state.tr.setMeta(sI,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(r,n,s,a){if(n.currentTransactionOldBlockAttrs={},n.updatedBlocks.clear(),!r.docChanged||s.doc.eq(a.doc))return n;const i={},l=F8(s.doc,u=>u.attrs.id),c=new Map(l.map(u=>[u.node.attrs.id,u])),d=F8(a.doc,u=>u.attrs.id);for(const u of d){const h=c.get(u.node.attrs.id),f=h==null?void 0:h.node.firstChild,m=u.node.firstChild;if(h&&f&&m){const p={index:m.attrs.index,level:m.attrs.level,type:m.type.name,depth:a.doc.resolve(u.pos).depth};let g={index:f.attrs.index,level:f.attrs.level,type:f.type.name,depth:s.doc.resolve(h.pos).depth};i[u.node.attrs.id]=g,r.getMeta("numberedListIndexing")&&(u.node.attrs.id in n.prevTransactionOldBlockAttrs&&(g=n.prevTransactionOldBlockAttrs[u.node.attrs.id]),p.type==="numberedListItem"&&(g.index=p.index)),n.currentTransactionOldBlockAttrs[u.node.attrs.id]=g,JSON.stringify(g)!==JSON.stringify(p)&&(g["depth-change"]=g.depth-p.depth,n.updatedBlocks.add(u.node.attrs.id))}}return n.prevTransactionOldBlockAttrs=i,n}},props:{decorations(r){const n=this.getState(r);if(n.updatedBlocks.size===0)return;const s=[];return r.doc.descendants((a,i)=>{if(!a.attrs.id||!n.updatedBlocks.has(a.attrs.id))return;const l=n.currentTransactionOldBlockAttrs[a.attrs.id],c={};for(const[u,h]of Object.entries(l))c["data-prev-"+TAe[u]]=h||"none";const d=kr.node(i,i+a.nodeSize,{...c});s.push(d)}),Ht.create(r.doc,s)}}}))}}const aI=new Qt("blocknote-show-selection");class AAe extends Yn{constructor(e){super(),de(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new Dt({key:aI,props:{decorations:r=>{const{doc:n,selection:s}=r;if(!this.enabled)return Ht.empty;const a=kr.inline(s.from,s.to,{"data-show-selection":"true"});return Ht.create(n,[a])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(r=>r.setMeta(aI,{})))}getEnabled(){return this.enabled}}function vq(t,e){for(var r,n;t&&t.parentElement&&t.parentElement!==e.dom&&((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}let A4=class Cv extends gt{constructor(e,r){super(e,r),de(this,"nodes");const n=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,r.pos,(s,a,i)=>{if(i!==null&&i.eq(n))return this.nodes.push(s),!1})}static create(e,r,n=r){return new Cv(e.resolve(r),e.resolve(n))}content(){return new $e(Ne.from(this.nodes),0,0)}eq(e){if(!(e instanceof Cv)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let r=0;r<this.nodes.length;r++)if(!this.nodes[r].eq(e.nodes[r]))return!1;return!0}map(e,r){const n=r.mapResult(this.from),s=r.mapResult(this.to);return s.deleted?gt.near(e.resolve(n.pos)):n.deleted?gt.near(e.resolve(s.pos)):new Cv(e.resolve(n.pos),e.resolve(s.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};gt.jsonID("multiple-node",A4);let Wi;function MAe(t,e){let r,n;const s=e.resolve(t.from).node().type.spec.group==="blockContent",a=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(s&&a){const l=t.$from.start(i-1),c=t.$to.end(i-1);r=e.resolve(l-1).pos,n=e.resolve(c+1).pos}else r=t.from,n=t.to;return{from:r,to:n}}function iI(t,e,r=e){e===r&&(r+=t.state.doc.resolve(e+1).node().nodeSize);const n=t.domAtPos(e).node.cloneNode(!0),s=t.domAtPos(e).node,a=(u,h)=>Array.prototype.indexOf.call(u.children,h),i=a(s,t.domAtPos(e+1).node.parentElement),l=a(s,t.domAtPos(r-1).node.parentElement);for(let u=s.childElementCount-1;u>=0;u--)(u>l||u<i)&&n.removeChild(n.children[u]);bq(t.root),Wi=n;const c=Wi.getElementsByTagName("iframe");for(let u=0;u<c.length;u++){const h=c[u],f=h.parentElement;f&&f.removeChild(h)}const d=t.dom.className.split(" ").filter(u=>u!=="ProseMirror"&&u!=="bn-root"&&u!=="bn-editor").join(" ");Wi.className=Wi.className+" bn-drag-preview "+d,t.root instanceof ShadowRoot?t.root.appendChild(Wi):t.root.body.appendChild(Wi)}function bq(t){Wi!==void 0&&(t instanceof ShadowRoot?t.removeChild(Wi):t.body.removeChild(Wi),Wi=void 0)}function OAe(t,e,r){if(!t.dataTransfer)return;const n=r.prosemirrorView;if(!n)return;const s=Xa(e.id,n.state.doc);if(!s)throw new Error(`Block with ID ${e.id} not found`);const a=s.posBeforeNode;if(a!=null){const i=n.state.selection,l=n.state.doc,{from:c,to:d}=MAe(i,l),u=c<=a&&a<d,h=i.$anchor.node()!==i.$head.node()||i instanceof A4;u&&h?(n.dispatch(n.state.tr.setSelection(A4.create(l,c,d))),iI(n,c,d)):(n.dispatch(n.state.tr.setSelection(it.create(n.state.doc,a))),iI(n,a));const f=n.state.selection.content(),m=r.pmSchema,p=n.serializeForClipboard(f).dom.innerHTML,g=C2(m,r),y=uq(f.content),b=g.exportBlocks(y,{}),v=b_(b);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",p),t.dataTransfer.setData("text/html",b),t.dataTransfer.setData("text/plain",v),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(Wi,0,0)}}const oI=250;function M4(t,e,r=!0){const n=t.root.elementsFromPoint(e.left,e.top);for(const s of n)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?M4(t,{left:e.left+50,top:e.top},!1):vq(s,t)}function RAe(t,e){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),n={left:Math.min(Math.max(r.left+10,t.x),r.right-10),top:t.y},s=M4(e,n);if(!s)return;const a=s.node.getBoundingClientRect();return M4(e,{left:a.right-10,top:t.y},!1)}class PAe{constructor(e,r,n){de(this,"state"),de(this,"emitUpdate"),de(this,"mousePos"),de(this,"hoveredBlock"),de(this,"menuFrozen",!1),de(this,"isDragOrigin",!1),de(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),de(this,"updateStateFromMousePos",()=>{var s,a,i,l,c;if(this.menuFrozen||!this.mousePos)return;const d=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if((d==null?void 0:d.element)!==this.pmView.dom||d.distance>oI){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}const u=RAe(this.mousePos,this.pmView);if(!u||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.updateState(this.state));return}if(!((i=this.state)!=null&&i.show&&(l=this.hoveredBlock)!=null&&l.hasAttribute("data-id")&&((c=this.hoveredBlock)==null?void 0:c.getAttribute("data-id"))===u.id)&&(this.hoveredBlock=u.node,this.editor.isEditable)){const h=u.node.getBoundingClientRect(),f=u.node.closest("[data-node-type=column]");this.state={show:!0,referencePos:new DOMRect(f?f.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,h.y,h.width,h.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))},this.updateState(this.state)}}),de(this,"onDragStart",s=>{var a;const i=(a=s.dataTransfer)==null?void 0:a.getData("blocknote/html");if(!i||this.pmView.dragging)return;const l=document.createElement("div");l.innerHTML=i;const c=Wo.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new $e(c.content,0,0),move:!0}}),de(this,"findClosestEditorElement",s=>{const a=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(a.length===0)return null;let i=a[0],l=Number.MAX_VALUE;return a.forEach(c=>{const d=c.querySelector(".bn-block-group").getBoundingClientRect(),u=s.clientX<d.left?d.left-s.clientX:s.clientX>d.right?s.clientX-d.right:0,h=s.clientY<d.top?d.top-s.clientY:s.clientY>d.bottom?s.clientY-d.bottom:0,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));f<l&&(l=f,i=c)}),{element:i,distance:l}}),de(this,"onDragOver",s=>{if(s.synthetic)return;const a=this.getDragEventContext(s);if(!a||!a.isDropPoint){this.closeDropCursor();return}a.isDropPoint&&!a.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(s)}),de(this,"closeDropCursor",()=>{const s=new Event("dragleave",{bubbles:!1});s.synthetic=!0,this.pmView.dom.dispatchEvent(s)}),de(this,"getDragEventContext",s=>{var a;const i=!((a=s.dataTransfer)!=null&&a.types.includes("blocknote/html"))&&!!this.pmView.dragging,l=!!this.isDragOrigin,c=i||l,d=this.findClosestEditorElement(s);if(!d||d.distance>oI)return;const u=d.element===this.pmView.dom,h=u&&d.distance===0;if(!(!u&&!c))return{isDropPoint:u,isDropWithinEditorBounds:h,isDragOrigin:c}}),de(this,"onDrop",s=>{if(s.synthetic)return;const a=this.getDragEventContext(s);if(!a){this.closeDropCursor();return}const{isDropPoint:i,isDropWithinEditorBounds:l,isDragOrigin:c}=a;if(!l&&i&&this.dispatchSyntheticEvent(s),i){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(Je.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(c){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),de(this,"onDragEnd",s=>{s.synthetic||(this.pmView.dragging=null)}),de(this,"onKeyDown",s=>{var a;(a=this.state)!=null&&a.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),de(this,"onMouseMove",s=>{var a;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const i=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>i.left&&this.mousePos.x<i.right&&this.mousePos.y>i.top&&this.mousePos.y<i.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),de(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=e,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");n(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),j2(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(e){const r=new Event(e.type,e),n=this.pmView.dom.firstChild.getBoundingClientRect();r.clientX=e.clientX,r.clientY=e.clientY,r.clientX=Math.min(Math.max(e.clientX,n.left),n.left+n.width),r.clientY=Math.min(Math.max(e.clientY,n.top),n.top+n.height),r.dataTransfer=e.dataTransfer,r.preventDefault=()=>e.preventDefault(),r.synthetic=!0,this.pmView.dom.dispatchEvent(r)}update(e,r){var n;!r.doc.eq(this.pmView.state.doc)&&(n=this.state)!=null&&n.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const IAe=new Qt("SideMenuPlugin");class DAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"blockDragStart",(r,n)=>{this.view&&(this.view.isDragOrigin=!0),OAe(r,n,this.editor)}),de(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&bq(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),de(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),de(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new Dt({key:IAe,view:r=>(this.view=new PAe(e,r,n=>{this.emit("update",n)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const _1=new Map;function LAe(t){if(_1.has(t))return _1.get(t);const e=new Gm;return t._tiptapEditor.on("transaction",({transaction:r})=>{e.appendMapping(r.mapping)}),t._tiptapEditor.on("destroy",()=>{_1.delete(t)}),_1.set(t,e),e}function $Ae(t,e,r="left"){const n=cr.getState(t._tiptapEditor.state);if(!n){const a=LAe(t),i=a.maps.length;return()=>a.slice(i).map(e,r==="left"?-1:1)}const s=yx(e+(r==="right"?1:0),n.binding.type,n.binding.mapping);return()=>{const a=cr.getState(t._tiptapEditor.state),i=sh(a.doc,a.binding.type,s,a.binding.mapping);if(i===null)throw new Error("Position not found, cannot track positions");return i+(r==="right"?-1:0)}}const FAe=c2(t=>t.type.name==="blockContainer");class BAe{constructor(e,r){de(this,"state"),de(this,"emitUpdate"),de(this,"rootEl"),de(this,"pluginState"),de(this,"handleScroll",()=>{var a,i;if((a=this.state)!=null&&a.show){const l=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!l)return;this.state.referencePos=l.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),de(this,"closeMenu",()=>{this.editor.transact(a=>a.setMeta(um,null))}),de(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(a=>a.selection.from)}).run()});var n,s;this.editor=e,this.pluginState=void 0,this.emitUpdate=a=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");r(a,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(n=this.editor.prosemirrorView)==null?void 0:n.root,(s=this.rootEl)==null||s.addEventListener("scroll",this.handleScroll,!0)}update(e,r){var n;const s=um.getState(r),a=um.getState(e.state),i=s===void 0&&a!==void 0,l=s!==void 0&&a===void 0;if(!i&&!(s!==void 0&&a!==void 0)&&!l)return;if(this.pluginState=l?s:a,l||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const c=(n=this.rootEl)==null?void 0:n.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&c&&(this.state={show:!0,referencePos:c.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const um=new Qt("SuggestionMenuPlugin");class zAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"triggerCharacters",[]),de(this,"addTriggerCharacter",n=>{this.triggerCharacters.push(n)}),de(this,"removeTriggerCharacter",n=>{this.triggerCharacters=this.triggerCharacters.filter(s=>s!==n)}),de(this,"closeMenu",()=>this.view.closeMenu()),de(this,"clearQuery",()=>this.view.clearQuery());const r=this.triggerCharacters;this.addProsemirrorPlugin(new Dt({key:um,view:()=>(this.view=new BAe(e,(n,s)=>{this.emit(`update ${n}`,s)}),this.view),state:{init(){},apply:(n,s,a,i)=>{if(n.getMeta("orderedListIndexing")!==void 0||n.selection.$from.parent.type.spec.code)return s;const l=n.getMeta(um);if(typeof l=="object"&&l!==null){s&&this.closeMenu();const d=$Ae(e,i.selection.from-l.triggerCharacter.length);return{triggerCharacter:l.triggerCharacter,deleteTriggerCharacter:l.deleteTriggerCharacter!==!1,queryStartPos:()=>d()+l.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:l==null?void 0:l.ignoreQueryLength}}if(s===void 0)return s;if(i.selection.from!==i.selection.to||l===null||n.getMeta("focus")||n.getMeta("blur")||n.getMeta("pointer")||s.triggerCharacter!==void 0&&i.selection.from<s.queryStartPos()||!i.selection.$from.sameParent(i.doc.resolve(s.queryStartPos())))return;const c={...s};return c.query=i.doc.textBetween(s.queryStartPos(),i.selection.from),c}},props:{handleTextInput(n,s,a,i){if(s===a){const l=n.state.doc;for(const c of r){const d=c.length>1?l.textBetween(s-c.length,s)+i:i;if(c===d)return n.dispatch(n.state.tr.insertText(i)),n.dispatch(n.state.tr.setMeta(um,{triggerCharacter:d}).scrollIntoView()),!0}}return!1},decorations(n){const s=this.getState(n);if(s===void 0)return null;if(!s.deleteTriggerCharacter){const a=FAe(n.selection);if(a)return Ht.create(n.doc,[kr.node(a.pos,a.pos+a.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":s.decorationId})])}return Ht.create(n.doc,[kr.inline(s.queryStartPos()-s.triggerCharacter.length,s.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":s.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,r){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,r)}get shown(){var e,r;return((r=(e=this.view)==null?void 0:e.state)==null?void 0:r.show)||!1}}const UAe=ms.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,r){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(r),...!r&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),VAe=ms.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,r){return["del",{"data-id":String(e.attrs.id),"data-inline":String(r),...!r&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),HAe=ms.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,r){return[r?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let aa;function lI(t){aa||(aa=document.createElement("div"),aa.innerHTML="_",aa.style.opacity="0",aa.style.height="1px",aa.style.width="1px",t instanceof Document?t.body.appendChild(aa):t.appendChild(aa))}function WAe(t){aa&&(t instanceof Document?t.body.removeChild(aa):t.removeChild(aa),aa=void 0)}function A1(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function qAe(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const r=e.parentNode;if(!r||!(r instanceof Element))return;e=r}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function GAe(t,e){const r=e.querySelectorAll(t);for(let n=0;n<r.length;n++)r[n].style.visibility="hidden"}class KAe{constructor(e,r,n){de(this,"state"),de(this,"emitUpdate"),de(this,"tableId"),de(this,"tablePos"),de(this,"tableElement"),de(this,"menuFrozen",!1),de(this,"mouseState","up"),de(this,"prevWasEditable",null),de(this,"viewMousedownHandler",()=>{this.mouseState="down"}),de(this,"mouseUpHandler",s=>{this.mouseState="up",this.mouseMoveHandler(s)}),de(this,"mouseMoveHandler",s=>{var a,i,l,c,d,u,h;if(this.menuFrozen||this.mouseState==="selecting"||!(s.target instanceof Element)||!this.pmView.dom.contains(s.target))return;const f=qAe(s.target);if((f==null?void 0:f.type)==="cell"&&this.mouseState==="down"&&!((a=this.state)!=null&&a.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!f||!this.editor.isEditable){(l=this.state)!=null&&l.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!f.tbodyNode)return;const m=f.tbodyNode.getBoundingClientRect(),p=vq(f.domNode,this.pmView);if(!p)return;this.tableElement=p.node;let g;const y=this.editor.transact(w=>Xa(p.id,w.doc));if(!y)throw new Error(`Block with ID ${p.id} not found`);const b=Yr(y.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(t_e("table",b,this.editor)&&(this.tablePos=y.posBeforeNode+1,g=b),!g)return;this.tableId=p.id;const v=(c=f.domNode.closest(".tableWrapper"))==null?void 0:c.querySelector(".table-widgets-container");if((f==null?void 0:f.type)==="wrapper"){const w=s.clientY>=m.bottom-1&&s.clientY<m.bottom+20,k=s.clientX>=m.right-1&&s.clientX<m.right+20,N=s.clientX>m.right||s.clientY>m.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:w,showAddOrRemoveColumnsButton:k,referencePosTable:m,block:g,widgetContainer:v,colIndex:N||(d=this.state)==null?void 0:d.colIndex,rowIndex:N||(u=this.state)==null?void 0:u.rowIndex,referencePosCell:N||(h=this.state)==null?void 0:h.referencePosCell}}else{const w=A1(f.domNode),k=A1(f.domNode.parentElement),N=f.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===p.id&&this.state.rowIndex===k&&this.state.colIndex===w)return;this.state={show:!0,showAddOrRemoveColumnsButton:w===g.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:k===g.content.rows.length-1,referencePosTable:m,block:g,draggingState:void 0,referencePosCell:N,colIndex:w,rowIndex:k,widgetContainer:v}}return this.emitUpdate(),!1}),de(this,"dragOverHandler",s=>{var a;if(((a=this.state)==null?void 0:a.draggingState)===void 0)return;s.preventDefault(),s.dataTransfer.dropEffect="move",GAe(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(s.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(s.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},l=this.pmView.root.elementsFromPoint(i.left,i.top).filter(g=>g.tagName==="TD"||g.tagName==="TH");if(l.length===0)return;const c=l[0];let d=!1;const u=A1(c.parentElement),h=A1(c),f=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,m=(this.state.draggingState.draggedCellOrientation==="row"?u:h)!==f;(this.state.rowIndex!==u||this.state.colIndex!==h)&&(this.state.rowIndex=u,this.state.colIndex=h,this.state.referencePosCell=c.getBoundingClientRect(),d=!0);const p=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==p&&(this.state.draggingState.mousePos=p,d=!0),d&&this.emitUpdate(),m&&this.editor.transact(g=>g.setMeta(I0,!0))}),de(this,"dropHandler",s=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");s.preventDefault();const{draggingState:a,colIndex:i,rowIndex:l}=this.state,c=this.state.block.content.columnWidths;if(a.draggedCellOrientation==="row"){if(!_W(this.state.block,a.originalIndex,l))return!1;const d=_Te(this.state.block,a.originalIndex,l);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:d}})}else{if(!AW(this.state.block,a.originalIndex,i))return!1;const d=TTe(this.state.block,a.originalIndex,i),[u]=c.splice(a.originalIndex,1);c.splice(i,0,u),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:c,rows:d}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");n(this.state)},r.dom.addEventListener("mousemove",this.mouseMoveHandler),r.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),r.root.addEventListener("dragover",this.dragOverHandler),r.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:r,width:n}=u_(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=r&&(this.state.rowIndex=r-1),this.state.colIndex>=n&&(this.state.colIndex=n-1));const s=this.tableElement.querySelector("tbody");if(!s)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const a=s.children[this.state.rowIndex].children[this.state.colIndex];a?this.state.referencePosCell=a.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=s.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const I0=new Qt("TableHandlesPlugin");class ZAe extends Yn{constructor(e){super(),de(this,"view"),de(this,"colDragStart",r=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:r.clientX},this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(I0,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");lI(this.editor.prosemirrorView.root),r.dataTransfer.setDragImage(aa,0,0),r.dataTransfer.effectAllowed="move"}),de(this,"rowDragStart",r=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:r.clientY},this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(I0,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");lI(this.editor.prosemirrorView.root),r.dataTransfer.setDragImage(aa,0,0),r.dataTransfer.effectAllowed="copyMove"}),de(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(I0,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");WAe(this.editor.prosemirrorView.root)}),de(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),de(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),de(this,"getCellsAtRowHandle",(r,n)=>w4(r,n)),de(this,"getCellsAtColumnHandle",(r,n)=>k4(r,n)),de(this,"setCellSelection",(r,n,s=n)=>{const a=this.view;if(!a)throw new Error("Table handles view not initialized");const i=r.doc.resolve(a.tablePos+1),l=r.doc.resolve(i.posAtIndex(n.row)+1),c=r.doc.resolve(l.posAtIndex(n.col)),d=r.doc.resolve(i.posAtIndex(s.row)+1),u=r.doc.resolve(d.posAtIndex(s.col)),h=r.tr;return h.setSelection(new Cr(c,u)),r.apply(h)}),de(this,"addRowOrColumn",(r,n)=>{this.editor.exec((s,a)=>{const i=this.setCellSelection(s,n.orientation==="row"?{row:r,col:0}:{row:0,col:r});return n.orientation==="row"?n.side==="above"?JNe(i,a):QNe(i,a):n.side==="left"?GNe(i,a):KNe(i,a)})}),de(this,"removeRowOrColumn",(r,n)=>n==="row"?this.editor.exec((s,a)=>{const i=this.setCellSelection(s,{row:r,col:0});return tSe(i,a)}):this.editor.exec((s,a)=>{const i=this.setCellSelection(s,{row:0,col:r});return YNe(i,a)})),de(this,"mergeCells",r=>this.editor.exec((n,s)=>{const a=r?this.setCellSelection(n,r.relativeStartCell,r.relativeEndCell):n;return nSe(a,s)})),de(this,"splitCell",r=>this.editor.exec((n,s)=>{const a=r?this.setCellSelection(n,r):n;return sSe(a,s)})),de(this,"getCellSelection",()=>this.editor.transact(r=>{const n=r.selection;let s=n.$from,a=n.$to;if(E4(n)){const{ranges:p}=n;p.forEach(g=>{s=g.$from.min(s??g.$from),a=g.$to.max(a??g.$to)})}else if(s=r.doc.resolve(n.$from.pos-n.$from.parentOffset-1),a=r.doc.resolve(n.$to.pos-n.$to.parentOffset-1),s.pos===0||a.pos===0)return;const i=r.doc.resolve(s.pos-s.parentOffset-1),l=r.doc.resolve(a.pos-a.parentOffset-1),c=r.doc.resolve(i.pos-i.parentOffset-1),d=s.index(i.depth),u=i.index(c.depth),h=a.index(l.depth),f=l.index(c.depth),m=[];for(let p=u;p<=f;p++)for(let g=d;g<=h;g++)m.push({row:p,col:g});return{from:{row:u,col:d},to:{row:f,col:h},cells:m}})),de(this,"getMergeDirection",r=>this.editor.transact(n=>{const s=E4(n.selection)?n.selection:void 0;if(!s||!r||s.ranges.length<=1)return;const a=this.getCellSelection();if(a)return OTe(a.from,a.to,r)?"vertical":"horizontal"})),de(this,"cropEmptyRowsOrColumns",(r,n)=>ATe(r,n)),de(this,"addRowsOrColumns",(r,n,s)=>MTe(r,n,s)),this.editor=e,this.addProsemirrorPlugin(new Dt({key:I0,view:r=>(this.view=new KAe(e,r,n=>{this.emit("update",n)}),this.view),props:{decorations:r=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const n=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(n===void 0)return;const s=[],{block:a,draggingState:i}=this.view.state,{originalIndex:l,draggedCellOrientation:c}=i;if(n===l||!a||c==="row"&&!_W(a,l,n)||c==="col"&&!AW(a,l,n))return Ht.create(r.doc,s);const d=r.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?w4(this.view.state.block,n).forEach(({row:u,col:h})=>{const f=r.doc.resolve(d.posAtIndex(u)+1),m=r.doc.resolve(f.posAtIndex(h)+1),p=m.node(),g=m.pos+(n>l?p.nodeSize-2:0);s.push(kr.widget(g,()=>{const y=document.createElement("div");return y.className="bn-table-drop-cursor",y.style.left="0",y.style.right="0",n>l?y.style.bottom="-2px":y.style.top="-3px",y.style.height="4px",y}))}):k4(this.view.state.block,n).forEach(({row:u,col:h})=>{const f=r.doc.resolve(d.posAtIndex(u)+1),m=r.doc.resolve(f.posAtIndex(h)+1),p=m.node(),g=m.pos+(n>l?p.nodeSize-2:0);s.push(kr.widget(g,()=>{const y=document.createElement("div");return y.className="bn-table-drop-cursor",y.style.top="0",y.style.bottom="0",n>l?y.style.right="-2px":y.style.left="-3px",y.style.width="4px",y}))}),Ht.create(r.doc,s)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const YAe=Tr.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),XAe=Tr.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:pn.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):pn.textColor.default,renderHTML:t=>t.textColor===pn.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),JAe=Tr.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Qt(this.name);return[new Dt({key:t,appendTransaction:(e,r,n)=>{const{doc:s,tr:a,schema:i}=n,l=t.getState(n),c=s.content.size-2,d=i.nodes.blockContainer,u=i.nodes.paragraph;if(l)return a.insert(c,d.create(void 0,u.create()))},state:{init:(e,r)=>{},apply:(e,r)=>{if(!e.docChanged)return r;let n=e.doc.lastChild;if(!n||n.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(n=n.lastChild,!n||n.type.name!=="blockContainer")return!0;const s=n.firstChild;if(!s)throw new Error("Expected blockContent");return n.nodeSize>4||s.type.spec.content!=="inline*"}}})]}}),QAe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},e6e=al.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[r,n]of Object.entries(QAe))t.getAttribute(n)&&(e[r]=t.getAttribute(n));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const r=document.createElement("div");r.className="bn-block-outer",r.setAttribute("data-node-type","blockOuter");for(const[a,i]of Object.entries(t))a!=="class"&&r.setAttribute(a,i);const n={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},s=document.createElement("div");s.className=Dr("bn-block",n.class),s.setAttribute("data-node-type",this.name);for(const[a,i]of Object.entries(n))a!=="class"&&s.setAttribute(a,i);return r.appendChild(s),{dom:r,contentDOM:s}}}),t6e=al.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const r={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},n=document.createElement("div");n.className=Dr("bn-block-group",r.class),n.setAttribute("data-node-type","blockGroup");for(const[s,a]of Object.entries(r))s!=="class"&&n.setAttribute(s,a);return{dom:n,contentDOM:n}}}),r6e=al.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class n6e extends Yn{constructor({editor:e,collaboration:r}){super(e),de(this,"editor"),de(this,"collaboration"),de(this,"forkedState"),this.editor=e,this.collaboration=r}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,r){const n=e.doc;if(e._item===null){const s=Array.from(n.share.keys()).find(a=>n.share.get(a)===e);if(s==null)throw new Error("type does not exist in other ydoc");return r.get(s,e.constructor)}else{const s=e._item,a=r.store.clients.get(s.id.client)??[],i=Oi(a,s.id.clock);return a[i].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){var e;if(this.isForkedFromRemote)return;const r=(e=this.collaboration)==null?void 0:e.fragment;if(!r)throw new Error("No fragment to fork from");const n=new nu;bP(n,wP(r.doc));const s=this.findTypeInOtherYdoc(r,n);this.forkedState={undoStack:wi.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:r,forkedFragment:s},this.editor._tiptapEditor.unregisterPlugin([R0,wi,cr]),this.editor._tiptapEditor.registerPlugin(new T4(s).plugins[0]),this.editor._tiptapEditor.registerPlugin(new _4({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(cr),this.editor._tiptapEditor.unregisterPlugin(wi);const{originalFragment:r,forkedFragment:n,undoStack:s}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new T4(r),this.editor.extensions.yCursorPlugin=new mq(this.collaboration),this.editor.extensions.yUndoPlugin=new _4({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),wi.getState(this.editor.prosemirrorState).undoManager.undoStack=s,e){const a=wP(n.doc,k4e(r.doc));bP(r.doc,a,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const s6e=t=>{var e;const r={},n=a6e(t);for(const a of n)r[a.name]=a;t.collaboration&&(r.ySyncPlugin=new T4(t.collaboration.fragment),r.yUndoPlugin=new _4({editor:t.editor}),(e=t.collaboration.provider)!=null&&e.awareness&&(r.yCursorPlugin=new mq(t.collaboration)),r.forkYDocPlugin=new n6e({editor:t.editor,collaboration:t.collaboration})),r.formattingToolbar=new gAe(t.editor),r.linkToolbar=new CAe(t.editor),r.sideMenu=new DAe(t.editor),r.suggestionMenus=new zAe(t.editor),r.filePanel=new fAe(t.editor),r.placeholder=new jAe(t.editor,t.placeholders),(t.animations??!0)&&(r.animations=new _Ae),t.tableHandles&&(r.tableHandles=new ZAe(t.editor)),r.nodeSelectionKeyboard=new SAe,r.blockChange=new oAe,r.showSelection=new AAe(t.editor),t.comments&&(r.comments=new uAe(t.editor,t.comments.threadStore,pq.name));const s=t.disableExtensions||[];for(const a of s)delete r[a];return r};let cI=!1;const a6e=t=>{const e=[g0.ClipboardTextSerializer,g0.Commands,g0.Editable,g0.FocusEvents,g0.Tabindex,aEe,Tr.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),y2.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),xAe,zEe,UAe,VAe,HAe,BEe.extend({inclusive:!1}).configure({defaultProtocol:yq,protocols:cI?[]:xq}),...Object.values(t.styleSpecs).map(r=>r.implementation.mark.configure({editor:t.editor})),XAe,iAe,YAe,Tr.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),r6e,e6e.configure({editor:t.editor,domAttributes:t.domAttributes}),bAe.configure({editor:t.editor,tabBehavior:t.tabBehavior}),t6e.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(r=>r.config!=="link"&&r.config!=="text").map(r=>r.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(r=>[...(r.implementation.requiredExtensions||[]).map(n=>n.configure({editor:t.editor,domAttributes:t.domAttributes})),r.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),aAe(t.editor),nAe(t.editor,t.pasteHandler||(r=>r.defaultPasteHandler())),B_e(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[JAe]:[],...t.comments?[pq]:[]];return cI=!0,t.collaboration||e.push(pEe),e};function i6e(t,e){const r=[];return t.forEach((n,s,a)=>{a!==e&&r.push(n)}),Ne.from(r)}function o6e(t,e){const r=[];for(let n=0;n<t.childCount;n++)if(t.child(n).type.name==="tableRow")if(r.length>0&&r[r.length-1].type.name==="table"){const s=r[r.length-1],a=s.copy(s.content.addToEnd(t.child(n)));r[r.length-1]=a}else{const s=e.nodes.table.createChecked(void 0,t.child(n));r.push(s)}else r.push(t.child(n));return t=Ne.from(r),t}function l6e(t,e){let r=Ne.from(t.content);if(r=o6e(r,e.state.schema),!c6e(r,e))return new $e(r,t.openStart,t.openEnd);for(let n=0;n<r.childCount;n++)if(r.child(n).type.spec.group==="blockContent"){const s=[r.child(n)];if(n+1<r.childCount&&r.child(n+1).type.name==="blockGroup"){const i=r.child(n+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(s.push(r.child(n+1)),r=i6e(r,n+1))}const a=e.state.schema.nodes.blockContainer.createChecked(void 0,s);r=r.replaceChild(n,a)}return new $e(r,t.openStart,t.openEnd)}function c6e(t,e){var r,n;const s=t.childCount===1,a=((r=t.firstChild)==null?void 0:r.type.spec.content)==="inline*",i=((n=t.firstChild)==null?void 0:n.type.spec.content)==="tableRow+";if(s){if(a)return!1;if(i){const l=zr(e.state);if(l.isBlockContainer)return l.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const O4=class extends NNe{constructor(e,r){super({...e,content:void 0}),de(this,"_state"),de(this,"mount",(l,c,d)=>{c?(this.options.element=c,this.createViewAlternative(l,d)):(this.destroy(),this.isInitialized=!1)});const n=this.schema;let s;const a=n.nodes.doc.createAndFill;n.nodes.doc.createAndFill=(...l)=>{if(s)return s;const c=a.apply(n.nodes.doc,l),d=JSON.parse(JSON.stringify(c.toJSON()));return d.content[0].content[0].attrs.id="initialBlockId",s=Wl.fromJSON(n,d),s};let i;try{const l=e==null?void 0:e.content.map(c=>Vh(c,this.schema,r).toJSON());i=Gb({type:"doc",content:[{type:"blockGroup",content:l}]},this.schema,this.options.parseOptions)}catch(l){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",l),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=Mu.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:r,transactions:n}=this.state.applyTransaction(e),s=!this.state.selection.eq(r.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:r}),this.view.updateState(r),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=e.getMeta("focus"),i=e.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:n.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,r){this.contentComponent=r;const n={};this.extensionManager.extensions.forEach(a=>{a.type==="mark"&&a.config.addMarkView&&(n[a.name]=a.config.addMarkView(e))}),this.view=new u3({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:n,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};de(O4,"create",(t,e)=>{var r,n;const s=(r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout;typeof((n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new O4(t,e)}finally{s&&(globalThis.window.setTimeout=s)}});let wq=O4;wq.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const d6e={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let u6e=class kq extends k_{constructor(e){var r,n,s,a,i,l,c,d,u,h,f,m,p,g,y,b;super(),de(this,"pmSchema"),de(this,"extensions",{}),de(this,"headless",!1),de(this,"_tiptapEditor"),de(this,"elementRenderer",null),de(this,"blockCache",new WeakMap),de(this,"dictionary"),de(this,"schema"),de(this,"blockImplementations"),de(this,"inlineContentImplementations"),de(this,"styleImplementations"),de(this,"formattingToolbar"),de(this,"linkToolbar"),de(this,"sideMenu"),de(this,"suggestionMenus"),de(this,"filePanel"),de(this,"tableHandles"),de(this,"comments"),de(this,"showSelectionPlugin"),de(this,"forkYDocPlugin"),de(this,"uploadFile"),de(this,"onUploadStartCallbacks",[]),de(this,"onUploadEndCallbacks",[]),de(this,"resolveFileUrl"),de(this,"resolveUsers"),de(this,"settings"),de(this,"activeTransaction",null),de(this,"mount",(E,T)=>{this._tiptapEditor.mount(this,E,T)}),this.options=e;const v=e;if(v.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(v.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(v.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(v.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||xTe,this.settings={tables:{splitCells:((r=e==null?void 0:e.tables)==null?void 0:r.splitCells)??!1,cellBackgroundColor:((n=e==null?void 0:e.tables)==null?void 0:n.cellBackgroundColor)??!1,cellTextColor:((s=e==null?void 0:e.tables)==null?void 0:s.cellTextColor)??!1,headers:((a=e==null?void 0:e.tables)==null?void 0:a.headers)??!1},codeBlock:{indentLineWithTab:((i=e==null?void 0:e.codeBlock)==null?void 0:i.indentLineWithTab)??!0,defaultLanguage:((l=e==null?void 0:e.codeBlock)==null?void 0:l.defaultLanguage)??"text",supportedLanguages:((c=e==null?void 0:e.codeBlock)==null?void 0:c.supportedLanguages)??{},createHighlighter:((d=e==null?void 0:e.codeBlock)==null?void 0:d.createHighlighter)??void 0},heading:{levels:((u=e==null?void 0:e.heading)==null?void 0:u.levels)??[1,2,3]}};const w={defaultStyles:!0,schema:e.schema||v_.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(w.comments&&!w.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=w.resolveUsers,this.schema=w.schema,this.blockImplementations=w.schema.blockSpecs,this.inlineContentImplementations=w.schema.inlineContentSpecs,this.styleImplementations=w.schema.styleSpecs,this.extensions=s6e({editor:this,domAttributes:w.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:w.collaboration,trailingBlock:w.trailingBlock,disableExtensions:w.disableExtensions,setIdAttribute:w.setIdAttribute,animations:w.animations??!0,tableHandles:vs("table",this),dropCursor:this.options.dropCursor??pTe,placeholders:w.placeholders,tabBehavior:w.tabBehavior,comments:w.comments,pasteHandler:w.pasteHandler}),(((h=w._tiptapOptions)==null?void 0:h.extensions)||[]).forEach(E=>{this.extensions[E.name]=E});for(let E of w.extensions||[]){typeof E=="function"&&(E=E(this));const T=E.constructor.key();if(!T)throw new Error(`Extension ${E.constructor.name} does not have a key method`);if(this.extensions[T])throw new Error(`Extension ${E.constructor.name} already exists with key ${T}`);this.extensions[T]=E}if(Object.entries(w._extensions||{}).forEach(([E,T])=>{const R=typeof T=="function"?T(this):T;if(!("plugin"in R)){this.extensions[E]=R;return}this.extensions[E]=new class extends Yn{static key(){return E}constructor(){super(),this.addProsemirrorPlugin(R.plugin)}get priority(){return R.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,w.uploadFile){const E=w.uploadFile;this.uploadFile=async(T,R)=>{this.onUploadStartCallbacks.forEach(B=>B.apply(this,[R]));try{return await E(T,R)}finally{this.onUploadEndCallbacks.forEach(B=>B.apply(this,[R]))}}}this.resolveFileUrl=w.resolveFileUrl,this.headless=w._headless;const k="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;k&&w.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const N=w.initialContent||(k?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:y2.options.generateID()}]);if(!Array.isArray(N)||N.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+N);const S=[...Object.entries(this.extensions).map(([E,T])=>{if(T instanceof Tr||T instanceof al||T instanceof ms)return T;if(!(T instanceof Yn&&!T.plugins.length))return Tr.create({name:E,priority:T.priority,addProseMirrorPlugins:()=>T.plugins})})].filter(E=>E!==void 0),C={...d6e,...w._tiptapOptions,content:N,extensions:S,editorProps:{...(f=w._tiptapOptions)==null?void 0:f.editorProps,attributes:{tabIndex:"0",...(p=(m=w._tiptapOptions)==null?void 0:m.editorProps)==null?void 0:p.attributes,...(g=w.domAttributes)==null?void 0:g.editor,class:Dr("bn-editor",w.defaultStyles?"bn-default-styles":"",((b=(y=w.domAttributes)==null?void 0:y.editor)==null?void 0:b.class)||"")},transformPasted:l6e}};this.headless?this.pmSchema=YCe(C.extensions):(this._tiptapEditor=wq.create(C,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new kq(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const r=this._tiptapEditor.state,n=this._tiptapEditor.view;return e(r,s=>this._tiptapEditor.dispatch(s),n)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const r=this._tiptapEditor.state,n=this._tiptapEditor.view;return e(r,void 0,n)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const r=e(this.activeTransaction),n=this.activeTransaction;return this.activeTransaction=null,n&&(n.docChanged||n.selectionSet||n.scrolledIntoView||n.storedMarksSet||!n.isGeneric)&&this._tiptapEditor.dispatch(n),r}finally{this.activeTransaction=null}}extension(e,r=e.key()){const n=this.extensions[r];if(!n)throw new Error(`Extension ${r} not found`);return n}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const r=this.onUploadStartCallbacks.indexOf(e);r>-1&&this.onUploadStartCallbacks.splice(r,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const r=this.onUploadEndCallbacks.indexOf(e);r>-1&&this.onUploadEndCallbacks.splice(r,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>STe(e.doc,this.pmSchema))}getBlock(e){return this.transact(r=>v_e(r.doc,e))}getPrevBlock(e){return this.transact(r=>b_e(r.doc,e))}getNextBlock(e){return this.transact(r=>w_e(r.doc,e))}getParentBlock(e){return this.transact(r=>k_e(r.doc,e))}forEachBlock(e,r=!1){const n=this.document.slice();r&&n.reverse();function s(a){for(const i of a){if(e(i)===!1)return!1;const l=r?i.children.slice().reverse():i.children;if(!s(l))return!1}return!0}s(n)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>j_e(e))}setTextCursorPosition(e,r="start"){return this.transact(n=>iq(n,e,r))}getSelection(){return this.transact(e=>N_e(e))}getSelectionCutBlocks(){return this.transact(e=>E_e(e))}setSelection(e,r){return this.transact(n=>S_e(n,e,r))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,r,n="before"){return this.transact(s=>PTe(s,e,r,n))}updateBlock(e,r){return this.transact(n=>DTe(n,e,r))}removeBlocks(e){return this.transact(r=>VP(r,e,[]).removedBlocks)}replaceBlocks(e,r){return this.transact(n=>VP(n,e,r))}undo(){return this.options.collaboration?this.exec(dTe):this.exec(j3)}redo(){return this.options.collaboration?this.exec(uTe):this.exec(T3)}insertInlineContent(e,{updateSelection:r=!1}={}){const n=mo(e,this.pmSchema);this.transact(s=>{C_e(s,{from:s.selection.from,to:s.selection.to},n,{updateSelection:r})})}getActiveStyles(){return this.transact(e=>{const r={},n=e.selection.$to.marks();for(const s of n){const a=this.schema.styleSchema[s.type.name];if(!a){s.type.name!=="link"&&!s.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",s.type.name);continue}a.propSchema==="boolean"?r[a.type]=!0:r[a.type]=s.attrs.stringValue}return r})}addStyles(e){for(const[r,n]of Object.entries(e)){const s=this.schema.styleSchema[r];if(!s)throw new Error(`style ${r} not found in styleSchema`);if(s.propSchema==="boolean")this._tiptapEditor.commands.setMark(r);else if(s.propSchema==="string")this._tiptapEditor.commands.setMark(r,{stringValue:n});else throw new Xo(s.propSchema)}}removeStyles(e){for(const r of Object.keys(e))this._tiptapEditor.commands.unsetMark(r)}toggleStyles(e){for(const[r,n]of Object.entries(e)){const s=this.schema.styleSchema[r];if(!s)throw new Error(`style ${r} not found in styleSchema`);if(s.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(r);else if(s.propSchema==="string")this._tiptapEditor.commands.toggleMark(r,{stringValue:n});else throw new Xo(s.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,r){if(e==="")return;const n=this.pmSchema.mark("link",{href:e});this.transact(s=>{const{from:a,to:i}=s.selection;r?s.insertText(r,a,i).addMark(a,a+r.length,n):s.setSelection(Je.create(s.doc,i)).addMark(a,i,n)})}canNestBlock(){return x_e(this)}nestBlock(){aq(this)}canUnnestBlock(){return y_e(this)}unnestBlock(){g_e(this)}moveBlocksUp(){return f_e(this)}moveBlocksDown(){return m_e(this)}async blocksToHTMLLossy(e=this.document){return C2(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return VTe(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return lq(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return A_e(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return L_e(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onBeforeChange(e){return this.headless?()=>{}:this.extensions.blockChange.subscribe(r=>e(this,r))}onChange(e){if(this.headless)return;const r=({transaction:n,appendedTransactions:s})=>{e(this,{getChanges:()=>$W(n,s)})};return this._tiptapEditor.on("v3-update",r),()=>{this._tiptapEditor.off("v3-update",r)}}onSelectionChange(e,r){if(this.headless)return;const n=s=>{s.transaction.getMeta(cr)&&!r||e(this)};return this._tiptapEditor.on("selectionUpdate",n),()=>{this._tiptapEditor.off("selectionUpdate",n)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:r}=e,n=Math.min(...r.map(a=>a.$from.pos)),s=Math.max(...r.map(a=>a.$to.pos));if(Wj(e)){const a=this.prosemirrorView.nodeDOM(n);if(a)return a.getBoundingClientRect()}return Kb(this.prosemirrorView,n,s)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,r){this.prosemirrorView&&(this.focus(),this.transact(n=>{r!=null&&r.deleteTriggerCharacter&&n.insertText(e),n.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:(r==null?void 0:r.deleteTriggerCharacter)||!1,ignoreQueryLength:(r==null?void 0:r.ignoreQueryLength)||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return oq(e.trim()).innerHTML}pasteHTML(e,r=!1){var n;let s=e;r||(s=this.convertHtmlToBlockNoteHtml(e)),s&&((n=this.prosemirrorView)==null||n.pasteHTML(s))}pasteText(e){var r;return(r=this.prosemirrorView)==null?void 0:r.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await cq(e))}},nS;async function h6e(){return nS||(nS=(async()=>{const[t,e]=await Promise.all([Nt(()=>import("./module-BvCTiNll.js"),[]),Nt(()=>import("./native-B5Vb9Oiz.js"),[])]),r="default"in t?t.default:t,n="default"in e?e.default:e;return await r.init({data:n}),{emojiMart:r,emojiData:n}})(),nS)}async function f6e(t,e){if(!e_e("text",t))return[];const{emojiData:r,emojiMart:n}=await h6e();return(e.trim()===""?Object.values(r.emojis):await n.SearchIndex.search(e)).map(s=>({id:s.skins[0].native,onItemClick:()=>t.insertInlineContent(s.skins[0].native+" ")}))}var Cq={exports:{}},sS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function m6e(){if(dI)return sS;dI=1;var t=st;function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function l(h,f){var m=f(),p=n({inst:{value:m,getSnapshot:f}}),g=p[0].inst,y=p[1];return a(function(){g.value=m,g.getSnapshot=f,c(g)&&y({inst:g})},[h,m,f]),s(function(){return c(g)&&y({inst:g}),h(function(){c(g)&&y({inst:g})})},[h]),i(m),m}function c(h){var f=h.getSnapshot;h=h.value;try{var m=f();return!r(h,m)}catch{return!0}}function d(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return sS.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,sS}Cq.exports=m6e();var Nq=Cq.exports;const p6e=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},g6e=({contentComponent:t})=>{const e=Nq.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return st.createElement(st.Fragment,null,Object.values(e))};function x6e(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:p9.createPortal(n.reactElement,n.element,r)},t.forEach(s=>s())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(s=>s())}}}class y6e extends st.Component{constructor(e){var r;super(e),this.editorContentRef=st.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((r=e.editor)===null||r===void 0)&&r.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.options.element.childNodes),e.setOptions({element:r}),e.contentComponent=x6e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const r=document.createElement("div");r.append(...e.options.element.childNodes),e.setOptions({element:r})}render(){const{editor:e,innerRef:r,...n}=this.props;return st.createElement(st.Fragment,null,st.createElement("div",{ref:p6e(r,this.editorContentRef),...n}),(e==null?void 0:e.contentComponent)&&st.createElement(g6e,{contentComponent:e.contentComponent}))}}const v6e=x.forwardRef((t,e)=>{const r=st.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return st.createElement(y6e,{key:r,innerRef:e,...t})});st.memo(v6e);var aS={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI;function b6e(){if(uI)return aS;uI=1;var t=st,e=Nq;function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,l=t.useMemo,c=t.useDebugValue;return aS.useSyncExternalStoreWithSelector=function(d,u,h,f,m){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=l(function(){function b(S){if(!v){if(v=!0,w=S,S=f(S),m!==void 0&&g.hasValue){var C=g.value;if(m(C,S))return k=C}return k=S}if(C=k,n(w,S))return C;var E=f(S);return m!==void 0&&m(C,E)?C:(w=S,k=E)}var v=!1,w,k,N=h===void 0?null:h;return[function(){return b(u())},N===null?void 0:function(){return b(N())}]},[u,h,f,m]);var y=s(d,p[0],p[1]);return i(function(){g.hasValue=!0,g.value=y},[y]),c(y),y},aS}b6e();const w6e=x.createContext({editor:null});w6e.Consumer;const Sq=x.createContext({onDragStart:void 0}),Eq=()=>x.useContext(Sq),k6e=st.forwardRef((t,e)=>{const{onDragStart:r}=Eq(),n=t.as||"div";return st.createElement(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});function hI(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function fI(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function C6e(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function N6e(t){if(hI(t)||fI(t))return!0;if(C6e(t)){const e=t.type;if(e)return hI(e)||fI(e)}return!1}function S6e(){try{if(x.version)return parseInt(x.version.split(".")[0],10)>=19}catch{}return!1}class E6e{constructor(e,{editor:r,props:n={},as:s="div",className:a=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=r,this.props=n,this.element=document.createElement(s),this.element.classList.add("react-renderer"),a&&this.element.classList.add(...a.split(" ")),this.editor.isInitialized?Va.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const r=this.component,n=this.props,s=this.editor,a=S6e(),i=N6e(r),l={...n};l.ref&&!(a||i)&&delete l.ref,!l.ref&&(a||i)&&(l.ref=c=>{this.ref=c}),this.reactElement=st.createElement(r,{...l}),(e=s==null?void 0:s.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const r=this.editor;(e=r==null?void 0:r.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(r=>{this.element.setAttribute(r,e[r])})}}class j6e extends SNe{constructor(e,r,n){if(super(e,r,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const s=this.dom.querySelector("[data-node-view-content]");if(!s)return;s.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(d={})=>this.updateAttributes(d),deleteNode:()=>this.deleteNode(),ref:x.createRef()};if(!this.component.displayName){const d=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=d(this.extension.name)}const s={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:d=>{d&&this.contentDOMElement&&d.firstChild!==this.contentDOMElement&&(d.hasAttribute("data-node-view-wrapper")&&d.removeAttribute("data-node-view-wrapper"),d.appendChild(this.contentDOMElement))}},a=this.component,i=x.memo(d=>st.createElement(Sq.Provider,{value:s},x.createElement(a,d)));i.displayName="ReactNodeView";let l=this.node.isInline?"span":"div";this.options.as&&(l=this.options.as);const{className:c=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new E6e(i,{editor:this.editor,props:e,as:l,className:`node-${this.node.type.name} ${c}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:r}=this.editor.state.selection,n=this.getPos();if(typeof n=="number")if(e<=n&&r>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,r,n){const s=a=>{this.renderer.updateProps(a),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const a=this.node,i=this.decorations,l=this.innerDecorations;return this.node=e,this.decorations=r,this.innerDecorations=n,this.options.update({oldNode:a,oldDecorations:i,newNode:e,newDecorations:r,oldInnerDecorations:l,innerDecorations:n,updateProps:()=>s({node:e,decorations:r,innerDecorations:n})})}return e===this.node&&this.decorations===r&&this.innerDecorations===n||(this.node=e,this.decorations=r,this.innerDecorations=n,s({node:e,decorations:r,innerDecorations:n})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const r=this.editor.extensionManager.attributes,n=Wb(this.node,r);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function T6e(t,e){return r=>r.editor.contentComponent?new j6e(t,r,e):{}}const jq=x.createContext(void 0);function yo(t){return x.useContext(jq)}function xt(t){const e=yo();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function C_(t,e,r){const n=yo();e||(e=n==null?void 0:n.editor),x.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,r)},[t,e,r])}function _6e(t,e){const r=xt();e=e||r;const[n,s]=x.useState(()=>{if(t)return e.getSelectionBoundingBox()}),a=x.useCallback(()=>{if(!t)return;const i=e.getSelectionBoundingBox();s(i)},[e,t]);return C_(a,e,!0),x.useEffect(()=>{s(t?e.getSelectionBoundingBox():void 0)},[t,e]),n}function A6e(t){return t.getBoundingClientRect!==void 0}function au(t,e,r,n){const{refs:s,update:a,context:i,floatingStyles:l,isPositioned:c}=Np({open:t,...n}),{isMounted:d,styles:u}=XT(i),h=typeof(n==null?void 0:n.canDismiss)=="object"?n.canDismiss:{enabled:n==null?void 0:n.canDismiss},f=Hz(i,h),{getReferenceProps:m,getFloatingProps:p}=Wz([f]);return x.useEffect(()=>{a()},[e,a]),x.useEffect(()=>{e!==null&&(e instanceof HTMLElement||A6e(e)?s.setReference(e):s.setReference({getBoundingClientRect:()=>e}))},[e,s]),x.useMemo(()=>({isMounted:d,ref:s.setFloating,setReference:s.setReference,style:{display:"flex",...u,...l,zIndex:r},getFloatingProps:p,getReferenceProps:m,isPositioned:c}),[c,l,d,s.setFloating,s.setReference,u,r,p,m])}function pc(t){const[e,r]=x.useState();return x.useEffect(()=>t(n=>{r({...n})}),[t]),e}const Tq=x.createContext(void 0);function mt(){return x.useContext(Tq)}const T2=(t={},e=[])=>x.useMemo(()=>{const r=u6e.create(t);return window&&(window.ProseMirror=r._tiptapEditor),r},e);function jt(){return yo().editor.dictionary}function N_(t,e){const r=yo();e||(e=r==null?void 0:r.editor),x.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const S_=t=>{const[e,r]=x.useState(!1),[n,s]=x.useState(t.editor.isEmpty),a=mt();N_(()=>{s(t.editor.isEmpty)},t.editor);const i=x.useCallback(()=>{r(!0)},[]),l=x.useCallback(()=>{r(!1)},[]);return x.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),o.jsxs(o.Fragment,{children:[o.jsx(a.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:i,onBlur:l,editable:t.editable}),t.actions&&o.jsx("div",{className:"bn-comment-actions-wrapper",children:o.jsx(t.actions,{isFocused:e,isEmpty:n})})]})},M6e=cl(ri(x_.paragraph.implementation.node.config),{}),{textColor:OBe,backgroundColor:RBe,...O6e}=y_,E_=v_.create({blockSpecs:{paragraph:M6e},styleSpecs:O6e});function R6e(){const t=xt();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,r=mt(),n=jt(),s=T2({trailingBlock:!1,dictionary:{...n,placeholders:{emptyDocument:n.placeholders.new_comment}},schema:E_});return o.jsx(r.Comments.Card,{className:"bn-thread",children:o.jsx(S_,{autoFocus:!0,editable:!0,editor:s,actions:({isEmpty:a})=>o.jsx(r.Generic.Toolbar.Root,{className:Dr("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:o.jsx(r.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:a,onClick:async()=>{await e.createThread({initialComment:{body:s.document}}),e.stopPendingComment()},children:"Save"})})})})}const P6e=t=>{const e=xt();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const r=e.comments;x.useEffect(()=>{const u=r.onUpdate(h=>e.setForceSelectionVisible(h.pendingComment));return()=>u()},[r,e]);const n=pc(r.onUpdate.bind(r)),s=_6e(n==null?void 0:n.pendingComment),{isMounted:a,ref:i,style:l,getFloatingProps:c}=au((n==null?void 0:n.pendingComment)||!1,s||null,5e3,{placement:"bottom",middleware:[sl(10),Bh(),uo()],onOpenChange:u=>{u||(r.stopPendingComment(),e.focus())},...t.floatingOptions});if(!a||!n)return null;const d=t.floatingComposer||R6e;return o.jsx("div",{ref:i,style:l,...c(),children:o.jsx(d,{})})};var _q={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mI=st.createContext&&st.createContext(_q),I6e=["attr","size","title"];function D6e(t,e){if(t==null)return{};var r=L6e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function L6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Iw(){return Iw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iw.apply(this,arguments)}function pI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Dw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pI(Object(r),!0).forEach(function(n){$6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $6e(t,e,r){return e=F6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F6e(t){var e=B6e(t,"string");return typeof e=="symbol"?e:e+""}function B6e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aq(t){return t&&t.map((e,r)=>st.createElement(e.tag,Dw({key:r},e.attr),Aq(e.child)))}function yt(t){return e=>st.createElement(z6e,Iw({attr:Dw({},t.attr)},e),Aq(t.child))}function z6e(t){var e=r=>{var{attr:n,size:s,title:a}=t,i=D6e(t,I6e),l=s||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),st.createElement("svg",Iw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:Dw(Dw({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&st.createElement("title",null,a),t.children)};return mI!==void 0?st.createElement(mI.Consumer,null,r=>e(r)):e(_q)}function U6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function Mq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function V6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function H6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function j_(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function W6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function q6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function G6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function K6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function Z6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function Y6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function gI(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function Lw(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function $w(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function Fw(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function Oq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function Rq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function Pq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function X6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function J6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function xI(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function Q6e(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function eMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function Iq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function Dq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function Lq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function $q(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function tMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function rMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function Fq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function nMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function sMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function T_(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function aMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function iMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function Bq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function oMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function lMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function zq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function cMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function Uq(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function dMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function uMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function hMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function fMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function mMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function pMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function gMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function xMe(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function yI(t){return yt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let iS;async function yMe(){return iS||(iS=(async()=>{const[t,e]=await Promise.all([Nt(()=>import("./module-BvCTiNll.js"),[]),Nt(()=>import("./native-B5Vb9Oiz.js"),[])]),r="default"in t?t.default:t,n="default"in e?e.default:e;return await r.init({data:n}),{emojiMart:r,emojiData:n}})(),iS)}function vMe(t){const e=x.useRef(null),r=x.useRef(null);return r.current&&r.current.update(t),x.useEffect(()=>((async()=>{const{emojiMart:n}=await yMe();r.current=new n.Picker({...t,ref:e})})(),()=>{r.current=null}),[]),st.createElement("div",{ref:e})}const vI=t=>{const[e,r]=x.useState(!1),n=mt(),s=yo();return o.jsxs(n.Generic.Popover.Root,{opened:e,children:[o.jsx(n.Generic.Popover.Trigger,{children:o.jsx("div",{onClick:a=>{a.preventDefault(),a.stopPropagation(),r(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),o.jsx(n.Generic.Popover.Content,{variant:"panel-popover",children:o.jsx(vMe,{perLine:7,onClickOutside:()=>r(!1),onEmojiSelect:a=>{t.onEmojiSelect(a),r(!1)},theme:s==null?void 0:s.colorSchemePreference})})]})};function bMe(t,e){return __(t,[e]).get(e)}function __(t,e){const r=t.comments;if(!r)throw new Error("Comments plugin not found");const n=r.userStore,s=x.useCallback(()=>{const l=new Map;for(const c of e){const d=n.getUser(c);d&&l.set(c,d)}return l},[n,e]),a=x.useMemo(()=>({current:s()}),[s]),i=x.useCallback(l=>{const c=n.subscribe(d=>{a.current=s(),l()});return n.loadUsers(e),c},[n,s,e,a]);return x.useSyncExternalStore(i,()=>a.current)}const wMe=t=>{const e=mt(),r=jt(),n=xt();if(!n.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const s=t.comment.reactions.find(c=>c.emoji===t.emoji);if(!s)throw new Error("Trying to render reaction badge for non-existing reaction");const[a,i]=x.useState([]),l=__(n,a);return o.jsx(e.Generic.Badge.Root,{className:Dr("bn-badge","bn-comment-reaction"),text:s.userIds.length.toString(),icon:s.emoji,isSelected:n.comments.threadStore.auth.canDeleteReaction(t.comment,s.emoji),onClick:()=>t.onReactionSelect(s.emoji),onMouseEnter:()=>i(s.userIds),mainTooltip:r.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(l.values()).map(c=>c.username).join(`
`)}`},s.emoji)},kMe=({comment:t,thread:e,showResolveButton:r})=>{const n=jt(),s=T2({initialContent:t.body,trailingBlock:!1,dictionary:{...n,placeholders:{emptyDocument:n.placeholders.edit_comment}},schema:E_},[t.body]),a=mt(),[i,l]=x.useState(!1),c=xt();if(!c.comments)throw new Error("Comments plugin not found");const d=c.comments.threadStore,u=x.useCallback(()=>{l(!0)},[]),h=x.useCallback(()=>{s.replaceBlocks(s.document,t.body),l(!1)},[s,t.body]),f=x.useCallback(async E=>{await d.updateComment({commentId:t.id,comment:{body:s.document},threadId:e.id}),l(!1)},[t,e.id,s,d]),m=x.useCallback(async()=>{await d.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,d]),p=x.useCallback(async E=>{d.auth.canAddReaction(t,E)?await d.addReaction({threadId:e.id,commentId:t.id,emoji:E}):d.auth.canDeleteReaction(t,E)&&await d.deleteReaction({threadId:e.id,commentId:t.id,emoji:E})},[d,t,e.id]),g=x.useCallback(async()=>{await d.resolveThread({threadId:e.id})},[e.id,d]),y=x.useCallback(async()=>{await d.unresolveThread({threadId:e.id})},[e.id,d]),b=bMe(c,t.userId);if(!t.body)return null;let v;const w=d.auth.canAddReaction(t),k=d.auth.canDeleteComment(t),N=d.auth.canUpdateComment(t),S=r&&(e.resolved?d.auth.canUnresolveThread(e):d.auth.canResolveThread(e));i||(v=o.jsxs(a.Generic.Toolbar.Root,{className:Dr("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[w&&o.jsx(vI,{onEmojiSelect:E=>p(E.native),children:o.jsx(a.Generic.Toolbar.Button,{mainTooltip:n.comments.actions.add_reaction,variant:"compact",children:o.jsx(yI,{size:16})},"add-reaction")}),S&&(e.resolved?o.jsx(a.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:y,children:o.jsx(U6e,{size:16})},"reopen"):o.jsx(a.Generic.Toolbar.Button,{mainTooltip:n.comments.actions.resolve,variant:"compact",onClick:g,children:o.jsx(uMe,{size:16})},"resolve")),(k||N)&&o.jsxs(a.Generic.Menu.Root,{position:"bottom-start",children:[o.jsx(a.Generic.Menu.Trigger,{children:o.jsx(a.Generic.Toolbar.Button,{mainTooltip:n.comments.actions.more_actions,variant:"compact",children:o.jsx(gMe,{size:16})},"more-actions")}),o.jsxs(a.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[N&&o.jsx(a.Generic.Menu.Item,{icon:o.jsx(V6e,{}),onClick:u,children:n.comments.actions.edit_comment},"edit-comment"),k&&o.jsx(a.Generic.Menu.Item,{icon:o.jsx(fMe,{}),onClick:m,children:n.comments.actions.delete_comment},"delete-comment")]})]})]}));const C=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return o.jsx(a.Comments.Comment,{authorInfo:b??"loading",timeString:C,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:v,className:"bn-thread-comment",children:o.jsx(S_,{autoFocus:i,editor:s,editable:i,actions:t.reactions.length>0||i?({isEmpty:E})=>o.jsxs(o.Fragment,{children:[t.reactions.length>0&&!i&&o.jsxs(a.Generic.Badge.Group,{className:Dr("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(T=>o.jsx(wMe,{comment:t,emoji:T.emoji,onReactionSelect:p},T.emoji)),o.jsx(vI,{onEmojiSelect:T=>p(T.native),children:o.jsx(a.Generic.Badge.Root,{className:Dr("bn-badge","bn-comment-add-reaction"),text:"+",icon:o.jsx(yI,{size:16}),mainTooltip:n.comments.actions.add_reaction})})]}),i&&o.jsxs(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Dr("bn-action-toolbar","bn-comment-actions"),children:[o.jsx(a.Generic.Toolbar.Button,{mainTooltip:n.comments.save_button_text,variant:"compact",onClick:f,isDisabled:E,children:n.comments.save_button_text}),o.jsx(a.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:n.comments.cancel_button_text,variant:"compact",onClick:h,children:n.comments.cancel_button_text})]})]}):void 0})})},CMe=({thread:t,maxCommentsBeforeCollapse:e})=>{const r=mt(),n=jt(),s=xt(),a=__(s,t.resolvedBy?[t.resolvedBy]:[]),i=t.comments.map((l,c)=>o.jsx(kMe,{thread:t,comment:l,showResolveButton:c===0},l.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!a.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const l=t.comments.findLastIndex(c=>t.resolvedUpdatedAt.getTime()>c.createdAt.getTime())+1;i.splice(l,0,o.jsx(r.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&a.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:o.jsx("div",{className:"bn-resolved-text",children:n.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&i.length>e&&i.splice(1,i.length-2,o.jsx(r.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:n.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),i},Vq=({thread:t,selected:e,referenceText:r,maxCommentsBeforeCollapse:n,onFocus:s,onBlur:a,tabIndex:i})=>{const l=mt(),c=jt(),d=xt().comments;if(!d)throw new Error("Comments plugin not found");const u=T2({trailingBlock:!1,dictionary:{...c,placeholders:{emptyDocument:c.placeholders.comment_reply}},schema:E_}),h=x.useCallback(async()=>{await d.threadStore.addComment({comment:{body:u.document},threadId:t.id}),u.removeBlocks(u.document)},[d,u,t.id]);return o.jsxs(l.Comments.Card,{className:"bn-thread",headerText:r,onFocus:s,onBlur:a,selected:e,tabIndex:i,children:[o.jsx(l.Comments.CardSection,{className:"bn-thread-comments",children:o.jsx(CMe,{thread:t,maxCommentsBeforeCollapse:e?void 0:n||5})}),e&&o.jsx(l.Comments.CardSection,{className:"bn-thread-composer",children:o.jsx(S_,{autoFocus:!1,editable:!0,editor:u,actions:({isEmpty:f})=>f?null:o.jsx(l.Generic.Toolbar.Root,{variant:"action-toolbar",className:Dr("bn-action-toolbar","bn-comment-actions"),children:o.jsx(l.Generic.Toolbar.Button,{mainTooltip:c.comments.save_button_text,variant:"compact",isDisabled:f,onClick:h,children:c.comments.save_button_text})})})})]})};function NMe(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const r=e.threadStore,n=x.useRef(void 0);n.current||(n.current=r.getThreads());const s=x.useCallback(a=>r.subscribe(i=>{n.current=i,a()}),[r]);return x.useSyncExternalStore(s,()=>n.current)}const SMe=t=>{const e=xt();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const r=pc(e.comments.onUpdate.bind(e.comments)),{isMounted:n,ref:s,style:a,getFloatingProps:i,setReference:l}=au(!!(r!=null&&r.selectedThreadId),null,5e3,{placement:"bottom",middleware:[sl(10),Bh(),uo()],onOpenChange:h=>{var f;h||((f=e.comments)==null||f.selectThread(void 0),e.focus())},...t.floatingOptions}),c=x.useCallback(()=>{var h;if(!(r!=null&&r.selectedThreadId))return;const f=(h=e.domElement)==null?void 0:h.querySelector(`[data-bn-thread-id="${r==null?void 0:r.selectedThreadId}"]`);f&&l(f)},[l,e,r==null?void 0:r.selectedThreadId]);x.useEffect(()=>{if(r!=null&&r.selectedThreadId)return e.onChange(()=>{c()})},[e,c,r==null?void 0:r.selectedThreadId]),x.useLayoutEffect(c,[c]);const d=NMe(e);if(!n||!r||!r.selectedThreadId)return null;const u=t.floatingThread||Vq;return o.jsx("div",{ref:s,style:a,...i(),children:o.jsx(u,{thread:d.get(r.selectedThreadId),selected:!0})})},EMe=t=>{const e=mt(),r=jt(),{block:n}=t,s=xt(),[a,i]=x.useState(""),l=x.useCallback(u=>{i(u.currentTarget.value)},[]),c=x.useCallback(u=>{u.key==="Enter"&&(u.preventDefault(),s.updateBlock(n,{props:{name:zP(a),url:a}}))},[s,n,a]),d=x.useCallback(()=>{s.updateBlock(n,{props:{name:zP(a),url:a}})},[s,n,a]);return o.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[o.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:r.file_panel.embed.url_placeholder,value:a,onChange:l,onKeyDown:c,"data-test":"embed-input"}),o.jsx(e.FilePanel.Button,{className:"bn-button",onClick:d,"data-test":"embed-input-button",children:r.file_panel.embed.embed_button[n.type]||r.file_panel.embed.embed_button.file})]})},jMe=t=>{var e;const r=mt(),n=jt(),{block:s,setLoading:a}=t,i=xt(),[l,c]=x.useState(!1);x.useEffect(()=>{l&&setTimeout(()=>{c(!1)},3e3)},[l]);const d=x.useCallback(f=>{if(f===null)return;async function m(p){if(a(!0),i.uploadFile!==void 0)try{let g=await i.uploadFile(p,s.id);typeof g=="string"&&(g={props:{name:p.name,url:g}}),i.updateBlock(s,g)}catch{c(!0)}finally{a(!1)}}m(f)},[s,i,a]),u=i.schema.blockSchema[s.type],h=u.isFileBlock&&(e=u.fileBlockAccept)!=null&&e.length?u.fileBlockAccept.join(","):"*/*";return o.jsxs(r.FilePanel.TabPanel,{className:"bn-tab-panel",children:[o.jsx(r.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:h,placeholder:n.file_panel.upload.file_placeholder[s.type]||n.file_panel.upload.file_placeholder.file,value:null,onChange:d}),l&&o.jsx("div",{className:"bn-error-text",children:n.file_panel.upload.upload_error})]})},Hq=t=>{const e=mt(),r=jt(),n=xt(),[s,a]=x.useState(!1),i=t.tabs??[...n.uploadFile!==void 0?[{name:r.file_panel.upload.title,tabPanel:o.jsx(jMe,{block:t.block,setLoading:a})}]:[],{name:r.file_panel.embed.title,tabPanel:o.jsx(EMe,{block:t.block})}],[l,c]=x.useState(t.defaultOpenTab||i[0].name);return o.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:l,openTab:l,setOpenTab:c,tabs:i,loading:s})},TMe=t=>{const e=xt();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const r=pc(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:n,ref:s,style:a,getFloatingProps:i}=au((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,5e3,{placement:"bottom",middleware:[sl(10),uo()],onOpenChange:h=>{h||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!n||!r)return null;const{show:l,referencePos:c,...d}=r,u=t.filePanel||Hq;return o.jsx("div",{ref:s,style:a,...i(),children:o.jsx(u,{...d})})};function _Me(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const r=t;return r.target!=null&&e.contains(r.target)}function iu(t,e){N_(t,e),C_(t,e)}function A_(t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}function Ca(t){const e=yo();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const r=t,[n,s]=x.useState(()=>{var i;return((i=r.getSelection())==null?void 0:i.blocks)||[r.getTextCursorPosition().block]}),a=x.useCallback(()=>{var i;return s(((i=r.getSelection())==null?void 0:i.blocks)||[r.getTextCursorPosition().block])},[r]);return iu(a,r),n}const AMe={bold:Z6e,italic:Q6e,underline:aMe,strike:nMe,code:H6e};function MMe(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const M1=t=>{const e=jt(),r=mt(),n=xt(),s=MMe(t.basicTextStyle,n),a=Ca(n),[i,l]=x.useState(t.basicTextStyle in n.getActiveStyles());iu(()=>{s&&l(t.basicTextStyle in n.getActiveStyles())},n);const c=u=>{if(n.focus(),!!s){if(n.schema.styleSchema[u].propSchema!=="boolean")throw new Error("can only toggle boolean styles");n.toggleStyles({[u]:!0})}};if(!x.useMemo(()=>s?!!a.find(u=>u.content!==void 0):!1,[s,a])||!n.isEditable)return null;const d=AMe[t.basicTextStyle];return o.jsx(r.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>c(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:_a(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:o.jsx(d,{})})},R4=t=>{const e=t.textColor||"default",r=t.backgroundColor||"default",n=t.size||16,s=x.useMemo(()=>({pointerEvents:"none",fontSize:(n*.75).toString()+"px",height:n.toString()+"px",lineHeight:n.toString()+"px",textAlign:"center",width:n.toString()+"px"}),[n]);return o.jsx("div",{className:"bn-color-icon","data-background-color":r,"data-text-color":e,style:s,children:"A"})},bI=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],_2=t=>{const e=mt(),r=jt();return o.jsxs(o.Fragment,{children:[o.jsx(()=>t.text?o.jsxs(o.Fragment,{children:[o.jsx(e.Generic.Menu.Label,{children:r.color_picker.text_title}),bI.map(n=>o.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(n)},"data-test":"text-color-"+n,icon:o.jsx(R4,{textColor:n,size:t.iconSize}),checked:t.text.color===n,children:r.color_picker.colors[n]},"text-color-"+n))]}):null,{}),o.jsx(()=>t.background?o.jsxs(o.Fragment,{children:[o.jsx(e.Generic.Menu.Label,{children:r.color_picker.background_title}),bI.map(n=>o.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(n)},"data-test":"background-color-"+n,icon:o.jsx(R4,{backgroundColor:n,size:t.iconSize}),checked:t.background.color===n,children:r.color_picker.colors[n]},"background-color-"+n))]}):null,{})]})};function wI(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const OMe=()=>{const t=mt(),e=jt(),r=xt(),n=wI("text",r),s=wI("background",r),a=Ca(r),[i,l]=x.useState(n&&r.getActiveStyles().textColor||"default"),[c,d]=x.useState(s&&r.getActiveStyles().backgroundColor||"default");iu(()=>{n&&l(r.getActiveStyles().textColor||"default"),s&&d(r.getActiveStyles().backgroundColor||"default")},r);const u=x.useCallback(f=>{if(!n)throw Error("Tried to set text color, but style does not exist in editor schema.");f==="default"?r.removeStyles({textColor:f}):r.addStyles({textColor:f}),setTimeout(()=>{r.focus()})},[r,n]),h=x.useCallback(f=>{if(!s)throw Error("Tried to set background color, but style does not exist in editor schema.");f==="default"?r.removeStyles({backgroundColor:f}):r.addStyles({backgroundColor:f}),setTimeout(()=>{r.focus()})},[s,r]);return!x.useMemo(()=>{if(!n&&!s)return!1;for(const f of a)if(f.content!==void 0)return!0;return!1},[s,a,n])||!r.isEditable?null:o.jsxs(t.Generic.Menu.Root,{children:[o.jsx(t.Generic.Menu.Trigger,{children:o.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:o.jsx(R4,{textColor:i,backgroundColor:c,size:20})})}),o.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:o.jsx(_2,{text:n?{color:i,setColor:u}:void 0,background:s?{color:c,setColor:h}:void 0})})]})},kI=t=>{for(const e of xq)if(t.startsWith(e))return t;return`${yq}://${t}`},Wq=t=>{const e=mt(),r=jt(),{url:n,text:s,editLink:a,showTextField:i}=t,[l,c]=x.useState(n),[d,u]=x.useState(s);x.useEffect(()=>{c(n),u(s)},[s,n]);const h=x.useCallback(g=>{g.key==="Enter"&&(g.preventDefault(),a(kI(l),d))},[a,l,d]),f=x.useCallback(g=>c(g.currentTarget.value),[]),m=x.useCallback(g=>u(g.currentTarget.value),[]),p=x.useCallback(()=>a(kI(l),d),[a,l,d]);return o.jsxs(e.Generic.Form.Root,{children:[o.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:o.jsx(Iq,{}),autoFocus:!0,placeholder:r.link_toolbar.form.url_placeholder,value:l,onKeyDown:h,onChange:f,onSubmit:p}),i!==!1&&o.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:o.jsx(T_,{}),placeholder:r.link_toolbar.form.title_placeholder,value:d,onKeyDown:h,onChange:m,onSubmit:p})]})};function RMe(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const PMe=()=>{var t;const e=xt(),r=mt(),n=jt(),s=RMe(e),a=Ca(e),[i,l]=x.useState(!1),[c,d]=x.useState(e.getSelectedLinkUrl()||""),[u,h]=x.useState(e.getSelectedText());iu(()=>{h(e.getSelectedText()||""),d(e.getSelectedLinkUrl()||"")},e),x.useEffect(()=>{var p;const g=y=>{(y.ctrlKey||y.metaKey)&&y.key==="k"&&(l(!0),y.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",g),()=>{var y;(y=e.prosemirrorView)==null||y.dom.removeEventListener("keydown",g)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const f=x.useCallback(p=>{e.createLink(p),e.focus()},[e]),m=e.transact(p=>E4(p.selection));return!x.useMemo(()=>{if(!s)return!1;for(const p of a)if(p.content===void 0)return!1;return!m},[s,a,m])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:o.jsxs(r.Generic.Popover.Root,{opened:i,children:[o.jsx(r.Generic.Popover.Trigger,{children:o.jsx(r.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:n.formatting_toolbar.link.tooltip,mainTooltip:n.formatting_toolbar.link.tooltip,secondaryTooltip:_a(n.formatting_toolbar.link.secondary_tooltip,n.generic.ctrl_shortcut),icon:o.jsx(Iq,{}),onClick:()=>l(!0)})}),o.jsx(r.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:o.jsx(Wq,{url:c,text:u,editLink:f,showTextField:!1})})]})},IMe=()=>{const t=jt(),e=mt(),r=xt(),[n,s]=x.useState(),a=Ca(r),i=x.useMemo(()=>{if(a.length!==1)return;const d=a[0];if(my(d,r))return s(d.props.caption),d},[r,a]),l=x.useCallback(d=>{i&&d.key==="Enter"&&(d.preventDefault(),r.updateBlock(i,{props:{caption:n}}))},[n,r,i]),c=x.useCallback(d=>s(d.currentTarget.value),[]);return!i||py(i,r)||!r.isEditable?null:o.jsxs(e.Generic.Popover.Root,{children:[o.jsx(e.Generic.Popover.Trigger,{children:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:o.jsx(xI,{}),isSelected:i.props.caption!==""})}),o.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:o.jsx(e.Generic.Form.Root,{children:o.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:o.jsx(xI,{}),value:n||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:l,onChange:c})})})]})},DMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),s=x.useMemo(()=>{if(n.length!==1)return;const i=n[0];if(my(i,r))return i},[r,n]),a=x.useCallback(()=>{r.focus(),r.removeBlocks([s])},[r,s]);return!s||py(s,r)||!r.isEditable?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[s.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[s.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:o.jsx(hMe,{}),onClick:a})},LMe=()=>{const t=jt(),e=mt(),r=xt(),[n,s]=x.useState(),a=Ca(r),i=x.useMemo(()=>{if(a.length!==1)return;const d=a[0];if(my(d,r))return s(d.props.name),d},[r,a]),l=x.useCallback(d=>{i&&d.key==="Enter"&&(d.preventDefault(),r.updateBlock(i,{props:{name:n}}))},[n,r,i]),c=x.useCallback(d=>s(d.currentTarget.value),[]);return!i||py(i,r)||!r.isEditable?null:o.jsxs(e.Generic.Popover.Root,{children:[o.jsx(e.Generic.Popover.Trigger,{children:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:o.jsx(gI,{})})}),o.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:o.jsx(e.Generic.Form.Root,{children:o.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:o.jsx(gI,{}),value:n||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:l,onChange:c})})})]})},$Me=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),[s,a]=x.useState(!1);x.useEffect(()=>{a(!1)},[n]);const i=n.length===1?n[0]:void 0;return i===void 0||!my(i,r)||!r.isEditable?null:o.jsxs(e.Generic.Popover.Root,{opened:s,position:"bottom",children:[o.jsx(e.Generic.Popover.Trigger,{children:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>a(!s),isSelected:s,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:o.jsx(lMe,{})})}),o.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:o.jsx(Hq,{block:i})})]})},FMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),[s,a]=x.useState(()=>r.canNestBlock());iu(()=>{a(r.canNestBlock())},r);const i=x.useCallback(()=>{r.focus(),r.nestBlock()},[r]);return!x.useMemo(()=>!n.find(l=>r.schema.blockSchema[l.type].content!=="inline"),[r.schema.blockSchema,n])||!r.isEditable?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!s,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:_a(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:o.jsx(J6e,{})})},BMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),[s,a]=x.useState(()=>r.canUnnestBlock());iu(()=>{a(r.canUnnestBlock())},r);const i=x.useCallback(()=>{r.focus(),r.unnestBlock()},[r]);return!x.useMemo(()=>!n.find(l=>r.schema.blockSchema[l.type].content!=="inline"),[r.schema.blockSchema,n])||!r.isEditable?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!s,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:_a(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:o.jsx(X6e,{})})},zMe=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:T_,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:Lw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:$w,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:Fw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:Oq,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===4},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:Rq,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===5},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:Pq,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===6},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:Lw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:$w,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:Fw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.quote.title,type:"quote",icon:Fq,isSelected:e=>e.type==="quote"},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:zq,isSelected:e=>e.type==="toggleListItem"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:$q,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:Lq,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:Dq,isSelected:e=>e.type==="checkListItem"}],UMe=t=>{const e=mt(),r=jt(),n=xt(),s=Ca(n),[a,i]=x.useState(n.getTextCursorPosition().block),l=x.useMemo(()=>(t.items||zMe(r)).filter(u=>u.type in n.schema.blockSchema),[n,r,t.items]),c=x.useMemo(()=>l.find(u=>u.type===a.type)!==void 0,[a.type,l]),d=x.useMemo(()=>{const u=h=>{n.focus(),n.transact(()=>{for(const f of s)n.updateBlock(f,{type:h.type,props:h.props})})};return l.map(h=>{const f=h.icon;return{text:h.name,icon:o.jsx(f,{size:16}),onClick:()=>u(h),isSelected:h.isSelected(a)}})},[a,l,n,s]);return iu(()=>{i(n.getTextCursorPosition().block)},n),!c||!n.isEditable?null:o.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:d})},VMe=()=>{const t=jt(),e=mt(),r=xt(),n=x.useCallback(()=>{var s;(s=r.comments)==null||s.startPendingComment(),r.formattingToolbar.closeMenu()},[r]);return r.comments?o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:o.jsx(Mq,{}),onClick:n}):null},HMe=()=>{const t=jt(),e=mt(),r=xt(),n=x.useCallback(()=>{r._tiptapEditor.chain().focus().addPendingComment().run()},[r]);return!r._tiptapEditor.commands.addPendingComment||!r.isEditable?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:o.jsx(Mq,{}),onClick:n})};function P4(t,e){try{const r=new URL(t,e);if(r.protocol!=="javascript:")return r.href}catch{}return"#"}const WMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),s=x.useMemo(()=>{if(n.length!==1)return;const i=n[0];if(my(i,r))return i},[r,n]),a=x.useCallback(()=>{s&&s.props.url&&(r.focus(),r.resolveFileUrl?r.resolveFileUrl(s.props.url).then(i=>window.open(P4(i,window.location.href))):window.open(P4(s.props.url,window.location.href)))},[r,s]);return!s||py(s,r)?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[s.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[s.type]||t.formatting_toolbar.file_download.tooltip.file,icon:o.jsx(mMe,{}),onClick:a})},qMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),s=x.useMemo(()=>{if(n.length!==1)return;const i=n[0];if(r_e(i,r))return i},[r,n]),a=x.useCallback(()=>{s&&r.updateBlock(s,{props:{showPreview:!s.props.showPreview}})},[r,s]);return!s||py(s,r)||!r.isEditable?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:o.jsx(oMe,{}),isSelected:s.props.showPreview,onClick:a})},GMe=()=>{const t=jt(),e=mt(),r=xt(),n=Ca(r),s=x.useMemo(()=>{var i;if(n.length!==1)return;const l=n[0];if(l.type==="table")return(i=r.tableHandles)==null?void 0:i.getMergeDirection(l)},[r,n]),a=x.useCallback(()=>{var i;(i=r.tableHandles)==null||i.mergeCells()},[r]);return!r.isEditable||s===void 0||!r.settings.tables.splitCells?null:o.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:s==="horizontal"?o.jsx(tMe,{}):o.jsx(rMe,{}),onClick:a})},KMe={left:G6e,center:W6e,right:K6e,justify:q6e},oS=t=>{const e=mt(),r=jt(),n=xt(),s=Ca(n),a=x.useMemo(()=>{var c;const d=s[0];if(S4("textAlignment",d,n))return d.props.textAlignment;if(d.type==="table"){const u=(c=n.tableHandles)==null?void 0:c.getCellSelection();if(!u)return;const h=u.cells.map(({row:m,col:p})=>Hd(d.content.rows[m].cells[p]).props.textAlignment),f=h[0];if(h.every(m=>m===f))return f}},[n,s]),i=x.useCallback(c=>{var d;n.focus();for(const u of s)if($f("textAlignment",u.type,n))n.updateBlock(u,{props:{textAlignment:c}});else if(u.type==="table"){const h=(d=n.tableHandles)==null?void 0:d.getCellSelection();if(!h)continue;const f=u.content.rows.map(m=>({...m,cells:m.cells.map(p=>Hd(p))}));h.cells.forEach(({row:m,col:p})=>{f[m].cells[p].props.textAlignment=c}),n.updateBlock(u,{type:"table",content:{...u.content,type:"tableContent",rows:f}}),n.setTextCursorPosition(u)}},[n,s]);if(!x.useMemo(()=>!!s.find(c=>"textAlignment"in c.props||c.type==="table"&&c.children),[s])||!n.isEditable)return null;const l=KMe[t.textAlignment];return o.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:a===t.textAlignment,label:r.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:r.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:o.jsx(l,{})})},qq=t=>[o.jsx(UMe,{items:t},"blockTypeSelect"),o.jsx(GMe,{},"tableCellMergeButton"),o.jsx(IMe,{},"fileCaptionButton"),o.jsx($Me,{},"replaceFileButton"),o.jsx(LMe,{},"fileRenameButton"),o.jsx(DMe,{},"fileDeleteButton"),o.jsx(WMe,{},"fileDownloadButton"),o.jsx(qMe,{},"filePreviewButton"),o.jsx(M1,{basicTextStyle:"bold"},"boldStyleButton"),o.jsx(M1,{basicTextStyle:"italic"},"italicStyleButton"),o.jsx(M1,{basicTextStyle:"underline"},"underlineStyleButton"),o.jsx(M1,{basicTextStyle:"strike"},"strikeStyleButton"),o.jsx(oS,{textAlignment:"left"},"textAlignLeftButton"),o.jsx(oS,{textAlignment:"center"},"textAlignCenterButton"),o.jsx(oS,{textAlignment:"right"},"textAlignRightButton"),o.jsx(OMe,{},"colorStyleButton"),o.jsx(FMe,{},"nestBlockButton"),o.jsx(BMe,{},"unnestBlockButton"),o.jsx(PMe,{},"createLinkButton"),o.jsx(VMe,{},"addCommentButton"),o.jsx(HMe,{},"addTiptapCommentButton")],Gq=t=>{const e=mt();return o.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||qq(t.blockTypeSelectItems)})},CI=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},Kq=t=>{const e=x.useRef(null),r=xt(),[n,s]=x.useState(()=>{const f=r.getTextCursorPosition().block;return"textAlignment"in f.props?CI(f.props.textAlignment):"top-start"});iu(()=>{const f=r.getTextCursorPosition().block;"textAlignment"in f.props?s(CI(f.props.textAlignment)):s("top-start")},r);const a=pc(r.formattingToolbar.onUpdate.bind(r.formattingToolbar)),{isMounted:i,ref:l,style:c,getFloatingProps:d}=au((a==null?void 0:a.show)||!1,(a==null?void 0:a.referencePos)||null,3e3,{placement:n,middleware:[sl(10),Bh(),uo()],onOpenChange:(f,m)=>{f||(r.formattingToolbar.closeMenu(),r.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:f=>{var m;const p=(m=r._tiptapEditor)==null?void 0:m.view;return!p||!f.target?!1:!_Me(f,p.dom.parentElement)}},...t.floatingOptions}),u=x.useMemo(()=>A_([e,l]),[e,l]);if(!i||!a)return null;if(!a.show&&e.current)return o.jsx("div",{ref:u,style:c,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const h=t.formattingToolbar||Gq;return o.jsx("div",{ref:u,style:c,...d(),children:o.jsx(h,{})})},ZMe=t=>{const e=mt(),r=jt();return o.jsx(e.LinkToolbar.Button,{className:"bn-button",label:r.link_toolbar.delete.tooltip,mainTooltip:r.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:o.jsx(eMe,{})})},YMe=t=>{const e=mt(),r=jt();return o.jsxs(e.Generic.Popover.Root,{children:[o.jsx(e.Generic.Popover.Trigger,{children:o.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:r.link_toolbar.edit.tooltip,isSelected:!1,children:r.link_toolbar.edit.text})}),o.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:o.jsx(Wq,{...t})})]})},XMe=t=>{const e=mt(),r=jt();return o.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:r.link_toolbar.open.tooltip,label:r.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(P4(t.url,window.location.href),"_blank")},icon:o.jsx(pMe,{})})},JMe=t=>{const e=mt();return o.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:t.children||o.jsxs(o.Fragment,{children:[o.jsx(YMe,{url:t.url,text:t.text,editLink:t.editLink}),o.jsx(XMe,{url:t.url}),o.jsx(ZMe,{deleteLink:t.deleteLink})]})})},QMe=t=>{const e=xt(),r={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},n=pc(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:s,ref:a,style:i,getFloatingProps:l}=au((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,4e3,{placement:"top-start",middleware:[sl(10),uo()],onOpenChange:f=>{f||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!s||!n)return null;const{show:c,referencePos:d,...u}=n,h=t.linkToolbar||JMe;return o.jsx("div",{ref:a,style:i,...l(),children:o.jsx(h,{...u,...r})})};function eOe(t){return yt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const tOe=t=>{const e=mt(),r=jt(),n=xt(),s=x.useCallback(()=>{const a=t.block.content;if(a!==void 0&&Array.isArray(a)&&a.length===0)n.setTextCursorPosition(t.block),n.openSuggestionMenu("/");else{const i=n.insertBlocks([{type:"paragraph"}],t.block,"after")[0];n.setTextCursorPosition(i),n.openSuggestionMenu("/")}},[n,t.block]);return o.jsx(e.SideMenu.Button,{className:"bn-button",label:r.side_menu.add_block_label,icon:o.jsx(eOe,{size:24,onClick:s,"data-test":"dragHandleAdd"})})};function Zq(t){return yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function rOe(t){return yt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const nOe=t=>{const e=mt(),r=xt();return!$f("textColor",t.block.type,r)&&!$f("backgroundColor",t.block.type,r)?null:o.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[o.jsx(e.Generic.Menu.Trigger,{sub:!0,children:o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),o.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:o.jsx(_2,{iconSize:18,text:$f("textColor",t.block.type,r)&&S4("textColor",t.block,r)?{color:t.block.props.textColor,setColor:n=>r.updateBlock(t.block,{type:t.block.type,props:{textColor:n}})}:void 0,background:$f("backgroundColor",t.block.type,r)&&S4("backgroundColor",t.block,r)?{color:t.block.props.backgroundColor,setColor:n=>r.updateBlock(t.block,{props:{backgroundColor:n}})}:void 0})})]})},sOe=t=>{const e=mt(),r=xt();return o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>r.removeBlocks([t.block]),children:t.children})},aOe=t=>{const e=mt(),r=xt();if(t.block.type!=="table"||!r.settings.tables.headers)return null;const n=!!t.block.content.headerRows;return o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:n,onClick:()=>{const s=r.getBlock(t.block.id);s&&r.updateBlock(s,{...s,content:{...s.content,headerRows:n?void 0:1}})},children:t.children})},iOe=t=>{const e=mt(),r=xt();if(t.block.type!=="table"||!r.settings.tables.headers)return null;const n=!!t.block.content.headerCols;return o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:n,onClick:()=>{r.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:n?void 0:1}})},children:t.children})},oOe=t=>{const e=mt(),r=jt();return o.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||o.jsxs(o.Fragment,{children:[o.jsx(sOe,{...t,children:r.drag_handle.delete_menuitem}),o.jsx(nOe,{...t,children:r.drag_handle.colors_menuitem}),o.jsx(aOe,{...t,children:r.drag_handle.header_row_menuitem}),o.jsx(iOe,{...t,children:r.drag_handle.header_column_menuitem})]})})},lOe=t=>{const e=mt(),r=jt(),n=t.dragHandleMenu||oOe;return o.jsxs(e.Generic.Menu.Root,{onOpenChange:s=>{s?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[o.jsx(e.Generic.Menu.Trigger,{children:o.jsx(e.SideMenu.Button,{label:r.side_menu.drag_handle_label,draggable:!0,onDragStart:s=>t.blockDragStart(s,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:o.jsx(Zq,{size:24,"data-test":"dragHandle"})})}),o.jsx(n,{block:t.block,children:t.children})]})},cOe=t=>{const e=mt(),r=x.useMemo(()=>{const n={"data-block-type":t.block.type};return t.block.type==="heading"&&(n["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?n["data-url"]="true":n["data-url"]="false"),n},[t.block,t.editor.schema.blockSchema]);return o.jsx(e.SideMenu.Root,{className:"bn-side-menu",...r,children:t.children||o.jsxs(o.Fragment,{children:[o.jsx(tOe,{...t}),o.jsx(lOe,{...t})]})})},dOe=t=>{const e=xt(),r={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},n=pc(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:s,ref:a,style:i,getFloatingProps:l}=au((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!s||!n)return null;const{show:c,referencePos:d,...u}=n,h=t.sideMenu||cOe;return o.jsx("div",{ref:a,style:i,...l(),children:o.jsx(h,{...u,...r,editor:e})})};async function uOe(t,e){return(await f6e(t,e)).map(({id:r,onItemClick:n})=>({id:r,onItemClick:n,icon:r}))}function hOe(t){const e=mt(),r=jt(),{items:n,loadingState:s,selectedIndex:a,onItemClick:i,columns:l}=t,c=s==="loading-initial"||s==="loading"?o.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:l}):null,d=x.useMemo(()=>{const u=[];for(let h=0;h<n.length;h++){const f=n[h];u.push(o.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:f,id:`bn-grid-suggestion-menu-item-${h}`,isSelected:h===a,onClick:()=>i==null?void 0:i(f)},f.id))}return u},[e,n,i,a]);return o.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:l,className:"bn-grid-suggestion-menu",children:[c,d,d.length===0&&t.loadingState==="loaded"&&o.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:l,children:r.suggestion_menu.no_items_title})]})}function Yq(t,e,r,n=3){const s=x.useRef(0);x.useEffect(()=>{e!==void 0&&(t.length>0?s.current=e.length:e.length-s.current>n&&r())},[r,n,t.length,e])}function Xq(t,e){const[r,n]=x.useState([]),[s,a]=x.useState(!1),i=x.useRef(void 0),l=x.useRef(void 0);return x.useEffect(()=>{const c=t;i.current=t,a(!0),e(t).then(d=>{i.current===c&&(n(d),a(!1),l.current=c)})},[t,e]),{items:r||[],usedQuery:l.current,loadingState:l.current===void 0?"loading-initial":s?"loading":"loaded"}}function fOe(t,e,r,n,s){const[a,i]=x.useState(0),l=n!==void 0&&n>1;return x.useEffect(()=>{var c;const d=u=>(u.key==="ArrowLeft"&&(u.preventDefault(),r.length&&i((a-1+r.length)%r.length)),u.key==="ArrowRight"&&(u.preventDefault(),r.length&&i((a+1+r.length)%r.length)),u.key==="ArrowUp"?(u.preventDefault(),r.length&&i((a-n+r.length)%r.length),!0):u.key==="ArrowDown"?(u.preventDefault(),r.length&&i((a+n)%r.length),!0):u.key==="Enter"&&!u.isComposing?(u.stopPropagation(),u.preventDefault(),r.length&&(s==null||s(r[a])),!0):!1);return(c=t.domElement)==null||c.addEventListener("keydown",d,!0),()=>{var u;(u=t.domElement)==null||u.removeEventListener("keydown",d,!0)}},[t.domElement,r,a,s,n,l]),x.useEffect(()=>{i(0)},[e]),{selectedIndex:r.length===0?void 0:a}}function mOe(t){const e=yo().setContentEditableProps,r=xt(),{getItems:n,gridSuggestionMenuComponent:s,query:a,clearQuery:i,closeMenu:l,onItemClick:c,columns:d}=t,u=x.useCallback(g=>{l(),i(),c==null||c(g)},[c,l,i]),{items:h,usedQuery:f,loadingState:m}=Xq(a,n);Yq(h,f,l);const{selectedIndex:p}=fOe(r,a,h,d,u);return x.useEffect(()=>(e(g=>({...g,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(g=>({...g,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),x.useEffect(()=>(e(g=>({...g,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(g=>({...g,"aria-activedescendant":void 0}))}),[e,p]),o.jsx(s,{items:h,onItemClick:u,loadingState:m,selectedIndex:p,columns:d})}function pOe(t){const e=xt(),{triggerCharacter:r,gridSuggestionMenuComponent:n,columns:s,minQueryLength:a,onItemClick:i,getItems:l,floatingOptions:c}=t,d=x.useMemo(()=>i||(v=>{v.onItemClick(e)}),[e,i]),u=x.useMemo(()=>l||(async v=>await uOe(e,v)),[e,l]),h={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},f=x.useCallback(v=>e.suggestionMenus.onUpdate(r,v),[e.suggestionMenus,r]),m=pc(f),{isMounted:p,ref:g,style:y,getFloatingProps:b}=au((m==null?void 0:m.show)||!1,(m==null?void 0:m.referencePos)||null,2e3,{placement:"bottom-start",middleware:[sl(10),uo(),Kk({apply({availableHeight:v,elements:w}){Object.assign(w.floating.style,{maxHeight:`${v-10}px`})}})],onOpenChange(v){v||e.suggestionMenus.closeMenu()},...c});return!p||!m||!(m!=null&&m.ignoreQueryLength)&&a&&(m.query.startsWith(" ")||m.query.length<a)?null:o.jsx("div",{ref:g,style:y,...b(),children:o.jsx(mOe,{query:m.query,closeMenu:h.closeMenu,clearQuery:h.clearQuery,getItems:u,columns:s,gridSuggestionMenuComponent:n||hOe,onItemClick:d})})}function gOe(t){const e=mt(),r=jt(),{items:n,loadingState:s,selectedIndex:a,onItemClick:i}=t,l=s==="loading-initial"||s==="loading"?o.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,c=x.useMemo(()=>{let d;const u=[];for(let h=0;h<n.length;h++){const f=n[h];f.group!==d&&(d=f.group,u.push(o.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:d},d))),u.push(o.jsx(e.SuggestionMenu.Item,{className:Dr("bn-suggestion-menu-item",f.size==="small"?"bn-suggestion-menu-item-small":""),item:f,id:`bn-suggestion-menu-item-${h}`,isSelected:h===a,onClick:()=>i==null?void 0:i(f)},f.title))}return u},[e,n,i,a]);return o.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[c,c.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&o.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:r.suggestion_menu.no_items_title}),l]})}function xOe(t,e){const[r,n]=x.useState(0);return{selectedIndex:r,setSelectedIndex:n,handler:s=>{if(s.key==="ArrowUp")return s.preventDefault(),t.length&&n((r-1+t.length)%t.length),!0;if(s.key==="ArrowDown")return s.preventDefault(),t.length&&n((r+1)%t.length),!0;const a=yOe(s)?s.nativeEvent.isComposing:s.isComposing;return s.key==="Enter"&&!a?(s.preventDefault(),s.stopPropagation(),t.length&&(e==null||e(t[r])),!0):!1}}}function yOe(t){return t.nativeEvent!==void 0}function vOe(t,e,r,n,s){const{selectedIndex:a,setSelectedIndex:i,handler:l}=xOe(r,n);return x.useEffect(()=>{var c;return(c=t.domElement)==null||c.addEventListener("keydown",l,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",l,!0)}},[t.domElement,r,a,n,s,l]),x.useEffect(()=>{i(0)},[e,i]),{selectedIndex:r.length===0?void 0:a}}function bOe(t){const e=yo().setContentEditableProps,r=xt(),{getItems:n,suggestionMenuComponent:s,query:a,clearQuery:i,closeMenu:l,onItemClick:c}=t,d=x.useCallback(p=>{l(),i(),c==null||c(p)},[c,l,i]),{items:u,usedQuery:h,loadingState:f}=Xq(a,n);Yq(u,h,l);const{selectedIndex:m}=vOe(r,a,u,d);return x.useEffect(()=>(e(p=>({...p,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(p=>({...p,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),x.useEffect(()=>(e(p=>({...p,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{e(p=>({...p,"aria-activedescendant":void 0}))}),[e,m]),o.jsx(s,{items:u,onItemClick:d,loadingState:f,selectedIndex:m})}const wOe={heading:Lw,heading_2:$w,heading_3:Fw,heading_4:Oq,heading_5:Rq,heading_6:Pq,toggle_heading:Lw,toggle_heading_2:$w,toggle_heading_3:Fw,quote:Fq,toggle_list:zq,numbered_list:Lq,bullet_list:$q,check_list:Dq,paragraph:T_,table:sMe,image:Bq,video:iMe,audio:Uq,file:j_,emoji:xMe,code_block:Y6e};function kOe(t){return s_e(t).map(e=>{const r=wOe[e.key];return{...e,icon:o.jsx(r,{size:18})}})}function COe(t){const e=xt(),{triggerCharacter:r,suggestionMenuComponent:n,minQueryLength:s,onItemClick:a,getItems:i,floatingOptions:l}=t,c=x.useMemo(()=>a||(b=>{b.onItemClick(e)}),[e,a]),d=x.useMemo(()=>i||(async b=>a_e(kOe(e),b)),[e,i]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=x.useCallback(b=>e.suggestionMenus.onUpdate(r,b),[e.suggestionMenus,r]),f=pc(h),{isMounted:m,ref:p,style:g,getFloatingProps:y}=au((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePos)||null,2e3,{placement:"bottom-start",middleware:[sl(10),uo({mainAxis:!0,crossAxis:!1}),Bh(),Kk({apply({availableHeight:b,elements:v}){Object.assign(v.floating.style,{maxHeight:`${b-10}px`})}})],onOpenChange(b){b||e.suggestionMenus.closeMenu()},...l});return!m||!f||!(f!=null&&f.ignoreQueryLength)&&s&&(f.query.startsWith(" ")||f.query.length<s)?null:o.jsx("div",{ref:p,style:g,...y(),onMouseDown:b=>b.preventDefault(),children:o.jsx(bOe,{query:f.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:d,suggestionMenuComponent:n||gOe,onItemClick:c})})}const NOe=(t,e=.3)=>{const r=Math.floor(t)+e,n=Math.ceil(t)-e;return t>=r&&t<=n?Math.round(t):t<r?Math.floor(t):Math.ceil(t)},SOe=t=>{const e=mt(),r=x.useRef(!1),[n,s]=x.useState(),a=x.useCallback(l=>{t.onMouseDown(),s({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY}),r.current=!1,l.preventDefault()},[t]),i=x.useCallback(()=>{r.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return x.useEffect(()=>{const l=c=>{var d,u;if(!n)throw new Error("editingState is undefined");r.current=!0;const h=(t.orientation==="addOrRemoveColumns"?c.clientX:c.clientY)-n.startPos,f=t.orientation==="addOrRemoveColumns"?((d=n.originalCroppedContent.rows[0])==null?void 0:d.cells.length)??0:n.originalCroppedContent.rows.length,m=t.orientation==="addOrRemoveColumns"?((u=n.originalContent.rows[0])==null?void 0:u.cells.length)??0:n.originalContent.rows.length,p=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,g=m+NOe(h/(t.orientation==="addOrRemoveColumns"?g_:B3e),.3);g>=f&&g>0&&g!==p&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:n.originalCroppedContent},"columns",g-f):t.editor.tableHandles.addRowsOrColumns({type:"table",content:n.originalCroppedContent},"rows",g-f)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return n&&window.addEventListener("mousemove",l),()=>{window.removeEventListener("mousemove",l)}},[n,t.block,t.editor,t.orientation]),x.useEffect(()=>{const l=t.onMouseUp,c=()=>{s(void 0),l()};return n&&window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[n,t.onMouseUp]),t.editor.isEditable?o.jsx(e.TableHandle.ExtendButton,{className:Dr("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",n!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:a,children:t.children||o.jsx(dMe,{size:18,"data-test":"extendButton"})}):null},NI=t=>{const e=mt(),r=jt(),n=xt().tableHandles;return n?o.jsx(e.Generic.Menu.Item,{onClick:()=>{n.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:r.table_handle[`add_${t.side}_menuitem`]}):null},EOe=t=>{const e=mt(),r=jt(),n=xt().tableHandles;return n?o.jsx(e.Generic.Menu.Item,{onClick:()=>{n.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?r.table_handle.delete_row_menuitem:r.table_handle.delete_column_menuitem}):null},jOe=t=>{const e=mt(),r=jt(),n=xt(),s=n.tableHandles,a=x.useMemo(()=>!s||!t.block?[]:t.orientation==="row"?s.getCellsAtRowHandle(t.block,t.index):s.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,s]),i=(c,d)=>{const u=t.block.content.rows.map(h=>({...h,cells:h.cells.map(f=>Hd(f))}));a.forEach(({row:h,col:f})=>{d==="text"?u[h].cells[f].props.textColor=c:u[h].cells[f].props.backgroundColor=c}),n.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:u}}),n.setTextCursorPosition(t.block)};if(!a||!a[0]||!s||n.settings.tables.cellTextColor===!1&&n.settings.tables.cellBackgroundColor===!1)return null;const l=Hd(a[0].cell);return o.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[o.jsx(e.Generic.Menu.Trigger,{sub:!0,children:o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||r.drag_handle.colors_menuitem})}),o.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:o.jsx(_2,{iconSize:18,text:n.settings.tables.cellTextColor?{color:a.every(({cell:c})=>Wd(c)&&c.props.textColor===l.props.textColor)?l.props.textColor:"default",setColor:c=>{i(c,"text")}}:void 0,background:n.settings.tables.cellBackgroundColor?{color:a.every(({cell:c})=>Wd(c)&&c.props.backgroundColor===l.props.backgroundColor)?l.props.backgroundColor:"default",setColor:c=>i(c,"background")}:void 0})})]})},TOe=t=>{const e=mt(),r=jt(),n=xt();if(!n.tableHandles||t.index!==0||t.orientation!=="row"||!n.settings.tables.headers)return null;const s=!!t.block.content.headerRows;return o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{const a=n.getBlock(t.block.id);a&&n.updateBlock(a,{...a,content:{...a.content,headerRows:s?void 0:1}})},children:r.drag_handle.header_row_menuitem})},_Oe=t=>{const e=mt(),r=jt(),n=xt();if(!n.tableHandles||t.index!==0||t.orientation!=="column"||!n.settings.tables.headers)return null;const s=!!t.block.content.headerCols;return o.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:s,onClick:()=>{const a=n.getBlock(t.block.id);a&&n.updateBlock(a,{...a,content:{...a.content,headerCols:s?void 0:1}})},children:r.drag_handle.header_column_menuitem})},AOe=t=>{const e=mt();return o.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||o.jsxs(o.Fragment,{children:[o.jsx(EOe,{orientation:t.orientation,block:t.block,index:t.index}),o.jsx(NI,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),o.jsx(NI,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),o.jsx(TOe,{orientation:t.orientation,block:t.block,index:t.index}),o.jsx(_Oe,{orientation:t.orientation,block:t.block,index:t.index}),o.jsx(jOe,{orientation:t.orientation,block:t.block,index:t.index})]})})},MOe=t=>{const e=mt(),[r,n]=x.useState(!1),s=t.tableHandleMenu||AOe,a=x.useMemo(()=>{const i=t.editor.tableHandles;return!i||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?i.getCellsAtColumnHandle(t.block,t.index).every(({cell:l})=>Ah(l)===1):i.getCellsAtRowHandle(t.block,t.index).every(({cell:l})=>bx(l)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return o.jsxs(e.Generic.Menu.Root,{onOpenChange:i=>{i?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[o.jsx(e.Generic.Menu.Trigger,{children:o.jsx(e.TableHandle.Root,{className:Dr("bn-table-handle",r?"bn-table-handle-dragging":"",a?"":"bn-table-handle-not-draggable"),draggable:a,onDragStart:i=>{n(!0),t.dragStart(i)},onDragEnd:()=>{t.dragEnd(),n(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||o.jsx(Zq,{size:24,"data-test":"tableHandle"})})}),Va.createPortal(o.jsx(s,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function SI(t,e,r){const{refs:n,update:s,context:a,floatingStyles:i}=Np({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[Kk({apply({rects:d,elements:u}){Object.assign(u.floating.style,t==="addOrRemoveColumns"?{height:`${d.reference.height}px`}:{width:`${d.reference.width}px`})}})]}),{isMounted:l,styles:c}=XT(a);return x.useEffect(()=>{s()},[r,s]),x.useEffect(()=>{r!==null&&n.setReference({getBoundingClientRect:()=>r})},[t,r,n]),x.useMemo(()=>({isMounted:l,ref:n.setFloating,style:{display:"flex",...c,...i}}),[i,l,n.setFloating,c])}function OOe(t,e,r){const n=SI("addOrRemoveRows",e,r),s=SI("addOrRemoveColumns",t,r);return x.useMemo(()=>({addOrRemoveRowsButton:n,addOrRemoveColumnsButton:s}),[s,n])}function ROe(t,e,r){return r&&r.draggedCellOrientation==="row"?new DOMRect(e.x,r.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function POe(t,e,r){return r&&r.draggedCellOrientation==="col"?new DOMRect(r.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function IOe(t){return new DOMRect(t.x,t.y,t.width,0)}function lS(t,e,r,n,s){const{refs:a,update:i,context:l,floatingStyles:c}=Np({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[sl(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:d,styles:u}=XT(l);return x.useEffect(()=>{i()},[r,n,i]),x.useEffect(()=>{r===null||n===null||s&&t==="cell"||a.setReference({getBoundingClientRect:()=>(t==="row"?ROe:t==="col"?POe:IOe)(r,n,s)})},[s,t,r,n,a]),x.useMemo(()=>({isMounted:d,ref:a.setFloating,style:{display:"flex",...u,...c}}),[c,d,a.setFloating,u])}function DOe(t,e,r,n){const s=lS("row",t,e,r,n),a=lS("col",t,e,r,n),i=lS("cell",t,e,r,n);return x.useMemo(()=>({rowHandle:s,colHandle:a,cellHandle:i}),[a,s,i])}const LOe=t=>{var e,r;const n=mt(),s=jt(),a=xt(),i=(c,d)=>{const u=t.block.content.rows.map(h=>({...h,cells:h.cells.map(f=>Hd(f))}));d==="text"?u[t.rowIndex].cells[t.colIndex].props.textColor=c:u[t.rowIndex].cells[t.colIndex].props.backgroundColor=c,a.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:u}}),a.setTextCursorPosition(t.block)},l=(r=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:r[t.colIndex];return!l||a.settings.tables.cellTextColor===!1&&a.settings.tables.cellBackgroundColor===!1?null:o.jsxs(n.Generic.Menu.Root,{position:"right",sub:!0,children:[o.jsx(n.Generic.Menu.Trigger,{sub:!0,children:o.jsx(n.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||s.drag_handle.colors_menuitem})}),o.jsx(n.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:o.jsx(_2,{iconSize:18,text:a.settings.tables.cellTextColor?{color:Wd(l)?l.props.textColor:"default",setColor:c=>i(c,"text")}:void 0,background:a.settings.tables.cellBackgroundColor?{color:Wd(l)?l.props.backgroundColor:"default",setColor:c=>i(c,"background")}:void 0})})]})},$Oe=t=>{var e,r;const n=mt(),s=jt(),a=xt(),i=(r=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:r[t.colIndex];return!i||!Wd(i)||bx(i)===1&&Ah(i)===1||!a.settings.tables.splitCells?null:o.jsx(n.Generic.Menu.Item,{onClick:()=>{var l;(l=a.tableHandles)==null||l.splitCell({row:t.rowIndex,col:t.colIndex})},children:s.table_handle.split_cell_menuitem})},FOe=t=>{const e=mt();return o.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-table-handle-menu",children:t.children||o.jsxs(o.Fragment,{children:[o.jsx($Oe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),o.jsx(LOe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},BOe=t=>{const e=mt(),r=t.tableCellMenu||FOe;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:o.jsxs(e.Generic.Menu.Root,{onOpenChange:n=>{n?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[o.jsx(e.Generic.Menu.Trigger,{children:o.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||o.jsx(rOe,{size:12,"data-test":"tableCellHandle"})})}),Va.createPortal(o.jsx(r,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},zOe=t=>{var e,r;const n=xt(),[s,a]=x.useState(null);if(!n.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:n.tableHandles.rowDragStart,colDragStart:n.tableHandles.colDragStart,dragEnd:n.tableHandles.dragEnd,freezeHandles:n.tableHandles.freezeHandles,unfreezeHandles:n.tableHandles.unfreezeHandles},{freezeHandles:l,unfreezeHandles:c}=i,d=x.useCallback(()=>{l(),N(!0),w(!0)},[l]),u=x.useCallback(()=>{c(),N(!1),w(!1)},[c]),h=pc(n.tableHandles.onUpdate.bind(n.tableHandles)),f=x.useMemo(()=>{var T,R;return h!=null&&h.draggingState?{draggedCellOrientation:(T=h==null?void 0:h.draggingState)==null?void 0:T.draggedCellOrientation,mousePos:(R=h==null?void 0:h.draggingState)==null?void 0:R.mousePos}:void 0},[h==null?void 0:h.draggingState,(e=h==null?void 0:h.draggingState)==null?void 0:e.draggedCellOrientation,(r=h==null?void 0:h.draggingState)==null?void 0:r.mousePos]),{rowHandle:m,colHandle:p,cellHandle:g}=DOe((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePosCell)||null,(h==null?void 0:h.referencePosTable)||null,f),{addOrRemoveColumnsButton:y,addOrRemoveRowsButton:b}=OOe((h==null?void 0:h.showAddOrRemoveColumnsButton)||!1,(h==null?void 0:h.showAddOrRemoveRowsButton)||!1,(h==null?void 0:h.referencePosTable)||null),[v,w]=x.useState(!1),[k,N]=x.useState(!1);if(!h)return null;const S=t.tableHandle||MOe,C=t.extendButton||SOe,E=t.tableCellHandle||BOe;return o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:a}),o.jsxs(Rbe,{root:h.widgetContainer,children:[!v&&s&&m.isMounted&&h.rowIndex!==void 0&&o.jsx("div",{ref:m.ref,style:m.style,children:o.jsx(S,{editor:n,orientation:"row",showOtherSide:()=>N(!1),hideOtherSide:()=>N(!0),index:h.rowIndex,block:h.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:s})}),!k&&s&&p.isMounted&&h.colIndex!==void 0&&o.jsx("div",{ref:p.ref,style:p.style,children:o.jsx(S,{editor:n,orientation:"column",showOtherSide:()=>w(!1),hideOtherSide:()=>w(!0),index:h.colIndex,block:h.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:s})}),s&&g.isMounted&&h.colIndex!==void 0&&h.rowIndex!==void 0&&o.jsx("div",{ref:g.ref,style:g.style,children:o.jsx(E,{editor:n,block:h.block,rowIndex:h.rowIndex,colIndex:h.colIndex,menuContainer:s,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles})}),o.jsx("div",{ref:b.ref,style:b.style,children:o.jsx(C,{editor:n,orientation:"addOrRemoveRows",block:h.block,onMouseDown:d,onMouseUp:u})}),o.jsx("div",{ref:y.ref,style:y.style,children:o.jsx(C,{editor:n,orientation:"addOrRemoveColumns",block:h.block,onMouseDown:d,onMouseUp:u})})]})]})};function UOe(t){const e=xt();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return o.jsxs(o.Fragment,{children:[t.formattingToolbar!==!1&&o.jsx(Kq,{}),t.linkToolbar!==!1&&o.jsx(QMe,{}),t.slashMenu!==!1&&o.jsx(COe,{triggerCharacter:"/"}),t.emojiPicker!==!1&&o.jsx(pOe,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&o.jsx(dOe,{}),e.filePanel&&t.filePanel!==!1&&o.jsx(TMe,{}),e.tableHandles&&t.tableHandles!==!1&&o.jsx(zOe,{}),e.comments&&t.comments!==!1&&o.jsxs(o.Fragment,{children:[o.jsx(P6e,{}),o.jsx(SMe,{})]})]})}const Jq=()=>{const t=x.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=x.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),r=t==null?void 0:t.matches,n=e==null?void 0:e.matches,[s,a]=x.useState(r?"dark":n?"light":"no-preference");return x.useEffect(()=>{a(r?"dark":n?"light":"no-preference")},[r,n]),x.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:c})=>c&&a("dark"),l=({matches:c})=>c&&a("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",l),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",l)}}else{const i=()=>a(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),s},Qq=x.createContext(void 0);function VOe(){return x.useContext(Qq)}function HOe(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:Va.createPortal(n.reactElement,n.element,r)},t.forEach(s=>s())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(s=>s())}}}const WOe=({contentComponent:t})=>{const e=x.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return o.jsx(o.Fragment,{children:Object.values(e)})},qOe=x.forwardRef((t,e)=>{const[r,n]=x.useState();return x.useImperativeHandle(e,()=>(s,a)=>{Va.flushSync(()=>{n({node:s,container:a})}),n(void 0)},[]),o.jsx(o.Fragment,{children:r&&Va.createPortal(r.node,r.container)})}),EI=()=>{};function GOe(t,e){const{editor:r,className:n,theme:s,children:a,editable:i,onSelectionChange:l,onChange:c,formattingToolbar:d,linkToolbar:u,slashMenu:h,emojiPicker:f,sideMenu:m,filePanel:p,tableHandles:g,comments:y,autoFocus:b,renderEditor:v=!r.headless,...w}=t,[k,N]=x.useState(),S=yo(),C=Jq(),E=(S==null?void 0:S.colorSchemePreference)||C,T=s||(E==="dark"?"dark":"light");N_(c||EI,r),C_(l||EI,r),x.useEffect(()=>{r.isEditable=i!==!1},[i,r]);const R=x.useCallback(L=>{r.elementRenderer=L},[r]),B=x.useMemo(()=>({...S,editor:r,setContentEditableProps:N,colorSchemePreference:T}),[S,r,T]),M=x.useMemo(()=>({editorProps:{autoFocus:b,contentEditableProps:k},defaultUIProps:{formattingToolbar:d,linkToolbar:u,slashMenu:h,emojiPicker:f,sideMenu:m,filePanel:p,tableHandles:g,comments:y}}),[b,k,d,u,h,f,m,p,g,y]);return o.jsx(jq.Provider,{value:B,children:o.jsxs(Qq.Provider,{value:M,children:[o.jsx(qOe,{ref:R}),o.jsx(KOe,{className:n,renderEditor:v,editable:i,editorColorScheme:T,ref:e,...w,children:a})]})})}const KOe=st.forwardRef(({className:t,renderEditor:e,editable:r,editorColorScheme:n,children:s,...a},i)=>o.jsx("div",{className:Dr("bn-container",n,t),"data-color-scheme":n,...a,ref:i,children:e?o.jsx(YOe,{editable:r,children:s}):s})),ZOe=st.forwardRef(GOe),YOe=t=>{const e=VOe(),r=xt(),n=x.useMemo(()=>HOe(),[]),s=x.useCallback(a=>{t.editable!==void 0&&t.editable!==r.isEditable&&(r.isEditable=t.editable),r.mount(a,n)},[r,n,t.editable]);return o.jsxs(o.Fragment,{children:[o.jsx(WOe,{contentComponent:n}),o.jsx(XOe,{...e.editorProps,...t,mount:s}),o.jsx(UOe,{...e.defaultUIProps}),t.children]})},XOe=t=>{const{autoFocus:e,mount:r,contentEditableProps:n}=t;return o.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:r,...n})};function jI(t,e){let r;const n=document.createElement("div");let s;if(e!=null&&e.elementRenderer)e.elementRenderer(t(c=>r=c||void 0),n);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");s=g9(n),Va.flushSync(()=>{s.render(t(c=>r=c||void 0))})}if(!n.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};r==null||r.setAttribute("data-tmp-find","true");const a=n.cloneNode(!0),i=a.firstElementChild,l=a.querySelector("[data-tmp-find]");return l==null||l.removeAttribute("data-tmp-find"),s==null||s.unmount(),{dom:i,contentDOM:l||void 0}}function cS(t){var e;return o.jsx(k6e,{onDragOver:r=>r.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([r])=>r!=="class")),className:Dr("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([r,n])=>{const s=t.propSchema[r];return!a_.includes(r)&&n!==s.default}).map(([r,n])=>[Pw(r),n])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function A2(t,e){const r=ri({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return dy(t.propSchema)},parseHTML(){return CW(t,e.parse)},renderHTML({HTMLAttributes:n}){const s=document.createElement("div");return P0({dom:s,contentDOM:t.content==="inline"?s:void 0},t.type,{},t.propSchema,t.isFileBlock,n)},addNodeView(){return n=>{const s=T6e(a=>{var i;const l=this.options.editor,c=v2(a.getPos,l,this.editor,t.type),d=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},u=Eq().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");const h=e.render;return o.jsx(cS,{blockType:c.type,blockProps:c.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:d,children:o.jsx(h,{block:c,editor:l,contentRef:f=>{u(f),f&&(f.className=Dr("bn-inline-content",f.className),f.dataset.nodeViewContent="")}})})},{className:"bn-react-node-view-renderer"})(n);return t.isSelectable===!1&&kW(s,this.editor),s}}});return i_(t,{node:r,toInternalHTML:(n,s)=>{var a;const i=((a=r.options.domAttributes)==null?void 0:a.blockContent)||{},l=e.render;return jI(c=>o.jsx(cS,{blockType:n.type,blockProps:n.props,propSchema:t.propSchema,domAttributes:i,children:o.jsx(l,{block:n,editor:s,contentRef:d=>{c(d),d&&(d.className=Dr("bn-inline-content",d.className))}})}),s)},toExternalHTML:(n,s)=>{var a;const i=((a=r.options.domAttributes)==null?void 0:a.blockContent)||{},l=e.toExternalHTML||e.render;return jI(c=>o.jsx(cS,{blockType:n.type,blockProps:n.props,propSchema:t.propSchema,domAttributes:i,children:o.jsx(l,{block:n,editor:s,contentRef:d=>{c(d),d&&(d.className=Dr("bn-inline-content",d.className))}})}),s)}})}function M_(t){const e=xt(),[r,n]=x.useState("loading"),[s,a]=x.useState();if(x.useEffect(()=>{let i=!0;return(async()=>{let l="";n("loading");try{l=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{n("error");return}i&&(n("loaded"),a(l))})(),()=>{i=!1}},[e,t]),r!=="loaded")return{loadingState:r};if(!s)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:r,downloadUrl:s}}const O_=t=>o.jsxs("figure",{children:[t.children,o.jsx("figcaption",{children:t.caption})]});function JOe(t){const e=xt();x.useEffect(()=>e.onUploadEnd(t),[t,e])}function QOe(t){const e=xt();x.useEffect(()=>e.onUploadStart(t),[t,e])}function eG(t){const[e,r]=x.useState(!1);return QOe(n=>{n===t&&r(!0)}),JOe(n=>{n===t&&r(!1)}),e}const eRe=t=>{const e=jt(),r=x.useCallback(s=>{s.preventDefault()},[]),n=x.useCallback(()=>{t.editor.transact(s=>s.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return o.jsxs("div",{className:"bn-add-file-button",onMouseDown:r,onClick:n,children:[o.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||o.jsx(j_,{size:24})}),o.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},tRe=t=>o.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[o.jsx("div",{className:"bn-file-icon",children:o.jsx(j_,{size:24})}),o.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),R_=t=>{const e=eG(t.block.id);return o.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?o.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?o.jsx(eRe,{...t}):o.jsxs(o.Fragment,{children:[t.block.props.showPreview===!1||!t.children?o.jsx(tRe,{...t}):t.children,t.block.props.caption&&o.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},M2=t=>o.jsxs("div",{children:[t.children,o.jsx("p",{children:t.caption})]}),rRe=t=>{const e=M_(t.block.props.url);return o.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},nRe=t=>{if(!t.block.props.url)return o.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?o.jsx("audio",{src:t.block.props.url}):o.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?o.jsx(O_,{caption:t.block.props.caption,children:e}):o.jsx(M2,{caption:t.block.props.caption,children:e}):e},sRe=t=>o.jsx(R_,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:o.jsx(Uq,{size:24}),children:o.jsx(rRe,{...t})});A2(FW,{render:sRe,parse:BW,toExternalHTML:nRe});const aRe=t=>{if(!t.block.props.url)return o.jsx("p",{children:"Add file"});const e=o.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?o.jsx(M2,{caption:t.block.props.caption,children:e}):e},iRe=t=>o.jsx(R_,{...t});A2(zW,{render:iRe,parse:UW,toExternalHTML:aRe});const tG=t=>{const[e,r]=x.useState(void 0),[n,s]=x.useState(t.block.props.previewWidth),[a,i]=x.useState(!1),l=x.useRef(null);x.useEffect(()=>{const m=g=>{var y,b;let v;t.block.props.textAlignment==="center"?e.handleUsed==="left"?v=e.initialWidth+(e.initialClientX-g.clientX)*2:v=e.initialWidth+(g.clientX-e.initialClientX)*2:e.handleUsed==="left"?v=e.initialWidth+e.initialClientX-g.clientX:v=e.initialWidth+g.clientX-e.initialClientX,s(Math.min(Math.max(v,64),((b=(y=t.editor.domElement)==null?void 0:y.firstElementChild)==null?void 0:b.clientWidth)||Number.MAX_VALUE))},p=()=>{r(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:n}})};return e&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",p)),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",p)}},[t,e,n]);const c=x.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),d=x.useCallback(()=>{i(!1)},[]),u=x.useCallback(m=>{m.preventDefault(),r({handleUsed:"left",initialWidth:l.current.clientWidth,initialClientX:m.clientX})},[]),h=x.useCallback(m=>{m.preventDefault(),r({handleUsed:"right",initialWidth:l.current.clientWidth,initialClientX:m.clientX})},[]),f=eG(t.block.id);return o.jsx(R_,{...t,onMouseEnter:c,onMouseLeave:d,style:t.block.props.url&&!f&&t.block.props.showPreview?{width:n?`${n}px`:"fit-content"}:void 0,children:o.jsxs("div",{className:"bn-visual-media-wrapper",style:{position:"relative"},ref:l,children:[t.children,(a||e)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:u}),o.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:h})]}),e&&o.jsx("div",{style:{position:"absolute",height:"100%",width:"100%"}})]})})},oRe=t=>{const e=M_(t.block.props.url);return o.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},lRe=t=>{if(!t.block.props.url)return o.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?o.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):o.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?o.jsx(O_,{caption:t.block.props.caption,children:e}):o.jsx(M2,{caption:t.block.props.caption,children:e}):e},cRe=t=>o.jsx(tG,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:o.jsx(Bq,{size:24}),children:o.jsx(oRe,{...t})});A2(qW,{render:cRe,parse:GW,toExternalHTML:lRe});const dRe=t=>{const e=M_(t.block.props.url);return o.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},uRe=t=>{if(!t.block.props.url)return o.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?o.jsx("video",{src:t.block.props.url}):o.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?o.jsx(O_,{caption:t.block.props.caption,children:e}):o.jsx(M2,{caption:t.block.props.caption,children:e}):e},hRe=t=>o.jsx(tG,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:o.jsx(cMe,{size:24}),children:o.jsx(dRe,{...t})});A2(XW,{render:hRe,parse:JW,toExternalHTML:uRe});st.memo(({thread:t,selectedThreadId:e,editor:r,maxCommentsBeforeCollapse:n,referenceText:s})=>{const a=x.useCallback(l=>{var c;l.target.closest(".bn-action-toolbar")||(c=r.comments)==null||c.selectThread(t.id)},[r.comments,t.id]),i=x.useCallback(l=>{var c;if(!l.relatedTarget||l.relatedTarget.closest(".bn-action-toolbar"))return;const d=l.target instanceof Node?l.target:null,u=l.relatedTarget instanceof Node?l.relatedTarget.closest(".bn-thread"):null;(!d||!u||!u.contains(d))&&((c=r.comments)==null||c.selectThread(void 0))},[r.comments]);return o.jsx(Vq,{thread:t,selected:t.id===e,referenceText:s,maxCommentsBeforeCollapse:n,onFocus:a,onBlur:i,tabIndex:0})});function rG(t,e){const r=t.getBoundingClientRect(),n=e.getBoundingClientRect(),s=r.top<n.top,a=r.bottom>n.bottom;return s&&a?"both":s?"top":a?"bottom":"none"}function Go(t){return Object.keys(t)}function dS(t){return t&&typeof t=="object"&&!Array.isArray(t)}function P_(t,e){const r={...t},n=e;return dS(t)&&dS(e)&&Object.keys(e).forEach(s=>{dS(n[s])&&s in t?r[s]=P_(r[s],n[s]):r[s]=n[s]}),r}function fRe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function mRe(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function pRe(t){const e=mRe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function uS(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function nG(t,{shouldScale:e=!1}={}){function r(n){if(n===0||n==="0")return`0${t}`;if(typeof n=="number"){const s=`${n/16}${t}`;return e?uS(s):s}if(typeof n=="string"){if(n===""||n.startsWith("calc(")||n.startsWith("clamp(")||n.includes("rgba("))return n;if(n.includes(","))return n.split(",").map(a=>r(a)).join(",");if(n.includes(" "))return n.split(" ").map(a=>r(a)).join(" ");if(n.includes(t))return e?uS(n):n;const s=n.replace("px","");if(!Number.isNaN(Number(s))){const a=`${Number(s)/16}${t}`;return e?uS(a):a}}return n}return r}const Oe=nG("rem",{shouldScale:!0}),TI=nG("em");function O2(t){return Object.keys(t).reduce((e,r)=>(t[r]!==void 0&&(e[r]=t[r]),e),{})}function sG(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(n=>e.test(n))}return!1}function gy(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==x.Fragment:!1}function R2(t){const e=x.createContext(null);return[({children:s,value:a})=>o.jsx(e.Provider,{value:a,children:s}),()=>{const s=x.useContext(e);if(s===null)throw new Error(t);return s}]}function I_(t=null){const e=x.createContext(t);return[({children:s,value:a})=>o.jsx(e.Provider,{value:a,children:s}),()=>x.useContext(e)]}function _I(t,e){return r=>{if(typeof r!="string"||r.trim().length===0)throw new Error(e);return`${t}-${r}`}}function Bw(t,e){let r=t;for(;(r=r.parentElement)&&!r.matches(e););return r}function gRe(t,e,r){for(let n=t-1;n>=0;n-=1)if(!e[n].disabled)return n;if(r){for(let n=e.length-1;n>-1;n-=1)if(!e[n].disabled)return n}return t}function xRe(t,e,r){for(let n=t+1;n<e.length;n+=1)if(!e[n].disabled)return n;if(r){for(let n=0;n<e.length;n+=1)if(!e[n].disabled)return n}return t}function yRe(t,e,r){return Bw(t,r)===Bw(e,r)}function aG({parentSelector:t,siblingSelector:e,onKeyDown:r,loop:n=!0,activateOnFocus:s=!1,dir:a="rtl",orientation:i}){return l=>{var p;r==null||r(l);const c=Array.from(((p=Bw(l.currentTarget,t))==null?void 0:p.querySelectorAll(e))||[]).filter(g=>yRe(l.currentTarget,g,t)),d=c.findIndex(g=>l.currentTarget===g),u=xRe(d,c,n),h=gRe(d,c,n),f=a==="rtl"?h:u,m=a==="rtl"?u:h;switch(l.key){case"ArrowRight":{i==="horizontal"&&(l.stopPropagation(),l.preventDefault(),c[f].focus(),s&&c[f].click());break}case"ArrowLeft":{i==="horizontal"&&(l.stopPropagation(),l.preventDefault(),c[m].focus(),s&&c[m].click());break}case"ArrowUp":{i==="vertical"&&(l.stopPropagation(),l.preventDefault(),c[h].focus(),s&&c[h].click());break}case"ArrowDown":{i==="vertical"&&(l.stopPropagation(),l.preventDefault(),c[u].focus(),s&&c[u].click());break}case"Home":{l.stopPropagation(),l.preventDefault(),!c[0].disabled&&c[0].focus();break}case"End":{l.stopPropagation(),l.preventDefault();const g=c.length-1;!c[g].disabled&&c[g].focus();break}}}}const vRe={app:100,modal:200,popover:300,overlay:400,max:9999};function xy(t){return vRe[t]}const bRe=()=>{};function wRe(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||bRe:r=>{var n;r.key==="Escape"&&(t(r),(n=e.onTrigger)==null||n.call(e))}}function Pr(t,e="size",r=!0){if(t!==void 0)return sG(t)?r?Oe(t):t:`var(--${e}-${t})`}function yy(t){return Pr(t,"mantine-spacing")}function Ds(t){return t===void 0?"var(--mantine-radius-default)":Pr(t,"mantine-radius")}function ba(t){return Pr(t,"mantine-font-size")}function kRe(t){return Pr(t,"mantine-line-height",!1)}function iG(t){if(t)return Pr(t,"mantine-shadow",!1)}function Bo(t,e){return r=>{t==null||t(r),e==null||e(r)}}function CRe(t,e,r){var n;return r?Array.from(((n=Bw(r,e))==null?void 0:n.querySelectorAll(t))||[]).findIndex(s=>s===r):null}function NRe(){const[t,e]=x.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function SRe(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const AI=["mousedown","touchstart"];function ERe(t,e,r){const n=x.useRef(null);return x.useEffect(()=>{const s=a=>{const{target:i}=a??{};if(Array.isArray(r)){const l=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";r.every(d=>!!d&&!a.composedPath().includes(d))&&!l&&t()}else n.current&&!n.current.contains(i)&&t()};return(e||AI).forEach(a=>document.addEventListener(a,s)),()=>{(e||AI).forEach(a=>document.removeEventListener(a,s))}},[n,t,r]),n}function jRe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function TRe(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function _Re(t,e,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,s]=x.useState(r?e:TRe(t)),a=x.useRef(null);return x.useEffect(()=>{if("matchMedia"in window)return a.current=window.matchMedia(t),s(a.current.matches),jRe(a.current,i=>s(i.matches))},[t]),n}const P2=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Gd(t,e){const r=x.useRef(!1);x.useEffect(()=>()=>{r.current=!1},[]),x.useEffect(()=>{if(r.current)return t();r.current=!0},e)}function ARe({opened:t,shouldReturnFocus:e=!0}){const r=x.useRef(null),n=()=>{var s;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((s=r.current)==null||s.focus({preventScroll:!0}))};return Gd(()=>{let s=-1;const a=i=>{i.key==="Tab"&&window.clearTimeout(s)};return document.addEventListener("keydown",a),t?r.current=document.activeElement:e&&(s=window.setTimeout(n,10)),()=>{window.clearTimeout(s),document.removeEventListener("keydown",a)}},[t,e]),n}const MRe=/input|select|textarea|button|object/,oG="a, input, select, textarea, button, object, [tabindex]";function ORe(t){return t.style.display==="none"}function RRe(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let r=t;for(;r&&!(r===document.body||r.nodeType===11);){if(ORe(r))return!1;r=r.parentNode}return!0}function lG(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function I4(t){const e=t.nodeName.toLowerCase(),r=!Number.isNaN(lG(t));return(MRe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||r)&&RRe(t)}function cG(t){const e=lG(t);return(Number.isNaN(e)||e>=0)&&I4(t)}function PRe(t){return Array.from(t.querySelectorAll(oG)).filter(cG)}function IRe(t,e){const r=PRe(t);if(!r.length){e.preventDefault();return}const n=r[e.shiftKey?0:r.length-1],s=t.getRootNode();let a=n===s.activeElement||t===s.activeElement;const i=s.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(a=r.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===i.getAttribute("name")).includes(n)),!a)return;e.preventDefault();const c=r[e.shiftKey?r.length-1:0];c&&c.focus()}function dG(t=!0){const e=x.useRef(null),r=s=>{let a=s.querySelector("[data-autofocus]");if(!a){const i=Array.from(s.querySelectorAll(oG));a=i.find(cG)||i.find(I4)||null,!a&&I4(s)&&(a=s)}a&&a.focus({preventScroll:!0})},n=x.useCallback(s=>{t&&s!==null&&e.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),e.current=s):e.current=null)},[t]);return x.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>r(e.current));const s=a=>{a.key==="Tab"&&e.current&&IRe(e.current,a)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t]),n}const DRe=st.useId||(()=>{});function LRe(){const t=DRe();return t?`mantine-${t.replace(/:/g,"")}`:""}function vy(t){const e=LRe(),[r,n]=x.useState(e);return P2(()=>{n(SRe())},[]),typeof t=="string"?t:typeof window>"u"?e:r}function zw(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function by(...t){const e=new Map;return r=>{if(t.forEach(n=>{const s=zw(n,r);s&&e.set(n,s)}),e.size>0)return()=>{t.forEach(n=>{const s=e.get(n);s?s():zw(n,null)}),e.clear()}}}function gc(...t){return x.useCallback(by(...t),t)}function Rp({value:t,defaultValue:e,finalValue:r,onChange:n=()=>{}}){const[s,a]=x.useState(e!==void 0?e:r),i=(l,...c)=>{a(l),n==null||n(l,...c)};return t!==void 0?[t,n,!0]:[s,i,!1]}function $Re(t,e){return _Re("(prefers-reduced-motion: reduce)",t,e)}function FRe(){const[t,e]=x.useState(!1),r=x.useRef(null),n=x.useCallback(()=>e(!0),[]),s=x.useCallback(()=>e(!1),[]);return x.useEffect(()=>{const a=r.current;if(a)return a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",s),()=>{a==null||a.removeEventListener("mouseenter",n),a==null||a.removeEventListener("mouseleave",s)}},[r.current]),{ref:r,hovered:t}}function BRe(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function uG({onBlur:t,onFocus:e}={}){const r=x.useRef(null),[n,s]=x.useState(!1),a=x.useRef(!1),i=d=>{s(d),a.current=d},l=d=>{a.current||(i(!0),e==null||e(d))},c=d=>{a.current&&!BRe(d)&&(i(!1),t==null||t(d))};return x.useEffect(()=>{const d=r.current;if(d)return d.addEventListener("focusin",l),d.addEventListener("focusout",c),()=>{d==null||d.removeEventListener("focusin",l),d==null||d.removeEventListener("focusout",c)}},[l,c]),{ref:r,focused:n}}function D_(t){var r;const e=st.version;return typeof st.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(r=t==null?void 0:t.props)==null?void 0:r.ref}const zRe={};function URe(t){const e={};return t.forEach(r=>{Object.entries(r).forEach(([n,s])=>{e[n]?e[n]=rl(e[n],s):e[n]=s})}),e}function I2({theme:t,classNames:e,props:r,stylesCtx:n}){const a=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,r,n):i||zRe);return URe(a)}function Uw({theme:t,styles:e,props:r,stylesCtx:n}){return(Array.isArray(e)?e:[e]).reduce((a,i)=>typeof i=="function"?{...a,...i(t,r,n)}:{...a,...i},{})}const hG=x.createContext(null);function ou(){const t=x.useContext(hG);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function VRe(){return ou().cssVariablesResolver}function HRe(){return ou().classNamesPrefix}function L_(){return ou().getStyleNonce}function WRe(){return ou().withStaticClasses}function qRe(){return ou().headless}function GRe(){var t;return(t=ou().stylesTransform)==null?void 0:t.sx}function KRe(){var t;return(t=ou().stylesTransform)==null?void 0:t.styles}function fG(){return ou().env||"default"}function ZRe(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function YRe(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const r=parseInt(e,16),n=r>>16&255,s=r>>8&255,a=r&255;return{r:n,g:s,b:a,a:1}}function XRe(t){const[e,r,n,s]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:r,b:n,a:s===void 0?1:s}}function JRe(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=t.match(e);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),s=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,i=r[5]?parseFloat(r[5]):void 0,l=(1-Math.abs(2*a-1))*s,c=n/60,d=l*(1-Math.abs(c%2-1)),u=a-l/2;let h,f,m;return c>=0&&c<1?(h=l,f=d,m=0):c>=1&&c<2?(h=d,f=l,m=0):c>=2&&c<3?(h=0,f=l,m=d):c>=3&&c<4?(h=0,f=d,m=l):c>=4&&c<5?(h=d,f=0,m=l):(h=l,f=0,m=d),{r:Math.round((h+u)*255),g:Math.round((f+u)*255),b:Math.round((m+u)*255),a:i||1}}function $_(t){return ZRe(t)?YRe(t):t.startsWith("rgb")?XRe(t):t.startsWith("hsl")?JRe(t):{r:0,g:0,b:0,a:1}}function O1(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r,g:n,b:s,a}=$_(t),i=1-e,l=c=>Math.round(c*i);return`rgba(${l(r)}, ${l(n)}, ${l(s)}, ${a})`}function kx(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function hS(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function QRe(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function e8e(t){if(t.startsWith("oklch("))return(QRe(t)||0)/100;const{r:e,g:r,b:n}=$_(t),s=e/255,a=r/255,i=n/255,l=hS(s),c=hS(a),d=hS(i);return .2126*l+.7152*c+.0722*d}function y0(t,e=.179){return t.startsWith("var(")?!1:e8e(t)>e}function Pp({color:t,theme:e,colorScheme:r}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:r==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:y0(r==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:r==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:y0(r==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:y0(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[n,s]=t.split("."),a=s?Number(s):void 0,i=n in e.colors;if(i){const l=a!==void 0?e.colors[n][a]:e.colors[n][kx(e,r||"light")];return{color:n,value:l,shade:a,isThemeColor:i,isLight:y0(l,e.luminanceThreshold),variable:s?`--mantine-color-${n}-${a}`:`--mantine-color-${n}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:y0(t,e.luminanceThreshold),shade:a,variable:void 0}}function Jo(t,e){const r=Pp({color:t||e.primaryColor,theme:e});return r.variable?`var(${r.variable})`:t}function D4(t,e){const r={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)??e.defaultGradient.deg??0},n=Jo(r.from,e),s=Jo(r.to,e);return`linear-gradient(${r.deg}deg, ${n} 0%, ${s} 100%)`}function _o(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${a}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r,g:n,b:s}=$_(t);return`rgba(${r}, ${n}, ${s}, ${e})`}const df=_o,t8e=({color:t,theme:e,variant:r,gradient:n,autoContrast:s})=>{const a=Pp({color:t,theme:e}),i=typeof s=="boolean"?s:e.autoContrast;if(r==="filled"){const l=i&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:l,border:`${Oe(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:l,border:`${Oe(1)} solid transparent`}:{background:t,hover:O1(t,.1),color:l,border:`${Oe(1)} solid transparent`}}if(r==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Oe(1)} solid transparent`};const l=e.colors[a.color][a.shade];return{background:_o(l,.1),hover:_o(l,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Oe(1)} solid transparent`}}return{background:_o(t,.1),hover:_o(t,.12),color:t,border:`${Oe(1)} solid transparent`}}if(r==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${Oe(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:_o(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Oe(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:_o(t,.05),color:t,border:`${Oe(1)} solid ${t}`};if(r==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Oe(1)} solid transparent`};const l=e.colors[a.color][a.shade];return{background:"transparent",hover:_o(l,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Oe(1)} solid transparent`}}return{background:"transparent",hover:_o(t,.12),color:t,border:`${Oe(1)} solid transparent`}}return r==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${Oe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Oe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${Oe(1)} solid transparent`}:r==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:O1(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${Oe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:O1(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Oe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:O1(e.white,.01),color:t,border:`${Oe(1)} solid transparent`}:r==="gradient"?{background:D4(n,e),hover:D4(n,e),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Oe(1)} solid var(--mantine-color-default-border)`}:{}},r8e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},MI="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",F_={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:r8e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:t8e,autoContrast:!1,luminanceThreshold:.3,fontFamily:MI,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:MI,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Oe(34),lineHeight:"1.3"},h2:{fontSize:Oe(26),lineHeight:"1.35"},h3:{fontSize:Oe(22),lineHeight:"1.4"},h4:{fontSize:Oe(18),lineHeight:"1.45"},h5:{fontSize:Oe(16),lineHeight:"1.5"},h6:{fontSize:Oe(14),lineHeight:"1.5"}}},fontSizes:{xs:Oe(12),sm:Oe(14),md:Oe(16),lg:Oe(18),xl:Oe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Oe(2),sm:Oe(4),md:Oe(8),lg:Oe(16),xl:Oe(32)},spacing:{xs:Oe(10),sm:Oe(12),md:Oe(16),lg:Oe(20),xl:Oe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), 0 ${Oe(1)} ${Oe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(10)} ${Oe(15)} ${Oe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Oe(7)} ${Oe(7)} ${Oe(-5)}`,md:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(20)} ${Oe(25)} ${Oe(-5)}, rgba(0, 0, 0, 0.04) 0 ${Oe(10)} ${Oe(10)} ${Oe(-5)}`,lg:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(28)} ${Oe(23)} ${Oe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Oe(12)} ${Oe(12)} ${Oe(-7)}`,xl:`0 ${Oe(1)} ${Oe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Oe(36)} ${Oe(28)} ${Oe(-7)}, rgba(0, 0, 0, 0.04) 0 ${Oe(17)} ${Oe(17)} ${Oe(-7)}`},other:{},components:{}};function OI(t){return t==="auto"||t==="dark"||t==="light"}function n8e({key:t="mantine-color-scheme-value"}={}){let e;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(t);return OI(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(t,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{e=n=>{n.storageArea===window.localStorage&&n.key===t&&OI(n.newValue)&&r(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const s8e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",RI="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function fS(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function PI(t){if(!(t.primaryColor in t.colors))throw new Error(s8e);if(typeof t.primaryShade=="object"&&(!fS(t.primaryShade.dark)||!fS(t.primaryShade.light)))throw new Error(RI);if(typeof t.primaryShade=="number"&&!fS(t.primaryShade))throw new Error(RI)}function a8e(t,e){var n;if(!e)return PI(t),t;const r=P_(t,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=e.fontFamily),PI(r),r}const B_=x.createContext(null),i8e=()=>x.useContext(B_)||F_;function ni(){const t=x.useContext(B_);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function mG({theme:t,children:e,inherit:r=!0}){const n=i8e(),s=x.useMemo(()=>a8e(r?n:F_,t),[t,n,r]);return o.jsx(B_.Provider,{value:s,children:e})}mG.displayName="@mantine/core/MantineThemeProvider";function o8e(){const t=ni(),e=L_(),r=Go(t.breakpoints).reduce((n,s)=>{const a=t.breakpoints[s].includes("px"),i=pRe(t.breakpoints[s]),l=a?`${i-.1}px`:TI(i-.1),c=a?`${i}px`:TI(i);return`${n}@media (max-width: ${l}) {.mantine-visible-from-${s} {display: none !important;}}@media (min-width: ${c}) {.mantine-hidden-from-${s} {display: none !important;}}`},"");return o.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:r}})}function mS(t){return Object.entries(t).map(([e,r])=>`${e}: ${r};`).join("")}function v0(t,e){return(Array.isArray(t)?t:[t]).reduce((n,s)=>`${s}{${n}}`,e)}function l8e(t,e){const r=mS(t.variables),n=r?v0(e,r):"",s=mS(t.dark),a=mS(t.light),i=s?v0(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,s):"",l=a?v0(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,a):"";return`${n}${i}${l}`}function pG({color:t,theme:e,autoContrast:r}){return(typeof r=="boolean"?r:e.autoContrast)&&Pp({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function II(t,e){return pG({color:t.colors[t.primaryColor][kx(t,e)],theme:t,autoContrast:null})}function R1({theme:t,color:e,colorScheme:r,name:n=e,withColorValues:s=!0}){if(!t.colors[e])return{};if(r==="light"){const l=kx(t,"light"),c={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-filled)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${l===9?8:l+1})`,[`--mantine-color-${n}-light`]:df(t.colors[e][l],.1),[`--mantine-color-${n}-light-hover`]:df(t.colors[e][l],.12),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${l})`,[`--mantine-color-${n}-outline-hover`]:df(t.colors[e][l],.05)};return s?{[`--mantine-color-${n}-0`]:t.colors[e][0],[`--mantine-color-${n}-1`]:t.colors[e][1],[`--mantine-color-${n}-2`]:t.colors[e][2],[`--mantine-color-${n}-3`]:t.colors[e][3],[`--mantine-color-${n}-4`]:t.colors[e][4],[`--mantine-color-${n}-5`]:t.colors[e][5],[`--mantine-color-${n}-6`]:t.colors[e][6],[`--mantine-color-${n}-7`]:t.colors[e][7],[`--mantine-color-${n}-8`]:t.colors[e][8],[`--mantine-color-${n}-9`]:t.colors[e][9],...c}:c}const a=kx(t,"dark"),i={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-4)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${a})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${a===9?8:a+1})`,[`--mantine-color-${n}-light`]:df(t.colors[e][Math.max(0,a-2)],.15),[`--mantine-color-${n}-light-hover`]:df(t.colors[e][Math.max(0,a-2)],.2),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${Math.max(a-5,0)})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${Math.max(a-4,0)})`,[`--mantine-color-${n}-outline-hover`]:df(t.colors[e][Math.max(a-4,0)],.05)};return s?{[`--mantine-color-${n}-0`]:t.colors[e][0],[`--mantine-color-${n}-1`]:t.colors[e][1],[`--mantine-color-${n}-2`]:t.colors[e][2],[`--mantine-color-${n}-3`]:t.colors[e][3],[`--mantine-color-${n}-4`]:t.colors[e][4],[`--mantine-color-${n}-5`]:t.colors[e][5],[`--mantine-color-${n}-6`]:t.colors[e][6],[`--mantine-color-${n}-7`]:t.colors[e][7],[`--mantine-color-${n}-8`]:t.colors[e][8],[`--mantine-color-${n}-9`]:t.colors[e][9],...i}:i}function c8e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function uf(t,e,r){Go(e).forEach(n=>Object.assign(t,{[`--mantine-${r}-${n}`]:e[n]}))}const gG=t=>{const e=kx(t,"light"),r=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:Oe(t.defaultRadius),n={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":r,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":II(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":II(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};uf(n.variables,t.breakpoints,"breakpoint"),uf(n.variables,t.spacing,"spacing"),uf(n.variables,t.fontSizes,"font-size"),uf(n.variables,t.lineHeights,"line-height"),uf(n.variables,t.shadows,"shadow"),uf(n.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((a,i)=>{n.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),Go(t.colors).forEach(a=>{const i=t.colors[a];if(c8e(i)){Object.assign(n.light,R1({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(n.dark,R1({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((l,c)=>{n.variables[`--mantine-color-${a}-${c}`]=l}),Object.assign(n.light,R1({theme:t,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(n.dark,R1({theme:t,color:a,colorScheme:"dark",withColorValues:!1}))});const s=t.headings.sizes;return Go(s).forEach(a=>{n.variables[`--mantine-${a}-font-size`]=s[a].fontSize,n.variables[`--mantine-${a}-line-height`]=s[a].lineHeight,n.variables[`--mantine-${a}-font-weight`]=s[a].fontWeight||t.headings.fontWeight}),n};function d8e({theme:t,generator:e}){const r=gG(t),n=e==null?void 0:e(t);return n?P_(r,n):r}const pS=gG(F_);function u8e(t){const e={variables:{},light:{},dark:{}};return Go(t.variables).forEach(r=>{pS.variables[r]!==t.variables[r]&&(e.variables[r]=t.variables[r])}),Go(t.light).forEach(r=>{pS.light[r]!==t.light[r]&&(e.light[r]=t.light[r])}),Go(t.dark).forEach(r=>{pS.dark[r]!==t.dark[r]&&(e.dark[r]=t.dark[r])}),e}function h8e(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function xG({cssVariablesSelector:t,deduplicateCssVariables:e}){const r=ni(),n=L_(),s=VRe(),a=d8e({theme:r,generator:s}),i=t===":root"&&e,l=i?u8e(a):a,c=l8e(l,t);return c?o.jsx("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${c}${i?"":h8e(t)}`}}):null}xG.displayName="@mantine/CssVariables";function f8e(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function hf(t,e){var s,a;const r=typeof window<"u"&&"matchMedia"in window&&((s=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:s.matches),n=t!=="auto"?t:r?"dark":"light";(a=e())==null||a.setAttribute("data-mantine-color-scheme",n)}function m8e({manager:t,defaultColorScheme:e,getRootElement:r,forceColorScheme:n}){const s=x.useRef(null),[a,i]=x.useState(()=>t.get(e)),l=n||a,c=x.useCallback(u=>{n||(hf(u,r),i(u),t.set(u))},[t.set,l,n]),d=x.useCallback(()=>{i(e),hf(e,r),t.clear()},[t.clear,e]);return x.useEffect(()=>(t.subscribe(c),t.unsubscribe),[t.subscribe,t.unsubscribe]),P2(()=>{hf(t.get(e),r)},[]),x.useEffect(()=>{var h;if(n)return hf(n,r),()=>{};n===void 0&&hf(a,r),typeof window<"u"&&"matchMedia"in window&&(s.current=window.matchMedia("(prefers-color-scheme: dark)"));const u=f=>{a==="auto"&&hf(f.matches?"dark":"light",r)};return(h=s.current)==null||h.addEventListener("change",u),()=>{var f;return(f=s.current)==null?void 0:f.removeEventListener("change",u)}},[a,n]),{colorScheme:l,setColorScheme:c,clearColorScheme:d}}function p8e({respectReducedMotion:t,getRootElement:e}){P2(()=>{var r;t&&((r=e())==null||r.setAttribute("data-respect-reduced-motion","true"))},[t])}f8e();function yG({theme:t,children:e,getStyleNonce:r,withStaticClasses:n=!0,withGlobalClasses:s=!0,deduplicateCssVariables:a=!0,withCssVariables:i=!0,cssVariablesSelector:l=":root",classNamesPrefix:c="mantine",colorSchemeManager:d=n8e(),defaultColorScheme:u="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:m,stylesTransform:p,env:g}){const{colorScheme:y,setColorScheme:b,clearColorScheme:v}=m8e({defaultColorScheme:u,forceColorScheme:m,manager:d,getRootElement:h});return p8e({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:h}),o.jsx(hG.Provider,{value:{colorScheme:y,setColorScheme:b,clearColorScheme:v,getRootElement:h,classNamesPrefix:c,getStyleNonce:r,cssVariablesResolver:f,cssVariablesSelector:l,withStaticClasses:n,stylesTransform:p,env:g},children:o.jsxs(mG,{theme:t,children:[i&&o.jsx(xG,{cssVariablesSelector:l,deduplicateCssVariables:a}),s&&o.jsx(o8e,{}),e]})})}yG.displayName="@mantine/core/MantineProvider";function D2({classNames:t,styles:e,props:r,stylesCtx:n}){const s=ni();return{resolvedClassNames:I2({theme:s,classNames:t,props:r,stylesCtx:n||void 0}),resolvedStyles:Uw({theme:s,styles:e,props:r,stylesCtx:n||void 0})}}const g8e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function x8e({theme:t,options:e,unstyled:r}){return rl((e==null?void 0:e.focusable)&&!r&&(t.focusClassName||g8e[t.focusRing]),(e==null?void 0:e.active)&&!r&&t.activeClassName)}function y8e({selector:t,stylesCtx:e,options:r,props:n,theme:s}){return I2({theme:s,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:e})[t]}function DI({selector:t,stylesCtx:e,theme:r,classNames:n,props:s}){return I2({theme:r,classNames:n,props:s,stylesCtx:e})[t]}function v8e({rootSelector:t,selector:e,className:r}){return t===e?r:void 0}function b8e({selector:t,classes:e,unstyled:r}){return r?void 0:e[t]}function w8e({themeName:t,classNamesPrefix:e,selector:r,withStaticClass:n}){return n===!1?[]:t.map(s=>`${e}-${s}-${r}`)}function k8e({themeName:t,theme:e,selector:r,props:n,stylesCtx:s}){return t.map(a=>{var i,l;return(l=I2({theme:e,classNames:(i=e.components[a])==null?void 0:i.classNames,props:n,stylesCtx:s}))==null?void 0:l[r]})}function C8e({options:t,classes:e,selector:r,unstyled:n}){return t!=null&&t.variant&&!n?e[`${r}--${t.variant}`]:void 0}function N8e({theme:t,options:e,themeName:r,selector:n,classNamesPrefix:s,classNames:a,classes:i,unstyled:l,className:c,rootSelector:d,props:u,stylesCtx:h,withStaticClasses:f,headless:m,transformedStyles:p}){return rl(x8e({theme:t,options:e,unstyled:l||m}),k8e({theme:t,themeName:r,selector:n,props:u,stylesCtx:h}),C8e({options:e,classes:i,selector:n,unstyled:l}),DI({selector:n,stylesCtx:h,theme:t,classNames:a,props:u}),DI({selector:n,stylesCtx:h,theme:t,classNames:p,props:u}),y8e({selector:n,stylesCtx:h,options:e,props:u,theme:t}),v8e({rootSelector:d,selector:n,className:c}),b8e({selector:n,classes:i,unstyled:l||m}),f&&!m&&w8e({themeName:r,classNamesPrefix:s,selector:n,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function S8e({theme:t,themeName:e,props:r,stylesCtx:n,selector:s}){return e.map(a=>{var i;return Uw({theme:t,styles:(i=t.components[a])==null?void 0:i.styles,props:r,stylesCtx:n})[s]}).reduce((a,i)=>({...a,...i}),{})}function L4({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...L4({style:n,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function E8e(t){return t.reduce((e,r)=>(r&&Object.keys(r).forEach(n=>{e[n]={...e[n],...O2(r[n])}}),e),{})}function j8e({vars:t,varsResolver:e,theme:r,props:n,stylesCtx:s,selector:a,themeName:i,headless:l}){var c;return(c=E8e([l?{}:e==null?void 0:e(r,n,s),...i.map(d=>{var u,h,f;return(f=(h=(u=r.components)==null?void 0:u[d])==null?void 0:h.vars)==null?void 0:f.call(h,r,n,s)}),t==null?void 0:t(r,n,s)]))==null?void 0:c[a]}function T8e({theme:t,themeName:e,selector:r,options:n,props:s,stylesCtx:a,rootSelector:i,styles:l,style:c,vars:d,varsResolver:u,headless:h,withStylesTransform:f}){return{...!f&&S8e({theme:t,themeName:e,props:s,stylesCtx:a,selector:r}),...!f&&Uw({theme:t,styles:l,props:s,stylesCtx:a})[r],...!f&&Uw({theme:t,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||s,stylesCtx:a})[r],...j8e({theme:t,props:s,stylesCtx:a,vars:d,varsResolver:u,selector:r,themeName:e,headless:h}),...i===r?L4({style:c,theme:t}):null,...L4({style:n==null?void 0:n.style,theme:t})}}function _8e({props:t,stylesCtx:e,themeName:r}){var i;const n=ni(),s=(i=KRe())==null?void 0:i();return{getTransformedStyles:l=>s?[...l.map(d=>s(d,{props:t,theme:n,ctx:e})),...r.map(d=>{var u;return s((u=n.components[d])==null?void 0:u.styles,{props:t,theme:n,ctx:e})})].filter(Boolean):[],withStylesTransform:!!s}}function qt({name:t,classes:e,props:r,stylesCtx:n,className:s,style:a,rootSelector:i="root",unstyled:l,classNames:c,styles:d,vars:u,varsResolver:h}){const f=ni(),m=HRe(),p=WRe(),g=qRe(),y=(Array.isArray(t)?t:[t]).filter(w=>w),{withStylesTransform:b,getTransformedStyles:v}=_8e({props:r,stylesCtx:n,themeName:y});return(w,k)=>({className:N8e({theme:f,options:k,themeName:y,selector:w,classNamesPrefix:m,classNames:c,classes:e,unstyled:l,className:s,rootSelector:i,props:r,stylesCtx:n,withStaticClasses:p,headless:g,transformedStyles:v([k==null?void 0:k.styles,d])}),style:T8e({theme:f,themeName:y,selector:w,options:k,props:r,stylesCtx:n,rootSelector:i,styles:d,style:a,vars:u,varsResolver:h,headless:g,withStylesTransform:b})})}function A8e(t,e){return typeof t=="boolean"?t:e.autoContrast}function ot(t,e,r){var i;const n=ni(),s=(i=n.components[t])==null?void 0:i.defaultProps,a=typeof s=="function"?s(n):s;return{...e,...a,...O2(r)}}function gS(t){return Go(t).reduce((e,r)=>t[r]!==void 0?`${e}${fRe(r)}:${t[r]};`:e,"").trim()}function M8e({selector:t,styles:e,media:r,container:n}){const s=e?gS(e):"",a=Array.isArray(r)?r.map(l=>`@media${l.query}{${t}{${gS(l.styles)}}}`):[],i=Array.isArray(n)?n.map(l=>`@container ${l.query}{${t}{${gS(l.styles)}}}`):[];return`${s?`${t}{${s}}`:""}${a.join("")}${i.join("")}`.trim()}function vG(t){const e=L_();return o.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:M8e(t)}})}function L2(t){const{m:e,mx:r,my:n,mt:s,mb:a,ml:i,mr:l,me:c,ms:d,p:u,px:h,py:f,pt:m,pb:p,pl:g,pr:y,pe:b,ps:v,bd:w,bg:k,c:N,opacity:S,ff:C,fz:E,fw:T,lts:R,ta:B,lh:M,fs:L,tt:V,td:ee,w:Q,miw:J,maw:_,h:H,mih:P,mah:K,bgsz:F,bgp:ne,bgr:z,bga:Z,pos:oe,top:ue,left:_e,bottom:we,right:Y,inset:le,display:ye,flex:Ve,hiddenFrom:Be,visibleFrom:ut,lightHidden:Te,darkHidden:je,sx:ht,...pt}=t;return{styleProps:O2({m:e,mx:r,my:n,mt:s,mb:a,ml:i,mr:l,me:c,ms:d,p:u,px:h,py:f,pt:m,pb:p,pl:g,pr:y,pe:b,ps:v,bd:w,bg:k,c:N,opacity:S,ff:C,fz:E,fw:T,lts:R,ta:B,lh:M,fs:L,tt:V,td:ee,w:Q,miw:J,maw:_,h:H,mih:P,mah:K,bgsz:F,bgp:ne,bgr:z,bga:Z,pos:oe,top:ue,left:_e,bottom:we,right:Y,inset:le,display:ye,flex:Ve,hiddenFrom:Be,visibleFrom:ut,lightHidden:Te,darkHidden:je,sx:ht}),rest:pt}}const O8e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function z_(t,e){const r=Pp({color:t,theme:e});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function R8e(t,e){const r=Pp({color:t,theme:e});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:z_(t,e)}function P8e(t,e){if(typeof t=="number")return Oe(t);if(typeof t=="string"){const[r,n,...s]=t.split(" ").filter(i=>i.trim()!=="");let a=`${Oe(r)}`;return n&&(a+=` ${n}`),s.length>0&&(a+=` ${z_(s.join(" "),e)}`),a.trim()}return t}const LI={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function I8e(t){return typeof t=="string"&&t in LI?LI[t]:t}const D8e=["h1","h2","h3","h4","h5","h6"];function L8e(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&D8e.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?Oe(t):t}function $8e(t){return t}const F8e=["h1","h2","h3","h4","h5","h6"];function B8e(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&F8e.includes(t)?`var(--mantine-${t}-line-height)`:t}function z8e(t){return typeof t=="number"?Oe(t):t}function U8e(t,e){if(typeof t=="number")return Oe(t);if(typeof t=="string"){const r=t.replace("-","");if(!(r in e.spacing))return Oe(t);const n=`--mantine-spacing-${r}`;return t.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return t}const xS={color:z_,textColor:R8e,fontSize:L8e,spacing:U8e,identity:$8e,size:z8e,lineHeight:B8e,fontFamily:I8e,border:P8e};function $I(t){return t.replace("(min-width: ","").replace("em)","")}function V8e({media:t,...e}){const n=Object.keys(t).sort((s,a)=>Number($I(s))-Number($I(a))).map(s=>({query:s,styles:t[s]}));return{...e,media:n}}function H8e(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function W8e(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function q8e(t){return typeof t=="object"&&t!==null?Go(t).filter(e=>e!=="base"):[]}function G8e(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function bG({styleProps:t,data:e,theme:r}){return V8e(Go(t).reduce((n,s)=>{if(s==="hiddenFrom"||s==="visibleFrom"||s==="sx")return n;const a=e[s],i=Array.isArray(a.property)?a.property:[a.property],l=W8e(t[s]);if(!H8e(t[s]))return i.forEach(d=>{n.inlineStyles[d]=xS[a.type](l,r)}),n;n.hasResponsiveStyles=!0;const c=q8e(t[s]);return i.forEach(d=>{l&&(n.styles[d]=xS[a.type](l,r)),c.forEach(u=>{const h=`(min-width: ${r.breakpoints[u]})`;n.media[h]={...n.media[h],[d]:xS[a.type](G8e(t[s],u),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function wG(){return`__m__-${x.useId().replace(/:/g,"")}`}function kG(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...kG(n,e)}),{}):typeof t=="function"?t(e):t??{}}function CG(t){return t.startsWith("data-")?t:`data-${t}`}function K8e(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return n===void 0||n===""||n===!1||n===null||(e[CG(r)]=t[r]),e},{})}function NG(t){return t?typeof t=="string"?{[CG(t)]:!0}:Array.isArray(t)?[...t].reduce((e,r)=>({...e,...NG(r)}),{}):K8e(t):null}function $4(t,e){return Array.isArray(t)?[...t].reduce((r,n)=>({...r,...$4(n,e)}),{}):typeof t=="function"?t(e):t??{}}function Z8e({theme:t,style:e,vars:r,styleProps:n}){const s=$4(e,t),a=$4(r,t);return{...s,...a,...n}}const SG=x.forwardRef(({component:t,style:e,__vars:r,className:n,variant:s,mod:a,size:i,hiddenFrom:l,visibleFrom:c,lightHidden:d,darkHidden:u,renderRoot:h,__size:f,...m},p)=>{var E;const g=ni(),y=t||"div",{styleProps:b,rest:v}=L2(m),w=GRe(),k=(E=w==null?void 0:w())==null?void 0:E(b.sx),N=wG(),S=bG({styleProps:b,theme:g,data:O8e}),C={ref:p,style:Z8e({theme:g,style:e,vars:r,styleProps:S.inlineStyles}),className:rl(n,k,{[N]:S.hasResponsiveStyles,"mantine-light-hidden":d,"mantine-dark-hidden":u,[`mantine-hidden-from-${l}`]:l,[`mantine-visible-from-${c}`]:c}),"data-variant":s,"data-size":sG(i)?void 0:i||void 0,size:f,...NG(a),...v};return o.jsxs(o.Fragment,{children:[S.hasResponsiveStyles&&o.jsx(vG,{selector:`.${N}`,styles:S.styles,media:S.media}),typeof h=="function"?h(C):o.jsx(y,{...C})]})});SG.displayName="@mantine/core/Box";const vt=SG;function EG(t){return t}function Y8e(t){const e=t;return r=>{const n=x.forwardRef((s,a)=>o.jsx(e,{...r,...s,ref:a}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n}}function Zt(t){const e=x.forwardRef(t);return e.extend=EG,e.withProps=r=>{const n=x.forwardRef((s,a)=>o.jsx(e,{...r,...s,ref:a}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e}function ta(t){const e=x.forwardRef(t);return e.withProps=r=>{const n=x.forwardRef((s,a)=>o.jsx(e,{...r,...s,ref:a}));return n.extend=e.extend,n.displayName=`WithProps(${e.displayName})`,n},e.extend=EG,e}const X8e=x.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function wy(){return x.useContext(X8e)}var jG={root:"m_87cf2631"};const J8e={__staticSelector:"UnstyledButton"},Hh=ta((t,e)=>{const r=ot("UnstyledButton",J8e,t),{className:n,component:s="button",__staticSelector:a,unstyled:i,classNames:l,styles:c,style:d,...u}=r,h=qt({name:a,props:r,classes:jG,className:n,style:d,classNames:l,styles:c,unstyled:i});return o.jsx(vt,{...h("root",{focusable:!0}),component:s,ref:e,type:s==="button"?"button":void 0,...u})});Hh.classes=jG;Hh.displayName="@mantine/core/UnstyledButton";var TG={root:"m_515a97f8"};const Q8e={},U_=Zt((t,e)=>{const r=ot("VisuallyHidden",Q8e,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,...d}=r,u=qt({name:"VisuallyHidden",classes:TG,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l});return o.jsx(vt,{component:"span",ref:e,...u("root"),...d})});U_.classes=TG;U_.displayName="@mantine/core/VisuallyHidden";var _G={root:"m_1b7284a3"};const ePe={},tPe=(t,{radius:e,shadow:r})=>({root:{"--paper-radius":e===void 0?void 0:Ds(e),"--paper-shadow":iG(r)}}),V_=ta((t,e)=>{const r=ot("Paper",ePe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,withBorder:c,vars:d,radius:u,shadow:h,variant:f,mod:m,...p}=r,g=qt({name:"Paper",props:r,classes:_G,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:d,varsResolver:tPe});return o.jsx(vt,{ref:e,mod:[{"data-with-border":c},m],...g("root"),variant:f,...p})});V_.classes=_G;V_.displayName="@mantine/core/Paper";function AG(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[r,n]=e.split("-"),s=r==="right"?"left":"right";return n===void 0?s:`${s}-${n}`}return e}function FI(t,e,r,n){return t==="center"||n==="center"?{top:e}:t==="end"?{bottom:r}:t==="start"?{top:r}:{}}function BI(t,e,r,n,s){return t==="center"||n==="center"?{left:e}:t==="end"?{[s==="ltr"?"right":"left"]:r}:t==="start"?{[s==="ltr"?"left":"right"]:r}:{}}const rPe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function nPe({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:s,arrowX:a,arrowY:i,dir:l}){const[c,d="center"]=t.split("-"),u={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[rPe[c]]:n},h=-e/2;return c==="left"?{...u,...FI(d,i,r,s),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:c==="right"?{...u,...FI(d,i,r,s),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:c==="top"?{...u,...BI(d,a,r,s,l),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:c==="bottom"?{...u,...BI(d,a,r,s,l),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const H_=x.forwardRef(({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:s,visible:a,arrowX:i,arrowY:l,style:c,...d},u)=>{const{dir:h}=wy();return a?o.jsx("div",{...d,ref:u,style:{...c,...nPe({position:t,arrowSize:e,arrowOffset:r,arrowRadius:n,arrowPosition:s,dir:h,arrowX:i,arrowY:l})}}):null});H_.displayName="@mantine/core/FloatingArrow";var MG={root:"m_9814e45f"};const sPe={zIndex:xy("modal")},aPe=(t,{gradient:e,color:r,backgroundOpacity:n,blur:s,radius:a,zIndex:i})=>({root:{"--overlay-bg":e||(r!==void 0||n!==void 0)&&_o(r||"#000",n??.6)||void 0,"--overlay-filter":s?`blur(${Oe(s)})`:void 0,"--overlay-radius":a===void 0?void 0:Ds(a),"--overlay-z-index":i==null?void 0:i.toString()}}),Cx=ta((t,e)=>{const r=ot("Overlay",sPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,fixed:d,center:u,children:h,radius:f,zIndex:m,gradient:p,blur:g,color:y,backgroundOpacity:b,mod:v,...w}=r,k=qt({name:"Overlay",props:r,classes:MG,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:aPe});return o.jsx(vt,{ref:e,...k("root"),mod:[{center:u,fixed:d},v],...w,children:h})});Cx.classes=MG;Cx.displayName="@mantine/core/Overlay";function yS(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function iPe({target:t,reuseTargetNode:e,...r}){if(t)return typeof t=="string"?document.querySelector(t)||yS(r):t;if(e){const n=document.querySelector("[data-mantine-shared-portal-node]");if(n)return n;const s=yS(r);return s.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(s),s}return yS(r)}const oPe={},OG=Zt((t,e)=>{const{children:r,target:n,reuseTargetNode:s,...a}=ot("Portal",oPe,t),[i,l]=x.useState(!1),c=x.useRef(null);return P2(()=>(l(!0),c.current=iPe({target:n,reuseTargetNode:s,...a}),zw(e,c.current),!n&&!s&&c.current&&document.body.appendChild(c.current),()=>{!n&&!s&&c.current&&document.body.removeChild(c.current)}),[n]),!i||!c.current?null:Va.createPortal(o.jsx(o.Fragment,{children:r}),c.current)});OG.displayName="@mantine/core/Portal";const ky=Zt(({withinPortal:t=!0,children:e,...r},n)=>fG()==="test"||!t?o.jsx(o.Fragment,{children:e}):o.jsx(OG,{ref:n,...r,children:e}));ky.displayName="@mantine/core/OptionalPortal";const b0=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),P1={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...b0("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...b0("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...b0("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...b0("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...b0("top"),common:{transformOrigin:"top right"}}},zI={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function lPe({transition:t,state:e,duration:r,timingFunction:n}){const s={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof t=="string"?t in P1?{transitionProperty:P1[t].transitionProperty,...s,...P1[t].common,...P1[t][zI[e]]}:{}:{transitionProperty:t.transitionProperty,...s,...t.common,...t[zI[e]]}}function cPe({duration:t,exitDuration:e,timingFunction:r,mounted:n,onEnter:s,onExit:a,onEntered:i,onExited:l,enterDelay:c,exitDelay:d}){const u=ni(),h=$Re(),f=u.respectReducedMotion?h:!1,[m,p]=x.useState(f?0:t),[g,y]=x.useState(n?"entered":"exited"),b=x.useRef(-1),v=x.useRef(-1),w=x.useRef(-1);function k(){window.clearTimeout(b.current),window.clearTimeout(v.current),cancelAnimationFrame(w.current)}const N=C=>{k();const E=C?s:a,T=C?i:l,R=f?0:C?t:e;p(R),R===0?(typeof E=="function"&&E(),typeof T=="function"&&T(),y(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{p9.flushSync(()=>{y(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof E=="function"&&E(),y(C?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof T=="function"&&T(),y(C?"entered":"exited")},R)})})},S=C=>{if(k(),typeof(C?c:d)!="number"){N(C);return}v.current=window.setTimeout(()=>{N(C)},C?c:d)};return Gd(()=>{S(n)},[n]),x.useEffect(()=>()=>{k()},[]),{transitionDuration:m,transitionStatus:g,transitionTimingFunction:r||"ease"}}function Wh({keepMounted:t,transition:e="fade",duration:r=250,exitDuration:n=r,mounted:s,children:a,timingFunction:i="ease",onExit:l,onEntered:c,onEnter:d,onExited:u,enterDelay:h,exitDelay:f}){const m=fG(),{transitionDuration:p,transitionStatus:g,transitionTimingFunction:y}=cPe({mounted:s,exitDuration:n,duration:r,timingFunction:i,onExit:l,onEntered:c,onEnter:d,onExited:u,enterDelay:h,exitDelay:f});return p===0||m==="test"?s?o.jsx(o.Fragment,{children:a({})}):t?a({display:"none"}):null:g==="exited"?t?a({display:"none"}):null:o.jsx(o.Fragment,{children:a(lPe({transition:e,duration:p,state:g,timingFunction:y}))})}Wh.displayName="@mantine/core/Transition";const[dPe,RG]=R2("Popover component was not found in the tree");function W_({children:t,active:e=!0,refProp:r="ref",innerRef:n}){const s=dG(e),a=gc(s,n);return gy(t)?x.cloneElement(t,{[r]:a}):t}function PG(t){return o.jsx(U_,{tabIndex:-1,"data-autofocus":!0,...t})}W_.displayName="@mantine/core/FocusTrap";PG.displayName="@mantine/core/FocusTrapInitialFocus";W_.InitialFocus=PG;var IG={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const uPe={},$2=Zt((t,e)=>{var y,b,v,w;const r=ot("PopoverDropdown",uPe,t),{className:n,style:s,vars:a,children:i,onKeyDownCapture:l,variant:c,classNames:d,styles:u,...h}=r,f=RG(),m=ARe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=gc(e,f.floating);return f.disabled?null:o.jsx(ky,{...f.portalProps,withinPortal:f.withinPortal,children:o.jsx(Wh,{mounted:f.opened,...f.transitionProps,transition:((y=f.transitionProps)==null?void 0:y.transition)||"fade",duration:((b=f.transitionProps)==null?void 0:b.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((v=f.transitionProps)==null?void 0:v.exitDuration)=="number"?f.transitionProps.exitDuration:(w=f.transitionProps)==null?void 0:w.duration,children:k=>o.jsx(W_,{active:f.trapFocus&&f.opened,innerRef:g,children:o.jsxs(vt,{...p,...h,variant:c,onKeyDownCapture:wRe(()=>{var N,S;(N=f.onClose)==null||N.call(f),(S=f.onDismiss)==null||S.call(f)},{active:f.closeOnEscape,onTrigger:m,onKeyDown:l}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:n,props:r,classNames:d,styles:u,style:[{...k,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:Oe(f.width)},f.resolvedStyles.dropdown,u==null?void 0:u.dropdown,s]}),children:[i,o.jsx(H_,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:r,classNames:d,styles:u})})]})})})})});$2.classes=IG;$2.displayName="@mantine/core/PopoverDropdown";const hPe={refProp:"ref",popupType:"dialog"},q_=Zt((t,e)=>{const{children:r,refProp:n,popupType:s,...a}=ot("PopoverTarget",hPe,t);if(!gy(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=a,l=RG(),c=gc(l.reference,D_(r),e),d=l.withRoles?{"aria-haspopup":s,"aria-expanded":l.opened,"aria-controls":l.getDropdownId(),id:l.getTargetId()}:{};return x.cloneElement(r,{...i,...d,...l.targetProps,className:rl(l.targetProps.className,i.className,r.props.className),[n]:c,...l.controlled?null:{onClick:l.onToggle}})});q_.displayName="@mantine/core/PopoverTarget";function DG({opened:t,floating:e,position:r,positionDependencies:n}){const[s,a]=x.useState(0);x.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return sbe(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,s,r]),Gd(()=>{e.update()},n),Gd(()=>{a(i=>i+1)},[t])}function fPe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function mPe(t,e){const r=fPe(t.middlewares),n=[sl(t.offset)];return r.shift&&n.push(Bh(typeof r.shift=="boolean"?{limiter:CR(),padding:5}:{limiter:CR(),padding:5,...r.shift})),r.flip&&n.push(typeof r.flip=="boolean"?uo():uo(r.flip)),r.inline&&n.push(typeof r.inline=="boolean"?eg():eg(r.inline)),n.push(Lz({element:t.arrowRef,padding:t.arrowOffset})),(r.size||t.width==="target")&&n.push(Kk({...typeof r.size=="boolean"?{}:r.size,apply({rects:s,availableWidth:a,availableHeight:i,...l}){var u;const d=((u=e().refs.floating.current)==null?void 0:u.style)??{};r.size&&(typeof r.size=="object"&&r.size.apply?r.size.apply({rects:s,availableWidth:a,availableHeight:i,...l}):Object.assign(d,{maxWidth:`${a}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(d,{width:`${s.reference.width}px`})}})),n}function pPe(t){const[e,r]=Rp({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),n=x.useRef(e),s=()=>{e&&!t.disabled&&r(!1)},a=()=>!t.disabled&&r(!e),i=Np({strategy:t.strategy,placement:t.position,middleware:mPe(t,()=>i)});return DG({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),Gd(()=>{var l;(l=t.onPositionChange)==null||l.call(t,i.placement)},[i.placement]),Gd(()=>{var l,c;e!==n.current&&(e?(c=t.onOpen)==null||c.call(t):(l=t.onClose)==null||l.call(t)),n.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:s,onToggle:a}}const gPe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:xy("popover"),__staticSelector:"Popover",width:"max-content"},xPe=(t,{radius:e,shadow:r})=>({dropdown:{"--popover-radius":e===void 0?void 0:Ds(e),"--popover-shadow":iG(r)}});function lu(t){var Me,Qe,I,j,A,U;const e=ot("Popover",gPe,t),{children:r,position:n,offset:s,onPositionChange:a,positionDependencies:i,opened:l,transitionProps:c,onExitTransitionEnd:d,onEnterTransitionEnd:u,width:h,middlewares:f,withArrow:m,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:b,unstyled:v,classNames:w,styles:k,closeOnClickOutside:N,withinPortal:S,portalProps:C,closeOnEscape:E,clickOutsideEvents:T,trapFocus:R,onClose:B,onDismiss:M,onOpen:L,onChange:V,zIndex:ee,radius:Q,shadow:J,id:_,defaultOpened:H,__staticSelector:P,withRoles:K,disabled:F,returnFocus:ne,variant:z,keepMounted:Z,vars:oe,floatingStrategy:ue,withOverlay:_e,overlayProps:we,...Y}=e,le=qt({name:P,props:e,classes:IG,classNames:w,styles:k,unstyled:v,rootSelector:"dropdown",vars:oe,varsResolver:xPe}),{resolvedStyles:ye}=D2({classNames:w,styles:k,props:e}),Ve=x.useRef(null),[Be,ut]=x.useState(null),[Te,je]=x.useState(null),{dir:ht}=wy(),pt=vy(_),re=pPe({middlewares:f,width:h,position:AG(ht,n),offset:typeof s=="number"?s+(m?p/2:0):s,arrowRef:Ve,arrowOffset:g,onPositionChange:a,positionDependencies:i,opened:l,defaultOpened:H,onChange:V,onOpen:L,onClose:B,onDismiss:M,strategy:ue,disabled:F});ERe(()=>{N&&(re.onClose(),M==null||M())},T,[Be,Te]);const ce=x.useCallback(ie=>{ut(ie),re.floating.refs.setReference(ie)},[re.floating.refs.setReference]),ge=x.useCallback(ie=>{je(ie),re.floating.refs.setFloating(ie)},[re.floating.refs.setFloating]),Ue=x.useCallback(()=>{var ie;(ie=c==null?void 0:c.onExited)==null||ie.call(c),d==null||d()},[c==null?void 0:c.onExited,d]),Re=x.useCallback(()=>{var ie;(ie=c==null?void 0:c.onEntered)==null||ie.call(c),u==null||u()},[c==null?void 0:c.onEntered,u]);return o.jsxs(dPe,{value:{returnFocus:ne,disabled:F,controlled:re.controlled,reference:ce,floating:ge,x:re.floating.x,y:re.floating.y,arrowX:(I=(Qe=(Me=re.floating)==null?void 0:Me.middlewareData)==null?void 0:Qe.arrow)==null?void 0:I.x,arrowY:(U=(A=(j=re.floating)==null?void 0:j.middlewareData)==null?void 0:A.arrow)==null?void 0:U.y,opened:re.opened,arrowRef:Ve,transitionProps:{...c,onExited:Ue,onEntered:Re},width:h,withArrow:m,arrowSize:p,arrowOffset:g,arrowRadius:y,arrowPosition:b,placement:re.floating.placement,trapFocus:R,withinPortal:S,portalProps:C,zIndex:ee,radius:Q,shadow:J,closeOnEscape:E,onDismiss:M,onClose:re.onClose,onToggle:re.onToggle,getTargetId:()=>`${pt}-target`,getDropdownId:()=>`${pt}-dropdown`,withRoles:K,targetProps:Y,__staticSelector:P,classNames:w,styles:k,unstyled:v,variant:z,keepMounted:Z,getStyles:le,resolvedStyles:ye,floatingStrategy:ue},children:[r,_e&&o.jsx(Wh,{transition:"fade",mounted:re.opened,duration:(c==null?void 0:c.duration)||250,exitDuration:(c==null?void 0:c.exitDuration)||250,children:ie=>o.jsx(ky,{withinPortal:S,children:o.jsx(Cx,{...we,...le("overlay",{className:we==null?void 0:we.className,style:[ie,we==null?void 0:we.style]})})})})]})}lu.Target=q_;lu.Dropdown=$2;lu.displayName="@mantine/core/Popover";lu.extend=t=>t;var eo={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const LG=x.forwardRef(({className:t,...e},r)=>o.jsxs(vt,{component:"span",className:rl(eo.barsLoader,t),...e,ref:r,children:[o.jsx("span",{className:eo.bar}),o.jsx("span",{className:eo.bar}),o.jsx("span",{className:eo.bar})]}));LG.displayName="@mantine/core/Bars";const $G=x.forwardRef(({className:t,...e},r)=>o.jsxs(vt,{component:"span",className:rl(eo.dotsLoader,t),...e,ref:r,children:[o.jsx("span",{className:eo.dot}),o.jsx("span",{className:eo.dot}),o.jsx("span",{className:eo.dot})]}));$G.displayName="@mantine/core/Dots";const FG=x.forwardRef(({className:t,...e},r)=>o.jsx(vt,{component:"span",className:rl(eo.ovalLoader,t),...e,ref:r}));FG.displayName="@mantine/core/Oval";const BG={bars:LG,oval:FG,dots:$G},yPe={loaders:BG,type:"oval"},vPe=(t,{size:e,color:r})=>({root:{"--loader-size":Pr(e,"loader-size"),"--loader-color":r?Jo(r,t):void 0}}),cu=Zt((t,e)=>{const r=ot("Loader",yPe,t),{size:n,color:s,type:a,vars:i,className:l,style:c,classNames:d,styles:u,unstyled:h,loaders:f,variant:m,children:p,...g}=r,y=qt({name:"Loader",props:r,classes:eo,className:l,style:c,classNames:d,styles:u,unstyled:h,vars:i,varsResolver:vPe});return p?o.jsx(vt,{...y("root"),ref:e,...g,children:p}):o.jsx(vt,{...y("root"),ref:e,component:f[a],variant:m,size:n,...g})});cu.defaultLoaders=BG;cu.classes=eo;cu.displayName="@mantine/core/Loader";var Ip={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const UI={orientation:"horizontal"},bPe=(t,{borderWidth:e})=>({group:{"--ai-border-width":Oe(e)}}),G_=Zt((t,e)=>{const r=ot("ActionIconGroup",UI,t),{className:n,style:s,classNames:a,styles:i,unstyled:l,orientation:c,vars:d,borderWidth:u,variant:h,mod:f,...m}=ot("ActionIconGroup",UI,t),p=qt({name:"ActionIconGroup",props:r,classes:Ip,className:n,style:s,classNames:a,styles:i,unstyled:l,vars:d,varsResolver:bPe,rootSelector:"group"});return o.jsx(vt,{...p("group"),ref:e,variant:h,mod:[{"data-orientation":c},f],role:"group",...m})});G_.classes=Ip;G_.displayName="@mantine/core/ActionIconGroup";const VI={},wPe=(t,{radius:e,color:r,gradient:n,variant:s,autoContrast:a,size:i})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:s||"filled",autoContrast:a});return{groupSection:{"--section-height":Pr(i,"section-height"),"--section-padding-x":Pr(i,"section-padding-x"),"--section-fz":ba(i),"--section-radius":e===void 0?void 0:Ds(e),"--section-bg":r||s?l.background:void 0,"--section-color":l.color,"--section-bd":r||s?l.border:void 0}}},K_=Zt((t,e)=>{const r=ot("ActionIconGroupSection",VI,t),{className:n,style:s,classNames:a,styles:i,unstyled:l,vars:c,variant:d,gradient:u,radius:h,autoContrast:f,...m}=ot("ActionIconGroupSection",VI,t),p=qt({name:"ActionIconGroupSection",props:r,classes:Ip,className:n,style:s,classNames:a,styles:i,unstyled:l,vars:c,varsResolver:wPe,rootSelector:"groupSection"});return o.jsx(vt,{...p("groupSection"),ref:e,variant:d,...m})});K_.classes=Ip;K_.displayName="@mantine/core/ActionIconGroupSection";const kPe={},CPe=(t,{size:e,radius:r,variant:n,gradient:s,color:a,autoContrast:i})=>{const l=t.variantColorResolver({color:a||t.primaryColor,theme:t,gradient:s,variant:n||"filled",autoContrast:i});return{root:{"--ai-size":Pr(e,"ai-size"),"--ai-radius":r===void 0?void 0:Ds(r),"--ai-bg":a||n?l.background:void 0,"--ai-hover":a||n?l.hover:void 0,"--ai-hover-color":a||n?l.hoverColor:void 0,"--ai-color":l.color,"--ai-bd":a||n?l.border:void 0}}},qh=ta((t,e)=>{const r=ot("ActionIcon",kPe,t),{className:n,unstyled:s,variant:a,classNames:i,styles:l,style:c,loading:d,loaderProps:u,size:h,color:f,radius:m,__staticSelector:p,gradient:g,vars:y,children:b,disabled:v,"data-disabled":w,autoContrast:k,mod:N,...S}=r,C=qt({name:["ActionIcon",p],props:r,className:n,style:c,classes:Ip,classNames:i,styles:l,unstyled:s,vars:y,varsResolver:CPe});return o.jsxs(Hh,{...C("root",{active:!v&&!d&&!w}),...S,unstyled:s,variant:a,size:h,disabled:v||d,ref:e,mod:[{loading:d,disabled:v||w},N],children:[o.jsx(Wh,{mounted:!!d,transition:"slide-down",duration:150,children:E=>o.jsx(vt,{component:"span",...C("loader",{style:E}),"aria-hidden":!0,children:o.jsx(cu,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),o.jsx(vt,{component:"span",mod:{loading:d},...C("icon"),children:b})]})});qh.classes=Ip;qh.displayName="@mantine/core/ActionIcon";qh.Group=G_;qh.GroupSection=K_;const zG=x.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...r},n)=>o.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:n,...r,children:o.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));zG.displayName="@mantine/core/CloseIcon";var UG={root:"m_86a44da5","root--subtle":"m_220c80f2"};const NPe={variant:"subtle"},SPe=(t,{size:e,radius:r,iconSize:n})=>({root:{"--cb-size":Pr(e,"cb-size"),"--cb-radius":r===void 0?void 0:Ds(r),"--cb-icon-size":Oe(n)}}),F2=ta((t,e)=>{const r=ot("CloseButton",NPe,t),{iconSize:n,children:s,vars:a,radius:i,className:l,classNames:c,style:d,styles:u,unstyled:h,"data-disabled":f,disabled:m,variant:p,icon:g,mod:y,__staticSelector:b,...v}=r,w=qt({name:b||"CloseButton",props:r,className:l,style:d,classes:UG,classNames:c,styles:u,unstyled:h,vars:a,varsResolver:SPe});return o.jsxs(Hh,{ref:e,...v,unstyled:h,variant:p,disabled:m,mod:[{disabled:m||f},y],...w("root",{variant:p,active:!m&&!f}),children:[g||o.jsx(zG,{}),s]})});F2.classes=UG;F2.displayName="@mantine/core/CloseButton";function EPe(t){return x.Children.toArray(t).filter(Boolean)}var VG={root:"m_4081bf90"};const jPe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},TPe=(t,{grow:e,preventGrowOverflow:r,gap:n,align:s,justify:a,wrap:i},{childWidth:l})=>({root:{"--group-child-width":e&&r?l:void 0,"--group-gap":yy(n),"--group-align":s,"--group-justify":a,"--group-wrap":i}}),us=Zt((t,e)=>{const r=ot("Group",jPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,children:c,gap:d,align:u,justify:h,wrap:f,grow:m,preventGrowOverflow:p,vars:g,variant:y,__size:b,mod:v,...w}=r,k=EPe(c),N=k.length,S=yy(d??"md"),E={childWidth:`calc(${100/N}% - (${S} - ${S} / ${N}))`},T=qt({name:"Group",props:r,stylesCtx:E,className:s,style:a,classes:VG,classNames:n,styles:i,unstyled:l,vars:g,varsResolver:TPe});return o.jsx(vt,{...T("root"),ref:e,variant:y,mod:[{grow:m},v],size:b,...w,children:k})});us.classes=VG;us.displayName="@mantine/core/Group";const[_Pe,APe]=I_({size:"sm"}),MPe={},HG=Zt((t,e)=>{const r=ot("InputClearButton",MPe,t),{size:n,variant:s,vars:a,classNames:i,styles:l,...c}=r,d=APe(),{resolvedClassNames:u,resolvedStyles:h}=D2({classNames:i,styles:l,props:r});return o.jsx(F2,{variant:s||"transparent",ref:e,size:n||(d==null?void 0:d.size)||"sm",classNames:u,styles:h,__staticSelector:"InputClearButton",...c})});HG.displayName="@mantine/core/InputClearButton";const[OPe,B2]=I_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Di={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const HI={},RPe=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${ba(e)} - ${Oe(2)})`}}),z2=Zt((t,e)=>{const r=ot("InputDescription",HI,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,size:d,__staticSelector:u,__inheritStyles:h=!0,variant:f,...m}=ot("InputDescription",HI,r),p=B2(),g=qt({name:["InputWrapper",u],props:r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,rootSelector:"description",vars:c,varsResolver:RPe}),y=h&&(p==null?void 0:p.getStyles)||g;return o.jsx(vt,{component:"p",ref:e,variant:f,size:d,...y("description",p!=null&&p.getStyles?{className:s,style:a}:void 0),...m})});z2.classes=Di;z2.displayName="@mantine/core/InputDescription";const PPe={},IPe=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${ba(e)} - ${Oe(2)})`}}),U2=Zt((t,e)=>{const r=ot("InputError",PPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,size:d,__staticSelector:u,__inheritStyles:h=!0,variant:f,...m}=r,p=qt({name:["InputWrapper",u],props:r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,rootSelector:"error",vars:c,varsResolver:IPe}),g=B2(),y=h&&(g==null?void 0:g.getStyles)||p;return o.jsx(vt,{component:"p",ref:e,variant:f,size:d,...y("error",g!=null&&g.getStyles?{className:s,style:a}:void 0),...m})});U2.classes=Di;U2.displayName="@mantine/core/InputError";const WI={labelElement:"label"},DPe=(t,{size:e})=>({label:{"--input-label-size":ba(e),"--input-asterisk-color":void 0}}),V2=Zt((t,e)=>{const r=ot("InputLabel",WI,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,labelElement:d,size:u,required:h,htmlFor:f,onMouseDown:m,children:p,__staticSelector:g,variant:y,mod:b,...v}=ot("InputLabel",WI,r),w=qt({name:["InputWrapper",g],props:r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,rootSelector:"label",vars:c,varsResolver:DPe}),k=B2(),N=(k==null?void 0:k.getStyles)||w;return o.jsxs(vt,{...N("label",k!=null&&k.getStyles?{className:s,style:a}:void 0),component:d,variant:y,size:u,ref:e,htmlFor:d==="label"?f:void 0,mod:[{required:h},b],onMouseDown:S=>{m==null||m(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,h&&o.jsx("span",{...N("required"),"aria-hidden":!0,children:" *"})]})});V2.classes=Di;V2.displayName="@mantine/core/InputLabel";const qI={},Z_=Zt((t,e)=>{const r=ot("InputPlaceholder",qI,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,__staticSelector:d,variant:u,error:h,mod:f,...m}=ot("InputPlaceholder",qI,r),p=qt({name:["InputPlaceholder",d],props:r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,rootSelector:"placeholder"});return o.jsx(vt,{...p("placeholder"),mod:[{error:!!h},f],component:"span",variant:u,ref:e,...m})});Z_.classes=Di;Z_.displayName="@mantine/core/InputPlaceholder";function LPe(t,{hasDescription:e,hasError:r}){const n=t.findIndex(c=>c==="input"),s=t.slice(0,n),a=t.slice(n+1),i=e&&s.includes("description")||r&&s.includes("error");return{offsetBottom:e&&a.includes("description")||r&&a.includes("error"),offsetTop:i}}const $Pe={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},FPe=(t,{size:e})=>({label:{"--input-label-size":ba(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${ba(e)} - ${Oe(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${ba(e)} - ${Oe(2)})`}}),Y_=Zt((t,e)=>{const r=ot("InputWrapper",$Pe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,size:d,variant:u,__staticSelector:h,inputContainer:f,inputWrapperOrder:m,label:p,error:g,description:y,labelProps:b,descriptionProps:v,errorProps:w,labelElement:k,children:N,withAsterisk:S,id:C,required:E,__stylesApiProps:T,mod:R,...B}=r,M=qt({name:["InputWrapper",h],props:T||r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:FPe}),L={size:d,variant:u,__staticSelector:h},V=vy(C),ee=typeof S=="boolean"?S:E,Q=(w==null?void 0:w.id)||`${V}-error`,J=(v==null?void 0:v.id)||`${V}-description`,_=V,H=!!g&&typeof g!="boolean",P=!!y,K=`${H?Q:""} ${P?J:""}`,F=K.trim().length>0?K.trim():void 0,ne=(b==null?void 0:b.id)||`${V}-label`,z=p&&o.jsx(V2,{labelElement:k,id:ne,htmlFor:_,required:ee,...L,...b,children:p},"label"),Z=P&&o.jsx(z2,{...v,...L,size:(v==null?void 0:v.size)||L.size,id:(v==null?void 0:v.id)||J,children:y},"description"),oe=o.jsx(x.Fragment,{children:f(N)},"input"),ue=H&&x.createElement(U2,{...w,...L,size:(w==null?void 0:w.size)||L.size,key:"error",id:(w==null?void 0:w.id)||Q},g),_e=m.map(we=>{switch(we){case"label":return z;case"input":return oe;case"description":return Z;case"error":return ue;default:return null}});return o.jsx(OPe,{value:{getStyles:M,describedBy:F,inputId:_,labelId:ne,...LPe(m,{hasDescription:P,hasError:H})},children:o.jsx(vt,{ref:e,variant:u,size:d,mod:[{error:!!g},R],...M("root"),...B,children:_e})})});Y_.classes=Di;Y_.displayName="@mantine/core/InputWrapper";const BPe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},zPe=(t,e,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Pr(e.size,"input-height"),"--input-fz":ba(e.size),"--input-radius":e.radius===void 0?void 0:Ds(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Oe(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Oe(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Pr(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Ja=ta((t,e)=>{const r=ot("Input",BPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,required:c,__staticSelector:d,__stylesApiProps:u,size:h,wrapperProps:f,error:m,disabled:p,leftSection:g,leftSectionProps:y,leftSectionWidth:b,rightSection:v,rightSectionProps:w,rightSectionWidth:k,rightSectionPointerEvents:N,leftSectionPointerEvents:S,variant:C,vars:E,pointer:T,multiline:R,radius:B,id:M,withAria:L,withErrorStyles:V,mod:ee,inputSize:Q,__clearSection:J,__clearable:_,__defaultRightSection:H,...P}=r,{styleProps:K,rest:F}=L2(P),ne=B2(),z={offsetBottom:ne==null?void 0:ne.offsetBottom,offsetTop:ne==null?void 0:ne.offsetTop},Z=qt({name:["Input",d],props:u||r,classes:Di,className:s,style:a,classNames:n,styles:i,unstyled:l,stylesCtx:z,rootSelector:"wrapper",vars:E,varsResolver:zPe}),oe=L?{required:c,disabled:p,"aria-invalid":!!m,"aria-describedby":ne==null?void 0:ne.describedBy,id:(ne==null?void 0:ne.inputId)||M}:{},ue=v||_&&J||H;return o.jsx(_Pe,{value:{size:h||"sm"},children:o.jsxs(vt,{...Z("wrapper"),...K,...f,mod:[{error:!!m&&V,pointer:T,disabled:p,multiline:R,"data-with-right-section":!!ue,"data-with-left-section":!!g},ee],variant:C,size:h,children:[g&&o.jsx("div",{...y,"data-position":"left",...Z("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:g}),o.jsx(vt,{component:"input",...F,...oe,ref:e,required:c,mod:{disabled:p,error:!!m&&V},variant:C,__size:Q,...Z("input")}),ue&&o.jsx("div",{...w,"data-position":"right",...Z("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:ue})]})})});Ja.classes=Di;Ja.Wrapper=Y_;Ja.Label=V2;Ja.Error=U2;Ja.Description=z2;Ja.Placeholder=Z_;Ja.ClearButton=HG;Ja.displayName="@mantine/core/Input";function UPe(t,e,r){const n=ot(t,e,r),{label:s,description:a,error:i,required:l,classNames:c,styles:d,className:u,unstyled:h,__staticSelector:f,__stylesApiProps:m,errorProps:p,labelProps:g,descriptionProps:y,wrapperProps:b,id:v,size:w,style:k,inputContainer:N,inputWrapperOrder:S,withAsterisk:C,variant:E,vars:T,mod:R,...B}=n,{styleProps:M,rest:L}=L2(B),V={label:s,description:a,error:i,required:l,classNames:c,className:u,__staticSelector:f,__stylesApiProps:m||n,errorProps:p,labelProps:g,descriptionProps:y,unstyled:h,styles:d,size:w,style:k,inputContainer:N,inputWrapperOrder:S,withAsterisk:C,variant:E,id:v,mod:R,...b};return{...L,classNames:c,styles:d,unstyled:h,wrapperProps:{...V,...M},inputProps:{required:l,classNames:c,styles:d,unstyled:h,size:w,__staticSelector:f,__stylesApiProps:m||n,error:i,variant:E,id:v}}}const VPe={__staticSelector:"InputBase",withAria:!0},Dp=ta((t,e)=>{const{inputProps:r,wrapperProps:n,...s}=UPe("InputBase",VPe,t);return o.jsx(Ja.Wrapper,{...n,children:o.jsx(Ja,{...r,...s,ref:e})})});Dp.classes={...Ja.classes,...Ja.Wrapper.classes};Dp.displayName="@mantine/core/InputBase";const HPe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var WG={root:"m_8bffd616"};const WPe={},X_=ta((t,e)=>{const r=ot("Flex",WPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,gap:d,rowGap:u,columnGap:h,align:f,justify:m,wrap:p,direction:g,...y}=r,b=qt({name:"Flex",classes:WG,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c}),v=ni(),w=wG(),k=bG({styleProps:{gap:d,rowGap:u,columnGap:h,align:f,justify:m,wrap:p,direction:g},theme:v,data:HPe});return o.jsxs(o.Fragment,{children:[k.hasResponsiveStyles&&o.jsx(vG,{selector:`.${w}`,styles:k.styles,media:k.media}),o.jsx(vt,{ref:e,...b("root",{className:w,style:O2(k.inlineStyles)}),...y})]})});X_.classes=WG;X_.displayName="@mantine/core/Flex";var qG={root:"m_b6d8b162"};function qPe(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const GPe={inherit:!1},KPe=(t,{variant:e,lineClamp:r,gradient:n,size:s,color:a})=>({root:{"--text-fz":ba(s),"--text-lh":kRe(s),"--text-gradient":e==="gradient"?D4(n,t):void 0,"--text-line-clamp":typeof r=="number"?r.toString():void 0,"--text-color":a?Jo(a,t):void 0}}),Qo=ta((t,e)=>{const r=ot("Text",GPe,t),{lineClamp:n,truncate:s,inline:a,inherit:i,gradient:l,span:c,__staticSelector:d,vars:u,className:h,style:f,classNames:m,styles:p,unstyled:g,variant:y,mod:b,size:v,...w}=r,k=qt({name:["Text",d],props:r,classes:qG,className:h,style:f,classNames:m,styles:p,unstyled:g,vars:u,varsResolver:KPe});return o.jsx(vt,{...k("root",{focusable:!0}),ref:e,component:c?"span":"p",variant:y,mod:[{"data-truncate":qPe(s),"data-line-clamp":typeof n=="number","data-inline":a,"data-inherit":i},b],size:v,...w})});Qo.classes=qG;Qo.displayName="@mantine/core/Text";function J_({size:t,style:e,...r}){const n=t!==void 0?{width:Oe(t),height:Oe(t),...e}:e;return o.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r,children:o.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const GG=x.createContext(null),ZPe=GG.Provider;function YPe(){return{withinGroup:!!x.useContext(GG)}}var H2={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const XPe={},JPe=(t,{spacing:e})=>({group:{"--ag-spacing":yy(e)}}),Q_=Zt((t,e)=>{const r=ot("AvatarGroup",XPe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,spacing:d,...u}=r,h=qt({name:"AvatarGroup",classes:H2,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:JPe,rootSelector:"group"});return o.jsx(ZPe,{value:!0,children:o.jsx(vt,{ref:e,...h("group"),...u})})});Q_.classes=H2;Q_.displayName="@mantine/core/AvatarGroup";function QPe(t){return o.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function eIe(t){let e=0;for(let r=0;r<t.length;r+=1){const n=t.charCodeAt(r);e=(e<<5)-e+n,e|=0}return e}const tIe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function rIe(t,e=tIe){const r=eIe(t),n=Math.abs(r)%e.length;return e[n]}function nIe(t,e=2){const r=t.split(" ");return r.length===1?t.slice(0,e).toUpperCase():r.map(n=>n[0]).slice(0,e).join("").toUpperCase()}const sIe={},aIe=(t,{size:e,radius:r,variant:n,gradient:s,color:a,autoContrast:i,name:l,allowedInitialsColors:c})=>{const d=a==="initials"&&typeof l=="string"?rIe(l,c):a,u=t.variantColorResolver({color:d||"gray",theme:t,gradient:s,variant:n||"light",autoContrast:i});return{root:{"--avatar-size":Pr(e,"avatar-size"),"--avatar-radius":r===void 0?void 0:Ds(r),"--avatar-bg":d||n?u.background:void 0,"--avatar-color":d||n?u.color:void 0,"--avatar-bd":d||n?u.border:void 0}}},W2=ta((t,e)=>{const r=ot("Avatar",sIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,src:d,alt:u,radius:h,color:f,gradient:m,imageProps:p,children:g,autoContrast:y,mod:b,name:v,allowedInitialsColors:w,...k}=r,N=YPe(),[S,C]=x.useState(!d),E=qt({name:"Avatar",props:r,classes:H2,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:aIe});return x.useEffect(()=>C(!d),[d]),o.jsx(vt,{...E("root"),mod:[{"within-group":N.withinGroup},b],ref:e,...k,children:S?o.jsx("span",{...E("placeholder"),title:u,children:g||typeof v=="string"&&nIe(v)||o.jsx(QPe,{})}):o.jsx("img",{...p,...E("image"),src:d,alt:u,onError:T=>{var R;C(!0),(R=p==null?void 0:p.onError)==null||R.call(p,T)}})})});W2.classes=H2;W2.displayName="@mantine/core/Avatar";W2.Group=Q_;var KG={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const iIe={},oIe=(t,{radius:e,color:r,gradient:n,variant:s,size:a,autoContrast:i})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:s||"filled",autoContrast:i});return{root:{"--badge-height":Pr(a,"badge-height"),"--badge-padding-x":Pr(a,"badge-padding-x"),"--badge-fz":Pr(a,"badge-fz"),"--badge-radius":e===void 0?void 0:Ds(e),"--badge-bg":r||s?l.background:void 0,"--badge-color":r||s?l.color:void 0,"--badge-bd":r||s?l.border:void 0,"--badge-dot-color":s==="dot"?Jo(r,t):void 0}}},eA=ta((t,e)=>{const r=ot("Badge",iIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,radius:d,color:u,gradient:h,leftSection:f,rightSection:m,children:p,variant:g,fullWidth:y,autoContrast:b,circle:v,mod:w,...k}=r,N=qt({name:"Badge",props:r,classes:KG,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:oIe});return o.jsxs(vt,{variant:g,mod:[{block:y,circle:v,"with-right-section":!!m,"with-left-section":!!f},w],...N("root",{variant:g}),ref:e,...k,children:[f&&o.jsx("span",{...N("section"),"data-position":"left",children:f}),o.jsx("span",{...N("label"),children:p}),m&&o.jsx("span",{...N("section"),"data-position":"right",children:m})]})});eA.classes=KG;eA.displayName="@mantine/core/Badge";var Lp={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const GI={orientation:"horizontal"},lIe=(t,{borderWidth:e})=>({group:{"--button-border-width":Oe(e)}}),tA=Zt((t,e)=>{const r=ot("ButtonGroup",GI,t),{className:n,style:s,classNames:a,styles:i,unstyled:l,orientation:c,vars:d,borderWidth:u,variant:h,mod:f,...m}=ot("ButtonGroup",GI,t),p=qt({name:"ButtonGroup",props:r,classes:Lp,className:n,style:s,classNames:a,styles:i,unstyled:l,vars:d,varsResolver:lIe,rootSelector:"group"});return o.jsx(vt,{...p("group"),ref:e,variant:h,mod:[{"data-orientation":c},f],role:"group",...m})});tA.classes=Lp;tA.displayName="@mantine/core/ButtonGroup";const KI={},cIe=(t,{radius:e,color:r,gradient:n,variant:s,autoContrast:a,size:i})=>{const l=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:s||"filled",autoContrast:a});return{groupSection:{"--section-height":Pr(i,"section-height"),"--section-padding-x":Pr(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?ba(i.replace("compact-","")):ba(i),"--section-radius":e===void 0?void 0:Ds(e),"--section-bg":r||s?l.background:void 0,"--section-color":l.color,"--section-bd":r||s?l.border:void 0}}},rA=Zt((t,e)=>{const r=ot("ButtonGroupSection",KI,t),{className:n,style:s,classNames:a,styles:i,unstyled:l,vars:c,variant:d,gradient:u,radius:h,autoContrast:f,...m}=ot("ButtonGroupSection",KI,t),p=qt({name:"ButtonGroupSection",props:r,classes:Lp,className:n,style:s,classNames:a,styles:i,unstyled:l,vars:c,varsResolver:cIe,rootSelector:"groupSection"});return o.jsx(vt,{...p("groupSection"),ref:e,variant:d,...m})});rA.classes=Lp;rA.displayName="@mantine/core/ButtonGroupSection";const dIe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Oe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},uIe={},hIe=(t,{radius:e,color:r,gradient:n,variant:s,size:a,justify:i,autoContrast:l})=>{const c=t.variantColorResolver({color:r||t.primaryColor,theme:t,gradient:n,variant:s||"filled",autoContrast:l});return{root:{"--button-justify":i,"--button-height":Pr(a,"button-height"),"--button-padding-x":Pr(a,"button-padding-x"),"--button-fz":a!=null&&a.includes("compact")?ba(a.replace("compact-","")):ba(a),"--button-radius":e===void 0?void 0:Ds(e),"--button-bg":r||s?c.background:void 0,"--button-hover":r||s?c.hover:void 0,"--button-color":c.color,"--button-bd":r||s?c.border:void 0,"--button-hover-color":r||s?c.hoverColor:void 0}}},vo=ta((t,e)=>{const r=ot("Button",uIe,t),{style:n,vars:s,className:a,color:i,disabled:l,children:c,leftSection:d,rightSection:u,fullWidth:h,variant:f,radius:m,loading:p,loaderProps:g,gradient:y,classNames:b,styles:v,unstyled:w,"data-disabled":k,autoContrast:N,mod:S,...C}=r,E=qt({name:"Button",props:r,classes:Lp,className:a,style:n,classNames:b,styles:v,unstyled:w,vars:s,varsResolver:hIe}),T=!!d,R=!!u;return o.jsxs(Hh,{ref:e,...E("root",{active:!l&&!p&&!k}),unstyled:w,variant:f,disabled:l||p,mod:[{disabled:l||k,loading:p,block:h,"with-left-section":T,"with-right-section":R},S],...C,children:[o.jsx(Wh,{mounted:!!p,transition:dIe,duration:150,children:B=>o.jsx(vt,{component:"span",...E("loader",{style:B}),"aria-hidden":!0,children:o.jsx(cu,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),o.jsxs("span",{...E("inner"),children:[d&&o.jsx(vt,{component:"span",...E("section"),mod:{position:"left"},children:d}),o.jsx(vt,{component:"span",mod:{loading:p},...E("label"),children:c}),u&&o.jsx(vt,{component:"span",...E("section"),mod:{position:"right"},children:u})]})]})});vo.classes=Lp;vo.displayName="@mantine/core/Button";vo.Group=tA;vo.GroupSection=rA;const[fIe,mIe]=R2("Card component was not found in tree");var nA={root:"m_e615b15f",section:"m_599a2148"};const pIe={},q2=ta((t,e)=>{const r=ot("CardSection",pIe,t),{classNames:n,className:s,style:a,styles:i,vars:l,withBorder:c,inheritPadding:d,mod:u,...h}=r,f=mIe();return o.jsx(vt,{ref:e,mod:[{"with-border":c,"inherit-padding":d},u],...f.getStyles("section",{className:s,style:a,styles:i,classNames:n}),...h})});q2.classes=nA;q2.displayName="@mantine/core/CardSection";const gIe={},xIe=(t,{padding:e})=>({root:{"--card-padding":yy(e)}}),Cy=ta((t,e)=>{const r=ot("Card",gIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,children:d,padding:u,...h}=r,f=qt({name:"Card",props:r,classes:nA,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:xIe}),m=x.Children.toArray(d),p=m.map((g,y)=>typeof g=="object"&&g&&"type"in g&&g.type===q2?x.cloneElement(g,{"data-first-section":y===0||void 0,"data-last-section":y===m.length-1||void 0}):g);return o.jsx(fIe,{value:{getStyles:f},children:o.jsx(V_,{ref:e,unstyled:l,...f("root"),...h,children:p})})});Cy.classes=nA;Cy.displayName="@mantine/core/Card";Cy.Section=q2;const[yIe,vIe]=I_(),bIe={};function ZG(t){const{value:e,defaultValue:r,onChange:n,multiple:s,children:a}=ot("ChipGroup",bIe,t),[i,l]=Rp({value:e,defaultValue:r,finalValue:s?[]:null,onChange:n}),c=u=>Array.isArray(i)?i.includes(u):u===i,d=u=>{const h=u.currentTarget.value;Array.isArray(i)?l(i.includes(h)?i.filter(f=>f!==h):[...i,h]):l(h)};return o.jsx(yIe,{value:{isChipSelected:c,onChange:d,multiple:s},children:a})}ZG.displayName="@mantine/core/ChipGroup";var YG={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const wIe={type:"checkbox"},kIe=(t,{size:e,radius:r,variant:n,color:s,autoContrast:a})=>{const i=t.variantColorResolver({color:s||t.primaryColor,theme:t,variant:n||"filled",autoContrast:a});return{root:{"--chip-fz":ba(e),"--chip-size":Pr(e,"chip-size"),"--chip-radius":r===void 0?void 0:Ds(r),"--chip-checked-padding":Pr(e,"chip-checked-padding"),"--chip-padding":Pr(e,"chip-padding"),"--chip-icon-size":Pr(e,"chip-icon-size"),"--chip-bg":s||n?i.background:void 0,"--chip-hover":s||n?i.hover:void 0,"--chip-color":s||n?i.color:void 0,"--chip-bd":s||n?i.border:void 0,"--chip-spacing":Pr(e,"chip-spacing")}}},G2=Zt((t,e)=>{const r=ot("Chip",wIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,id:d,checked:u,defaultChecked:h,onChange:f,value:m,wrapperProps:p,type:g,disabled:y,children:b,size:v,variant:w,icon:k,rootRef:N,autoContrast:S,mod:C,...E}=r,T=qt({name:"Chip",classes:YG,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:kIe}),R=vIe(),B=vy(d),{styleProps:M,rest:L}=L2(E),[V,ee]=Rp({value:u,defaultValue:h,finalValue:!1,onChange:f}),Q=R?{checked:R.isChipSelected(m),onChange:_=>{R.onChange(_),f==null||f(_.currentTarget.checked)},type:R.multiple?"checkbox":"radio"}:{},J=Q.checked||V;return o.jsxs(vt,{size:v,variant:w,ref:N,mod:C,...T("root"),...M,...p,children:[o.jsx("input",{type:g,...T("input"),checked:J,onChange:_=>ee(_.currentTarget.checked),id:B,disabled:y,ref:e,value:m,...Q,...L}),o.jsxs("label",{htmlFor:B,"data-checked":J||void 0,"data-disabled":y||void 0,...T("label",{variant:w||"filled"}),children:[J&&o.jsx("span",{...T("iconWrapper"),children:k||o.jsx(J_,{...T("checkIcon")})}),o.jsx("span",{children:b})]})]})});G2.classes=YG;G2.displayName="@mantine/core/Chip";G2.Group=ZG;var XG={root:"m_3eebeb36",label:"m_9e365f20"};const CIe={orientation:"horizontal"},NIe=(t,{color:e,variant:r,size:n})=>({root:{"--divider-color":e?Jo(e,t):void 0,"--divider-border-style":r,"--divider-size":Pr(n,"divider-size")}}),sA=Zt((t,e)=>{const r=ot("Divider",CIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,color:d,orientation:u,label:h,labelPosition:f,mod:m,...p}=r,g=qt({name:"Divider",classes:XG,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:NIe});return o.jsx(vt,{ref:e,mod:[{orientation:u,"with-label":!!h},m],...g("root"),...p,role:"separator",children:h&&o.jsx(vt,{component:"span",mod:{position:f},...g("label"),children:h})})});sA.classes=XG;sA.displayName="@mantine/core/Divider";const SIe={multiple:!1},JG=x.forwardRef((t,e)=>{const{onChange:r,children:n,multiple:s,accept:a,name:i,form:l,resetRef:c,disabled:d,capture:u,inputProps:h,...f}=ot("FileButton",SIe,t),m=x.useRef(null),p=()=>{var b;!d&&((b=m.current)==null||b.click())},g=b=>{r(s?Array.from(b.currentTarget.files):b.currentTarget.files[0]||null)};return zw(c,()=>{m.current&&(m.current.value="")}),o.jsxs(o.Fragment,{children:[o.jsx("input",{style:{display:"none"},type:"file",accept:a,multiple:s,onChange:g,ref:gc(e,m),name:i,form:l,capture:u,...h}),n({onClick:p,...f})]})});JG.displayName="@mantine/core/FileButton";const EIe=({value:t})=>o.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),jIe={valueComponent:EIe},aA=Zt((t,e)=>{const r=ot("FileInput",jIe,t),{unstyled:n,vars:s,onChange:a,value:i,defaultValue:l,multiple:c,accept:d,name:u,form:h,valueComponent:f,clearable:m,clearButtonProps:p,readOnly:g,capture:y,fileInputProps:b,rightSection:v,size:w,placeholder:k,component:N,resetRef:S,classNames:C,styles:E,...T}=r,R=x.useRef(null),{resolvedClassNames:B,resolvedStyles:M}=D2({classNames:C,styles:E,props:r}),[L,V]=Rp({value:i,defaultValue:l,onChange:a,finalValue:c?[]:null}),ee=Array.isArray(L)?L.length!==0:L!==null,Q=v||(m&&ee&&!g?o.jsx(F2,{...p,variant:"subtle",onClick:()=>V(c?[]:null),size:w,unstyled:n}):null);x.useEffect(()=>{var _;(Array.isArray(L)&&L.length===0||L===null)&&((_=R.current)==null||_.call(R))},[L]);const J=f;return o.jsx(JG,{onChange:V,multiple:c,accept:d,name:u,form:h,resetRef:gc(R,S),disabled:g,capture:y,inputProps:b,children:_=>o.jsx(Dp,{component:N||"button",ref:e,rightSection:Q,..._,...T,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:r,unstyled:n,size:w,classNames:C,styles:E,children:ee?o.jsx(J,{value:L}):o.jsx(Ja.Placeholder,{__staticSelector:"FileInput",classNames:B,styles:M,children:k})})})});aA.classes=Dp.classes;aA.displayName="@mantine/core/FileInput";const TIe=aA;function _Ie({open:t,close:e,openDelay:r,closeDelay:n}){const s=x.useRef(-1),a=x.useRef(-1),i=()=>{window.clearTimeout(s.current),window.clearTimeout(a.current)},l=()=>{i(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)},c=()=>{i(),n===0||n===void 0?e():a.current=window.setTimeout(e,n)};return x.useEffect(()=>i,[]),{openDropdown:l,closeDropdown:c}}var QG={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ZI={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:xy("overlay")},AIe=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),iA=Zt((t,e)=>{const r=ot("LoadingOverlay",ZI,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,transitionProps:d,loaderProps:u,overlayProps:h,visible:f,zIndex:m,...p}=r,g=ni(),y=qt({name:"LoadingOverlay",classes:QG,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:AIe}),b={...ZI.overlayProps,...h};return o.jsx(Wh,{transition:"fade",...d,mounted:!!f,children:v=>o.jsxs(vt,{...y("root",{style:v}),ref:e,...p,children:[o.jsx(cu,{...y("loader"),unstyled:l,...u}),o.jsx(Cx,{...b,...y("overlay"),darkHidden:!0,unstyled:l,color:(h==null?void 0:h.color)||g.white}),o.jsx(Cx,{...b,...y("overlay"),lightHidden:!0,unstyled:l,color:(h==null?void 0:h.color)||g.colors.dark[5]})]})})});iA.classes=QG;iA.displayName="@mantine/core/LoadingOverlay";const[MIe,Ny]=R2("Menu component was not found in the tree");var $p={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const OIe={},oA=Zt((t,e)=>{const{classNames:r,className:n,style:s,styles:a,vars:i,...l}=ot("MenuDivider",OIe,t),c=Ny();return o.jsx(vt,{ref:e,...c.getStyles("divider",{className:n,style:s,styles:a,classNames:r}),...l})});oA.classes=$p;oA.displayName="@mantine/core/MenuDivider";const RIe={},lA=Zt((t,e)=>{const{classNames:r,className:n,style:s,styles:a,vars:i,onMouseEnter:l,onMouseLeave:c,onKeyDown:d,children:u,...h}=ot("MenuDropdown",RIe,t),f=x.useRef(null),m=Ny(),p=Bo(d,b=>{var v,w;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(w=(v=f.current)==null?void 0:v.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),g=Bo(l,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.openDropdown()),y=Bo(c,()=>(m.trigger==="hover"||m.trigger==="click-hover")&&m.closeDropdown());return o.jsxs(lu.Dropdown,{...h,onMouseEnter:g,onMouseLeave:y,role:"menu","aria-orientation":"vertical",ref:gc(e,f),...m.getStyles("dropdown",{className:n,style:s,styles:a,classNames:r,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[m.withInitialFocusPlaceholder&&o.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});lA.classes=$p;lA.displayName="@mantine/core/MenuDropdown";const PIe={},cA=ta((t,e)=>{const{classNames:r,className:n,style:s,styles:a,vars:i,color:l,closeMenuOnClick:c,leftSection:d,rightSection:u,children:h,disabled:f,"data-disabled":m,...p}=ot("MenuItem",PIe,t),g=Ny(),y=ni(),{dir:b}=wy(),v=x.useRef(null),w=g.getItemIndex(v.current),k=p,N=Bo(k.onMouseLeave,()=>g.setHovered(-1)),S=Bo(k.onMouseEnter,()=>g.setHovered(g.getItemIndex(v.current))),C=Bo(k.onClick,()=>{m||(typeof c=="boolean"?c&&g.closeDropdownImmediately():g.closeOnItemClick&&g.closeDropdownImmediately())}),E=Bo(k.onFocus,()=>g.setHovered(g.getItemIndex(v.current))),T=l?y.variantColorResolver({color:l,theme:y,variant:"light"}):void 0,R=l?Pp({color:l,theme:y}):null;return o.jsxs(Hh,{...p,unstyled:g.unstyled,tabIndex:g.menuItemTabIndex,onFocus:E,...g.getStyles("item",{className:n,style:s,styles:a,classNames:r}),ref:gc(v,e),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||m||void 0,"data-hovered":g.hovered===w?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:N,onClick:C,onKeyDown:aG({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:g.loop,dir:b,orientation:"vertical",onKeyDown:k.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:T==null?void 0:T.color,"--menu-item-hover":T==null?void 0:T.hover},children:[d&&o.jsx("div",{...g.getStyles("itemSection",{styles:a,classNames:r}),"data-position":"left",children:d}),h&&o.jsx("div",{...g.getStyles("itemLabel",{styles:a,classNames:r}),children:h}),u&&o.jsx("div",{...g.getStyles("itemSection",{styles:a,classNames:r}),"data-position":"right",children:u})]})});cA.classes=$p;cA.displayName="@mantine/core/MenuItem";const IIe={},dA=Zt((t,e)=>{const{classNames:r,className:n,style:s,styles:a,vars:i,...l}=ot("MenuLabel",IIe,t),c=Ny();return o.jsx(vt,{ref:e,...c.getStyles("label",{className:n,style:s,styles:a,classNames:r}),...l})});dA.classes=$p;dA.displayName="@mantine/core/MenuLabel";const DIe={refProp:"ref"},eK=x.forwardRef((t,e)=>{const{children:r,refProp:n,...s}=ot("MenuTarget",DIe,t);if(!gy(r))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const a=Ny(),i=r.props,l=Bo(i.onClick,()=>{a.trigger==="click"?a.toggleDropdown():a.trigger==="click-hover"&&(a.setOpenedViaClick(!0),a.opened||a.openDropdown())}),c=Bo(i.onMouseEnter,()=>(a.trigger==="hover"||a.trigger==="click-hover")&&a.openDropdown()),d=Bo(i.onMouseLeave,()=>{(a.trigger==="hover"||a.trigger==="click-hover"&&!a.openedViaClick)&&a.closeDropdown()});return o.jsx(lu.Target,{refProp:n,popupType:"menu",ref:e,...s,children:x.cloneElement(r,{onClick:l,onMouseEnter:c,onMouseLeave:d,"data-expanded":a.opened?!0:void 0})})});eK.displayName="@mantine/core/MenuTarget";const LIe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function an(t){const e=ot("Menu",LIe,t),{children:r,onOpen:n,onClose:s,opened:a,defaultOpened:i,trapFocus:l,onChange:c,closeOnItemClick:d,loop:u,closeOnEscape:h,trigger:f,openDelay:m,closeDelay:p,classNames:g,styles:y,unstyled:b,variant:v,vars:w,menuItemTabIndex:k,keepMounted:N,withInitialFocusPlaceholder:S,...C}=e,E=qt({name:"Menu",classes:$p,props:e,classNames:g,styles:y,unstyled:b}),[T,{setHovered:R,resetHovered:B}]=NRe(),[M,L]=Rp({value:a,defaultValue:i,finalValue:!1,onChange:c}),[V,ee]=x.useState(!1),Q=()=>{L(!1),ee(!1),M&&(s==null||s())},J=()=>{L(!0),!M&&(n==null||n())},_=()=>{M?Q():J()},{openDropdown:H,closeDropdown:P}=_Ie({open:J,close:Q,closeDelay:p,openDelay:m}),K=z=>CRe("[data-menu-item]","[data-menu-dropdown]",z),{resolvedClassNames:F,resolvedStyles:ne}=D2({classNames:g,styles:y,props:e});return Gd(()=>{B()},[M]),o.jsx(MIe,{value:{getStyles:E,opened:M,toggleDropdown:_,getItemIndex:K,hovered:T,setHovered:R,openedViaClick:V,setOpenedViaClick:ee,closeOnItemClick:d,closeDropdown:f==="click"?Q:P,openDropdown:f==="click"?J:H,closeDropdownImmediately:Q,loop:u,trigger:f,unstyled:b,menuItemTabIndex:k,withInitialFocusPlaceholder:S},children:o.jsx(lu,{...C,opened:M,onChange:_,defaultOpened:i,trapFocus:N?!1:l,closeOnEscape:h,__staticSelector:"Menu",classNames:F,styles:ne,unstyled:b,variant:v,keepMounted:N,children:r})})}an.extend=t=>t;an.withProps=Y8e(an);an.classes=$p;an.displayName="@mantine/core/Menu";an.Item=cA;an.Label=dA;an.Dropdown=lA;an.Target=eK;an.Divider=oA;const $Ie={duration:100,transition:"fade"};function FIe(t,e){return{...$Ie,...e,...t}}function BIe({offset:t,position:e,defaultOpened:r}){const[n,s]=x.useState(r),a=x.useRef(null),{x:i,y:l,elements:c,refs:d,update:u,placement:h}=Np({placement:e,middleware:[Bh({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=h.includes("right")?t:e.includes("left")?t*-1:0,m=h.includes("bottom")?t:e.includes("top")?t*-1:0,p=x.useCallback(({clientX:g,clientY:y})=>{d.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:g,y,left:g+f,top:y+m,right:g,bottom:y}}})},[c.reference]);return x.useEffect(()=>{if(d.floating.current){const g=a.current;g.addEventListener("mousemove",p);const y=Hl(d.floating.current);return y.forEach(b=>{b.addEventListener("scroll",u)}),()=>{g.removeEventListener("mousemove",p),y.forEach(b=>{b.removeEventListener("scroll",u)})}}},[c.reference,d.floating.current,u,p,n]),{handleMouseMove:p,x:i,y:l,opened:n,setOpened:s,boundaryRef:a,floating:d.setFloating}}var K2={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const zIe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:xy("popover")},UIe=(t,{radius:e,color:r})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ds(e),"--tooltip-bg":r?Jo(r,t):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),uA=Zt((t,e)=>{const r=ot("TooltipFloating",zIe,t),{children:n,refProp:s,withinPortal:a,style:i,className:l,classNames:c,styles:d,unstyled:u,radius:h,color:f,label:m,offset:p,position:g,multiline:y,zIndex:b,disabled:v,defaultOpened:w,variant:k,vars:N,portalProps:S,...C}=r,E=ni(),T=qt({name:"TooltipFloating",props:r,classes:K2,className:l,style:i,classNames:c,styles:d,unstyled:u,rootSelector:"tooltip",vars:N,varsResolver:UIe}),{handleMouseMove:R,x:B,y:M,opened:L,boundaryRef:V,floating:ee,setOpened:Q}=BIe({offset:p,position:g,defaultOpened:w});if(!gy(n))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const J=gc(V,D_(n),e),_=n.props,H=K=>{var F;(F=_.onMouseEnter)==null||F.call(_,K),R(K),Q(!0)},P=K=>{var F;(F=_.onMouseLeave)==null||F.call(_,K),Q(!1)};return o.jsxs(o.Fragment,{children:[o.jsx(ky,{...S,withinPortal:a,children:o.jsx(vt,{...C,...T("tooltip",{style:{...kG(i,E),zIndex:b,display:!v&&L?"block":"none",top:(M&&Math.round(M))??"",left:(B&&Math.round(B))??""}}),variant:k,ref:ee,mod:{multiline:y},children:m})}),x.cloneElement(n,{..._,[s]:J,onMouseEnter:H,onMouseLeave:P})]})});uA.classes=K2;uA.displayName="@mantine/core/TooltipFloating";const tK=x.createContext(!1),VIe=tK.Provider,HIe=()=>x.useContext(tK),WIe={openDelay:0,closeDelay:0};function hA(t){const{openDelay:e,closeDelay:r,children:n}=ot("TooltipGroup",WIe,t);return o.jsx(VIe,{value:!0,children:o.jsx(Ebe,{delay:{open:e,close:r},children:n})})}hA.displayName="@mantine/core/TooltipGroup";hA.extend=t=>t;function qIe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function GIe(t){const e=qIe(t.middlewares),r=[sl(t.offset)];return e.shift&&r.push(Bh(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&r.push(typeof e.flip=="boolean"?uo():uo(e.flip)),r.push(Lz({element:t.arrowRef,padding:t.arrowOffset})),e.inline?r.push(typeof e.inline=="boolean"?eg():eg(e.inline)):t.inline&&r.push(eg()),r}function KIe(t){var S,C,E;const[e,r]=x.useState(t.defaultOpened),s=typeof t.opened=="boolean"?t.opened:e,a=HIe(),i=vy(),l=x.useCallback(T=>{r(T),T&&v(i)},[i]),{x:c,y:d,context:u,refs:h,update:f,placement:m,middlewareData:{arrow:{x:p,y:g}={}}}=Np({strategy:t.strategy,placement:t.position,open:s,onOpenChange:l,middleware:GIe(t)}),{delay:y,currentId:b,setCurrentId:v}=jbe(u,{id:i}),{getReferenceProps:w,getFloatingProps:k}=Wz([Nbe(u,{enabled:(S=t.events)==null?void 0:S.hover,delay:a?y:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((C=t.events)!=null&&C.touch)}),Fbe(u,{enabled:(E=t.events)==null?void 0:E.focus,visibleOnly:!0}),zbe(u,{role:"tooltip"}),Hz(u,{enabled:typeof t.opened>"u"})]);DG({opened:s,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:h,update:f}}),Gd(()=>{var T;(T=t.onPositionChange)==null||T.call(t,m)},[m]);const N=s&&b&&b!==i;return{x:c,y:d,arrowX:p,arrowY:g,reference:h.setReference,floating:h.setFloating,getFloatingProps:k,getReferenceProps:w,isGroupPhase:N,opened:s,placement:m}}const YI={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:xy("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},ZIe=(t,{radius:e,color:r})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ds(e),"--tooltip-bg":r?Jo(r,t):void 0,"--tooltip-color":r?"var(--mantine-color-white)":void 0}}),Fp=Zt((t,e)=>{const r=ot("Tooltip",YI,t),{children:n,position:s,refProp:a,label:i,openDelay:l,closeDelay:c,onPositionChange:d,opened:u,defaultOpened:h,withinPortal:f,radius:m,color:p,classNames:g,styles:y,unstyled:b,style:v,className:w,withArrow:k,arrowSize:N,arrowOffset:S,arrowRadius:C,arrowPosition:E,offset:T,transitionProps:R,multiline:B,events:M,zIndex:L,disabled:V,positionDependencies:ee,onClick:Q,onMouseEnter:J,onMouseLeave:_,inline:H,variant:P,keepMounted:K,vars:F,portalProps:ne,mod:z,floatingStrategy:Z,middlewares:oe,...ue}=ot("Tooltip",YI,r),{dir:_e}=wy(),we=x.useRef(null),Y=KIe({position:AG(_e,s),closeDelay:c,openDelay:l,onPositionChange:d,opened:u,defaultOpened:h,events:M,arrowRef:we,arrowOffset:S,offset:typeof T=="number"?T+(k?N/2:0):T,positionDependencies:[...ee,n],inline:H,strategy:Z,middlewares:oe}),le=qt({name:"Tooltip",props:r,classes:K2,className:w,style:v,classNames:g,styles:y,unstyled:b,rootSelector:"tooltip",vars:F,varsResolver:ZIe});if(!gy(n))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=gc(Y.reference,D_(n),e),Ve=FIe(R,{duration:100,transition:"fade"}),Be=n.props;return o.jsxs(o.Fragment,{children:[o.jsx(ky,{...ne,withinPortal:f,children:o.jsx(Wh,{...Ve,keepMounted:K,mounted:!V&&!!Y.opened,duration:Y.isGroupPhase?10:Ve.duration,children:ut=>o.jsxs(vt,{...ue,"data-fixed":Z==="fixed"||void 0,variant:P,mod:[{multiline:B},z],...Y.getFloatingProps({ref:Y.floating,className:le("tooltip").className,style:{...le("tooltip").style,...ut,zIndex:L,top:Y.y??0,left:Y.x??0}}),children:[i,o.jsx(H_,{ref:we,arrowX:Y.arrowX,arrowY:Y.arrowY,visible:k,position:Y.placement,arrowSize:N,arrowOffset:S,arrowRadius:C,arrowPosition:E,...le("arrow")})]})})}),x.cloneElement(n,Y.getReferenceProps({onClick:Q,onMouseEnter:J,onMouseLeave:_,onMouseMove:r.onMouseMove,onPointerDown:r.onPointerDown,onPointerEnter:r.onPointerEnter,className:rl(w,Be.className),...Be,[a]:ye}))]})});Fp.classes=K2;Fp.displayName="@mantine/core/Tooltip";Fp.Floating=uA;Fp.Group=hA;var rK={root:"m_18320242","skeleton-fade":"m_299c329c"};const YIe={visible:!0,animate:!0},XIe=(t,{width:e,height:r,radius:n,circle:s})=>({root:{"--skeleton-height":Oe(r),"--skeleton-width":Oe(s?r:e),"--skeleton-radius":s?"1000px":n===void 0?void 0:Ds(n)}}),Vw=Zt((t,e)=>{const r=ot("Skeleton",YIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,width:d,height:u,circle:h,visible:f,radius:m,animate:p,mod:g,...y}=r,b=qt({name:"Skeleton",classes:rK,props:r,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:XIe});return o.jsx(vt,{ref:e,...b("root"),mod:[{visible:f,animate:p},g],...y})});Vw.classes=rK;Vw.displayName="@mantine/core/Skeleton";var nK={root:"m_6d731127"};const JIe={gap:"md",align:"stretch",justify:"flex-start"},QIe=(t,{gap:e,align:r,justify:n})=>({root:{"--stack-gap":yy(e),"--stack-align":r,"--stack-justify":n}}),Sy=Zt((t,e)=>{const r=ot("Stack",JIe,t),{classNames:n,className:s,style:a,styles:i,unstyled:l,vars:c,align:d,justify:u,gap:h,variant:f,...m}=r,p=qt({name:"Stack",props:r,classes:nK,className:s,style:a,classNames:n,styles:i,unstyled:l,vars:c,varsResolver:QIe});return o.jsx(vt,{ref:e,...p("root"),variant:f,...m})});Sy.classes=nK;Sy.displayName="@mantine/core/Stack";const[e7e,fA]=R2("Tabs component was not found in the tree");var Ey={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const t7e={},mA=Zt((t,e)=>{const r=ot("TabsList",t7e,t),{children:n,className:s,grow:a,justify:i,classNames:l,styles:c,style:d,mod:u,...h}=r,f=fA();return o.jsx(vt,{...h,...f.getStyles("list",{className:s,style:d,classNames:l,styles:c,props:r,variant:f.variant}),ref:e,role:"tablist",variant:f.variant,mod:[{grow:a,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},u],"aria-orientation":f.orientation,__vars:{"--tabs-justify":i},children:n})});mA.classes=Ey;mA.displayName="@mantine/core/TabsList";const r7e={},pA=Zt((t,e)=>{const r=ot("TabsPanel",r7e,t),{children:n,className:s,value:a,classNames:i,styles:l,style:c,mod:d,keepMounted:u,...h}=r,f=fA(),m=f.value===a,p=f.keepMounted||u||m?n:null;return o.jsx(vt,{...h,...f.getStyles("panel",{className:s,classNames:i,styles:l,style:[c,m?void 0:{display:"none"}],props:r}),ref:e,mod:[{orientation:f.orientation},d],role:"tabpanel",id:f.getPanelId(a),"aria-labelledby":f.getTabId(a),children:p})});pA.classes=Ey;pA.displayName="@mantine/core/TabsPanel";const n7e={},gA=Zt((t,e)=>{const r=ot("TabsTab",n7e,t),{className:n,children:s,rightSection:a,leftSection:i,value:l,onClick:c,onKeyDown:d,disabled:u,color:h,style:f,classNames:m,styles:p,vars:g,mod:y,tabIndex:b,...v}=r,w=ni(),{dir:k}=wy(),N=fA(),S=l===N.value,C=T=>{N.onChange(N.allowTabDeactivation&&l===N.value?null:l),c==null||c(T)},E={classNames:m,styles:p,props:r};return o.jsxs(Hh,{...v,...N.getStyles("tab",{className:n,style:f,variant:N.variant,...E}),disabled:u,unstyled:N.unstyled,variant:N.variant,mod:[{active:S,disabled:u,orientation:N.orientation,inverted:N.inverted,placement:N.orientation==="vertical"&&N.placement},y],ref:e,role:"tab",id:N.getTabId(l),"aria-selected":S,tabIndex:b!==void 0?b:S||N.value===null?0:-1,"aria-controls":N.getPanelId(l),onClick:C,__vars:{"--tabs-color":h?Jo(h,w):void 0},onKeyDown:aG({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:N.activateTabWithKeyboard,loop:N.loop,orientation:N.orientation||"horizontal",dir:k,onKeyDown:d}),children:[i&&o.jsx("span",{...N.getStyles("tabSection",E),"data-position":"left",children:i}),s&&o.jsx("span",{...N.getStyles("tabLabel",E),children:s}),a&&o.jsx("span",{...N.getStyles("tabSection",E),"data-position":"right",children:a})]})});gA.classes=Ey;gA.displayName="@mantine/core/TabsTab";const XI="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",s7e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},a7e=(t,{radius:e,color:r,autoContrast:n})=>({root:{"--tabs-radius":Ds(e),"--tabs-color":Jo(r,t),"--tabs-text-color":A8e(n,t)?pG({color:r,theme:t,autoContrast:n}):void 0}}),Ll=Zt((t,e)=>{const r=ot("Tabs",s7e,t),{defaultValue:n,value:s,onChange:a,orientation:i,children:l,loop:c,id:d,activateTabWithKeyboard:u,allowTabDeactivation:h,variant:f,color:m,radius:p,inverted:g,placement:y,keepMounted:b,classNames:v,styles:w,unstyled:k,className:N,style:S,vars:C,autoContrast:E,mod:T,...R}=r,B=vy(d),[M,L]=Rp({value:s,defaultValue:n,finalValue:null,onChange:a}),V=qt({name:"Tabs",props:r,classes:Ey,className:N,style:S,classNames:v,styles:w,unstyled:k,vars:C,varsResolver:a7e});return o.jsx(e7e,{value:{placement:y,value:M,orientation:i,id:B,loop:c,activateTabWithKeyboard:u,getTabId:_I(`${B}-tab`,XI),getPanelId:_I(`${B}-panel`,XI),onChange:L,allowTabDeactivation:h,variant:f,color:m,radius:p,inverted:g,keepMounted:b,unstyled:k,getStyles:V},children:o.jsx(vt,{ref:e,id:B,variant:f,mod:[{orientation:i,inverted:i==="horizontal"&&g,placement:i==="vertical"&&y},T],...V("root"),...R,children:l})})});Ll.classes=Ey;Ll.displayName="@mantine/core/Tabs";Ll.Tab=gA;Ll.Panel=pA;Ll.List=mA;const i7e={},Z2=Zt((t,e)=>{const r=ot("TextInput",i7e,t);return o.jsx(Dp,{component:"input",ref:e,...r,__staticSelector:"TextInput"})});Z2.classes=Dp.classes;Z2.displayName="@mantine/core/TextInput";const sK=(t,e,r=!1)=>{const n=[];function s(a,i="--bn"){for(const l in a){const c=l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=`${i}-${c}`;typeof a[l]!="object"?(typeof a[l]=="number"&&(a[l]=`${a[l]}px`),r?e.style.removeProperty(d):e.style.setProperty(d,a[l].toString())):s(a[l],d)}}return s(t),n},JI=(t,e)=>sK(t,e),o7e={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},l7e=t=>sK(o7e,t,!0),aK=t=>o.jsxs(Sy,{gap:0,className:"bn-tooltip",children:[o.jsx(Qo,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&o.jsx(Qo,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),vS=x.forwardRef((t,e)=>{const{className:r,children:n,mainTooltip:s,secondaryTooltip:a,icon:i,isSelected:l,isDisabled:c,onClick:d,label:u,variant:h,...f}=t;Rt(f,!1);const[m,p]=x.useState(!1),g=n?o.jsx(vo,{"aria-label":u,className:r,onMouseDown:y=>{b4()&&y.currentTarget.focus()},onClick:y=>{p(!0),d==null||d(y)},onPointerLeave:()=>p(!1),"aria-pressed":l,"data-selected":l||void 0,"data-test":s?s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?"compact-xs":"xs",disabled:c||!1,ref:e,...f,children:n}):o.jsx(qh,{className:r,"aria-label":u,onMouseDown:y=>{b4()&&y.currentTarget.focus()},onClick:y=>{p(!0),d==null||d(y)},onPointerLeave:()=>p(!1),"aria-pressed":l,"data-selected":l||void 0,"data-test":s?s.slice(0,1).toLowerCase()+s.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?20:30,disabled:c||!1,ref:e,...f,children:i});return s?o.jsx(Fp,{disabled:m,withinPortal:!1,label:o.jsx(aK,{mainTooltip:s,secondaryTooltip:a}),children:g}):g}),c7e=x.forwardRef((t,e)=>{const{className:r,text:n,icon:s,isSelected:a,mainTooltip:i,secondaryTooltip:l,onClick:c,onMouseEnter:d,...u}=t;Rt(u,!1);const[h,f]=x.useState(!1),m=o.jsxs(G2,{className:r,checked:a===!0,wrapperProps:{onMouseEnter:d,onMouseLeave:()=>f(!1),onClick:p=>{f(!0),c==null||c(p)}},variant:"light",icon:null,ref:e,children:[o.jsx("span",{children:s}),o.jsx("span",{children:n})]});return!i||h?m:o.jsx(Fp,{refProp:"rootRef",withinPortal:!1,label:o.jsx(aK,{mainTooltip:i,secondaryTooltip:l}),children:m})}),d7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s),o.jsx(us,{className:r,ref:e,children:n})}),u7e=x.forwardRef((t,e)=>{const{className:r,children:n,headerText:s,selected:a,onFocus:i,onBlur:l,tabIndex:c,...d}=t;Rt(d,!1);const u=x.useRef(null);return x.useEffect(()=>{var h;a&&((h=u.current)==null||h.scrollIntoView({behavior:"smooth",block:"center"}))},[a]),o.jsxs(Cy,{className:Dr(r,a?"selected":""),onFocus:i,onBlur:l,tabIndex:c,ref:A_([e,u]),children:[s&&o.jsx(Qo,{className:"bn-header-text",children:s}),n]})}),h7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s,!1),o.jsx(Cy.Section,{className:r,ref:e,children:n})}),f7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s,!1),o.jsx(sA,{className:r,label:o.jsx(Qo,{children:n}),ref:e})}),m7e=x.forwardRef((t,e)=>{const{authorInfo:r,timeString:n,edited:s,...a}=t,i=jt();return Rt(a,!1),r==="loading"?o.jsxs(us,{children:[o.jsx(Vw,{height:24,width:24}),o.jsx("div",{children:o.jsx(Vw,{height:12,width:100})})]}):o.jsxs(us,{children:[o.jsx(W2,{src:r.avatarUrl,alt:r.username,radius:"xl",size:"sm",color:"initials"}),o.jsxs(Qo,{fz:"sm",fw:"bold",children:[r.username,o.jsxs(Qo,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[n," ",s&&`(${i.comments.edited})`]})]})]})}),p7e=x.forwardRef((t,e)=>{const{className:r,showActions:n,authorInfo:s,timeString:a,edited:i,actions:l,children:c,...d}=t,{hovered:u,ref:h}=FRe(),{focused:f,ref:m}=uG(),p=A_([e,h]);return Rt(d,!1),o.jsxs(us,{pos:"relative",ref:p,className:r,children:[l&&(n===!0||n===void 0||n==="hover"&&u||f)?o.jsx(us,{ref:m,style:{position:"absolute",right:0,top:0,zIndex:10},children:l}):null,o.jsx(m7e,{...t}),c]})}),g7e=x.forwardRef((t,e)=>{const{className:r,autoFocus:n,onFocus:s,onBlur:a,editor:i,editable:l,...c}=t;Rt(c,!1);const d=yo();return o.jsx(dK,{autoFocus:n,className:r,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:l,theme:d==null?void 0:d.colorSchemePreference,ref:e,onFocus:s,onBlur:a,children:o.jsx(Kq,{formattingToolbar:x7e})})}),x7e=()=>{const t=qq([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return o.jsx(Gq,{blockTypeSelectItems:[],children:t})},y7e=x.forwardRef((t,e)=>{const{className:r,name:n,label:s,variant:a,icon:i,value:l,autoFocus:c,placeholder:d,disabled:u,onKeyDown:h,onChange:f,onSubmit:m,autoComplete:p,rightSection:g,...y}=t;return Rt(y),o.jsx(Z2,{size:"xs",className:Dr(r||"",a==="large"?"bn-mt-input-large":""),ref:e,name:n,label:s,leftSection:i,value:l,autoFocus:c,"data-autofocus":c?"true":void 0,rightSection:g,placeholder:d,disabled:u,onKeyDown:h,onChange:f,onSubmit:m,autoComplete:p})});var iK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QI=st.createContext&&st.createContext(iK),v7e=["attr","size","title"];function b7e(t,e){if(t==null)return{};var r=w7e(t,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function w7e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hw.apply(this,arguments)}function e7(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Ww(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e7(Object(r),!0).forEach(function(n){k7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k7e(t,e,r){return e=C7e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C7e(t){var e=N7e(t,"string");return typeof e=="symbol"?e:e+""}function N7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oK(t){return t&&t.map((e,r)=>st.createElement(e.tag,Ww({key:r},e.attr),oK(e.child)))}function lK(t){return e=>st.createElement(S7e,Hw({attr:Ww({},t.attr)},e),oK(t.child))}function S7e(t){var e=r=>{var{attr:n,size:s,title:a}=t,i=b7e(t,v7e),l=s||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),st.createElement("svg",Hw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:Ww(Ww({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&st.createElement("title",null,a),t.children)};return QI!==void 0?st.createElement(QI.Consumer,null,r=>e(r)):e(iK)}function E7e(t){return lK({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function j7e(t){return lK({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const cK=x.createContext(void 0),T7e=x.forwardRef((t,e)=>{const{children:r,onOpenChange:n,position:s,sub:a,...i}=t;Rt(i);const[l,c]=x.useState(!1),d=x.useRef(null),u=x.useRef(void 0),h=x.useCallback(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!1)},250)},[]),f=x.useCallback(()=>{u.current&&clearTimeout(u.current),c(!0)},[]);return o.jsx(cK.Provider,{value:{onMenuMouseOver:f,onMenuMouseLeave:h},children:o.jsx(an.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:by(e,d),onMouseOver:f,onMouseLeave:h,children:o.jsx(an,{portalProps:{target:d.current?d.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:l,onChange:n,position:s,children:r})})})}),_7e=t=>{const{children:e,onOpenChange:r,position:n,sub:s,...a}=t;return Rt(a),s?o.jsx(T7e,{...t}):o.jsx(an,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:r,position:n,children:e})},A7e=x.forwardRef((t,e)=>{const{className:r,children:n,icon:s,checked:a,subTrigger:i,onClick:l,...c}=t;return Rt(c,!1),i?o.jsxs("div",{onClick:d=>{d.preventDefault(),d.stopPropagation()},ref:e,...c,children:[n,o.jsx(j7e,{size:15})]}):o.jsx(an.Item,{className:r,ref:e,leftSection:s,rightSection:a?o.jsx(J_,{size:10}):a===!1?o.jsx("div",{className:"bn-tick-space"}):null,onClick:l,...c,children:n})}),M7e=t=>{const{children:e,sub:r,...n}=t;return Rt(n),o.jsx(an.Target,{children:e})},O7e=x.forwardRef((t,e)=>{const{className:r,children:n,sub:s,...a}=t;Rt(a);const i=x.useContext(cK);return o.jsx(an.Dropdown,{className:r,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:n})}),R7e=x.forwardRef((t,e)=>{const{className:r,...n}=t;return Rt(n),o.jsx(an.Divider,{className:r,ref:e})}),P7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s),o.jsx(an.Label,{className:r,ref:e,children:n})}),I7e=x.forwardRef((t,e)=>{const{className:r,children:n,icon:s,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,label:d,...u}=t;return Rt(u,!1),s?o.jsx(qh,{size:24,className:r,ref:e,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,"aria-label":d,...u,children:s}):o.jsx(vo,{className:r,ref:e,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,"aria-label":d,...u,children:n})}),D7e=x.forwardRef((t,e)=>{const{className:r,tabs:n,defaultOpenTab:s,openTab:a,setOpenTab:i,loading:l,...c}=t;return Rt(c),o.jsx(us,{className:r,ref:e,children:o.jsxs(Ll,{value:a,defaultValue:s,onChange:i,children:[l&&o.jsx(iA,{visible:l}),o.jsx(Ll.List,{children:n.map(d=>o.jsx(Ll.Tab,{"data-test":`${d.name.toLowerCase()}-tab`,value:d.name,children:d.name},d.name))}),n.map(d=>o.jsx(Ll.Panel,{value:d.name,children:d.tabPanel},d.name))]})})}),L7e=x.forwardRef((t,e)=>{const{className:r,children:n,onClick:s,label:a,...i}=t;return Rt(i),o.jsx(vo,{size:"xs","aria-label":a,className:r,ref:e,onClick:s,...i,children:n})}),$7e=x.forwardRef((t,e)=>{const{className:r,accept:n,value:s,placeholder:a,onChange:i,...l}=t;return Rt(l),o.jsx(TIe,{size:"xs",className:r,ref:e,accept:n,value:s,placeholder:a,onChange:i,...l})}),F7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s),o.jsx("div",{className:r,ref:e,children:n})}),B7e=x.forwardRef((t,e)=>{const{className:r,value:n,placeholder:s,onKeyDown:a,onChange:i,...l}=t;return Rt(l),o.jsx(Z2,{size:"xs","data-test":"embed-input",className:r,ref:e,value:n,placeholder:s,onKeyDown:a,onChange:i})}),z7e=t=>{const{opened:e,position:r,children:n,...s}=t;return Rt(s),o.jsx(lu,{withinPortal:!1,opened:e,position:r,children:n})},U7e=t=>{const{children:e,...r}=t;return Rt(r),o.jsx(q_,{children:e})},V7e=x.forwardRef((t,e)=>{const{className:r,children:n,variant:s,...a}=t;return Rt(a),o.jsx($2,{className:r,ref:e,children:n})}),H7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s,!1),o.jsx(us,{align:"center",gap:0,className:r,ref:e,...s,children:n})}),W7e=x.forwardRef((t,e)=>{const{className:r,children:n,icon:s,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,label:d,...u}=t;return Rt(u,!1),s?o.jsx(qh,{size:24,className:r,ref:e,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,"aria-label":d,...u,children:s}):o.jsx(vo,{className:r,ref:e,onClick:a,onDragEnd:i,onDragStart:l,draggable:c,"aria-label":d,...u,children:n})}),q7e=x.forwardRef((t,e)=>{const{className:r,children:n,id:s,...a}=t;return Rt(a),o.jsx(Sy,{gap:0,className:r,ref:e,id:s,role:"listbox",children:n})}),G7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s),o.jsx(us,{className:r,ref:e,children:o.jsx(us,{className:"bn-mt-suggestion-menu-item-title",children:n})})}),K7e=x.forwardRef((t,e)=>{const{className:r,isSelected:n,onClick:s,item:a,id:i,...l}=t;Rt(l);const c=x.useRef(null);return x.useEffect(()=>{if(!c.current||!n)return;const d=rG(c.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));d==="top"?c.current.scrollIntoView(!0):d==="bottom"&&c.current.scrollIntoView(!1)},[n]),o.jsxs(us,{gap:0,className:r,ref:by(e,c),id:i,role:"option",onMouseDown:d=>d.preventDefault(),onClick:s,"aria-selected":n||void 0,children:[a.icon&&o.jsx(us,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:a.icon}),o.jsxs(Sy,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[o.jsx(Qo,{className:"bn-mt-suggestion-menu-item-title",children:a.title}),o.jsx(Qo,{className:"bn-mt-suggestion-menu-item-subtitle",children:a.subtext})]}),a.badge&&o.jsx(us,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:o.jsx(eA,{size:"xs",children:a.badge})})]})}),Z7e=x.forwardRef((t,e)=>{const{className:r,children:n,...s}=t;return Rt(s),o.jsx(us,{className:r,ref:e,children:n})}),Y7e=x.forwardRef((t,e)=>{const{className:r,...n}=t;return Rt(n),o.jsx(cu,{className:r,type:"dots",size:16,ref:e})}),X7e=x.forwardRef((t,e)=>{const{className:r,children:n,id:s,columns:a,...i}=t;return Rt(i),o.jsx("div",{className:r,style:{gridTemplateColumns:`repeat(${a}, 1fr)`},ref:e,id:s,role:"grid",children:n})}),J7e=x.forwardRef((t,e)=>{const{className:r,children:n,columns:s,...a}=t;return Rt(a),o.jsx(us,{className:r,style:{gridColumn:`1 / ${s+1}`},ref:e,children:o.jsx(us,{className:"bn-mt-suggestion-menu-item-title",children:n})})}),Q7e=x.forwardRef((t,e)=>{const{className:r,isSelected:n,onClick:s,item:a,id:i,...l}=t;Rt(l);const c=x.useRef(null);return x.useEffect(()=>{if(!c.current||!n)return;const d=rG(c.current,document.querySelector(".bn-grid-suggestion-menu"));d==="top"?c.current.scrollIntoView(!0):d==="bottom"&&c.current.scrollIntoView(!1)},[n]),o.jsx("div",{className:r,ref:by(e,c),id:i,role:"option",onClick:s,"aria-selected":n||void 0,children:a.icon})}),eDe=x.forwardRef((t,e)=>{const{className:r,children:n,columns:s,...a}=t;return Rt(a),o.jsx(cu,{className:r,style:{gridColumn:`1 / ${s+1}`},type:"dots",ref:e})}),tDe=x.forwardRef((t,e)=>{const{children:r,className:n,onMouseDown:s,onClick:a,...i}=t;return Rt(i,!1),o.jsx(vo,{className:n,ref:e,onMouseDown:s,onClick:a,...i,children:r})}),rDe=x.forwardRef((t,e)=>{const{className:r,children:n,draggable:s,onDragStart:a,onDragEnd:i,style:l,label:c,...d}=t;return Rt(d,!1),o.jsx(vo,{className:r,ref:e,"aria-label":c,draggable:s,onDragStart:a,onDragEnd:i,style:l,...d,children:n})}),bS=x.forwardRef((t,e)=>{const{className:r,children:n,onMouseEnter:s,onMouseLeave:a,variant:i,...l}=t;Rt(l);const{ref:c,focused:d}=uG(),u=dG(d),h=by(e,c,u);return o.jsx(X_,{className:r,ref:h,role:"toolbar",onMouseEnter:s,onMouseLeave:a,gap:i==="action-toolbar"?2:void 0,children:n})}),wS=x.forwardRef((t,e)=>{const{className:r,items:n,isDisabled:s,...a}=t;Rt(a);const i=n.filter(l=>l.isSelected)[0];return i?o.jsxs(an,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:s,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[o.jsx(an.Target,{children:o.jsx(vo,{onMouseDown:l=>{b4()&&l.currentTarget.focus()},leftSection:i.icon,rightSection:o.jsx(E7e,{}),size:"xs",variant:"subtle",disabled:s,children:i.text})}),o.jsx(an.Dropdown,{className:r,ref:e,children:n.map(l=>o.jsx(an.Item,{onClick:l.onClick,leftSection:l.icon,rightSection:l.isSelected?o.jsx(J_,{size:10,className:"bn-tick-icon"}):o.jsx("div",{className:"bn-tick-space"}),disabled:l.isDisabled,children:l.text},l.text))})]}):null}),nDe={FormattingToolbar:{Root:bS,Button:vS,Select:wS},FilePanel:{Root:D7e,Button:L7e,FileInput:$7e,TabPanel:F7e,TextInput:B7e},GridSuggestionMenu:{Root:X7e,Item:Q7e,EmptyItem:J7e,Loader:eDe},LinkToolbar:{Root:bS,Button:vS,Select:wS},SideMenu:{Root:H7e,Button:W7e},SuggestionMenu:{Root:q7e,Item:K7e,EmptyItem:G7e,Label:Z7e,Loader:Y7e},TableHandle:{Root:rDe,ExtendButton:tDe},Generic:{Badge:{Root:c7e,Group:d7e},Form:{Root:t=>o.jsx("div",{children:t.children}),TextInput:y7e},Menu:{Root:_7e,Trigger:M7e,Dropdown:O7e,Divider:R7e,Label:P7e,Item:A7e,Button:I7e},Popover:{Root:z7e,Trigger:U7e,Content:V7e},Toolbar:{Root:bS,Button:vS,Select:wS}},Comments:{Comment:p7e,Editor:g7e,Card:u7e,CardSection:h7e,ExpandSectionsPrompt:f7e}},sDe={activeClassName:""},dK=t=>{const{className:e,theme:r,...n}=t,s=yo(),a=Jq(),i=(s==null?void 0:s.colorSchemePreference)||a,l=x.useCallback(d=>{if(d&&(l7e(d),typeof r=="object")){if("light"in r&&"dark"in r){JI(r[i==="dark"?"dark":"light"],d);return}JI(r,d);return}},[i,r]),c=typeof r=="string"?r:i!=="no-preference"?i:"light";return o.jsx(Tq.Provider,{value:nDe,children:o.jsx(yG,{theme:sDe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:o.jsx(ZOe,{"data-mantine-color-scheme":c,className:Dr("bn-mantine",e||""),theme:typeof r=="object"?void 0:r,...n,ref:l})})})};let kn=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function aDe(t){return xA(t)}function xA(t){return Array.isArray(t)?iDe(t):t instanceof RegExp?t:typeof t=="object"?oDe(t):t}function iDe(t){let e=[];for(let r=0,n=t.length;r<n;r++)e[r]=xA(t[r]);return e}function oDe(t){let e={};for(let r in t)e[r]=xA(t[r]);return e}function uK(t,...e){return e.forEach(r=>{for(let n in r)t[n]=r[n]}),t}function hK(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?hK(t.substring(0,t.length-1)):t.substr(~e+1)}var kS=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,I1=class{static hasCaptures(t){return t===null?!1:(kS.lastIndex=0,kS.test(t))}static replaceCaptures(t,e,r){return t.replace(kS,(n,s,a,i)=>{let l=r[parseInt(s||a,10)];if(l){let c=e.substring(l.start,l.end);for(;c[0]===".";)c=c.substring(1);switch(i){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return n})}};function fK(t,e){return t<e?-1:t>e?1:0}function mK(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let r=t.length,n=e.length;if(r===n){for(let s=0;s<r;s++){let a=fK(t[s],e[s]);if(a!==0)return a}return 0}return r-n}function t7(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function pK(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var gK=class{constructor(t){ve(this,"cache",new Map);this.fn=t}get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},qw=class{constructor(t,e,r){ve(this,"_cachedMatchRoot",new gK(t=>this._root.match(t)));this._colorMap=t,this._defaults=e,this._root=r}static createFromRawTheme(t,e){return this.createFromParsedTheme(dDe(t),e)}static createFromParsedTheme(t,e){return hDe(t,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,n=this._cachedMatchRoot.get(e).find(s=>lDe(t.parent,s.parentScopes));return n?new xK(n.fontStyle,n.foreground,n.background):null}},CS=class Nv{constructor(e,r){this.parent=e,this.scopeName=r}static push(e,r){for(const n of r)e=new Nv(e,n);return e}static from(...e){let r=null;for(let n=0;n<e.length;n++)r=new Nv(r,e[n]);return r}push(e){return new Nv(this,e)}getSegments(){let e=this;const r=[];for(;e;)r.push(e.scopeName),e=e.parent;return r.reverse(),r}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const r=[];let n=this;for(;n&&n!==e;)r.push(n.scopeName),n=n.parent;return n===e?r.reverse():void 0}};function lDe(t,e){if(e.length===0)return!0;for(let r=0;r<e.length;r++){let n=e[r],s=!1;if(n===">"){if(r===e.length-1)return!1;n=e[++r],s=!0}for(;t&&!cDe(t.scopeName,n);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function cDe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var xK=class{constructor(t,e,r){this.fontStyle=t,this.foregroundId=e,this.backgroundId=r}};function dDe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,r=[],n=0;for(let s=0,a=e.length;s<a;s++){let i=e[s];if(!i.settings)continue;let l;if(typeof i.scope=="string"){let h=i.scope;h=h.replace(/^[,]+/,""),h=h.replace(/[,]+$/,""),l=h.split(",")}else Array.isArray(i.scope)?l=i.scope:l=[""];let c=-1;if(typeof i.settings.fontStyle=="string"){c=0;let h=i.settings.fontStyle.split(" ");for(let f=0,m=h.length;f<m;f++)switch(h[f]){case"italic":c=c|1;break;case"bold":c=c|2;break;case"underline":c=c|4;break;case"strikethrough":c=c|8;break}}let d=null;typeof i.settings.foreground=="string"&&t7(i.settings.foreground)&&(d=i.settings.foreground);let u=null;typeof i.settings.background=="string"&&t7(i.settings.background)&&(u=i.settings.background);for(let h=0,f=l.length;h<f;h++){let p=l[h].trim().split(" "),g=p[p.length-1],y=null;p.length>1&&(y=p.slice(0,p.length-1),y.reverse()),r[n++]=new uDe(g,y,s,c,d,u)}}return r}var uDe=class{constructor(t,e,r,n,s,a){this.scope=t,this.parentScopes=e,this.index=r,this.fontStyle=n,this.foreground=s,this.background=a}},Es=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Es||{});function hDe(t,e){t.sort((c,d)=>{let u=fK(c.scope,d.scope);return u!==0||(u=mK(c.parentScopes,d.parentScopes),u!==0)?u:c.index-d.index});let r=0,n="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let c=t.shift();c.fontStyle!==-1&&(r=c.fontStyle),c.foreground!==null&&(n=c.foreground),c.background!==null&&(s=c.background)}let a=new fDe(e),i=new xK(r,a.getId(n),a.getId(s)),l=new pDe(new F4(0,null,-1,0,0),[]);for(let c=0,d=t.length;c<d;c++){let u=t[c];l.insert(0,u.scope,u.parentScopes,u.fontStyle,a.getId(u.foreground),a.getId(u.background))}return new qw(a,i,l)}var fDe=class{constructor(t){ve(this,"_isFrozen");ve(this,"_lastColorId");ve(this,"_id2color");ve(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,r=t.length;e<r;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},mDe=Object.freeze([]),F4=class yK{constructor(e,r,n,s,a){ve(this,"scopeDepth");ve(this,"parentScopes");ve(this,"fontStyle");ve(this,"foreground");ve(this,"background");this.scopeDepth=e,this.parentScopes=r||mDe,this.fontStyle=n,this.foreground=s,this.background=a}clone(){return new yK(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let r=[];for(let n=0,s=e.length;n<s;n++)r[n]=e[n].clone();return r}acceptOverwrite(e,r,n,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,r!==-1&&(this.fontStyle=r),n!==0&&(this.foreground=n),s!==0&&(this.background=s)}},pDe=class B4{constructor(e,r=[],n={}){ve(this,"_rulesWithParentScopes");this._mainRule=e,this._children=n,this._rulesWithParentScopes=r}static _cmpBySpecificity(e,r){if(e.scopeDepth!==r.scopeDepth)return r.scopeDepth-e.scopeDepth;let n=0,s=0;for(;e.parentScopes[n]===">"&&n++,r.parentScopes[s]===">"&&s++,!(n>=e.parentScopes.length||s>=r.parentScopes.length);){const a=r.parentScopes[s].length-e.parentScopes[n].length;if(a!==0)return a;n++,s++}return r.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let n=e.indexOf("."),s,a;if(n===-1?(s=e,a=""):(s=e.substring(0,n),a=e.substring(n+1)),this._children.hasOwnProperty(s))return this._children[s].match(a)}const r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(B4._cmpBySpecificity),r}insert(e,r,n,s,a,i){if(r===""){this._doInsertHere(e,n,s,a,i);return}let l=r.indexOf("."),c,d;l===-1?(c=r,d=""):(c=r.substring(0,l),d=r.substring(l+1));let u;this._children.hasOwnProperty(c)?u=this._children[c]:(u=new B4(this._mainRule.clone(),F4.cloneArr(this._rulesWithParentScopes)),this._children[c]=u),u.insert(e+1,d,n,s,a,i)}_doInsertHere(e,r,n,s,a){if(r===null){this._mainRule.acceptOverwrite(e,n,s,a);return}for(let i=0,l=this._rulesWithParentScopes.length;i<l;i++){let c=this._rulesWithParentScopes[i];if(mK(c.parentScopes,r)===0){c.acceptOverwrite(e,n,s,a);return}}n===-1&&(n=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),a===0&&(a=this._mainRule.background),this._rulesWithParentScopes.push(new F4(e,r,n,s,a))}},sp=class ii{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const r=ii.getLanguageId(e),n=ii.getTokenType(e),s=ii.getFontStyle(e),a=ii.getForeground(e),i=ii.getBackground(e);console.log({languageId:r,tokenType:n,fontStyle:s,foreground:a,background:i})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,r,n,s,a,i,l){let c=ii.getLanguageId(e),d=ii.getTokenType(e),u=ii.containsBalancedBrackets(e)?1:0,h=ii.getFontStyle(e),f=ii.getForeground(e),m=ii.getBackground(e);return r!==0&&(c=r),n!==8&&(d=n),s!==null&&(u=s?1:0),a!==-1&&(h=a),i!==0&&(f=i),l!==0&&(m=l),(c<<0|d<<8|u<<10|h<<11|f<<15|m<<24)>>>0}};function Gw(t,e){const r=[],n=gDe(t);let s=n.next();for(;s!==null;){let c=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":c=1;break;case"L":c=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=n.next()}let d=i();if(r.push({matcher:d,priority:c}),s!==",")break;s=n.next()}return r;function a(){if(s==="-"){s=n.next();const c=a();return d=>!!c&&!c(d)}if(s==="("){s=n.next();const c=l();return s===")"&&(s=n.next()),c}if(r7(s)){const c=[];do c.push(s),s=n.next();while(r7(s));return d=>e(c,d)}return null}function i(){const c=[];let d=a();for(;d;)c.push(d),d=a();return u=>c.every(h=>h(u))}function l(){const c=[];let d=i();for(;d&&(c.push(d),s==="|"||s===",");){do s=n.next();while(s==="|"||s===",");d=i()}return u=>c.some(h=>h(u))}}function r7(t){return!!t&&!!t.match(/[\w\.:]+/)}function gDe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,r=e.exec(t);return{next:()=>{if(!r)return null;const n=r[0];return r=e.exec(t),n}}}function vK(t){typeof t.dispose=="function"&&t.dispose()}var Nx=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},xDe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},yDe=class{constructor(){ve(this,"_references",[]);ve(this,"_seenReferenceKeys",new Set);ve(this,"visitedRule",new Set)}get references(){return this._references}add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},vDe=class{constructor(t,e){ve(this,"seenFullScopeRequests",new Set);ve(this,"seenPartialScopeRequests",new Set);ve(this,"Q");this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Nx(this.initialScopeName)]}processQueue(){const t=this.Q;this.Q=[];const e=new yDe;for(const r of t)bDe(r,this.initialScopeName,this.repo,e);for(const r of e.references)if(r instanceof Nx){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};function bDe(t,e,r,n){const s=r.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const a=r.lookup(e);t instanceof Nx?Sv({baseGrammar:a,selfGrammar:s},n):z4(t.ruleName,{baseGrammar:a,selfGrammar:s,repository:s.repository},n);const i=r.injections(t.scopeName);if(i)for(const l of i)n.add(new Nx(l))}function z4(t,e,r){if(e.repository&&e.repository[t]){const n=e.repository[t];Kw([n],e,r)}}function Sv(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Kw(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Kw(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Kw(t,e,r){for(const n of t){if(r.visitedRule.has(n))continue;r.visitedRule.add(n);const s=n.repository?uK({},e.repository,n.repository):e.repository;Array.isArray(n.patterns)&&Kw(n.patterns,{...e,repository:s},r);const a=n.include;if(!a)continue;const i=bK(a);switch(i.kind){case 0:Sv({...e,selfGrammar:e.baseGrammar},r);break;case 1:Sv(e,r);break;case 2:z4(i.ruleName,{...e,repository:s},r);break;case 3:case 4:const l=i.scopeName===e.selfGrammar.scopeName?e.selfGrammar:i.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(l){const c={baseGrammar:e.baseGrammar,selfGrammar:l,repository:s};i.kind===4?z4(i.ruleName,c,r):Sv(c,r)}else i.kind===4?r.add(new xDe(i.scopeName,i.ruleName)):r.add(new Nx(i.scopeName));break}}}var wDe=class{constructor(){ve(this,"kind",0)}},kDe=class{constructor(){ve(this,"kind",1)}},CDe=class{constructor(t){ve(this,"kind",2);this.ruleName=t}},NDe=class{constructor(t){ve(this,"kind",3);this.scopeName=t}},SDe=class{constructor(t,e){ve(this,"kind",4);this.scopeName=t,this.ruleName=e}};function bK(t){if(t==="$base")return new wDe;if(t==="$self")return new kDe;const e=t.indexOf("#");if(e===-1)return new NDe(t);if(e===0)return new CDe(t.substring(1));{const r=t.substring(0,e),n=t.substring(e+1);return new SDe(r,n)}}var EDe=/\\(\d+)/,n7=/\\(\d+)/g,jDe=-1,wK=-2;var jy=class{constructor(t,e,r,n){ve(this,"$location");ve(this,"id");ve(this,"_nameIsCapturing");ve(this,"_name");ve(this,"_contentNameIsCapturing");ve(this,"_contentName");this.$location=t,this.id=e,this._name=r||null,this._nameIsCapturing=I1.hasCaptures(this._name),this._contentName=n||null,this._contentNameIsCapturing=I1.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${hK(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:I1.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:I1.replaceCaptures(this._contentName,t,e)}},TDe=class extends jy{constructor(e,r,n,s,a){super(e,r,n,s);ve(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=a}dispose(){}collectPatterns(e,r){throw new Error("Not supported!")}compile(e,r){throw new Error("Not supported!")}compileAG(e,r,n,s){throw new Error("Not supported!")}},_De=class extends jy{constructor(e,r,n,s,a){super(e,r,n,null);ve(this,"_match");ve(this,"captures");ve(this,"_cachedCompiledPatterns");this._match=new Sx(s,this.id),this.captures=a,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,r){r.push(this._match)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,n,s){return this._getCachedCompiledPatterns(e).compileAG(e,n,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ex,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},s7=class extends jy{constructor(e,r,n,s,a){super(e,r,n,s);ve(this,"hasMissingPatterns");ve(this,"patterns");ve(this,"_cachedCompiledPatterns");this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,r){for(const n of this.patterns)e.getRule(n).collectPatterns(e,r)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,n,s){return this._getCachedCompiledPatterns(e).compileAG(e,n,s)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ex,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},U4=class extends jy{constructor(e,r,n,s,a,i,l,c,d,u){super(e,r,n,s);ve(this,"_begin");ve(this,"beginCaptures");ve(this,"_end");ve(this,"endHasBackReferences");ve(this,"endCaptures");ve(this,"applyEndPatternLast");ve(this,"hasMissingPatterns");ve(this,"patterns");ve(this,"_cachedCompiledPatterns");this._begin=new Sx(a,this.id),this.beginCaptures=i,this._end=new Sx(l||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=c,this.applyEndPatternLast=d||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,r){return this._end.resolveBackReferences(e,r)}collectPatterns(e,r){r.push(this._begin)}compile(e,r){return this._getCachedCompiledPatterns(e,r).compile(e)}compileAG(e,r,n,s){return this._getCachedCompiledPatterns(e,r).compileAG(e,n,s)}_getCachedCompiledPatterns(e,r){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ex;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,r):this._cachedCompiledPatterns.setSource(0,r)),this._cachedCompiledPatterns}},Zw=class extends jy{constructor(e,r,n,s,a,i,l,c,d){super(e,r,n,s);ve(this,"_begin");ve(this,"beginCaptures");ve(this,"whileCaptures");ve(this,"_while");ve(this,"whileHasBackReferences");ve(this,"hasMissingPatterns");ve(this,"patterns");ve(this,"_cachedCompiledPatterns");ve(this,"_cachedCompiledWhilePatterns");this._begin=new Sx(a,this.id),this.beginCaptures=i,this.whileCaptures=c,this._while=new Sx(l,wK),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=d.patterns,this.hasMissingPatterns=d.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,r){return this._while.resolveBackReferences(e,r)}collectPatterns(e,r){r.push(this._begin)}compile(e,r){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,r,n,s){return this._getCachedCompiledPatterns(e).compileAG(e,n,s)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ex;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,r){return this._getCachedCompiledWhilePatterns(e,r).compile(e)}compileWhileAG(e,r,n,s){return this._getCachedCompiledWhilePatterns(e,r).compileAG(e,n,s)}_getCachedCompiledWhilePatterns(e,r){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Ex,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,r||""),this._cachedCompiledWhilePatterns}},kK=class ys{static createCaptureRule(e,r,n,s,a){return e.registerRule(i=>new TDe(r,i,n,s,a))}static getCompiledRuleId(e,r,n){return e.id||r.registerRule(s=>{if(e.id=s,e.match)return new _De(e.$vscodeTextmateLocation,e.id,e.name,e.match,ys._compileCaptures(e.captures,r,n));if(typeof e.begin>"u"){e.repository&&(n=uK({},n,e.repository));let a=e.patterns;return typeof a>"u"&&e.include&&(a=[{include:e.include}]),new s7(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ys._compilePatterns(a,r,n))}return e.while?new Zw(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ys._compileCaptures(e.beginCaptures||e.captures,r,n),e.while,ys._compileCaptures(e.whileCaptures||e.captures,r,n),ys._compilePatterns(e.patterns,r,n)):new U4(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ys._compileCaptures(e.beginCaptures||e.captures,r,n),e.end,ys._compileCaptures(e.endCaptures||e.captures,r,n),e.applyEndPatternLast,ys._compilePatterns(e.patterns,r,n))}),e.id}static _compileCaptures(e,r,n){let s=[];if(e){let a=0;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const l=parseInt(i,10);l>a&&(a=l)}for(let i=0;i<=a;i++)s[i]=null;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const l=parseInt(i,10);let c=0;e[i].patterns&&(c=ys.getCompiledRuleId(e[i],r,n)),s[l]=ys.createCaptureRule(r,e[i].$vscodeTextmateLocation,e[i].name,e[i].contentName,c)}}return s}static _compilePatterns(e,r,n){let s=[];if(e)for(let a=0,i=e.length;a<i;a++){const l=e[a];let c=-1;if(l.include){const d=bK(l.include);switch(d.kind){case 0:case 1:c=ys.getCompiledRuleId(n[l.include],r,n);break;case 2:let u=n[d.ruleName];u&&(c=ys.getCompiledRuleId(u,r,n));break;case 3:case 4:const h=d.scopeName,f=d.kind===4?d.ruleName:null,m=r.getExternalGrammar(h,n);if(m)if(f){let p=m.repository[f];p&&(c=ys.getCompiledRuleId(p,r,m.repository))}else c=ys.getCompiledRuleId(m.repository.$self,r,m.repository);break}}else c=ys.getCompiledRuleId(l,r,n);if(c!==-1){const d=r.getRule(c);let u=!1;if((d instanceof s7||d instanceof U4||d instanceof Zw)&&d.hasMissingPatterns&&d.patterns.length===0&&(u=!0),u)continue;s.push(c)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},Sx=class CK{constructor(e,r){ve(this,"source");ve(this,"ruleId");ve(this,"hasAnchor");ve(this,"hasBackReferences");ve(this,"_anchorCache");if(e&&typeof e=="string"){const n=e.length;let s=0,a=[],i=!1;for(let l=0;l<n;l++)if(e.charAt(l)==="\\"&&l+1<n){const d=e.charAt(l+1);d==="z"?(a.push(e.substring(s,l)),a.push("$(?!\\n)(?<!\\n)"),s=l+2):(d==="A"||d==="G")&&(i=!0),l++}this.hasAnchor=i,s===0?this.source=e:(a.push(e.substring(s,n)),this.source=a.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=r,typeof this.source=="string"?this.hasBackReferences=EDe.test(this.source):this.hasBackReferences=!1}clone(){return new CK(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,r){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let n=r.map(s=>e.substring(s.start,s.end));return n7.lastIndex=0,this.source.replace(n7,(s,a)=>pK(n[parseInt(a,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],r=[],n=[],s=[],a,i,l,c;for(a=0,i=this.source.length;a<i;a++)l=this.source.charAt(a),e[a]=l,r[a]=l,n[a]=l,s[a]=l,l==="\\"&&a+1<i&&(c=this.source.charAt(a+1),c==="A"?(e[a+1]="",r[a+1]="",n[a+1]="A",s[a+1]="A"):c==="G"?(e[a+1]="",r[a+1]="G",n[a+1]="",s[a+1]="G"):(e[a+1]=c,r[a+1]=c,n[a+1]=c,s[a+1]=c),a++);return{A0_G0:e.join(""),A0_G1:r.join(""),A1_G0:n.join(""),A1_G1:s.join("")}}resolveAnchors(e,r){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?r?this._anchorCache.A1_G1:this._anchorCache.A1_G0:r?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Ex=class{constructor(){ve(this,"_items");ve(this,"_hasAnchors");ve(this,"_cached");ve(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(r=>r.source);this._cached=new a7(t,e,this._items.map(r=>r.ruleId))}return this._cached}compileAG(t,e,r){return this._hasAnchors?e?r?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A1_G0):r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,r)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,r){let n=this._items.map(s=>s.resolveAnchors(e,r));return new a7(t,n,this._items.map(s=>s.ruleId))}},a7=class{constructor(t,e,r){ve(this,"scanner");this.regExps=e,this.rules=r,this.scanner=t.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,r=this.rules.length;e<r;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,r){const n=this.scanner.findNextMatchSync(t,e,r);return n?{ruleId:this.rules[n.index],captureIndices:n.captureIndices}:null}},NS=class{constructor(t,e){this.languageId=t,this.tokenType=e}},Ml,ADe=(Ml=class{constructor(e,r){ve(this,"_defaultAttributes");ve(this,"_embeddedLanguagesMatcher");ve(this,"_getBasicScopeAttributes",new gK(e=>{const r=this._scopeToLanguage(e),n=this._toStandardTokenType(e);return new NS(r,n)}));this._defaultAttributes=new NS(e,8),this._embeddedLanguagesMatcher=new MDe(Object.entries(r||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Ml._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const r=e.match(Ml.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},ve(Ml,"_NULL_SCOPE_METADATA",new NS(0,0)),ve(Ml,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Ml),MDe=class{constructor(t){ve(this,"values");ve(this,"scopesRegExp");if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([r,n])=>pK(r));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},i7=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function NK(t,e,r,n,s,a,i,l){const c=e.content.length;let d=!1,u=-1;if(i){const m=ODe(t,e,r,n,s,a);s=m.stack,n=m.linePos,r=m.isFirstLine,u=m.anchorPosition}const h=Date.now();for(;!d;){if(l!==0&&Date.now()-h>l)return new i7(s,!0);f()}return new i7(s,!1);function f(){const m=RDe(t,e,r,n,s,u);if(!m){a.produce(s,c),d=!0;return}const p=m.captureIndices,g=m.matchedRuleId,y=p&&p.length>0?p[0].end>n:!1;if(g===jDe){const b=s.getRule(t);a.produce(s,p[0].start),s=s.withContentNameScopesList(s.nameScopesList),D0(t,e,r,s,a,b.endCaptures,p),a.produce(s,p[0].end);const v=s;if(s=s.parent,u=v.getAnchorPos(),!y&&v.getEnterPos()===n){s=v,a.produce(s,c),d=!0;return}}else{const b=t.getRule(g);a.produce(s,p[0].start);const v=s,w=b.getName(e.content,p),k=s.contentNameScopesList.pushAttributed(w,t);if(s=s.push(g,n,u,p[0].end===c,null,k,k),b instanceof U4){const N=b;D0(t,e,r,s,a,N.beginCaptures,p),a.produce(s,p[0].end),u=p[0].end;const S=N.getContentName(e.content,p),C=k.pushAttributed(S,t);if(s=s.withContentNameScopesList(C),N.endHasBackReferences&&(s=s.withEndRule(N.getEndWithResolvedBackReferences(e.content,p))),!y&&v.hasSameRuleAs(s)){s=s.pop(),a.produce(s,c),d=!0;return}}else if(b instanceof Zw){const N=b;D0(t,e,r,s,a,N.beginCaptures,p),a.produce(s,p[0].end),u=p[0].end;const S=N.getContentName(e.content,p),C=k.pushAttributed(S,t);if(s=s.withContentNameScopesList(C),N.whileHasBackReferences&&(s=s.withEndRule(N.getWhileWithResolvedBackReferences(e.content,p))),!y&&v.hasSameRuleAs(s)){s=s.pop(),a.produce(s,c),d=!0;return}}else if(D0(t,e,r,s,a,b.captures,p),a.produce(s,p[0].end),s=s.pop(),!y){s=s.safePop(),a.produce(s,c),d=!0;return}}p[0].end>n&&(n=p[0].end,r=!1)}}function ODe(t,e,r,n,s,a){let i=s.beginRuleCapturedEOL?0:-1;const l=[];for(let c=s;c;c=c.pop()){const d=c.getRule(t);d instanceof Zw&&l.push({rule:d,stack:c})}for(let c=l.pop();c;c=l.pop()){const{ruleScanner:d,findOptions:u}=DDe(c.rule,t,c.stack.endRule,r,n===i),h=d.findNextMatchSync(e,n,u);if(h){if(h.ruleId!==wK){s=c.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(a.produce(c.stack,h.captureIndices[0].start),D0(t,e,r,c.stack,a,c.rule.whileCaptures,h.captureIndices),a.produce(c.stack,h.captureIndices[0].end),i=h.captureIndices[0].end,h.captureIndices[0].end>n&&(n=h.captureIndices[0].end,r=!1))}else{s=c.stack.pop();break}}return{stack:s,linePos:n,anchorPosition:i,isFirstLine:r}}function RDe(t,e,r,n,s,a){const i=PDe(t,e,r,n,s,a),l=t.getInjections();if(l.length===0)return i;const c=IDe(l,t,e,r,n,s,a);if(!c)return i;if(!i)return c;const d=i.captureIndices[0].start,u=c.captureIndices[0].start;return u<d||c.priorityMatch&&u===d?c:i}function PDe(t,e,r,n,s,a){const i=s.getRule(t),{ruleScanner:l,findOptions:c}=SK(i,t,s.endRule,r,n===a),d=l.findNextMatchSync(e,n,c);return d?{captureIndices:d.captureIndices,matchedRuleId:d.ruleId}:null}function IDe(t,e,r,n,s,a,i){let l=Number.MAX_VALUE,c=null,d,u=0;const h=a.contentNameScopesList.getScopeNames();for(let f=0,m=t.length;f<m;f++){const p=t[f];if(!p.matcher(h))continue;const g=e.getRule(p.ruleId),{ruleScanner:y,findOptions:b}=SK(g,e,null,n,s===i),v=y.findNextMatchSync(r,s,b);if(!v)continue;const w=v.captureIndices[0].start;if(!(w>=l)&&(l=w,c=v.captureIndices,d=v.ruleId,u=p.priority,l===s))break}return c?{priorityMatch:u===-1,captureIndices:c,matchedRuleId:d}:null}function SK(t,e,r,n,s){return{ruleScanner:t.compileAG(e,r,n,s),findOptions:0}}function DDe(t,e,r,n,s){return{ruleScanner:t.compileWhileAG(e,r,n,s),findOptions:0}}function D0(t,e,r,n,s,a,i){if(a.length===0)return;const l=e.content,c=Math.min(a.length,i.length),d=[],u=i[0].end;for(let h=0;h<c;h++){const f=a[h];if(f===null)continue;const m=i[h];if(m.length===0)continue;if(m.start>u)break;for(;d.length>0&&d[d.length-1].endPos<=m.start;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop();if(d.length>0?s.produceFromScopes(d[d.length-1].scopes,m.start):s.produce(n,m.start),f.retokenizeCapturedWithRuleId){const g=f.getName(l,i),y=n.contentNameScopesList.pushAttributed(g,t),b=f.getContentName(l,i),v=y.pushAttributed(b,t),w=n.push(f.retokenizeCapturedWithRuleId,m.start,-1,!1,null,y,v),k=t.createOnigString(l.substring(0,m.end));NK(t,k,r&&m.start===0,m.start,w,s,!1,0),vK(k);continue}const p=f.getName(l,i);if(p!==null){const y=(d.length>0?d[d.length-1].scopes:n.contentNameScopesList).pushAttributed(p,t);d.push(new LDe(y,m.end))}}for(;d.length>0;)s.produceFromScopes(d[d.length-1].scopes,d[d.length-1].endPos),d.pop()}var LDe=class{constructor(t,e){ve(this,"scopes");ve(this,"endPos");this.scopes=t,this.endPos=e}};function $De(t,e,r,n,s,a,i,l){return new BDe(t,e,r,n,s,a,i,l)}function o7(t,e,r,n,s){const a=Gw(e,Yw),i=kK.getCompiledRuleId(r,n,s.repository);for(const l of a)t.push({debugSelector:e,matcher:l.matcher,ruleId:i,grammar:s,priority:l.priority})}function Yw(t,e){if(e.length<t.length)return!1;let r=0;return t.every(n=>{for(let s=r;s<e.length;s++)if(FDe(e[s],n))return r=s+1,!0;return!1})}function FDe(t,e){if(!t)return!1;if(t===e)return!0;const r=e.length;return t.length>r&&t.substr(0,r)===e&&t[r]==="."}var BDe=class{constructor(t,e,r,n,s,a,i,l){ve(this,"_rootId");ve(this,"_lastRuleId");ve(this,"_ruleId2desc");ve(this,"_includedGrammars");ve(this,"_grammarRepository");ve(this,"_grammar");ve(this,"_injections");ve(this,"_basicScopeAttributesProvider");ve(this,"_tokenTypeMatchers");if(this._rootScopeName=t,this.balancedBracketSelectors=a,this._onigLib=l,this._basicScopeAttributesProvider=new ADe(r,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=l7(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const c of Object.keys(s)){const d=Gw(c,Yw);for(const u of d)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[c]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],r=this._rootScopeName,n=t.lookup(r);if(n){const s=n.injections;if(s)for(let i in s)o7(e,i,s[i],this,n);const a=this._grammarRepository.injections(r);a&&a.forEach(i=>{const l=this.getExternalGrammar(i);if(l){const c=l.injectionSelector;c&&o7(e,c,l,this,l)}})}return e.sort((s,a)=>s.priority-a.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,r=t(e);return this._ruleId2desc[e]=r,r}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const r=this._grammarRepository.lookup(t);if(r)return this._includedGrammars[t]=l7(r,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,r=0){const n=this._tokenize(t,e,!1,r);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}tokenizeLine2(t,e,r=0){const n=this._tokenize(t,e,!0,r);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}_tokenize(t,e,r,n){this._rootId===-1&&(this._rootId=kK.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===V4.NULL){s=!0;const d=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),h=sp.set(0,d.languageId,d.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),f=this.getRule(this._rootId).getName(null,null);let m;f?m=mg.createRootAndLookUpScopeName(f,h,this):m=mg.createRoot("unknown",h),e=new V4(null,this._rootId,-1,-1,!1,null,m,m)}else s=!1,e.reset();t=t+`
`;const a=this.createOnigString(t),i=a.content.length,l=new UDe(r,t,this._tokenTypeMatchers,this.balancedBracketSelectors),c=NK(this,a,s,0,e,l,!0,n);return vK(a),{lineLength:i,lineTokens:l,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}};function l7(t,e){return t=aDe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var mg=class So{constructor(e,r,n){this.parent=e,this.scopePath=r,this.tokenAttributes=n}static fromExtension(e,r){let n=e,s=(e==null?void 0:e.scopePath)??null;for(const a of r)s=CS.push(s,a.scopeNames),n=new So(n,s,a.encodedTokenAttributes);return n}static createRoot(e,r){return new So(null,new CS(null,e),r)}static createRootAndLookUpScopeName(e,r,n){const s=n.getMetadataForScope(e),a=new CS(null,e),i=n.themeProvider.themeMatch(a),l=So.mergeAttributes(r,s,i);return new So(null,a,l)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return So.equals(this,e)}static equals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.scopeName!==r.scopeName||e.tokenAttributes!==r.tokenAttributes)return!1;e=e.parent,r=r.parent}while(!0)}static mergeAttributes(e,r,n){let s=-1,a=0,i=0;return n!==null&&(s=n.fontStyle,a=n.foregroundId,i=n.backgroundId),sp.set(e,r.languageId,r.tokenType,null,s,a,i)}pushAttributed(e,r){if(e===null)return this;if(e.indexOf(" ")===-1)return So._pushAttributed(this,e,r);const n=e.split(/ /g);let s=this;for(const a of n)s=So._pushAttributed(s,a,r);return s}static _pushAttributed(e,r,n){const s=n.getMetadataForScope(r),a=e.scopePath.push(r),i=n.themeProvider.themeMatch(a),l=So.mergeAttributes(e.tokenAttributes,s,i);return new So(e,a,l)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var s;const r=[];let n=this;for(;n&&n!==e;)r.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(((s=n.parent)==null?void 0:s.scopePath)??null)}),n=n.parent;return n===e?r.reverse():void 0}},pi,V4=(pi=class{constructor(e,r,n,s,a,i,l,c){ve(this,"_stackElementBrand");ve(this,"_enterPos");ve(this,"_anchorPos");ve(this,"depth");this.parent=e,this.ruleId=r,this.beginRuleCapturedEOL=a,this.endRule=i,this.nameScopesList=l,this.contentNameScopesList=c,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=s}equals(e){return e===null?!1:pi._equals(this,e)}static _equals(e,r){return e===r?!0:this._structuralEquals(e,r)?mg.equals(e.contentNameScopesList,r.contentNameScopesList):!1}static _structuralEquals(e,r){do{if(e===r||!e&&!r)return!0;if(!e||!r||e.depth!==r.depth||e.ruleId!==r.ruleId||e.endRule!==r.endRule)return!1;e=e.parent,r=r.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){pi._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,r,n,s,a,i,l){return new pi(this,e,r,n,s,a,i,l)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,r){var n,s;return this.parent&&(r=this.parent._writeString(e,r)),e[r++]=`(${this.ruleId}, ${(n=this.nameScopesList)==null?void 0:n.toString()}, ${(s=this.contentNameScopesList)==null?void 0:s.toString()})`,r}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new pi(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let r=this;for(;r&&r._enterPos===e._enterPos;){if(r.ruleId===e.ruleId)return!0;r=r.parent}return!1}toStateStackFrame(){var e,r,n;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((r=this.nameScopesList)==null?void 0:r.getExtensionIfDefined(((e=this.parent)==null?void 0:e.nameScopesList)??null))??[],contentNameScopesList:((n=this.contentNameScopesList)==null?void 0:n.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(e,r){const n=mg.fromExtension((e==null?void 0:e.nameScopesList)??null,r.nameScopesList);return new pi(e,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,n,mg.fromExtension(n,r.contentNameScopesList))}},ve(pi,"NULL",new pi(null,0,0,0,!1,null,null,null)),pi),zDe=class{constructor(t,e){ve(this,"balancedBracketScopes");ve(this,"unbalancedBracketScopes");ve(this,"allowAny",!1);this.balancedBracketScopes=t.flatMap(r=>r==="*"?(this.allowAny=!0,[]):Gw(r,Yw).map(n=>n.matcher)),this.unbalancedBracketScopes=e.flatMap(r=>Gw(r,Yw).map(n=>n.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},UDe=class{constructor(t,e,r,n){ve(this,"_emitBinaryTokens");ve(this,"_lineText");ve(this,"_tokens");ve(this,"_binaryTokens");ve(this,"_lastTokenEndIndex");ve(this,"_tokenTypeOverrides");this.balancedBracketSelectors=n,this._emitBinaryTokens=t,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){var n;if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let s=(t==null?void 0:t.tokenAttributes)??0,a=!1;if((n=this.balancedBracketSelectors)!=null&&n.matchesAlways&&(a=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=(t==null?void 0:t.getScopeNames())??[];for(const l of this._tokenTypeOverrides)l.matcher(i)&&(s=sp.set(s,0,l.type,null,-1,0,0));this.balancedBracketSelectors&&(a=this.balancedBracketSelectors.match(i))}if(a&&(s=sp.set(s,0,8,a,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),this._lastTokenEndIndex=e;return}const r=(t==null?void 0:t.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:r}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const r=new Uint32Array(this._binaryTokens.length);for(let n=0,s=this._binaryTokens.length;n<s;n++)r[n]=this._binaryTokens[n];return r}},VDe=class{constructor(t,e){ve(this,"_grammars",new Map);ve(this,"_rawGrammars",new Map);ve(this,"_injectionGrammars",new Map);ve(this,"_theme");this._onigLib=e,this._theme=t}dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,r,n,s){if(!this._grammars.has(t)){let a=this._rawGrammars.get(t);if(!a)return null;this._grammars.set(t,$De(t,a,e,r,n,s,this,this._onigLib))}return this._grammars.get(t)}},HDe=class{constructor(e){ve(this,"_options");ve(this,"_syncRegistry");ve(this,"_ensureGrammarCache");this._options=e,this._syncRegistry=new VDe(qw.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,r){this._syncRegistry.setTheme(qw.createFromRawTheme(e,r))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,r,n){return this.loadGrammarWithConfiguration(e,r,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,r,n){return this._loadGrammar(e,r,n.embeddedLanguages,n.tokenTypes,new zDe(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,r,n,s,a){const i=new vDe(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map(l=>this._loadSingleGrammar(l.scopeName)),i.processQueue();return this._grammarForScopeName(e,r,n,s,a)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const r=this._options.loadGrammar(e);if(r){const n=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(r,n)}}addGrammar(e,r=[],n=0,s=null){return this._syncRegistry.addGrammar(e,r),this._grammarForScopeName(e.scopeName,n,s)}_grammarForScopeName(e,r=0,n=null,s=null,a=null){return this._syncRegistry.grammarForScopeName(e,r,n,s,a)}},H4=V4.NULL;const WDe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Ty{constructor(e,r,n){this.normal=r,this.property=e,n&&(this.space=n)}}Ty.prototype.normal={};Ty.prototype.property={};Ty.prototype.space=void 0;function EK(t,e){const r={},n={};for(const s of t)Object.assign(r,s.property),Object.assign(n,s.normal);return new Ty(r,n,e)}function W4(t){return t.toLowerCase()}class Na{constructor(e,r){this.attribute=r,this.property=e}}Na.prototype.attribute="";Na.prototype.booleanish=!1;Na.prototype.boolean=!1;Na.prototype.commaOrSpaceSeparated=!1;Na.prototype.commaSeparated=!1;Na.prototype.defined=!1;Na.prototype.mustUseProperty=!1;Na.prototype.number=!1;Na.prototype.overloadedBoolean=!1;Na.prototype.property="";Na.prototype.spaceSeparated=!1;Na.prototype.space=void 0;let qDe=0;const Ot=Gh(),yn=Gh(),q4=Gh(),Le=Gh(),_r=Gh(),hm=Gh(),Sa=Gh();function Gh(){return 2**++qDe}const G4=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ot,booleanish:yn,commaOrSpaceSeparated:Sa,commaSeparated:hm,number:Le,overloadedBoolean:q4,spaceSeparated:_r},Symbol.toStringTag,{value:"Module"})),SS=Object.keys(G4);class yA extends Na{constructor(e,r,n,s){let a=-1;if(super(e,r),c7(this,"space",s),typeof n=="number")for(;++a<SS.length;){const i=SS[a];c7(this,SS[a],(n&G4[i])===G4[i])}}}yA.prototype.defined=!0;function c7(t,e,r){r&&(t[e]=r)}function Bp(t){const e={},r={};for(const[n,s]of Object.entries(t.properties)){const a=new yA(n,t.transform(t.attributes||{},n),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),e[n]=a,r[W4(n)]=n,r[W4(a.attribute)]=n}return new Ty(e,r,t.space)}const jK=Bp({properties:{ariaActiveDescendant:null,ariaAtomic:yn,ariaAutoComplete:null,ariaBusy:yn,ariaChecked:yn,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:_r,ariaCurrent:null,ariaDescribedBy:_r,ariaDetails:null,ariaDisabled:yn,ariaDropEffect:_r,ariaErrorMessage:null,ariaExpanded:yn,ariaFlowTo:_r,ariaGrabbed:yn,ariaHasPopup:null,ariaHidden:yn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_r,ariaLevel:Le,ariaLive:null,ariaModal:yn,ariaMultiLine:yn,ariaMultiSelectable:yn,ariaOrientation:null,ariaOwns:_r,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:yn,ariaReadOnly:yn,ariaRelevant:null,ariaRequired:yn,ariaRoleDescription:_r,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:yn,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function TK(t,e){return e in t?t[e]:e}function _K(t,e){return TK(t,e.toLowerCase())}const GDe=Bp({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:hm,acceptCharset:_r,accessKey:_r,action:null,allow:null,allowFullScreen:Ot,allowPaymentRequest:Ot,allowUserMedia:Ot,alt:null,as:null,async:Ot,autoCapitalize:null,autoComplete:_r,autoFocus:Ot,autoPlay:Ot,blocking:_r,capture:null,charSet:null,checked:Ot,cite:null,className:_r,cols:Le,colSpan:null,content:null,contentEditable:yn,controls:Ot,controlsList:_r,coords:Le|hm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ot,defer:Ot,dir:null,dirName:null,disabled:Ot,download:q4,draggable:yn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ot,formTarget:null,headers:_r,height:Le,hidden:q4,high:Le,href:null,hrefLang:null,htmlFor:_r,httpEquiv:_r,id:null,imageSizes:null,imageSrcSet:null,inert:Ot,inputMode:null,integrity:null,is:null,isMap:Ot,itemId:null,itemProp:_r,itemRef:_r,itemScope:Ot,itemType:_r,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ot,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:Ot,muted:Ot,name:null,nonce:null,noModule:Ot,noValidate:Ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ot,optimum:Le,pattern:null,ping:_r,placeholder:null,playsInline:Ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ot,referrerPolicy:null,rel:_r,required:Ot,reversed:Ot,rows:Le,rowSpan:Le,sandbox:_r,scope:null,scoped:Ot,seamless:Ot,selected:Ot,shadowRootClonable:Ot,shadowRootDelegatesFocus:Ot,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:yn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:Ot,useMap:null,value:yn,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_r,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ot,declare:Ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:Ot,noHref:Ot,noShade:Ot,noWrap:Ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:yn,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ot,disableRemotePlayback:Ot,prefix:null,property:null,results:Le,security:null,unselectable:null},space:"html",transform:_K}),KDe=Bp({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Sa,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:_r,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:Ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:hm,g2:hm,glyphName:hm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:Sa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_r,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sa,rev:Sa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sa,requiredFeatures:Sa,requiredFonts:Sa,requiredFormats:Sa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:Sa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sa,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:TK}),AK=Bp({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),MK=Bp({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:_K}),OK=Bp({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),ZDe=/[A-Z]/g,d7=/-[a-z]/g,YDe=/^data[-\w.:]+$/i;function XDe(t,e){const r=W4(e);let n=e,s=Na;if(r in t.normal)return t.property[t.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&YDe.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(d7,QDe);n="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!d7.test(a)){let i=a.replace(ZDe,JDe);i.charAt(0)!=="-"&&(i="-"+i),e="data"+i}}s=yA}return new s(n,e)}function JDe(t){return"-"+t.toLowerCase()}function QDe(t){return t.charAt(1).toUpperCase()}const eLe=EK([jK,GDe,AK,MK,OK],"html"),RK=EK([jK,KDe,AK,MK,OK],"svg"),u7={}.hasOwnProperty;function tLe(t,e){const r=e||{};function n(s,...a){let i=n.invalid;const l=n.handlers;if(s&&u7.call(s,t)){const c=String(s[t]);i=u7.call(l,c)?l[c]:n.unknown}if(i)return i.call(this,s,...a)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const rLe=/["&'<>`]/g,nLe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sLe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,aLe=/[|\\{}()[\]^$+*?.]/g,h7=new WeakMap;function iLe(t,e){if(t=t.replace(e.subset?oLe(e.subset):rLe,n),e.subset||e.escapeOnly)return t;return t.replace(nLe,r).replace(sLe,n);function r(s,a,i){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,i.charCodeAt(a+2),e)}function n(s,a,i){return e.format(s.charCodeAt(0),i.charCodeAt(a+1),e)}}function oLe(t){let e=h7.get(t);return e||(e=lLe(t),h7.set(t,e)),e}function lLe(t){const e=[];let r=-1;for(;++r<t.length;)e.push(t[r].replace(aLe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const cLe=/[\dA-Fa-f]/;function dLe(t,e,r){const n="&#x"+t.toString(16).toUpperCase();return r&&e&&!cLe.test(String.fromCharCode(e))?n:n+";"}const uLe=/\d/;function hLe(t,e,r){const n="&#"+String(t);return r&&e&&!uLe.test(String.fromCharCode(e))?n:n+";"}const fLe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],ES={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},mLe=["cent","copy","divide","gt","lt","not","para","times"],PK={}.hasOwnProperty,K4={};let D1;for(D1 in ES)PK.call(ES,D1)&&(K4[ES[D1]]=D1);const pLe=/[^\dA-Za-z]/;function gLe(t,e,r,n){const s=String.fromCharCode(t);if(PK.call(K4,s)){const a=K4[s],i="&"+a;return r&&fLe.includes(a)&&!mLe.includes(a)&&(!n||e&&e!==61&&pLe.test(String.fromCharCode(e)))?i:i+";"}return""}function xLe(t,e,r){let n=dLe(t,e,r.omitOptionalSemicolons),s;if((r.useNamedReferences||r.useShortestReferences)&&(s=gLe(t,e,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!s)&&r.useShortestReferences){const a=hLe(t,e,r.omitOptionalSemicolons);a.length<n.length&&(n=a)}return s&&(!r.useShortestReferences||s.length<n.length)?s:n}function fm(t,e){return iLe(t,Object.assign({format:xLe},e))}const yLe=/^>|^->|<!--|-->|--!>|<!-$/g,vLe=[">"],bLe=["<",">"];function wLe(t,e,r,n){return n.settings.bogusComments?"<?"+fm(t.value,Object.assign({},n.settings.characterReferences,{subset:vLe}))+">":"<!--"+t.value.replace(yLe,s)+"-->";function s(a){return fm(a,Object.assign({},n.settings.characterReferences,{subset:bLe}))}}function kLe(t,e,r,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}function f7(t,e){const r=String(t);if(typeof e!="string")throw new TypeError("Expected character");let n=0,s=r.indexOf(e);for(;s!==-1;)n++,s=r.indexOf(e,s+e.length);return n}function DBe(t){const e=[],r=String(t||"");let n=r.indexOf(","),s=0,a=!1;for(;!a;){n===-1&&(n=r.length,a=!0);const i=r.slice(s,n).trim();(i||!a)&&e.push(i),s=n+1,n=r.indexOf(",",s)}return e}function CLe(t,e){const r=e||{};return(t[t.length-1]===""?[...t,""]:t).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}function LBe(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function NLe(t){return t.join(" ").trim()}const SLe=/[ \t\n\f\r]/g;function vA(t){return typeof t=="object"?t.type==="text"?m7(t.value):!1:m7(t)}function m7(t){return t.replace(SLe,"")===""}const In=DK(1),IK=DK(-1),ELe=[];function DK(t){return e;function e(r,n,s){const a=r?r.children:ELe;let i=(n||0)+t,l=a[i];if(!s)for(;l&&vA(l);)i+=t,l=a[i];return l}}const jLe={}.hasOwnProperty;function LK(t){return e;function e(r,n,s){return jLe.call(t,r.tagName)&&t[r.tagName](r,n,s)}}const bA=LK({body:_Le,caption:jS,colgroup:jS,dd:RLe,dt:OLe,head:jS,html:TLe,li:MLe,optgroup:PLe,option:ILe,p:ALe,rp:p7,rt:p7,tbody:LLe,td:g7,tfoot:$Le,th:g7,thead:DLe,tr:FLe});function jS(t,e,r){const n=In(r,e,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&vA(n.value.charAt(0)))}function TLe(t,e,r){const n=In(r,e);return!n||n.type!=="comment"}function _Le(t,e,r){const n=In(r,e);return!n||n.type!=="comment"}function ALe(t,e,r){const n=In(r,e);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!r||!(r.type==="element"&&(r.tagName==="a"||r.tagName==="audio"||r.tagName==="del"||r.tagName==="ins"||r.tagName==="map"||r.tagName==="noscript"||r.tagName==="video"))}function MLe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&n.tagName==="li"}function OLe(t,e,r){const n=In(r,e);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function RLe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function p7(t,e,r){const n=In(r,e);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function PLe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&n.tagName==="optgroup"}function ILe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function DLe(t,e,r){const n=In(r,e);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function LLe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function $Le(t,e,r){return!In(r,e)}function FLe(t,e,r){const n=In(r,e);return!n||n.type==="element"&&n.tagName==="tr"}function g7(t,e,r){const n=In(r,e);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const BLe=LK({body:VLe,colgroup:HLe,head:ULe,html:zLe,tbody:WLe});function zLe(t){const e=In(t,-1);return!e||e.type!=="comment"}function ULe(t){const e=new Set;for(const n of t.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(e.has(n.tagName))return!1;e.add(n.tagName)}const r=t.children[0];return!r||r.type==="element"}function VLe(t){const e=In(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&vA(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function HLe(t,e,r){const n=IK(r,e),s=In(t,-1,!0);return r&&n&&n.type==="element"&&n.tagName==="colgroup"&&bA(n,r.children.indexOf(n),r)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function WLe(t,e,r){const n=IK(r,e),s=In(t,-1);return r&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&bA(n,r.children.indexOf(n),r)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const L1={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function qLe(t,e,r,n){const s=n.schema,a=s.space==="svg"?!1:n.settings.omitOptionalTags;let i=s.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(t.tagName.toLowerCase());const l=[];let c;s.space==="html"&&t.tagName==="svg"&&(n.schema=RK);const d=GLe(n,t.properties),u=n.all(s.space==="html"&&t.tagName==="template"?t.content:t);return n.schema=s,u&&(i=!1),(d||!a||!BLe(t,e,r))&&(l.push("<",t.tagName,d?" "+d:""),i&&(s.space==="svg"||n.settings.closeSelfClosing)&&(c=d.charAt(d.length-1),(!n.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&l.push(" "),l.push("/")),l.push(">")),l.push(u),!i&&(!a||!bA(t,e,r))&&l.push("</"+t.tagName+">"),l.join("")}function GLe(t,e){const r=[];let n=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const a=KLe(t,s,e[s]);a&&r.push(a)}}for(;++n<r.length;){const a=t.settings.tightAttributes?r[n].charAt(r[n].length-1):void 0;n!==r.length-1&&a!=='"'&&a!=="'"&&(r[n]+=" ")}return r.join("")}function KLe(t,e,r){const n=XDe(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,a=t.settings.allowDangerousCharacters?0:1;let i=t.quote,l;if(n.overloadedBoolean&&(r===n.attribute||r==="")?r=!0:(n.boolean||n.overloadedBoolean)&&(typeof r!="string"||r===n.attribute||r==="")&&(r=!!r),r==null||r===!1||typeof r=="number"&&Number.isNaN(r))return"";const c=fm(n.attribute,Object.assign({},t.settings.characterReferences,{subset:L1.name[s][a]}));return r===!0||(r=Array.isArray(r)?(n.commaSeparated?CLe:NLe)(r,{padLeft:!t.settings.tightCommaSeparatedLists}):String(r),t.settings.collapseEmptyAttributes&&!r)?c:(t.settings.preferUnquoted&&(l=fm(r,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:L1.unquoted[s][a]}))),l!==r&&(t.settings.quoteSmart&&f7(r,i)>f7(r,t.alternative)&&(i=t.alternative),l=i+fm(r,Object.assign({},t.settings.characterReferences,{subset:(i==="'"?L1.single:L1.double)[s][a],attribute:!0}))+i),c+(l&&"="+l))}const ZLe=["<","&"];function $K(t,e,r,n){return r&&r.type==="element"&&(r.tagName==="script"||r.tagName==="style")?t.value:fm(t.value,Object.assign({},n.settings.characterReferences,{subset:ZLe}))}function YLe(t,e,r,n){return n.settings.allowDangerousHtml?t.value:$K(t,e,r,n)}function XLe(t,e,r,n){return n.all(t)}const JLe=tLe("type",{invalid:QLe,unknown:e9e,handlers:{comment:wLe,doctype:kLe,element:qLe,raw:YLe,root:XLe,text:$K}});function QLe(t){throw new Error("Expected node, not `"+t+"`")}function e9e(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const t9e={},r9e={},n9e=[];function s9e(t,e){const r=e||t9e,n=r.quote||'"',s=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:a9e,all:i9e,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||WDe,characterReferences:r.characterReferences||r9e,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:r.space==="svg"?RK:eLe,quote:n,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function a9e(t,e,r){return JLe(t,e,r,this)}function i9e(t){const e=[],r=t&&t.children||n9e;let n=-1;for(;++n<r.length;)e[n]=this.one(r[n],n,t);return e.join("")}function Xw(t,e){const r=typeof t=="string"?{}:{...t.colorReplacements},n=typeof t=="string"?t:t.name;for(const[s,a]of Object.entries((e==null?void 0:e.colorReplacements)||{}))typeof a=="string"?r[s]=a:s===n&&Object.assign(r,a);return r}function Td(t,e){return t&&((e==null?void 0:e[t==null?void 0:t.toLowerCase()])||t)}function o9e(t){return Array.isArray(t)?t:[t]}async function FK(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function wA(t){return!t||["plaintext","txt","text","plain"].includes(t)}function BK(t){return t==="ansi"||wA(t)}function kA(t){return t==="none"}function zK(t){return kA(t)}function UK(t,e){var n;if(!e)return t;t.properties||(t.properties={}),(n=t.properties).class||(n.class=[]),typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const r=Array.isArray(e)?e:e.split(/\s+/g);for(const s of r)s&&!t.properties.class.includes(s)&&t.properties.class.push(s);return t}function Y2(t,e=!1){var a;const r=t.split(/(\r?\n)/g);let n=0;const s=[];for(let i=0;i<r.length;i+=2){const l=e?r[i]+(r[i+1]||""):r[i];s.push([l,n]),n+=r[i].length,n+=((a=r[i+1])==null?void 0:a.length)||0}return s}function l9e(t){const e=Y2(t,!0).map(([s])=>s);function r(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let a=s,i=0;for(const l of e){if(a<l.length)break;a-=l.length,i++}return{line:i,character:a}}function n(s,a){let i=0;for(let l=0;l<s;l++)i+=e[l].length;return i+=a,i}return{lines:e,indexToPos:r,posToIndex:n}}function $Be(t,e,r){const n=new Set;for(const a of t.matchAll(/lang=["']([\w-]+)["']/g))n.add(a[1]);for(const a of t.matchAll(/(?:```|~~~)([\w-]+)/g))n.add(a[1]);for(const a of t.matchAll(/\\begin\{([\w-]+)\}/g))n.add(a[1]);if(!r)return Array.from(n);const s=r.getBundledLanguages();return Array.from(n).filter(a=>a&&s[a])}const CA="light-dark()",c9e=["color","background-color"];function d9e(t,e){let r=0;const n=[];for(const s of e)s>r&&n.push({...t,content:t.content.slice(r,s),offset:t.offset+r}),r=s;return r<t.content.length&&n.push({...t,content:t.content.slice(r),offset:t.offset+r}),n}function u9e(t,e){const r=Array.from(e instanceof Set?e:new Set(e)).sort((n,s)=>n-s);return r.length?t.map(n=>n.flatMap(s=>{const a=r.filter(i=>s.offset<i&&i<s.offset+s.content.length).map(i=>i-s.offset).sort((i,l)=>i-l);return a.length?d9e(s,a):s})):t}function h9e(t,e,r,n,s="css-vars"){const a={content:t.content,explanation:t.explanation,offset:t.offset},i=e.map(u=>Jw(t.variants[u])),l=new Set(i.flatMap(u=>Object.keys(u))),c={},d=(u,h)=>{const f=h==="color"?"":h==="background-color"?"-bg":`-${h}`;return r+e[u]+(h==="color"?"":f)};return i.forEach((u,h)=>{for(const f of l){const m=u[f]||"inherit";if(h===0&&n&&c9e.includes(f))if(n===CA&&i.length>1){const p=e.findIndex(v=>v==="light"),g=e.findIndex(v=>v==="dark");if(p===-1||g===-1)throw new kn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const y=i[p][f]||"inherit",b=i[g][f]||"inherit";c[f]=`light-dark(${y}, ${b})`,s==="css-vars"&&(c[d(h,f)]=m)}else c[f]=m;else s==="css-vars"&&(c[d(h,f)]=m)}}),a.htmlStyle=c,a}function Jw(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&Es.Italic&&(e["font-style"]="italic"),t.fontStyle&Es.Bold&&(e["font-weight"]="bold");const r=[];t.fontStyle&Es.Underline&&r.push("underline"),t.fontStyle&Es.Strikethrough&&r.push("line-through"),r.length&&(e["text-decoration"]=r.join(" "))}return e}function Z4(t){return typeof t=="string"?t:Object.entries(t).map(([e,r])=>`${e}:${r}`).join(";")}const VK=new WeakMap;function X2(t,e){VK.set(t,e)}function jx(t){return VK.get(t)}class zp{constructor(...e){ve(this,"_stacks",{});ve(this,"lang");if(e.length===2){const[r,n]=e;this.lang=n,this._stacks=r}else{const[r,n,s]=e;this.lang=n,this._stacks={[s]:r}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,r){return new zp(Object.fromEntries(o9e(r).map(n=>[n,H4])),e)}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return f9e(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function f9e(t){const e=[],r=new Set;function n(s){var i;if(r.has(s))return;r.add(s);const a=(i=s==null?void 0:s.nameScopesList)==null?void 0:i.scopeName;a&&e.push(a),s.parent&&n(s.parent)}return n(t),e}function m9e(t,e){if(!(t instanceof zp))throw new kn("Invalid grammar state");return t.getInternalStack(e)}function p9e(){const t=new WeakMap;function e(r){if(!t.has(r.meta)){let n=function(i){if(typeof i=="number"){if(i<0||i>r.source.length)throw new kn(`Invalid decoration offset: ${i}. Code length: ${r.source.length}`);return{...s.indexToPos(i),offset:i}}else{const l=s.lines[i.line];if(l===void 0)throw new kn(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${s.lines.length}`);let c=i.character;if(c<0&&(c=l.length+c),c<0||c>l.length)throw new kn(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${l.length}`);return{...i,character:c,offset:s.posToIndex(i.line,c)}}};const s=l9e(r.source),a=(r.options.decorations||[]).map(i=>({...i,start:n(i.start),end:n(i.end)}));g9e(a),t.set(r.meta,{decorations:a,converter:s,source:r.source})}return t.get(r.meta)}return{name:"shiki:decorations",tokens(r){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const s=e(this).decorations.flatMap(l=>[l.start.offset,l.end.offset]);return u9e(r,s)},code(r){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const n=e(this),s=Array.from(r.children).filter(h=>h.type==="element"&&h.tagName==="span");if(s.length!==n.converter.lines.length)throw new kn(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function a(h,f,m,p){const g=s[h];let y="",b=-1,v=-1;if(f===0&&(b=0),m===0&&(v=0),m===Number.POSITIVE_INFINITY&&(v=g.children.length),b===-1||v===-1)for(let k=0;k<g.children.length;k++)y+=HK(g.children[k]),b===-1&&y.length===f&&(b=k+1),v===-1&&y.length===m&&(v=k+1);if(b===-1)throw new kn(`Failed to find start index for decoration ${JSON.stringify(p.start)}`);if(v===-1)throw new kn(`Failed to find end index for decoration ${JSON.stringify(p.end)}`);const w=g.children.slice(b,v);if(!p.alwaysWrap&&w.length===g.children.length)l(g,p,"line");else if(!p.alwaysWrap&&w.length===1&&w[0].type==="element")l(w[0],p,"token");else{const k={type:"element",tagName:"span",properties:{},children:w};l(k,p,"wrapper"),g.children.splice(b,w.length,k)}}function i(h,f){s[h]=l(s[h],f,"line")}function l(h,f,m){var y;const p=f.properties||{},g=f.transform||(b=>b);return h.tagName=f.tagName||"span",h.properties={...h.properties,...p,class:h.properties.class},(y=f.properties)!=null&&y.class&&UK(h,f.properties.class),h=g(h,m)||h,h}const c=[],d=n.decorations.sort((h,f)=>f.start.offset-h.start.offset||h.end.offset-f.end.offset);for(const h of d){const{start:f,end:m}=h;if(f.line===m.line)a(f.line,f.character,m.character,h);else if(f.line<m.line){a(f.line,f.character,Number.POSITIVE_INFINITY,h);for(let p=f.line+1;p<m.line;p++)c.unshift(()=>i(p,h));a(m.line,0,m.character,h)}}c.forEach(h=>h())}}}function g9e(t){for(let e=0;e<t.length;e++){const r=t[e];if(r.start.offset>r.end.offset)throw new kn(`Invalid decoration range: ${JSON.stringify(r.start)} - ${JSON.stringify(r.end)}`);for(let n=e+1;n<t.length;n++){const s=t[n],a=r.start.offset<=s.start.offset&&s.start.offset<r.end.offset,i=r.start.offset<s.end.offset&&s.end.offset<=r.end.offset,l=s.start.offset<=r.start.offset&&r.start.offset<s.end.offset,c=s.start.offset<r.end.offset&&r.end.offset<=s.end.offset;if(a||i||l||c){if(a&&i||l&&c||l&&r.start.offset===r.end.offset||i&&s.start.offset===s.end.offset)continue;throw new kn(`Decorations ${JSON.stringify(r.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function HK(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(HK).join(""):""}const x9e=[p9e()];function Qw(t){const e=y9e(t.transformers||[]);return[...e.pre,...e.normal,...e.post,...x9e]}function y9e(t){const e=[],r=[],n=[];for(const s of t)switch(s.enforce){case"pre":e.push(s);break;case"post":r.push(s);break;default:n.push(s)}return{pre:e,post:r,normal:n}}var Du=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],TS={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function v9e(t,e){const r=t.indexOf("\x1B",e);if(r!==-1&&t[r+1]==="["){const n=t.indexOf("m",r);if(n!==-1)return{sequence:t.substring(r+2,n).split(";"),startPosition:r,position:n+1}}return{position:t.length}}function x7(t){const e=t.shift();if(e==="2"){const r=t.splice(0,3).map(n=>Number.parseInt(n));return r.length!==3||r.some(n=>Number.isNaN(n))?void 0:{type:"rgb",rgb:r}}else if(e==="5"){const r=t.shift();if(r)return{type:"table",index:Number(r)}}}function b9e(t){const e=[];for(;t.length>0;){const r=t.shift();if(!r)continue;const n=Number.parseInt(r);if(!Number.isNaN(n))if(n===0)e.push({type:"resetAll"});else if(n<=9)TS[n]&&e.push({type:"setDecoration",value:TS[n]});else if(n<=29){const s=TS[n-20];s&&(e.push({type:"resetDecoration",value:s}),s==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(n<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Du[n-30]}});else if(n===38){const s=x7(t);s&&e.push({type:"setForegroundColor",value:s})}else if(n===39)e.push({type:"resetForegroundColor"});else if(n<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Du[n-40]}});else if(n===48){const s=x7(t);s&&e.push({type:"setBackgroundColor",value:s})}else n===49?e.push({type:"resetBackgroundColor"}):n===53?e.push({type:"setDecoration",value:"overline"}):n===55?e.push({type:"resetDecoration",value:"overline"}):n>=90&&n<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Du[n-90+8]}}):n>=100&&n<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Du[n-100+8]}})}return e}function w9e(){let t=null,e=null,r=new Set;return{parse(n){const s=[];let a=0;do{const i=v9e(n,a),l=i.sequence?n.substring(a,i.startPosition):n.substring(a);if(l.length>0&&s.push({value:l,foreground:t,background:e,decorations:new Set(r)}),i.sequence){const c=b9e(i.sequence);for(const d of c)d.type==="resetAll"?(t=null,e=null,r.clear()):d.type==="resetForegroundColor"?t=null:d.type==="resetBackgroundColor"?e=null:d.type==="resetDecoration"&&r.delete(d.value);for(const d of c)d.type==="setForegroundColor"?t=d.value:d.type==="setBackgroundColor"?e=d.value:d.type==="setDecoration"&&r.add(d.value)}a=i.position}while(a<n.length);return s}}}var k9e={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function C9e(t=k9e){function e(l){return t[l]}function r(l){return`#${l.map(c=>Math.max(0,Math.min(c,255)).toString(16).padStart(2,"0")).join("")}`}let n;function s(){if(n)return n;n=[];for(let d=0;d<Du.length;d++)n.push(e(Du[d]));let l=[0,95,135,175,215,255];for(let d=0;d<6;d++)for(let u=0;u<6;u++)for(let h=0;h<6;h++)n.push(r([l[d],l[u],l[h]]));let c=8;for(let d=0;d<24;d++,c+=10)n.push(r([c,c,c]));return n}function a(l){return s()[l]}function i(l){switch(l.type){case"named":return e(l.name);case"rgb":return r(l.rgb);case"table":return a(l.index)}}return{value:i}}function N9e(t,e,r){const n=Xw(t,r),s=Y2(e),a=C9e(Object.fromEntries(Du.map(l=>{var c;return[l,(c=t.colors)==null?void 0:c[`terminal.ansi${l[0].toUpperCase()}${l.substring(1)}`]]}))),i=w9e();return s.map(l=>i.parse(l[0]).map(c=>{let d,u;c.decorations.has("reverse")?(d=c.background?a.value(c.background):t.bg,u=c.foreground?a.value(c.foreground):t.fg):(d=c.foreground?a.value(c.foreground):t.fg,u=c.background?a.value(c.background):void 0),d=Td(d,n),u=Td(u,n),c.decorations.has("dim")&&(d=S9e(d));let h=Es.None;return c.decorations.has("bold")&&(h|=Es.Bold),c.decorations.has("italic")&&(h|=Es.Italic),c.decorations.has("underline")&&(h|=Es.Underline),c.decorations.has("strikethrough")&&(h|=Es.Strikethrough),{content:c.value,offset:l[1],color:d,bgColor:u,fontStyle:h}}))}function S9e(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const n=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${n}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(n=>`${n}${n}`).join("")}80`;const r=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:t}function NA(t,e,r={}){const{lang:n="text",theme:s=t.getLoadedThemes()[0]}=r;if(wA(n)||kA(s))return Y2(e).map(c=>[{content:c[0],offset:c[1]}]);const{theme:a,colorMap:i}=t.setTheme(s);if(n==="ansi")return N9e(a,e,r);const l=t.getLanguage(n);if(r.grammarState){if(r.grammarState.lang!==l.name)throw new kn(`Grammar state language "${r.grammarState.lang}" does not match highlight language "${l.name}"`);if(!r.grammarState.themes.includes(a.name))throw new kn(`Grammar state themes "${r.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return j9e(e,l,a,i,r)}function E9e(...t){if(t.length===2)return jx(t[1]);const[e,r,n={}]=t,{lang:s="text",theme:a=e.getLoadedThemes()[0]}=n;if(wA(s)||kA(a))throw new kn("Plain language does not have grammar state");if(s==="ansi")throw new kn("ANSI language does not have grammar state");const{theme:i,colorMap:l}=e.setTheme(a),c=e.getLanguage(s);return new zp(ek(r,c,i,l,n).stateStack,c.name,i.name)}function j9e(t,e,r,n,s){const a=ek(t,e,r,n,s),i=new zp(ek(t,e,r,n,s).stateStack,e.name,r.name);return X2(a.tokens,i),a.tokens}function ek(t,e,r,n,s){const a=Xw(r,s),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:l=500}=s,c=Y2(t);let d=s.grammarState?m9e(s.grammarState,r.name)??H4:s.grammarContextCode!=null?ek(s.grammarContextCode,e,r,n,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:H4,u=[];const h=[];for(let f=0,m=c.length;f<m;f++){const[p,g]=c[f];if(p===""){u=[],h.push([]);continue}if(i>0&&p.length>=i){u=[],h.push([{content:p,offset:g,color:"",fontStyle:0}]);continue}let y,b,v;s.includeExplanation&&(y=e.tokenizeLine(p,d,l),b=y.tokens,v=0);const w=e.tokenizeLine2(p,d,l),k=w.tokens.length/2;for(let N=0;N<k;N++){const S=w.tokens[2*N],C=N+1<k?w.tokens[2*N+2]:p.length;if(S===C)continue;const E=w.tokens[2*N+1],T=Td(n[sp.getForeground(E)],a),R=sp.getFontStyle(E),B={content:p.substring(S,C),offset:g+S,color:T,fontStyle:R};if(s.includeExplanation){const M=[];if(s.includeExplanation!=="scopeName")for(const V of r.settings){let ee;switch(typeof V.scope){case"string":ee=V.scope.split(/,/).map(Q=>Q.trim());break;case"object":ee=V.scope;break;default:continue}M.push({settings:V,selectors:ee.map(Q=>Q.split(/ /))})}B.explanation=[];let L=0;for(;S+L<C;){const V=b[v],ee=p.substring(V.startIndex,V.endIndex);L+=ee.length,B.explanation.push({content:ee,scopes:s.includeExplanation==="scopeName"?T9e(V.scopes):_9e(M,V.scopes)}),v+=1}}u.push(B)}h.push(u),u=[],d=w.ruleStack}return{tokens:h,stateStack:d}}function T9e(t){return t.map(e=>({scopeName:e}))}function _9e(t,e){const r=[];for(let n=0,s=e.length;n<s;n++){const a=e[n];r[n]={scopeName:a,themeMatches:M9e(t,a,e.slice(0,n))}}return r}function y7(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function A9e(t,e,r){if(!y7(t[t.length-1],e))return!1;let n=t.length-2,s=r.length-1;for(;n>=0&&s>=0;)y7(t[n],r[s])&&(n-=1),s-=1;return n===-1}function M9e(t,e,r){const n=[];for(const{selectors:s,settings:a}of t)for(const i of s)if(A9e(i,e,r)){n.push(a);break}return n}function WK(t,e,r){const n=Object.entries(r.themes).filter(c=>c[1]).map(c=>({color:c[0],theme:c[1]})),s=n.map(c=>{const d=NA(t,e,{...r,theme:c.theme}),u=jx(d),h=typeof c.theme=="string"?c.theme:c.theme.name;return{tokens:d,state:u,theme:h}}),a=O9e(...s.map(c=>c.tokens)),i=a[0].map((c,d)=>c.map((u,h)=>{const f={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in r&&r.includeExplanation&&(f.explanation=u.explanation),a.forEach((m,p)=>{const{content:g,explanation:y,offset:b,...v}=m[d][h];f.variants[n[p].color]=v}),f})),l=s[0].state?new zp(Object.fromEntries(s.map(c=>{var d;return[c.theme,(d=c.state)==null?void 0:d.getInternalStack(c.theme)]})),s[0].state.lang):void 0;return l&&X2(i,l),i}function O9e(...t){const e=t.map(()=>[]),r=t.length;for(let n=0;n<t[0].length;n++){const s=t.map(c=>c[n]),a=e.map(()=>[]);e.forEach((c,d)=>c.push(a[d]));const i=s.map(()=>0),l=s.map(c=>c[0]);for(;l.every(c=>c);){const c=Math.min(...l.map(d=>d.content.length));for(let d=0;d<r;d++){const u=l[d];u.content.length===c?(a[d].push(u),i[d]+=1,l[d]=s[d][i[d]]):(a[d].push({...u,content:u.content.slice(0,c)}),l[d]={...u,content:u.content.slice(c),offset:u.offset+c})}}}return e}function tk(t,e,r){let n,s,a,i,l,c;if("themes"in r){const{defaultColor:d="light",cssVariablePrefix:u="--shiki-",colorsRendering:h="css-vars"}=r,f=Object.entries(r.themes).filter(b=>b[1]).map(b=>({color:b[0],theme:b[1]})).sort((b,v)=>b.color===d?-1:v.color===d?1:0);if(f.length===0)throw new kn("`themes` option must not be empty");const m=WK(t,e,r);if(c=jx(m),d&&CA!==d&&!f.find(b=>b.color===d))throw new kn(`\`themes\` option must contain the defaultColor key \`${d}\``);const p=f.map(b=>t.getTheme(b.theme)),g=f.map(b=>b.color);a=m.map(b=>b.map(v=>h9e(v,g,u,d,h))),c&&X2(a,c);const y=f.map(b=>Xw(b.theme,r));s=v7(f,p,y,u,d,"fg",h),n=v7(f,p,y,u,d,"bg",h),i=`shiki-themes ${p.map(b=>b.name).join(" ")}`,l=d?void 0:[s,n].join(";")}else if("theme"in r){const d=Xw(r.theme,r);a=NA(t,e,r);const u=t.getTheme(r.theme);n=Td(u.bg,d),s=Td(u.fg,d),i=u.name,c=jx(a)}else throw new kn("Invalid options, either `theme` or `themes` must be provided");return{tokens:a,fg:s,bg:n,themeName:i,rootStyle:l,grammarState:c}}function v7(t,e,r,n,s,a,i){return t.map((l,c)=>{const d=Td(e[c][a],r[c])||"inherit",u=`${n+l.color}${a==="bg"?"-bg":""}:${d}`;if(c===0&&s){if(s===CA&&t.length>1){const h=t.findIndex(g=>g.color==="light"),f=t.findIndex(g=>g.color==="dark");if(h===-1||f===-1)throw new kn('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const m=Td(e[h][a],r[h])||"inherit",p=Td(e[f][a],r[f])||"inherit";return`light-dark(${m}, ${p});${u}`}return d}return i==="css-vars"?u:null}).filter(l=>!!l).join(";")}function rk(t,e,r,n={meta:{},options:r,codeToHast:(s,a)=>rk(t,s,a),codeToTokens:(s,a)=>tk(t,s,a)}){var p,g;let s=e;for(const y of Qw(r))s=((p=y.preprocess)==null?void 0:p.call(n,s,r))||s;let{tokens:a,fg:i,bg:l,themeName:c,rootStyle:d,grammarState:u}=tk(t,s,r);const{mergeWhitespaces:h=!0,mergeSameStyleTokens:f=!1}=r;h===!0?a=P9e(a):h==="never"&&(a=I9e(a)),f&&(a=D9e(a));const m={...n,get source(){return s}};for(const y of Qw(r))a=((g=y.tokens)==null?void 0:g.call(m,a))||a;return R9e(a,{...r,fg:i,bg:l,themeName:c,rootStyle:d},m,u)}function R9e(t,e,r,n=jx(t)){var p,g,y;const s=Qw(e),a=[],i={type:"root",children:[]},{structure:l="classic",tabindex:c="0"}=e;let d={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...c!==!1&&c!=null?{tabindex:c.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([b])=>!b.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:a};const h=[],f={...r,structure:l,addClassToHast:UK,get source(){return r.source},get tokens(){return t},get options(){return e},get root(){return i},get pre(){return d},get code(){return u},get lines(){return h}};if(t.forEach((b,v)=>{var N,S;v&&(l==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):l==="classic"&&a.push({type:"text",value:`
`}));let w={type:"element",tagName:"span",properties:{class:"line"},children:[]},k=0;for(const C of b){let E={type:"element",tagName:"span",properties:{...C.htmlAttrs},children:[{type:"text",value:C.content}]};const T=Z4(C.htmlStyle||Jw(C));T&&(E.properties.style=T);for(const R of s)E=((N=R==null?void 0:R.span)==null?void 0:N.call(f,E,v+1,k,w,C))||E;l==="inline"?i.children.push(E):l==="classic"&&w.children.push(E),k+=C.content.length}if(l==="classic"){for(const C of s)w=((S=C==null?void 0:C.line)==null?void 0:S.call(f,w,v+1))||w;h.push(w),a.push(w)}}),l==="classic"){for(const b of s)u=((p=b==null?void 0:b.code)==null?void 0:p.call(f,u))||u;d.children.push(u);for(const b of s)d=((g=b==null?void 0:b.pre)==null?void 0:g.call(f,d))||d;i.children.push(d)}let m=i;for(const b of s)m=((y=b==null?void 0:b.root)==null?void 0:y.call(f,m))||m;return n&&X2(m,n),m}function P9e(t){return t.map(e=>{const r=[];let n="",s=0;return e.forEach((a,i)=>{const c=!(a.fontStyle&&(a.fontStyle&Es.Underline||a.fontStyle&Es.Strikethrough));c&&a.content.match(/^\s+$/)&&e[i+1]?(s||(s=a.offset),n+=a.content):n?(c?r.push({...a,offset:s,content:n+a.content}):r.push({content:n,offset:s},a),s=0,n=""):r.push(a)}),r})}function I9e(t){return t.map(e=>e.flatMap(r=>{if(r.content.match(/^\s+$/))return r;const n=r.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return r;const[,s,a,i]=n;if(!s&&!i)return r;const l=[{...r,offset:r.offset+s.length,content:a}];return s&&l.unshift({content:s,offset:r.offset}),i&&l.push({content:i,offset:r.offset+s.length+a.length}),l}))}function D9e(t){return t.map(e=>{const r=[];for(const n of e){if(r.length===0){r.push({...n});continue}const s=r[r.length-1],a=Z4(s.htmlStyle||Jw(s)),i=Z4(n.htmlStyle||Jw(n)),l=s.fontStyle&&(s.fontStyle&Es.Underline||s.fontStyle&Es.Strikethrough),c=n.fontStyle&&(n.fontStyle&Es.Underline||n.fontStyle&Es.Strikethrough);!l&&!c&&a===i?s.content+=n.content:r.push({...n})}return r})}const L9e=s9e;function $9e(t,e,r){var a;const n={meta:{},options:r,codeToHast:(i,l)=>rk(t,i,l),codeToTokens:(i,l)=>tk(t,i,l)};let s=L9e(rk(t,e,r,n));for(const i of Qw(r))s=((a=i.postprocess)==null?void 0:a.call(n,s,r))||s;return s}const b7={light:"#333333",dark:"#bbbbbb"},w7={light:"#fffffe",dark:"#1e1e1e"},k7="__shiki_resolved";function SA(t){var l,c,d,u,h;if(t!=null&&t[k7])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:r,fg:n}=e;if(!r||!n){const f=e.settings?e.settings.find(m=>!m.name&&!m.scope):void 0;(l=f==null?void 0:f.settings)!=null&&l.foreground&&(n=f.settings.foreground),(c=f==null?void 0:f.settings)!=null&&c.background&&(r=f.settings.background),!n&&((d=e==null?void 0:e.colors)!=null&&d["editor.foreground"])&&(n=e.colors["editor.foreground"]),!r&&((u=e==null?void 0:e.colors)!=null&&u["editor.background"])&&(r=e.colors["editor.background"]),n||(n=e.type==="light"?b7.light:b7.dark),r||(r=e.type==="light"?w7.light:w7.dark),e.fg=n,e.bg=r}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const a=new Map;function i(f){var p;if(a.has(f))return a.get(f);s+=1;const m=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return(p=e.colorReplacements)!=null&&p[`#${m}`]?i(f):(a.set(f,m),m)}e.settings=e.settings.map(f=>{var y,b;const m=((y=f.settings)==null?void 0:y.foreground)&&!f.settings.foreground.startsWith("#"),p=((b=f.settings)==null?void 0:b.background)&&!f.settings.background.startsWith("#");if(!m&&!p)return f;const g={...f,settings:{...f.settings}};if(m){const v=i(f.settings.foreground);e.colorReplacements[v]=f.settings.foreground,g.settings.foreground=v}if(p){const v=i(f.settings.background);e.colorReplacements[v]=f.settings.background,g.settings.background=v}return g});for(const f of Object.keys(e.colors||{}))if((f==="editor.foreground"||f==="editor.background"||f.startsWith("terminal.ansi"))&&!((h=e.colors[f])!=null&&h.startsWith("#"))){const m=i(e.colors[f]);e.colorReplacements[m]=e.colors[f],e.colors[f]=m}return Object.defineProperty(e,k7,{enumerable:!1,writable:!1,value:!0}),e}async function qK(t){return Array.from(new Set((await Promise.all(t.filter(e=>!BK(e)).map(async e=>await FK(e).then(r=>Array.isArray(r)?r:[r])))).flat()))}async function GK(t){return(await Promise.all(t.map(async r=>zK(r)?null:SA(await FK(r))))).filter(r=>!!r)}let F9e=3;function B9e(t,e=3){e>F9e||console.trace(`[SHIKI DEPRECATE]: ${t}`)}class Bf extends Error{constructor(e){super(e),this.name="ShikiError"}}class z9e extends HDe{constructor(r,n,s,a={}){super(r);ve(this,"_resolvedThemes",new Map);ve(this,"_resolvedGrammars",new Map);ve(this,"_langMap",new Map);ve(this,"_langGraph",new Map);ve(this,"_textmateThemeCache",new WeakMap);ve(this,"_loadedThemesCache",null);ve(this,"_loadedLanguagesCache",null);this._resolver=r,this._themes=n,this._langs=s,this._alias=a,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}getTheme(r){return typeof r=="string"?this._resolvedThemes.get(r):this.loadTheme(r)}loadTheme(r){const n=SA(r);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(r){let n=this._textmateThemeCache.get(r);n||(n=qw.createFromRawTheme(r),this._textmateThemeCache.set(r,n)),this._syncRegistry.setTheme(n)}getGrammar(r){if(this._alias[r]){const n=new Set([r]);for(;this._alias[r];){if(r=this._alias[r],n.has(r))throw new Bf(`Circular alias \`${Array.from(n).join(" -> ")} -> ${r}\``);n.add(r)}}return this._resolvedGrammars.get(r)}loadLanguage(r){var i,l,c,d;if(this.getGrammar(r.name))return;const n=new Set([...this._langMap.values()].filter(u=>{var h;return(h=u.embeddedLangsLazy)==null?void 0:h.includes(r.name)}));this._resolver.addLanguage(r);const s={balancedBracketSelectors:r.balancedBracketSelectors||["*"],unbalancedBracketSelectors:r.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(r.scopeName,r);const a=this.loadGrammarWithConfiguration(r.scopeName,1,s);if(a.name=r.name,this._resolvedGrammars.set(r.name,a),r.aliases&&r.aliases.forEach(u=>{this._alias[u]=r.name}),this._loadedLanguagesCache=null,n.size)for(const u of n)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(l=(i=this._syncRegistry)==null?void 0:i._injectionGrammars)==null||l.delete(u.scopeName),(d=(c=this._syncRegistry)==null?void 0:c._grammars)==null||d.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(r){for(const a of r)this.resolveEmbeddedLanguages(a);const n=Array.from(this._langGraph.entries()),s=n.filter(([a,i])=>!i);if(s.length){const a=n.filter(([i,l])=>{var c;return l&&((c=l.embeddedLangs)==null?void 0:c.some(d=>s.map(([u])=>u).includes(d)))}).filter(i=>!s.includes(i));throw new Bf(`Missing languages ${s.map(([i])=>`\`${i}\``).join(", ")}, required by ${a.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[a,i]of n)this._resolver.addLanguage(i);for(const[a,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(r){if(this._langMap.set(r.name,r),this._langGraph.set(r.name,r),r.embeddedLangs)for(const n of r.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class U9e{constructor(e,r){ve(this,"_langs",new Map);ve(this,"_scopeToLang",new Map);ve(this,"_injections",new Map);ve(this,"_onigLib");this._onigLib={createOnigScanner:n=>e.createScanner(n),createOnigString:n=>e.createString(n)},r.forEach(n=>this.addLanguage(n))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(r=>{this._langs.set(r,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(r=>{this._injections.get(r)||this._injections.set(r,[]),this._injections.get(r).push(e.scopeName)})}getInjections(e){const r=e.split(".");let n=[];for(let s=1;s<=r.length;s++){const a=r.slice(0,s).join(".");n=[...n,...this._injections.get(a)||[]]}return n}}let w0=0;function V9e(t){w0+=1,t.warnings!==!1&&w0>=10&&w0%10===0&&console.warn(`[Shiki] ${w0} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Bf("`engine` option is required for synchronous mode");const r=(t.langs||[]).flat(1),n=(t.themes||[]).flat(1).map(SA),s=new U9e(t.engine,r),a=new z9e(s,n,r,t.langAlias);let i;function l(v){y();const w=a.getGrammar(typeof v=="string"?v:v.name);if(!w)throw new Bf(`Language \`${v}\` not found, you may need to load it first`);return w}function c(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};y();const w=a.getTheme(v);if(!w)throw new Bf(`Theme \`${v}\` not found, you may need to load it first`);return w}function d(v){y();const w=c(v);i!==v&&(a.setTheme(w),i=v);const k=a.getColorMap();return{theme:w,colorMap:k}}function u(){return y(),a.getLoadedThemes()}function h(){return y(),a.getLoadedLanguages()}function f(...v){y(),a.loadLanguages(v.flat(1))}async function m(...v){return f(await qK(v))}function p(...v){y();for(const w of v.flat(1))a.loadTheme(w)}async function g(...v){return y(),p(await GK(v))}function y(){if(e)throw new Bf("Shiki instance has been disposed")}function b(){e||(e=!0,a.dispose(),w0-=1)}return{setTheme:d,getTheme:c,getLanguage:l,getLoadedThemes:u,getLoadedLanguages:h,loadLanguage:m,loadLanguageSync:f,loadTheme:g,loadThemeSync:p,dispose:b,[Symbol.dispose]:b}}async function H9e(t){t.engine||B9e("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,r,n]=await Promise.all([GK(t.themes||[]),qK(t.langs||[]),t.engine]);return V9e({...t,themes:e,langs:r,engine:n})}async function KK(t){const e=await H9e(t);return{getLastGrammarState:(...r)=>E9e(e,...r),codeToTokensBase:(r,n)=>NA(e,r,n),codeToTokensWithThemes:(r,n)=>WK(e,r,n),codeToTokens:(r,n)=>tk(e,r,n),codeToHast:(r,n)=>rk(e,r,n),codeToHtml:(r,n)=>$9e(e,r,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function FBe(t){const e=t.langs,r=t.themes,n=t.engine;async function s(a){function i(h){var f;if(typeof h=="string"){if(BK(h))return[];h=((f=a.langAlias)==null?void 0:f[h])||h;const m=e[h];if(!m)throw new kn(`Language \`${h}\` is not included in this bundle. You may want to load it from external source.`);return m}return h}function l(h){if(zK(h))return"none";if(typeof h=="string"){const f=r[h];if(!f)throw new kn(`Theme \`${h}\` is not included in this bundle. You may want to load it from external source.`);return f}return h}const c=(a.themes??[]).map(h=>l(h)),d=(a.langs??[]).map(h=>i(h)),u=await KK({engine:a.engine??n(),...a,themes:c,langs:d});return{...u,loadLanguage(...h){return u.loadLanguage(...h.map(i))},loadTheme(...h){return u.loadTheme(...h.map(l))},getBundledLanguages(){return e},getBundledThemes(){return r}}}return s}function W9e(t){let e;async function r(n={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...n.themes||[]),s.loadLanguage(...n.langs||[])]),s}else return e=t({...n,themes:n.themes||[],langs:n.langs||[]}),e}return r}function BBe(t,e){const r=W9e(t);async function n(s,a){var c;const i=await r({langs:[a.lang],themes:"theme"in a?[a.theme]:Object.values(a.themes)}),l=await((c=e==null?void 0:e.guessEmbeddedLanguages)==null?void 0:c.call(e,s,a.lang,i));return l&&await i.loadLanguage(...l),i}return{getSingletonHighlighter(s){return r(s)},async codeToHtml(s,a){return(await n(s,a)).codeToHtml(s,a)},async codeToHast(s,a){return(await n(s,a)).codeToHast(s,a)},async codeToTokens(s,a){return(await n(s,a)).codeToTokens(s,a)},async codeToTokensBase(s,a){return(await n(s,a)).codeToTokensBase(s,a)},async codeToTokensWithThemes(s,a){return(await n(s,a)).codeToTokensWithThemes(s,a)},async getLastGrammarState(s,a){return(await r({langs:[a.lang],themes:[a.theme]})).getLastGrammarState(s,a)}}}function Up(t){if([...t].length!==1)throw new Error(`Expected "${t}" to be a single code point`);return t.codePointAt(0)}function q9e(t,e,r){return t.has(e)||t.set(e,r),t.get(e)}const EA=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),Un=String.raw;function Vp(t,e){if(t==null)throw new Error(e??"Value expected");return t}const ZK=Un`\[\^?`,YK=`c.? | C(?:-.?)?|${Un`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${Un`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${Un`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${Un`o\{[^\}]*\}?`}|${Un`\d{1,3}`}`,jA=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,$1=new RegExp(Un`
  \\ (?:
    ${YK}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${jA.source})+
  | ${ZK}
  | .
`.replace(/\s+/g,""),"gsu"),_S=new RegExp(Un`
  \\ (?:
    ${YK}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${ZK}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function G9e(t,e={}){const r={flags:"",...e,rules:{captureGroup:!1,singleline:!1,...e.rules}};if(typeof t!="string")throw new Error("String expected as pattern");const n=h$e(r.flags),s=[n.extended],a={captureGroup:r.rules.captureGroup,getCurrentModX(){return s.at(-1)},numOpenGroups:0,popModX(){s.pop()},pushModX(h){s.push(h)},replaceCurrentModX(h){s[s.length-1]=h},singleline:r.rules.singleline};let i=[],l;for($1.lastIndex=0;l=$1.exec(t);){const h=K9e(a,t,l[0],$1.lastIndex);h.tokens?i.push(...h.tokens):h.token&&i.push(h.token),h.lastIndex!==void 0&&($1.lastIndex=h.lastIndex)}const c=[];let d=0;i.filter(h=>h.type==="GroupOpen").forEach(h=>{h.kind==="capturing"?h.number=++d:h.raw==="("&&c.push(h)}),d||c.forEach((h,f)=>{h.kind="capturing",h.number=f+1});const u=d||c.length;return{tokens:i.map(h=>h.type==="EscapedNumber"?m$e(h,u):h).flat(),flags:n}}function K9e(t,e,r,n){const[s,a]=r;if(r==="["||r==="[^"){const i=Z9e(e,r,n);return{tokens:i.tokens,lastIndex:i.lastIndex}}if(s==="\\"){if("AbBGyYzZ".includes(a))return{token:C7(r,r)};if(/^\\g[<']/.test(r)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:a$e(r)}}if(/^\\k[<']/.test(r)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:JK(r)}}if(a==="K")return{token:QK("keep",r)};if(a==="N"||a==="R")return{token:Lu("newline",r,{negate:a==="N"})};if(a==="O")return{token:Lu("any",r)};if(a==="X")return{token:Lu("text_segment",r)};const i=XK(r,{inCharClass:!1});return Array.isArray(i)?{tokens:i}:{token:i}}if(s==="("){if(a==="*")return{token:c$e(r)};if(r==="(?{")throw new Error(`Unsupported callout "${r}"`);if(r.startsWith("(?#")){if(e[n]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:n+1}}if(/^\(\?[-imx]+[:)]$/.test(r))return{token:l$e(r,t)};if(t.pushModX(t.getCurrentModX()),t.numOpenGroups++,r==="("&&!t.captureGroup||r==="(?:")return{token:kf("group",r)};if(r==="(?>")return{token:kf("atomic",r)};if(r==="(?="||r==="(?!"||r==="(?<="||r==="(?<!")return{token:kf(r[2]==="<"?"lookbehind":"lookahead",r,{negate:r.endsWith("!")})};if(r==="("&&t.captureGroup||r.startsWith("(?<")&&r.endsWith(">")||r.startsWith("(?'")&&r.endsWith("'"))return{token:kf("capturing",r,{...r!=="("&&{name:r.slice(3,-1)}})};if(r.startsWith("(?~")){if(r==="(?~|")throw new Error(`Unsupported absence function kind "${r}"`);return{token:kf("absence_repeater",r)}}throw r==="(?("?new Error(`Unsupported conditional "${r}"`):new Error(`Invalid or unsupported group option "${r}"`)}if(r===")"){if(t.popModX(),t.numOpenGroups--,t.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:r$e(r)}}if(t.getCurrentModX()){if(r==="#"){const i=e.indexOf(`
`,n);return{lastIndex:i===-1?e.length:i}}if(/^\s$/.test(r)){const i=/\s+/y;return i.lastIndex=n,{lastIndex:i.exec(e)?i.lastIndex:n}}}if(r===".")return{token:Lu("dot",r)};if(r==="^"||r==="$"){const i=t.singleline?{"^":Un`\A`,$:Un`\Z`}[r]:r;return{token:C7(i,r)}}return r==="|"?{token:X9e(r)}:jA.test(r)?{tokens:p$e(r)}:{token:$l(Up(r),r)}}function Z9e(t,e,r){const n=[N7(e[1]==="^",e)];let s=1,a;for(_S.lastIndex=r;a=_S.exec(t);){const i=a[0];if(i[0]==="["&&i[1]!==":")s++,n.push(N7(i[1]==="^",i));else if(i==="]"){if(n.at(-1).type==="CharacterClassOpen")n.push($l(93,i));else if(s--,n.push(J9e(i)),!s)break}else{const l=Y9e(i);Array.isArray(l)?n.push(...l):n.push(l)}}return{tokens:n,lastIndex:_S.lastIndex||t.length}}function Y9e(t){if(t[0]==="\\")return XK(t,{inCharClass:!0});if(t[0]==="["){const e=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(t);if(!e||!EA.has(e.groups.name))throw new Error(`Invalid POSIX class "${t}"`);return Lu("posix",t,{value:e.groups.name,negate:!!e.groups.negate})}return t==="-"?Q9e(t):t==="&&"?e$e(t):$l(Up(t),t)}function XK(t,{inCharClass:e}){const r=t[1];if(r==="c"||r==="C")return o$e(t);if("dDhHsSwW".includes(r))return d$e(t);if(t.startsWith(Un`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${t}"`);if(/^\\[pP]\{/.test(t)){if(t.length===3)throw new Error(`Incomplete or invalid Unicode property "${t}"`);return u$e(t)}if(new RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(t))try{const n=t.split(/\\x/).slice(1).map(i=>parseInt(i,16)),s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(n)),a=new TextEncoder;return[...s].map(i=>{const l=[...a.encode(i)].map(c=>`\\x${c.toString(16)}`).join("");return $l(Up(i),l)})}catch{throw new Error(`Multibyte code "${t}" incomplete or invalid in Oniguruma`)}if(r==="u"||r==="x")return $l(f$e(t),t);if(S7.has(r))return $l(S7.get(r),t);if(/\d/.test(r))return t$e(e,t);if(t==="\\")throw new Error(Un`Incomplete escape "\"`);if(r==="M")throw new Error(`Unsupported meta "${t}"`);if([...t].length===2)return $l(t.codePointAt(1),t);throw new Error(`Unexpected escape "${t}"`)}function X9e(t){return{type:"Alternator",raw:t}}function C7(t,e){return{type:"Assertion",kind:t,raw:e}}function JK(t){return{type:"Backreference",raw:t}}function $l(t,e){return{type:"Character",value:t,raw:e}}function J9e(t){return{type:"CharacterClassClose",raw:t}}function Q9e(t){return{type:"CharacterClassHyphen",raw:t}}function e$e(t){return{type:"CharacterClassIntersector",raw:t}}function N7(t,e){return{type:"CharacterClassOpen",negate:t,raw:e}}function Lu(t,e,r={}){return{type:"CharacterSet",kind:t,...r,raw:e}}function QK(t,e,r={}){return t==="keep"?{type:"Directive",kind:t,raw:e}:{type:"Directive",kind:t,flags:Vp(r.flags),raw:e}}function t$e(t,e){return{type:"EscapedNumber",inCharClass:t,raw:e}}function r$e(t){return{type:"GroupClose",raw:t}}function kf(t,e,r={}){return{type:"GroupOpen",kind:t,...r,raw:e}}function n$e(t,e,r,n){return{type:"NamedCallout",kind:t,tag:e,arguments:r,raw:n}}function s$e(t,e,r,n){return{type:"Quantifier",kind:t,min:e,max:r,raw:n}}function a$e(t){return{type:"Subroutine",raw:t}}const i$e=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),S7=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function o$e(t){const e=t[1]==="c"?t[2]:t[3];if(!e||!/[A-Za-z]/.test(e))throw new Error(`Unsupported control character "${t}"`);return $l(Up(e.toUpperCase())-64,t)}function l$e(t,e){let{on:r,off:n}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(t).groups;n??(n="");const s=(e.getCurrentModX()||r.includes("x"))&&!n.includes("x"),a=j7(r),i=j7(n),l={};if(a&&(l.enable=a),i&&(l.disable=i),t.endsWith(")"))return e.replaceCurrentModX(s),QK("flags",t,{flags:l});if(t.endsWith(":"))return e.pushModX(s),e.numOpenGroups++,kf("group",t,{...(a||i)&&{flags:l}});throw new Error(`Unexpected flag modifier "${t}"`)}function c$e(t){const e=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(t);if(!e)throw new Error(`Incomplete or invalid named callout "${t}"`);const{name:r,tag:n,args:s}=e.groups;if(!r)throw new Error(`Invalid named callout "${t}"`);if(n==="")throw new Error(`Named callout tag with empty value not allowed "${t}"`);const a=s?s.split(",").filter(u=>u!=="").map(u=>/^[+-]?\d+$/.test(u)?+u:u):[],[i,l,c]=a,d=i$e.has(r)?r.toLowerCase():"custom";switch(d){case"fail":case"mismatch":case"skip":if(a.length>0)throw new Error(`Named callout arguments not allowed "${a}"`);break;case"error":if(a.length>1)throw new Error(`Named callout allows only one argument "${a}"`);if(typeof i=="string")throw new Error(`Named callout argument must be a number "${i}"`);break;case"max":if(!a.length||a.length>2)throw new Error(`Named callout must have one or two arguments "${a}"`);if(typeof i=="string"&&!/^[A-Za-z_]\w*$/.test(i))throw new Error(`Named callout argument one must be a tag or number "${i}"`);if(a.length===2&&(typeof l=="number"||!/^[<>X]$/.test(l)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${l}"`);break;case"count":case"total_count":if(a.length>1)throw new Error(`Named callout allows only one argument "${a}"`);if(a.length===1&&(typeof i=="number"||!/^[<>X]$/.test(i)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${i}"`);break;case"cmp":if(a.length!==3)throw new Error(`Named callout must have three arguments "${a}"`);if(typeof i=="string"&&!/^[A-Za-z_]\w*$/.test(i))throw new Error(`Named callout argument one must be a tag or number "${i}"`);if(typeof l=="number"||!/^(?:[<>!=]=|[<>])$/.test(l))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${l}"`);if(typeof c=="string"&&!/^[A-Za-z_]\w*$/.test(c))throw new Error(`Named callout argument three must be a tag or number "${c}"`);break;case"custom":throw new Error(`Undefined callout name "${r}"`);default:throw new Error(`Unexpected named callout kind "${d}"`)}return n$e(d,n??null,(s==null?void 0:s.split(","))??null,t)}function E7(t){let e=null,r,n;if(t[0]==="{"){const{minStr:s,maxStr:a}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(t).groups,i=1e5;if(+s>i||a&&+a>i)throw new Error("Quantifier value unsupported in Oniguruma");if(r=+s,n=a===void 0?+s:a===""?1/0:+a,r>n&&(e="possessive",[r,n]=[n,r]),t.endsWith("?")){if(e==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');e="lazy"}else e||(e="greedy")}else r=t[0]==="+"?1:0,n=t[0]==="?"?1:1/0,e=t[1]==="+"?"possessive":t[1]==="?"?"lazy":"greedy";return s$e(e,r,n,t)}function d$e(t){const e=t[1].toLowerCase();return Lu({d:"digit",h:"hex",s:"space",w:"word"}[e],t,{negate:t[1]!==e})}function u$e(t){const{p:e,neg:r,value:n}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(t).groups;return Lu("property",t,{value:n,negate:e==="P"&&!r||e==="p"&&!!r})}function j7(t){const e={};return t.includes("i")&&(e.ignoreCase=!0),t.includes("m")&&(e.dotAll=!0),t.includes("x")&&(e.extended=!0),Object.keys(e).length?e:null}function h$e(t){const e={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let r=0;r<t.length;r++){const n=t[r];if(!"imxDPSWy".includes(n))throw new Error(`Invalid flag "${n}"`);if(n==="y"){if(!/^y{[gw]}/.test(t.slice(r)))throw new Error('Invalid or unspecified flag "y" mode');e.textSegmentMode=t[r+2]==="g"?"grapheme":"word",r+=3;continue}e[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[n]]=!0}return e}function f$e(t){if(new RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(t))throw new Error(`Incomplete or invalid escape "${t}"`);const e=t[2]==="{"?new RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(t).groups.hex:t.slice(2);return parseInt(e,16)}function m$e(t,e){const{raw:r,inCharClass:n}=t,s=r.slice(1);if(!n&&(s!=="0"&&s.length===1||s[0]!=="0"&&+s<=e))return[JK(r)];const a=[],i=s.match(/^[0-7]+|\d/g);for(let l=0;l<i.length;l++){const c=i[l];let d;if(l===0&&c!=="8"&&c!=="9"){if(d=parseInt(c,8),d>127)throw new Error(Un`Octal encoded byte above 177 unsupported "${r}"`)}else d=Up(c);a.push($l(d,(l===0?"\\":"")+c))}return a}function p$e(t){const e=[],r=new RegExp(jA,"gy");let n;for(;n=r.exec(t);){const s=n[0];if(s[0]==="{"){const a=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(s);if(a){const{min:i,max:l}=a.groups;if(+i>+l&&s.endsWith("?")){r.lastIndex--,e.push(E7(s.slice(0,-1)));continue}}}e.push(E7(s))}return e}function eZ(t,e){if(!Array.isArray(t.body))throw new Error("Expected node with body array");if(t.body.length!==1)return!1;const r=t.body[0];return!e||Object.keys(e).every(n=>e[n]===r[n])}function g$e(t){return x$e.has(t.type)}const x$e=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function tZ(t,e={}){const r={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...e,rules:{captureGroup:!1,singleline:!1,...e.rules}},n=G9e(t,{flags:r.flags,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline}}),s=(f,m)=>{const p=n.tokens[a.nextIndex];switch(a.parent=f,a.nextIndex++,p.type){case"Alternator":return Oh();case"Assertion":return y$e(p);case"Backreference":return v$e(p,a);case"Character":return J2(p.value,{useLastValid:!!m.isCheckingRangeEnd});case"CharacterClassHyphen":return b$e(p,a,m);case"CharacterClassOpen":return w$e(p,a,m);case"CharacterSet":return k$e(p,a);case"Directive":return T$e(p.kind,{flags:p.flags});case"GroupOpen":return C$e(p,a,m);case"NamedCallout":return A$e(p.kind,p.tag,p.arguments);case"Quantifier":return N$e(p,a);case"Subroutine":return S$e(p,a);default:throw new Error(`Unexpected token type "${p.type}"`)}},a={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:r.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:r.skipBackrefValidation,skipLookbehindValidation:r.skipLookbehindValidation,skipPropertyNameValidation:r.skipPropertyNameValidation,subroutines:[],tokens:n.tokens,unicodePropertyMap:r.unicodePropertyMap,walk:s},i=O$e(_$e(n.flags));let l=i.body[0];for(;a.nextIndex<n.tokens.length;){const f=s(l,{});f.type==="Alternative"?(i.body.push(f),l=f):l.body.push(f)}const{capturingGroups:c,hasNumberedRef:d,namedGroupsByName:u,subroutines:h}=a;if(d&&u.size&&!r.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:f}of h)if(typeof f=="number"){if(f>c.length)throw new Error("Subroutine uses a group number that's not defined");f&&(c[f-1].isSubroutined=!0)}else if(u.has(f)){if(u.get(f).length>1)throw new Error(Un`Subroutine uses a duplicate group name "\g<${f}>"`);u.get(f)[0].isSubroutined=!0}else throw new Error(Un`Subroutine uses a group name that's not defined "\g<${f}>"`);return i}function y$e({kind:t}){return Y4(Vp({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[t],`Unexpected assertion kind "${t}"`),{negate:t===Un`\B`||t===Un`\Y`})}function v$e({raw:t},e){const r=/^\\k[<']/.test(t),n=r?t.slice(3,-1):t.slice(1),s=(a,i=!1)=>{const l=e.capturingGroups.length;let c=!1;if(a>l)if(e.skipBackrefValidation)c=!0;else throw new Error(`Not enough capturing groups defined to the left "${t}"`);return e.hasNumberedRef=!0,X4(i?l+1-a:a,{orphan:c})};if(r){const a=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(n);if(a)return s(+a.groups.num,!!a.groups.sign);if(/[-+]/.test(n))throw new Error(`Invalid backref name "${t}"`);if(!e.namedGroupsByName.has(n))throw new Error(`Group name not defined to the left "${t}"`);return X4(n)}return s(+n)}function b$e(t,e,r){const{tokens:n,walk:s}=e,a=e.parent,i=a.body.at(-1),l=n[e.nextIndex];if(!r.isCheckingRangeEnd&&i&&i.type!=="CharacterClass"&&i.type!=="CharacterClassRange"&&l&&l.type!=="CharacterClassOpen"&&l.type!=="CharacterClassClose"&&l.type!=="CharacterClassIntersector"){const c=s(a,{...r,isCheckingRangeEnd:!0});if(i.type==="Character"&&c.type==="Character")return a.body.pop(),j$e(i,c);throw new Error("Invalid character class range")}return J2(Up("-"))}function w$e({negate:t},e,r){const{tokens:n,walk:s}=e,a=n[e.nextIndex],i=[Ev()];let l=A7(a);for(;l.type!=="CharacterClassClose";){if(l.type==="CharacterClassIntersector")i.push(Ev()),e.nextIndex++;else{const d=i.at(-1);d.body.push(s(d,r))}l=A7(n[e.nextIndex],a)}const c=Ev({negate:t});return i.length===1?c.body=i[0].body:(c.kind="intersection",c.body=i.map(d=>d.body.length===1?d.body[0]:d)),e.nextIndex++,c}function k$e({kind:t,negate:e,value:r},n){const{normalizeUnknownPropertyNames:s,skipPropertyNameValidation:a,unicodePropertyMap:i}=n;if(t==="property"){const l=Q2(r);if(EA.has(l)&&!(i!=null&&i.has(l)))t="posix",r=l;else return Cf(r,{negate:e,normalizeUnknownPropertyNames:s,skipPropertyNameValidation:a,unicodePropertyMap:i})}return t==="posix"?M$e(r,{negate:e}):J4(t,{negate:e})}function C$e(t,e,r){const{tokens:n,capturingGroups:s,namedGroupsByName:a,skipLookbehindValidation:i,walk:l}=e,c=R$e(t),d=c.type==="AbsenceFunction",u=_7(c),h=u&&c.negate;if(c.type==="CapturingGroup"&&(s.push(c),c.name&&q9e(a,c.name,[]).push(c)),d&&r.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let f=M7(n[e.nextIndex]);for(;f.type!=="GroupClose";){if(f.type==="Alternator")c.body.push(Oh()),e.nextIndex++;else{const m=c.body.at(-1),p=l(m,{...r,isInAbsenceFunction:r.isInAbsenceFunction||d,isInLookbehind:r.isInLookbehind||u,isInNegLookbehind:r.isInNegLookbehind||h});if(m.body.push(p),(u||r.isInLookbehind)&&!i){const g="Lookbehind includes a pattern not allowed by Oniguruma";if(h||r.isInNegLookbehind){if(T7(p)||p.type==="CapturingGroup")throw new Error(g)}else if(T7(p)||_7(p)&&p.negate)throw new Error(g)}}f=M7(n[e.nextIndex])}return e.nextIndex++,c}function N$e({kind:t,min:e,max:r},n){const s=n.parent,a=s.body.at(-1);if(!a||!g$e(a))throw new Error("Quantifier requires a repeatable token");const i=nZ(t,e,r,a);return s.body.pop(),i}function S$e({raw:t},e){const{capturingGroups:r,subroutines:n}=e;let s=t.slice(3,-1);const a=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(s);if(a){const l=+a.groups.num,c=r.length;if(e.hasNumberedRef=!0,s={"":l,"+":c+l,"-":c+1-l}[a.groups.sign],s<1)throw new Error("Invalid subroutine number")}else s==="0"&&(s=0);const i=sZ(s);return n.push(i),i}function E$e(t,e){return{type:"AbsenceFunction",kind:t,body:_y(e==null?void 0:e.body)}}function Oh(t){return{type:"Alternative",body:aZ(t==null?void 0:t.body)}}function Y4(t,e){const r={type:"Assertion",kind:t};return(t==="word_boundary"||t==="text_segment_boundary")&&(r.negate=!!(e!=null&&e.negate)),r}function X4(t,e){const r=!!(e!=null&&e.orphan);return{type:"Backreference",ref:t,...r&&{orphan:r}}}function rZ(t,e){const r={name:void 0,isSubroutined:!1,...e};if(r.name!==void 0&&!P$e(r.name))throw new Error(`Group name "${r.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:t,...r.name&&{name:r.name},...r.isSubroutined&&{isSubroutined:r.isSubroutined},body:_y(e==null?void 0:e.body)}}function J2(t,e){const r={useLastValid:!1,...e};if(t>1114111){const n=t.toString(16);if(r.useLastValid)t=1114111;else throw t>1310719?new Error(`Invalid code point out of range "\\x{${n}}"`):new Error(`Invalid code point out of range in JS "\\x{${n}}"`)}return{type:"Character",value:t}}function Ev(t){const e={kind:"union",negate:!1,...t};return{type:"CharacterClass",kind:e.kind,negate:e.negate,body:aZ(t==null?void 0:t.body)}}function j$e(t,e){if(e.value<t.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:t,max:e}}function J4(t,e){const r=!!(e!=null&&e.negate),n={type:"CharacterSet",kind:t};return(t==="digit"||t==="hex"||t==="newline"||t==="space"||t==="word")&&(n.negate=r),(t==="text_segment"||t==="newline"&&!r)&&(n.variableLength=!0),n}function T$e(t,e={}){if(t==="keep")return{type:"Directive",kind:t};if(t==="flags")return{type:"Directive",kind:t,flags:Vp(e.flags)};throw new Error(`Unexpected directive kind "${t}"`)}function _$e(t){return{type:"Flags",...t}}function Yi(t){const e=t==null?void 0:t.atomic,r=t==null?void 0:t.flags;if(e&&r)throw new Error("Atomic group cannot have flags");return{type:"Group",...e&&{atomic:e},...r&&{flags:r},body:_y(t==null?void 0:t.body)}}function Nu(t){const e={behind:!1,negate:!1,...t};return{type:"LookaroundAssertion",kind:e.behind?"lookbehind":"lookahead",negate:e.negate,body:_y(t==null?void 0:t.body)}}function A$e(t,e,r){return{type:"NamedCallout",kind:t,tag:e,arguments:r}}function M$e(t,e){const r=!!(e!=null&&e.negate);if(!EA.has(t))throw new Error(`Invalid POSIX class "${t}"`);return{type:"CharacterSet",kind:"posix",value:t,negate:r}}function nZ(t,e,r,n){if(e>r)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:t,min:e,max:r,body:n}}function O$e(t,e){return{type:"Regex",body:_y(e==null?void 0:e.body),flags:t}}function sZ(t){return{type:"Subroutine",ref:t}}function Cf(t,e){var s;const r={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...e};let n=(s=r.unicodePropertyMap)==null?void 0:s.get(Q2(t));if(!n){if(r.normalizeUnknownPropertyNames)n=I$e(t);else if(r.unicodePropertyMap&&!r.skipPropertyNameValidation)throw new Error(Un`Invalid Unicode property "\p{${t}}"`)}return{type:"CharacterSet",kind:"property",value:n??t,negate:r.negate}}function R$e({flags:t,kind:e,name:r,negate:n,number:s}){switch(e){case"absence_repeater":return E$e("repeater");case"atomic":return Yi({atomic:!0});case"capturing":return rZ(s,{name:r});case"group":return Yi({flags:t});case"lookahead":case"lookbehind":return Nu({behind:e==="lookbehind",negate:n});default:throw new Error(`Unexpected group kind "${e}"`)}}function _y(t){if(t===void 0)t=[Oh()];else if(!Array.isArray(t)||!t.length||!t.every(e=>e.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return t}function aZ(t){if(t===void 0)t=[];else if(!Array.isArray(t)||!t.every(e=>!!e.type))throw new Error("Invalid body; expected array of nodes");return t}function T7(t){return t.type==="LookaroundAssertion"&&t.kind==="lookahead"}function _7(t){return t.type==="LookaroundAssertion"&&t.kind==="lookbehind"}function P$e(t){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(t)}function I$e(t){return t.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,e=>e[0].toUpperCase()+e.slice(1).toLowerCase())}function Q2(t){return t.replace(/[- _]+/g,"").toLowerCase()}function A7(t,e){return Vp(t,`${(e==null?void 0:e.type)==="Character"&&e.value===93?"Empty":"Unclosed"} character class`)}function M7(t){return Vp(t,"Unclosed group")}function pg(t,e,r=null){function n(a,i){for(let l=0;l<a.length;l++){const c=s(a[l],i,l,a);l=Math.max(-1,l+c)}}function s(a,i=null,l=null,c=null){var b,v;let d=0,u=!1;const h={node:a,parent:i,key:l,container:c,root:t,remove(){F1(c).splice(Math.max(0,ff(l)+d),1),d--,u=!0},removeAllNextSiblings(){return F1(c).splice(ff(l)+1)},removeAllPrevSiblings(){const w=ff(l)+d;return d-=w,F1(c).splice(0,Math.max(0,w))},replaceWith(w,k={}){const N=!!k.traverse;c?c[Math.max(0,ff(l)+d)]=w:Vp(i,"Can't replace root node")[l]=w,N&&s(w,i,l,c),u=!0},replaceWithMultiple(w,k={}){const N=!!k.traverse;if(F1(c).splice(Math.max(0,ff(l)+d),1,...w),d+=w.length-1,N){let S=0;for(let C=0;C<w.length;C++)S+=s(w[C],i,ff(l)+C+S,c)}u=!0},skip(){u=!0}},{type:f}=a,m=e["*"],p=e[f],g=typeof m=="function"?m:m==null?void 0:m.enter,y=typeof p=="function"?p:p==null?void 0:p.enter;if(g==null||g(h,r),y==null||y(h,r),!u)switch(f){case"AbsenceFunction":case"CapturingGroup":case"Group":n(a.body,a);break;case"Alternative":case"CharacterClass":n(a.body,a);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":s(a.min,a,"min"),s(a.max,a,"max");break;case"LookaroundAssertion":n(a.body,a);break;case"Quantifier":s(a.body,a,"body");break;case"Regex":n(a.body,a),s(a.flags,a,"flags");break;default:throw new Error(`Unexpected node type "${f}"`)}return(b=p==null?void 0:p.exit)==null||b.call(p,h,r),(v=m==null?void 0:m.exit)==null||v.call(m,h,r),d}return s(t),t}function F1(t){if(!Array.isArray(t))throw new Error("Container expected");return t}function ff(t){if(typeof t!="number")throw new Error("Numeric key expected");return t}const D$e=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function L$e(t,e){for(let r=0;r<t.length;r++)t[r]>=e&&t[r]++}function $$e(t,e,r,n){return t.slice(0,e)+n+t.slice(e+r.length)}const ki=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function TA(t,e,r,n){const s=new RegExp(String.raw`${e}|(?<$skip>\[\^?|\\?.)`,"gsu"),a=[!1];let i=0,l="";for(const c of t.matchAll(s)){const{0:d,groups:{$skip:u}}=c;if(!u&&(!n||n===ki.DEFAULT==!i)){r instanceof Function?l+=r(c,{context:i?ki.CHAR_CLASS:ki.DEFAULT,negated:a[a.length-1]}):l+=r;continue}d[0]==="["?(i++,a.push(d[1]==="^")):d==="]"&&i&&(i--,a.pop()),l+=d}return l}function iZ(t,e,r,n){TA(t,e,r,n)}function F$e(t,e,r=0,n){if(!new RegExp(e,"su").test(t))return null;const s=new RegExp(`${e}|(?<$skip>\\\\?.)`,"gsu");s.lastIndex=r;let a=0,i;for(;i=s.exec(t);){const{0:l,groups:{$skip:c}}=i;if(!c&&(!n||n===ki.DEFAULT==!a))return i;l==="["?a++:l==="]"&&a&&a--,s.lastIndex==i.index&&s.lastIndex++}return null}function B1(t,e,r){return!!F$e(t,e,0,r)}function B$e(t,e){const r=/\\?./gsu;r.lastIndex=e;let n=t.length,s=0,a=1,i;for(;i=r.exec(t);){const[l]=i;if(l==="[")s++;else if(s)l==="]"&&s--;else if(l==="(")a++;else if(l===")"&&(a--,!a)){n=i.index;break}}return t.slice(e,n)}const O7=new RegExp(String.raw`(?<noncapturingStart>${D$e})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function z$e(t,e){const r=(e==null?void 0:e.hiddenCaptures)??[];let n=(e==null?void 0:e.captureTransfers)??new Map;if(!/\(\?>/.test(t))return{pattern:t,captureTransfers:n,hiddenCaptures:r};const s="(?>",a="(?:(?=(",i=[0],l=[];let c=0,d=0,u=NaN,h;do{h=!1;let f=0,m=0,p=!1,g;for(O7.lastIndex=Number.isNaN(u)?0:u+a.length;g=O7.exec(t);){const{0:y,index:b,groups:{capturingStart:v,noncapturingStart:w}}=g;if(y==="[")f++;else if(f)y==="]"&&f--;else if(y===s&&!p)u=b,p=!0;else if(p&&w)m++;else if(v)p?m++:(c++,i.push(c+d));else if(y===")"&&p){if(!m){d++;const k=c+d;if(t=`${t.slice(0,u)}${a}${t.slice(u+s.length,b)}))<$$${k}>)${t.slice(b+1)}`,h=!0,l.push(k),L$e(r,k),n.size){const N=new Map;n.forEach((S,C)=>{N.set(C>=k?C+1:C,S.map(E=>E>=k?E+1:E))}),n=N}break}m--}}}while(h);return r.push(...l),t=TA(t,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:f,groups:{backrefNum:m,wrappedBackrefNum:p}})=>{if(m){const g=+m;if(g>i.length-1)throw new Error(`Backref "${f}" greater than number of captures`);return`\\${i[g]}`}return`\\${p}`},ki.DEFAULT),{pattern:t,captureTransfers:n,hiddenCaptures:r}}const oZ=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,AS=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${oZ})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function U$e(t){if(!new RegExp(`${oZ}\\+`).test(t))return{pattern:t};const e=[];let r=null,n=null,s="",a=0,i;for(AS.lastIndex=0;i=AS.exec(t);){const{0:l,index:c,groups:{qBase:d,qMod:u,invalidQ:h}}=i;if(l==="[")a||(n=c),a++;else if(l==="]")a?a--:n=null;else if(!a)if(u==="+"&&s&&!s.startsWith("(")){if(h)throw new Error(`Invalid quantifier "${l}"`);let f=-1;if(/^\{\d+\}$/.test(d))t=$$e(t,c+d.length,u,"");else{if(s===")"||s==="]"){const m=s===")"?r:n;if(m===null)throw new Error(`Invalid unmatched "${s}"`);t=`${t.slice(0,m)}(?>${t.slice(m,c)}${d})${t.slice(c+l.length)}`}else t=`${t.slice(0,c-s.length)}(?>${s}${d})${t.slice(c+l.length)}`;f+=4}AS.lastIndex+=f}else l[0]==="("?e.push(c):l===")"&&(r=e.length?e.pop():null);s=l}return{pattern:t}}const vi=String.raw,V$e=vi`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,Q4=vi`\(\?R=(?<rDepth>[^\)]+)\)|${V$e}`,eC=vi`\(\?<(?![=!])(?<captureName>[^>]+)>`,lZ=vi`${eC}|(?<unnamed>\()(?!\?)`,mu=new RegExp(vi`${eC}|${Q4}|\(\?|\\?.`,"gsu"),MS="Cannot use multiple overlapping recursions";function H$e(t,e){const{hiddenCaptures:r,mode:n}={hiddenCaptures:[],mode:"plugin",...e};let s=(e==null?void 0:e.captureTransfers)??new Map;if(!new RegExp(Q4,"su").test(t))return{pattern:t,captureTransfers:s,hiddenCaptures:r};if(n==="plugin"&&B1(t,vi`\(\?\(DEFINE\)`,ki.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const a=[],i=B1(t,vi`\\[1-9]`,ki.DEFAULT),l=new Map,c=[];let d=!1,u=0,h=0,f;for(mu.lastIndex=0;f=mu.exec(t);){const{0:m,groups:{captureName:p,rDepth:g,gRNameOrNum:y,gRDepth:b}}=f;if(m==="[")u++;else if(u)m==="]"&&u--;else if(g){if(R7(g),d)throw new Error(MS);if(i)throw new Error(`${n==="external"?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);const v=t.slice(0,f.index),w=t.slice(mu.lastIndex);if(B1(w,Q4,ki.DEFAULT))throw new Error(MS);const k=+g-1;t=P7(v,w,k,!1,r,a,h),s=D7(s,v,k,a.length,0,h);break}else if(y){R7(b);let v=!1;for(const M of c)if(M.name===y||M.num===+y){if(v=!0,M.hasRecursedWithin)throw new Error(MS);break}if(!v)throw new Error(vi`Recursive \g cannot be used outside the referenced group "${n==="external"?y:vi`\g<${y}&R=${b}>`}"`);const w=l.get(y),k=B$e(t,w);if(i&&B1(k,vi`${eC}|\((?!\?)`,ki.DEFAULT))throw new Error(`${n==="external"?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);const N=t.slice(w,f.index),S=k.slice(N.length+m.length),C=a.length,E=+b-1,T=P7(N,S,E,!0,r,a,h);s=D7(s,N,E,a.length-C,C,h);const R=t.slice(0,w),B=t.slice(w+k.length);t=`${R}${T}${B}`,mu.lastIndex+=T.length-m.length-N.length-S.length,c.forEach(M=>M.hasRecursedWithin=!0),d=!0}else if(p)h++,l.set(String(h),mu.lastIndex),l.set(p,mu.lastIndex),c.push({num:h,name:p});else if(m[0]==="("){const v=m==="(";v&&(h++,l.set(String(h),mu.lastIndex)),c.push(v?{num:h}:{})}else m===")"&&c.pop()}return r.push(...a),{pattern:t,captureTransfers:s,hiddenCaptures:r}}function R7(t){const e=`Max depth must be integer between 2 and 100; used ${t}`;if(!/^[1-9]\d*$/.test(t))throw new Error(e);if(t=+t,t<2||t>100)throw new Error(e)}function P7(t,e,r,n,s,a,i){const l=new Set;n&&iZ(t+e,eC,({groups:{captureName:d}})=>{l.add(d)},ki.DEFAULT);const c=[r,n?l:null,s,a,i];return`${t}${I7(`(?:${t}`,"forward",...c)}(?:)${I7(`${e})`,"backward",...c)}${e}`}function I7(t,e,r,n,s,a,i){const c=u=>e==="forward"?u+2:r-u+2-1;let d="";for(let u=0;u<r;u++){const h=c(u);d+=TA(t,vi`${lZ}|\\k<(?<backref>[^>]+)>`,({0:f,groups:{captureName:m,unnamed:p,backref:g}})=>{if(g&&n&&!n.has(g))return f;const y=`_$${h}`;if(p||m){const b=i+a.length+1;return a.push(b),W$e(s,b),p?f:`(?<${m}${y}>`}return vi`\k<${g}${y}>`},ki.DEFAULT)}return d}function W$e(t,e){for(let r=0;r<t.length;r++)t[r]>=e&&t[r]++}function D7(t,e,r,n,s,a){if(t.size&&n){let i=0;iZ(e,lZ,()=>i++,ki.DEFAULT);const l=a-i+s,c=new Map;return t.forEach((d,u)=>{const h=(n-i*r)/r,f=i*r,m=u>l+i?u+n:u,p=[];for(const g of d)if(g<=l)p.push(g);else if(g>l+i+h)p.push(g+n);else if(g<=l+i)for(let y=0;y<=r;y++)p.push(g+i*y);else for(let y=0;y<=r;y++)p.push(g+f+h*y);c.set(m,p)}),c}return t}var Mn=String.fromCodePoint,St=String.raw,Yl={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};Yl.bugFlagVLiteralHyphenIsRange=Yl.unicodeSets?(()=>{try{new RegExp(St`[\d\-a]`,"v")}catch{return!0}return!1})():!1;Yl.bugNestedClassIgnoresNegation=Yl.unicodeSets&&new RegExp("[[^a]]","v").test("a");function nk(t,{enable:e,disable:r}){return{dotAll:!(r!=null&&r.dotAll)&&!!(e!=null&&e.dotAll||t.dotAll),ignoreCase:!(r!=null&&r.ignoreCase)&&!!(e!=null&&e.ignoreCase||t.ignoreCase)}}function Tx(t,e,r){return t.has(e)||t.set(e,r),t.get(e)}function e5(t,e){return L7[t]>=L7[e]}function q$e(t,e){if(t==null)throw new Error(e??"Value expected");return t}var L7={ES2025:2025,ES2024:2024,ES2018:2018},G$e={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function cZ(t={}){if({}.toString.call(t)!=="[object Object]")throw new Error("Unexpected options");if(t.target!==void 0&&!G$e[t.target])throw new Error(`Unexpected target "${t.target}"`);const e={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...t,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...t.rules}};return e.target==="auto"&&(e.target=Yl.flagGroups?"ES2025":Yl.unicodeSets?"ES2024":"ES2018"),e}var K$e="[	-\r ]",Z$e=new Set([Mn(304),Mn(305)]),yl=St`[\p{L}\p{M}\p{N}\p{Pc}]`;function dZ(t){if(Z$e.has(t))return[t];const e=new Set,r=t.toLowerCase(),n=r.toUpperCase(),s=J$e.get(r),a=Y$e.get(r),i=X$e.get(r);return[...n].length===1&&e.add(n),i&&e.add(i),s&&e.add(s),e.add(r),a&&e.add(a),[...e]}var _A=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(t=>[Q2(t),t])),Y$e=new Map([["s",Mn(383)],[Mn(383),"s"]]),X$e=new Map([[Mn(223),Mn(7838)],[Mn(107),Mn(8490)],[Mn(229),Mn(8491)],[Mn(969),Mn(8486)]]),J$e=new Map([jc(453),jc(456),jc(459),jc(498),...OS(8072,8079),...OS(8088,8095),...OS(8104,8111),jc(8124),jc(8140),jc(8188)]),Q$e=new Map([["alnum",St`[\p{Alpha}\p{Nd}]`],["alpha",St`\p{Alpha}`],["ascii",St`\p{ASCII}`],["blank",St`[\p{Zs}\t]`],["cntrl",St`\p{Cc}`],["digit",St`\p{Nd}`],["graph",St`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",St`\p{Lower}`],["print",St`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",St`[\p{P}\p{S}]`],["space",St`\p{space}`],["upper",St`\p{Upper}`],["word",St`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",St`\p{AHex}`]]);function eFe(t,e){const r=[];for(let n=t;n<=e;n++)r.push(n);return r}function jc(t){const e=Mn(t);return[e.toLowerCase(),e]}function OS(t,e){return eFe(t,e).map(r=>jc(r))}var uZ=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);function tFe(t,e){const r={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...e};hZ(t);const n={accuracy:r.accuracy,asciiWordBoundaries:r.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:e5(r.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:t.flags.digitIsAscii,spaceIsAscii:t.flags.spaceIsAscii,wordIsAscii:t.flags.wordIsAscii};pg(t,rFe,n);const s={dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},a={currentFlags:s,prevFlags:null,globalFlags:s,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:n.subroutineRefMap};pg(t,nFe,a);const i={groupsByName:a.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:a.reffedNodesByReferencer};return pg(t,sFe,i),t._originMap=a.groupOriginByCopy,t._strategy=n.strategy,t}var rFe={AbsenceFunction({node:t,parent:e,replaceWith:r}){const{body:n,kind:s}=t;if(s==="repeater"){const a=Yi();a.body[0].body.push(Nu({negate:!0,body:n}),Cf("Any"));const i=Yi();i.body[0].body.push(nZ("greedy",0,1/0,a)),r(cn(i,e),{traverse:!0})}else throw new Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:t,parent:e,key:r},{flagDirectivesByAlt:n}){const s=t.body.filter(a=>a.kind==="flags");for(let a=r+1;a<e.body.length;a++){const i=e.body[a];Tx(n,i,[]).push(...s)}},exit({node:t},{flagDirectivesByAlt:e}){var r;if((r=e.get(t))!=null&&r.length){const n=mZ(e.get(t));if(n){const s=Yi({flags:n});s.body[0].body=t.body,t.body=[cn(s,t)]}}}},Assertion({node:t,parent:e,key:r,container:n,root:s,remove:a,replaceWith:i},l){const{kind:c,negate:d}=t,{asciiWordBoundaries:u,avoidSubclass:h,supportedGNodes:f,wordIsAscii:m}=l;if(c==="text_segment_boundary")throw new Error(`Unsupported text segment boundary "\\${d?"Y":"y"}"`);if(c==="line_end")i(cn(Nu({body:[Oh({body:[Y4("string_end")]}),Oh({body:[J2(10)]})]}),e));else if(c==="line_start")i(cn(vl(St`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),e));else if(c==="search_start")if(f.has(t))s.flags.sticky=!0,a();else{const p=n[r-1];if(p&&dFe(p))i(cn(Nu({negate:!0}),e));else{if(h)throw new Error(St`Uses "\G" in a way that requires a subclass`);i(Tc(Y4("string_start"),e)),l.strategy="clip_search"}}else if(!(c==="string_end"||c==="string_start"))if(c==="string_end_newline")i(cn(vl(St`(?=\n?\z)`),e));else if(c==="word_boundary"){if(!m&&!u){const p=`(?:(?<=${yl})(?!${yl})|(?<!${yl})(?=${yl}))`,g=`(?:(?<=${yl})(?=${yl})|(?<!${yl})(?!${yl}))`;i(cn(vl(d?g:p),e))}}else throw new Error(`Unexpected assertion kind "${c}"`)},Backreference({node:t},{jsGroupNameMap:e}){let{ref:r}=t;typeof r=="string"&&!PS(r)&&(r=RS(r,e),t.ref=r)},CapturingGroup({node:t},{jsGroupNameMap:e,subroutineRefMap:r}){let{name:n}=t;n&&!PS(n)&&(n=RS(n,e),t.name=n),r.set(t.number,t),n&&r.set(n,t)},CharacterClassRange({node:t,parent:e,replaceWith:r}){if(e.kind==="intersection"){const n=Ev({body:[t]});r(cn(n,e),{traverse:!0})}},CharacterSet({node:t,parent:e,replaceWith:r},{accuracy:n,minTargetEs2024:s,digitIsAscii:a,spaceIsAscii:i,wordIsAscii:l}){const{kind:c,negate:d,value:u}=t;if(a&&(c==="digit"||u==="digit")){r(Tc(J4("digit",{negate:d}),e));return}if(i&&(c==="space"||u==="space")){r(cn(IS(vl(K$e),d),e));return}if(l&&(c==="word"||u==="word")){r(Tc(J4("word",{negate:d}),e));return}if(c==="any")r(Tc(Cf("Any"),e));else if(c==="digit")r(Tc(Cf("Nd",{negate:d}),e));else if(c!=="dot")if(c==="text_segment"){if(n==="strict")throw new Error(St`Use of "\X" requires non-strict accuracy`);const h="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",f=St`\p{RI}{2}|${h}(?:\u200D${h})*`;r(cn(vl(St`(?>\r\n|${s?St`\p{RGI_Emoji}`:f}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),e))}else if(c==="hex")r(Tc(Cf("AHex",{negate:d}),e));else if(c==="newline")r(cn(vl(d?`[^
]`:`(?>\r
?|[
\v\f\u2028\u2029])`),e));else if(c==="posix")if(!s&&(u==="graph"||u==="print")){if(n==="strict")throw new Error(`POSIX class "${u}" requires min target ES2024 or non-strict accuracy`);let h={graph:"!-~",print:" -~"}[u];d&&(h=`\0-${Mn(h.codePointAt(0)-1)}${Mn(h.codePointAt(2)+1)}-`),r(cn(vl(`[${h}]`),e))}else r(cn(IS(vl(Q$e.get(u)),d),e));else if(c==="property")_A.has(Q2(u))||(t.key="sc");else if(c==="space")r(Tc(Cf("space",{negate:d}),e));else if(c==="word")r(cn(IS(vl(yl),d),e));else throw new Error(`Unexpected character set kind "${c}"`)},Directive({node:t,parent:e,root:r,remove:n,replaceWith:s,removeAllPrevSiblings:a,removeAllNextSiblings:i}){const{kind:l,flags:c}=t;if(l==="flags")if(!c.enable&&!c.disable)n();else{const d=Yi({flags:c});d.body[0].body=i(),s(cn(d,e),{traverse:!0})}else if(l==="keep"){const d=r.body[0],h=r.body.length===1&&eZ(d,{type:"Group"})&&d.body[0].body.length===1?d.body[0]:r;if(e.parent!==h||h.body.length>1)throw new Error(St`Uses "\K" in a way that's unsupported`);const f=Nu({behind:!0});f.body[0].body=a(),s(cn(f,e))}else throw new Error(`Unexpected directive kind "${l}"`)},Flags({node:t,parent:e}){if(t.posixIsAscii)throw new Error('Unsupported flag "P"');if(t.textSegmentMode==="word")throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(r=>delete t[r]),Object.assign(t,{global:!1,hasIndices:!1,multiline:!1,sticky:t.sticky??!1}),e.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:t}){if(!t.flags)return;const{enable:e,disable:r}=t.flags;e!=null&&e.extended&&delete e.extended,r!=null&&r.extended&&delete r.extended,e!=null&&e.dotAll&&(r!=null&&r.dotAll)&&delete e.dotAll,e!=null&&e.ignoreCase&&(r!=null&&r.ignoreCase)&&delete e.ignoreCase,e&&!Object.keys(e).length&&delete t.flags.enable,r&&!Object.keys(r).length&&delete t.flags.disable,!t.flags.enable&&!t.flags.disable&&delete t.flags},LookaroundAssertion({node:t},e){const{kind:r}=t;r==="lookbehind"&&(e.passedLookbehind=!0)},NamedCallout({node:t,parent:e,replaceWith:r}){const{kind:n}=t;if(n==="fail")r(cn(Nu({negate:!0}),e));else throw new Error(`Unsupported named callout "(*${n.toUpperCase()}"`)},Quantifier({node:t}){if(t.body.type==="Quantifier"){const e=Yi();e.body[0].body.push(t.body),t.body=cn(e,t)}},Regex:{enter({node:t},{supportedGNodes:e}){const r=[];let n=!1,s=!1;for(const a of t.body)if(a.body.length===1&&a.body[0].kind==="search_start")a.body.pop();else{const i=gZ(a.body);i?(n=!0,Array.isArray(i)?r.push(...i):r.push(i)):s=!0}n&&!s&&r.forEach(a=>e.add(a))},exit(t,{accuracy:e,passedLookbehind:r,strategy:n}){if(e==="strict"&&r&&n)throw new Error(St`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:t},{jsGroupNameMap:e}){let{ref:r}=t;typeof r=="string"&&!PS(r)&&(r=RS(r,e),t.ref=r)}},nFe={Backreference({node:t},{multiplexCapturesToLeftByRef:e,reffedNodesByReferencer:r}){const{orphan:n,ref:s}=t;n||r.set(t,[...e.get(s).map(({node:a})=>a)])},CapturingGroup:{enter({node:t,parent:e,replaceWith:r,skip:n},{groupOriginByCopy:s,groupsByName:a,multiplexCapturesToLeftByRef:i,openRefs:l,reffedNodesByReferencer:c}){const d=s.get(t);if(d&&l.has(t.number)){const h=Tc($7(t.number),e);c.set(h,l.get(t.number)),r(h);return}l.set(t.number,t),i.set(t.number,[]),t.name&&Tx(i,t.name,[]);const u=i.get(t.name??t.number);for(let h=0;h<u.length;h++){const f=u[h];if(d===f.node||d&&d===f.origin||t===f.origin){u.splice(h,1);break}}if(i.get(t.number).push({node:t,origin:d}),t.name&&i.get(t.name).push({node:t,origin:d}),t.name){const h=Tx(a,t.name,new Map);let f=!1;if(d)f=!0;else for(const m of h.values())if(!m.hasDuplicateNameToRemove){f=!0;break}a.get(t.name).set(t,{node:t,hasDuplicateNameToRemove:f})}},exit({node:t},{openRefs:e}){e.delete(t.number)}},Group:{enter({node:t},e){e.prevFlags=e.currentFlags,t.flags&&(e.currentFlags=nk(e.currentFlags,t.flags))},exit(t,e){e.currentFlags=e.prevFlags}},Subroutine({node:t,parent:e,replaceWith:r},n){const{isRecursive:s,ref:a}=t;if(s){let u=e;for(;(u=u.parent)&&!(u.type==="CapturingGroup"&&(u.name===a||u.number===a)););n.reffedNodesByReferencer.set(t,u);return}const i=n.subroutineRefMap.get(a),l=a===0,c=l?$7(0):fZ(i,n.groupOriginByCopy,null);let d=c;if(!l){const u=mZ(oFe(i,f=>f.type==="Group"&&!!f.flags)),h=u?nk(n.globalFlags,u):n.globalFlags;aFe(h,n.currentFlags)||(d=Yi({flags:lFe(h)}),d.body[0].body.push(c))}r(cn(d,e),{traverse:!l})}},sFe={Backreference({node:t,parent:e,replaceWith:r},n){if(t.orphan){n.highestOrphanBackref=Math.max(n.highestOrphanBackref,t.ref);return}const a=n.reffedNodesByReferencer.get(t).filter(i=>iFe(i,t));if(!a.length)r(cn(Nu({negate:!0}),e));else if(a.length>1){const i=Yi({atomic:!0,body:a.reverse().map(l=>Oh({body:[X4(l.number)]}))});r(cn(i,e))}else t.ref=a[0].number},CapturingGroup({node:t},e){t.number=++e.numCapturesToLeft,t.name&&e.groupsByName.get(t.name).get(t).hasDuplicateNameToRemove&&delete t.name},Regex:{exit({node:t},e){const r=Math.max(e.highestOrphanBackref-e.numCapturesToLeft,0);for(let n=0;n<r;n++){const s=rZ();t.body.at(-1).body.push(s)}}},Subroutine({node:t},e){!t.isRecursive||t.ref===0||(t.ref=e.reffedNodesByReferencer.get(t).number)}};function hZ(t){pg(t,{"*"({node:e,parent:r}){e.parent=r}})}function aFe(t,e){return t.dotAll===e.dotAll&&t.ignoreCase===e.ignoreCase}function iFe(t,e){let r=e;do{if(r.type==="Regex")return!1;if(r.type==="Alternative")continue;if(r===t)return!1;const n=pZ(r.parent);for(const s of n){if(s===r)break;if(s===t||xZ(s,t))return!0}}while(r=r.parent);throw new Error("Unexpected path")}function fZ(t,e,r,n){const s=Array.isArray(t)?[]:{};for(const[a,i]of Object.entries(t))a==="parent"?s.parent=Array.isArray(r)?n:r:i&&typeof i=="object"?s[a]=fZ(i,e,s,r):(a==="type"&&i==="CapturingGroup"&&e.set(s,e.get(t)??t),s[a]=i);return s}function $7(t){const e=sZ(t);return e.isRecursive=!0,e}function oFe(t,e){const r=[];for(;t=t.parent;)(!e||e(t))&&r.push(t);return r}function RS(t,e){if(e.has(t))return e.get(t);const r=`$${e.size}_${t.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return e.set(t,r),r}function mZ(t){const e=["dotAll","ignoreCase"],r={enable:{},disable:{}};return t.forEach(({flags:n})=>{e.forEach(s=>{var a,i;(a=n.enable)!=null&&a[s]&&(delete r.disable[s],r.enable[s]=!0),(i=n.disable)!=null&&i[s]&&(r.disable[s]=!0)})}),Object.keys(r.enable).length||delete r.enable,Object.keys(r.disable).length||delete r.disable,r.enable||r.disable?r:null}function lFe({dotAll:t,ignoreCase:e}){const r={};return(t||e)&&(r.enable={},t&&(r.enable.dotAll=!0),e&&(r.enable.ignoreCase=!0)),(!t||!e)&&(r.disable={},!t&&(r.disable.dotAll=!0),!e&&(r.disable.ignoreCase=!0)),r}function pZ(t){if(!t)throw new Error("Node expected");const{body:e}=t;return Array.isArray(e)?e:e?[e]:null}function gZ(t){const e=t.find(r=>r.kind==="search_start"||uFe(r,{negate:!1})||!cFe(r));if(!e)return null;if(e.kind==="search_start")return e;if(e.type==="LookaroundAssertion")return e.body[0].body[0];if(e.type==="CapturingGroup"||e.type==="Group"){const r=[];for(const n of e.body){const s=gZ(n.body);if(!s)return null;Array.isArray(s)?r.push(...s):r.push(s)}return r}return null}function xZ(t,e){const r=pZ(t)??[];for(const n of r)if(n===e||xZ(n,e))return!0;return!1}function cFe({type:t}){return t==="Assertion"||t==="Directive"||t==="LookaroundAssertion"}function dFe(t){const e=["Character","CharacterClass","CharacterSet"];return e.includes(t.type)||t.type==="Quantifier"&&t.min&&e.includes(t.body.type)}function uFe(t,e){const r={negate:null,...e};return t.type==="LookaroundAssertion"&&(r.negate===null||t.negate===r.negate)&&t.body.length===1&&eZ(t.body[0],{type:"Assertion",kind:"search_start"})}function PS(t){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(t)}function vl(t,e){const n=tZ(t,{...e,unicodePropertyMap:_A}).body;return n.length>1||n[0].body.length>1?Yi({body:n}):n[0].body[0]}function IS(t,e){return t.negate=e,t}function Tc(t,e){return t.parent=e,t}function cn(t,e){return hZ(t),t.parent=e,t}function hFe(t,e){const r=cZ(e),n=e5(r.target,"ES2024"),s=e5(r.target,"ES2025"),a=r.rules.recursionLimit;if(!Number.isInteger(a)||a<2||a>20)throw new Error("Invalid recursionLimit; use 2-20");let i=null,l=null;if(!s){const m=[t.flags.ignoreCase];pg(t,fFe,{getCurrentModI:()=>m.at(-1),popModI(){m.pop()},pushModI(p){m.push(p)},setHasCasedChar(){m.at(-1)?i=!0:l=!0}})}const c={dotAll:t.flags.dotAll,ignoreCase:!!((t.flags.ignoreCase||i)&&!l)};let d=t;const u={accuracy:r.accuracy,appliedGlobalFlags:c,captureMap:new Map,currentFlags:{dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},inCharClass:!1,lastNode:d,originMap:t._originMap,recursionLimit:a,useAppliedIgnoreCase:!!(!s&&i&&l),useFlagMods:s,useFlagV:n,verbose:r.verbose};function h(m){return u.lastNode=d,d=m,q$e(mFe[m.type],`Unexpected node type "${m.type}"`)(m,u,h)}const f={pattern:t.body.map(h).join("|"),flags:h(t.flags),options:{...t.options}};return n||(delete f.options.force.v,f.options.disable.v=!0,f.options.unicodeSetsPlugin=null),f._captureTransfers=new Map,f._hiddenCaptures=[],u.captureMap.forEach((m,p)=>{m.hidden&&f._hiddenCaptures.push(p),m.transferTo&&Tx(f._captureTransfers,m.transferTo,[]).push(p)}),f}var fFe={"*":{enter({node:t},e){if(B7(t)){const r=e.getCurrentModI();e.pushModI(t.flags?nk({ignoreCase:r},t.flags).ignoreCase:r)}},exit({node:t},e){B7(t)&&e.popModI()}},Backreference(t,e){e.setHasCasedChar()},Character({node:t},e){AA(Mn(t.value))&&e.setHasCasedChar()},CharacterClassRange({node:t,skip:e},r){e(),yZ(t,{firstOnly:!0}).length&&r.setHasCasedChar()},CharacterSet({node:t},e){t.kind==="property"&&uZ.has(t.value)&&e.setHasCasedChar()}},mFe={Alternative({body:t},e,r){return t.map(r).join("")},Assertion({kind:t,negate:e}){if(t==="string_end")return"$";if(t==="string_start")return"^";if(t==="word_boundary")return e?St`\B`:St`\b`;throw new Error(`Unexpected assertion kind "${t}"`)},Backreference({ref:t},e){if(typeof t!="number")throw new Error("Unexpected named backref in transformed AST");if(!e.useFlagMods&&e.accuracy==="strict"&&e.currentFlags.ignoreCase&&!e.captureMap.get(t).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+t},CapturingGroup(t,e,r){const{body:n,name:s,number:a}=t,i={ignoreCase:e.currentFlags.ignoreCase},l=e.originMap.get(t);return l&&(i.hidden=!0,a>l.number&&(i.transferTo=l.number)),e.captureMap.set(a,i),`(${s?`?<${s}>`:""}${n.map(r).join("|")})`},Character({value:t},e){const r=Mn(t),n=mf(t,{escDigit:e.lastNode.type==="Backreference",inCharClass:e.inCharClass,useFlagV:e.useFlagV});if(n!==r)return n;if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase&&AA(r)){const s=dZ(r);return e.inCharClass?s.join(""):s.length>1?`[${s.join("")}]`:s[0]}return r},CharacterClass(t,e,r){const{kind:n,negate:s,parent:a}=t;let{body:i}=t;if(n==="intersection"&&!e.useFlagV)throw new Error("Use of class intersection requires min target ES2024");Yl.bugFlagVLiteralHyphenIsRange&&e.useFlagV&&i.some(z7)&&(i=[J2(45),...i.filter(d=>!z7(d))]);const l=()=>`[${s?"^":""}${i.map(r).join(n==="intersection"?"&&":"")}]`;if(!e.inCharClass){if((!e.useFlagV||Yl.bugNestedClassIgnoresNegation)&&!s){const u=i.filter(h=>h.type==="CharacterClass"&&h.kind==="union"&&h.negate);if(u.length){const h=Yi(),f=h.body[0];return h.parent=a,f.parent=h,i=i.filter(m=>!u.includes(m)),t.body=i,i.length?(t.parent=f,f.body.push(t)):h.body.pop(),u.forEach(m=>{const p=Oh({body:[m]});m.parent=p,p.parent=h,h.body.push(p)}),r(h)}}e.inCharClass=!0;const d=l();return e.inCharClass=!1,d}const c=i[0];if(n==="union"&&!s&&c&&((!e.useFlagV||!e.verbose)&&a.kind==="union"&&!(Yl.bugFlagVLiteralHyphenIsRange&&e.useFlagV)||!e.verbose&&a.kind==="intersection"&&i.length===1&&c.type!=="CharacterClassRange"))return i.map(r).join("");if(!e.useFlagV&&a.type==="CharacterClass")throw new Error("Use of nested character class requires min target ES2024");return l()},CharacterClassRange(t,e){const r=t.min.value,n=t.max.value,s={escDigit:!1,inCharClass:!0,useFlagV:e.useFlagV},a=mf(r,s),i=mf(n,s),l=new Set;if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase){const c=yZ(t);vFe(c).forEach(u=>{l.add(Array.isArray(u)?`${mf(u[0],s)}-${mf(u[1],s)}`:mf(u,s))})}return`${a}-${i}${[...l].join("")}`},CharacterSet({kind:t,negate:e,value:r,key:n},s){if(t==="dot")return s.currentFlags.dotAll?s.appliedGlobalFlags.dotAll||s.useFlagMods?".":"[^]":St`[^\n]`;if(t==="digit")return e?St`\D`:St`\d`;if(t==="property"){if(s.useAppliedIgnoreCase&&s.currentFlags.ignoreCase&&uZ.has(r))throw new Error(`Unicode property "${r}" can't be case-insensitive when other chars have specific case`);return`${e?St`\P`:St`\p`}{${n?`${n}=`:""}${r}}`}if(t==="word")return e?St`\W`:St`\w`;throw new Error(`Unexpected character set kind "${t}"`)},Flags(t,e){return(e.appliedGlobalFlags.ignoreCase?"i":"")+(t.dotAll?"s":"")+(t.sticky?"y":"")},Group({atomic:t,body:e,flags:r,parent:n},s,a){const i=s.currentFlags;r&&(s.currentFlags=nk(i,r));const l=e.map(a).join("|"),c=!s.verbose&&e.length===1&&n.type!=="Quantifier"&&!t&&(!s.useFlagMods||!r)?l:`(?${bFe(t,r,s.useFlagMods)}${l})`;return s.currentFlags=i,c},LookaroundAssertion({body:t,kind:e,negate:r},n,s){return`(?${`${e==="lookahead"?"":"<"}${r?"!":"="}`}${t.map(s).join("|")})`},Quantifier(t,e,r){return r(t.body)+wFe(t)},Subroutine({isRecursive:t,ref:e},r){if(!t)throw new Error("Unexpected non-recursive subroutine in transformed AST");const n=r.recursionLimit;return e===0?`(?R=${n})`:St`\g<${e}&R=${n}>`}},pFe=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),gFe=new Set(["-","\\","]","^","["]),xFe=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),F7=new Map([[9,St`\t`],[10,St`\n`],[11,St`\v`],[12,St`\f`],[13,St`\r`],[8232,St`\u2028`],[8233,St`\u2029`],[65279,St`\uFEFF`]]),yFe=new RegExp("^\\p{Cased}$","u");function AA(t){return yFe.test(t)}function yZ(t,e){const r=!!(e!=null&&e.firstOnly),n=t.min.value,s=t.max.value,a=[];if(n<65&&(s===65535||s>=131071)||n===65536&&s>=131071)return a;for(let i=n;i<=s;i++){const l=Mn(i);if(!AA(l))continue;const c=dZ(l).filter(d=>{const u=d.codePointAt(0);return u<n||u>s});if(c.length&&(a.push(...c),r))break}return a}function mf(t,{escDigit:e,inCharClass:r,useFlagV:n}){if(F7.has(t))return F7.get(t);if(t<32||t>126&&t<160||t>262143||e&&kFe(t))return t>255?`\\u{${t.toString(16).toUpperCase()}}`:`\\x${t.toString(16).toUpperCase().padStart(2,"0")}`;const s=r?n?xFe:gFe:pFe,a=Mn(t);return(s.has(a)?"\\":"")+a}function vFe(t){const e=t.map(s=>s.codePointAt(0)).sort((s,a)=>s-a),r=[];let n=null;for(let s=0;s<e.length;s++)e[s+1]===e[s]+1?n??(n=e[s]):n===null?r.push(e[s]):(r.push([n,e[s]]),n=null);return r}function bFe(t,e,r){if(t)return">";let n="";if(e&&r){const{enable:s,disable:a}=e;n=(s!=null&&s.ignoreCase?"i":"")+(s!=null&&s.dotAll?"s":"")+(a?"-":"")+(a!=null&&a.ignoreCase?"i":"")+(a!=null&&a.dotAll?"s":"")}return`${n}:`}function wFe({kind:t,max:e,min:r}){let n;return!r&&e===1?n="?":!r&&e===1/0?n="*":r===1&&e===1/0?n="+":r===e?n=`{${r}}`:n=`{${r},${e===1/0?"":e}}`,n+{greedy:"",lazy:"?",possessive:"+"}[t]}function B7({type:t}){return t==="CapturingGroup"||t==="Group"||t==="LookaroundAssertion"}function kFe(t){return t>47&&t<58}function z7({type:t,value:e}){return t==="Character"&&e===45}var Jc,_l,qu,Qc,Gu,Rx,t5,_d,CFe=(_d=class extends RegExp{constructor(r,n,s){var e=(...Ize)=>(super(...Ize),dt(this,Rx),dt(this,Jc,new Map),dt(this,_l,null),dt(this,qu),dt(this,Qc,null),dt(this,Gu,null),ve(this,"rawOptions",{}),this);const a=!!(s!=null&&s.lazyCompile);if(r instanceof RegExp){if(s)throw new Error("Cannot provide options when copying a regexp");const i=r;e(i,n),qe(this,qu,i.source),i instanceof _d&&(qe(this,Jc,se(i,Jc)),qe(this,Qc,se(i,Qc)),qe(this,Gu,se(i,Gu)),this.rawOptions=i.rawOptions)}else{const i={hiddenCaptures:[],strategy:null,transfers:[],...s};e(a?"":r,n),qe(this,qu,r),qe(this,Jc,SFe(i.hiddenCaptures,i.transfers)),qe(this,Gu,i.strategy),this.rawOptions=s??{}}a||qe(this,_l,this)}get source(){return se(this,qu)||"(?:)"}exec(r){if(!se(this,_l)){const{lazyCompile:a,...i}=this.rawOptions;qe(this,_l,new _d(se(this,qu),this.flags,i))}const n=this.global||this.sticky,s=this.lastIndex;if(se(this,Gu)==="clip_search"&&n&&s){this.lastIndex=0;const a=Tt(this,Rx,t5).call(this,r.slice(s));return a&&(NFe(a,s,r,this.hasIndices),this.lastIndex+=s),a}return Tt(this,Rx,t5).call(this,r)}},Jc=new WeakMap,_l=new WeakMap,qu=new WeakMap,Qc=new WeakMap,Gu=new WeakMap,Rx=new WeakSet,t5=function(r){se(this,_l).lastIndex=this.lastIndex;const n=RA(_d.prototype,this,"exec").call(se(this,_l),r);if(this.lastIndex=se(this,_l).lastIndex,!n||!se(this,Jc).size)return n;const s=[...n];n.length=1;let a;this.hasIndices&&(a=[...n.indices],n.indices.length=1);const i=[0];for(let l=1;l<s.length;l++){const{hidden:c,transferTo:d}=se(this,Jc).get(l)??{};if(c?i.push(null):(i.push(n.length),n.push(s[l]),this.hasIndices&&n.indices.push(a[l])),d&&s[l]!==void 0){const u=i[d];if(!u)throw new Error(`Invalid capture transfer to "${u}"`);if(n[u]=s[l],this.hasIndices&&(n.indices[u]=a[l]),n.groups){se(this,Qc)||qe(this,Qc,EFe(this.source));const h=se(this,Qc).get(d);h&&(n.groups[h]=s[l],this.hasIndices&&(n.indices.groups[h]=a[l]))}}}return n},_d);function NFe(t,e,r,n){if(t.index+=e,t.input=r,n){const s=t.indices;for(let i=0;i<s.length;i++){const l=s[i];l&&(s[i]=[l[0]+e,l[1]+e])}const a=s.groups;a&&Object.keys(a).forEach(i=>{const l=a[i];l&&(a[i]=[l[0]+e,l[1]+e])})}}function SFe(t,e){const r=new Map;for(const n of t)r.set(n,{hidden:!0});for(const[n,s]of e)for(const a of s)Tx(r,a,{}).transferTo=n;return r}function EFe(t){const e=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,r=new Map;let n=0,s=0,a;for(;a=e.exec(t);){const{0:i,groups:{capture:l,name:c}}=a;i==="["?n++:n?i==="]"&&n--:l&&(s++,c&&r.set(s,c))}return r}function jFe(t,e){const r=TFe(t,e);return r.options?new CFe(r.pattern,r.flags,r.options):new RegExp(r.pattern,r.flags)}function TFe(t,e){const r=cZ(e),n=tZ(t,{flags:r.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline},skipBackrefValidation:r.rules.allowOrphanBackrefs,unicodePropertyMap:_A}),s=tFe(n,{accuracy:r.accuracy,asciiWordBoundaries:r.rules.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,bestEffortTarget:r.target}),a=hFe(s,r),i=H$e(a.pattern,{captureTransfers:a._captureTransfers,hiddenCaptures:a._hiddenCaptures,mode:"external"}),l=U$e(i.pattern),c=z$e(l.pattern,{captureTransfers:i.captureTransfers,hiddenCaptures:i.hiddenCaptures}),d={pattern:c.pattern,flags:`${r.hasIndices?"d":""}${r.global?"g":""}${a.flags}${a.options.disable.v?"u":"v"}`};if(r.avoidSubclass){if(r.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const u=c.hiddenCaptures.sort((p,g)=>p-g),h=Array.from(c.captureTransfers),f=s._strategy,m=d.pattern.length>=r.lazyCompileLength;(u.length||h.length||f||m)&&(d.options={...u.length&&{hiddenCaptures:u},...h.length&&{transfers:h},...f&&{strategy:f},...m&&{lazyCompile:m}})}return d}const U7=4294967295;class _Fe{constructor(e,r={}){ve(this,"regexps");this.patterns=e,this.options=r;const{forgiving:n=!1,cache:s,regexConstructor:a}=r;if(!a)throw new Error("Option `regexConstructor` is not provided");this.regexps=e.map(i=>{if(typeof i!="string")return i;const l=s==null?void 0:s.get(i);if(l){if(l instanceof RegExp)return l;if(n)return null;throw l}try{const c=a(i);return s==null||s.set(i,c),c}catch(c){if(s==null||s.set(i,c),n)return null;throw c}})}findNextMatchSync(e,r,n){const s=typeof e=="string"?e:e.content,a=[];function i(l,c,d=0){return{index:l,captureIndices:c.indices.map(u=>u==null?{start:U7,end:U7,length:0}:{start:u[0]+d,end:u[1]+d,length:u[1]-u[0]})}}for(let l=0;l<this.regexps.length;l++){const c=this.regexps[l];if(c)try{c.lastIndex=r;const d=c.exec(s);if(!d)continue;if(d.index===r)return i(l,d,0);a.push([l,d,0])}catch(d){if(this.options.forgiving)continue;throw d}}if(a.length){const l=Math.min(...a.map(c=>c[1].index));for(const[c,d,u]of a)if(d.index===l)return i(c,d,u)}return null}}function AFe(t,e){return jFe(t,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...e})}function MFe(t={}){const e=Object.assign({target:"auto",cache:new Map},t);return e.regexConstructor||(e.regexConstructor=r=>AFe(r,{target:e.target})),{createScanner(r){return new _Fe(r,e)},createString(r){return{content:r}}}}const V7=async(t="light-plus")=>{const e=await KK({themes:[Nt(()=>import("./light-plus-B7mTdjB0.js"),[]),Nt(()=>import("./dark-plus-C3mMm8J8.js"),[])],langs:[Nt(()=>import("./javascript-BMMyXqK5.js"),[]),Nt(()=>import("./typescript-DlfHMoPT.js"),[]),Nt(()=>import("./python-B6aJPvgy.js"),[]),Nt(()=>import("./java-CylS5w8V.js"),[]),Nt(()=>import("./sql-BLtJtn59.js"),[]),Nt(()=>import("./html-B8pBdPMQ.js"),__vite__mapDeps([24,25,26])),Nt(()=>import("./css-DPfMkruS.js"),[]),Nt(()=>import("./json-Cp-IABpG.js"),[]),Nt(()=>import("./markdown-Cvjx9yec.js"),[]),Nt(()=>import("./bash-SHvotRv0.js").then(r=>r.b),[]),Nt(()=>import("./powershell-Dpen1YoG.js"),[]),Nt(()=>import("./cpp-CofmeUqb.js"),__vite__mapDeps([27,28,29,30,31])),Nt(()=>import("./c-BIGW1oBm.js"),[]),Nt(()=>import("./go-Dn2_MT6a.js"),[]),Nt(()=>import("./rust-B1yitclQ.js"),[]),Nt(()=>import("./php-Gk5eUrPQ.js"),__vite__mapDeps([32,24,25,26,33,34,31,35])),Nt(()=>import("./ruby-B3cFAIbZ.js"),__vite__mapDeps([36,24,25,26,37,33,34,31,38,39,40,41,27,28,29,30,42,43,44])),Nt(()=>import("./swift-Ccdh7vHB.js"),[]),Nt(()=>import("./kotlin-BdnUsdx6.js"),[]),Nt(()=>import("./scala-C151Ov-r.js"),[]),Nt(()=>import("./dart-CF10PKvl.js"),[]),Nt(()=>import("./xml-sdJ4AIDG.js"),__vite__mapDeps([33,34])),Nt(()=>import("./yaml-Buea-lGh.js"),[]),Nt(()=>import("./toml-vGWfd6FD.js"),[])],engine:MFe()});return e.defaultTheme=t,e},vZ=({content:t,onChange:e,onContentChange:r,placeholder:n="Comienza a escribir...",editable:s=!0,className:a="",documentId:i})=>{var g;const{isDark:l}=U9(),c=x.useRef(null),d=st.useMemo(()=>{if(t){if(Array.isArray(t)&&t.length>0){const y=t.filter(b=>b.type&&b.type!=="doc"&&["paragraph","heading","bulletListItem","numberedListItem","codeBlock","table","file","image","video","audio"].includes(b.type));return y.length>0?y:void 0}if(typeof t=="object"&&t.type){if(t.type==="doc"){if(t.content&&Array.isArray(t.content)){const y=t.content.filter(b=>b.type&&b.type!=="doc"&&["paragraph","heading","bulletListItem","numberedListItem","codeBlock","table","file","image","video","audio"].includes(b.type));return y.length>0?y:void 0}return}return[t]}if(typeof t=="string"&&t.trim())return[{id:"initial",type:"paragraph",content:[{type:"text",text:t}]}]}},[t]),u=x.useCallback(async y=>{if(!i||i.trim()==="")return console.warn(" [BlockNote] Sin documentId - creando URL temporal"),URL.createObjectURL(y);try{const b=ct.getValidTokens();if(!b)throw new Error("No hay sesin vlida para subir archivo");const v=new FormData;v.append("files",y);const w=await fetch(`/api/files/knowledge/upload/${i}`,{method:"POST",headers:{Authorization:`Bearer ${b.token}`},body:v});if(!w.ok)throw new Error(`Upload fall: ${w.status} ${w.statusText}`);const k=await w.json();if(k.uploaded&&k.uploaded.length>0){const S=k.uploaded[0].downloadUrl.split("/"),C=S[S.length-1],E=ct.getValidTokens(),T=E==null?void 0:E.token;if(!T)throw console.warn(" [BlockNote] No hay token vlido disponible"),new Error("No hay sesin vlida para cargar archivo");return`${window.location.origin}/api/files/knowledge/view/${C}?token=${encodeURIComponent(T)}`}else throw console.error(" [BlockNote] No se encontraron archivos en la respuesta"),new Error("No se pudo obtener URL del archivo subido")}catch(b){return console.error(" [BlockNote] Error en upload:",b),console.warn(" [BlockNote] Usando URL temporal como fallback"),URL.createObjectURL(y)}},[i]),h=x.useCallback(y=>{if(!y||!Array.isArray(y))return y;const b=ct.getValidTokens();return b?y.map(v=>{var w;if(v.type==="image"&&((w=v.props)!=null&&w.url)&&v.props.url.includes("/api/files/knowledge/view/")){let k=v.props.url;if(k.includes("token=")){const S=k.split("?"),C=S[0],E=S[1]||"",T=new URLSearchParams(E);T.delete("token"),k=T.toString()?`${C}?${T.toString()}`:C}const N=k.includes("?")?"&":"?";return k=`${k}${N}token=${encodeURIComponent(b.token)}`,{...v,props:{...v.props,url:k}}}return v}):y},[]),f=x.useMemo(()=>h(d),[d,h,(g=ct.getValidTokens())==null?void 0:g.token]),m=T2({initialContent:f,uploadFile:i&&s?u:void 0,...s?{codeBlock:{indentLineWithTab:!0,defaultLanguage:"typescript",supportedLanguages:{typescript:{name:"TypeScript",aliases:["ts"]},javascript:{name:"JavaScript",aliases:["js"]},python:{name:"Python",aliases:["py"]},java:{name:"Java"},csharp:{name:"C#",aliases:["cs"]},cpp:{name:"C++",aliases:["c++"]},c:{name:"C"},go:{name:"Go"},rust:{name:"Rust",aliases:["rs"]},php:{name:"PHP"},ruby:{name:"Ruby",aliases:["rb"]},swift:{name:"Swift"},kotlin:{name:"Kotlin",aliases:["kt"]},scala:{name:"Scala"},dart:{name:"Dart"},bash:{name:"Bash",aliases:["sh","shell"]},powershell:{name:"PowerShell",aliases:["ps1"]},perl:{name:"Perl",aliases:["pl"]},lua:{name:"Lua"},sql:{name:"SQL"},plsql:{name:"PL/SQL"},mysql:{name:"MySQL"},postgresql:{name:"PostgreSQL",aliases:["postgres"]},html:{name:"HTML"},css:{name:"CSS"},scss:{name:"SCSS",aliases:["sass"]},less:{name:"Less"},json:{name:"JSON"},yaml:{name:"YAML",aliases:["yml"]},toml:{name:"TOML"},xml:{name:"XML"},ini:{name:"INI"},markdown:{name:"Markdown",aliases:["md"]},latex:{name:"LaTeX",aliases:["tex"]},vue:{name:"Vue"},svelte:{name:"Svelte"},jsx:{name:"JSX"},tsx:{name:"TSX"},dockerfile:{name:"Dockerfile",aliases:["docker"]},makefile:{name:"Makefile",aliases:["make"]},r:{name:"R"},matlab:{name:"MATLAB",aliases:["m"]},text:{name:"Plain Text",aliases:["txt"]},diff:{name:"Diff"},apache:{name:"Apache Config"},nginx:{name:"Nginx Config"}},createHighlighter:()=>V7()}}:{codeBlock:{indentLineWithTab:!1,defaultLanguage:"typescript",supportedLanguages:{typescript:{name:"TypeScript",aliases:["ts"]},javascript:{name:"JavaScript",aliases:["js"]},python:{name:"Python",aliases:["py"]},java:{name:"Java"},csharp:{name:"C#",aliases:["cs"]},cpp:{name:"C++",aliases:["c++"]},c:{name:"C"},go:{name:"Go"},rust:{name:"Rust",aliases:["rs"]},php:{name:"PHP"},ruby:{name:"Ruby",aliases:["rb"]},swift:{name:"Swift"},kotlin:{name:"Kotlin",aliases:["kt"]},scala:{name:"Scala"},dart:{name:"Dart"},bash:{name:"Bash",aliases:["sh","shell"]},powershell:{name:"PowerShell",aliases:["ps1"]},perl:{name:"Perl",aliases:["pl"]},lua:{name:"Lua"},sql:{name:"SQL"},plsql:{name:"PL/SQL"},mysql:{name:"MySQL"},postgresql:{name:"PostgreSQL",aliases:["postgres"]},html:{name:"HTML"},css:{name:"CSS"},scss:{name:"SCSS",aliases:["sass"]},less:{name:"Less"},json:{name:"JSON"},yaml:{name:"YAML",aliases:["yml"]},toml:{name:"TOML"},xml:{name:"XML"},ini:{name:"INI"},markdown:{name:"Markdown",aliases:["md"]},latex:{name:"LaTeX",aliases:["tex"]},vue:{name:"Vue"},svelte:{name:"Svelte"},jsx:{name:"JSX"},tsx:{name:"TSX"},dockerfile:{name:"Dockerfile",aliases:["docker"]},makefile:{name:"Makefile",aliases:["make"]},r:{name:"R"},matlab:{name:"MATLAB",aliases:["m"]},text:{name:"Plain Text",aliases:["txt"]},diff:{name:"Diff"},apache:{name:"Apache Config"},nginx:{name:"Nginx Config"}},createHighlighter:()=>V7()}},...s&&{tables:{cellBackgroundColor:!0,cellTextColor:!0,headers:!0,splitCells:!0}}});x.useEffect(()=>{const y=document.querySelector(".blocknote-editor");y&&(y.setAttribute("data-theme",l?"dark":"light"),y.setAttribute("data-editable",s.toString()))},[l,m,s]),x.useEffect(()=>{if(!l)return;const y={"#000000":"#e2e8f0","#1f2937":"#e2e8f0","#0000ff":"#569cd6","#0000FF":"#569cd6","#a31515":"#ce9178","#A31515":"#ce9178","#008000":"#6a9955","#098658":"#b5cea8","#09885a":"#b5cea8","#09885A":"#b5cea8","#267f99":"#4ec9b0","#267F99":"#4ec9b0","#795e26":"#dcdcaa","#795E26":"#dcdcaa","#001080":"#9cdcfe","#0070c1":"#9cdcfe","#0070C1":"#9cdcfe","#800000":"#569cd6","#ff0000":"#9cdcfe","#FF0000":"#9cdcfe"},b=()=>{document.querySelectorAll(".bn-code-block").forEach(S=>{S.querySelectorAll("span[style]").forEach(E=>{const T=E,B=(T.getAttribute("style")||"").match(/color:\s*([^;]+)/i);if(B){const M=B[1].trim().toLowerCase();for(const[L,V]of Object.entries(y))if(M===L.toLowerCase()){T.style.setProperty("color",V,"important");break}}})})};b();const v=[setTimeout(b,100),setTimeout(b,300),setTimeout(b,500),setTimeout(b,1e3),setTimeout(b,2e3)],w=new MutationObserver(N=>{N.some(C=>C.target instanceof HTMLElement&&(C.target.closest(".bn-code-block")||C.target.classList.contains("bn-code-block")))&&setTimeout(b,50)}),k=document.querySelector(".blocknote-editor");return k&&w.observe(k,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),()=>{v.forEach(clearTimeout),w.disconnect()}},[l,m]),x.useEffect(()=>{if(!s&&m){const y=()=>{document.querySelectorAll(`
          .blocknote-editor .bn-code-block .mantine-Select-root,
          .blocknote-editor .bn-code-block .mantine-Select-wrapper,
          .blocknote-editor .bn-code-block .mantine-Input-wrapper,
          .blocknote-editor .bn-code-block .mantine-ComboboxTarget,
          .blocknote-editor .bn-code-block .mantine-Combobox,
          .blocknote-editor .bn-code-block button,
          .blocknote-editor .bn-code-block select,
          .blocknote-editor .bn-code-block input,
          .blocknote-editor .bn-code-block [role="combobox"],
          .blocknote-editor .bn-code-block [aria-haspopup],
          .mantine-Select-dropdown,
          .mantine-Popover-dropdown,
          .mantine-Combobox-dropdown,
          div[role="listbox"]
        `).forEach(C=>{C instanceof HTMLElement&&(C.style.setProperty("display","none","important"),C.style.setProperty("opacity","0","important"),C.style.setProperty("pointer-events","none","important"),C.style.setProperty("visibility","hidden","important"),C.style.setProperty("position","absolute","important"),C.style.setProperty("top","-99999px","important"),C.style.setProperty("left","-99999px","important"),C.style.setProperty("width","0","important"),C.style.setProperty("height","0","important"),C.style.setProperty("max-width","0","important"),C.style.setProperty("max-height","0","important"),C.style.setProperty("overflow","hidden","important"),C.style.setProperty("z-index","-99999","important"),C.style.setProperty("transform","scale(0)","important"),C.removeAttribute("tabindex"),C.setAttribute("tabindex","-1"),C.setAttribute("aria-hidden","true"),C.tagName==="BUTTON"&&(C.disabled=!0),C.tagName==="INPUT"&&(C.disabled=!0),C.tagName==="SELECT"&&(C.disabled=!0))}),document.querySelectorAll(`
          .mantine-Select-dropdown,
          .mantine-Popover-dropdown,
          .mantine-Combobox-dropdown,
          [data-mantine-color-scheme] [role="listbox"],
          [role="option"]
        `).forEach(C=>{C instanceof HTMLElement&&(C.style.setProperty("display","none","important"),C.remove())})},b=[setTimeout(y,0),setTimeout(y,50),setTimeout(y,100),setTimeout(y,200),setTimeout(y,500),setTimeout(y,1e3)],v=new MutationObserver(()=>{setTimeout(y,10),setTimeout(y,50)}),w=document.querySelector(".blocknote-editor");w&&v.observe(w,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0}),v.observe(document.body,{childList:!0,subtree:!0});const k=N=>{const S=N.target;if(S&&(S.closest(".mantine-Select-root")||S.closest(".mantine-Select-dropdown")||S.closest(".mantine-Combobox")||S.closest('[role="combobox"]')||S.closest('[role="listbox"]')||S.closest("[aria-haspopup]")))return N.preventDefault(),N.stopPropagation(),N.stopImmediatePropagation(),!1};return document.addEventListener("click",k,!0),document.addEventListener("mousedown",k,!0),document.addEventListener("keydown",k,!0),document.addEventListener("focus",k,!0),()=>{b.forEach(clearTimeout),v.disconnect(),document.removeEventListener("click",k,!0),document.removeEventListener("mousedown",k,!0),document.removeEventListener("keydown",k,!0),document.removeEventListener("focus",k,!0)}}},[s,m]),x.useEffect(()=>{if(!s){const y=document.getElementById("blocknote-readonly-override")||document.createElement("style");return y.id="blocknote-readonly-override",y.innerHTML=`
        /* OCULTAR COMPLETAMENTE el selector de lenguaje manteniendo el DOM */
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Select-root,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Select-wrapper,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Select-input,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Input-wrapper,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Input-root,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-ComboboxTarget,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-Combobox,
        .blocknote-editor[data-editable="false"] .bn-code-block .mantine-UnstyledButton-root,
        .blocknote-editor[data-editable="false"] .bn-code-block button,
        .blocknote-editor[data-editable="false"] .bn-code-block select,
        .blocknote-editor[data-editable="false"] .bn-code-block input,
        .blocknote-editor[data-editable="false"] .bn-code-block [role="combobox"],
        .blocknote-editor[data-editable="false"] .bn-code-block [aria-haspopup],
        .blocknote-editor[data-editable="false"] .bn-code-block [aria-expanded] {
          display: none !important;
          opacity: 0 !important;
          pointer-events: none !important;
          visibility: hidden !important;
          position: absolute !important;
          top: -99999px !important;
          left: -99999px !important;
          width: 0 !important;
          height: 0 !important;
          max-width: 0 !important;
          max-height: 0 !important;
          overflow: hidden !important;
          z-index: -99999 !important;
          margin: 0 !important;
          padding: 0 !important;
          border: none !important;
          background: transparent !important;
          transform: scale(0) !important;
        }
        
        /* Ocultar CUALQUIER dropdown globalmente */
        .mantine-Select-dropdown,
        .mantine-Popover-dropdown,
        .mantine-Combobox-dropdown,
        div[role="listbox"],
        div[role="option"],
        ul[role="listbox"],
        li[role="option"],
        [data-mantine-color-scheme] [role="listbox"],
        [data-mantine-color-scheme] [role="option"] {
          display: none !important;
          opacity: 0 !important;
          pointer-events: none !important;
          visibility: hidden !important;
          position: absolute !important;
          top: -99999px !important;
          left: -99999px !important;
        }
        
        /* Asegurar que el contenido de cdigo se vea correctamente */
        .blocknote-editor[data-editable="false"] .bn-code-block {
          position: relative !important;
        }
        
        .blocknote-editor[data-editable="false"] .bn-code-block .bn-code-block-content {
          padding-top: 4px !important;
          margin-top: 0 !important;
          width: 100% !important;
          position: relative !important;
          z-index: 1 !important;
        }
        
        /* Forzar que solo el pre sea visible */
        .blocknote-editor[data-editable="false"] .bn-code-block pre {
          position: relative !important;
          z-index: 2 !important;
          display: block !important;
          visibility: visible !important;
          opacity: 1 !important;
        }

        /* Ajuste sutil para ms ancho en lectura - SOLO el contenido interno */
        .blocknote-editor[data-editable="false"] .ProseMirror {
          padding-left: 0.5rem !important;
          padding-right: 0.5rem !important;
          max-width: 100% !important;
        }

        /* Asegurar que las imgenes usen el espacio disponible */
        .blocknote-editor[data-editable="false"] .ProseMirror img {
          max-width: 100% !important;
          width: auto !important;
          height: auto !important;
          display: block !important;
          margin: 0 auto !important;
        }

        /* Optimizar tambin el modo edicin para mejor uso del espacio */
        .blocknote-editor[data-editable="true"] .ProseMirror {
          padding-left: 0.75rem !important;
          padding-right: 0.75rem !important;
          max-width: 100% !important;
        }

        /* Imgenes en modo edicin tambin ms anchas */
        .blocknote-editor[data-editable="true"] .ProseMirror img {
          max-width: 100% !important;
          width: auto !important;
          height: auto !important;
        }
      `,document.head.contains(y)||document.head.insertBefore(y,document.head.firstChild),()=>{const b=document.getElementById("blocknote-readonly-override");b&&b.remove()}}},[s]),x.useEffect(()=>{const y=c.current;if(!y)return;let b=0;const v=3e3,w=()=>{const S=Date.now();S-b>=v&&(b=S,ct.notifyActivity())},k=["mousedown","mousemove","keydown","keypress","scroll","touchstart","click","focus","focusin","input"];k.forEach(S=>{y.addEventListener(S,w,{capture:!0,passive:!0})});const N=S=>{y.contains(S.target)&&w()};return document.addEventListener("keydown",N,{capture:!0}),document.addEventListener("mousedown",N,{capture:!0}),()=>{k.forEach(S=>{y.removeEventListener(S,w,{capture:!0})}),document.removeEventListener("keydown",N,{capture:!0}),document.removeEventListener("mousedown",N,{capture:!0})}},[c.current]);const p=x.useCallback(()=>{if(s&&ct.notifyActivity(),!e&&!r)return;const y=m.document,b=m.document.map(v=>v.content&&Array.isArray(v.content)?v.content.filter(w=>w.type==="text").map(w=>w.text||"").join(" "):"").join(" ").trim();e==null||e(y),r==null||r(b)},[m,e,r,s]);return x.useEffect(()=>{if(m&&f){const y=m.document;JSON.stringify(y)!==JSON.stringify(f)&&m.replaceBlocks(m.document,f)}},[m,f,i]),x.useEffect(()=>{if(m){const y=document.querySelector(".blocknote-editor");y&&y.setAttribute("data-theme",l?"dark":"light")}},[m,f,l]),x.useEffect(()=>{if(!m||!i)return;const b=setInterval(()=>{const v=m.document,w=h(v);JSON.stringify(v)!==JSON.stringify(w)&&m.replaceBlocks(m.document,w)},5*60*1e3);return()=>clearInterval(b)},[m,i,h]),o.jsxs("div",{ref:c,className:`blocknote-editor ${a}`,"data-theme":l?"dark":"light","data-editable":s,children:[o.jsx(dK,{editor:m,editable:s,onChange:p,theme:l?"dark":"light",slashMenu:s,formattingToolbar:s,linkToolbar:s,sideMenu:s}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .blocknote-editor .ProseMirror {
            min-height: 200px;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            transition: border-color 0.2s ease;
          }
          
          .blocknote-editor .ProseMirror:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
          }
          
          .blocknote-editor .ProseMirror p.is-empty::before {
            content: "${n}";
            color: #9ca3af;
            pointer-events: none;
            height: 0;
          }
          
          /* CSS simplificado para modo de solo lectura */
          ${s?"":`
          /* El CSS de ocultacin se maneja dinmicamente con JavaScript */
          .blocknote-editor[data-editable="false"] .bn-code-block .bn-code-block-content {
            pointer-events: none !important;
            user-select: text !important;
            -webkit-user-select: text !important;
            -moz-user-select: text !important;
            -ms-user-select: text !important;
          }
          `}
          
          /* Custom styling for dark mode */
          .dark .blocknote-editor .ProseMirror,
          .blocknote-editor[data-theme="dark"] .ProseMirror {
            background-color: #374151;
            border-color: #4b5563;
            color: #f9fafb;
          }
          
          .dark .blocknote-editor .ProseMirror:focus,
          .blocknote-editor[data-theme="dark"] .ProseMirror:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
          }
          
          .dark .blocknote-editor .ProseMirror p.is-empty::before,
          .blocknote-editor[data-theme="dark"] .ProseMirror p.is-empty::before {
            color: #6b7280;
          }
          
          /* Toolbar styling */
          .blocknote-editor .bn-toolbar {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
          }
          
          .dark .blocknote-editor .bn-toolbar,
          .blocknote-editor[data-theme="dark"] .bn-toolbar {
            background-color: #374151;
            border-color: #4b5563;
          }
          
          /* Menu styling */
          .blocknote-editor .bn-menu {
            background-color: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
          }
          
          .dark .blocknote-editor .bn-menu {
            background-color: #374151;
            border-color: #4b5563;
          }
          
          /* Button styling */
          .blocknote-editor .bn-button {
            border-radius: 4px;
            transition: all 0.2s ease;
          }
          
          .blocknote-editor .bn-button:hover {
            background-color: #f3f4f6;
          }
          
          .dark .blocknote-editor .bn-button:hover,
          .blocknote-editor[data-theme="dark"] .bn-button:hover {
            background-color: #4b5563;
          }
        `}})]})},Ay=ln.create({baseURL:Pn.api.baseUrl,headers:{"Content-Type":"application/json"}});Ay.interceptors.request.use(t=>{const e=ct.getValidTokens();return e!=null&&e.token&&(t.headers.Authorization=`Bearer ${e.token}`),t});Ay.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&console.warn(" Token expirado o invlido en useFileUpload"),Promise.reject(t)});const OFe=()=>{const t=ur();return gr({mutationFn:async({documentId:e,files:r})=>{const n=new FormData;return Array.from(r).forEach(a=>{n.append("files",a)}),(await Ay.post(`/files/knowledge/upload/${e}`,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a=>{}})).data},onSuccess:(e,r)=>{t.invalidateQueries({queryKey:["attachments",r.documentId]}),e.errors.length>0&&console.warn("Errores en algunos archivos:",e.errors)},onError:e=>{console.error("Error subiendo archivos:",e)}})},RFe=t=>Vr({queryKey:["attachments",t],queryFn:async()=>(await Ay.get(`/files/knowledge/attachments/${t}`)).data.attachments,enabled:!!t,staleTime:30*1e3}),PFe=()=>{const t=ur();return gr({mutationFn:async e=>(await Ay.delete(`/files/knowledge/${e}`)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["attachments"]})},onError:e=>{console.error("Error eliminando archivo:",e)}})},gg=t=>{if(t===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+r[n]},IFe=t=>{switch(t){case"image":return"";case"document":return"";case"spreadsheet":return"";case"other":default:return""}},DFe=t=>t.startsWith("image/"),LFe=({documentId:t,onUploadComplete:e,className:r="",maxFiles:n=10,maxFileSize:s=50*1024*1024})=>{const[a,i]=x.useState(!1),[l,c]=x.useState([]),d=x.useRef(null),u=OFe(),{error:h,warning:f}=nr(),m=[".jpg",".jpeg",".png",".gif",".webp",".svg",".pdf",".doc",".docx",".txt",".rtf",".xls",".xlsx",".csv",".ppt",".pptx",".mp4",".avi",".mov",".wmv",".webm",".mp3",".wav",".ogg",".aac",".zip",".rar",".7z",".tar",".gz"],p=S=>{S.preventDefault(),i(!0)},g=S=>{S.preventDefault(),i(!1)},y=S=>{S.preventDefault(),i(!1);const C=Array.from(S.dataTransfer.files);v(C)},b=S=>{if(S.target.files){const C=Array.from(S.target.files);v(C)}},v=S=>{var T;if(S.length>n){f(`Solo se pueden subir mximo ${n} archivos a la vez.`);return}const C=[],E=[];for(const R of S){const B="."+((T=R.name.split(".").pop())==null?void 0:T.toLowerCase());if(!m.includes(B)){E.push(`${R.name}: Tipo de archivo no permitido`);continue}if(R.size>s){E.push(`${R.name}: Tamao excede el lmite de ${gg(s)}`);continue}C.push(R)}E.length>0&&h(`Errores de validacin: ${E.join(", ")}`),C.length>0&&c(C)},w=async()=>{if(l.length!==0)try{const S=new DataTransfer;l.forEach(E=>S.items.add(E));const C=await u.mutateAsync({documentId:t,files:S.files});if(C.totalUploaded>0&&(c([]),d.current&&(d.current.value=""),e==null||e()),C.errors.length>0){const E=C.errors.map(T=>`${T.fileName}: ${T.error}`).join(", ");f(`Algunos archivos no se pudieron subir: ${E}`)}}catch(S){console.error("Error subiendo archivos:",S),h("Error subiendo archivos. Intntalo de nuevo.")}},k=S=>{c(C=>C.filter((E,T)=>T!==S))},N=()=>{c([]),d.current&&(d.current.value="")};return o.jsxs("div",{className:`space-y-4 ${r}`,children:[o.jsxs("div",{className:`
          relative border-2 border-dashed rounded-lg p-6 transition-colors cursor-pointer
          ${a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800/50"}
        `,onDragOver:p,onDragLeave:g,onDrop:y,onClick:()=>{var S;return(S=d.current)==null?void 0:S.click()},children:[o.jsx("input",{ref:d,type:"file",multiple:!0,accept:m.join(","),onChange:b,className:"hidden"}),o.jsxs("div",{className:"text-center",children:[o.jsx(O,{action:"upload",size:"xl",className:"mx-auto text-gray-400 dark:text-gray-500"}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:a?"Suelta los archivos aqu":"Arrastra archivos aqu"}),o.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:["o"," ",o.jsx("span",{className:"text-blue-600 dark:text-blue-400 underline",children:"haz clic para seleccionar archivos"})]}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Mximo ",n," archivos  ",gg(s)," por archivo"]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Formatos: imgenes, documentos, hojas de clculo, presentaciones, videos, audio, archivos comprimidos"})]})]})]}),l.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Archivos seleccionados (",l.length,")"]}),o.jsx("button",{type:"button",onClick:N,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Limpiar seleccin"})]}),o.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map((S,C)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate max-w-xs",children:S.name}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:gg(S.size)})]})]}),o.jsx("button",{type:"button",onClick:()=>k(C),className:"p-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 rounded-full hover:bg-red-50 dark:hover:bg-red-900/30",title:"Remover archivo",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`${S.name}-${C}`))}),o.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:N,disabled:u.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:S=>{S.preventDefault(),S.stopPropagation(),w()},disabled:u.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 dark:bg-blue-700 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:u.isPending?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Subiendo..."})]}):o.jsx("span",{children:"Subir archivos"})})]})]})]})};function $Fe({isOpen:t,onClose:e,onConfirm:r,fileName:n,fileSize:s,mimeType:a}){const[i,l]=x.useState(!1),c=async()=>{try{l(!0),await r(),e()}catch(u){console.error("Error in modal:",u)}finally{l(!1)}};if(!t)return null;const d=u=>u.startsWith("image/")?"view":u.includes("pdf")?"download":u.includes("word")||u.includes("document")?"edit":u.includes("excel")||u.includes("spreadsheet")?"table":u.includes("text/")?"edit":"attachment";return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:o.jsx(O,{action:"delete",size:"md",color:"red"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Eliminar Archivo"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Esta accin no se puede deshacer"})]})]}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Ests seguro de que quieres eliminar este archivo?"}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-gray-200 dark:bg-gray-600 rounded-lg",children:o.jsx(O,{action:d(a),size:"md"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:n}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})]})]})}),o.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(O,{action:"warning",size:"sm",color:"red"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Advertencia"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Una vez eliminado, el archivo se perder permanentemente y no se podr recuperar."})]})]})})]})}),o.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[o.jsx(ae,{variant:"secondary",onClick:e,disabled:i,children:"Cancelar"}),o.jsx(ae,{variant:"danger",onClick:c,disabled:i,className:"flex items-center gap-2",children:i?o.jsxs(o.Fragment,{children:[o.jsx(Lr,{size:"sm"}),"Eliminando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"delete",size:"sm"}),"Eliminar Archivo"]})})]})]})})}const bZ=({documentId:t,className:e,readOnly:r=!1})=>{const{data:n,isLoading:s,error:a}=RFe(t),i=PFe(),{error:l}=nr(),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,m]=x.useState(null);x.useEffect(()=>()=>{u&&u.startsWith("blob:")&&URL.revokeObjectURL(u)},[u]);const p=N=>!!(N.startsWith("image/")||N==="application/pdf"||N.startsWith("text/")),g=N=>N==="application/pdf",y=N=>{m(N)},b=async()=>{if(f){d(f.id);try{await i.mutateAsync(f.id),m(null)}catch(N){console.error("Error eliminando archivo:",N),l("Error eliminando el archivo. Intntalo de nuevo.")}finally{d(null)}}},v=()=>{m(null)},w=async N=>{try{const S=ct.getValidTokens();if(!(S!=null&&S.token)){l("Sesin expirada. Por favor, inicia sesin nuevamente.");return}const C=N.downloadUrl.split("/"),E=C[C.length-1];if(DFe(N.mimeType)){const T=`${window.location.origin}/api/files/knowledge/view/${E}?token=${encodeURIComponent(S.token)}`,R=await fetch(T,{method:"GET",headers:{Authorization:`Bearer ${S.token}`,Accept:"image/*,*/*"},cache:"no-cache",credentials:"include"});if(!R.ok)throw new Error(`Error ${R.status}: ${R.statusText}`);const B=await R.blob(),M=URL.createObjectURL(B);h(M)}else if(g(N.mimeType)){const T=`${window.location.origin}/api/files/knowledge/view/${E}?token=${encodeURIComponent(S.token)}`,R=await fetch(T,{method:"GET",headers:{Authorization:`Bearer ${S.token}`,Accept:"application/pdf,*/*"},cache:"no-cache",credentials:"include"});if(!R.ok)throw new Error(`Error ${R.status}: ${R.statusText}`);const B=await R.blob(),M=URL.createObjectURL(B);window.open(M,"_blank")}else if(N.mimeType.startsWith("text/")){const T=`${window.location.origin}/api/files/knowledge/view/${E}?token=${encodeURIComponent(S.token)}`,R=await fetch(T,{method:"GET",headers:{Authorization:`Bearer ${S.token}`,Accept:"text/*,*/*"},cache:"no-cache",credentials:"include"});if(!R.ok)throw new Error(`Error ${R.status}: ${R.statusText}`);const B=await R.blob(),M=URL.createObjectURL(B);window.open(M,"_blank")}}catch(S){console.error("Error procesando archivo:",S),l(`Error al procesar el archivo: ${S instanceof Error?S.message:"Error desconocido"}`)}},k=async N=>{try{const S=ct.getValidTokens();if(!(S!=null&&S.token)){l("Sesin expirada. Por favor, inicia sesin nuevamente.");return}const C=N.downloadUrl.split("/"),E=C[C.length-1],T=`${window.location.origin}/api/files/knowledge/download/${E}?token=${encodeURIComponent(S.token)}`,R=await fetch(T,{method:"GET",headers:{Authorization:`Bearer ${S.token}`},cache:"no-cache",credentials:"include"});if(!R.ok)throw new Error(`Error ${R.status}: ${R.statusText}`);const B=await R.blob(),M=URL.createObjectURL(B),L=document.createElement("a");L.href=M,L.download=N.fileName,document.body.appendChild(L),L.click(),document.body.removeChild(L),setTimeout(()=>URL.revokeObjectURL(M),100)}catch(S){console.error("Error descargando archivo:",S),l(`Error al descargar el archivo: ${S instanceof Error?S.message:"Error desconocido"}`)}};return s?o.jsxs("div",{className:`${e} animate-pulse`,children:[o.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4"}),o.jsx("div",{className:"space-y-2",children:[...Array(3)].map((N,S)=>o.jsx("div",{className:"h-12 bg-gray-100 dark:bg-gray-700 rounded"},S))})]}):a?o.jsx("div",{className:`${e} text-red-600 dark:text-red-400`,children:o.jsxs("p",{children:["Error cargando archivos adjuntos:"," ",a instanceof Error?a.message:"Error desconocido"]})}):!n||n.length===0?o.jsx("div",{className:`${e} text-gray-500 dark:text-gray-400`,children:o.jsx("p",{children:"No hay archivos adjuntos"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:e,children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:["Archivos adjuntos (",n.length,")"]}),o.jsx("div",{className:"space-y-3",children:n.map(N=>o.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx("div",{className:"text-2xl",children:IFe(N.fileType)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:N.fileName}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[gg(N.fileSize)," "," ",new Date(N.createdAt).toLocaleDateString()]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[p(N.mimeType)&&o.jsx("button",{type:"button",onClick:()=>w(N),className:"p-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-full transition-colors",title:"Vista previa",children:o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),o.jsx("button",{type:"button",onClick:()=>k(N),className:"p-2 text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-full transition-colors",title:"Descargar",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),!r&&o.jsx("button",{type:"button",onClick:S=>{S.preventDefault(),S.stopPropagation(),y(N)},disabled:c===N.id,className:"p-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar archivo",children:c===N.id?o.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},N.id))})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>{u.startsWith("blob:")&&URL.revokeObjectURL(u),h(null)},children:o.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[o.jsx("img",{src:u,alt:"Vista previa",className:"max-w-full max-h-full object-contain rounded-lg",onClick:N=>N.stopPropagation()}),o.jsx("button",{type:"button",onClick:()=>{u.startsWith("blob:")&&URL.revokeObjectURL(u),h(null)},className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full p-2 transition-all",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),f&&o.jsx($Fe,{isOpen:!!f,onClose:v,onConfirm:b,fileName:f.fileName,fileSize:gg(f.fileSize),mimeType:f.mimeType})]})},H7=()=>{var Yh;const t=Ri(),{id:e}=kk(),r=!!e,n=x.useRef(null),[s,a]=x.useState(""),[i,l]=x.useState(null),[c,d]=x.useState(""),[u,h]=x.useState(""),[f,m]=x.useState("medium"),[p,g]=x.useState(1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[k,N]=x.useState(""),[S,C]=x.useState([]),[E,T]=x.useState(!1),[R,B]=x.useState(!1),[M,L]=x.useState(!1),[V,ee]=x.useState(!1),[Q,J]=x.useState(!1),[_,H]=x.useState([]),[P,K]=x.useState(""),[F,ne]=x.useState(!1),[z,Z]=x.useState(!1),{success:oe,error:ue}=po(),_e=Ce=>{if(Z(Ce),Ce){if(i&&i.length>0&&i.some(lr=>lr.content&&lr.content.length>0)&&!window.confirm("El documento ya tiene contenido. Deseas reemplazarlo con la plantilla de documentacin?")){Z(!1);return}l(xz)}},[we,Y]=x.useState(!1),le=1*60*1e3,[ye,Ve]=x.useState(null),[Be,ut]=x.useState(!1),[Te,je]=x.useState(!1),ht=x.useRef(null),pt=x.useRef(""),re=x.useRef(),[ce,ge]=x.useState(!1),Ue=`knowledge_backup_${e||"new"}`,Re=x.useCallback(Ce=>{try{const Ge={...Ce,backupTimestamp:new Date().toISOString(),documentId:e};localStorage.setItem(Ue,JSON.stringify(Ge)),ge(!0),console.log(" Backup local guardado:",new Date().toLocaleTimeString())}catch(Ge){console.error("Error guardando backup local:",Ge)}},[e,Ue]),Me=x.useCallback(()=>{localStorage.removeItem(Ue),ge(!1)},[Ue]),Qe=gz({onSuccess:()=>{oe("Documento creado exitosamente"),Me(),we&&t("/knowledge"),Y(!1)},onError:Ce=>{ue(`Error al crear documento: ${Ce.message}`),Y(!1)}}),I=dR({onSuccess:()=>{oe("Documento actualizado exitosamente"),Me(),je(!1),Ve(new Date),we&&t("/knowledge"),Y(!1)},onError:Ce=>{ue(`Error al actualizar documento: ${Ce.message}`),Y(!1)}}),j=dR({onSuccess:()=>{Ve(new Date),ut(!1),je(!1),Me(),ct.notifyActivity(),pt.current=JSON.stringify({title:s,jsonContent:i,textContent:c,documentTypeId:u,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S,associatedCases:_})},onError:Ce=>{var Ge,lr;if(console.error(" Error en autoguardado:",Ce),ut(!1),((Ge=Ce==null?void 0:Ce.response)==null?void 0:Ge.status)===401||(lr=Ce==null?void 0:Ce.message)!=null&&lr.includes("401")){const D={title:s,content:c,jsonContent:i,documentTypeId:u||void 0,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S.length>0?S:void 0,associatedCases:_};Re(D)}}}),A=L1e({onError:Ce=>{console.error("Error al crear/encontrar etiqueta:",Ce)}}),{data:U,isLoading:ie}=pz(e||""),{data:he}=O1e(),{data:be,isLoading:bt,error:er}=I1e(),{data:Yt}=D1e(k),{data:sr}=up();x.useEffect(()=>{const Ce=localStorage.getItem(Ue);if(Ce)try{const Ge=JSON.parse(Ce);Ge&&Ge.documentId===e&&ge(!0)}catch{}},[e,Ue]);const zt=Ce=>Ce.estado==="cerrado"||Ce.estado==="cancelado"||Ce.isArchived===!0?{name:"Archivado",color:"#6b7280"}:{name:"En Progreso",color:"#10b981"};st.useEffect(()=>{const Ce=Ge=>{Ge.target.closest(".tag-input-container")||L(!1)};if(typeof window<"u"&&window.document)return window.document.addEventListener("mousedown",Ce),()=>{window.document.removeEventListener("mousedown",Ce)}},[]),st.useEffect(()=>{er&&console.error(" Tags error details:",{message:er.message,error:er})},[er]),st.useEffect(()=>{be&&be.length>0&&!E&&!R&&T(!0)},[be,S.length,E,R]),x.useEffect(()=>{var Ce;if(U&&r){const Ge=`knowledge_backup_${e||"new"}`,lr=localStorage.getItem(Ge);if(lr)try{const W=JSON.parse(lr);if(W&&W.documentId===e){const q=new Date(W.backupTimestamp);if(window.confirm(`Se encontr un backup local guardado el ${q.toLocaleString()}.

Esto puede contener cambios que no se guardaron debido a una sesin expirada.

Deseas restaurar el backup local? (Cancelar para usar la versin del servidor)`)){a(W.title||U.title),l(W.jsonContent||U.jsonContent),d(W.content||W.textContent||U.content||""),h(W.documentTypeId||U.documentTypeId||""),m(W.priority||U.priority),g(W.difficultyLevel||U.difficultyLevel),b(W.isTemplate??U.isTemplate??!1),w(W.isPublished??U.isPublished??!1);const X=W.tags||[];C(X),H(W.associatedCases||[]),je(!0),pt.current=JSON.stringify({title:W.title||U.title,jsonContent:W.jsonContent||U.jsonContent,textContent:W.content||W.textContent||U.content||"",documentTypeId:W.documentTypeId||U.documentTypeId||"",priority:W.priority||U.priority,difficultyLevel:W.difficultyLevel||U.difficultyLevel,isTemplate:W.isTemplate??U.isTemplate??!1,isPublished:W.isPublished??U.isPublished??!1,tags:X,associatedCases:W.associatedCases||[]});return}else localStorage.removeItem(Ge),ge(!1)}}catch(W){console.error("Error procesando backup local:",W)}a(U.title),l(U.jsonContent),d(U.content||""),h(U.documentTypeId||""),m(U.priority),g(U.difficultyLevel),b(U.isTemplate||!1),w(U.isPublished||!1);const D=((Ce=U.tags)==null?void 0:Ce.map(W=>typeof W=="string"?W:W.tagName))||[];C(D),U.associatedCases&&U.associatedCases.length>0?H(U.associatedCases):H([]),pt.current=JSON.stringify({title:U.title,jsonContent:U.jsonContent,textContent:U.content||"",documentTypeId:U.documentTypeId||"",priority:U.priority,difficultyLevel:U.difficultyLevel,isTemplate:U.isTemplate||!1,isPublished:U.isPublished||!1,tags:D,associatedCases:U.associatedCases||[]})}},[U,r,e]);const Hp=x.useCallback(async()=>{if(!r||!e||Be||I.isPending||j.isPending||!s.trim())return;if(JSON.stringify({title:s,jsonContent:i,textContent:c,documentTypeId:u,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S,associatedCases:_})===pt.current){console.log(" [AUTOGUARDADO] Sin cambios detectados, omitiendo guardado");return}console.log(" [AUTOGUARDADO] Cambios detectados, guardando..."),ut(!0);const Ge={title:s,content:c,jsonContent:i,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,associatedCases:_};u&&u.trim()&&(Ge.documentTypeId=u),S.length>0&&(Ge.tags=S);try{await j.mutateAsync({id:e,data:Ge})}catch(lr){console.error(" Error en autoguardado:",lr),ut(!1)}},[r,e,Be,I.isPending,j,s,i,c,u,f,p,y,v,S,_]);x.useEffect(()=>{re.current=Hp},[Hp]),x.useEffect(()=>{if(!(!r||!e))return ht.current&&clearInterval(ht.current),console.log(" [AUTOGUARDADO] Iniciando intervalo de autoguardado cada",le/1e3,"segundos"),ht.current=setInterval(()=>{console.log(" [AUTOGUARDADO] Ejecutando ciclo de autoguardado..."),re.current&&re.current()},le),()=>{ht.current&&(console.log(" [AUTOGUARDADO] Limpiando intervalo de autoguardado"),clearInterval(ht.current),ht.current=null)}},[r,e,le]);const Wp=st.useMemo(()=>JSON.stringify({title:s,jsonContent:i,textContent:c,documentTypeId:u,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S,associatedCases:_}),[s,i,c,u,f,p,y,v,S,_]);x.useEffect(()=>{if(!r)return;const Ce=Wp!==pt.current;je(Ge=>Ge!==Ce?Ce:Ge)},[r,Wp]),x.useEffect(()=>{const Ce=Ge=>{if(Te&&r)return Ge.preventDefault(),Ge.returnValue="Tienes cambios sin guardar. Ests seguro de que deseas salir?",Ge.returnValue};return window.addEventListener("beforeunload",Ce),()=>window.removeEventListener("beforeunload",Ce)},[Te,r]),x.useEffect(()=>{const Ce=n.current;if(!Ce)return;let Ge=0;const lr=3e3,D=()=>{const q=Date.now();q-Ge>=lr&&(Ge=q,ct.notifyActivity())},W=["mousedown","mousemove","keydown","keypress","scroll","touchstart","click","focus","focusin","input","change"];return W.forEach(q=>{Ce.addEventListener(q,D,{capture:!0,passive:!0})}),()=>{W.forEach(q=>{Ce.removeEventListener(q,D,{capture:!0})})}},[n.current]);const rC=Ce=>{l(Ce)},nC=Ce=>{d(Ce)},Kh=async Ce=>{if(Ce.key==="Escape"){L(!1);return}if(Ce.key==="Enter"){Ce.preventDefault();const Ge=k.trim();if(Ge.length===0){N(""),L(!1);return}if(S.some(D=>D.toLowerCase()===Ge.toLowerCase())){N(""),L(!1);return}try{const W=(await A.mutateAsync({tagName:Ge,description:"Etiqueta creada automticamente"})).tagName;S.some(G=>G.toLowerCase()===W.toLowerCase())||C([...S,W])}catch(D){console.error("Error creating/finding tag:",D),C([...S,Ge])}N(""),L(!1)}},sC=Ce=>{C(S.filter(Ge=>Ge!==Ce))},My=async Ce=>{S.some(lr=>lr.toLowerCase()===Ce.toLowerCase())||C([...S,Ce])},aC=Ce=>{_.includes(Ce)||H([..._,Ce]),K(""),ne(!1)},iC=Ce=>{H(_.filter(Ge=>Ge!==Ce))},Zh=()=>sr?sr.filter(Ce=>_.includes(Ce.id)):[],Oy=()=>sr?sr.filter(Ce=>{var Ge;return!_.includes(Ce.id)&&(P===""||Ce.numeroCaso.toLowerCase().includes(P.toLowerCase())||((Ge=Ce.descripcion)==null?void 0:Ge.toLowerCase().includes(P.toLowerCase())))}):[],oC=async Ce=>{var lr,D;Ce.preventDefault();const Ge={title:s,content:c,jsonContent:i,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,associatedCases:_};u&&u.trim()&&(Ge.documentTypeId=u),S.length>0&&(Ge.tags=S);try{Y(!0),r?(await I.mutateAsync({id:e,data:Ge}),pt.current=JSON.stringify({title:s,jsonContent:i,textContent:c,documentTypeId:u,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S,associatedCases:_})):await Qe.mutateAsync(Ge)}catch(W){console.error("Error saving document:",W),Y(!1),(((lr=W==null?void 0:W.response)==null?void 0:lr.status)===401||(D=W==null?void 0:W.message)!=null&&D.includes("401"))&&(Re(Ge),ue("Tu sesin ha expirado. El documento se ha guardado localmente. Por favor, inicia sesin de nuevo y tus cambios se restaurarn automticamente."))}},lC=async()=>{var Ge,lr;if(!r||!e||I.isPending)return;if(!s.trim()){ue("El ttulo es requerido");return}const Ce={title:s,content:c,jsonContent:i,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,associatedCases:_};u&&u.trim()&&(Ce.documentTypeId=u),S.length>0&&(Ce.tags=S);try{await I.mutateAsync({id:e,data:Ce}),pt.current=JSON.stringify({title:s,jsonContent:i,textContent:c,documentTypeId:u,priority:f,difficultyLevel:p,isTemplate:y,isPublished:v,tags:S,associatedCases:_}),je(!1),Ve(new Date)}catch(D){console.error("Error saving document:",D),(((Ge=D==null?void 0:D.response)==null?void 0:Ge.status)===401||(lr=D==null?void 0:D.message)!=null&&lr.includes("401"))&&(Re(Ce),ue("Tu sesin ha expirado. El documento se ha guardado localmente. Por favor, inicia sesin de nuevo y tus cambios se restaurarn automticamente."))}};return r&&ie?o.jsx("div",{className:"flex items-center justify-center min-h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsxs("div",{ref:n,className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow",children:o.jsx("div",{className:"max-w-full mx-auto px-6 sm:px-8 lg:px-12",children:o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("button",{onClick:()=>t("/knowledge"),className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:[o.jsx(O,{action:"back",size:"sm",className:"mr-2"}),"Volver"]})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[r&&o.jsx("div",{className:"flex items-center space-x-2 text-sm",children:Be?o.jsxs("span",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):ye?o.jsxs("span",{className:"flex items-center text-green-600 dark:text-green-400",title:`ltimo autoguardado: ${ye.toLocaleTimeString()}`,children:[o.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Guardado"," ",ye.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}):Te?o.jsxs("span",{className:"flex items-center text-yellow-600 dark:text-yellow-400",title:"Hay cambios sin guardar. Se guardarn automticamente.",children:[o.jsxs("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor"})]}),"Cambios pendientes"]}):null}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ae,{variant:"secondary",onClick:()=>t("/knowledge"),children:"Cancelar"}),r&&o.jsx(ae,{variant:"secondary",type:"button",onClick:lC,disabled:I.isPending,className:"bg-green-50 text-green-700 border-green-300 hover:bg-green-100 dark:bg-green-900/20 dark:text-green-400 dark:border-green-700 dark:hover:bg-green-900/40",children:I.isPending?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"save",size:"sm",className:"mr-1"}),"Guardar"]})}),o.jsx(ae,{variant:"primary",type:"submit",form:"document-form",disabled:Qe.isPending||I.isPending,children:Qe.isPending||I.isPending?"Guardando...":r?"Guardar y salir":"Crear"})]})]})]})})}),o.jsx("div",{className:"max-w-full mx-auto px-6 sm:px-8 lg:px-12 py-6",children:o.jsxs("form",{id:"document-form",onSubmit:oC,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Informacin del Documento"})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx(ft,{label:"Ttulo del Documento *",type:"text",value:s,onChange:Ce=>a(Ce.target.value),placeholder:"Ingresa el ttulo del documento",required:!0}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs(Kt,{label:"Tipo de Documento",value:u,onChange:Ce=>h(Ce.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar tipo..."}),he==null?void 0:he.map(Ce=>o.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),o.jsxs(Kt,{label:"Prioridad",value:f,onChange:Ce=>m(Ce.target.value),children:[o.jsx("option",{value:"low",children:"Baja"}),o.jsx("option",{value:"medium",children:"Media"}),o.jsx("option",{value:"high",children:"Alta"}),o.jsx("option",{value:"urgent",children:"Urgente"})]})]}),o.jsx(Kt,{label:"Nivel de Dificultad (1-5)",value:p,onChange:Ce=>g(parseInt(Ce.target.value)),children:[1,2,3,4,5].map(Ce=>o.jsxs("option",{value:Ce,children:[Ce," - ","".repeat(Ce)]},Ce))}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:y,onChange:Ce=>b(Ce.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Es una plantilla"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:v,onChange:Ce=>w(Ce.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Publicar documento"})]})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"tag",size:"lg",color:"blue",className:"mr-2"}),"Etiquetas"]})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Agregar Etiquetas"}),be&&be.length>0&&!E&&o.jsxs("button",{type:"button",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm flex items-center",onClick:()=>J(!Q),children:[o.jsx(O,{action:"tag",size:"xs"}),"Ver ",be.length," etiquetas disponibles"]})]}),o.jsxs("div",{className:"relative tag-input-container",children:[o.jsx(ft,{type:"text",value:k,onChange:Ce=>{N(Ce.target.value),L(Ce.target.value.length>=2)},onKeyDown:Kh,onFocus:()=>T(!0),placeholder:"Escribe una etiqueta y presiona Enter"}),M&&k.length>=2&&Yt&&Yt.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:Yt.filter(Ce=>!S.includes(Ce.tagName)).slice(0,5).map(Ce=>o.jsxs("button",{type:"button",onClick:()=>{My(Ce.tagName),N(""),L(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 border-b border-gray-100 dark:border-gray-600 last:border-b-0",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Ce.color}}),o.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:Ce.tagName}),o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-auto",children:["(",Ce.usageCount," usos)"]})]},Ce.id))})]})]}),(E&&be&&be.length>0||be&&be.length>0&&S.length===0)&&o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Etiquetas Disponibles"}),o.jsx("button",{type:"button",onClick:()=>{T(!1),B(!0)},className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Ocultar"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{const Ce=be==null?void 0:be.filter(Ge=>!S.includes(Ge.tagName)).slice(0,12);return Ce==null?void 0:Ce.map(Ge=>o.jsxs("button",{type:"button",onClick:()=>My(Ge.tagName),className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors hover:shadow-sm",style:{backgroundColor:Ge.color+"20",color:Ge.color,border:`1px solid ${Ge.color}40`},children:[o.jsx(O,{action:"tag",size:"xs"}),Ge.tagName,o.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",Ge.usageCount,")"]})]},Ge.id))})()}),!bt&&be.length>12&&o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Mostrando las 12 etiquetas ms populares de"," ",be.length]})]}),S.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Etiquetas Seleccionadas"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(Ce=>{const Ge=be==null?void 0:be.find(D=>D.tagName===Ce),lr=(Ge==null?void 0:Ge.color)||"#6B7280";return o.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium transition-colors",style:{backgroundColor:lr+"20",color:lr,border:`1px solid ${lr}40`},children:[o.jsx(O,{action:"tag",size:"xs"}),Ce,(Ge==null?void 0:Ge.category)&&o.jsxs("span",{className:"text-xs opacity-70 ml-1",children:["(",Ge.category,")"]}),o.jsx("button",{type:"button",onClick:()=>sC(Ce),className:"ml-1 hover:opacity-80 transition-opacity",style:{color:lr},children:o.jsx(O,{action:"close",size:"xs"})})]},Ce)})})]})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[o.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[o.jsx(O,{action:"case",size:"lg",className:"mr-2"}),"Casos Asociados"]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Asocia este documento con casos especficos para mejor organizacin"})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Buscar y agregar casos"}),o.jsxs("div",{className:"relative",children:[o.jsx(ft,{type:"text",placeholder:"Buscar casos por ttulo o descripcin...",value:P,onChange:Ce=>{K(Ce.target.value),ne(Ce.target.value.length>0)},onFocus:()=>ne(P.length>0),className:"w-full"}),F&&P&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto",children:Oy().length>0?Oy().slice(0,10).map(Ce=>o.jsx("button",{type:"button",onClick:()=>aC(Ce.id),className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-600 last:border-b-0",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Ce.numeroCaso}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Ce.descripcion})]}),o.jsx("div",{className:"ml-2 flex flex-col items-end",children:(()=>{const Ge=zt(Ce);return o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:Ge.color},children:Ge.name})})()})]})},Ce.id)):o.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:"No se encontraron casos que coincidan con la bsqueda"})})]})]}),Zh().length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Casos Seleccionados (",Zh().length,")"]}),o.jsx("div",{className:"space-y-2",children:Zh().map(Ce=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Ce.numeroCaso}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Ce.descripcion}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:(()=>{const Ge=zt(Ce);return o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:Ge.color},children:Ge.name})})()})]}),o.jsx("button",{type:"button",onClick:()=>iC(Ce.id),className:"ml-3 p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Quitar caso",children:o.jsx(O,{action:"close",size:"sm"})})]},Ce.id))})]}),Zh().length===0&&o.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[o.jsx(O,{action:"case",size:"lg",className:"mx-auto mb-2 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No hay casos asociados"}),o.jsx("p",{className:"text-xs mt-1",children:"Busca y selecciona casos para asociar con este documento"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Contenido del Documento"}),!r&&o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"checkbox",checked:z,onChange:Ce=>_e(Ce.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-500 peer-checked:bg-blue-600"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:" Usar plantilla de documentacin"}),o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Estructura con las 4 preguntas del diagnstico"})]})]})]})}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"document-metadata mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-500",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Tipo:"})," ",((Yh=he==null?void 0:he.find(Ce=>Ce.id===u))==null?void 0:Yh.name)||"Sin especificar"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Dificultad:"})," ","".repeat(p)]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Estado:"})," ",v?"Publicado":"Borrador"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Plantilla:"})," ",y?"S":"No"]})]})}),o.jsx("div",{className:"document-main-content w-full max-w-none",children:o.jsx(vZ,{content:i,onChange:rC,onContentChange:nC,documentId:e,className:"w-full max-w-none"})}),r&&e&&o.jsx("div",{className:"mt-8 space-y-6",children:o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[o.jsx(O,{action:"attachment",size:"lg",className:"mr-2"}),"Archivos adjuntos"]}),o.jsxs(ae,{type:"button",variant:"secondary",size:"sm",onClick:()=>ee(!V),children:[V?"Ocultar":"Mostrar"," archivos"]})]}),V&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6",children:[o.jsx("h4",{className:"text-md font-medium text-gray-800 dark:text-gray-200 mb-4",children:"Subir nuevos archivos"}),o.jsx(LFe,{documentId:e,onUploadComplete:()=>{},maxFiles:10,maxFileSize:50*1024*1024})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-md font-medium text-gray-800 dark:text-gray-200 mb-4",children:"Archivos existentes"}),o.jsx(bZ,{documentId:e,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"})]})]})]})})]})]})]})})]})},FFe=()=>{var J,_,H;const{id:t}=kk(),e=Ri(),r=x.useRef(null),[n,s]=x.useState(!1),[a,i]=x.useState(!1),l=r$(),{success:c,error:d}=po(),u=ur(),{data:h,isLoading:f,error:m,refetch:p}=pz(t||""),g=A1e(),y=M1e(),b=R1e(),{data:v}=P1e(t||""),{data:w}=up();st.useEffect(()=>{t&&(u.invalidateQueries({queryKey:Ar.document(t)}),p())},[t,p,u]),x.useEffect(()=>{const P=r.current;if(!P)return;let K=0;const F=3e3,ne=()=>{const Z=Date.now();Z-K>=F&&(K=Z,ct.notifyActivity())},z=["mousedown","mousemove","keydown","scroll","touchstart","click"];return z.forEach(Z=>{P.addEventListener(Z,ne,{capture:!0,passive:!0})}),()=>{z.forEach(Z=>{P.removeEventListener(Z,ne,{capture:!0})})}},[r.current]);const k=P=>new Date(P).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=P=>P.isArchived?{text:"Archivado",color:"bg-gray-100 text-gray-800"}:P.isDeprecated?{text:"Obsoleto",color:"bg-red-100 text-red-800"}:P.isPublished?{text:"Publicado",color:"bg-green-100 text-green-800"}:{text:"Borrador",color:"bg-yellow-100 text-yellow-800"},S=()=>!(h!=null&&h.associatedCases)||!w?[]:w.filter(K=>{var F;return(F=h.associatedCases)==null?void 0:F.includes(K.id)}),C=()=>{},E=()=>{i(!0)},T=()=>{h&&g.mutate({id:h.id,isArchived:!0,reason:"Archivado por el usuario"},{onSuccess:()=>{c("Documento archivado exitosamente")},onError:P=>{d(`Error al archivar documento: ${P.message}`)}})},R=()=>{s(!0)},B=()=>{h&&y.mutate(h.id,{onSuccess:()=>{c("Documento eliminado exitosamente"),e("/knowledge")},onError:P=>{d(`Error al eliminar documento: ${P.message}`)}})},M=()=>{h&&g.mutate({id:h.id,isArchived:!1,reason:"Documento restaurado"},{onSuccess:()=>{c("Documento restaurado exitosamente")},onError:P=>{d(`Error al restaurar documento: ${P.message}`)}})},L=P=>{if(v!=null&&v.hasFeedback){d("Ya has proporcionado feedback para este documento. Solo se permite un feedback por documento.");return}if(h){const K={documentId:h.id,isHelpful:P};b.mutate(K,{onSuccess:()=>{c("Feedback enviado exitosamente"),u.invalidateQueries({queryKey:["feedback","check",h.id]})},onError:F=>{var ne,z,Z,oe;((ne=F.response)==null?void 0:ne.status)===400&&((oe=(Z=(z=F.response)==null?void 0:z.data)==null?void 0:Z.message)!=null&&oe.includes("Ya has proporcionado feedback"))?d("Ya has proporcionado feedback para este documento. Solo se permite un feedback por documento."):d(`Error al enviar feedback: ${F.message||"Error desconocido"}`)}})}},V=()=>{var P;h&&e("/knowledge/new",{state:{template:{title:`Copia de ${h.title}`,content:h.content,jsonContent:h.jsonContent,documentTypeId:h.documentTypeId,priority:h.priority,difficultyLevel:h.difficultyLevel,tags:((P=h.tags)==null?void 0:P.map(K=>K.tagName))||[]}}})},ee=P=>{var z,Z;const K=P.__documentType__||P.documentType,F=P.__createdByUser__||P.createdByUser,ne=P.associatedCases&&w?w.filter(oe=>P.associatedCases.includes(oe.id)).map(oe=>oe.numeroCaso):void 0;return{id:P.id,title:P.title||"Documento Sin Ttulo",content:P.jsonContent||[],document_type:K?{name:K.name,code:K.code||K.name.toLowerCase()}:void 0,priority:P.priority,difficulty_level:P.difficultyLevel,is_published:P.isPublished,view_count:P.viewCount,version:P.version||1,associated_cases:ne,tags:((z=P.tags)==null?void 0:z.map(oe=>({id:oe.id||`tag-${Math.random()}`,tag_name:oe.tagName||oe.name||oe.tag_name,color:oe.color||"#6B7280"})))||[],attachments:((Z=P.attachments)==null?void 0:Z.map(oe=>({id:oe.id,file_name:oe.fileName||oe.file_name||oe.name,file_path:oe.filePath||oe.file_path||oe.path,file_type:oe.fileType||oe.file_type||"document",mime_type:oe.mimeType||oe.mime_type||"application/octet-stream",file_size:oe.fileSize||oe.file_size||oe.size||0,is_embedded:oe.isEmbedded||oe.is_embedded||!1,created_at:oe.createdAt||oe.created_at||new Date().toISOString()})))||[],created_at:P.createdAt,updated_at:P.updatedAt,createdByUser:F?{fullName:F.fullName,email:F.email}:void 0}};if(f)return o.jsx("div",{className:"flex items-center justify-center min-h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(m||!h)return o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-red-600 mb-4",children:m?`Error: ${m.message}`:"Documento no encontrado"}),o.jsxs(cs,{to:"/knowledge",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(O,{action:"back",size:"sm",color:"gray"}),"Volver a Base de Conocimiento"]})]})});const Q=N(h);return o.jsxs("div",{ref:r,className:"max-w-full mx-auto px-6 sm:px-8 lg:px-12 py-6",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:()=>e("/knowledge"),className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",children:o.jsx(O,{action:"back",size:"sm",color:"gray"})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(O,{action:"view",size:"sm",color:"gray"}),h.viewCount," visualizaciones"]}),o.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-200 pl-4 ml-4",children:[o.jsx("button",{onClick:C,className:"p-2 text-gray-400 hover:text-yellow-500 rounded-md hover:bg-gray-100",title:"Agregar a favoritos",children:o.jsx(O,{action:"favorite",size:"sm",color:"yellow"})}),l.canDuplicateKnowledge&&o.jsx("button",{onClick:V,className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100",title:"Duplicar documento",children:o.jsx(O,{action:"duplicate",size:"sm",color:"gray"})}),l.canExportKnowledge&&o.jsx("button",{onClick:()=>{const P=ee(h);Nt(async()=>{const{downloadPDF:K}=await import("./pdfExportService-DGf-2FRl.js");return{downloadPDF:K}},[]).then(({downloadPDF:K})=>{K(P,{fileName:`${h.title||"documento"}.pdf`})})},className:"p-2 text-gray-400 hover:text-red-600 rounded-md hover:bg-gray-100",title:"Exportar a PDF",children:o.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.canEditKnowledge&&o.jsx(cs,{to:`/knowledge/${h.id}/edit`,className:"p-2 text-gray-400 hover:text-blue-600 rounded-md hover:bg-gray-100",title:"Editar documento",children:o.jsx(O,{action:"edit",size:"sm",color:"blue"})}),l.canArchiveKnowledge&&(h.isArchived?o.jsx("button",{onClick:M,className:"p-2 text-gray-400 hover:text-green-600 rounded-md hover:bg-gray-100",title:"Restaurar documento",children:o.jsx(O,{action:"archive",size:"sm",color:"green"})}):o.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-orange-600 rounded-md hover:bg-gray-100",title:"Archivar documento",children:o.jsx(O,{action:"archive",size:"sm",color:"orange"})})),l.canDeleteKnowledge&&o.jsx("button",{onClick:R,className:"p-2 text-gray-400 hover:text-red-600 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20",title:"Eliminar documento permanentemente",children:o.jsx(O,{action:"delete",size:"sm",color:"red"})})]})]})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex-1 mr-4",children:h.title}),o.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${Q.color}`,children:Q.text})]})}),o.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-600",children:[h.__documentType__&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"folder",size:"sm",color:"gray"}),h.__documentType__.name]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"user",size:"sm",color:"gray"}),"Creado por"," ",((J=h.__createdByUser__)==null?void 0:J.fullName)||((_=h.__createdByUser__)==null?void 0:_.email)||"Usuario desconocido"]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"time",size:"sm",color:"gray"}),"Actualizado ",k(h.updatedAt)]}),h.tags&&h.tags.length>0&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"tag",size:"sm",color:"gray"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:h.tags.map((P,K)=>o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:P.color||"#6b7280"},children:P.tagName},K))})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Prioridad:"}),o.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${h.priority==="urgent"?"bg-red-100 text-red-800":h.priority==="high"?"bg-orange-100 text-orange-800":h.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.priority==="urgent"?"Urgente":h.priority==="high"?"Alta":h.priority==="medium"?"Media":"Baja"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Dificultad:"}),o.jsx("span",{className:"ml-2",children:"".repeat(h.difficultyLevel)})]}),h.associatedCases&&h.associatedCases.length>0&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"font-medium",children:"Casos Asociados:"}),o.jsx("div",{className:"ml-2 flex flex-wrap gap-1",children:(()=>{const P=S();return P.length>0?P.map((K,F)=>o.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",title:`${K.numeroCaso}: ${K.descripcion}`,children:K.numeroCaso},F)):o.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:[h.associatedCases.length," caso",h.associatedCases.length!==1?"s":""," ","(cargando...)"]})})()})]}),h.isTemplate&&o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Plantilla"})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Versin ",h.version]})]})}),o.jsx("div",{className:"p-6",children:h.jsonContent&&Array.isArray(h.jsonContent)&&h.jsonContent.length>0?o.jsx("div",{className:"w-full max-w-none",children:o.jsx(vZ,{content:h.jsonContent,editable:!1,className:"prose prose-lg max-w-none w-full"})}):h.content?o.jsx("div",{className:"prose prose-lg max-w-none",children:o.jsx("p",{children:h.content})}):o.jsx("div",{className:"text-gray-500 text-center py-8",children:"Este documento no tiene contenido."})})]}),o.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Te result til este documento?"}),o.jsx("div",{className:"flex items-center space-x-4 mb-4",children:v!=null&&v.hasFeedback?o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded-md",children:(H=v.feedback)!=null&&H.isHelpful?o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"thumbUp",size:"sm",color:"green"}),"Tu feedback: til"]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{action:"thumbDown",size:"sm",color:"red"}),"Tu feedback: No til"]})}),o.jsx("span",{className:"text-sm text-gray-500",children:"Ya has proporcionado feedback para este documento"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>L(!0),disabled:b.isPending,className:"flex items-center px-4 py-2 text-sm font-medium text-green-700 bg-green-100 rounded-md hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(O,{action:"thumbUp",size:"sm",color:"gray"}),"S, til (",h.helpfulCount,")"]}),o.jsxs("button",{onClick:()=>L(!1),disabled:b.isPending,className:"flex items-center px-4 py-2 text-sm font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(O,{action:"thumbDown",size:"sm",color:"gray"}),"No, no til (",h.notHelpfulCount,")"]})]})}),o.jsx("div",{className:"text-sm text-gray-600",children:h.helpfulCount+h.notHelpfulCount>0&&o.jsxs("p",{children:[Math.round(h.helpfulCount/(h.helpfulCount+h.notHelpfulCount)*100),"% de las personas encontraron este documento til"]})})]}),t&&o.jsx("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(O,{action:"attachment",size:"sm",color:"gray"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Archivos adjuntos"})]}),o.jsx(bZ,{documentId:t,className:"",readOnly:!0})]})}),o.jsx(Ha,{isOpen:n,onClose:()=>s(!1),onConfirm:B,title:"Eliminar Documento",message:"Ests seguro de que quieres ELIMINAR PERMANENTEMENTE este documento? Esta accin no se puede deshacer. Si solo quieres ocultarlo temporalmente, considera usar la opcin 'Archivar' en su lugar.",confirmText:"Eliminar Permanentemente",cancelText:"Cancelar",type:"danger"}),o.jsx(Ha,{isOpen:a,onClose:()=>i(!1),onConfirm:T,title:"Archivar Documento",message:"Ests seguro de que quieres archivar este documento? El documento ser movido al archivo y no aparecer en las bsquedas, pero podrs restaurarlo ms tarde.",confirmText:"Archivar",cancelText:"Cancelar",type:"danger"})]})};class Fl{constructor(){ve(this,"baseUrl","/api/system")}async makeRequest(e,r={}){try{const n=`${this.baseUrl}${e}`,s=ct.getValidTokens();if(!s&&!e.includes("/version"))throw new Error("No hay tokens vlidos disponibles");const a=new Headers({"Content-Type":"application/json"});r.headers&&new Headers(r.headers).forEach((c,d)=>{a.set(d,c)}),s&&!e.includes("/version")&&a.set("Authorization",`Bearer ${s.token}`);const i=await fetch(n,{...r,headers:a});if(!i.ok){const l=await i.json().catch(()=>({}));throw new Error(l.error||`HTTP error! status: ${i.status}`)}return await i.json()}catch(n){throw console.error(`Error en SystemInfoService ${e}:`,n),n}}async getSystemInfo(){return this.makeRequest("/info")}async getVersion(){return this.makeRequest("/version")}async getModules(){return this.makeRequest("/modules")}async getChangelog(){return this.makeRequest("/changelog")}async getStats(){return this.makeRequest("/stats")}static formatUptime(e){const r=Math.floor(e/86400),n=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60),i=[];return r>0&&i.push(`${r}d`),n>0&&i.push(`${n}h`),s>0&&i.push(`${s}m`),(a>0||i.length===0)&&i.push(`${a}s`),i.join(" ")}static getModuleStatusColor(e){switch(e){case"active":return"text-green-600 bg-green-50";case"maintenance":return"text-yellow-600 bg-yellow-50";case"deprecated":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}}static getModuleStatusText(e){switch(e){case"active":return"Activo";case"maintenance":return"Mantenimiento";case"deprecated":return"Obsoleto";default:return"Desconocido"}}}const W7=new Fl,BFe=({label:t,icon:e,active:r,onClick:n})=>o.jsxs("button",{onClick:n,className:`flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors ${r?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[o.jsx(e,{className:"w-5 h-5 mr-2"}),t]}),zFe=({module:t,onShowDetails:e})=>{const r=Fl.getModuleStatusColor(t.status),n=Fl.getModuleStatusText(t.status);return o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.description})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["v",t.version]}),o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r}`,children:n})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Caractersticas"}),o.jsxs("ul",{className:"space-y-1",children:[t.features.slice(0,5).map((s,a)=>o.jsxs("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-start",children:[o.jsx(O,{action:"verified",size:"sm",variant:"success",className:"mr-2 mt-0.5 flex-shrink-0"}),s]},a)),t.features.length>5&&o.jsx("li",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:o.jsxs("button",{onClick:()=>e(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline",children:["+",t.features.length-5," caractersticas ms..."]})})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Endpoints (",t.endpoints.length,")"]}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.endpoints.slice(0,3).map((s,a)=>o.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded font-mono",children:s},a)),t.endpoints.length>3&&o.jsxs("button",{onClick:()=>e(t),className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors",children:["+",t.endpoints.length-3," ms"]})]})]})]})]})},UFe=({content:t})=>{const e=r=>r.split(`
`).map((n,s)=>{if(n.startsWith("# "))return o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-8 mb-6 border-b border-gray-200 dark:border-gray-700 pb-2",children:n.slice(2)},s);if(n.startsWith("## "))return o.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mt-8 mb-4 border-l-4 border-blue-500 pl-4",children:n.slice(3)},s);if(n.startsWith("### "))return o.jsx("h3",{className:"text-xl font-medium text-gray-700 dark:text-gray-300 mt-6 mb-3",children:n.slice(4)},s);if(n.startsWith("#### "))return o.jsx("h4",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mt-4 mb-2",children:n.slice(5)},s);if(n.startsWith("- ")){const l=n.slice(2).replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold text-gray-900 dark:text-white">$1</strong>');return o.jsxs("div",{className:"flex items-start mb-2",children:[o.jsx("span",{className:"text-blue-500 mr-3 mt-1",children:""}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",dangerouslySetInnerHTML:{__html:l}})]},s)}const a=n.replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold text-gray-900 dark:text-white">$1</strong>');return n.trim()===""?o.jsx("div",{className:"h-4"},s):o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 leading-relaxed",dangerouslySetInnerHTML:{__html:a}},s)});return o.jsx("div",{className:"prose prose-sm max-w-none space-y-2",children:e(t)})},VFe=({module:t,isOpen:e,onClose:r})=>{if(!t)return null;const n=Fl.getModuleStatusColor(t.status),s=Fl.getModuleStatusText(t.status);return o.jsx(At,{isOpen:e,onClose:r,title:t.name,size:"lg",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t.description})}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["v",t.version]}),o.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${n}`,children:s})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Caractersticas (",t.features.length,")"]}),o.jsx("div",{className:"grid gap-2",children:t.features.map((a,i)=>o.jsxs("div",{className:"flex items-start p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[o.jsx(O,{action:"verified",size:"sm",variant:"success",className:"mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:a})]},i))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Endpoints (",t.endpoints.length,")"]}),o.jsx("div",{className:"grid gap-2",children:t.endpoints.map((a,i)=>o.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:o.jsx("code",{className:"text-sm text-gray-700 dark:text-gray-300 font-mono",children:a})},i))})]})]})})},HFe=()=>{const[t,e]=x.useState("overview"),[r,n]=x.useState(null),[s,a]=x.useState(null),[i,l]=x.useState(!0),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,m]=x.useState(!1);x.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0),d(null);const[v,w]=await Promise.allSettled([W7.getSystemInfo(),W7.getChangelog()]);v.status==="fulfilled"&&v.value.success?n(v.value.data||null):console.error("Error loading system info:",v),w.status==="fulfilled"&&w.value.success?a(w.value.data||null):console.error("Error loading changelog:",w)}catch(v){console.error("Error loading system data:",v),d("Error al cargar la informacin del sistema"),Bn.error("Error al cargar la informacin del sistema")}finally{l(!1)}},g=v=>{h(v),m(!0)},y=()=>{m(!1),h(null)},b=[{id:"overview",label:"Informacin General",icon:({className:v})=>o.jsx(O,{action:"info",size:"md",className:v})},{id:"modules",label:"Mdulos",icon:({className:v})=>o.jsx(O,{action:"modules",size:"md",className:v})},{id:"stats",label:"Estadsticas",icon:({className:v})=>o.jsx(O,{action:"dashboard",size:"md",className:v})},{id:"changelog",label:"Changelog",icon:({className:v})=>o.jsx(O,{action:"changelog",size:"md",className:v})}];return i?o.jsxs("div",{className:"flex items-center justify-center h-64",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),o.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Cargando informacin del sistema..."})]}):c?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx(O,{action:"error",size:"xl",className:"mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c}),o.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Reintentar"})]})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.name)||"Sistema de Gestin de Casos"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:(r==null?void 0:r.description)||"Informacin del sistema"})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["v",(r==null?void 0:r.version)||"1.0.0"]}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(r==null?void 0:r.environment)||"production"})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[o.jsx("div",{className:"flex space-x-2 mb-6",children:b.map(v=>o.jsx(BFe,{...v,active:t===v.id,onClick:()=>e(v.id)},v.id))}),o.jsxs("div",{className:"min-h-96",children:[t==="overview"&&r&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"modules",size:"lg",variant:"blue"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:r.stats.activeModules}),o.jsx("p",{className:"text-blue-600",children:"Mdulos Activos"})]})]})}),o.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"dashboard",size:"lg",variant:"green"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-2xl font-bold text-green-900",children:r.stats.totalEndpoints}),o.jsx("p",{className:"text-green-600",children:"Endpoints API"})]})]})}),o.jsx("div",{className:"bg-purple-50 p-6 rounded-lg",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(O,{action:"time",size:"lg",variant:"purple"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Fl.formatUptime(r.stats.uptime)}),o.jsx("p",{className:"text-purple-600",children:"Tiempo Activo"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informacin del Sistema"}),o.jsxs("dl",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Versin"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:r.version})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Entorno"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white capitalize",children:r.environment})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Fecha de Build"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:new Date(r.buildDate).toLocaleString()})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Estadsticas Generales"}),o.jsxs("dl",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total de Mdulos"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:r.stats.totalModules})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Mdulos Activos"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:r.stats.activeModules})]}),o.jsxs("div",{children:[o.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Endpoints"}),o.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:r.stats.totalEndpoints})]})]})]})]})]}),t==="modules"&&r&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Mdulos del Sistema (",r.modules.length,")"]}),o.jsx("div",{className:"flex items-center space-x-4 text-sm",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Activos (",r.stats.activeModules,")"]})]})})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.modules.map((v,w)=>o.jsx(zFe,{module:v,onShowDetails:g},w))})]}),t==="stats"&&r&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Estadsticas Detalladas"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-blue-100",children:"Total Mdulos"}),o.jsx("p",{className:"text-3xl font-bold",children:r.stats.totalModules})]}),o.jsx(O,{action:"modules",size:"xl",className:"text-blue-200"})]})}),o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-green-100",children:"Mdulos Activos"}),o.jsx("p",{className:"text-3xl font-bold",children:r.stats.activeModules})]}),o.jsx(O,{action:"verified",size:"xl",className:"text-green-200"})]})}),o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-lg text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-purple-100",children:"Total Endpoints"}),o.jsx("p",{className:"text-3xl font-bold",children:r.stats.totalEndpoints})]}),o.jsx(O,{action:"dashboard",size:"xl",className:"text-purple-200"})]})}),o.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-6 rounded-lg text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-orange-100",children:"Tiempo Activo"}),o.jsx("p",{className:"text-lg font-bold",children:Fl.formatUptime(r.stats.uptime)})]}),o.jsx(O,{action:"time",size:"xl",className:"text-orange-200"})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[o.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Distribucin de Endpoints por Mdulo"}),o.jsx("div",{className:"space-y-3",children:r.modules.sort((v,w)=>w.endpoints.length-v.endpoints.length).map((v,w)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${Fl.getModuleStatusColor(v.status).includes("green")?"bg-green-500":Fl.getModuleStatusColor(v.status).includes("yellow")?"bg-yellow-500":"bg-red-500"}`}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.name})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-2 rounded-full",style:{width:`${v.endpoints.length/Math.max(...r.modules.map(k=>k.endpoints.length))*100}%`}})}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-8 text-right",children:v.endpoints.length})]})]},w))})]})]}),t==="changelog"&&s&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Registro de Cambios"}),o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ltima actualizacin:"," ",new Date(s.lastUpdate).toLocaleString()]})]}),o.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-8 h-[32rem] overflow-y-auto",children:o.jsx(UFe,{content:s.changelog})})]})]})]}),o.jsx(VFe,{module:u,isOpen:f,onClose:y})]})},wZ=()=>{const{user:t,isAuthenticated:e,logout:r,login:n,initializeFromSecurityService:s}=io();x.useEffect(()=>{(async()=>{try{await s()}catch(p){console.warn(" Error inicializando autenticacin:",p)}})()},[s]);const a=x.useCallback(()=>{const m=ct.hasValidSession();return e&&!m?(r(),!1):!e&&m?!0:m},[e,r]),i=x.useCallback(()=>ct.getSessionInfo(),[]),l=x.useCallback(()=>{ct.clearSession(),r()},[r]),c=x.useCallback(async(m,p)=>{try{return await n(m,p),!0}catch(g){return console.error("Error en login seguro:",g),!1}},[n]),d=x.useCallback(()=>{const m=i();if(!m)return!1;const p=Date.now()-m.lastActivity.getTime(),g=5*60*1e3;return p<g},[i]),u=x.useCallback(()=>ct.getTimeUntilInactivityTimeout(),[]),h=x.useCallback(()=>{const m=u();if(m===0)return"Expirada";const p=Math.floor(m/6e4),g=Math.floor(m%6e4/1e3);return`${p}:${g.toString().padStart(2,"0")}`},[u]);x.useEffect(()=>{a()},[a]),x.useEffect(()=>{const m=()=>{console.log(" USEAUTH: Callback onSessionExpired ejecutado - haciendo logout"),r()},p=g=>{};return ct.onSessionExpire(m),ct.onTokenRefresh(p),()=>{}},[r]),x.useEffect(()=>{if(!e)return;const m=setInterval(()=>{a()},5e3);return()=>clearInterval(m)},[e,a]);const f=x.useCallback(()=>ct.extendSession(),[]);return{user:t,isAuthenticated:e&&ct.hasValidSession(),login:c,logout:l,extendSession:f,sessionInfo:i(),hasRecentActivity:d(),sessionTimeRemaining:u(),sessionTimeRemainingFormatted:h(),checkSessionValidity:a,isSessionValid:ct.hasValidSession()}},WFe=({warningThreshold:t=3,className:e=""})=>{const{isAuthenticated:r,logout:n,extendSession:s}=wZ(),[a,i]=x.useState(!1),[l,c]=x.useState(""),d=h=>{if(h<=0)return"Expirada";const f=Math.floor(h/6e4),m=Math.floor(h%6e4/1e3);return`${f}:${m.toString().padStart(2,"0")}`};x.useEffect(()=>{if(!r){i(!1),c("");return}const h=()=>{const m=ct.getTimeUntilInactivityTimeout();if(c(d(m)),m<=0){i(!1);return}const p=m/(60*1e3),g=p<=t&&p>0;i(g)};h();const f=setInterval(h,1e3);return()=>clearInterval(f)},[r,t]);const u=()=>{s()?i(!1):n()};return r&&a?o.jsx("div",{className:`fixed top-4 right-4 z-50 ${e}`,children:o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg shadow-lg p-4 max-w-sm",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(O,{action:"time",size:"md",color:"yellow"})}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:" Sesin por Expirar"}),o.jsxs("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:[o.jsxs("p",{children:["Tu sesin expira en ",l]}),o.jsx("p",{className:"mt-1 text-xs",children:"Deseas continuar trabajando?"})]}),o.jsxs("div",{className:"mt-3 flex space-x-2",children:[o.jsx("button",{onClick:u,className:"text-xs bg-yellow-600 hover:bg-yellow-700 text-white font-medium px-3 py-1 rounded transition-colors",children:"Continuar"}),o.jsx("button",{onClick:()=>i(!1),className:"text-xs text-yellow-700 dark:text-yellow-300 hover:text-yellow-900 dark:hover:text-yellow-100 font-medium transition-colors",children:"Cerrar"})]})]})]})})}):null};class qFe extends x.Component{constructor(r){super(r);ve(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0})});ve(this,"handleRefresh",()=>{window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){var s,a;console.error(" ErrorBoundary caught an error:",r,n),(a=(s=this.props).onError)==null||a.call(s,r,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:o.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[o.jsx("div",{className:"mb-4",children:o.jsx(O,{action:"error",size:"lg",color:"red"})}),o.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Oops! Algo sali mal"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Ha ocurrido un error inesperado en la aplicacin. Puedes intentar recargar la pgina o contactar al soporte tcnico."}),!1,o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200",children:"Intentar nuevamente"}),o.jsx("button",{onClick:this.handleRefresh,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors duration-200",children:"Recargar pgina"}),o.jsx("button",{onClick:()=>window.history.back(),className:"w-full text-gray-600 py-2 px-4 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200",children:"Ir atrs"})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["ID del error: ",Date.now().toString(36)]})]})}):this.props.children}}function GFe(){return wZ(),o.jsx(qFe,{children:o.jsx(z9,{children:o.jsx(Eee,{children:o.jsxs(Lne,{children:[o.jsxs(KJ,{children:[o.jsx(Ut,{path:"/login",element:o.jsx(Xne,{})}),o.jsx(Ut,{path:"/register",element:o.jsx(Jne,{})}),o.jsx(Ut,{path:"/force-logout",element:o.jsx(Qne,{})}),o.jsx(Ut,{path:"/unauthorized",element:o.jsx(mxe,{})}),o.jsx(Ut,{path:"/",element:o.jsx(ir,{requiredPermission:"dashboard.view.own",children:o.jsx(ar,{children:o.jsx(Yne,{})})})}),o.jsx(Ut,{path:"/dashboard",element:o.jsx(ir,{requiredPermission:"dashboard.view.own",children:o.jsx(ar,{children:o.jsx(ase,{})})})}),o.jsx(Ut,{path:"/cases",element:o.jsx(ir,{requiredModule:"casos",children:o.jsx(ar,{children:o.jsx(fhe,{})})})}),o.jsx(Ut,{path:"/cases/new",element:o.jsx(ir,{requiredPermission:"cases.create.own",children:o.jsx(ar,{children:o.jsx(OO,{})})})}),o.jsx(Ut,{path:"/cases/edit/:id",element:o.jsx(ir,{requiredPermission:"cases.edit.own",children:o.jsx(ar,{children:o.jsx(OO,{})})})}),o.jsx(Ut,{path:"/cases/view/:id",element:o.jsx(ir,{requiredPermission:"cases.view.own",children:o.jsx(ar,{children:o.jsx(vfe,{})})})}),o.jsx(Ut,{path:"/case-control",element:o.jsx(ir,{requiredModule:"casos",children:o.jsx(ar,{children:o.jsx(Npe,{})})})}),o.jsx(Ut,{path:"/notes",element:o.jsx(ir,{requiredModule:"notas",children:o.jsx(ar,{children:o.jsx(q0e,{})})})}),o.jsx(Ut,{path:"/todos",element:o.jsx(ir,{requiredModule:"todos",children:o.jsx(ar,{children:o.jsx(fxe,{})})})}),o.jsx(Ut,{path:"/todos-basic",element:o.jsx(ir,{requiredModule:"todos",children:o.jsx(ar,{children:o.jsx(dxe,{})})})}),o.jsx(Ut,{path:"/dispositions",element:o.jsx(ir,{requiredModule:"disposiciones",children:o.jsx(ar,{children:o.jsx(b0e,{})})})}),o.jsx(Ut,{path:"/archive",element:o.jsx(ir,{requiredPermission:"archive.view.own",children:o.jsx(ar,{children:o.jsx(ige,{})})})}),o.jsx(Ut,{path:"/knowledge",element:o.jsx(ir,{requiredPermissions:["knowledge.read.own","knowledge.read.team","knowledge.read.all"],children:o.jsx(ar,{children:o.jsx(z1e,{})})})}),o.jsx(Ut,{path:"/knowledge/new",element:o.jsx(ir,{requiredPermissions:["knowledge.create.own","knowledge.create.team","knowledge.create.all"],children:o.jsx(ar,{children:o.jsx(H7,{})})})}),o.jsx(Ut,{path:"/knowledge/:id",element:o.jsx(ir,{requiredPermissions:["knowledge.read.own","knowledge.read.team","knowledge.read.all"],children:o.jsx(ar,{children:o.jsx(FFe,{})})})}),o.jsx(Ut,{path:"/knowledge/:id/edit",element:o.jsx(ir,{requiredPermissions:["knowledge.update.own","knowledge.update.team","knowledge.update.all"],children:o.jsx(ar,{children:o.jsx(H7,{})})})}),o.jsx(Ut,{path:"/teams",element:o.jsx(ir,{requiredPermission:"teams.view.all",children:o.jsx(ar,{children:o.jsx(gge,{})})})}),o.jsx(Ut,{path:"/users",element:o.jsx(ir,{requiredPermission:"users.view.all",children:o.jsx(ar,{children:o.jsx(E0e,{})})})}),o.jsx(Ut,{path:"/roles",element:o.jsx(ir,{requiredPermission:"roles.view.all",children:o.jsx(ar,{children:o.jsx(O0e,{})})})}),o.jsx(Ut,{path:"/permissions",element:o.jsx(ir,{requiredPermission:"permissions.read.all",children:o.jsx(ar,{children:o.jsx(oxe,{})})})}),o.jsx(Ut,{path:"/permissions/role-assignment",element:o.jsx(ir,{requiredPermission:"permissions.assign.all",children:o.jsx(ar,{children:o.jsx(xge,{})})})}),o.jsx(Ut,{path:"/permissions/guide",element:o.jsx(ir,{children:o.jsx(ar,{children:o.jsx(Sge,{})})})}),o.jsx(Ut,{path:"/admin/origins",element:o.jsx(ir,{adminOnly:!0,children:o.jsx(ar,{children:o.jsx(gxe,{})})})}),o.jsx(Ut,{path:"/admin/applications",element:o.jsx(ir,{adminOnly:!0,children:o.jsx(ar,{children:o.jsx(yxe,{})})})}),o.jsx(Ut,{path:"/admin/case-statuses",element:o.jsx(ir,{adminOnly:!0,children:o.jsx(ar,{children:o.jsx(bxe,{})})})}),o.jsx(Ut,{path:"/admin/tags",element:o.jsx(ir,{requiredPermission:"tags.manage.all",children:o.jsx(ar,{children:o.jsx(Exe,{})})})}),o.jsx(Ut,{path:"/admin/document-types",element:o.jsx(ir,{requiredPermission:"knowledge_types.read.all",children:o.jsx(ar,{children:o.jsx(u1e,{})})})}),o.jsx(Ut,{path:"/admin/todo-priorities",element:o.jsx(ir,{requiredPermission:"todos.create.all",children:o.jsx(ar,{children:o.jsx(v1e,{})})})}),o.jsx(Ut,{path:"/admin/audit",element:o.jsx(ir,{requiredPermission:"audit.view.all",children:o.jsx(ar,{children:o.jsx(N1e,{})})})}),o.jsx(Ut,{path:"/system/status",element:o.jsx(ir,{requiredPermission:"dashboard.view.all",children:o.jsx(ar,{children:o.jsx(P0e,{})})})}),o.jsx(Ut,{path:"/system/info",element:o.jsx(ir,{children:o.jsx(ar,{children:o.jsx(HFe,{})})})})]}),o.jsx(WFe,{})]})})})})}var kZ={},tC={};tC.byteLength=YFe;tC.toByteArray=JFe;tC.fromByteArray=tBe;var Lo=[],li=[],KFe=typeof Uint8Array<"u"?Uint8Array:Array,DS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pf=0,ZFe=DS.length;pf<ZFe;++pf)Lo[pf]=DS[pf],li[DS.charCodeAt(pf)]=pf;li[45]=62;li[95]=63;function CZ(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function YFe(t){var e=CZ(t),r=e[0],n=e[1];return(r+n)*3/4-n}function XFe(t,e,r){return(e+r)*3/4-r}function JFe(t){var e,r=CZ(t),n=r[0],s=r[1],a=new KFe(XFe(t,n,s)),i=0,l=s>0?n-4:n,c;for(c=0;c<l;c+=4)e=li[t.charCodeAt(c)]<<18|li[t.charCodeAt(c+1)]<<12|li[t.charCodeAt(c+2)]<<6|li[t.charCodeAt(c+3)],a[i++]=e>>16&255,a[i++]=e>>8&255,a[i++]=e&255;return s===2&&(e=li[t.charCodeAt(c)]<<2|li[t.charCodeAt(c+1)]>>4,a[i++]=e&255),s===1&&(e=li[t.charCodeAt(c)]<<10|li[t.charCodeAt(c+1)]<<4|li[t.charCodeAt(c+2)]>>2,a[i++]=e>>8&255,a[i++]=e&255),a}function QFe(t){return Lo[t>>18&63]+Lo[t>>12&63]+Lo[t>>6&63]+Lo[t&63]}function eBe(t,e,r){for(var n,s=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),s.push(QFe(n));return s.join("")}function tBe(t){for(var e,r=t.length,n=r%3,s=[],a=16383,i=0,l=r-n;i<l;i+=a)s.push(eBe(t,i,i+a>l?l:i+a));return n===1?(e=t[r-1],s.push(Lo[e>>2]+Lo[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(Lo[e>>10]+Lo[e>>4&63]+Lo[e<<2&63]+"=")),s.join("")}var MA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */MA.read=function(t,e,r,n,s){var a,i,l=s*8-n-1,c=(1<<l)-1,d=c>>1,u=-7,h=r?s-1:0,f=r?-1:1,m=t[e+h];for(h+=f,a=m&(1<<-u)-1,m>>=-u,u+=l;u>0;a=a*256+t[e+h],h+=f,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=n;u>0;i=i*256+t[e+h],h+=f,u-=8);if(a===0)a=1-d;else{if(a===c)return i?NaN:(m?-1:1)*(1/0);i=i+Math.pow(2,n),a=a-d}return(m?-1:1)*i*Math.pow(2,a-n)};MA.write=function(t,e,r,n,s,a){var i,l,c,d=a*8-s-1,u=(1<<d)-1,h=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,p=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,i=u):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),i+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(i++,c/=2),i+h>=u?(l=0,i=u):i+h>=1?(l=(e*c-1)*Math.pow(2,s),i=i+h):(l=e*Math.pow(2,h-1)*Math.pow(2,s),i=0));s>=8;t[r+m]=l&255,m+=p,l/=256,s-=8);for(i=i<<s|l,d+=s;d>0;t[r+m]=i&255,m+=p,i/=256,d-=8);t[r+m-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=tC,r=MA,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const I=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(I,j),I.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function i(I){if(I>s)throw new RangeError('The value "'+I+'" is invalid for option "size"');const j=new Uint8Array(I);return Object.setPrototypeOf(j,l.prototype),j}function l(I,j,A){if(typeof I=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(I)}return c(I,j,A)}l.poolSize=8192;function c(I,j,A){if(typeof I=="string")return f(I,j);if(ArrayBuffer.isView(I))return p(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(ge(I,ArrayBuffer)||I&&ge(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(I,SharedArrayBuffer)||I&&ge(I.buffer,SharedArrayBuffer)))return g(I,j,A);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=I.valueOf&&I.valueOf();if(U!=null&&U!==I)return l.from(U,j,A);const ie=y(I);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return l.from(I[Symbol.toPrimitive]("string"),j,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}l.from=function(I,j,A){return c(I,j,A)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function d(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function u(I,j,A){return d(I),I<=0?i(I):j!==void 0?typeof A=="string"?i(I).fill(j,A):i(I).fill(j):i(I)}l.alloc=function(I,j,A){return u(I,j,A)};function h(I){return d(I),i(I<0?0:b(I)|0)}l.allocUnsafe=function(I){return h(I)},l.allocUnsafeSlow=function(I){return h(I)};function f(I,j){if((typeof j!="string"||j==="")&&(j="utf8"),!l.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const A=w(I,j)|0;let U=i(A);const ie=U.write(I,j);return ie!==A&&(U=U.slice(0,ie)),U}function m(I){const j=I.length<0?0:b(I.length)|0,A=i(j);for(let U=0;U<j;U+=1)A[U]=I[U]&255;return A}function p(I){if(ge(I,Uint8Array)){const j=new Uint8Array(I);return g(j.buffer,j.byteOffset,j.byteLength)}return m(I)}function g(I,j,A){if(j<0||I.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<j+(A||0))throw new RangeError('"length" is outside of buffer bounds');let U;return j===void 0&&A===void 0?U=new Uint8Array(I):A===void 0?U=new Uint8Array(I,j):U=new Uint8Array(I,j,A),Object.setPrototypeOf(U,l.prototype),U}function y(I){if(l.isBuffer(I)){const j=b(I.length)|0,A=i(j);return A.length===0||I.copy(A,0,0,j),A}if(I.length!==void 0)return typeof I.length!="number"||Ue(I.length)?i(0):m(I);if(I.type==="Buffer"&&Array.isArray(I.data))return m(I.data)}function b(I){if(I>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return I|0}function v(I){return+I!=I&&(I=0),l.alloc(+I)}l.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==l.prototype},l.compare=function(j,A){if(ge(j,Uint8Array)&&(j=l.from(j,j.offset,j.byteLength)),ge(A,Uint8Array)&&(A=l.from(A,A.offset,A.byteLength)),!l.isBuffer(j)||!l.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===A)return 0;let U=j.length,ie=A.length;for(let he=0,be=Math.min(U,ie);he<be;++he)if(j[he]!==A[he]){U=j[he],ie=A[he];break}return U<ie?-1:ie<U?1:0},l.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(j,A){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return l.alloc(0);let U;if(A===void 0)for(A=0,U=0;U<j.length;++U)A+=j[U].length;const ie=l.allocUnsafe(A);let he=0;for(U=0;U<j.length;++U){let be=j[U];if(ge(be,Uint8Array))he+be.length>ie.length?(l.isBuffer(be)||(be=l.from(be)),be.copy(ie,he)):Uint8Array.prototype.set.call(ie,be,he);else if(l.isBuffer(be))be.copy(ie,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=be.length}return ie};function w(I,j){if(l.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||ge(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const A=I.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&A===0)return 0;let ie=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return je(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return re(I).length;default:if(ie)return U?-1:je(I).length;j=(""+j).toLowerCase(),ie=!0}}l.byteLength=w;function k(I,j,A){let U=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,j>>>=0,A<=j))return"";for(I||(I="utf8");;)switch(I){case"hex":return H(this,j,A);case"utf8":case"utf-8":return V(this,j,A);case"ascii":return J(this,j,A);case"latin1":case"binary":return _(this,j,A);case"base64":return L(this,j,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,j,A);default:if(U)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),U=!0}}l.prototype._isBuffer=!0;function N(I,j,A){const U=I[j];I[j]=I[A],I[A]=U}l.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<j;A+=2)N(this,A,A+1);return this},l.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<j;A+=4)N(this,A,A+3),N(this,A+1,A+2);return this},l.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<j;A+=8)N(this,A,A+7),N(this,A+1,A+6),N(this,A+2,A+5),N(this,A+3,A+4);return this},l.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?V(this,0,j):k.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(j){if(!l.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:l.compare(this,j)===0},l.prototype.inspect=function(){let j="";const A=t.INSPECT_MAX_BYTES;return j=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(j+=" ... "),"<Buffer "+j+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(j,A,U,ie,he){if(ge(j,Uint8Array)&&(j=l.from(j,j.offset,j.byteLength)),!l.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(A===void 0&&(A=0),U===void 0&&(U=j?j.length:0),ie===void 0&&(ie=0),he===void 0&&(he=this.length),A<0||U>j.length||ie<0||he>this.length)throw new RangeError("out of range index");if(ie>=he&&A>=U)return 0;if(ie>=he)return-1;if(A>=U)return 1;if(A>>>=0,U>>>=0,ie>>>=0,he>>>=0,this===j)return 0;let be=he-ie,bt=U-A;const er=Math.min(be,bt),Yt=this.slice(ie,he),sr=j.slice(A,U);for(let zt=0;zt<er;++zt)if(Yt[zt]!==sr[zt]){be=Yt[zt],bt=sr[zt];break}return be<bt?-1:bt<be?1:0};function S(I,j,A,U,ie){if(I.length===0)return-1;if(typeof A=="string"?(U=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Ue(A)&&(A=ie?0:I.length-1),A<0&&(A=I.length+A),A>=I.length){if(ie)return-1;A=I.length-1}else if(A<0)if(ie)A=0;else return-1;if(typeof j=="string"&&(j=l.from(j,U)),l.isBuffer(j))return j.length===0?-1:C(I,j,A,U,ie);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(I,j,A):Uint8Array.prototype.lastIndexOf.call(I,j,A):C(I,[j],A,U,ie);throw new TypeError("val must be string, number or Buffer")}function C(I,j,A,U,ie){let he=1,be=I.length,bt=j.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(I.length<2||j.length<2)return-1;he=2,be/=2,bt/=2,A/=2}function er(sr,zt){return he===1?sr[zt]:sr.readUInt16BE(zt*he)}let Yt;if(ie){let sr=-1;for(Yt=A;Yt<be;Yt++)if(er(I,Yt)===er(j,sr===-1?0:Yt-sr)){if(sr===-1&&(sr=Yt),Yt-sr+1===bt)return sr*he}else sr!==-1&&(Yt-=Yt-sr),sr=-1}else for(A+bt>be&&(A=be-bt),Yt=A;Yt>=0;Yt--){let sr=!0;for(let zt=0;zt<bt;zt++)if(er(I,Yt+zt)!==er(j,zt)){sr=!1;break}if(sr)return Yt}return-1}l.prototype.includes=function(j,A,U){return this.indexOf(j,A,U)!==-1},l.prototype.indexOf=function(j,A,U){return S(this,j,A,U,!0)},l.prototype.lastIndexOf=function(j,A,U){return S(this,j,A,U,!1)};function E(I,j,A,U){A=Number(A)||0;const ie=I.length-A;U?(U=Number(U),U>ie&&(U=ie)):U=ie;const he=j.length;U>he/2&&(U=he/2);let be;for(be=0;be<U;++be){const bt=parseInt(j.substr(be*2,2),16);if(Ue(bt))return be;I[A+be]=bt}return be}function T(I,j,A,U){return ce(je(j,I.length-A),I,A,U)}function R(I,j,A,U){return ce(ht(j),I,A,U)}function B(I,j,A,U){return ce(re(j),I,A,U)}function M(I,j,A,U){return ce(pt(j,I.length-A),I,A,U)}l.prototype.write=function(j,A,U,ie){if(A===void 0)ie="utf8",U=this.length,A=0;else if(U===void 0&&typeof A=="string")ie=A,U=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(U)?(U=U>>>0,ie===void 0&&(ie="utf8")):(ie=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-A;if((U===void 0||U>he)&&(U=he),j.length>0&&(U<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let be=!1;for(;;)switch(ie){case"hex":return E(this,j,A,U);case"utf8":case"utf-8":return T(this,j,A,U);case"ascii":case"latin1":case"binary":return R(this,j,A,U);case"base64":return B(this,j,A,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,j,A,U);default:if(be)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),be=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(I,j,A){return j===0&&A===I.length?e.fromByteArray(I):e.fromByteArray(I.slice(j,A))}function V(I,j,A){A=Math.min(I.length,A);const U=[];let ie=j;for(;ie<A;){const he=I[ie];let be=null,bt=he>239?4:he>223?3:he>191?2:1;if(ie+bt<=A){let er,Yt,sr,zt;switch(bt){case 1:he<128&&(be=he);break;case 2:er=I[ie+1],(er&192)===128&&(zt=(he&31)<<6|er&63,zt>127&&(be=zt));break;case 3:er=I[ie+1],Yt=I[ie+2],(er&192)===128&&(Yt&192)===128&&(zt=(he&15)<<12|(er&63)<<6|Yt&63,zt>2047&&(zt<55296||zt>57343)&&(be=zt));break;case 4:er=I[ie+1],Yt=I[ie+2],sr=I[ie+3],(er&192)===128&&(Yt&192)===128&&(sr&192)===128&&(zt=(he&15)<<18|(er&63)<<12|(Yt&63)<<6|sr&63,zt>65535&&zt<1114112&&(be=zt))}}be===null?(be=65533,bt=1):be>65535&&(be-=65536,U.push(be>>>10&1023|55296),be=56320|be&1023),U.push(be),ie+=bt}return Q(U)}const ee=4096;function Q(I){const j=I.length;if(j<=ee)return String.fromCharCode.apply(String,I);let A="",U=0;for(;U<j;)A+=String.fromCharCode.apply(String,I.slice(U,U+=ee));return A}function J(I,j,A){let U="";A=Math.min(I.length,A);for(let ie=j;ie<A;++ie)U+=String.fromCharCode(I[ie]&127);return U}function _(I,j,A){let U="";A=Math.min(I.length,A);for(let ie=j;ie<A;++ie)U+=String.fromCharCode(I[ie]);return U}function H(I,j,A){const U=I.length;(!j||j<0)&&(j=0),(!A||A<0||A>U)&&(A=U);let ie="";for(let he=j;he<A;++he)ie+=Re[I[he]];return ie}function P(I,j,A){const U=I.slice(j,A);let ie="";for(let he=0;he<U.length-1;he+=2)ie+=String.fromCharCode(U[he]+U[he+1]*256);return ie}l.prototype.slice=function(j,A){const U=this.length;j=~~j,A=A===void 0?U:~~A,j<0?(j+=U,j<0&&(j=0)):j>U&&(j=U),A<0?(A+=U,A<0&&(A=0)):A>U&&(A=U),A<j&&(A=j);const ie=this.subarray(j,A);return Object.setPrototypeOf(ie,l.prototype),ie};function K(I,j,A){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+j>A)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(j,A,U){j=j>>>0,A=A>>>0,U||K(j,A,this.length);let ie=this[j],he=1,be=0;for(;++be<A&&(he*=256);)ie+=this[j+be]*he;return ie},l.prototype.readUintBE=l.prototype.readUIntBE=function(j,A,U){j=j>>>0,A=A>>>0,U||K(j,A,this.length);let ie=this[j+--A],he=1;for(;A>0&&(he*=256);)ie+=this[j+--A]*he;return ie},l.prototype.readUint8=l.prototype.readUInt8=function(j,A){return j=j>>>0,A||K(j,1,this.length),this[j]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(j,A){return j=j>>>0,A||K(j,2,this.length),this[j]|this[j+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(j,A){return j=j>>>0,A||K(j,2,this.length),this[j]<<8|this[j+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(j,A){return j=j>>>0,A||K(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(j,A){return j=j>>>0,A||K(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},l.prototype.readBigUInt64LE=Me(function(j){j=j>>>0,Ve(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&Be(j,this.length-8);const ie=A+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,he=this[++j]+this[++j]*2**8+this[++j]*2**16+U*2**24;return BigInt(ie)+(BigInt(he)<<BigInt(32))}),l.prototype.readBigUInt64BE=Me(function(j){j=j>>>0,Ve(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&Be(j,this.length-8);const ie=A*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],he=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+U;return(BigInt(ie)<<BigInt(32))+BigInt(he)}),l.prototype.readIntLE=function(j,A,U){j=j>>>0,A=A>>>0,U||K(j,A,this.length);let ie=this[j],he=1,be=0;for(;++be<A&&(he*=256);)ie+=this[j+be]*he;return he*=128,ie>=he&&(ie-=Math.pow(2,8*A)),ie},l.prototype.readIntBE=function(j,A,U){j=j>>>0,A=A>>>0,U||K(j,A,this.length);let ie=A,he=1,be=this[j+--ie];for(;ie>0&&(he*=256);)be+=this[j+--ie]*he;return he*=128,be>=he&&(be-=Math.pow(2,8*A)),be},l.prototype.readInt8=function(j,A){return j=j>>>0,A||K(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},l.prototype.readInt16LE=function(j,A){j=j>>>0,A||K(j,2,this.length);const U=this[j]|this[j+1]<<8;return U&32768?U|4294901760:U},l.prototype.readInt16BE=function(j,A){j=j>>>0,A||K(j,2,this.length);const U=this[j+1]|this[j]<<8;return U&32768?U|4294901760:U},l.prototype.readInt32LE=function(j,A){return j=j>>>0,A||K(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},l.prototype.readInt32BE=function(j,A){return j=j>>>0,A||K(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},l.prototype.readBigInt64LE=Me(function(j){j=j>>>0,Ve(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&Be(j,this.length-8);const ie=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(U<<24);return(BigInt(ie)<<BigInt(32))+BigInt(A+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),l.prototype.readBigInt64BE=Me(function(j){j=j>>>0,Ve(j,"offset");const A=this[j],U=this[j+7];(A===void 0||U===void 0)&&Be(j,this.length-8);const ie=(A<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(ie)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+U)}),l.prototype.readFloatLE=function(j,A){return j=j>>>0,A||K(j,4,this.length),r.read(this,j,!0,23,4)},l.prototype.readFloatBE=function(j,A){return j=j>>>0,A||K(j,4,this.length),r.read(this,j,!1,23,4)},l.prototype.readDoubleLE=function(j,A){return j=j>>>0,A||K(j,8,this.length),r.read(this,j,!0,52,8)},l.prototype.readDoubleBE=function(j,A){return j=j>>>0,A||K(j,8,this.length),r.read(this,j,!1,52,8)};function F(I,j,A,U,ie,he){if(!l.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>ie||j<he)throw new RangeError('"value" argument is out of bounds');if(A+U>I.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(j,A,U,ie){if(j=+j,A=A>>>0,U=U>>>0,!ie){const bt=Math.pow(2,8*U)-1;F(this,j,A,U,bt,0)}let he=1,be=0;for(this[A]=j&255;++be<U&&(he*=256);)this[A+be]=j/he&255;return A+U},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(j,A,U,ie){if(j=+j,A=A>>>0,U=U>>>0,!ie){const bt=Math.pow(2,8*U)-1;F(this,j,A,U,bt,0)}let he=U-1,be=1;for(this[A+he]=j&255;--he>=0&&(be*=256);)this[A+he]=j/be&255;return A+U},l.prototype.writeUint8=l.prototype.writeUInt8=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,1,255,0),this[A]=j&255,A+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,2,65535,0),this[A]=j&255,this[A+1]=j>>>8,A+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,2,65535,0),this[A]=j>>>8,this[A+1]=j&255,A+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,4,4294967295,0),this[A+3]=j>>>24,this[A+2]=j>>>16,this[A+1]=j>>>8,this[A]=j&255,A+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,4,4294967295,0),this[A]=j>>>24,this[A+1]=j>>>16,this[A+2]=j>>>8,this[A+3]=j&255,A+4};function ne(I,j,A,U,ie){ye(j,U,ie,I,A,7);let he=Number(j&BigInt(4294967295));I[A++]=he,he=he>>8,I[A++]=he,he=he>>8,I[A++]=he,he=he>>8,I[A++]=he;let be=Number(j>>BigInt(32)&BigInt(4294967295));return I[A++]=be,be=be>>8,I[A++]=be,be=be>>8,I[A++]=be,be=be>>8,I[A++]=be,A}function z(I,j,A,U,ie){ye(j,U,ie,I,A,7);let he=Number(j&BigInt(4294967295));I[A+7]=he,he=he>>8,I[A+6]=he,he=he>>8,I[A+5]=he,he=he>>8,I[A+4]=he;let be=Number(j>>BigInt(32)&BigInt(4294967295));return I[A+3]=be,be=be>>8,I[A+2]=be,be=be>>8,I[A+1]=be,be=be>>8,I[A]=be,A+8}l.prototype.writeBigUInt64LE=Me(function(j,A=0){return ne(this,j,A,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Me(function(j,A=0){return z(this,j,A,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(j,A,U,ie){if(j=+j,A=A>>>0,!ie){const er=Math.pow(2,8*U-1);F(this,j,A,U,er-1,-er)}let he=0,be=1,bt=0;for(this[A]=j&255;++he<U&&(be*=256);)j<0&&bt===0&&this[A+he-1]!==0&&(bt=1),this[A+he]=(j/be>>0)-bt&255;return A+U},l.prototype.writeIntBE=function(j,A,U,ie){if(j=+j,A=A>>>0,!ie){const er=Math.pow(2,8*U-1);F(this,j,A,U,er-1,-er)}let he=U-1,be=1,bt=0;for(this[A+he]=j&255;--he>=0&&(be*=256);)j<0&&bt===0&&this[A+he+1]!==0&&(bt=1),this[A+he]=(j/be>>0)-bt&255;return A+U},l.prototype.writeInt8=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,1,127,-128),j<0&&(j=255+j+1),this[A]=j&255,A+1},l.prototype.writeInt16LE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,2,32767,-32768),this[A]=j&255,this[A+1]=j>>>8,A+2},l.prototype.writeInt16BE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,2,32767,-32768),this[A]=j>>>8,this[A+1]=j&255,A+2},l.prototype.writeInt32LE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,4,2147483647,-2147483648),this[A]=j&255,this[A+1]=j>>>8,this[A+2]=j>>>16,this[A+3]=j>>>24,A+4},l.prototype.writeInt32BE=function(j,A,U){return j=+j,A=A>>>0,U||F(this,j,A,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[A]=j>>>24,this[A+1]=j>>>16,this[A+2]=j>>>8,this[A+3]=j&255,A+4},l.prototype.writeBigInt64LE=Me(function(j,A=0){return ne(this,j,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Me(function(j,A=0){return z(this,j,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(I,j,A,U,ie,he){if(A+U>I.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function oe(I,j,A,U,ie){return j=+j,A=A>>>0,ie||Z(I,j,A,4),r.write(I,j,A,U,23,4),A+4}l.prototype.writeFloatLE=function(j,A,U){return oe(this,j,A,!0,U)},l.prototype.writeFloatBE=function(j,A,U){return oe(this,j,A,!1,U)};function ue(I,j,A,U,ie){return j=+j,A=A>>>0,ie||Z(I,j,A,8),r.write(I,j,A,U,52,8),A+8}l.prototype.writeDoubleLE=function(j,A,U){return ue(this,j,A,!0,U)},l.prototype.writeDoubleBE=function(j,A,U){return ue(this,j,A,!1,U)},l.prototype.copy=function(j,A,U,ie){if(!l.isBuffer(j))throw new TypeError("argument should be a Buffer");if(U||(U=0),!ie&&ie!==0&&(ie=this.length),A>=j.length&&(A=j.length),A||(A=0),ie>0&&ie<U&&(ie=U),ie===U||j.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),j.length-A<ie-U&&(ie=j.length-A+U);const he=ie-U;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,U,ie):Uint8Array.prototype.set.call(j,this.subarray(U,ie),A),he},l.prototype.fill=function(j,A,U,ie){if(typeof j=="string"){if(typeof A=="string"?(ie=A,A=0,U=this.length):typeof U=="string"&&(ie=U,U=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!l.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(j.length===1){const be=j.charCodeAt(0);(ie==="utf8"&&be<128||ie==="latin1")&&(j=be)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(A<0||this.length<A||this.length<U)throw new RangeError("Out of range index");if(U<=A)return this;A=A>>>0,U=U===void 0?this.length:U>>>0,j||(j=0);let he;if(typeof j=="number")for(he=A;he<U;++he)this[he]=j;else{const be=l.isBuffer(j)?j:l.from(j,ie),bt=be.length;if(bt===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(he=0;he<U-A;++he)this[he+A]=be[he%bt]}return this};const _e={};function we(I,j,A){_e[I]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}we("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),we("ERR_INVALID_ARG_TYPE",function(I,j){return`The "${I}" argument must be of type number. Received type ${typeof j}`},TypeError),we("ERR_OUT_OF_RANGE",function(I,j,A){let U=`The value of "${I}" is out of range.`,ie=A;return Number.isInteger(A)&&Math.abs(A)>2**32?ie=Y(String(A)):typeof A=="bigint"&&(ie=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(ie=Y(ie)),ie+="n"),U+=` It must be ${j}. Received ${ie}`,U},RangeError);function Y(I){let j="",A=I.length;const U=I[0]==="-"?1:0;for(;A>=U+4;A-=3)j=`_${I.slice(A-3,A)}${j}`;return`${I.slice(0,A)}${j}`}function le(I,j,A){Ve(j,"offset"),(I[j]===void 0||I[j+A]===void 0)&&Be(j,I.length-(A+1))}function ye(I,j,A,U,ie,he){if(I>A||I<j){const be=typeof j=="bigint"?"n":"";let bt;throw j===0||j===BigInt(0)?bt=`>= 0${be} and < 2${be} ** ${(he+1)*8}${be}`:bt=`>= -(2${be} ** ${(he+1)*8-1}${be}) and < 2 ** ${(he+1)*8-1}${be}`,new _e.ERR_OUT_OF_RANGE("value",bt,I)}le(U,ie,he)}function Ve(I,j){if(typeof I!="number")throw new _e.ERR_INVALID_ARG_TYPE(j,"number",I)}function Be(I,j,A){throw Math.floor(I)!==I?(Ve(I,A),new _e.ERR_OUT_OF_RANGE("offset","an integer",I)):j<0?new _e.ERR_BUFFER_OUT_OF_BOUNDS:new _e.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,I)}const ut=/[^+/0-9A-Za-z-_]/g;function Te(I){if(I=I.split("=")[0],I=I.trim().replace(ut,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function je(I,j){j=j||1/0;let A;const U=I.length;let ie=null;const he=[];for(let be=0;be<U;++be){if(A=I.charCodeAt(be),A>55295&&A<57344){if(!ie){if(A>56319){(j-=3)>-1&&he.push(239,191,189);continue}else if(be+1===U){(j-=3)>-1&&he.push(239,191,189);continue}ie=A;continue}if(A<56320){(j-=3)>-1&&he.push(239,191,189),ie=A;continue}A=(ie-55296<<10|A-56320)+65536}else ie&&(j-=3)>-1&&he.push(239,191,189);if(ie=null,A<128){if((j-=1)<0)break;he.push(A)}else if(A<2048){if((j-=2)<0)break;he.push(A>>6|192,A&63|128)}else if(A<65536){if((j-=3)<0)break;he.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((j-=4)<0)break;he.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return he}function ht(I){const j=[];for(let A=0;A<I.length;++A)j.push(I.charCodeAt(A)&255);return j}function pt(I,j){let A,U,ie;const he=[];for(let be=0;be<I.length&&!((j-=2)<0);++be)A=I.charCodeAt(be),U=A>>8,ie=A%256,he.push(ie),he.push(U);return he}function re(I){return e.toByteArray(Te(I))}function ce(I,j,A,U){let ie;for(ie=0;ie<U&&!(ie+A>=j.length||ie>=I.length);++ie)j[ie+A]=I[ie];return ie}function ge(I,j){return I instanceof j||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===j.name}function Ue(I){return I!==I}const Re=function(){const I="0123456789abcdef",j=new Array(256);for(let A=0;A<16;++A){const U=A*16;for(let ie=0;ie<16;++ie)j[U+ie]=I[A]+I[ie]}return j}();function Me(I){return typeof BigInt>"u"?Qe:I}function Qe(){throw new Error("BigInt not supported")}})(kZ);window.Buffer=kZ.Buffer;const rBe=new bQ({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:30*1e3}}});LS.createRoot(document.getElementById("root")).render(o.jsx(st.StrictMode,{children:o.jsx(SQ,{client:rBe,children:o.jsx(z9,{children:o.jsx(tQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(GFe,{})})})})}));export{TSe as $,ET as F,st as R,Nt as _,DBe as a,tC as b,f7 as c,sBe as d,_Z as e,XDe as f,sk as g,eLe as h,BBe as i,$Be as j,FBe as k,o as l,ct as m,W4 as n,LBe as p,RK as s,s9e as t,vA as w,tLe as z};
//# sourceMappingURL=index-DLN5Vspu.js.map
